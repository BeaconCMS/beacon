var BeaconAdmin=(()=>{var rh=Object.create;var Ja=Object.defineProperty;var ah=Object.getOwnPropertyDescriptor;var lh=Object.getOwnPropertyNames;var dh=Object.getPrototypeOf,hh=Object.prototype.hasOwnProperty;var ch=(zn,On,no)=>On in zn?Ja(zn,On,{enumerable:!0,configurable:!0,writable:!0,value:no}):zn[On]=no;var uh=(zn,On)=>()=>(On||zn((On={exports:{}}).exports,On),On.exports);var gh=(zn,On,no,gs)=>{if(On&&typeof On=="object"||typeof On=="function")for(let kn of lh(On))!hh.call(zn,kn)&&kn!==no&&Ja(zn,kn,{get:()=>On[kn],enumerable:!(gs=ah(On,kn))||gs.enumerable});return zn};var ph=(zn,On,no)=>(no=zn!=null?rh(dh(zn)):{},gh(On||!zn||!zn.__esModule?Ja(no,"default",{value:zn,enumerable:!0}):no,zn));var Ho=(zn,On,no)=>(ch(zn,typeof On!="symbol"?On+"":On,no),no);var ca=(zn,On,no)=>new Promise((gs,kn)=>{var er=t=>{try{Ie(no.next(t))}catch(m){kn(m)}},ut=t=>{try{Ie(no.throw(t))}catch(m){kn(m)}},Ie=t=>t.done?gs(t.value):Promise.resolve(t.value).then(er,ut);Ie((no=no.apply(zn,On)).next())});var _d=uh((Gn,gl)=>{(function(zn,On){typeof Gn=="object"&&typeof gl=="object"?gl.exports=On():typeof define=="function"&&define.amd?define("LiveMonacoEditor",[],On):typeof Gn=="object"?Gn.LiveMonacoEditor=On():zn.LiveMonacoEditor=On()})(self,()=>(()=>{var zn,On,no={1593:(ut,Ie,t)=>{var m;self.MonacoEnvironment=(m={editorWorkerService:"editor.worker.js",html:"html.worker.js",handlebars:"html.worker.js",razor:"html.worker.js"},{globalAPI:!0,getWorkerUrl:function(B,u){var I=t.p,_=(I?I.replace(/\/$/,"")+"/":"")+m[u];if(/^((http:)|(https:)|(file:)|(\/\/))/.test(_)){var A=String(window.location),x=A.substr(0,A.length-window.location.hash.length-window.location.search.length-window.location.pathname.length);if(_.substring(0,x.length)!==x){/^(\/\/)/.test(_)&&(_=window.location.protocol+_);var v=new Blob(["/*"+u+'*/importScripts("'+_+'");'],{type:"application/javascript"});return URL.createObjectURL(v)}}return _}}),t(9477),t(236),t(1387),t(9317),t(4367),t(2102),t(5833),t(1925),t(5729),t(6838),t(2719),t(3365),t(3740),t(4907),t(1895),t(6022),t(6917),t(2111),t(1633),t(8060),t(4125),t(1097),t(4970),t(3588),t(628),t(2470),t(9817),t(9646),t(6353),t(4602),t(6348),t(2306),t(4074),t(7830),t(7615),t(995),t(76),t(7253),t(3519),t(7061),t(5313),t(8956),t(8944),t(8766),t(3945),t(5048),t(2894),t(1168),t(9995),t(102),t(8762),t(544),t(4804),t(8088),t(5662),t(4662),t(2614),t(2954),t(9607),t(943),t(7181),t(6709),ut.exports=t(2518),t(7365),t(201),t(8423),t(3814)},6268:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{PixelRatio:()=>x,addMatchMediaChangeListener:()=>A,getZoomFactor:()=>v,isAndroid:()=>b,isChrome:()=>h,isElectron:()=>c,isFirefox:()=>d,isSafari:()=>r,isStandalone:()=>a,isWebKit:()=>o,isWebkitWebView:()=>i});var m=t(4669),B=t(5976);class u{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}u.INSTANCE=new u;class I extends B.JT{constructor(){super(),this._onDidChange=this._register(new m.Q5),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(E){var D;(D=this._mediaQueryList)===null||D===void 0||D.removeEventListener("change",this._listener),this._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),E&&this._onDidChange.fire()}}class _ extends B.JT{get value(){return this._value}constructor(){super(),this._onDidChange=this._register(new m.Q5),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();let E=this._register(new I);this._register(E.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}_getPixelRatio(){let E=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(E.webkitBackingStorePixelRatio||E.mozBackingStorePixelRatio||E.msBackingStorePixelRatio||E.oBackingStorePixelRatio||E.backingStorePixelRatio||1)}}function A(w,E){typeof w=="string"&&(w=window.matchMedia(w)),w.addEventListener("change",E)}let x=new class{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=(0,B.dk)(new _)),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}};function v(){return u.INSTANCE.getZoomFactor()}let f=navigator.userAgent,d=f.indexOf("Firefox")>=0,o=f.indexOf("AppleWebKit")>=0,h=f.indexOf("Chrome")>=0,r=!h&&f.indexOf("Safari")>=0,i=!h&&!r&&o,c=f.indexOf("Electron/")>=0,b=f.indexOf("Android")>=0,l=!1;if(window.matchMedia){let w=window.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),E=window.matchMedia("(display-mode: fullscreen)");l=w.matches,A(w,({matches:D})=>{l&&E.matches||(l=D)})}function a(){return l}},161:(ut,Ie,t)=>{"use strict";t.d(Ie,{D:()=>u});var m=t(6268),B=t(1432);let u={clipboard:{writeText:B.tY||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:B.tY||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:B.tY||m.isStandalone()?0:navigator.keyboard||m.isSafari?1:2,touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)}},3547:(ut,Ie,t)=>{"use strict";t.d(Ie,{g:()=>m});let m={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:t(1170).v.text}},5321:(ut,Ie,t)=>{"use strict";t.d(Ie,{$:()=>Le,$Z:()=>le,Ay:()=>fe,Ce:()=>Ee,Cp:()=>ee,D6:()=>L,Dx:()=>D,FK:()=>W,Fx:()=>H,GQ:()=>l,I8:()=>T,If:()=>K,OO:()=>oe,PO:()=>o,R3:()=>Ce,Re:()=>ce,Ro:()=>R,Uh:()=>me,Uw:()=>h,V3:()=>xe,XT:()=>tt,_0:()=>ve,_F:()=>Qe,_h:()=>Ye,_q:()=>ht,cl:()=>de,dS:()=>p,dp:()=>$,eg:()=>xt,fk:()=>ie,go:()=>ye,h:()=>At,i:()=>N,iJ:()=>ke,jL:()=>w,jg:()=>F,jt:()=>We,lI:()=>a,mc:()=>Ae,mu:()=>b,nm:()=>i,sQ:()=>bt,tw:()=>be,uN:()=>se,uU:()=>z,vL:()=>ue,vY:()=>q,w:()=>C,wY:()=>Ve,wn:()=>j,xQ:()=>O,zB:()=>U});var m=t(6268),B=t(161),u=t(9069),I=t(7448),_=t(7301),A=t(4669),x=t(921),v=t(5976),f=t(6663),d=t(1432);function o(Lt){for(;Lt.firstChild;)Lt.firstChild.remove()}function h(Lt){var ct;return(ct=Lt==null?void 0:Lt.isConnected)!==null&&ct!==void 0&&ct}class r{constructor(ct,Kt,pi,li){this._node=ct,this._type=Kt,this._handler=pi,this._options=li||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function i(Lt,ct,Kt,pi){return new r(Lt,ct,Kt,pi)}function c(Lt){return function(ct){return Lt(new I.n(ct))}}let b=function(Lt,ct,Kt,pi){let li=Kt;return ct==="click"||ct==="mousedown"?li=c(Kt):ct!=="keydown"&&ct!=="keypress"&&ct!=="keyup"||(li=function(Wi){return function(Vi){return Wi(new u.y(Vi))}}(Kt)),i(Lt,ct,li,pi)},l=function(Lt,ct,Kt){return function(pi,li,Wi){return i(pi,d.gn&&B.D.pointerEvents?be.POINTER_DOWN:be.MOUSE_DOWN,li,Wi)}(Lt,c(ct),Kt)},a,w;class E{constructor(ct,Kt=0){this._runner=ct,this.priority=Kt,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(ct){(0,_.dL)(ct)}}static sort(ct,Kt){return Kt.priority-ct.priority}}function D(Lt){return document.defaultView.getComputedStyle(Lt,null)}function L(Lt){if(Lt!==document.body)return new R(Lt.clientWidth,Lt.clientHeight);if(d.gn&&window.visualViewport)return new R(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new R(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new R(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new R(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}(function(){let Lt=[],ct=null,Kt=!1,pi=!1,li=()=>{for(Kt=!1,ct=Lt,Lt=[],pi=!0;ct.length>0;)ct.sort(E.sort),ct.shift().execute();pi=!1};w=(Wi,Vi=0)=>{let Xi=new E(Wi,Vi);return Lt.push(Xi),Kt||(Kt=!0,requestAnimationFrame(li)),Xi},a=(Wi,Vi)=>{if(pi){let Xi=new E(Wi,Vi);return ct.push(Xi),Xi}return w(Wi,Vi)}})();class k{static convertToPixels(ct,Kt){return parseFloat(Kt)||0}static getDimension(ct,Kt,pi){let li=D(ct),Wi=li?li.getPropertyValue(Kt):"0";return k.convertToPixels(ct,Wi)}static getBorderLeftWidth(ct){return k.getDimension(ct,"border-left-width","borderLeftWidth")}static getBorderRightWidth(ct){return k.getDimension(ct,"border-right-width","borderRightWidth")}static getBorderTopWidth(ct){return k.getDimension(ct,"border-top-width","borderTopWidth")}static getBorderBottomWidth(ct){return k.getDimension(ct,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(ct){return k.getDimension(ct,"padding-left","paddingLeft")}static getPaddingRight(ct){return k.getDimension(ct,"padding-right","paddingRight")}static getPaddingTop(ct){return k.getDimension(ct,"padding-top","paddingTop")}static getPaddingBottom(ct){return k.getDimension(ct,"padding-bottom","paddingBottom")}static getMarginLeft(ct){return k.getDimension(ct,"margin-left","marginLeft")}static getMarginTop(ct){return k.getDimension(ct,"margin-top","marginTop")}static getMarginRight(ct){return k.getDimension(ct,"margin-right","marginRight")}static getMarginBottom(ct){return k.getDimension(ct,"margin-bottom","marginBottom")}}class R{constructor(ct,Kt){this.width=ct,this.height=Kt}with(ct=this.width,Kt=this.height){return ct!==this.width||Kt!==this.height?new R(ct,Kt):this}static is(ct){return typeof ct=="object"&&typeof ct.height=="number"&&typeof ct.width=="number"}static lift(ct){return ct instanceof R?ct:new R(ct.width,ct.height)}static equals(ct,Kt){return ct===Kt||!(!ct||!Kt)&&ct.width===Kt.width&&ct.height===Kt.height}}function O(Lt){let ct=Lt.offsetParent,Kt=Lt.offsetTop,pi=Lt.offsetLeft;for(;(Lt=Lt.parentNode)!==null&&Lt!==document.body&&Lt!==document.documentElement;){Kt-=Lt.scrollTop;let li=J(Lt)?null:D(Lt);li&&(pi-=li.direction!=="rtl"?Lt.scrollLeft:-Lt.scrollLeft),Lt===ct&&(pi+=k.getBorderLeftWidth(Lt),Kt+=k.getBorderTopWidth(Lt),Kt+=Lt.offsetTop,pi+=Lt.offsetLeft,ct=Lt.offsetParent)}return{left:pi,top:Kt}}function $(Lt,ct,Kt){typeof ct=="number"&&(Lt.style.width=`${ct}px`),typeof Kt=="number"&&(Lt.style.height=`${Kt}px`)}function N(Lt){let ct=Lt.getBoundingClientRect();return{left:ct.left+window.scrollX,top:ct.top+window.scrollY,width:ct.width,height:ct.height}}function T(Lt){let ct=Lt,Kt=1;do{let pi=D(ct).zoom;pi!=null&&pi!=="1"&&(Kt*=pi),ct=ct.parentElement}while(ct!==null&&ct!==document.documentElement);return Kt}function C(Lt){let ct=k.getMarginLeft(Lt)+k.getMarginRight(Lt);return Lt.offsetWidth+ct}function W(Lt){let ct=k.getBorderLeftWidth(Lt)+k.getBorderRightWidth(Lt),Kt=k.getPaddingLeft(Lt)+k.getPaddingRight(Lt);return Lt.offsetWidth-ct-Kt}function K(Lt){let ct=k.getBorderTopWidth(Lt)+k.getBorderBottomWidth(Lt),Kt=k.getPaddingTop(Lt)+k.getPaddingBottom(Lt);return Lt.offsetHeight-ct-Kt}function j(Lt){let ct=k.getMarginTop(Lt)+k.getMarginBottom(Lt);return Lt.offsetHeight+ct}function F(Lt,ct){for(;Lt;){if(Lt===ct)return!0;Lt=Lt.parentNode}return!1}function H(Lt,ct,Kt){for(;Lt&&Lt.nodeType===Lt.ELEMENT_NODE;){if(Lt.classList.contains(ct))return Lt;if(Kt){if(typeof Kt=="string"){if(Lt.classList.contains(Kt))return null}else if(Lt===Kt)return null}Lt=Lt.parentNode}return null}function z(Lt,ct,Kt){return!!H(Lt,ct,Kt)}function J(Lt){return Lt&&!!Lt.host&&!!Lt.mode}function oe(Lt){return!!fe(Lt)}function fe(Lt){for(;Lt.parentNode;){if(Lt===document.body)return null;Lt=Lt.parentNode}return J(Lt)?Lt:null}function q(){let Lt=document.activeElement;for(;Lt!=null&&Lt.shadowRoot;)Lt=Lt.shadowRoot.activeElement;return Lt}function p(Lt=document.getElementsByTagName("head")[0],ct){let Kt=document.createElement("style");return Kt.type="text/css",Kt.media="screen",ct==null||ct(Kt),Lt.appendChild(Kt),Kt}R.None=new R(0,0);let re=null;function ne(){return re||(re=p()),re}function ie(Lt,ct,Kt=ne()){Kt&&ct&&Kt.sheet.insertRule(Lt+"{"+ct+"}",0)}function se(Lt,ct=ne()){if(!ct)return;let Kt=function(li){var Wi,Vi;return!((Wi=li==null?void 0:li.sheet)===null||Wi===void 0)&&Wi.rules?li.sheet.rules:!((Vi=li==null?void 0:li.sheet)===null||Vi===void 0)&&Vi.cssRules?li.sheet.cssRules:[]}(ct),pi=[];for(let li=0;li<Kt.length;li++)Kt[li].selectorText.indexOf(Lt)!==-1&&pi.push(li);for(let li=pi.length-1;li>=0;li--)ct.sheet.deleteRule(pi[li])}function ce(Lt){return typeof HTMLElement=="object"?Lt instanceof HTMLElement:Lt&&typeof Lt=="object"&&Lt.nodeType===1&&typeof Lt.nodeName=="string"}let be={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:m.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:m.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:m.isWebKit?"webkitAnimationIteration":"animationiteration"};function de(Lt){let ct=Lt;return!(!ct||typeof ct.preventDefault!="function"||typeof ct.stopPropagation!="function")}let U={stop:(Lt,ct)=>(Lt.preventDefault(),ct&&Lt.stopPropagation(),Lt)};function ue(Lt){let ct=[];for(let Kt=0;Lt&&Lt.nodeType===Lt.ELEMENT_NODE;Kt++)ct[Kt]=Lt.scrollTop,Lt=Lt.parentNode;return ct}function ve(Lt,ct){for(let Kt=0;Lt&&Lt.nodeType===Lt.ELEMENT_NODE;Kt++)Lt.scrollTop!==ct[Kt]&&(Lt.scrollTop=ct[Kt]),Lt=Lt.parentNode}class X extends v.JT{static hasFocusWithin(ct){let Kt=fe(ct);return F(Kt?Kt.activeElement:document.activeElement,ct)}constructor(ct){super(),this._onDidFocus=this._register(new A.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new A.Q5),this.onDidBlur=this._onDidBlur.event;let Kt=X.hasFocusWithin(ct),pi=!1,li=()=>{pi=!1,Kt||(Kt=!0,this._onDidFocus.fire())},Wi=()=>{Kt&&(pi=!0,window.setTimeout(()=>{pi&&(pi=!1,Kt=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{X.hasFocusWithin(ct)!==Kt&&(Kt?Wi():li())},this._register(i(ct,be.FOCUS,li,!0)),this._register(i(ct,be.BLUR,Wi,!0)),this._register(i(ct,be.FOCUS_IN,()=>this._refreshStateHandler())),this._register(i(ct,be.FOCUS_OUT,()=>this._refreshStateHandler()))}}function ye(Lt){return new X(Lt)}function Ce(Lt,...ct){if(Lt.append(...ct),ct.length===1&&typeof ct[0]!="string")return ct[0]}function Ee(Lt,ct){return Lt.insertBefore(ct,Lt.firstChild),ct}function Ae(Lt,...ct){Lt.innerText="",Ce(Lt,...ct)}let Fe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var _e;function te(Lt,ct,Kt,...pi){let li=Fe.exec(ct);if(!li)throw new Error("Bad use of emmet");let Wi=li[1]||"div",Vi;return Vi=Lt!==_e.HTML?document.createElementNS(Lt,Wi):document.createElement(Wi),li[3]&&(Vi.id=li[3]),li[4]&&(Vi.className=li[4].replace(/\./g," ").trim()),Kt&&Object.entries(Kt).forEach(([Xi,en])=>{en!==void 0&&(/^on\w+$/.test(Xi)?Vi[Xi]=en:Xi==="selected"?en&&Vi.setAttribute(Xi,"true"):Vi.setAttribute(Xi,en))}),Vi.append(...pi),Vi}function Le(Lt,ct,...Kt){return te(_e.HTML,Lt,ct,...Kt)}function ke(Lt,...ct){Lt?le(...ct):ee(...ct)}function le(...Lt){for(let ct of Lt)ct.style.display="",ct.removeAttribute("aria-hidden")}function ee(...Lt){for(let ct of Lt)ct.style.display="none",ct.setAttribute("aria-hidden","true")}function me(Lt){let ct=window.devicePixelRatio*Lt;return Math.max(1,Math.floor(ct))/window.devicePixelRatio}function xe(Lt){window.open(Lt,"_blank","noopener")}function We(Lt){let ct=()=>{Lt(),Kt=w(ct)},Kt=w(ct);return(0,v.OF)(()=>Kt.dispose())}function Ve(Lt){return Lt?`url('${f.Gi.uriToBrowserUri(Lt).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function Ye(Lt){return`'${Lt.replace(/'/g,"%27")}'`}function tt(Lt,ct){if(Lt!==void 0){let Kt=Lt.match(/^\s*var\((.+)\)$/);if(Kt){let pi=Kt[1].split(",",2);return pi.length===2&&(ct=tt(pi[1].trim(),ct)),`var(${pi[0]}, ${ct})`}return Lt}return ct}function Qe(Lt,ct=!1){let Kt=document.createElement("a");return x.v5("afterSanitizeAttributes",pi=>{for(let li of["href","src"])if(pi.hasAttribute(li)){let Wi=pi.getAttribute(li);if(li==="href"&&Wi.startsWith("#"))continue;if(Kt.href=Wi,!Lt.includes(Kt.protocol.replace(/:$/,""))){if(ct&&li==="src"&&Kt.href.startsWith("data:"))continue;pi.removeAttribute(li)}}}),(0,v.OF)(()=>{x.ok("afterSanitizeAttributes")})}(function(Lt){Lt.HTML="http://www.w3.org/1999/xhtml",Lt.SVG="http://www.w3.org/2000/svg"})(_e||(_e={})),Le.SVG=function(Lt,ct,...Kt){return te(_e.SVG,Lt,ct,...Kt)},f.WX.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");let bt=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});class ht extends A.Q5{constructor(){super(),this._subscriptions=new v.SL,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(i(window,"keydown",ct=>{if(ct.defaultPrevented)return;let Kt=new u.y(ct);if(Kt.keyCode!==6||!ct.repeat){if(ct.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(ct.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(ct.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(ct.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(Kt.keyCode===6)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=ct.altKey,this._keyStatus.ctrlKey=ct.ctrlKey,this._keyStatus.metaKey=ct.metaKey,this._keyStatus.shiftKey=ct.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=ct,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(i(window,"keyup",ct=>{ct.defaultPrevented||(!ct.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!ct.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!ct.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!ct.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=ct.altKey,this._keyStatus.ctrlKey=ct.ctrlKey,this._keyStatus.metaKey=ct.metaKey,this._keyStatus.shiftKey=ct.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=ct,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(i(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(i(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(i(document.body,"mousemove",ct=>{ct.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(i(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ht.instance||(ht.instance=new ht),ht.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class xt extends v.JT{constructor(ct,Kt){super(),this.element=ct,this.callbacks=Kt,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(i(this.element,be.DRAG_ENTER,ct=>{this.counter++,this.dragStartTime=ct.timeStamp,this.callbacks.onDragEnter(ct)})),this._register(i(this.element,be.DRAG_OVER,ct=>{var Kt,pi;ct.preventDefault(),(pi=(Kt=this.callbacks).onDragOver)===null||pi===void 0||pi.call(Kt,ct,ct.timeStamp-this.dragStartTime)})),this._register(i(this.element,be.DRAG_LEAVE,ct=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(ct))})),this._register(i(this.element,be.DRAG_END,ct=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(ct)})),this._register(i(this.element,be.DROP,ct=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(ct)}))}}let Qt=new RegExp("(?<tag>[\\w\\-]+)?(?:#(?<id>[\\w\\-]+))?(?<class>(?:\\.(?:[\\w\\-]+))*)(?:@(?<name>(?:[\\w\\_])+))?");function At(Lt,...ct){let Kt,pi;Array.isArray(ct[0])?(Kt={},pi=ct[0]):(Kt=ct[0]||{},pi=ct[1]);let li=Qt.exec(Lt);if(!li||!li.groups)throw new Error("Bad use of h");let Wi=li.groups.tag||"div",Vi=document.createElement(Wi);li.groups.id&&(Vi.id=li.groups.id);let Xi=[];if(li.groups.class)for(let rn of li.groups.class.split("."))rn!==""&&Xi.push(rn);if(Kt.className!==void 0)for(let rn of Kt.className.split("."))rn!==""&&Xi.push(rn);Xi.length>0&&(Vi.className=Xi.join(" "));let en={};if(li.groups.name&&(en[li.groups.name]=Vi),pi)for(let rn of pi)rn instanceof HTMLElement?Vi.appendChild(rn):typeof rn=="string"?Vi.append(rn):(Object.assign(en,rn),Vi.appendChild(rn.root));for(let[rn,tn]of Object.entries(Kt))if(rn!=="className")if(rn==="style")for(let[yn,sn]of Object.entries(tn))Vi.style.setProperty(mi(yn),typeof sn=="number"?sn+"px":""+sn);else rn==="tabIndex"?Vi.tabIndex=tn:Vi.setAttribute(mi(rn),tn.toString());return en.root=Vi,en}function mi(Lt){return Lt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},921:(ut,Ie,t)=>{"use strict";t.d(Ie,{Nw:()=>ue,ok:()=>X,v5:()=>ve});var m=Object.hasOwnProperty,B=Object.setPrototypeOf,u=Object.isFrozen,I=Object.getPrototypeOf,_=Object.getOwnPropertyDescriptor,A=Object.freeze,x=Object.seal,v=Object.create,f=typeof Reflect!="undefined"&&Reflect,d=f.apply,o=f.construct;d||(d=function(ye,Ce,Ee){return ye.apply(Ce,Ee)}),A||(A=function(ye){return ye}),x||(x=function(ye){return ye}),o||(o=function(ye,Ce){return new(Function.prototype.bind.apply(ye,[null].concat(function(Ee){if(Array.isArray(Ee)){for(var Ae=0,Fe=Array(Ee.length);Ae<Ee.length;Ae++)Fe[Ae]=Ee[Ae];return Fe}return Array.from(Ee)}(Ce))))});var h,r=k(Array.prototype.forEach),i=k(Array.prototype.pop),c=k(Array.prototype.push),b=k(String.prototype.toLowerCase),l=k(String.prototype.match),a=k(String.prototype.replace),w=k(String.prototype.indexOf),E=k(String.prototype.trim),D=k(RegExp.prototype.test),L=(h=TypeError,function(){for(var ye=arguments.length,Ce=Array(ye),Ee=0;Ee<ye;Ee++)Ce[Ee]=arguments[Ee];return o(h,Ce)});function k(ye){return function(Ce){for(var Ee=arguments.length,Ae=Array(Ee>1?Ee-1:0),Fe=1;Fe<Ee;Fe++)Ae[Fe-1]=arguments[Fe];return d(ye,Ce,Ae)}}function R(ye,Ce){B&&B(ye,null);for(var Ee=Ce.length;Ee--;){var Ae=Ce[Ee];if(typeof Ae=="string"){var Fe=b(Ae);Fe!==Ae&&(u(Ce)||(Ce[Ee]=Fe),Ae=Fe)}ye[Ae]=!0}return ye}function O(ye){var Ce=v(null),Ee=void 0;for(Ee in ye)d(m,ye,[Ee])&&(Ce[Ee]=ye[Ee]);return Ce}function $(ye,Ce){for(;ye!==null;){var Ee=_(ye,Ce);if(Ee){if(Ee.get)return k(Ee.get);if(typeof Ee.value=="function")return k(Ee.value)}ye=I(ye)}return function(Ae){return console.warn("fallback value for",Ae),null}}var N=A(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T=A(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C=A(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),W=A(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),K=A(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),j=A(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F=A(["#text"]),H=A(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z=A(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),J=A(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),oe=A(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fe=x(/\{\{[\s\S]*|[\s\S]*\}\}/gm),q=x(/<%[\s\S]*|[\s\S]*%>/gm),p=x(/^data-[\-\w.\u00B7-\uFFFF]/),re=x(/^aria-[\-\w]+$/),ne=x(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ie=x(/^(?:\w+script|data):/i),se=x(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye};function be(ye){if(Array.isArray(ye)){for(var Ce=0,Ee=Array(ye.length);Ce<ye.length;Ce++)Ee[Ce]=ye[Ce];return Ee}return Array.from(ye)}var de=function(){return typeof window=="undefined"?null:window},U=function ye(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de(),Ee=function(Yt){return ye(Yt)};if(Ee.version="2.3.1",Ee.removed=[],!Ce||!Ce.document||Ce.document.nodeType!==9)return Ee.isSupported=!1,Ee;var Ae=Ce.document,Fe=Ce.document,_e=Ce.DocumentFragment,te=Ce.HTMLTemplateElement,Le=Ce.Node,ke=Ce.Element,le=Ce.NodeFilter,ee=Ce.NamedNodeMap,me=ee===void 0?Ce.NamedNodeMap||Ce.MozNamedAttrMap:ee,xe=Ce.Text,We=Ce.Comment,Ve=Ce.DOMParser,Ye=Ce.trustedTypes,tt=ke.prototype,Qe=$(tt,"cloneNode"),bt=$(tt,"nextSibling"),ht=$(tt,"childNodes"),xt=$(tt,"parentNode");if(typeof te=="function"){var Qt=Fe.createElement("template");Qt.content&&Qt.content.ownerDocument&&(Fe=Qt.content.ownerDocument)}var At=function(Yt,Ai){if((Yt===void 0?"undefined":ce(Yt))!=="object"||typeof Yt.createPolicy!="function")return null;var zi=null,un="data-tt-policy-suffix";Ai.currentScript&&Ai.currentScript.hasAttribute(un)&&(zi=Ai.currentScript.getAttribute(un));var Ln="dompurify"+(zi?"#"+zi:"");try{return Yt.createPolicy(Ln,{createHTML:function(pn){return pn}})}catch(pn){return console.warn("TrustedTypes policy "+Ln+" could not be created."),null}}(Ye,Ae),mi=At&&Re?At.createHTML(""):"",Lt=Fe,ct=Lt.implementation,Kt=Lt.createNodeIterator,pi=Lt.createDocumentFragment,li=Lt.getElementsByTagName,Wi=Ae.importNode,Vi={};try{Vi=O(Fe).documentMode?Fe.documentMode:{}}catch(Yt){}var Xi={};Ee.isSupported=typeof xt=="function"&&ct&&ct.createHTMLDocument!==void 0&&Vi!==9;var en=fe,rn=q,tn=p,yn=re,sn=ie,ci=se,Xt=ne,kt=null,It=R({},[].concat(be(N),be(T),be(C),be(K),be(F))),ft=null,Mt=R({},[].concat(be(H),be(z),be(J),be(oe))),jt=null,di=null,fi=!0,Si=!0,Ri=!1,Wt=!1,Te=!1,Ze=!1,rt=!1,yt=!1,Nt=!1,dt=!0,Re=!1,qe=!0,Ue=!0,Pe=!1,Xe={},$e=null,ot=R({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Tt=null,Ot=R({},["audio","video","img","source","image","track"]),ti=null,zt=R({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",Gt="http://www.w3.org/2000/svg",$t="http://www.w3.org/1999/xhtml",si=$t,ai=!1,_i=null,Li=Fe.createElement("form"),ri=function(Yt){_i&&_i===Yt||(Yt&&(Yt===void 0?"undefined":ce(Yt))==="object"||(Yt={}),Yt=O(Yt),kt="ALLOWED_TAGS"in Yt?R({},Yt.ALLOWED_TAGS):It,ft="ALLOWED_ATTR"in Yt?R({},Yt.ALLOWED_ATTR):Mt,ti="ADD_URI_SAFE_ATTR"in Yt?R(O(zt),Yt.ADD_URI_SAFE_ATTR):zt,Tt="ADD_DATA_URI_TAGS"in Yt?R(O(Ot),Yt.ADD_DATA_URI_TAGS):Ot,$e="FORBID_CONTENTS"in Yt?R({},Yt.FORBID_CONTENTS):ot,jt="FORBID_TAGS"in Yt?R({},Yt.FORBID_TAGS):{},di="FORBID_ATTR"in Yt?R({},Yt.FORBID_ATTR):{},Xe="USE_PROFILES"in Yt&&Yt.USE_PROFILES,fi=Yt.ALLOW_ARIA_ATTR!==!1,Si=Yt.ALLOW_DATA_ATTR!==!1,Ri=Yt.ALLOW_UNKNOWN_PROTOCOLS||!1,Wt=Yt.SAFE_FOR_TEMPLATES||!1,Te=Yt.WHOLE_DOCUMENT||!1,yt=Yt.RETURN_DOM||!1,Nt=Yt.RETURN_DOM_FRAGMENT||!1,dt=Yt.RETURN_DOM_IMPORT!==!1,Re=Yt.RETURN_TRUSTED_TYPE||!1,rt=Yt.FORCE_BODY||!1,qe=Yt.SANITIZE_DOM!==!1,Ue=Yt.KEEP_CONTENT!==!1,Pe=Yt.IN_PLACE||!1,Xt=Yt.ALLOWED_URI_REGEXP||Xt,si=Yt.NAMESPACE||$t,Wt&&(Si=!1),Nt&&(yt=!0),Xe&&(kt=R({},[].concat(be(F))),ft=[],Xe.html===!0&&(R(kt,N),R(ft,H)),Xe.svg===!0&&(R(kt,T),R(ft,z),R(ft,oe)),Xe.svgFilters===!0&&(R(kt,C),R(ft,z),R(ft,oe)),Xe.mathMl===!0&&(R(kt,K),R(ft,J),R(ft,oe))),Yt.ADD_TAGS&&(kt===It&&(kt=O(kt)),R(kt,Yt.ADD_TAGS)),Yt.ADD_ATTR&&(ft===Mt&&(ft=O(ft)),R(ft,Yt.ADD_ATTR)),Yt.ADD_URI_SAFE_ATTR&&R(ti,Yt.ADD_URI_SAFE_ATTR),Yt.FORBID_CONTENTS&&($e===ot&&($e=O($e)),R($e,Yt.FORBID_CONTENTS)),Ue&&(kt["#text"]=!0),Te&&R(kt,["html","head","body"]),kt.table&&(R(kt,["tbody"]),delete jt.tbody),A&&A(Yt),_i=Yt)},qt=R({},["mi","mo","mn","ms","mtext"]),je=R({},["foreignobject","desc","title","annotation-xml"]),mt=R({},T);R(mt,C),R(mt,W);var wt=R({},K);R(wt,j);var Rt=function(Yt){c(Ee.removed,{element:Yt});try{Yt.parentNode.removeChild(Yt)}catch(Ai){try{Yt.outerHTML=mi}catch(zi){Yt.remove()}}},oi=function(Yt,Ai){try{c(Ee.removed,{attribute:Ai.getAttributeNode(Yt),from:Ai})}catch(zi){c(Ee.removed,{attribute:null,from:Ai})}if(Ai.removeAttribute(Yt),Yt==="is"&&!ft[Yt])if(yt||Nt)try{Rt(Ai)}catch(zi){}else try{Ai.setAttribute(Yt,"")}catch(zi){}},ei=function(Yt){var Ai=void 0,zi=void 0;if(rt)Yt="<remove></remove>"+Yt;else{var un=l(Yt,/^[\r\n\t ]+/);zi=un&&un[0]}var Ln=At?At.createHTML(Yt):Yt;if(si===$t)try{Ai=new Ve().parseFromString(Ln,"text/html")}catch(_n){}if(!Ai||!Ai.documentElement){Ai=ct.createDocument(si,"template",null);try{Ai.documentElement.innerHTML=ai?"":Ln}catch(_n){}}var pn=Ai.body||Ai.documentElement;return Yt&&zi&&pn.insertBefore(Fe.createTextNode(zi),pn.childNodes[0]||null),si===$t?li.call(Ai,Te?"html":"body")[0]:Te?Ai.documentElement:pn},yi=function(Yt){return Kt.call(Yt.ownerDocument||Yt,Yt,le.SHOW_ELEMENT|le.SHOW_COMMENT|le.SHOW_TEXT,null,!1)},ki=function(Yt){return(Le===void 0?"undefined":ce(Le))==="object"?Yt instanceof Le:Yt&&(Yt===void 0?"undefined":ce(Yt))==="object"&&typeof Yt.nodeType=="number"&&typeof Yt.nodeName=="string"},Ti=function(Yt,Ai,zi){Xi[Yt]&&r(Xi[Yt],function(un){un.call(Ee,Ai,zi,_i)})},Pi=function(Yt){var Ai,zi=void 0;if(Ti("beforeSanitizeElements",Yt,null),!((Ai=Yt)instanceof xe||Ai instanceof We||typeof Ai.nodeName=="string"&&typeof Ai.textContent=="string"&&typeof Ai.removeChild=="function"&&Ai.attributes instanceof me&&typeof Ai.removeAttribute=="function"&&typeof Ai.setAttribute=="function"&&typeof Ai.namespaceURI=="string"&&typeof Ai.insertBefore=="function")||l(Yt.nodeName,/[\u0080-\uFFFF]/))return Rt(Yt),!0;var un=b(Yt.nodeName);if(Ti("uponSanitizeElement",Yt,{tagName:un,allowedTags:kt}),!ki(Yt.firstElementChild)&&(!ki(Yt.content)||!ki(Yt.content.firstElementChild))&&D(/<[/\w]/g,Yt.innerHTML)&&D(/<[/\w]/g,Yt.textContent)||un==="select"&&D(/<template/i,Yt.innerHTML))return Rt(Yt),!0;if(!kt[un]||jt[un]){if(Ue&&!$e[un]){var Ln=xt(Yt)||Yt.parentNode,pn=ht(Yt)||Yt.childNodes;if(pn&&Ln)for(var _n=pn.length-1;_n>=0;--_n)Ln.insertBefore(Qe(pn[_n],!0),bt(Yt))}return Rt(Yt),!0}return Yt instanceof ke&&!function(dn){var wn=xt(dn);wn&&wn.tagName||(wn={namespaceURI:$t,tagName:"template"});var St=b(dn.tagName),he=b(wn.tagName);if(dn.namespaceURI===Gt)return wn.namespaceURI===$t?St==="svg":wn.namespaceURI===Jt?St==="svg"&&(he==="annotation-xml"||qt[he]):!!mt[St];if(dn.namespaceURI===Jt)return wn.namespaceURI===$t?St==="math":wn.namespaceURI===Gt?St==="math"&&je[he]:!!wt[St];if(dn.namespaceURI===$t){if(wn.namespaceURI===Gt&&!je[he]||wn.namespaceURI===Jt&&!qt[he])return!1;var Me=R({},["title","style","font","a","script"]);return!wt[St]&&(Me[St]||!mt[St])}return!1}(Yt)?(Rt(Yt),!0):un!=="noscript"&&un!=="noembed"||!D(/<\/no(script|embed)/i,Yt.innerHTML)?(Wt&&Yt.nodeType===3&&(zi=Yt.textContent,zi=a(zi,en," "),zi=a(zi,rn," "),Yt.textContent!==zi&&(c(Ee.removed,{element:Yt.cloneNode()}),Yt.textContent=zi)),Ti("afterSanitizeElements",Yt,null),!1):(Rt(Yt),!0)},Ni=function(Yt,Ai,zi){if(qe&&(Ai==="id"||Ai==="name")&&(zi in Fe||zi in Li))return!1;if(!(Si&&!di[Ai]&&D(tn,Ai))){if(!(fi&&D(yn,Ai))){if(!ft[Ai]||di[Ai])return!1;if(!ti[Ai]){if(!D(Xt,a(zi,ci,""))){if((Ai!=="src"&&Ai!=="xlink:href"&&Ai!=="href"||Yt==="script"||w(zi,"data:")!==0||!Tt[Yt])&&!(Ri&&!D(sn,a(zi,ci,"")))){if(zi)return!1}}}}}return!0},gn=function(Yt){var Ai=void 0,zi=void 0,un=void 0,Ln=void 0;Ti("beforeSanitizeAttributes",Yt,null);var pn=Yt.attributes;if(pn){var _n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ft};for(Ln=pn.length;Ln--;){var dn=Ai=pn[Ln],wn=dn.name,St=dn.namespaceURI;if(zi=E(Ai.value),un=b(wn),_n.attrName=un,_n.attrValue=zi,_n.keepAttr=!0,_n.forceKeepAttr=void 0,Ti("uponSanitizeAttribute",Yt,_n),zi=_n.attrValue,!_n.forceKeepAttr&&(oi(wn,Yt),_n.keepAttr))if(D(/\/>/i,zi))oi(wn,Yt);else{Wt&&(zi=a(zi,en," "),zi=a(zi,rn," "));var he=Yt.nodeName.toLowerCase();if(Ni(he,un,zi))try{St?Yt.setAttributeNS(St,wn,zi):Yt.setAttribute(wn,zi),i(Ee.removed)}catch(Me){}}}Ti("afterSanitizeAttributes",Yt,null)}},Dn=function Yt(Ai){var zi=void 0,un=yi(Ai);for(Ti("beforeSanitizeShadowDOM",Ai,null);zi=un.nextNode();)Ti("uponSanitizeShadowNode",zi,null),Pi(zi)||(zi.content instanceof _e&&Yt(zi.content),gn(zi));Ti("afterSanitizeShadowDOM",Ai,null)};return Ee.sanitize=function(Yt,Ai){var zi=void 0,un=void 0,Ln=void 0,pn=void 0,_n=void 0;if((ai=!Yt)&&(Yt="<!-->"),typeof Yt!="string"&&!ki(Yt)){if(typeof Yt.toString!="function")throw L("toString is not a function");if(typeof(Yt=Yt.toString())!="string")throw L("dirty is not a string, aborting")}if(!Ee.isSupported){if(ce(Ce.toStaticHTML)==="object"||typeof Ce.toStaticHTML=="function"){if(typeof Yt=="string")return Ce.toStaticHTML(Yt);if(ki(Yt))return Ce.toStaticHTML(Yt.outerHTML)}return Yt}if(Ze||ri(Ai),Ee.removed=[],typeof Yt=="string"&&(Pe=!1),!Pe)if(Yt instanceof Le)(un=(zi=ei("<!---->")).ownerDocument.importNode(Yt,!0)).nodeType===1&&un.nodeName==="BODY"||un.nodeName==="HTML"?zi=un:zi.appendChild(un);else{if(!yt&&!Wt&&!Te&&Yt.indexOf("<")===-1)return At&&Re?At.createHTML(Yt):Yt;if(!(zi=ei(Yt)))return yt?null:mi}zi&&rt&&Rt(zi.firstChild);for(var dn=yi(Pe?Yt:zi);Ln=dn.nextNode();)Ln.nodeType===3&&Ln===pn||Pi(Ln)||(Ln.content instanceof _e&&Dn(Ln.content),gn(Ln),pn=Ln);if(pn=null,Pe)return Yt;if(yt){if(Nt)for(_n=pi.call(zi.ownerDocument);zi.firstChild;)_n.appendChild(zi.firstChild);else _n=zi;return dt&&(_n=Wi.call(Ae,_n,!0)),_n}var wn=Te?zi.outerHTML:zi.innerHTML;return Wt&&(wn=a(wn,en," "),wn=a(wn,rn," ")),At&&Re?At.createHTML(wn):wn},Ee.setConfig=function(Yt){ri(Yt),Ze=!0},Ee.clearConfig=function(){_i=null,Ze=!1},Ee.isValidAttribute=function(Yt,Ai,zi){_i||ri({});var un=b(Yt),Ln=b(Ai);return Ni(un,Ln,zi)},Ee.addHook=function(Yt,Ai){typeof Ai=="function"&&(Xi[Yt]=Xi[Yt]||[],c(Xi[Yt],Ai))},Ee.removeHook=function(Yt){Xi[Yt]&&i(Xi[Yt])},Ee.removeHooks=function(Yt){Xi[Yt]&&(Xi[Yt]=[])},Ee.removeAllHooks=function(){Xi={}},Ee}();U.version,U.isSupported;let ue=U.sanitize,ve=(U.setConfig,U.clearConfig,U.isValidAttribute,U.addHook),X=U.removeHook;U.removeHooks,U.removeAllHooks},4850:(ut,Ie,t)=>{"use strict";t.d(Ie,{Y:()=>B});var m=t(4669);class B{get event(){return this.emitter.event}constructor(I,_,A){let x=v=>this.emitter.fire(v);this.emitter=new m.Q5({onWillAddFirstListener:()=>I.addEventListener(_,x,A),onDidRemoveLastListener:()=>I.removeEventListener(_,x,A)})}dispose(){this.emitter.dispose()}}},8626:(ut,Ie,t)=>{"use strict";t.d(Ie,{X:()=>u,Z:()=>m});class m{constructor(_){this.domNode=_,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(_){let A=B(_);this._maxWidth!==A&&(this._maxWidth=A,this.domNode.style.maxWidth=this._maxWidth)}setWidth(_){let A=B(_);this._width!==A&&(this._width=A,this.domNode.style.width=this._width)}setHeight(_){let A=B(_);this._height!==A&&(this._height=A,this.domNode.style.height=this._height)}setTop(_){let A=B(_);this._top!==A&&(this._top=A,this.domNode.style.top=this._top)}setLeft(_){let A=B(_);this._left!==A&&(this._left=A,this.domNode.style.left=this._left)}setBottom(_){let A=B(_);this._bottom!==A&&(this._bottom=A,this.domNode.style.bottom=this._bottom)}setRight(_){let A=B(_);this._right!==A&&(this._right=A,this.domNode.style.right=this._right)}setPaddingLeft(_){let A=B(_);this._paddingLeft!==A&&(this._paddingLeft=A,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(_){this._fontFamily!==_&&(this._fontFamily=_,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(_){let A=B(_);this._fontSize!==A&&(this._fontSize=A,this.domNode.style.fontSize=this._fontSize)}setFontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(_){this._fontFeatureSettings!==_&&(this._fontFeatureSettings=_,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(_){this._fontVariationSettings!==_&&(this._fontVariationSettings=_,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(_){this._textDecoration!==_&&(this._textDecoration=_,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(_){let A=B(_);this._lineHeight!==A&&(this._lineHeight=A,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(_){let A=B(_);this._letterSpacing!==A&&(this._letterSpacing=A,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(_){this._className!==_&&(this._className=_,this.domNode.className=this._className)}toggleClassName(_,A){this.domNode.classList.toggle(_,A),this._className=this.domNode.className}setDisplay(_){this._display!==_&&(this._display=_,this.domNode.style.display=this._display)}setPosition(_){this._position!==_&&(this._position=_,this.domNode.style.position=this._position)}setVisibility(_){this._visibility!==_&&(this._visibility=_,this.domNode.style.visibility=this._visibility)}setColor(_){this._color!==_&&(this._color=_,this.domNode.style.color=this._color)}setBackgroundColor(_){this._backgroundColor!==_&&(this._backgroundColor=_,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(_){this._layerHint!==_&&(this._layerHint=_,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(_){this._boxShadow!==_&&(this._boxShadow=_,this.domNode.style.boxShadow=_)}setContain(_){this._contain!==_&&(this._contain=_,this.domNode.style.contain=this._contain)}setAttribute(_,A){this.domNode.setAttribute(_,A)}removeAttribute(_){this.domNode.removeAttribute(_)}appendChild(_){this.domNode.appendChild(_.domNode)}removeChild(_){this.domNode.removeChild(_.domNode)}}function B(I){return typeof I=="number"?`${I}px`:I}function u(I){return new m(I)}},8764:(ut,Ie,t)=>{"use strict";t.d(Ie,{BO:()=>u,IY:()=>B,az:()=>I});var m=t(5321);function B(v,f={}){let d=I(f);return d.textContent=v,d}function u(v,f={}){let d=I(f);return A(d,function(o,h){let r={type:1,children:[]},i=0,c=r,b=[],l=new _(o);for(;!l.eos();){let a=l.next(),w=a==="\\"&&x(l.peek(),h)!==0;if(w&&(a=l.next()),w||x(a,h)===0||a!==l.peek())if(a===`
`)c.type===2&&(c=b.pop()),c.children.push({type:8});else if(c.type!==2){let E={type:2,content:a};c.children.push(E),b.push(c),c=E}else c.content+=a;else{l.advance(),c.type===2&&(c=b.pop());let E=x(a,h);if(c.type===E||c.type===5&&E===6)c=b.pop();else{let D={type:E,children:[]};E===5&&(D.index=i,i++),c.children.push(D),b.push(c),c=D}}}return c.type===2&&(c=b.pop()),b.length,r}(v,!!f.renderCodeSegments),f.actionHandler,f.renderCodeSegments),d}function I(v){let f=v.inline?"span":"div",d=document.createElement(f);return v.className&&(d.className=v.className),d}class _{constructor(f){this.source=f,this.index=0}eos(){return this.index>=this.source.length}next(){let f=this.peek();return this.advance(),f}peek(){return this.source[this.index]}advance(){this.index++}}function A(v,f,d,o){let h;if(f.type===2)h=document.createTextNode(f.content||"");else if(f.type===3)h=document.createElement("b");else if(f.type===4)h=document.createElement("i");else if(f.type===7&&o)h=document.createElement("code");else if(f.type===5&&d){let r=document.createElement("a");d.disposables.add(m.mu(r,"click",i=>{d.callback(String(f.index),i)})),h=r}else f.type===8?h=document.createElement("br"):f.type===1&&(h=v);h&&v!==h&&v.appendChild(h),h&&Array.isArray(f.children)&&f.children.forEach(r=>{A(h,r,d,o)})}function x(v,f){switch(v){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return f?7:0;default:return 0}}},3911:(ut,Ie,t)=>{"use strict";t.d(Ie,{C:()=>u});var m=t(5321),B=t(5976);class u{constructor(){this._hooks=new B.SL,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(_,A){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let x=this._onStopCallback;this._onStopCallback=null,_&&x&&x(A)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(_,A,x,v,f){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=v,this._onStopCallback=f;let d=_;try{_.setPointerCapture(A),this._hooks.add((0,B.OF)(()=>{try{_.releasePointerCapture(A)}catch(o){}}))}catch(o){d=window}this._hooks.add(m.nm(d,m.tw.POINTER_MOVE,o=>{o.buttons===x?(o.preventDefault(),this._pointerMoveCallback(o)):this.stopMonitoring(!0)})),this._hooks.add(m.nm(d,m.tw.POINTER_UP,o=>this.stopMonitoring(!0)))}}},9069:(ut,Ie,t)=>{"use strict";t.d(Ie,{y:()=>x});var m=t(6268),B=t(2258),u=t(8313),I=t(1432);let _=I.dz?256:2048,A=I.dz?2048:256;class x{constructor(f){this._standardKeyboardEventBrand=!0;let d=f;this.browserEvent=d,this.target=d.target,this.ctrlKey=d.ctrlKey,this.shiftKey=d.shiftKey,this.altKey=d.altKey,this.metaKey=d.metaKey,this.altGraphKey=d.getModifierState("AltGraph"),this.keyCode=function(o){if(o.charCode){let r=String.fromCharCode(o.charCode).toUpperCase();return B.kL.fromString(r)}let h=o.keyCode;if(h===3)return 7;if(m.isFirefox)switch(h){case 59:return 85;case 60:if(I.IJ)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(I.dz)return 57}else if(m.isWebKit&&(I.dz&&h===93||!I.dz&&h===92))return 57;return B.H_[h]||0}(d),this.code=d.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(f){return this._asKeybinding===f}_computeKeybinding(){let f=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(f=this.keyCode);let d=0;return this.ctrlKey&&(d|=_),this.altKey&&(d|=512),this.shiftKey&&(d|=1024),this.metaKey&&(d|=A),d|=f,d}_computeKeyCodeChord(){let f=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(f=this.keyCode),new u.$M(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,f)}}},7352:(ut,Ie,t)=>{"use strict";t.d(Ie,{ap:()=>R,et:()=>C});var m=t(5321),B=t(921),u=t(4850),I=t(8764),_=t(9069),A=t(7448),x=t(6811),v=t(7301),f=t(4669),d=t(9365),o=t(1212),h=t(4742),r=t(9579),i=t(5976);let c={};(function(){function oe(p,re){re(c)}var fe,q;oe.amd=!0,fe=this,q=function(p){function re(ci,Xt){for(var kt=0;kt<Xt.length;kt++){var It=Xt[kt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(ci,It.key,It)}}function ne(ci,Xt){(Xt==null||Xt>ci.length)&&(Xt=ci.length);for(var kt=0,It=new Array(Xt);kt<Xt;kt++)It[kt]=ci[kt];return It}function ie(ci,Xt){var kt=typeof Symbol!="undefined"&&ci[Symbol.iterator]||ci["@@iterator"];if(kt)return(kt=kt.call(ci)).next.bind(kt);if(Array.isArray(ci)||(kt=function(ft,Mt){if(ft){if(typeof ft=="string")return ne(ft,Mt);var jt=Object.prototype.toString.call(ft).slice(8,-1);return jt==="Object"&&ft.constructor&&(jt=ft.constructor.name),jt==="Map"||jt==="Set"?Array.from(ft):jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jt)?ne(ft,Mt):void 0}}(ci))||Xt&&ci&&typeof ci.length=="number"){kt&&(ci=kt);var It=0;return function(){return It>=ci.length?{done:!0}:{done:!1,value:ci[It++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}p.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var ce=/[&<>"']/,be=/[&<>"']/g,de=/[<>"']|&(?!#?\w+;)/,U=/[<>"']|&(?!#?\w+;)/g,ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ve=function(ci){return ue[ci]};function X(ci,Xt){if(Xt){if(ce.test(ci))return ci.replace(be,ve)}else if(de.test(ci))return ci.replace(U,ve);return ci}var ye=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ce(ci){return ci.replace(ye,function(Xt,kt){return(kt=kt.toLowerCase())==="colon"?":":kt.charAt(0)==="#"?kt.charAt(1)==="x"?String.fromCharCode(parseInt(kt.substring(2),16)):String.fromCharCode(+kt.substring(1)):""})}var Ee=/(^|[^\[])\^/g;function Ae(ci,Xt){ci=typeof ci=="string"?ci:ci.source,Xt=Xt||"";var kt={replace:function(It,ft){return ft=(ft=ft.source||ft).replace(Ee,"$1"),ci=ci.replace(It,ft),kt},getRegex:function(){return new RegExp(ci,Xt)}};return kt}var Fe=/[^\w:]/g,_e=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function te(ci,Xt,kt){if(ci){var It;try{It=decodeURIComponent(Ce(kt)).replace(Fe,"").toLowerCase()}catch(ft){return null}if(It.indexOf("javascript:")===0||It.indexOf("vbscript:")===0||It.indexOf("data:")===0)return null}Xt&&!_e.test(kt)&&(kt=function(ft,Mt){Le[" "+ft]||(ke.test(ft)?Le[" "+ft]=ft+"/":Le[" "+ft]=Ve(ft,"/",!0));var jt=(ft=Le[" "+ft]).indexOf(":")===-1;return Mt.substring(0,2)==="//"?jt?Mt:ft.replace(le,"$1")+Mt:Mt.charAt(0)==="/"?jt?Mt:ft.replace(ee,"$1")+Mt:ft+Mt}(Xt,kt));try{kt=encodeURI(kt).replace(/%25/g,"%")}catch(ft){return null}return kt}var Le={},ke=/^[^:]+:\/*[^/]*$/,le=/^([^:]+:)[\s\S]*$/,ee=/^([^:]+:\/*[^/]*)[\s\S]*$/,me={exec:function(){}};function xe(ci){for(var Xt,kt,It=1;It<arguments.length;It++)for(kt in Xt=arguments[It])Object.prototype.hasOwnProperty.call(Xt,kt)&&(ci[kt]=Xt[kt]);return ci}function We(ci,Xt){var kt=ci.replace(/\|/g,function(ft,Mt,jt){for(var di=!1,fi=Mt;--fi>=0&&jt[fi]==="\\";)di=!di;return di?"|":" |"}).split(/ \|/),It=0;if(kt[0].trim()||kt.shift(),kt.length>0&&!kt[kt.length-1].trim()&&kt.pop(),kt.length>Xt)kt.splice(Xt);else for(;kt.length<Xt;)kt.push("");for(;It<kt.length;It++)kt[It]=kt[It].trim().replace(/\\\|/g,"|");return kt}function Ve(ci,Xt,kt){var It=ci.length;if(It===0)return"";for(var ft=0;ft<It;){var Mt=ci.charAt(It-ft-1);if(Mt!==Xt||kt){if(Mt===Xt||!kt)break;ft++}else ft++}return ci.slice(0,It-ft)}function Ye(ci){ci&&ci.sanitize&&!ci.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function tt(ci,Xt){if(Xt<1)return"";for(var kt="";Xt>1;)1&Xt&&(kt+=ci),Xt>>=1,ci+=ci;return kt+ci}function Qe(ci,Xt,kt,It){var ft=Xt.href,Mt=Xt.title?X(Xt.title):null,jt=ci[1].replace(/\\([\[\]])/g,"$1");if(ci[0].charAt(0)!=="!"){It.state.inLink=!0;var di={type:"link",raw:kt,href:ft,title:Mt,text:jt,tokens:It.inlineTokens(jt)};return It.state.inLink=!1,di}return{type:"image",raw:kt,href:ft,title:Mt,text:X(jt)}}var bt=function(){function ci(kt){this.options=kt||p.defaults}var Xt=ci.prototype;return Xt.space=function(kt){var It=this.rules.block.newline.exec(kt);if(It&&It[0].length>0)return{type:"space",raw:It[0]}},Xt.code=function(kt){var It=this.rules.block.code.exec(kt);if(It){var ft=It[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:It[0],codeBlockStyle:"indented",text:this.options.pedantic?ft:Ve(ft,`
`)}}},Xt.fences=function(kt){var It=this.rules.block.fences.exec(kt);if(It){var ft=It[0],Mt=function(jt,di){var fi=jt.match(/^(\s+)(?:```)/);if(fi===null)return di;var Si=fi[1];return di.split(`
`).map(function(Ri){var Wt=Ri.match(/^\s+/);return Wt===null?Ri:Wt[0].length>=Si.length?Ri.slice(Si.length):Ri}).join(`
`)}(ft,It[3]||"");return{type:"code",raw:ft,lang:It[2]?It[2].trim():It[2],text:Mt}}},Xt.heading=function(kt){var It=this.rules.block.heading.exec(kt);if(It){var ft=It[2].trim();if(/#$/.test(ft)){var Mt=Ve(ft,"#");this.options.pedantic?ft=Mt.trim():Mt&&!/ $/.test(Mt)||(ft=Mt.trim())}return{type:"heading",raw:It[0],depth:It[1].length,text:ft,tokens:this.lexer.inline(ft)}}},Xt.hr=function(kt){var It=this.rules.block.hr.exec(kt);if(It)return{type:"hr",raw:It[0]}},Xt.blockquote=function(kt){var It=this.rules.block.blockquote.exec(kt);if(It){var ft=It[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:It[0],tokens:this.lexer.blockTokens(ft,[]),text:ft}}},Xt.list=function(kt){var It=this.rules.block.list.exec(kt);if(It){var ft,Mt,jt,di,fi,Si,Ri,Wt,Te,Ze,rt,yt,Nt=It[1].trim(),dt=Nt.length>1,Re={type:"list",raw:"",ordered:dt,start:dt?+Nt.slice(0,-1):"",loose:!1,items:[]};Nt=dt?"\\d{1,9}\\"+Nt.slice(-1):"\\"+Nt,this.options.pedantic&&(Nt=dt?Nt:"[*+-]");for(var qe=new RegExp("^( {0,3}"+Nt+")((?:[	 ][^\\n]*)?(?:\\n|$))");kt&&(yt=!1,It=qe.exec(kt))&&!this.rules.block.hr.test(kt);){if(ft=It[0],kt=kt.substring(ft.length),Wt=It[2].split(`
`,1)[0],Te=kt.split(`
`,1)[0],this.options.pedantic?(di=2,rt=Wt.trimLeft()):(di=(di=It[2].search(/[^ ]/))>4?1:di,rt=Wt.slice(di),di+=It[1].length),Si=!1,!Wt&&/^ *$/.test(Te)&&(ft+=Te+`
`,kt=kt.substring(Te.length+1),yt=!0),!yt)for(var Ue=new RegExp("^ {0,"+Math.min(3,di-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Pe=new RegExp("^ {0,"+Math.min(3,di-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Xe=new RegExp("^ {0,"+Math.min(3,di-1)+"}(?:```|~~~)"),$e=new RegExp("^ {0,"+Math.min(3,di-1)+"}#");kt&&(Wt=Ze=kt.split(`
`,1)[0],this.options.pedantic&&(Wt=Wt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Xe.test(Wt))&&!$e.test(Wt)&&!Ue.test(Wt)&&!Pe.test(kt);){if(Wt.search(/[^ ]/)>=di||!Wt.trim())rt+=`
`+Wt.slice(di);else{if(Si)break;rt+=`
`+Wt}Si||Wt.trim()||(Si=!0),ft+=Ze+`
`,kt=kt.substring(Ze.length+1)}Re.loose||(Ri?Re.loose=!0:/\n *\n *$/.test(ft)&&(Ri=!0)),this.options.gfm&&(Mt=/^\[[ xX]\] /.exec(rt))&&(jt=Mt[0]!=="[ ] ",rt=rt.replace(/^\[[ xX]\] +/,"")),Re.items.push({type:"list_item",raw:ft,task:!!Mt,checked:jt,loose:!1,text:rt}),Re.raw+=ft}Re.items[Re.items.length-1].raw=ft.trimRight(),Re.items[Re.items.length-1].text=rt.trimRight(),Re.raw=Re.raw.trimRight();var ot=Re.items.length;for(fi=0;fi<ot;fi++){this.lexer.state.top=!1,Re.items[fi].tokens=this.lexer.blockTokens(Re.items[fi].text,[]);var Tt=Re.items[fi].tokens.filter(function(ti){return ti.type==="space"}),Ot=Tt.every(function(ti){for(var zt,Jt=0,Gt=ie(ti.raw.split(""));!(zt=Gt()).done;)if(zt.value===`
`&&(Jt+=1),Jt>1)return!0;return!1});!Re.loose&&Tt.length&&Ot&&(Re.loose=!0,Re.items[fi].loose=!0)}return Re}},Xt.html=function(kt){var It=this.rules.block.html.exec(kt);if(It){var ft={type:"html",raw:It[0],pre:!this.options.sanitizer&&(It[1]==="pre"||It[1]==="script"||It[1]==="style"),text:It[0]};if(this.options.sanitize){var Mt=this.options.sanitizer?this.options.sanitizer(It[0]):X(It[0]);ft.type="paragraph",ft.text=Mt,ft.tokens=this.lexer.inline(Mt)}return ft}},Xt.def=function(kt){var It=this.rules.block.def.exec(kt);if(It)return It[3]&&(It[3]=It[3].substring(1,It[3].length-1)),{type:"def",tag:It[1].toLowerCase().replace(/\s+/g," "),raw:It[0],href:It[2],title:It[3]}},Xt.table=function(kt){var It=this.rules.block.table.exec(kt);if(It){var ft={type:"table",header:We(It[1]).map(function(Ri){return{text:Ri}}),align:It[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:It[3]&&It[3].trim()?It[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(ft.header.length===ft.align.length){ft.raw=It[0];var Mt,jt,di,fi,Si=ft.align.length;for(Mt=0;Mt<Si;Mt++)/^ *-+: *$/.test(ft.align[Mt])?ft.align[Mt]="right":/^ *:-+: *$/.test(ft.align[Mt])?ft.align[Mt]="center":/^ *:-+ *$/.test(ft.align[Mt])?ft.align[Mt]="left":ft.align[Mt]=null;for(Si=ft.rows.length,Mt=0;Mt<Si;Mt++)ft.rows[Mt]=We(ft.rows[Mt],ft.header.length).map(function(Ri){return{text:Ri}});for(Si=ft.header.length,jt=0;jt<Si;jt++)ft.header[jt].tokens=this.lexer.inline(ft.header[jt].text);for(Si=ft.rows.length,jt=0;jt<Si;jt++)for(fi=ft.rows[jt],di=0;di<fi.length;di++)fi[di].tokens=this.lexer.inline(fi[di].text);return ft}}},Xt.lheading=function(kt){var It=this.rules.block.lheading.exec(kt);if(It)return{type:"heading",raw:It[0],depth:It[2].charAt(0)==="="?1:2,text:It[1],tokens:this.lexer.inline(It[1])}},Xt.paragraph=function(kt){var It=this.rules.block.paragraph.exec(kt);if(It){var ft=It[1].charAt(It[1].length-1)===`
`?It[1].slice(0,-1):It[1];return{type:"paragraph",raw:It[0],text:ft,tokens:this.lexer.inline(ft)}}},Xt.text=function(kt){var It=this.rules.block.text.exec(kt);if(It)return{type:"text",raw:It[0],text:It[0],tokens:this.lexer.inline(It[0])}},Xt.escape=function(kt){var It=this.rules.inline.escape.exec(kt);if(It)return{type:"escape",raw:It[0],text:X(It[1])}},Xt.tag=function(kt){var It=this.rules.inline.tag.exec(kt);if(It)return!this.lexer.state.inLink&&/^<a /i.test(It[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(It[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(It[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(It[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:It[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(It[0]):X(It[0]):It[0]}},Xt.link=function(kt){var It=this.rules.inline.link.exec(kt);if(It){var ft=It[2].trim();if(!this.options.pedantic&&/^</.test(ft)){if(!/>$/.test(ft))return;var Mt=Ve(ft.slice(0,-1),"\\");if((ft.length-Mt.length)%2==0)return}else{var jt=function(Wt,Te){if(Wt.indexOf(Te[1])===-1)return-1;for(var Ze=Wt.length,rt=0,yt=0;yt<Ze;yt++)if(Wt[yt]==="\\")yt++;else if(Wt[yt]===Te[0])rt++;else if(Wt[yt]===Te[1]&&--rt<0)return yt;return-1}(It[2],"()");if(jt>-1){var di=(It[0].indexOf("!")===0?5:4)+It[1].length+jt;It[2]=It[2].substring(0,jt),It[0]=It[0].substring(0,di).trim(),It[3]=""}}var fi=It[2],Si="";if(this.options.pedantic){var Ri=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(fi);Ri&&(fi=Ri[1],Si=Ri[3])}else Si=It[3]?It[3].slice(1,-1):"";return fi=fi.trim(),/^</.test(fi)&&(fi=this.options.pedantic&&!/>$/.test(ft)?fi.slice(1):fi.slice(1,-1)),Qe(It,{href:fi&&fi.replace(this.rules.inline._escapes,"$1"),title:Si&&Si.replace(this.rules.inline._escapes,"$1")},It[0],this.lexer)}},Xt.reflink=function(kt,It){var ft;if((ft=this.rules.inline.reflink.exec(kt))||(ft=this.rules.inline.nolink.exec(kt))){var Mt=(ft[2]||ft[1]).replace(/\s+/g," ");if(!(Mt=It[Mt.toLowerCase()])||!Mt.href){var jt=ft[0].charAt(0);return{type:"text",raw:jt,text:jt}}return Qe(ft,Mt,ft[0],this.lexer)}},Xt.emStrong=function(kt,It,ft){ft===void 0&&(ft="");var Mt=this.rules.inline.emStrong.lDelim.exec(kt);if(Mt&&(!Mt[3]||!ft.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var jt=Mt[1]||Mt[2]||"";if(!jt||jt&&(ft===""||this.rules.inline.punctuation.exec(ft))){var di,fi,Si=Mt[0].length-1,Ri=Si,Wt=0,Te=Mt[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Te.lastIndex=0,It=It.slice(-1*kt.length+Si);(Mt=Te.exec(It))!=null;)if(di=Mt[1]||Mt[2]||Mt[3]||Mt[4]||Mt[5]||Mt[6])if(fi=di.length,Mt[3]||Mt[4])Ri+=fi;else if(!((Mt[5]||Mt[6])&&Si%3)||(Si+fi)%3){if(!((Ri-=fi)>0)){if(fi=Math.min(fi,fi+Ri+Wt),Math.min(Si,fi)%2){var Ze=kt.slice(1,Si+Mt.index+fi);return{type:"em",raw:kt.slice(0,Si+Mt.index+fi+1),text:Ze,tokens:this.lexer.inlineTokens(Ze)}}var rt=kt.slice(2,Si+Mt.index+fi-1);return{type:"strong",raw:kt.slice(0,Si+Mt.index+fi+1),text:rt,tokens:this.lexer.inlineTokens(rt)}}}else Wt+=fi}}},Xt.codespan=function(kt){var It=this.rules.inline.code.exec(kt);if(It){var ft=It[2].replace(/\n/g," "),Mt=/[^ ]/.test(ft),jt=/^ /.test(ft)&&/ $/.test(ft);return Mt&&jt&&(ft=ft.substring(1,ft.length-1)),ft=X(ft,!0),{type:"codespan",raw:It[0],text:ft}}},Xt.br=function(kt){var It=this.rules.inline.br.exec(kt);if(It)return{type:"br",raw:It[0]}},Xt.del=function(kt){var It=this.rules.inline.del.exec(kt);if(It)return{type:"del",raw:It[0],text:It[2],tokens:this.lexer.inlineTokens(It[2])}},Xt.autolink=function(kt,It){var ft,Mt,jt=this.rules.inline.autolink.exec(kt);if(jt)return Mt=jt[2]==="@"?"mailto:"+(ft=X(this.options.mangle?It(jt[1]):jt[1])):ft=X(jt[1]),{type:"link",raw:jt[0],text:ft,href:Mt,tokens:[{type:"text",raw:ft,text:ft}]}},Xt.url=function(kt,It){var ft;if(ft=this.rules.inline.url.exec(kt)){var Mt,jt;if(ft[2]==="@")jt="mailto:"+(Mt=X(this.options.mangle?It(ft[0]):ft[0]));else{var di;do di=ft[0],ft[0]=this.rules.inline._backpedal.exec(ft[0])[0];while(di!==ft[0]);Mt=X(ft[0]),jt=ft[1]==="www."?"http://"+Mt:Mt}return{type:"link",raw:ft[0],text:Mt,href:jt,tokens:[{type:"text",raw:Mt,text:Mt}]}}},Xt.inlineText=function(kt,It){var ft,Mt=this.rules.inline.text.exec(kt);if(Mt)return ft=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Mt[0]):X(Mt[0]):Mt[0]:X(this.options.smartypants?It(Mt[0]):Mt[0]),{type:"text",raw:Mt[0],text:ft}},ci}(),ht={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:me,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ht.def=Ae(ht.def).replace("label",ht._label).replace("title",ht._title).getRegex(),ht.bullet=/(?:[*+-]|\d{1,9}[.)])/,ht.listItemStart=Ae(/^( *)(bull) */).replace("bull",ht.bullet).getRegex(),ht.list=Ae(ht.list).replace(/bull/g,ht.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ht.def.source+")").getRegex(),ht._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ht._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ht.html=Ae(ht.html,"i").replace("comment",ht._comment).replace("tag",ht._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ht.paragraph=Ae(ht._paragraph).replace("hr",ht.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ht._tag).getRegex(),ht.blockquote=Ae(ht.blockquote).replace("paragraph",ht.paragraph).getRegex(),ht.normal=xe({},ht),ht.gfm=xe({},ht.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ht.gfm.table=Ae(ht.gfm.table).replace("hr",ht.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ht._tag).getRegex(),ht.gfm.paragraph=Ae(ht._paragraph).replace("hr",ht.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ht.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ht._tag).getRegex(),ht.pedantic=xe({},ht.normal,{html:Ae(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ht._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:me,paragraph:Ae(ht.normal._paragraph).replace("hr",ht.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ht.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var xt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:me,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:me,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Qt(ci){return ci.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function At(ci){var Xt,kt,It="",ft=ci.length;for(Xt=0;Xt<ft;Xt++)kt=ci.charCodeAt(Xt),Math.random()>.5&&(kt="x"+kt.toString(16)),It+="&#"+kt+";";return It}xt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",xt.punctuation=Ae(xt.punctuation).replace(/punctuation/g,xt._punctuation).getRegex(),xt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,xt.escapedEmSt=/\\\*|\\_/g,xt._comment=Ae(ht._comment).replace("(?:-->|$)","-->").getRegex(),xt.emStrong.lDelim=Ae(xt.emStrong.lDelim).replace(/punct/g,xt._punctuation).getRegex(),xt.emStrong.rDelimAst=Ae(xt.emStrong.rDelimAst,"g").replace(/punct/g,xt._punctuation).getRegex(),xt.emStrong.rDelimUnd=Ae(xt.emStrong.rDelimUnd,"g").replace(/punct/g,xt._punctuation).getRegex(),xt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,xt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,xt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,xt.autolink=Ae(xt.autolink).replace("scheme",xt._scheme).replace("email",xt._email).getRegex(),xt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,xt.tag=Ae(xt.tag).replace("comment",xt._comment).replace("attribute",xt._attribute).getRegex(),xt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,xt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,xt.link=Ae(xt.link).replace("label",xt._label).replace("href",xt._href).replace("title",xt._title).getRegex(),xt.reflink=Ae(xt.reflink).replace("label",xt._label).replace("ref",ht._label).getRegex(),xt.nolink=Ae(xt.nolink).replace("ref",ht._label).getRegex(),xt.reflinkSearch=Ae(xt.reflinkSearch,"g").replace("reflink",xt.reflink).replace("nolink",xt.nolink).getRegex(),xt.normal=xe({},xt),xt.pedantic=xe({},xt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ae(/^!?\[(label)\]\((.*?)\)/).replace("label",xt._label).getRegex(),reflink:Ae(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xt._label).getRegex()}),xt.gfm=xe({},xt.normal,{escape:Ae(xt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),xt.gfm.url=Ae(xt.gfm.url,"i").replace("email",xt.gfm._extended_email).getRegex(),xt.breaks=xe({},xt.gfm,{br:Ae(xt.br).replace("{2,}","*").getRegex(),text:Ae(xt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var mi=function(){function ci(ft){this.tokens=[],this.tokens.links=Object.create(null),this.options=ft||p.defaults,this.options.tokenizer=this.options.tokenizer||new bt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var Mt={block:ht.normal,inline:xt.normal};this.options.pedantic?(Mt.block=ht.pedantic,Mt.inline=xt.pedantic):this.options.gfm&&(Mt.block=ht.gfm,this.options.breaks?Mt.inline=xt.breaks:Mt.inline=xt.gfm),this.tokenizer.rules=Mt}ci.lex=function(ft,Mt){return new ci(Mt).lex(ft)},ci.lexInline=function(ft,Mt){return new ci(Mt).inlineTokens(ft)};var Xt,kt,It=ci.prototype;return It.lex=function(ft){var Mt;for(ft=ft.replace(/\r\n|\r/g,`
`),this.blockTokens(ft,this.tokens);Mt=this.inlineQueue.shift();)this.inlineTokens(Mt.src,Mt.tokens);return this.tokens},It.blockTokens=function(ft,Mt){var jt,di,fi,Si,Ri=this;for(Mt===void 0&&(Mt=[]),ft=this.options.pedantic?ft.replace(/\t/g,"    ").replace(/^ +$/gm,""):ft.replace(/^( *)(\t+)/gm,function(Te,Ze,rt){return Ze+"    ".repeat(rt.length)});ft;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Te){return!!(jt=Te.call({lexer:Ri},ft,Mt))&&(ft=ft.substring(jt.raw.length),Mt.push(jt),!0)}))){if(jt=this.tokenizer.space(ft))ft=ft.substring(jt.raw.length),jt.raw.length===1&&Mt.length>0?Mt[Mt.length-1].raw+=`
`:Mt.push(jt);else if(jt=this.tokenizer.code(ft))ft=ft.substring(jt.raw.length),!(di=Mt[Mt.length-1])||di.type!=="paragraph"&&di.type!=="text"?Mt.push(jt):(di.raw+=`
`+jt.raw,di.text+=`
`+jt.text,this.inlineQueue[this.inlineQueue.length-1].src=di.text);else if(jt=this.tokenizer.fences(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.heading(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.hr(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.blockquote(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.list(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.html(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.def(ft))ft=ft.substring(jt.raw.length),!(di=Mt[Mt.length-1])||di.type!=="paragraph"&&di.type!=="text"?this.tokens.links[jt.tag]||(this.tokens.links[jt.tag]={href:jt.href,title:jt.title}):(di.raw+=`
`+jt.raw,di.text+=`
`+jt.raw,this.inlineQueue[this.inlineQueue.length-1].src=di.text);else if(jt=this.tokenizer.table(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.lheading(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(fi=ft,this.options.extensions&&this.options.extensions.startBlock&&function(){var Te=1/0,Ze=ft.slice(1),rt=void 0;Ri.options.extensions.startBlock.forEach(function(yt){typeof(rt=yt.call({lexer:this},Ze))=="number"&&rt>=0&&(Te=Math.min(Te,rt))}),Te<1/0&&Te>=0&&(fi=ft.substring(0,Te+1))}(),this.state.top&&(jt=this.tokenizer.paragraph(fi)))di=Mt[Mt.length-1],Si&&di.type==="paragraph"?(di.raw+=`
`+jt.raw,di.text+=`
`+jt.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=di.text):Mt.push(jt),Si=fi.length!==ft.length,ft=ft.substring(jt.raw.length);else if(jt=this.tokenizer.text(ft))ft=ft.substring(jt.raw.length),(di=Mt[Mt.length-1])&&di.type==="text"?(di.raw+=`
`+jt.raw,di.text+=`
`+jt.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=di.text):Mt.push(jt);else if(ft){var Wt="Infinite loop on byte: "+ft.charCodeAt(0);if(this.options.silent){console.error(Wt);break}throw new Error(Wt)}}return this.state.top=!0,Mt},It.inline=function(ft,Mt){return Mt===void 0&&(Mt=[]),this.inlineQueue.push({src:ft,tokens:Mt}),Mt},It.inlineTokens=function(ft,Mt){var jt,di,fi,Si=this;Mt===void 0&&(Mt=[]);var Ri,Wt,Te,Ze=ft;if(this.tokens.links){var rt=Object.keys(this.tokens.links);if(rt.length>0)for(;(Ri=this.tokenizer.rules.inline.reflinkSearch.exec(Ze))!=null;)rt.includes(Ri[0].slice(Ri[0].lastIndexOf("[")+1,-1))&&(Ze=Ze.slice(0,Ri.index)+"["+tt("a",Ri[0].length-2)+"]"+Ze.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ri=this.tokenizer.rules.inline.blockSkip.exec(Ze))!=null;)Ze=Ze.slice(0,Ri.index)+"["+tt("a",Ri[0].length-2)+"]"+Ze.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ri=this.tokenizer.rules.inline.escapedEmSt.exec(Ze))!=null;)Ze=Ze.slice(0,Ri.index)+"++"+Ze.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;ft;)if(Wt||(Te=""),Wt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Nt){return!!(jt=Nt.call({lexer:Si},ft,Mt))&&(ft=ft.substring(jt.raw.length),Mt.push(jt),!0)})))if(jt=this.tokenizer.escape(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.tag(ft))ft=ft.substring(jt.raw.length),(di=Mt[Mt.length-1])&&jt.type==="text"&&di.type==="text"?(di.raw+=jt.raw,di.text+=jt.text):Mt.push(jt);else if(jt=this.tokenizer.link(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.reflink(ft,this.tokens.links))ft=ft.substring(jt.raw.length),(di=Mt[Mt.length-1])&&jt.type==="text"&&di.type==="text"?(di.raw+=jt.raw,di.text+=jt.text):Mt.push(jt);else if(jt=this.tokenizer.emStrong(ft,Ze,Te))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.codespan(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.br(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.del(ft))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(jt=this.tokenizer.autolink(ft,At))ft=ft.substring(jt.raw.length),Mt.push(jt);else if(this.state.inLink||!(jt=this.tokenizer.url(ft,At))){if(fi=ft,this.options.extensions&&this.options.extensions.startInline&&function(){var Nt=1/0,dt=ft.slice(1),Re=void 0;Si.options.extensions.startInline.forEach(function(qe){typeof(Re=qe.call({lexer:this},dt))=="number"&&Re>=0&&(Nt=Math.min(Nt,Re))}),Nt<1/0&&Nt>=0&&(fi=ft.substring(0,Nt+1))}(),jt=this.tokenizer.inlineText(fi,Qt))ft=ft.substring(jt.raw.length),jt.raw.slice(-1)!=="_"&&(Te=jt.raw.slice(-1)),Wt=!0,(di=Mt[Mt.length-1])&&di.type==="text"?(di.raw+=jt.raw,di.text+=jt.text):Mt.push(jt);else if(ft){var yt="Infinite loop on byte: "+ft.charCodeAt(0);if(this.options.silent){console.error(yt);break}throw new Error(yt)}}else ft=ft.substring(jt.raw.length),Mt.push(jt);return Mt},Xt=ci,kt=[{key:"rules",get:function(){return{block:ht,inline:xt}}}],kt&&re(Xt,kt),Object.defineProperty(Xt,"prototype",{writable:!1}),ci}(),Lt=function(){function ci(kt){this.options=kt||p.defaults}var Xt=ci.prototype;return Xt.code=function(kt,It,ft){var Mt=(It||"").match(/\S*/)[0];if(this.options.highlight){var jt=this.options.highlight(kt,Mt);jt!=null&&jt!==kt&&(ft=!0,kt=jt)}return kt=kt.replace(/\n$/,"")+`
`,Mt?'<pre><code class="'+this.options.langPrefix+X(Mt,!0)+'">'+(ft?kt:X(kt,!0))+`</code></pre>
`:"<pre><code>"+(ft?kt:X(kt,!0))+`</code></pre>
`},Xt.blockquote=function(kt){return`<blockquote>
`+kt+`</blockquote>
`},Xt.html=function(kt){return kt},Xt.heading=function(kt,It,ft,Mt){return this.options.headerIds?"<h"+It+' id="'+(this.options.headerPrefix+Mt.slug(ft))+'">'+kt+"</h"+It+`>
`:"<h"+It+">"+kt+"</h"+It+`>
`},Xt.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Xt.list=function(kt,It,ft){var Mt=It?"ol":"ul";return"<"+Mt+(It&&ft!==1?' start="'+ft+'"':"")+`>
`+kt+"</"+Mt+`>
`},Xt.listitem=function(kt){return"<li>"+kt+`</li>
`},Xt.checkbox=function(kt){return"<input "+(kt?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Xt.paragraph=function(kt){return"<p>"+kt+`</p>
`},Xt.table=function(kt,It){return It&&(It="<tbody>"+It+"</tbody>"),`<table>
<thead>
`+kt+`</thead>
`+It+`</table>
`},Xt.tablerow=function(kt){return`<tr>
`+kt+`</tr>
`},Xt.tablecell=function(kt,It){var ft=It.header?"th":"td";return(It.align?"<"+ft+' align="'+It.align+'">':"<"+ft+">")+kt+"</"+ft+`>
`},Xt.strong=function(kt){return"<strong>"+kt+"</strong>"},Xt.em=function(kt){return"<em>"+kt+"</em>"},Xt.codespan=function(kt){return"<code>"+kt+"</code>"},Xt.br=function(){return this.options.xhtml?"<br/>":"<br>"},Xt.del=function(kt){return"<del>"+kt+"</del>"},Xt.link=function(kt,It,ft){if((kt=te(this.options.sanitize,this.options.baseUrl,kt))===null)return ft;var Mt='<a href="'+X(kt)+'"';return It&&(Mt+=' title="'+It+'"'),Mt+">"+ft+"</a>"},Xt.image=function(kt,It,ft){if((kt=te(this.options.sanitize,this.options.baseUrl,kt))===null)return ft;var Mt='<img src="'+kt+'" alt="'+ft+'"';return It&&(Mt+=' title="'+It+'"'),Mt+(this.options.xhtml?"/>":">")},Xt.text=function(kt){return kt},ci}(),ct=function(){function ci(){}var Xt=ci.prototype;return Xt.strong=function(kt){return kt},Xt.em=function(kt){return kt},Xt.codespan=function(kt){return kt},Xt.del=function(kt){return kt},Xt.html=function(kt){return kt},Xt.text=function(kt){return kt},Xt.link=function(kt,It,ft){return""+ft},Xt.image=function(kt,It,ft){return""+ft},Xt.br=function(){return""},ci}(),Kt=function(){function ci(){this.seen={}}var Xt=ci.prototype;return Xt.serialize=function(kt){return kt.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Xt.getNextSafeSlug=function(kt,It){var ft=kt,Mt=0;if(this.seen.hasOwnProperty(ft)){Mt=this.seen[kt];do ft=kt+"-"+ ++Mt;while(this.seen.hasOwnProperty(ft))}return It||(this.seen[kt]=Mt,this.seen[ft]=0),ft},Xt.slug=function(kt,It){It===void 0&&(It={});var ft=this.serialize(kt);return this.getNextSafeSlug(ft,It.dryrun)},ci}(),pi=function(){function ci(kt){this.options=kt||p.defaults,this.options.renderer=this.options.renderer||new Lt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ct,this.slugger=new Kt}ci.parse=function(kt,It){return new ci(It).parse(kt)},ci.parseInline=function(kt,It){return new ci(It).parseInline(kt)};var Xt=ci.prototype;return Xt.parse=function(kt,It){It===void 0&&(It=!0);var ft,Mt,jt,di,fi,Si,Ri,Wt,Te,Ze,rt,yt,Nt,dt,Re,qe,Ue,Pe,Xe,$e="",ot=kt.length;for(ft=0;ft<ot;ft++)if(Ze=kt[ft],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Ze.type])||(Xe=this.options.extensions.renderers[Ze.type].call({parser:this},Ze))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ze.type))switch(Ze.type){case"space":continue;case"hr":$e+=this.renderer.hr();continue;case"heading":$e+=this.renderer.heading(this.parseInline(Ze.tokens),Ze.depth,Ce(this.parseInline(Ze.tokens,this.textRenderer)),this.slugger);continue;case"code":$e+=this.renderer.code(Ze.text,Ze.lang,Ze.escaped);continue;case"table":for(Wt="",Ri="",di=Ze.header.length,Mt=0;Mt<di;Mt++)Ri+=this.renderer.tablecell(this.parseInline(Ze.header[Mt].tokens),{header:!0,align:Ze.align[Mt]});for(Wt+=this.renderer.tablerow(Ri),Te="",di=Ze.rows.length,Mt=0;Mt<di;Mt++){for(Ri="",fi=(Si=Ze.rows[Mt]).length,jt=0;jt<fi;jt++)Ri+=this.renderer.tablecell(this.parseInline(Si[jt].tokens),{header:!1,align:Ze.align[jt]});Te+=this.renderer.tablerow(Ri)}$e+=this.renderer.table(Wt,Te);continue;case"blockquote":Te=this.parse(Ze.tokens),$e+=this.renderer.blockquote(Te);continue;case"list":for(rt=Ze.ordered,yt=Ze.start,Nt=Ze.loose,di=Ze.items.length,Te="",Mt=0;Mt<di;Mt++)qe=(Re=Ze.items[Mt]).checked,Ue=Re.task,dt="",Re.task&&(Pe=this.renderer.checkbox(qe),Nt?Re.tokens.length>0&&Re.tokens[0].type==="paragraph"?(Re.tokens[0].text=Pe+" "+Re.tokens[0].text,Re.tokens[0].tokens&&Re.tokens[0].tokens.length>0&&Re.tokens[0].tokens[0].type==="text"&&(Re.tokens[0].tokens[0].text=Pe+" "+Re.tokens[0].tokens[0].text)):Re.tokens.unshift({type:"text",text:Pe}):dt+=Pe),dt+=this.parse(Re.tokens,Nt),Te+=this.renderer.listitem(dt,Ue,qe);$e+=this.renderer.list(Te,rt,yt);continue;case"html":$e+=this.renderer.html(Ze.text);continue;case"paragraph":$e+=this.renderer.paragraph(this.parseInline(Ze.tokens));continue;case"text":for(Te=Ze.tokens?this.parseInline(Ze.tokens):Ze.text;ft+1<ot&&kt[ft+1].type==="text";)Te+=`
`+((Ze=kt[++ft]).tokens?this.parseInline(Ze.tokens):Ze.text);$e+=It?this.renderer.paragraph(Te):Te;continue;default:var Tt='Token with "'+Ze.type+'" type was not found.';if(this.options.silent)return void console.error(Tt);throw new Error(Tt)}else $e+=Xe||"";return $e},Xt.parseInline=function(kt,It){It=It||this.renderer;var ft,Mt,jt,di="",fi=kt.length;for(ft=0;ft<fi;ft++)if(Mt=kt[ft],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Mt.type])||(jt=this.options.extensions.renderers[Mt.type].call({parser:this},Mt))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Mt.type))switch(Mt.type){case"escape":case"text":di+=It.text(Mt.text);break;case"html":di+=It.html(Mt.text);break;case"link":di+=It.link(Mt.href,Mt.title,this.parseInline(Mt.tokens,It));break;case"image":di+=It.image(Mt.href,Mt.title,Mt.text);break;case"strong":di+=It.strong(this.parseInline(Mt.tokens,It));break;case"em":di+=It.em(this.parseInline(Mt.tokens,It));break;case"codespan":di+=It.codespan(Mt.text);break;case"br":di+=It.br();break;case"del":di+=It.del(this.parseInline(Mt.tokens,It));break;default:var Si='Token with "'+Mt.type+'" type was not found.';if(this.options.silent)return void console.error(Si);throw new Error(Si)}else di+=jt||"";return di},ci}();function li(ci,Xt,kt){if(ci==null)throw new Error("marked(): input parameter is undefined or null");if(typeof ci!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ci)+", string expected");if(typeof Xt=="function"&&(kt=Xt,Xt=null),Ye(Xt=xe({},li.defaults,Xt||{})),kt){var It,ft=Xt.highlight;try{It=mi.lex(ci,Xt)}catch(Si){return kt(Si)}var Mt=function(Si){var Ri;if(!Si)try{Xt.walkTokens&&li.walkTokens(It,Xt.walkTokens),Ri=pi.parse(It,Xt)}catch(Wt){Si=Wt}return Xt.highlight=ft,Si?kt(Si):kt(null,Ri)};if(!ft||ft.length<3||(delete Xt.highlight,!It.length))return Mt();var jt=0;return li.walkTokens(It,function(Si){Si.type==="code"&&(jt++,setTimeout(function(){ft(Si.text,Si.lang,function(Ri,Wt){if(Ri)return Mt(Ri);Wt!=null&&Wt!==Si.text&&(Si.text=Wt,Si.escaped=!0),--jt==0&&Mt()})},0))}),void(jt===0&&Mt())}function di(Si){if(Si.message+=`
Please report this to https://github.com/markedjs/marked.`,Xt.silent)return"<p>An error occurred:</p><pre>"+X(Si.message+"",!0)+"</pre>";throw Si}try{var fi=mi.lex(ci,Xt);if(Xt.walkTokens){if(Xt.async)return Promise.all(li.walkTokens(fi,Xt.walkTokens)).then(function(){return pi.parse(fi,Xt)}).catch(di);li.walkTokens(fi,Xt.walkTokens)}return pi.parse(fi,Xt)}catch(Si){di(Si)}}li.options=li.setOptions=function(ci){var Xt;return xe(li.defaults,ci),Xt=li.defaults,p.defaults=Xt,li},li.getDefaults=se,li.defaults=p.defaults,li.use=function(){for(var ci=arguments.length,Xt=new Array(ci),kt=0;kt<ci;kt++)Xt[kt]=arguments[kt];var It,ft=xe.apply(void 0,[{}].concat(Xt)),Mt=li.defaults.extensions||{renderers:{},childTokens:{}};Xt.forEach(function(jt){if(jt.extensions&&(It=!0,jt.extensions.forEach(function(fi){if(!fi.name)throw new Error("extension name required");if(fi.renderer){var Si=Mt.renderers?Mt.renderers[fi.name]:null;Mt.renderers[fi.name]=Si?function(){for(var Ri=arguments.length,Wt=new Array(Ri),Te=0;Te<Ri;Te++)Wt[Te]=arguments[Te];var Ze=fi.renderer.apply(this,Wt);return Ze===!1&&(Ze=Si.apply(this,Wt)),Ze}:fi.renderer}if(fi.tokenizer){if(!fi.level||fi.level!=="block"&&fi.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");Mt[fi.level]?Mt[fi.level].unshift(fi.tokenizer):Mt[fi.level]=[fi.tokenizer],fi.start&&(fi.level==="block"?Mt.startBlock?Mt.startBlock.push(fi.start):Mt.startBlock=[fi.start]:fi.level==="inline"&&(Mt.startInline?Mt.startInline.push(fi.start):Mt.startInline=[fi.start]))}fi.childTokens&&(Mt.childTokens[fi.name]=fi.childTokens)})),jt.renderer&&function(){var fi=li.defaults.renderer||new Lt,Si=function(Wt){var Te=fi[Wt];fi[Wt]=function(){for(var Ze=arguments.length,rt=new Array(Ze),yt=0;yt<Ze;yt++)rt[yt]=arguments[yt];var Nt=jt.renderer[Wt].apply(fi,rt);return Nt===!1&&(Nt=Te.apply(fi,rt)),Nt}};for(var Ri in jt.renderer)Si(Ri);ft.renderer=fi}(),jt.tokenizer&&function(){var fi=li.defaults.tokenizer||new bt,Si=function(Wt){var Te=fi[Wt];fi[Wt]=function(){for(var Ze=arguments.length,rt=new Array(Ze),yt=0;yt<Ze;yt++)rt[yt]=arguments[yt];var Nt=jt.tokenizer[Wt].apply(fi,rt);return Nt===!1&&(Nt=Te.apply(fi,rt)),Nt}};for(var Ri in jt.tokenizer)Si(Ri);ft.tokenizer=fi}(),jt.walkTokens){var di=li.defaults.walkTokens;ft.walkTokens=function(fi){var Si=[];return Si.push(jt.walkTokens.call(this,fi)),di&&(Si=Si.concat(di.call(this,fi))),Si}}It&&(ft.extensions=Mt),li.setOptions(ft)})},li.walkTokens=function(ci,Xt){for(var kt,It=[],ft=function(){var jt=kt.value;switch(It=It.concat(Xt.call(li,jt)),jt.type){case"table":for(var di,fi=ie(jt.header);!(di=fi()).done;){var Si=di.value;It=It.concat(li.walkTokens(Si.tokens,Xt))}for(var Ri,Wt=ie(jt.rows);!(Ri=Wt()).done;)for(var Te,Ze=ie(Ri.value);!(Te=Ze()).done;){var rt=Te.value;It=It.concat(li.walkTokens(rt.tokens,Xt))}break;case"list":It=It.concat(li.walkTokens(jt.items,Xt));break;default:li.defaults.extensions&&li.defaults.extensions.childTokens&&li.defaults.extensions.childTokens[jt.type]?li.defaults.extensions.childTokens[jt.type].forEach(function(yt){It=It.concat(li.walkTokens(jt[yt],Xt))}):jt.tokens&&(It=It.concat(li.walkTokens(jt.tokens,Xt)))}},Mt=ie(ci);!(kt=Mt()).done;)ft();return It},li.parseInline=function(ci,Xt){if(ci==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ci!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ci)+", string expected");Ye(Xt=xe({},li.defaults,Xt||{}));try{var kt=mi.lexInline(ci,Xt);return Xt.walkTokens&&li.walkTokens(kt,Xt.walkTokens),pi.parseInline(kt,Xt)}catch(It){if(It.message+=`
Please report this to https://github.com/markedjs/marked.`,Xt.silent)return"<p>An error occurred:</p><pre>"+X(It.message+"",!0)+"</pre>";throw It}},li.Parser=pi,li.parser=pi.parse,li.Renderer=Lt,li.TextRenderer=ct,li.Lexer=mi,li.lexer=mi.lex,li.Tokenizer=bt,li.Slugger=Kt,li.parse=li;var Wi=li.options,Vi=li.setOptions,Xi=li.use,en=li.walkTokens,rn=li.parseInline,tn=li,yn=pi.parse,sn=mi.lex;p.Lexer=mi,p.Parser=pi,p.Renderer=Lt,p.Slugger=Kt,p.TextRenderer=ct,p.Tokenizer=bt,p.getDefaults=se,p.lexer=sn,p.marked=li,p.options=Wi,p.parse=tn,p.parseInline=rn,p.parser=yn,p.setOptions=Vi,p.use=Xi,p.walkTokens=en,Object.defineProperty(p,"__esModule",{value:!0})},oe.amd?oe(0,q):q(typeof Gn=="object"?Gn:(fe=typeof globalThis!="undefined"?globalThis:fe||self).marked={})})(),c.Lexer||Gn.Lexer,c.Parser||Gn.Parser,c.Renderer||Gn.Renderer,c.Slugger||Gn.Slugger,c.TextRenderer||Gn.TextRenderer,c.Tokenizer||Gn.Tokenizer,c.getDefaults||Gn.getDefaults,c.lexer||Gn.lexer;var b=c.marked||Gn.marked,l=(c.options||Gn.options,c.parse||Gn.parse,c.parseInline||Gn.parseInline,c.parser||Gn.parser,c.setOptions||Gn.setOptions,c.use||Gn.use,c.walkTokens||Gn.walkTokens,t(3897)),a=t(6663),w=t(6248),E=t(5935),D=t(7295),L=t(666);let k=Object.freeze({image:(oe,fe,q)=>{let p=[],re=[];return oe&&({href:oe,dimensions:p}=(0,d.v1)(oe),re.push(`src="${(0,d.d9)(oe)}"`)),q&&re.push(`alt="${(0,d.d9)(q)}"`),fe&&re.push(`title="${(0,d.d9)(fe)}"`),p.length&&(re=re.concat(p)),"<img "+re.join(" ")+">"},paragraph:oe=>`<p>${oe}</p>`,link:(oe,fe,q)=>typeof oe!="string"?"":(oe===q&&(q=(0,d.oR)(q)),fe=typeof fe=="string"?(0,d.d9)((0,d.oR)(fe)):"",`<a href="${oe=(oe=(0,d.oR)(oe)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" title="${fe||oe}">${q}</a>`)});function R(oe,fe={},q={}){var p,re;let ne=new i.SL,ie=!1,se=(0,I.az)(fe),ce=function(Ce){let Ee;try{Ee=(0,l.Q)(decodeURIComponent(Ce))}catch(Ae){}return Ee?(Ee=(0,w.rs)(Ee,Ae=>oe.uris&&oe.uris[Ae]?L.o.revive(oe.uris[Ae]):void 0),encodeURIComponent(JSON.stringify(Ee))):Ce},be=function(Ce,Ee){let Ae=oe.uris&&oe.uris[Ce],Fe=L.o.revive(Ae);return Ee?Ce.startsWith(a.lg.data+":")?Ce:(Fe||(Fe=L.o.parse(Ce)),a.Gi.uriToBrowserUri(Fe).toString(!0)):Fe?L.o.parse(Ce).toString()===Fe.toString()?Ce:(Fe.query&&(Fe=Fe.with({query:ce(Fe.query)})),Fe.toString()):Ce},de=new b.Renderer;de.image=k.image,de.link=k.link,de.paragraph=k.paragraph;let U=[],ue=[];if(fe.codeBlockRendererSync?de.code=(Ce,Ee)=>{let Ae=h.a.nextId(),Fe=fe.codeBlockRendererSync(O(Ee),Ce);return ue.push([Ae,Fe]),`<div class="code" data-code="${Ae}">${(0,D.YU)(Ce)}</div>`}:fe.codeBlockRenderer&&(de.code=(Ce,Ee)=>{let Ae=h.a.nextId(),Fe=fe.codeBlockRenderer(O(Ee),Ce);return U.push(Fe.then(_e=>[Ae,_e])),`<div class="code" data-code="${Ae}">${(0,D.YU)(Ce)}</div>`}),fe.actionHandler){let Ce=function(Fe){let _e=Fe.target;if(_e.tagName==="A"||(_e=_e.parentElement,_e&&_e.tagName==="A"))try{let te=_e.dataset.href;te&&(oe.baseUri&&(te=$(L.o.from(oe.baseUri),te)),fe.actionHandler.callback(te,Fe))}catch(te){(0,v.dL)(te)}finally{Fe.preventDefault()}},Ee=fe.actionHandler.disposables.add(new u.Y(se,"click")),Ae=fe.actionHandler.disposables.add(new u.Y(se,"auxclick"));fe.actionHandler.disposables.add(f.ju.any(Ee.event,Ae.event)(Fe=>{let _e=new A.n(Fe);(_e.leftButton||_e.middleButton)&&Ce(_e)})),fe.actionHandler.disposables.add(m.nm(se,"keydown",Fe=>{let _e=new _.y(Fe);(_e.equals(10)||_e.equals(3))&&Ce(_e)}))}oe.supportHtml||(q.sanitizer=Ce=>oe.isTrusted&&Ce.match(/^(<span[^>]+>)|(<\/\s*span>)$/)?Ce:"",q.sanitize=!0,q.silent=!0),q.renderer=de;let ve,X=(p=oe.value)!==null&&p!==void 0?p:"";if(X.length>1e5&&(X=`${X.substr(0,1e5)}\u2026`),oe.supportThemeIcons&&(X=(0,o.f$)(X)),fe.fillInIncompleteTokens){let Ce=Object.assign(Object.assign({},b.defaults),q),Ee=function(Ae){let Fe,_e;for(Fe=0;Fe<Ae.length;Fe++){let te=Ae[Fe];if(te.type==="paragraph"&&te.raw.match(/(\n|^)```/)){_e=H(Ae.slice(Fe));break}if(te.type==="paragraph"&&te.raw.match(/(\n|^)\|/)){_e=J(Ae.slice(Fe));break}if(Fe===Ae.length-1&&te.type==="paragraph"){let Le=F(te);if(Le){_e=[Le];break}}}if(_e){let te=[...Ae.slice(0,Fe),..._e];return te.links=Ae.links,te}return Ae}(b.lexer(X,Ce));ve=b.parser(Ee,Ce)}else ve=b.parse(X,q);oe.supportThemeIcons&&(ve=(0,x.T)(ve).map(Ce=>typeof Ce=="string"?Ce:Ce.outerHTML).join(""));let ye=new DOMParser().parseFromString(N(oe,ve),"text/html");if(ye.body.querySelectorAll("img").forEach(Ce=>{let Ee=Ce.getAttribute("src");if(Ee){let Ae=Ee;try{oe.baseUri&&(Ae=$(L.o.from(oe.baseUri),Ae))}catch(Fe){}Ce.src=be(Ae,!0)}}),ye.body.querySelectorAll("a").forEach(Ce=>{let Ee=Ce.getAttribute("href");if(Ce.setAttribute("href",""),!Ee||/^data:|javascript:/i.test(Ee)||/^command:/i.test(Ee)&&!oe.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(Ee))Ce.replaceWith(...Ce.childNodes);else{let Ae=be(Ee,!1);oe.baseUri&&(Ae=$(L.o.from(oe.baseUri),Ee)),Ce.dataset.href=Ae}}),se.innerHTML=N(oe,ye.body.innerHTML),U.length>0)Promise.all(U).then(Ce=>{var Ee,Ae;if(ie)return;let Fe=new Map(Ce),_e=se.querySelectorAll("div[data-code]");for(let te of _e){let Le=Fe.get((Ee=te.dataset.code)!==null&&Ee!==void 0?Ee:"");Le&&m.mc(te,Le)}(Ae=fe.asyncRenderCallback)===null||Ae===void 0||Ae.call(fe)});else if(ue.length>0){let Ce=new Map(ue),Ee=se.querySelectorAll("div[data-code]");for(let Ae of Ee){let Fe=Ce.get((re=Ae.dataset.code)!==null&&re!==void 0?re:"");Fe&&m.mc(Ae,Fe)}}if(fe.asyncRenderCallback)for(let Ce of se.getElementsByTagName("img")){let Ee=ne.add(m.nm(Ce,"load",()=>{Ee.dispose(),fe.asyncRenderCallback()}))}return{element:se,dispose:()=>{ie=!0,ne.dispose()}}}function O(oe){if(!oe)return"";let fe=oe.split(/[\s+|:|,|\{|\?]/,1);return fe.length?fe[0]:oe}function $(oe,fe){return/^\w[\w\d+.-]*:/.test(fe)?fe:oe.path.endsWith("/")?(0,E.i3)(oe,fe).toString():(0,E.i3)((0,E.XX)(oe),fe).toString()}function N(oe,fe){let{config:q,allowedSchemes:p}=function(ne){let ie=[a.lg.http,a.lg.https,a.lg.mailto,a.lg.data,a.lg.file,a.lg.vscodeFileResource,a.lg.vscodeRemote,a.lg.vscodeRemoteResource];return ne.isTrusted&&ie.push(a.lg.command),{config:{ALLOWED_TAGS:[...m.sQ],ALLOWED_ATTR:T,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:ie}}(oe);B.v5("uponSanitizeAttribute",(ne,ie)=>{if(!(ie.attrName!=="style"&&ie.attrName!=="class")){if(ne.tagName==="SPAN"){if(ie.attrName==="style")return void(ie.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(ie.attrValue));if(ie.attrName==="class")return void(ie.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(ie.attrValue))}ie.keepAttr=!1}});let re=m._F(p);try{return B.Nw(fe,Object.assign(Object.assign({},q),{RETURN_TRUSTED_TYPE:!0}))}finally{B.ok("uponSanitizeAttribute"),re.dispose()}}let T=["align","autoplay","alt","class","controls","data-code","data-href","height","href","loop","muted","playsinline","poster","src","style","target","title","width","start"];function C(oe){return typeof oe=="string"?oe:function(fe){var q;let p=(q=fe.value)!==null&&q!==void 0?q:"";return p.length>1e5&&(p=`${p.substr(0,1e5)}\u2026`),N({isTrusted:!1},b.parse(p,{renderer:K.value}).replace(/&(#\d+|[a-zA-Z]+);/g,re=>{var ne;return(ne=W.get(re))!==null&&ne!==void 0?ne:re})).toString()}(oe)}let W=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),K=new r.o(()=>{let oe=new b.Renderer;return oe.code=fe=>fe,oe.blockquote=fe=>fe,oe.html=fe=>"",oe.heading=(fe,q,p)=>fe+`
`,oe.hr=()=>"",oe.list=(fe,q)=>fe,oe.listitem=fe=>fe+`
`,oe.paragraph=fe=>fe+`
`,oe.table=(fe,q)=>fe+q+`
`,oe.tablerow=fe=>fe,oe.tablecell=(fe,q)=>fe+" ",oe.strong=fe=>fe,oe.em=fe=>fe,oe.codespan=fe=>fe,oe.br=()=>`
`,oe.del=fe=>fe,oe.image=(fe,q,p)=>"",oe.text=fe=>fe,oe.link=(fe,q,p)=>p,oe});function j(oe){let fe="";return oe.forEach(q=>{fe+=q.raw}),fe}function F(oe){let fe=oe.tokens[0];if(fe.type==="text"){let q=fe.raw.split(`
`),p=q[q.length-1];if(p.includes("`"))return function(re){return z(re,"`")}(oe);if(p.includes("**"))return z(oe,"**");if(p.match(/\*\w/))return z(oe,"*");if(p.match(/(^|\s)__\w/))return function(re){return z(re,"__")}(oe);if(p.match(/(^|\s)_\w/))return function(re){return z(re,"_")}(oe);if(p.match(/(^|\s)\[.*\]\(\w*/))return function(re){return z(re,")")}(oe);if(p.match(/(^|\s)\[\w/))return function(re){return z(re,"](about:blank)")}(oe)}}function H(oe){let fe=j(oe);return b.lexer(fe+"\n```")}function z(oe,fe){let q=j(Array.isArray(oe)?oe:[oe]);return b.lexer(q+fe)[0]}function J(oe){let fe=j(oe),q=fe.split(`
`),p,re=!1;for(let ne=0;ne<q.length;ne++){let ie=q[ne].trim();if(p===void 0&&ie.match(/^\s*\|/)){let se=ie.match(/(\|[^\|]+)(?=\||$)/g);se&&(p=se.length)}else if(typeof p=="number"){if(!ie.match(/^\s*\|/)||ne!==q.length-1)return;re=!0}}if(typeof p=="number"&&p>0){let ne=re?q.slice(0,-1).join(`
`):fe,ie=!!ne.match(/\|\s*$/),se=ne+(ie?"":"|")+`
|${" --- |".repeat(p)}`;return b.lexer(se)}}},7448:(ut,Ie,t)=>{"use strict";t.d(Ie,{n:()=>x,q:()=>v});var m=t(6268);let B=!1,u=null;function I(f){if(!f.parent||f.parent===f)return null;try{let d=f.location,o=f.parent.location;if(d.origin!=="null"&&o.origin!=="null"&&d.origin!==o.origin)return B=!0,null}catch(d){return B=!0,null}return f.parent}class _{static getSameOriginWindowChain(){if(!u){u=[];let d,o=window;do d=I(o),d?u.push({window:o,iframeElement:o.frameElement||null}):u.push({window:o,iframeElement:null}),o=d;while(o)}return u.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(d,o){if(!o||d===o)return{top:0,left:0};let h=0,r=0,i=this.getSameOriginWindowChain();for(let c of i){if(h+=c.window.scrollY,r+=c.window.scrollX,c.window===o||!c.iframeElement)break;let b=c.iframeElement.getBoundingClientRect();h+=b.top,r+=b.left}return{top:h,left:r}}}var A=t(1432);class x{constructor(d){this.timestamp=Date.now(),this.browserEvent=d,this.leftButton=d.button===0,this.middleButton=d.button===1,this.rightButton=d.button===2,this.buttons=d.buttons,this.target=d.target,this.detail=d.detail||1,d.type==="dblclick"&&(this.detail=2),this.ctrlKey=d.ctrlKey,this.shiftKey=d.shiftKey,this.altKey=d.altKey,this.metaKey=d.metaKey,typeof d.pageX=="number"?(this.posx=d.pageX,this.posy=d.pageY):(this.posx=d.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=d.clientY+document.body.scrollTop+document.documentElement.scrollTop);let o=_.getPositionOfChildWindowRelativeToAncestorWindow(window,d.view);this.posx-=o.left,this.posy-=o.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class v{constructor(d,o=0,h=0){if(this.browserEvent=d||null,this.target=d?d.target||d.targetNode||d.srcElement:null,this.deltaY=h,this.deltaX=o,d){let r=d,i=d;if(r.wheelDeltaY!==void 0)this.deltaY=r.wheelDeltaY/120;else if(i.VERTICAL_AXIS!==void 0&&i.axis===i.VERTICAL_AXIS)this.deltaY=-i.detail/3;else if(d.type==="wheel"){let c=d;c.deltaMode===c.DOM_DELTA_LINE?m.isFirefox&&!A.dz?this.deltaY=-d.deltaY/3:this.deltaY=-d.deltaY:this.deltaY=-d.deltaY/40}if(r.wheelDeltaX!==void 0)m.isSafari&&A.ED?this.deltaX=-r.wheelDeltaX/120:this.deltaX=r.wheelDeltaX/120;else if(i.HORIZONTAL_AXIS!==void 0&&i.axis===i.HORIZONTAL_AXIS)this.deltaX=-d.detail/3;else if(d.type==="wheel"){let c=d;c.deltaMode===c.DOM_DELTA_LINE?m.isFirefox&&!A.dz?this.deltaX=-d.deltaX/3:this.deltaX=-d.deltaX:this.deltaX=-d.deltaX/40}this.deltaY===0&&this.deltaX===0&&d.wheelDelta&&(this.deltaY=d.wheelDelta/120)}}preventDefault(){var d;(d=this.browserEvent)===null||d===void 0||d.preventDefault()}stopPropagation(){var d;(d=this.browserEvent)===null||d===void 0||d.stopPropagation()}}},795:(ut,Ie,t)=>{"use strict";var m;t.d(Ie,{B:()=>m}),function(B){let u={total:0,min:Number.MAX_VALUE,max:0},I=Object.assign({},u),_=Object.assign({},u),A=Object.assign({},u),x=0,v={keydown:0,input:0,render:0};function f(){v.keydown===1&&(performance.mark("keydown/end"),v.keydown=2)}function d(){performance.mark("input/start"),v.input=1,r()}function o(){v.input===1&&(performance.mark("input/end"),v.input=2)}function h(){v.render===1&&(performance.mark("render/end"),v.render=2)}function r(){setTimeout(i)}function i(){v.keydown===2&&v.input===2&&v.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),c("keydown",u),c("input",I),c("render",_),c("inputlatency",A),x++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),v.keydown=0,v.input=0,v.render=0)}function c(a,w){let E=performance.getEntriesByName(a)[0].duration;w.total+=E,w.min=Math.min(w.min,E),w.max=Math.max(w.max,E)}function b(a){return{average:a.total/x,max:a.max,min:a.min}}function l(a){a.total=0,a.min=Number.MAX_VALUE,a.max=0}B.onKeyDown=function(){i(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),v.keydown=1,queueMicrotask(f)},B.onBeforeInput=d,B.onInput=function(){v.input===0&&d(),queueMicrotask(o)},B.onKeyUp=function(){i()},B.onSelectionChange=function(){i()},B.onRenderStart=function(){v.keydown===2&&v.input===2&&v.render===0&&(performance.mark("render/start"),v.render=1,queueMicrotask(h),r())},B.getAndClearMeasurements=function(){if(x===0)return;let a={keydown:b(u),input:b(I),render:b(_),total:b(A),sampleCount:x};return l(u),l(I),l(_),l(A),x=0,a}}(m||(m={}))},553:(ut,Ie,t)=>{"use strict";t.d(Ie,{o:()=>x,t:()=>m});var m,B=t(5321),u=t(9488),I=t(9898),_=t(5976),A=t(1741);(function(v){v.Tap="-monaco-gesturetap",v.Change="-monaco-gesturechange",v.Start="-monaco-gesturestart",v.End="-monaco-gesturesend",v.Contextmenu="-monaco-gesturecontextmenu"})(m||(m={}));class x extends _.JT{constructor(){super(),this.dispatched=!1,this.targets=new A.S,this.ignoreTargets=new A.S,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(B.nm(document,"touchstart",f=>this.onTouchStart(f),{passive:!1})),this._register(B.nm(document,"touchend",f=>this.onTouchEnd(f))),this._register(B.nm(document,"touchmove",f=>this.onTouchMove(f),{passive:!1}))}static addTarget(f){if(!x.isTouchDevice())return _.JT.None;x.INSTANCE||(x.INSTANCE=new x);let d=x.INSTANCE.targets.push(f);return(0,_.OF)(d)}static ignoreTarget(f){if(!x.isTouchDevice())return _.JT.None;x.INSTANCE||(x.INSTANCE=new x);let d=x.INSTANCE.ignoreTargets.push(f);return(0,_.OF)(d)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(f){let d=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let o=0,h=f.targetTouches.length;o<h;o++){let r=f.targetTouches.item(o);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:d,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[d],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let i=this.newGestureEvent(m.Start,r.target);i.pageX=r.pageX,i.pageY=r.pageY,this.dispatchEvent(i)}this.dispatched&&(f.preventDefault(),f.stopPropagation(),this.dispatched=!1)}onTouchEnd(f){let d=Date.now(),o=Object.keys(this.activeTouches).length;for(let h=0,r=f.changedTouches.length;h<r;h++){let i=f.changedTouches.item(h);if(!this.activeTouches.hasOwnProperty(String(i.identifier))){console.warn("move of an UNKNOWN touch",i);continue}let c=this.activeTouches[i.identifier],b=Date.now()-c.initialTimeStamp;if(b<x.HOLD_DELAY&&Math.abs(c.initialPageX-u.Gb(c.rollingPageX))<30&&Math.abs(c.initialPageY-u.Gb(c.rollingPageY))<30){let l=this.newGestureEvent(m.Tap,c.initialTarget);l.pageX=u.Gb(c.rollingPageX),l.pageY=u.Gb(c.rollingPageY),this.dispatchEvent(l)}else if(b>=x.HOLD_DELAY&&Math.abs(c.initialPageX-u.Gb(c.rollingPageX))<30&&Math.abs(c.initialPageY-u.Gb(c.rollingPageY))<30){let l=this.newGestureEvent(m.Contextmenu,c.initialTarget);l.pageX=u.Gb(c.rollingPageX),l.pageY=u.Gb(c.rollingPageY),this.dispatchEvent(l)}else if(o===1){let l=u.Gb(c.rollingPageX),a=u.Gb(c.rollingPageY),w=u.Gb(c.rollingTimestamps)-c.rollingTimestamps[0],E=l-c.rollingPageX[0],D=a-c.rollingPageY[0],L=[...this.targets].filter(k=>c.initialTarget instanceof Node&&k.contains(c.initialTarget));this.inertia(L,d,Math.abs(E)/w,E>0?1:-1,l,Math.abs(D)/w,D>0?1:-1,a)}this.dispatchEvent(this.newGestureEvent(m.End,c.initialTarget)),delete this.activeTouches[i.identifier]}this.dispatched&&(f.preventDefault(),f.stopPropagation(),this.dispatched=!1)}newGestureEvent(f,d){let o=document.createEvent("CustomEvent");return o.initEvent(f,!1,!0),o.initialTarget=d,o.tapCount=0,o}dispatchEvent(f){if(f.type===m.Tap){let d=new Date().getTime(),o=0;o=d-this._lastSetTapCountTime>x.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=d,f.tapCount=o}else f.type!==m.Change&&f.type!==m.Contextmenu||(this._lastSetTapCountTime=0);if(f.initialTarget instanceof Node){for(let d of this.ignoreTargets)if(d.contains(f.initialTarget))return;for(let d of this.targets)d.contains(f.initialTarget)&&(d.dispatchEvent(f),this.dispatched=!0)}}inertia(f,d,o,h,r,i,c,b){this.handle=B.jL(()=>{let l=Date.now(),a=l-d,w=0,E=0,D=!0;o+=x.SCROLL_FRICTION*a,i+=x.SCROLL_FRICTION*a,o>0&&(D=!1,w=h*o*a),i>0&&(D=!1,E=c*i*a);let L=this.newGestureEvent(m.Change);L.translationX=w,L.translationY=E,f.forEach(k=>k.dispatchEvent(L)),D||this.inertia(f,l,o,h,r+w,i,c,b+E)})}onTouchMove(f){let d=Date.now();for(let o=0,h=f.changedTouches.length;o<h;o++){let r=f.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let i=this.activeTouches[r.identifier],c=this.newGestureEvent(m.Change,i.initialTarget);c.translationX=r.pageX-u.Gb(i.rollingPageX),c.translationY=r.pageY-u.Gb(i.rollingPageY),c.pageX=r.pageX,c.pageY=r.pageY,this.dispatchEvent(c),i.rollingPageX.length>3&&(i.rollingPageX.shift(),i.rollingPageY.shift(),i.rollingTimestamps.shift()),i.rollingPageX.push(r.pageX),i.rollingPageY.push(r.pageY),i.rollingTimestamps.push(d)}this.dispatched&&(f.preventDefault(),f.stopPropagation(),this.dispatched=!1)}}x.SCROLL_FRICTION=-.005,x.HOLD_DELAY=700,x.CLEAR_TAP_COUNT_TIME=400,function(v,f,d,o){var h,r=arguments.length,i=r<3?f:o===null?o=Object.getOwnPropertyDescriptor(f,d):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(v,f,d,o);else for(var c=v.length-1;c>=0;c--)(h=v[c])&&(i=(r<3?h(i):r>3?h(f,d,i):h(f,d))||i);r>3&&i&&Object.defineProperty(f,d,i)}([I.H],x,"isTouchDevice",null)},8609:(ut,Ie,t)=>{"use strict";t.d(Ie,{gU:()=>$,YH:()=>O,Lc:()=>N});var m=t(6268),B=t(3547),u=t(5321),I=t(553),_=t(1433),A=t(4850),x=t(9069),v=t(7352),f=t(3799),d=t(9488),o=t(4669),h=t(2258),r=t(5976),i=t(1432),c=t(3580);let b=u.$,l="selectOption.entry.template";class a{get templateId(){return l}renderTemplate(C){let W=Object.create(null);return W.root=C,W.text=u.R3(C,b(".option-text")),W.detail=u.R3(C,b(".option-detail")),W.decoratorRight=u.R3(C,b(".option-decorator-right")),W}renderElement(C,W,K){let j=K,F=C.text,H=C.detail,z=C.decoratorRight,J=C.isDisabled;j.text.textContent=F,j.detail.textContent=H||"",j.decoratorRight.innerText=z||"",J?j.root.classList.add("option-disabled"):j.root.classList.remove("option-disabled")}disposeTemplate(C){}}class w extends r.JT{constructor(C,W,K,j,F){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=j,this.selectBoxOptions=F||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=w.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new o.Q5,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(K),this.selected=W||0,C&&this.setOptions(C,W),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return l}constructSelectDropDown(C){this.contextViewProvider=C,this.selectDropDownContainer=u.$(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=u.R3(this.selectDropDownContainer,b(".select-box-details-pane"));let W=u.R3(this.selectDropDownContainer,b(".select-box-dropdown-container-width-control")),K=u.R3(W,b(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",u.R3(K,this.widthControlElement),this._dropDownPosition=0,this.styleElement=u.dS(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(u.nm(this.selectDropDownContainer,u.tw.DRAG_START,j=>{u.zB.stop(j,!0)}))}registerListeners(){let C;this._register(u.mu(this.selectElement,"change",W=>{this.selected=W.target.selectedIndex,this._onDidSelect.fire({index:W.target.selectedIndex,selected:W.target.value}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)})),this._register(u.nm(this.selectElement,u.tw.CLICK,W=>{u.zB.stop(W),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(u.nm(this.selectElement,u.tw.MOUSE_DOWN,W=>{u.zB.stop(W)})),this._register(u.nm(this.selectElement,"touchstart",W=>{C=this._isVisible})),this._register(u.nm(this.selectElement,"touchend",W=>{u.zB.stop(W),C?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(u.nm(this.selectElement,u.tw.KEY_DOWN,W=>{let K=new x.y(W),j=!1;i.dz?K.keyCode!==18&&K.keyCode!==16&&K.keyCode!==10&&K.keyCode!==3||(j=!0):(K.keyCode===18&&K.altKey||K.keyCode===16&&K.altKey||K.keyCode===10||K.keyCode===3)&&(j=!0),j&&(this.showSelectDropDown(),u.zB.stop(W,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(C,W){d.fS(this.options,C)||(this.options=C,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((K,j)=>{this.selectElement.add(this.createOption(K.text,j,K.isDisabled)),typeof K.description=="string"&&(this._hasDetails=!0)})),W!==void 0&&(this.select(W),this._currentSelection=this.selected)}setOptionsList(){var C;(C=this.selectList)===null||C===void 0||C.splice(0,this.selectList.length,this.options)}select(C){C>=0&&C<this.options.length?this.selected=C:C>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(C){this.selectElement.tabIndex=C?0:-1}render(C){this.container=C,C.classList.add("select-container"),C.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let C=[];this.styles.listFocusBackground&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(C.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),C.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),C.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(C.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),C.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&C.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),C.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),C.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=C.join(`
`)}styleSelectElement(){var C,W,K;let j=(C=this.styles.selectBackground)!==null&&C!==void 0?C:"",F=(W=this.styles.selectForeground)!==null&&W!==void 0?W:"",H=(K=this.styles.selectBorder)!==null&&K!==void 0?K:"";this.selectElement.style.backgroundColor=j,this.selectElement.style.color=F,this.selectElement.style.borderColor=H}styleList(){var C,W;let K=(C=this.styles.selectBackground)!==null&&C!==void 0?C:"",j=u.XT(this.styles.selectListBackground,K);this.selectDropDownListContainer.style.backgroundColor=j,this.selectionDetailsPane.style.backgroundColor=j;let F=(W=this.styles.focusBorder)!==null&&W!==void 0?W:"";this.selectDropDownContainer.style.outlineColor=F,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(C,W,K){let j=document.createElement("option");return j.value=C,j.text=C,j.disabled=!!K,j}showSelectDropDown(){this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:C=>this.renderSelectDropDown(C,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:C=>this.renderSelectDropDown(C),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(C){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),C&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(C,W){return C.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(W),{dispose:()=>{try{C.removeChild(this.selectDropDownContainer)}catch(K){}}}}measureMaxDetailsHeight(){let C=0;return this.options.forEach((W,K)=>{this.updateDetail(K),this.selectionDetailsPane.offsetHeight>C&&(C=this.selectionDetailsPane.offsetHeight)}),C}layoutSelectDropDown(C){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");let W=u.i(this.selectElement),K=getComputedStyle(this.selectElement),j=parseFloat(K.getPropertyValue("--dropdown-padding-top"))+parseFloat(K.getPropertyValue("--dropdown-padding-bottom")),F=window.innerHeight-W.top-W.height-(this.selectBoxOptions.minBottomMargin||0),H=W.top-w.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,z=this.selectElement.offsetWidth,J=this.setWidthControlElement(this.widthControlElement),oe=Math.max(J,Math.round(z)).toString()+"px";this.selectDropDownContainer.style.width=oe,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let fe=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let q=this._hasDetails?this._cachedMaxDetailsHeight:0,p=fe+j+q,re=Math.floor((F-j-q)/this.getHeight()),ne=Math.floor((H-j-q)/this.getHeight());if(C)return!(W.top+W.height>window.innerHeight-22||W.top<w.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||re<1&&ne<1||(re<w.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&ne>re&&this.options.length>re?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),0));if(W.top+W.height>window.innerHeight-22||W.top<w.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&re<1||this._dropDownPosition===1&&ne<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&re+ne<1)return this.hideSelectDropDown(!0),!1;p>F&&(fe=re*this.getHeight())}else p>H&&(fe=ne*this.getHeight());return this.selectList.layout(fe),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=fe+j+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=fe+j+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=oe,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1}setWidthControlElement(C){let W=0;if(C){let K=0,j=0;this.options.forEach((F,H)=>{let z=F.detail?F.detail.length:0,J=F.decoratorRight?F.decoratorRight.length:0,oe=F.text.length+z+J;oe>j&&(K=H,j=oe)}),C.textContent=this.options[K].text+(this.options[K].decoratorRight?this.options[K].decoratorRight+" ":""),W=u.w(C)}return W}createSelectList(C){if(this.selectList)return;this.selectDropDownListContainer=u.R3(C,b(".select-box-dropdown-list-container")),this.listRenderer=new a,this.selectList=new f.aV("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:j=>{let F=j.text;return j.detail&&(F+=`. ${j.detail}`),j.decoratorRight&&(F+=`. ${j.decoratorRight}`),j.description&&(F+=`. ${j.description}`),F},getWidgetAriaLabel:()=>(0,c.NC)({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let W=this._register(new A.Y(this.selectDropDownListContainer,"keydown")),K=o.ju.chain(W.event).filter(()=>this.selectList.length>0).map(j=>new x.y(j));this._register(K.filter(j=>j.keyCode===3).on(j=>this.onEnter(j),this)),this._register(K.filter(j=>j.keyCode===2).on(j=>this.onEnter(j),this)),this._register(K.filter(j=>j.keyCode===9).on(j=>this.onEscape(j),this)),this._register(K.filter(j=>j.keyCode===16).on(j=>this.onUpArrow(j),this)),this._register(K.filter(j=>j.keyCode===18).on(j=>this.onDownArrow(j),this)),this._register(K.filter(j=>j.keyCode===12).on(this.onPageDown,this)),this._register(K.filter(j=>j.keyCode===11).on(this.onPageUp,this)),this._register(K.filter(j=>j.keyCode===14).on(this.onHome,this)),this._register(K.filter(j=>j.keyCode===13).on(this.onEnd,this)),this._register(K.filter(j=>j.keyCode>=21&&j.keyCode<=56||j.keyCode>=85&&j.keyCode<=113).on(this.onCharacter,this)),this._register(u.nm(this.selectList.getHTMLElement(),u.tw.POINTER_UP,j=>this.onPointerUp(j))),this._register(this.selectList.onMouseOver(j=>j.index!==void 0&&this.selectList.setFocus([j.index]))),this._register(this.selectList.onDidChangeFocus(j=>this.onListFocus(j))),this._register(u.nm(this.selectDropDownContainer,u.tw.FOCUS_OUT,j=>{this._isVisible&&!u.jg(j.relatedTarget,this.selectDropDownContainer)&&this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(C){if(!this.selectList.length)return;u.zB.stop(C);let W=C.target;if(!W||W.classList.contains("slider"))return;let K=W.closest(".monaco-list-row");if(!K)return;let j=Number(K.getAttribute("data-index")),F=K.classList.contains("option-disabled");j>=0&&j<this.options.length&&!F&&(this.selected=j,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(C,W){let K=F=>{for(let H=0;H<F.childNodes.length;H++){let z=F.childNodes.item(H);(z.tagName&&z.tagName.toLowerCase())==="img"?F.removeChild(z):K(z)}},j=(0,v.ap)({value:C,supportThemeIcons:!0},{actionHandler:W});return j.element.classList.add("select-box-description-markdown"),K(j.element),j.element}onListFocus(C){this._isVisible&&this._hasDetails&&this.updateDetail(C.indexes[0])}updateDetail(C){var W,K;this.selectionDetailsPane.innerText="";let j=this.options[C],F=(W=j==null?void 0:j.description)!==null&&W!==void 0?W:"",H=(K=j==null?void 0:j.descriptionIsMarkdown)!==null&&K!==void 0&&K;if(F){if(H){let z=j.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(F,z))}else this.selectionDetailsPane.innerText=F;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(C){u.zB.stop(C),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(C){u.zB.stop(C),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(C){if(this.selected<this.options.length-1){u.zB.stop(C,!0);let W=this.options[this.selected+1].isDisabled;if(W&&this.options.length>this.selected+2)this.selected+=2;else{if(W)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(C){this.selected>0&&(u.zB.stop(C,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(C){u.zB.stop(C),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(C){u.zB.stop(C),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(C){u.zB.stop(C),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(C){u.zB.stop(C),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(C){let W=h.kL.toString(C.keyCode),K=-1;for(let j=0;j<this.options.length-1;j++)if(K=(j+this.selected+1)%this.options.length,this.options[K].text.charAt(0).toUpperCase()===W&&!this.options[K].isDisabled){this.select(K),this.selectList.setFocus([K]),this.selectList.reveal(this.selectList.getFocus()[0]),u.zB.stop(C);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}w.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,w.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,w.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class E extends r.JT{constructor(C,W,K,j){super(),this.selected=0,this.selectBoxOptions=j||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new o.Q5),this.styles=K,this.registerListeners(),this.setOptions(C,W)}registerListeners(){this._register(I.o.addTarget(this.selectElement)),[I.t.Tap].forEach(C=>{this._register(u.nm(this.selectElement,C,W=>{this.selectElement.focus()}))}),this._register(u.mu(this.selectElement,"click",C=>{u.zB.stop(C,!0)})),this._register(u.mu(this.selectElement,"change",C=>{this.selectElement.title=C.target.value,this._onDidSelect.fire({index:C.target.selectedIndex,selected:C.target.value})})),this._register(u.mu(this.selectElement,"keydown",C=>{let W=!1;i.dz?C.keyCode!==18&&C.keyCode!==16&&C.keyCode!==10||(W=!0):(C.keyCode===18&&C.altKey||C.keyCode===10||C.keyCode===3)&&(W=!0),W&&C.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(C,W){this.options&&d.fS(this.options,C)||(this.options=C,this.selectElement.options.length=0,this.options.forEach((K,j)=>{this.selectElement.add(this.createOption(K.text,j,K.isDisabled))})),W!==void 0&&this.select(W)}select(C){this.options.length===0?this.selected=0:C>=0&&C<this.options.length?this.selected=C:C>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(C){this.selectElement.tabIndex=C?0:-1}render(C){C.classList.add("select-container"),C.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var C,W,K;this.selectElement&&(this.selectElement.style.backgroundColor=(C=this.styles.selectBackground)!==null&&C!==void 0?C:"",this.selectElement.style.color=(W=this.styles.selectForeground)!==null&&W!==void 0?W:"",this.selectElement.style.borderColor=(K=this.styles.selectBorder)!==null&&K!==void 0?K:"")}createOption(C,W,K){let j=document.createElement("option");return j.value=C,j.text=C,j.disabled=!!K,j}}var D=t(3794);class L extends D.${constructor(C,W,K,j,F){super(),i.dz&&!(F!=null&&F.useCustomDrawn)?this.selectBoxDelegate=new E(C,W,j,F):this.selectBoxDelegate=new w(C,W,K,j,F),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(C,W){this.selectBoxDelegate.setOptions(C,W)}select(C){this.selectBoxDelegate.select(C)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(C){this.selectBoxDelegate.setFocusable(C)}render(C){this.selectBoxDelegate.render(C)}}var k=t(4741),R=t(8401);class O extends r.JT{get action(){return this._action}constructor(C,W,K={}){super(),this.options=K,this._context=C||this,this._action=W,W instanceof k.aU&&this._register(W.onDidChange(j=>{this.element&&this.handleActionChangeEvent(j)}))}handleActionChangeEvent(C){C.enabled!==void 0&&this.updateEnabled(),C.checked!==void 0&&this.updateChecked(),C.class!==void 0&&this.updateClass(),C.label!==void 0&&(this.updateLabel(),this.updateTooltip()),C.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new k.Wi)),this._actionRunner}set actionRunner(C){this._actionRunner=C}isEnabled(){return this._action.enabled}setActionContext(C){this._context=C}render(C){let W=this.element=C;this._register(I.o.addTarget(C));let K=this.options&&this.options.draggable;K&&(C.draggable=!0,m.isFirefox&&this._register((0,u.nm)(C,u.tw.DRAG_START,j=>{var F;return(F=j.dataTransfer)===null||F===void 0?void 0:F.setData(B.g.TEXT,this._action.label)}))),this._register((0,u.nm)(W,I.t.Tap,j=>this.onClick(j,!0))),this._register((0,u.nm)(W,u.tw.MOUSE_DOWN,j=>{K||u.zB.stop(j,!0),this._action.enabled&&j.button===0&&W.classList.add("active")})),i.dz&&this._register((0,u.nm)(W,u.tw.CONTEXT_MENU,j=>{j.button===0&&j.ctrlKey===!0&&this.onClick(j)})),this._register((0,u.nm)(W,u.tw.CLICK,j=>{u.zB.stop(j,!0),this.options&&this.options.isMenu||this.onClick(j)})),this._register((0,u.nm)(W,u.tw.DBLCLICK,j=>{u.zB.stop(j,!0)})),[u.tw.MOUSE_UP,u.tw.MOUSE_OUT].forEach(j=>{this._register((0,u.nm)(W,j,F=>{u.zB.stop(F),W.classList.remove("active")}))})}onClick(C,W=!1){var K;u.zB.stop(C,!0);let j=R.Jp(this._context)?!((K=this.options)===null||K===void 0)&&K.useEventAsContext?C:{preserveFocus:W}:this._context;this.actionRunner.run(this._action,j)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(C){this.element&&(this.element.tabIndex=C?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.action.tooltip}updateTooltip(){var C;if(!this.element)return;let W=(C=this.getTooltip())!==null&&C!==void 0?C:"";this.updateAriaLabel(),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(W):(this.customHover=(0,_.g)(this.options.hoverDelegate,this.element,W),this._store.add(this.customHover))):this.element.title=W}updateAriaLabel(){var C;if(this.element){let W=(C=this.getTooltip())!==null&&C!==void 0?C:"";this.element.setAttribute("aria-label",W)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class $ extends O{constructor(C,W,K){super(C,W,K),this.options=K,this.options.icon=K.icon!==void 0&&K.icon,this.options.label=K.label===void 0||K.label,this.cssClass=""}render(C){super.render(C),this.element&&(this.label=(0,u.R3)(this.element,(0,u.$)("a.action-label"))),this.label&&(this._action.id===k.Z0.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&((0,u.R3)(this.element,(0,u.$)("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(C){this.label&&(this.label.tabIndex=C?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let C=null;return this.action.tooltip?C=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(C=this.action.label,this.options.keybinding&&(C=c.NC({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",C,this.options.keybinding))),C!=null?C:void 0}updateClass(){var C;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.action.class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(C=this.label)===null||C===void 0||C.classList.remove("codicon")}updateEnabled(){var C,W;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(C=this.element)===null||C===void 0||C.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(W=this.element)===null||W===void 0||W.classList.add("disabled"))}updateAriaLabel(){var C;if(this.label){let W=(C=this.getTooltip())!==null&&C!==void 0?C:"";this.label.setAttribute("aria-label",W)}}updateChecked(){this.label&&(this.action.checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}class N extends O{constructor(C,W,K,j,F,H,z){super(C,W),this.selectBox=new L(K,j,F,H,z),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(C){this.selectBox.select(C)}registerListeners(){this._register(this.selectBox.onDidSelect(C=>this.runAction(C.selected,C.index)))}runAction(C,W){this.actionRunner.run(this._action,this.getActionContext(C,W))}getActionContext(C,W){return C}setFocusable(C){this.selectBox.setFocusable(C)}focus(){var C;(C=this.selectBox)===null||C===void 0||C.focus()}blur(){var C;(C=this.selectBox)===null||C===void 0||C.blur()}render(C){this.selectBox.render(C)}}},317:(ut,Ie,t)=>{"use strict";t.d(Ie,{o:()=>v});var m=t(5321),B=t(9069),u=t(8609),I=t(4741),_=t(4669),A=t(5976),x=t(8401);class v extends A.JT{constructor(d,o={}){var h,r,i,c,b,l;let a,w;switch(super(),this._actionRunnerDisposables=this._register(new A.SL),this.viewItemDisposables=this._register(new A.b2),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new _.Q5),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new _.Q5({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new _.Q5),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new _.Q5),this.onWillRun=this._onWillRun.event,this.options=o,this._context=(h=o.context)!==null&&h!==void 0?h:null,this._orientation=(r=this.options.orientation)!==null&&r!==void 0?r:0,this._triggerKeys={keyDown:(c=(i=this.options.triggerKeys)===null||i===void 0?void 0:i.keyDown)!==null&&c!==void 0&&c,keys:(l=(b=this.options.triggerKeys)===null||b===void 0?void 0:b.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new I.Wi,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(E=>this._onDidRun.fire(E))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(E=>this._onWillRun.fire(E))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",o.animated!==!1&&this.domNode.classList.add("animated"),this._orientation){case 0:a=[15],w=[17];break;case 1:a=[16],w=[18],this.domNode.className+=" vertical"}this._register(m.nm(this.domNode,m.tw.KEY_DOWN,E=>{let D=new B.y(E),L=!0,k=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;a&&(D.equals(a[0])||D.equals(a[1]))?L=this.focusPrevious():w&&(D.equals(w[0])||D.equals(w[1]))?L=this.focusNext():D.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():D.equals(14)?L=this.focusFirst():D.equals(13)?L=this.focusLast():D.equals(2)&&k instanceof u.YH&&k.trapsArrowNavigation?L=this.focusNext():this.isTriggerKeyEvent(D)?this._triggerKeys.keyDown?this.doTrigger(D):this.triggerKeyDown=!0:L=!1,L&&(D.preventDefault(),D.stopPropagation())})),this._register(m.nm(this.domNode,m.tw.KEY_UP,E=>{let D=new B.y(E);this.isTriggerKeyEvent(D)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(D)),D.preventDefault(),D.stopPropagation()):(D.equals(2)||D.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(m.go(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{m.vY()!==this.domNode&&m.jg(m.vY(),this.domNode)||(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),d.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(d){if(this.focusable=d,this.focusable){let o=this.viewItems.find(h=>h instanceof u.YH&&h.isEnabled());o instanceof u.YH&&o.setFocusable(!0)}else this.viewItems.forEach(o=>{o instanceof u.YH&&o.setFocusable(!1)})}isTriggerKeyEvent(d){let o=!1;return this._triggerKeys.keys.forEach(h=>{o=o||d.equals(h)}),o}updateFocusedItem(){for(let d=0;d<this.actionsList.children.length;d++){let o=this.actionsList.children[d];if(m.jg(m.vY(),o)){this.focusedItem=d;break}}}get context(){return this._context}set context(d){this._context=d,this.viewItems.forEach(o=>o.setActionContext(d))}get actionRunner(){return this._actionRunner}set actionRunner(d){this._actionRunner=d,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(o=>this._onDidRun.fire(o))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(o=>this._onWillRun.fire(o))),this.viewItems.forEach(o=>o.actionRunner=d)}getContainer(){return this.domNode}getAction(d){var o;if(typeof d=="number")return(o=this.viewItems[d])===null||o===void 0?void 0:o.action;if(d instanceof HTMLElement){for(;d.parentElement!==this.actionsList;){if(!d.parentElement)return;d=d.parentElement}for(let h=0;h<this.actionsList.childNodes.length;h++)if(this.actionsList.childNodes[h]===d)return this.viewItems[h].action}}push(d,o={}){let h=Array.isArray(d)?d:[d],r=x.hj(o.index)?o.index:null;h.forEach(i=>{let c=document.createElement("li"),b;c.className="action-item",c.setAttribute("role","presentation");let l=Object.assign({hoverDelegate:this.options.hoverDelegate},o);this.options.actionViewItemProvider&&(b=this.options.actionViewItemProvider(i,l)),b||(b=new u.gU(this.context,i,l)),this.options.allowContextMenu||this.viewItemDisposables.set(b,m.nm(c,m.tw.CONTEXT_MENU,a=>{m.zB.stop(a,!0)})),b.actionRunner=this._actionRunner,b.setActionContext(this.context),b.render(c),this.focusable&&b instanceof u.YH&&this.viewItems.length===0&&b.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(c),this.viewItems.push(b)):(this.actionsList.insertBefore(c,this.actionsList.children[r]),this.viewItems.splice(r,0,b),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=(0,A.B9)(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),m.PO(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(d){let o,h=!1;if(d===void 0?h=!0:typeof d=="number"?o=d:typeof d=="boolean"&&(h=d),h&&this.focusedItem===void 0){let r=this.viewItems.findIndex(i=>i.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else o!==void 0&&(this.focusedItem=o),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(d){if(this.focusedItem===void 0)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let o=this.focusedItem,h;do{if(!d&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=o,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,h=this.viewItems[this.focusedItem]}while(this.focusedItem!==o&&(this.options.focusOnlyEnabledItems&&!h.isEnabled()||h.action.id===I.Z0.ID));return this.updateFocus(),!0}focusPrevious(d){if(this.focusedItem===void 0)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let o=this.focusedItem,h;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!d&&this.options.preventLoopNavigation)return this.focusedItem=o,!1;this.focusedItem=this.viewItems.length-1}h=this.viewItems[this.focusedItem]}while(this.focusedItem!==o&&(this.options.focusOnlyEnabledItems&&!h.isEnabled()||h.action.id===I.Z0.ID));return this.updateFocus(!0),!0}updateFocus(d,o,h=!1){var r;this.focusedItem===void 0&&this.actionsList.focus({preventScroll:o}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])===null||r===void 0||r.blur());let i=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(i){let c=!0;x.mf(i.focus)||(c=!1),this.options.focusOnlyEnabledItems&&x.mf(i.isEnabled)&&!i.isEnabled()&&(c=!1),i.action.id===I.Z0.ID&&(c=!1),c?(h||this.previouslyFocusedItem!==this.focusedItem)&&(i.focus(d),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:o}),this.previouslyFocusedItem=void 0)}}doTrigger(d){if(this.focusedItem===void 0)return;let o=this.viewItems[this.focusedItem];if(o instanceof u.YH){let h=o._context===null||o._context===void 0?d:o._context;this.run(o._action,h)}}run(d,o){return h=this,r=void 0,c=function*(){yield this._actionRunner.run(d,o)},new((i=void 0)||(i=Promise))(function(b,l){function a(D){try{E(c.next(D))}catch(L){l(L)}}function w(D){try{E(c.throw(D))}catch(L){l(L)}}function E(D){var L;D.done?b(D.value):(L=D.value,L instanceof i?L:new i(function(k){k(L)})).then(a,w)}E((c=c.apply(h,r||[])).next())});var h,r,i,c}dispose(){this._context=void 0,this.viewItems=(0,A.B9)(this.viewItems),this.getContainer().remove(),super.dispose()}}},5152:(ut,Ie,t)=>{"use strict";t.d(Ie,{Z9:()=>d,i7:()=>o,wW:()=>f});var m=t(5321),B=t(1432);let u=2e4,I,_,A,x,v;function f(r){I=document.createElement("div"),I.className="monaco-aria-container";let i=()=>{let b=document.createElement("div");return b.className="monaco-alert",b.setAttribute("role","alert"),b.setAttribute("aria-atomic","true"),I.appendChild(b),b};_=i(),A=i();let c=()=>{let b=document.createElement("div");return b.className="monaco-status",b.setAttribute("role","complementary"),b.setAttribute("aria-live","polite"),b.setAttribute("aria-atomic","true"),I.appendChild(b),b};x=c(),v=c(),r.appendChild(I)}function d(r){I&&(_.textContent!==r?(m.PO(A),h(_,r)):(m.PO(_),h(A,r)))}function o(r){I&&(B.dz?d(r):x.textContent!==r?(m.PO(v),h(x,r)):(m.PO(x),h(v,r)))}function h(r,i){m.PO(r),i.length>u&&(i=i.substr(0,u)),r.textContent=i,r.style.visibility="hidden",r.style.visibility="visible"}},3416:(ut,Ie,t)=>{"use strict";t.d(Ie,{z:()=>o});var m=t(5321),B=t(921),u=t(9069),I=t(7352),_=t(553),A=t(6811),x=t(1264),v=t(4669),f=t(9365),d=t(5976);x.Il.white.toString(),x.Il.white.toString();class o extends d.JT{get onDidClick(){return this._onDidClick.event}constructor(r,i){super(),this._label="",this._onDidClick=this._register(new v.Q5),this.options=i,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button");let c=i.secondary?i.buttonSecondaryBackground:i.buttonBackground,b=i.secondary?i.buttonSecondaryForeground:i.buttonForeground;this._element.style.color=b||"",this._element.style.backgroundColor=c||"",i.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),r.appendChild(this._element),this._register(_.o.addTarget(this._element)),[m.tw.CLICK,_.t.Tap].forEach(l=>{this._register((0,m.nm)(this._element,l,a=>{this.enabled?this._onDidClick.fire(a):m.zB.stop(a)}))}),this._register((0,m.nm)(this._element,m.tw.KEY_DOWN,l=>{let a=new u.y(l),w=!1;this.enabled&&(a.equals(3)||a.equals(10))?(this._onDidClick.fire(l),w=!0):a.equals(9)&&(this._element.blur(),w=!0),w&&m.zB.stop(a,!0)})),this._register((0,m.nm)(this._element,m.tw.MOUSE_OVER,l=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register((0,m.nm)(this._element,m.tw.MOUSE_OUT,l=>{this.updateBackground(!1)})),this.focusTracker=this._register((0,m.go)(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}getContentElements(r){let i=[];for(let c of(0,A.T)(r))if(typeof c=="string"){if(c=c.trim(),c==="")continue;let b=document.createElement("span");b.textContent=c,i.push(b)}else i.push(c);return i}updateBackground(r){let i;i=this.options.secondary?r?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:r?this.options.buttonHoverBackground:this.options.buttonBackground,i&&(this._element.style.backgroundColor=i)}get element(){return this._element}set label(r){var i;if(this._label===r||(0,f.Fr)(this._label)&&(0,f.Fr)(r)&&(0,f.g_)(this._label,r))return;this._element.classList.add("monaco-text-button");let c=this.options.supportShortLabel?this._labelElement:this._element;if((0,f.Fr)(r)){let b=(0,I.ap)(r,{inline:!0});b.dispose();let l=(i=b.element.querySelector("p"))===null||i===void 0?void 0:i.innerHTML;if(l){let a=(0,B.Nw)(l,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});c.innerHTML=a}else(0,m.mc)(c)}else this.options.supportIcons?(0,m.mc)(c,...this.getContentElements(r)):c.textContent=r;typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=(0,I.et)(r)),this._label=r}get label(){return this._label}set enabled(r){r?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}},7488:(ut,Ie,t)=>{"use strict";t.d(Ie,{Z:()=>u});var m=t(5321),B=t(7295);class u{constructor(_,A,x){this.options=A,this.styles=x,this.count=0,this.element=(0,m.R3)(_,(0,m.$)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(_){this.count=_,this.render()}setTitleFormat(_){this.titleFormat=_,this.render()}render(){var _,A;this.element.textContent=(0,B.WU)(this.countFormat,this.count),this.element.title=(0,B.WU)(this.titleFormat,this.count),this.element.style.backgroundColor=(_=this.styles.badgeBackground)!==null&&_!==void 0?_:"",this.element.style.color=(A=this.styles.badgeForeground)!==null&&A!==void 0?A:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}},1364:(ut,Ie,t)=>{"use strict";t.d(Ie,{C:()=>f});var m=t(5321),B=t(8609),u=t(9069),I=t(553),_=t(4741),A=t(4669);class x extends _.Wi{constructor(o,h){super(),this._onDidChangeVisibility=this._register(new A.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,m.R3)(o,(0,m.$)(".monaco-dropdown")),this._label=(0,m.R3)(this._element,(0,m.$)(".dropdown-label"));let r=h.labelRenderer;r||(r=c=>(c.textContent=h.label||"",null));for(let c of[m.tw.CLICK,m.tw.MOUSE_DOWN,I.t.Tap])this._register((0,m.nm)(this.element,c,b=>m.zB.stop(b,!0)));for(let c of[m.tw.MOUSE_DOWN,I.t.Tap])this._register((0,m.nm)(this._label,c,b=>{b instanceof MouseEvent&&(b.detail>1||b.button!==0)||(this.visible?this.hide():this.show())}));this._register((0,m.nm)(this._label,m.tw.KEY_UP,c=>{let b=new u.y(c);(b.equals(3)||b.equals(10))&&(m.zB.stop(c,!0),this.visible?this.hide():this.show())}));let i=r(this._label);i&&this._register(i),this._register(I.o.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class v extends x{constructor(o,h){super(o,h),this._actions=[],this._contextMenuProvider=h.contextMenuProvider,this.actions=h.actions||[],this.actionProvider=h.actionProvider,this.menuClassName=h.menuClassName||"",this.menuAsChild=!!h.menuAsChild}set menuOptions(o){this._menuOptions=o}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(o){this._actions=o}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(o,h)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(o,h):void 0,getKeyBinding:o=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(o):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class f extends B.YH{constructor(o,h,r,i=Object.create(null)){super(null,o,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new A.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=h,this.contextMenuProvider=r,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(o){this.actionItem=o;let h=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:i=>{this.element=(0,m.R3)(i,(0,m.$)("a.action-label"));let c=[];return typeof this.options.classNames=="string"?c=this.options.classNames.split(/\s+/g).filter(b=>!!b):this.options.classNames&&(c=this.options.classNames),c.find(b=>b==="icon")||c.push("codicon"),this.element.classList.add(...c),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:h?this.menuActionsOrProvider:void 0,actionProvider:h?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new v(o,r)),this._register(this.dropdownMenu.onDidChangeVisibility(i=>{var c;(c=this.element)===null||c===void 0||c.setAttribute("aria-expanded",`${i}`),this._onDidChangeVisibility.fire(i)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let i=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return i.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let o=null;return this.action.tooltip?o=this.action.tooltip:this.action.label&&(o=this.action.label),o!=null?o:void 0}setActionContext(o){super.setActionContext(o),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=o:this.dropdownMenu.menuOptions={context:o})}show(){var o;(o=this.dropdownMenu)===null||o===void 0||o.show()}updateEnabled(){var o,h;let r=!this.action.enabled;(o=this.actionItem)===null||o===void 0||o.classList.toggle("disabled",r),(h=this.element)===null||h===void 0||h.classList.toggle("disabled",r)}}},3070:(ut,Ie,t)=>{"use strict";t.d(Ie,{V:()=>f});var m=t(5321),B=t(1307),u=t(7927),I=t(3794),_=t(4669),A=t(3580),x=t(5976);let v=A.NC("defaultLabel","input");class f extends I.${constructor(o,h,r){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=new x.SL,this.additionalToggles=[],this._onDidOptionChange=this._register(new _.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new _.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new _.Q5),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new _.Q5),this._onKeyUp=this._register(new _.Q5),this._onCaseSensitiveKeyDown=this._register(new _.Q5),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new _.Q5),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||v,this.showCommonFindToggles=!!r.showCommonFindToggles;let i=r.appendCaseSensitiveLabel||"",c=r.appendWholeWordsLabel||"",b=r.appendRegexLabel||"",l=r.history||[],a=!!r.flexibleHeight,w=!!r.flexibleWidth,E=r.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new u.pG(this.domNode,h,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:l,showHistoryHint:r.showHistoryHint,flexibleHeight:a,flexibleWidth:w,flexibleMaxHeight:E,inputBoxStyles:r.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new B.eH(Object.assign({appendTitle:b,isChecked:!1},r.toggleStyles))),this._register(this.regex.onChange(L=>{this._onDidOptionChange.fire(L),!L&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(L=>{this._onRegexKeyDown.fire(L)})),this.wholeWords=this._register(new B.Qx(Object.assign({appendTitle:c,isChecked:!1},r.toggleStyles))),this._register(this.wholeWords.onChange(L=>{this._onDidOptionChange.fire(L),!L&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new B.rk(Object.assign({appendTitle:i,isChecked:!1},r.toggleStyles))),this._register(this.caseSensitive.onChange(L=>{this._onDidOptionChange.fire(L),!L&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(L=>{this._onCaseSensitiveKeyDown.fire(L)}));let D=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,L=>{if(L.equals(15)||L.equals(17)||L.equals(9)){let k=D.indexOf(document.activeElement);if(k>=0){let R=-1;L.equals(17)?R=(k+1)%D.length:L.equals(15)&&(R=k===0?D.length-1:k-1),L.equals(9)?(D[k].blur(),this.inputBox.focus()):R>=0&&D[R].focus(),m.zB.stop(L,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(r==null?void 0:r.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),o==null||o.appendChild(this.domNode),this._register(m.nm(this.inputBox.inputElement,"compositionstart",D=>{this.imeSessionInProgress=!0})),this._register(m.nm(this.inputBox.inputElement,"compositionend",D=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,D=>this._onKeyDown.fire(D)),this.onkeyup(this.inputBox.inputElement,D=>this._onKeyUp.fire(D)),this.oninput(this.inputBox.inputElement,D=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,D=>this._onMouseDown.fire(D))}get onDidChange(){return this.inputBox.onDidChange}layout(o){this.inputBox.layout(),this.updateInputBoxPadding(o.collapsedFindWidget)}enable(){var o,h,r;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(o=this.regex)===null||o===void 0||o.enable(),(h=this.wholeWords)===null||h===void 0||h.enable(),(r=this.caseSensitive)===null||r===void 0||r.enable();for(let i of this.additionalToggles)i.enable()}disable(){var o,h,r;this.domNode.classList.add("disabled"),this.inputBox.disable(),(o=this.regex)===null||o===void 0||o.disable(),(h=this.wholeWords)===null||h===void 0||h.disable(),(r=this.caseSensitive)===null||r===void 0||r.disable();for(let i of this.additionalToggles)i.disable()}setFocusInputOnOptionClick(o){this.fixFocusOnOptionClickEnabled=o}setEnabled(o){o?this.enable():this.disable()}setAdditionalToggles(o){for(let h of this.additionalToggles)h.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.dispose(),this.additionalTogglesDisposables=new x.SL;for(let h of o!=null?o:[])this.additionalTogglesDisposables.add(h),this.controls.appendChild(h.domNode),this.additionalTogglesDisposables.add(h.onChange(r=>{this._onDidOptionChange.fire(r),!r&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(h);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(o=!1){var h,r,i,c,b,l;this.inputBox.paddingRight=o?0:((r=(h=this.caseSensitive)===null||h===void 0?void 0:h.width())!==null&&r!==void 0?r:0)+((c=(i=this.wholeWords)===null||i===void 0?void 0:i.width())!==null&&c!==void 0?c:0)+((l=(b=this.regex)===null||b===void 0?void 0:b.width())!==null&&l!==void 0?l:0)+this.additionalToggles.reduce((a,w)=>a+w.width(),0)}getValue(){return this.inputBox.value}setValue(o){this.inputBox.value!==o&&(this.inputBox.value=o)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var o,h;return(h=(o=this.caseSensitive)===null||o===void 0?void 0:o.checked)!==null&&h!==void 0&&h}setCaseSensitive(o){this.caseSensitive&&(this.caseSensitive.checked=o)}getWholeWords(){var o,h;return(h=(o=this.wholeWords)===null||o===void 0?void 0:o.checked)!==null&&h!==void 0&&h}setWholeWords(o){this.wholeWords&&(this.wholeWords.checked=o)}getRegex(){var o,h;return(h=(o=this.regex)===null||o===void 0?void 0:o.checked)!==null&&h!==void 0&&h}setRegex(o){this.regex&&(this.regex.checked=o,this.validate())}focusOnCaseSensitive(){var o;(o=this.caseSensitive)===null||o===void 0||o.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(o){this.inputBox.showMessage(o)}clearMessage(){this.inputBox.hideMessage()}}},1307:(ut,Ie,t)=>{"use strict";t.d(Ie,{Qx:()=>v,eH:()=>f,rk:()=>x});var m=t(2900),B=t(3046),u=t(3580);let I=u.NC("caseDescription","Match Case"),_=u.NC("wordsDescription","Match Whole Word"),A=u.NC("regexDescription","Use Regular Expression");class x extends m.Z{constructor(o){super({icon:B.l.caseSensitive,title:I+o.appendTitle,isChecked:o.isChecked,inputActiveOptionBorder:o.inputActiveOptionBorder,inputActiveOptionForeground:o.inputActiveOptionForeground,inputActiveOptionBackground:o.inputActiveOptionBackground})}}class v extends m.Z{constructor(o){super({icon:B.l.wholeWord,title:_+o.appendTitle,isChecked:o.isChecked,inputActiveOptionBorder:o.inputActiveOptionBorder,inputActiveOptionForeground:o.inputActiveOptionForeground,inputActiveOptionBackground:o.inputActiveOptionBackground})}}class f extends m.Z{constructor(o){super({icon:B.l.regex,title:A+o.appendTitle,isChecked:o.isChecked,inputActiveOptionBorder:o.inputActiveOptionBorder,inputActiveOptionForeground:o.inputActiveOptionForeground,inputActiveOptionBackground:o.inputActiveOptionBackground})}}},4650:(ut,Ie,t)=>{"use strict";t.d(Ie,{q:()=>I});var m=t(5321),B=t(6811),u=t(6248);class I{constructor(A,x){var v;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(v=x==null?void 0:x.supportIcons)!==null&&v!==void 0&&v,this.domNode=m.R3(A,m.$("span.monaco-highlighted-label"))}get element(){return this.domNode}set(A,x=[],v="",f){A||(A=""),f&&(A=I.escapeNewLines(A,x)),this.didEverRender&&this.text===A&&this.title===v&&u.fS(this.highlights,x)||(this.text=A,this.title=v,this.highlights=x,this.render())}render(){let A=[],x=0;for(let v of this.highlights){if(v.end===v.start)continue;if(x<v.start){let o=this.text.substring(x,v.start);this.supportIcons?A.push(...(0,B.T)(o)):A.push(o),x=v.start}let f=this.text.substring(x,v.end),d=m.$("span.highlight",void 0,...this.supportIcons?(0,B.T)(f):[f]);v.extraClasses&&d.classList.add(...v.extraClasses),A.push(d),x=v.end}if(x<this.text.length){let v=this.text.substring(x);this.supportIcons?A.push(...(0,B.T)(v)):A.push(v)}m.mc(this.domNode,...A),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(A,x){let v=0,f=0;return A.replace(/\r\n|\r|\n/g,(d,o)=>{f=d===`\r
`?-1:0,o+=v;for(let h of x)h.end<=o||(h.start>=o&&(h.start+=f),h.end>=o&&(h.end+=f));return v+=f,"\u23CE"})}}},986:(ut,Ie,t)=>{"use strict";t.d(Ie,{S:()=>x,c:()=>A});var m=t(5321),B=t(9069),u=t(9802),I=t(5976);let _=m.$;class A extends I.JT{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new u.s$(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class x extends I.JT{static render(f,d,o){return new x(f,d,o)}constructor(f,d,o){super(),this.actionContainer=m.R3(f,_("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=m.R3(this.actionContainer,_("a.action")),this.action.setAttribute("role","button"),d.iconClass&&m.R3(this.action,_(`span.icon.${d.iconClass}`)),m.R3(this.action,_("span")).textContent=o?`${d.label} (${o})`:d.label,this._register(m.nm(this.actionContainer,m.tw.CLICK,h=>{h.stopPropagation(),h.preventDefault(),d.run(this.actionContainer)})),this._register(m.nm(this.actionContainer,m.tw.KEY_DOWN,h=>{let r=new B.y(h);(r.equals(3)||r.equals(10))&&(h.stopPropagation(),h.preventDefault(),d.run(this.actionContainer))})),this.setEnabled(!0)}setEnabled(f){f?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}},9834:(ut,Ie,t)=>{"use strict";t.d(Ie,{g:()=>v});var m=t(5321),B=t(4650),u=t(1433),I=t(5976),_=t(6248),A=t(1134);class x{constructor(h){this._element=h}get element(){return this._element}set textContent(h){this.disposed||h===this._textContent||(this._textContent=h,this._element.textContent=h)}set className(h){this.disposed||h===this._className||(this._className=h,this._element.className=h)}set empty(h){this.disposed||h===this._empty||(this._empty=h,this._element.style.marginLeft=h?"0":"")}dispose(){this.disposed=!0}}class v extends I.JT{constructor(h,r){super(),this.customHovers=new Map,this.creationOptions=r,this.domNode=this._register(new x(m.R3(h,m.$(".monaco-icon-label")))),this.labelContainer=m.R3(this.domNode.element,m.$(".monaco-icon-label-container"));let i=m.R3(this.labelContainer,m.$("span.monaco-icon-name-container"));r!=null&&r.supportHighlights||r!=null&&r.supportIcons?this.nameNode=new d(i,!!r.supportIcons):this.nameNode=new f(i),this.hoverDelegate=r==null?void 0:r.hoverDelegate}get element(){return this.domNode.element}setLabel(h,r,i){let c=["monaco-icon-label"],b=["monaco-icon-label-container"];if(i&&(i.extraClasses&&c.push(...i.extraClasses),i.italic&&c.push("italic"),i.strikethrough&&c.push("strikethrough"),i.disabledCommand&&b.push("disabled")),this.domNode.className=c.join(" "),this.labelContainer.className=b.join(" "),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(h,i),r||this.descriptionNode){let l=this.getOrCreateDescriptionNode();l instanceof B.q?(l.set(r||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=r&&(i!=null&&i.labelEscapeNewLines)?B.q.escapeNewLines(r,[]):r||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!r)}}setupHover(h,r){let i=this.customHovers.get(h);if(i&&(i.dispose(),this.customHovers.delete(h)),r)if(this.hoverDelegate){let c=(0,u.g)(this.hoverDelegate,h,r);c&&this.customHovers.set(h,c)}else(0,u.O)(h,r);else h.removeAttribute("title")}dispose(){super.dispose();for(let h of this.customHovers.values())h.dispose();this.customHovers.clear()}getOrCreateDescriptionNode(){var h;if(!this.descriptionNode){let r=this._register(new x(m.R3(this.labelContainer,m.$("span.monaco-icon-description-container"))));!((h=this.creationOptions)===null||h===void 0)&&h.supportDescriptionHighlights?this.descriptionNode=new B.q(m.R3(r.element,m.$("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new x(m.R3(r.element,m.$("span.label-description"))))}return this.descriptionNode}}class f{constructor(h){this.container=h,this.label=void 0,this.singleLabel=void 0}setLabel(h,r){if(this.label!==h||!(0,_.fS)(this.options,r))if(this.label=h,this.options=r,typeof h=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=m.R3(this.container,m.$("a.label-name",{id:r==null?void 0:r.domId}))),this.singleLabel.textContent=h;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<h.length;i++){let c=h[i],b=(r==null?void 0:r.domId)&&`${r==null?void 0:r.domId}_${i}`;m.R3(this.container,m.$("a.label-name",{id:b,"data-icon-label-count":h.length,"data-icon-label-index":i,role:"treeitem"},c)),i<h.length-1&&m.R3(this.container,m.$("span.label-separator",void 0,(r==null?void 0:r.separator)||"/"))}}}}class d{constructor(h,r){this.container=h,this.supportIcons=r,this.label=void 0,this.singleLabel=void 0}setLabel(h,r){if(this.label!==h||!(0,_.fS)(this.options,r))if(this.label=h,this.options=r,typeof h=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new B.q(m.R3(this.container,m.$("a.label-name",{id:r==null?void 0:r.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(h,r==null?void 0:r.matches,void 0,r==null?void 0:r.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;let i=(r==null?void 0:r.separator)||"/",c=function(b,l,a){if(!a)return;let w=0;return b.map(E=>{let D={start:w,end:w+E.length},L=a.map(k=>A.e.intersect(D,k)).filter(k=>!A.e.isEmpty(k)).map(({start:k,end:R})=>({start:k-w,end:R-w}));return w=D.end+l.length,L})}(h,i,r==null?void 0:r.matches);for(let b=0;b<h.length;b++){let l=h[b],a=c?c[b]:void 0,w=(r==null?void 0:r.domId)&&`${r==null?void 0:r.domId}_${b}`,E=m.$("a.label-name",{id:w,"data-icon-label-count":h.length,"data-icon-label-index":b,role:"treeitem"});new B.q(m.R3(this.container,E),{supportIcons:this.supportIcons}).set(l,a,void 0,r==null?void 0:r.labelEscapeNewLines),b<h.length-1&&m.R3(E,m.$("span.label-separator",void 0,i))}}}}},1433:(ut,Ie,t)=>{"use strict";t.d(Ie,{O:()=>d,g:()=>h});var m=t(5321),B=t(5393),u=t(1050),I=t(9365),_=t(1212),A=t(5976),x=t(8401),v=t(3580),f=function(r,i,c,b){return new(c||(c=Promise))(function(l,a){function w(L){try{D(b.next(L))}catch(k){a(k)}}function E(L){try{D(b.throw(L))}catch(k){a(k)}}function D(L){var k;L.done?l(L.value):(k=L.value,k instanceof c?k:new c(function(R){R(k)})).then(w,E)}D((b=b.apply(r,i||[])).next())})};function d(r,i){(0,x.HD)(i)?r.title=(0,_.x$)(i):i!=null&&i.markdownNotSupportedFallback?r.title=i.markdownNotSupportedFallback:r.removeAttribute("title")}class o{constructor(i,c,b){this.hoverDelegate=i,this.target=c,this.fadeInAnimation=b}update(i,c,b){var l;return f(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let a;if(i===void 0||(0,x.HD)(i)||i instanceof HTMLElement)a=i;else if((0,x.mf)(i.markdown)){this._hoverWidget||this.show((0,v.NC)("iconLabel.loading","Loading..."),c),this._cancellationTokenSource=new u.A;let w=this._cancellationTokenSource.token;if(a=yield i.markdown(w),a===void 0&&(a=i.markdownNotSupportedFallback),this.isDisposed||w.isCancellationRequested)return}else a=(l=i.markdown)!==null&&l!==void 0?l:i.markdownNotSupportedFallback;this.show(a,c,b)})}show(i,c,b){let l=this._hoverWidget;if(this.hasContent(i)){let a=Object.assign({content:i,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!l},b);this._hoverWidget=this.hoverDelegate.showHover(a,c)}l==null||l.dispose()}hasContent(i){return!(!i||(0,I.Fr)(i)&&!i.value)}get isDisposed(){var i;return(i=this._hoverWidget)===null||i===void 0?void 0:i.isDisposed}dispose(){var i,c;(i=this._hoverWidget)===null||i===void 0||i.dispose(),(c=this._cancellationTokenSource)===null||c===void 0||c.dispose(!0),this._cancellationTokenSource=void 0}}function h(r,i,c,b){let l,a,w=(L,k)=>{var R;let O=a!==void 0;L&&(a==null||a.dispose(),a=void 0),k&&(l==null||l.dispose(),l=void 0),O&&((R=r.onDidHideHover)===null||R===void 0||R.call(r))},E=(L,k,R)=>new B._F(()=>f(this,void 0,void 0,function*(){a&&!a.isDisposed||(a=new o(r,R||i,L>0),yield a.update(c,k,b))}),L),D=m.nm(i,m.tw.MOUSE_OVER,()=>{if(l)return;let L=new A.SL;L.add(m.nm(i,m.tw.MOUSE_LEAVE,R=>w(!1,R.fromElement===i),!0)),L.add(m.nm(i,m.tw.MOUSE_DOWN,()=>w(!0,!0),!0));let k={targetElements:[i],dispose:()=>{}};if(r.placement===void 0||r.placement==="mouse"){let R=O=>{k.x=O.x+10,O.target instanceof HTMLElement&&O.target.classList.contains("action-label")&&w(!0,!0)};L.add(m.nm(i,m.tw.MOUSE_MOVE,R,!0))}L.add(E(r.delay,!1,k)),l=L},!0);return{show:L=>{w(!1,!0),E(0,L)},hide:()=>{w(!0,!0)},update:(L,k)=>f(this,void 0,void 0,function*(){c=L,yield a==null?void 0:a.update(c,void 0,k)}),dispose:()=>{D.dispose(),w(!0,!0)}}}},6811:(ut,Ie,t)=>{"use strict";t.d(Ie,{T:()=>I});var m=t(5321),B=t(5670);let u=new RegExp(`(\\\\)?\\$\\((${B.k.iconNameExpression}(?:${B.k.iconModifierExpression})?)\\)`,"g");function I(A){let x=new Array,v,f=0,d=0;for(;(v=u.exec(A))!==null;){d=v.index||0,f<d&&x.push(A.substring(f,d)),f=(v.index||0)+v[0].length;let[,o,h]=v;x.push(o?`$(${h})`:_({id:h}))}return f<A.length&&x.push(A.substring(f)),x}function _(A){let x=m.$("span");return x.classList.add(...B.k.asClassNameArray(A)),x}},7927:(ut,Ie,t)=>{"use strict";t.d(Ie,{pG:()=>b,g4:()=>i});var m=t(5321),B=t(4850),u=t(8764),I=t(317),_=t(5152),A=t(9802),x=t(3794),v=t(4669);class f{constructor(a,w=0,E=a.length,D=w-1){this.items=a,this.start=w,this.end=E,this.index=D}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class d{constructor(a=[],w=10){this._initialize(a),this._limit=w,this._onChange()}getHistory(){return this._elements}add(a){this._history.delete(a),this._history.add(a),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(a){return this._history.has(a)}_onChange(){this._reduceToLimit();let a=this._elements;this._navigator=new f(a,0,a.length,a.length)}_reduceToLimit(){let a=this._elements;a.length>this._limit&&this._initialize(a.slice(a.length-this._limit))}_currentPosition(){let a=this._navigator.current();return a?this._elements.indexOf(a):-1}_initialize(a){this._history=new Set;for(let w of a)this._history.add(w)}get _elements(){let a=[];return this._history.forEach(w=>a.push(w)),a}}var o=t(6248),h=t(3580);let r=m.$,i={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};class c extends x.${constructor(a,w,E){var D;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new v.Q5),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new v.Q5),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=w,this.options=E,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(D=this.options.tooltip)!==null&&D!==void 0?D:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=m.R3(a,r(".monaco-inputbox.idle"));let L=this.options.flexibleHeight?"textarea":"input",k=m.R3(this.element,r(".ibwrapper"));if(this.input=m.R3(k,r(L+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=m.R3(k,r("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new A.NB(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),m.R3(a,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll($=>this.input.scrollTop=$.scrollTop));let R=this._register(new B.Y(document,"selectionchange")),O=v.ju.filter(R.event,()=>{let $=document.getSelection();return($==null?void 0:$.anchorNode)===k});this._register(O(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new I.o(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(a){this.placeholder=a,this.input.setAttribute("placeholder",a)}setTooltip(a){this.tooltip=a,this.input.title=a}get inputElement(){return this.input}get value(){return this.input.value}set value(a){this.input.value!==a&&(this.input.value=a,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:m.wn(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(a=null){this.input.select(),a&&(this.input.setSelectionRange(a.start,a.end),a.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(a){this.input.style.width=`calc(100% - ${a}px)`,this.mirror&&(this.mirror.style.paddingRight=a+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;let a=this.cachedContentHeight,w=this.cachedHeight,E=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:a,height:w}),this.scrollableElement.setScrollPosition({scrollTop:E})}showMessage(a,w){if(this.state==="open"&&(0,o.fS)(this.message,a))return;this.message=a,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(a.type));let E=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${m.XT(E.border,"transparent")}`,this.message.content&&(this.hasFocus()||w)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let a=null;return this.validation&&(a=this.validation(this.value),a?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(a)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),a==null?void 0:a.type}stylesForType(a){let w=this.options.inputBoxStyles;switch(a){case 1:return{border:w.inputValidationInfoBorder,background:w.inputValidationInfoBackground,foreground:w.inputValidationInfoForeground};case 2:return{border:w.inputValidationWarningBorder,background:w.inputValidationWarningBackground,foreground:w.inputValidationWarningForeground};default:return{border:w.inputValidationErrorBorder,background:w.inputValidationErrorBackground,foreground:w.inputValidationErrorForeground}}}classForType(a){switch(a){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let a,w=()=>a.style.width=m.w(this.element)+"px",E;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:D=>{var L,k;if(!this.message)return null;a=m.R3(D,r(".monaco-inputbox-container")),w();let R={inline:!0,className:"monaco-inputbox-message"},O=this.message.formatContent?(0,u.BO)(this.message.content,R):(0,u.IY)(this.message.content,R);O.classList.add(this.classForType(this.message.type));let $=this.stylesForType(this.message.type);return O.style.backgroundColor=(L=$.background)!==null&&L!==void 0?L:"",O.style.color=(k=$.foreground)!==null&&k!==void 0?k:"",O.style.border=$.border?`1px solid ${$.border}`:"",m.R3(a,O),null},onHide:()=>{this.state="closed"},layout:w}),E=this.message.type===3?h.NC("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?h.NC("alertWarningMessage","Warning: {0}",this.message.content):h.NC("alertInfoMessage","Info: {0}",this.message.content),_.Z9(E),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let a=this.value,w=a.charCodeAt(a.length-1)===10?" ":"";(a+w).replace(/\u000c/g,"")?this.mirror.textContent=a+w:this.mirror.innerText="\xA0",this.layout()}applyStyles(){var a,w,E;let D=this.options.inputBoxStyles,L=(a=D.inputBackground)!==null&&a!==void 0?a:"",k=(w=D.inputForeground)!==null&&w!==void 0?w:"",R=(E=D.inputBorder)!==null&&E!==void 0?E:"";this.element.style.backgroundColor=L,this.element.style.color=k,this.input.style.backgroundColor="inherit",this.input.style.color=k,this.element.style.border=`1px solid ${m.XT(R,"transparent")}`}layout(){if(!this.mirror)return;let a=this.cachedContentHeight;this.cachedContentHeight=m.wn(this.mirror),a!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(a){let w=this.inputElement,E=w.selectionStart,D=w.selectionEnd,L=w.value;E!==null&&D!==null&&(this.value=L.substr(0,E)+a+L.substr(D),w.setSelectionRange(E+1,E+1),this.layout())}dispose(){var a;this._hideMessage(),this.message=null,(a=this.actionbar)===null||a===void 0||a.dispose(),super.dispose()}}class b extends c{constructor(a,w,E){let D=h.NC({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),L=` or \u21C5 ${D}`,k=` (\u21C5 ${D})`;super(a,w,E),this._onDidFocus=this._register(new v.Q5),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new v.Q5),this.onDidBlur=this._onDidBlur.event,this.history=new d(E.history,100);let R=()=>{if(E.showHistoryHint&&E.showHistoryHint()&&!this.placeholder.endsWith(L)&&!this.placeholder.endsWith(k)&&this.history.getHistory().length){let O=this.placeholder.endsWith(")")?L:k,$=this.placeholder+O;E.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=$:this.setPlaceHolder($)}};this.observer=new MutationObserver((O,$)=>{O.forEach(N=>{N.target.textContent||R()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>R()),this.onblur(this.input,()=>{let O=$=>{if(this.placeholder.endsWith($)){let N=this.placeholder.slice(0,this.placeholder.length-$.length);return E.showPlaceholderOnFocus?this.placeholder=N:this.setPlaceHolder(N),!0}return!1};O(k)||O(L)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(a){this.value&&(a||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let a=this.getNextValue();a&&(a=a===this.value?this.getNextValue():a),this.value=a!=null?a:"",_.i7(this.value?this.value:h.NC("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let a=this.getPreviousValue();a&&(a=a===this.value?this.getPreviousValue():a),a&&(this.value=a,_.i7(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let a=this.history.current();return a||(a=this.history.last(),this.history.next()),a}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}},5496:(ut,Ie,t)=>{"use strict";t.d(Ie,{F:()=>A,e:()=>x});var m=t(5321),B=t(8030),u=t(6248),I=t(3580);let _=m.$,A={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class x{constructor(f,d,o){this.os=d,this.keyElements=new Set,this.options=o||Object.create(null);let h=this.options.keybindingLabelForeground;this.domNode=m.R3(f,_(".monaco-keybinding")),h&&(this.domNode.style.color=h),this.didEverRender=!1,f.appendChild(this.domNode)}get element(){return this.domNode}set(f,d){this.didEverRender&&this.keybinding===f&&x.areSame(this.matches,d)||(this.keybinding=f,this.matches=d,this.render())}render(){var f;if(this.clear(),this.keybinding){let d=this.keybinding.getChords();d[0]&&this.renderChord(this.domNode,d[0],this.matches?this.matches.firstPart:null);for(let h=1;h<d.length;h++)m.R3(this.domNode,_("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,d[h],this.matches?this.matches.chordPart:null);let o=(f=this.options.disableTitle)!==null&&f!==void 0&&f?void 0:this.keybinding.getAriaLabel()||void 0;o!==void 0?this.domNode.title=o:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){m.PO(this.domNode),this.keyElements.clear()}renderChord(f,d,o){let h=B.xo.modifierLabels[this.os];d.ctrlKey&&this.renderKey(f,h.ctrlKey,!!(o!=null&&o.ctrlKey),h.separator),d.shiftKey&&this.renderKey(f,h.shiftKey,!!(o!=null&&o.shiftKey),h.separator),d.altKey&&this.renderKey(f,h.altKey,!!(o!=null&&o.altKey),h.separator),d.metaKey&&this.renderKey(f,h.metaKey,!!(o!=null&&o.metaKey),h.separator);let r=d.keyLabel;r&&this.renderKey(f,r,!!(o!=null&&o.keyCode),"")}renderKey(f,d,o,h){m.R3(f,this.createKeyElement(d,o?".highlight":"")),h&&m.R3(f,_("span.monaco-keybinding-key-separator",void 0,h))}renderUnbound(f){m.R3(f,this.createKeyElement((0,I.NC)("unbound","Unbound")))}createKeyElement(f,d=""){let o=_("span.monaco-keybinding-key"+d,void 0,f);return this.keyElements.add(o),this.options.keybindingLabelBackground&&(o.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(o.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(o.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(o.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),o}static areSame(f,d){return f===d||!f&&!d||!!f&&!!d&&(0,u.fS)(f.firstPart,d.firstPart)&&(0,u.fS)(f.chordPart,d.chordPart)}}},5707:(ut,Ie,t)=>{"use strict";t.d(Ie,{kX:()=>D,Bv:()=>O});var m=t(3547),B=t(5321),u=t(4850),I=t(553),_=t(9802),A=t(9488),x=t(5393),v=t(9898),f=t(4669),d=t(5976),o=t(1134),h=t(6633);function r($,N){let T=[];for(let C of N){if($.start>=C.range.end)continue;if($.end<C.range.start)break;let W=o.e.intersect($,C.range);o.e.isEmpty(W)||T.push({range:W,size:C.size})}return T}function i({start:$,end:N},T){return{start:$+T,end:N+T}}class c{constructor(){this.groups=[],this._size=0}splice(N,T,C=[]){let W=C.length-T,K=r({start:0,end:N},this.groups),j=r({start:N+T,end:Number.POSITIVE_INFINITY},this.groups).map(H=>({range:i(H.range,W),size:H.size})),F=C.map((H,z)=>({range:{start:N+z,end:N+z+1},size:H.size}));this.groups=function(...H){return function(z){let J=[],oe=null;for(let fe of z){let q=fe.range.start,p=fe.range.end,re=fe.size;oe&&re===oe.size?oe.range.end=p:(oe={range:{start:q,end:p},size:re},J.push(oe))}return J}(H.reduce((z,J)=>z.concat(J),[]))}(K,F,j),this._size=this.groups.reduce((H,z)=>H+z.size*(z.range.end-z.range.start),0)}get count(){let N=this.groups.length;return N?this.groups[N-1].range.end:0}get size(){return this._size}indexAt(N){if(N<0)return-1;let T=0,C=0;for(let W of this.groups){let K=W.range.end-W.range.start,j=C+K*W.size;if(N<j)return T+Math.floor((N-C)/W.size);T+=K,C=j}return T}indexAfter(N){return Math.min(this.indexAt(N)+1,this.count)}positionAt(N){if(N<0)return-1;let T=0,C=0;for(let W of this.groups){let K=W.range.end-W.range.start,j=C+K;if(N<j)return T+(N-C)*W.size;T+=K*W.size,C=j}return-1}}class b{constructor(N){this.renderers=N,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(N){let T=this.getTemplateCache(N).pop(),C=!1;if(T)C=this.transactionNodesPendingRemoval.has(T.domNode),C&&this.transactionNodesPendingRemoval.delete(T.domNode);else{let W=(0,B.$)(".monaco-list-row");T={domNode:W,templateId:N,templateData:this.getRenderer(N).renderTemplate(W)}}return{row:T,isReusingConnectedDomNode:C}}release(N){N&&this.releaseRow(N)}transact(N){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{N()}finally{for(let T of this.transactionNodesPendingRemoval)this.doRemoveNode(T);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(N){let{domNode:T,templateId:C}=N;T&&(this.inTransaction?this.transactionNodesPendingRemoval.add(T):this.doRemoveNode(T)),this.getTemplateCache(C).push(N)}doRemoveNode(N){N.classList.remove("scrolling"),function(T){var C;try{(C=T.parentElement)===null||C===void 0||C.removeChild(T)}catch(W){}}(N)}getTemplateCache(N){let T=this.cache.get(N);return T||(T=[],this.cache.set(N,T)),T}dispose(){this.cache.forEach((N,T)=>{for(let C of N)this.getRenderer(T).disposeTemplate(C.templateData),C.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(N){let T=this.renderers.get(N);if(!T)throw new Error(`No renderer found for ${N}`);return T}}var l=t(7301),a=function($,N,T,C){var W,K=arguments.length,j=K<3?N:C===null?C=Object.getOwnPropertyDescriptor(N,T):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate($,N,T,C);else for(var F=$.length-1;F>=0;F--)(W=$[F])&&(j=(K<3?W(j):K>3?W(N,T,j):W(N,T))||j);return K>3&&j&&Object.defineProperty(N,T,j),j};let w={CurrentDragAndDropData:void 0},E={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:$=>[$],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class D{constructor(N){this.elements=N}update(){}getData(){return this.elements}}class L{constructor(N){this.elements=N}update(){}getData(){return this.elements}}class k{constructor(){this.types=[],this.files=[]}update(N){if(N.types&&this.types.splice(0,this.types.length,...N.types),N.files){this.files.splice(0,this.files.length);for(let T=0;T<N.files.length;T++){let C=N.files.item(T);C&&(C.size||C.type)&&this.files.push(C)}}}getData(){return{types:this.types,files:this.files}}}class R{constructor(N){N!=null&&N.getSetSize?this.getSetSize=N.getSetSize.bind(N):this.getSetSize=(T,C,W)=>W,N!=null&&N.getPosInSet?this.getPosInSet=N.getPosInSet.bind(N):this.getPosInSet=(T,C)=>C+1,N!=null&&N.getRole?this.getRole=N.getRole.bind(N):this.getRole=T=>"listitem",N!=null&&N.isChecked?this.isChecked=N.isChecked.bind(N):this.isChecked=T=>{}}}class O{get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(N){if(N!==this._horizontalScrolling){if(N&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=N,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let T of this.items)this.measureItemWidth(T);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,B.FK)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(N,T,C,W=E){var K,j,F,H,z,J,oe,fe,q,p,re,ne;if(this.virtualDelegate=T,this.domId="list_id_"+ ++O.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new x.vp(50),this.splicing=!1,this.dragOverAnimationStopDisposable=d.JT.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=d.JT.None,this.onDragLeaveTimeout=d.JT.None,this.disposables=new d.SL,this._onDidChangeContentHeight=new f.Q5,this._horizontalScrolling=!1,W.horizontalScrolling&&W.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new c;for(let ie of C)this.renderers.set(ie.templateId,ie);this.cache=this.disposables.add(new b(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof W.mouseSupport!="boolean"||W.mouseSupport),this._horizontalScrolling=(K=W.horizontalScrolling)!==null&&K!==void 0?K:E.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=W.additionalScrollHeight===void 0?0:W.additionalScrollHeight,this.accessibilityProvider=new R(W.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((j=W.transformOptimization)!==null&&j!==void 0?j:E.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(I.o.addTarget(this.rowsContainer)),this.scrollable=new h.Rm({forceIntegerValues:!0,smoothScrollDuration:(F=W.smoothScrolling)!==null&&F!==void 0&&F?125:0,scheduleAtNextAnimationFrame:ie=>(0,B.jL)(ie)}),this.scrollableElement=this.disposables.add(new _.$Z(this.rowsContainer,{alwaysConsumeMouseWheel:(H=W.alwaysConsumeMouseWheel)!==null&&H!==void 0?H:E.alwaysConsumeMouseWheel,horizontal:1,vertical:(z=W.verticalScrollMode)!==null&&z!==void 0?z:E.verticalScrollMode,useShadows:(J=W.useShadows)!==null&&J!==void 0?J:E.useShadows,mouseWheelScrollSensitivity:W.mouseWheelScrollSensitivity,fastScrollSensitivity:W.fastScrollSensitivity,scrollByPage:W.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),N.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,B.nm)(this.rowsContainer,I.t.Change,ie=>this.onTouchChange(ie))),this.disposables.add((0,B.nm)(this.scrollableElement.getDomNode(),"scroll",ie=>ie.target.scrollTop=0)),this.disposables.add((0,B.nm)(this.domNode,"dragover",ie=>this.onDragOver(this.toDragEvent(ie)))),this.disposables.add((0,B.nm)(this.domNode,"drop",ie=>this.onDrop(this.toDragEvent(ie)))),this.disposables.add((0,B.nm)(this.domNode,"dragleave",ie=>this.onDragLeave(this.toDragEvent(ie)))),this.disposables.add((0,B.nm)(this.domNode,"dragend",ie=>this.onDragEnd(ie))),this.setRowLineHeight=(oe=W.setRowLineHeight)!==null&&oe!==void 0?oe:E.setRowLineHeight,this.setRowHeight=(fe=W.setRowHeight)!==null&&fe!==void 0?fe:E.setRowHeight,this.supportDynamicHeights=(q=W.supportDynamicHeights)!==null&&q!==void 0?q:E.supportDynamicHeights,this.dnd=(p=W.dnd)!==null&&p!==void 0?p:E.dnd,this.layout((re=W.initialSize)===null||re===void 0?void 0:re.height,(ne=W.initialSize)===null||ne===void 0?void 0:ne.width)}updateOptions(N){let T;N.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=N.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),N.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(N.smoothScrolling?125:0),N.horizontalScrolling!==void 0&&(this.horizontalScrolling=N.horizontalScrolling),N.scrollByPage!==void 0&&(T=Object.assign(Object.assign({},T!=null?T:{}),{scrollByPage:N.scrollByPage})),N.mouseWheelScrollSensitivity!==void 0&&(T=Object.assign(Object.assign({},T!=null?T:{}),{mouseWheelScrollSensitivity:N.mouseWheelScrollSensitivity})),N.fastScrollSensitivity!==void 0&&(T=Object.assign(Object.assign({},T!=null?T:{}),{fastScrollSensitivity:N.fastScrollSensitivity})),T&&this.scrollableElement.updateOptions(T)}splice(N,T,C=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(N,T,C)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(N,T,C=[]){let W=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),K={start:N,end:N+T},j=o.e.intersect(W,K),F=new Map;for(let de=j.end-1;de>=j.start;de--){let U=this.items[de];if(U.dragStartDisposable.dispose(),U.checkedDisposable.dispose(),U.row){let ue=F.get(U.templateId);ue||(ue=[],F.set(U.templateId,ue));let ve=this.renderers.get(U.templateId);ve&&ve.disposeElement&&ve.disposeElement(U.element,de,U.row.templateData,U.size),ue.push(U.row)}U.row=null}let H={start:N+T,end:this.items.length},z=o.e.intersect(H,W),J=o.e.relativeComplement(H,W),oe=C.map(de=>({id:String(this.itemId++),element:de,templateId:this.virtualDelegate.getTemplateId(de),size:this.virtualDelegate.getHeight(de),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(de),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:d.JT.None,checkedDisposable:d.JT.None})),fe;N===0&&T>=this.items.length?(this.rangeMap=new c,this.rangeMap.splice(0,0,oe),fe=this.items,this.items=oe):(this.rangeMap.splice(N,T,oe),fe=this.items.splice(N,T,...oe));let q=C.length-T,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),re=i(z,q),ne=o.e.intersect(p,re);for(let de=ne.start;de<ne.end;de++)this.updateItemInDOM(this.items[de],de);let ie=o.e.relativeComplement(re,p);for(let de of ie)for(let U=de.start;U<de.end;U++)this.removeItemFromDOM(U);let se=J.map(de=>i(de,q)),ce=[{start:N,end:N+C.length},...se].map(de=>o.e.intersect(p,de)),be=this.getNextToLastElement(ce);for(let de of ce)for(let U=de.start;U<de.end;U++){let ue=this.items[U],ve=F.get(ue.templateId),X=ve==null?void 0:ve.pop();this.insertItemInDOM(U,be,X)}for(let de of F.values())for(let U of de)this.cache.release(U);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),fe.map(de=>de.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,B.jL)(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth()):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let N=0;for(let T of this.items)T.width!==void 0&&(N=Math.max(N,T.width));this.scrollWidth=N,this.scrollableElement.setScrollDimensions({scrollWidth:N===0?0:N+10})}rerender(){if(this.supportDynamicHeights){for(let N of this.items)N.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){let N=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),T=this.rangeMap.positionAt(N.start),C=this.rangeMap.positionAt(N.start+1);return C!==-1&&(C-T)/2+T<this.scrollTop?N.start+1:N.start}element(N){return this.items[N].element}domElement(N){let T=this.items[N].row;return T&&T.domNode}elementHeight(N){return this.items[N].size}elementTop(N){return this.rangeMap.positionAt(N)}indexAt(N){return this.rangeMap.indexAt(N)}indexAfter(N){return this.rangeMap.indexAfter(N)}layout(N,T){let C={height:typeof N=="number"?N:(0,B.If)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,C.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(C),T!==void 0&&(this.renderWidth=T,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof T=="number"?T:(0,B.FK)(this.domNode)})}render(N,T,C,W,K,j=!1){let F=this.getRenderRange(T,C),H=o.e.relativeComplement(F,N),z=o.e.relativeComplement(N,F),J=this.getNextToLastElement(H);if(j){let oe=o.e.intersect(N,F);for(let fe=oe.start;fe<oe.end;fe++)this.updateItemInDOM(this.items[fe],fe)}this.cache.transact(()=>{for(let oe of z)for(let fe=oe.start;fe<oe.end;fe++)this.removeItemFromDOM(fe);for(let oe of H)for(let fe=oe.start;fe<oe.end;fe++)this.insertItemInDOM(fe,J)}),W!==void 0&&(this.rowsContainer.style.left=`-${W}px`),this.rowsContainer.style.top=`-${T}px`,this.horizontalScrolling&&K!==void 0&&(this.rowsContainer.style.width=`${Math.max(K,this.renderWidth)}px`),this.lastRenderTop=T,this.lastRenderHeight=C}insertItemInDOM(N,T,C){let W=this.items[N],K=!1;if(!W.row)if(C)W.row=C;else{let J=this.cache.alloc(W.templateId);W.row=J.row,K=J.isReusingConnectedDomNode}let j=this.accessibilityProvider.getRole(W.element)||"listitem";W.row.domNode.setAttribute("role",j);let F=this.accessibilityProvider.isChecked(W.element);if(typeof F=="boolean")W.row.domNode.setAttribute("aria-checked",String(!!F));else if(F){let J=oe=>W.row.domNode.setAttribute("aria-checked",String(!!oe));J(F.value),W.checkedDisposable=F.onDidChange(J)}!K&&W.row.domNode.parentElement||(T?this.rowsContainer.insertBefore(W.row.domNode,T):this.rowsContainer.appendChild(W.row.domNode)),this.updateItemInDOM(W,N);let H=this.renderers.get(W.templateId);if(!H)throw new Error(`No renderer found for template id ${W.templateId}`);H==null||H.renderElement(W.element,N,W.row.templateData,W.size);let z=this.dnd.getDragURI(W.element);W.dragStartDisposable.dispose(),W.row.domNode.draggable=!!z,z&&(W.dragStartDisposable=(0,B.nm)(W.row.domNode,"dragstart",J=>this.onDragStart(W.element,z,J))),this.horizontalScrolling&&(this.measureItemWidth(W),this.eventuallyUpdateScrollWidth())}measureItemWidth(N){if(!N.row||!N.row.domNode)return;N.row.domNode.style.width="fit-content",N.width=(0,B.FK)(N.row.domNode);let T=window.getComputedStyle(N.row.domNode);T.paddingLeft&&(N.width+=parseFloat(T.paddingLeft)),T.paddingRight&&(N.width+=parseFloat(T.paddingRight)),N.row.domNode.style.width=""}updateItemInDOM(N,T){N.row.domNode.style.top=`${this.elementTop(T)}px`,this.setRowHeight&&(N.row.domNode.style.height=`${N.size}px`),this.setRowLineHeight&&(N.row.domNode.style.lineHeight=`${N.size}px`),N.row.domNode.setAttribute("data-index",`${T}`),N.row.domNode.setAttribute("data-last-element",T===this.length-1?"true":"false"),N.row.domNode.setAttribute("data-parity",T%2==0?"even":"odd"),N.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(N.element,T,this.length))),N.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(N.element,T))),N.row.domNode.setAttribute("id",this.getElementDomId(T)),N.row.domNode.classList.toggle("drop-target",N.dropTarget)}removeItemFromDOM(N){let T=this.items[N];if(T.dragStartDisposable.dispose(),T.checkedDisposable.dispose(),T.row){let C=this.renderers.get(T.templateId);C&&C.disposeElement&&C.disposeElement(T.element,N,T.row.templateData,T.size),this.cache.release(T.row),T.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(N,T){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:N,reuseAnimation:T})}get scrollTop(){return this.getScrollTop()}set scrollTop(N){this.setScrollTop(N)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return f.ju.map(this.disposables.add(new u.Y(this.domNode,"click")).event,N=>this.toMouseEvent(N),this.disposables)}get onMouseDblClick(){return f.ju.map(this.disposables.add(new u.Y(this.domNode,"dblclick")).event,N=>this.toMouseEvent(N),this.disposables)}get onMouseMiddleClick(){return f.ju.filter(f.ju.map(this.disposables.add(new u.Y(this.domNode,"auxclick")).event,N=>this.toMouseEvent(N),this.disposables),N=>N.browserEvent.button===1,this.disposables)}get onMouseDown(){return f.ju.map(this.disposables.add(new u.Y(this.domNode,"mousedown")).event,N=>this.toMouseEvent(N),this.disposables)}get onMouseOver(){return f.ju.map(this.disposables.add(new u.Y(this.domNode,"mouseover")).event,N=>this.toMouseEvent(N),this.disposables)}get onMouseOut(){return f.ju.map(this.disposables.add(new u.Y(this.domNode,"mouseout")).event,N=>this.toMouseEvent(N),this.disposables)}get onContextMenu(){return f.ju.any(f.ju.map(this.disposables.add(new u.Y(this.domNode,"contextmenu")).event,N=>this.toMouseEvent(N),this.disposables),f.ju.map(this.disposables.add(new u.Y(this.domNode,I.t.Contextmenu)).event,N=>this.toGestureEvent(N),this.disposables))}get onTouchStart(){return f.ju.map(this.disposables.add(new u.Y(this.domNode,"touchstart")).event,N=>this.toTouchEvent(N),this.disposables)}get onTap(){return f.ju.map(this.disposables.add(new u.Y(this.rowsContainer,I.t.Tap)).event,N=>this.toGestureEvent(N),this.disposables)}toMouseEvent(N){let T=this.getItemIndexFromEventTarget(N.target||null),C=T===void 0?void 0:this.items[T];return{browserEvent:N,index:T,element:C&&C.element}}toTouchEvent(N){let T=this.getItemIndexFromEventTarget(N.target||null),C=T===void 0?void 0:this.items[T];return{browserEvent:N,index:T,element:C&&C.element}}toGestureEvent(N){let T=this.getItemIndexFromEventTarget(N.initialTarget||null),C=T===void 0?void 0:this.items[T];return{browserEvent:N,index:T,element:C&&C.element}}toDragEvent(N){let T=this.getItemIndexFromEventTarget(N.target||null),C=T===void 0?void 0:this.items[T];return{browserEvent:N,index:T,element:C&&C.element}}onScroll(N){try{let T=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(T,N.scrollTop,N.height,N.scrollLeft,N.scrollWidth),this.supportDynamicHeights&&this._rerender(N.scrollTop,N.height,N.inSmoothScrolling)}catch(T){throw console.error("Got bad scroll event:",N),T}}onTouchChange(N){N.preventDefault(),N.stopPropagation(),this.scrollTop-=N.translationY}onDragStart(N,T,C){var W,K;if(!C.dataTransfer)return;let j=this.dnd.getDragElements(N);if(C.dataTransfer.effectAllowed="copyMove",C.dataTransfer.setData(m.g.TEXT,T),C.dataTransfer.setDragImage){let F;this.dnd.getDragLabel&&(F=this.dnd.getDragLabel(j,C)),F===void 0&&(F=String(j.length));let H=(0,B.$)(".monaco-drag-image");H.textContent=F;let z=(J=>{for(;J&&!J.classList.contains("monaco-workbench");)J=J.parentElement;return J||document.body})(this.domNode);z.appendChild(H),C.dataTransfer.setDragImage(H,-10,-10),setTimeout(()=>z.removeChild(H),0)}this.domNode.classList.add("dragging"),this.currentDragData=new D(j),w.CurrentDragAndDropData=new L(j),(K=(W=this.dnd).onDragStart)===null||K===void 0||K.call(W,this.currentDragData,C)}onDragOver(N){var T;if(N.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),w.CurrentDragAndDropData&&w.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(N.browserEvent),!N.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(w.CurrentDragAndDropData)this.currentDragData=w.CurrentDragAndDropData;else{if(!N.browserEvent.dataTransfer.types)return!1;this.currentDragData=new k}let C=this.dnd.onDragOver(this.currentDragData,N.element,N.index,N.browserEvent);if(this.canDrop=typeof C=="boolean"?C:C.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let W;if(N.browserEvent.dataTransfer.dropEffect=typeof C!="boolean"&&C.effect===0?"copy":"move",W=typeof C!="boolean"&&C.feedback?C.feedback:N.index===void 0?[-1]:[N.index],W=(0,A.EB)(W).filter(F=>F>=-1&&F<this.length).sort((F,H)=>F-H),W=W[0]===-1?[-1]:W,K=this.currentDragFeedback,j=W,Array.isArray(K)&&Array.isArray(j)?(0,A.fS)(K,j):K===j)return!0;var K,j;if(this.currentDragFeedback=W,this.currentDragFeedbackDisposable.dispose(),W[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=(0,d.OF)(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(let F of W){let H=this.items[F];H.dropTarget=!0,(T=H.row)===null||T===void 0||T.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=(0,d.OF)(()=>{var F;for(let H of W){let z=this.items[H];z.dropTarget=!1,(F=z.row)===null||F===void 0||F.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(N){var T,C;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,x.Vg)(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((C=(T=this.dnd).onDragLeave)===null||C===void 0||C.call(T,this.currentDragData,N.element,N.index,N.browserEvent))}onDrop(N){if(!this.canDrop)return;let T=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,w.CurrentDragAndDropData=void 0,T&&N.browserEvent.dataTransfer&&(N.browserEvent.preventDefault(),T.update(N.browserEvent.dataTransfer),this.dnd.drop(T,N.element,N.index,N.browserEvent))}onDragEnd(N){var T,C;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,w.CurrentDragAndDropData=void 0,(C=(T=this.dnd).onDragEnd)===null||C===void 0||C.call(T,N)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=d.JT.None}setupDragAndDropScrollTopAnimation(N){if(!this.dragOverAnimationDisposable){let T=(0,B.xQ)(this.domNode).top;this.dragOverAnimationDisposable=(0,B.jt)(this.animateDragAndDropScrollTop.bind(this,T))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,x.Vg)(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=N.pageY}animateDragAndDropScrollTop(N){if(this.dragOverMouseY===void 0)return;let T=this.dragOverMouseY-N,C=this.renderHeight-35;T<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(T-35))):T>C&&(this.scrollTop+=Math.min(14,Math.floor(.3*(T-C))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(N){let T=this.scrollableElement.getDomNode(),C=N;for(;C instanceof HTMLElement&&C!==this.rowsContainer&&T.contains(C);){let W=C.getAttribute("data-index");if(W){let K=Number(W);if(!isNaN(K))return K}C=C.parentElement}}getRenderRange(N,T){return{start:this.rangeMap.indexAt(N),end:this.rangeMap.indexAfter(N+T-1)}}_rerender(N,T,C){let W=this.getRenderRange(N,T),K,j;N===this.elementTop(W.start)?(K=W.start,j=0):W.end-W.start>1&&(K=W.start+1,j=this.elementTop(K)-N);let F=0;for(;;){let H=this.getRenderRange(N,T),z=!1;for(let J=H.start;J<H.end;J++){let oe=this.probeDynamicHeight(J);oe!==0&&this.rangeMap.splice(J,1,[this.items[J]]),F+=oe,z=z||oe!==0}if(!z){F!==0&&this.eventuallyUpdateScrollDimensions();let J=o.e.relativeComplement(W,H);for(let fe of J)for(let q=fe.start;q<fe.end;q++)this.items[q].row&&this.removeItemFromDOM(q);let oe=o.e.relativeComplement(H,W);for(let fe of oe)for(let q=fe.start;q<fe.end;q++){let p=q+1,re=p<this.items.length?this.items[p].row:null,ne=re?re.domNode:null;this.insertItemInDOM(q,ne)}for(let fe=H.start;fe<H.end;fe++)this.items[fe].row&&this.updateItemInDOM(this.items[fe],fe);if(typeof K=="number"){let fe=this.scrollable.getFutureScrollPosition().scrollTop-N,q=this.elementTop(K)-j+fe;this.setScrollTop(q,C)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(N){var T,C,W;let K=this.items[N];if(this.virtualDelegate.getDynamicHeight){let z=this.virtualDelegate.getDynamicHeight(K.element);if(z!==null){let J=K.size;return K.size=z,K.lastDynamicHeightWidth=this.renderWidth,z-J}}if(!K.hasDynamicHeight||K.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(K.element))return 0;let j=K.size;if(K.row)return K.row.domNode.style.height="",K.size=K.row.domNode.offsetHeight,K.lastDynamicHeightWidth=this.renderWidth,K.size-j;let{row:F}=this.cache.alloc(K.templateId);F.domNode.style.height="",this.rowsContainer.appendChild(F.domNode);let H=this.renderers.get(K.templateId);if(!H)throw new l.he("Missing renderer for templateId: "+K.templateId);return H.renderElement(K.element,N,F.templateData,void 0),K.size=F.domNode.offsetHeight,(T=H.disposeElement)===null||T===void 0||T.call(H,K.element,N,F.templateData,void 0),(W=(C=this.virtualDelegate).setDynamicHeight)===null||W===void 0||W.call(C,K.element,K.size),K.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(F.domNode),this.cache.release(F),K.size-j}getNextToLastElement(N){let T=N[N.length-1];if(!T)return null;let C=this.items[T.end];return C&&C.row?C.row.domNode:null}getElementDomId(N){return`${this.domId}_${N}`}dispose(){var N;if(this.items){for(let T of this.items)if(T.row){let C=this.renderers.get(T.row.templateId);C&&((N=C.disposeElement)===null||N===void 0||N.call(C,T.element,-1,T.row.templateData,void 0),C.disposeTemplate(T.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(0,d.B9)(this.disposables)}}O.InstanceCount=0,a([v.H],O.prototype,"onMouseClick",null),a([v.H],O.prototype,"onMouseDblClick",null),a([v.H],O.prototype,"onMouseMiddleClick",null),a([v.H],O.prototype,"onMouseDown",null),a([v.H],O.prototype,"onMouseOver",null),a([v.H],O.prototype,"onMouseOut",null),a([v.H],O.prototype,"onContextMenu",null),a([v.H],O.prototype,"onTouchStart",null),a([v.H],O.prototype,"onTap",null)},3799:(ut,Ie,t)=>{"use strict";t.d(Ie,{wD:()=>fe,aV:()=>be,sx:()=>oe,AA:()=>a,iK:()=>C,cK:()=>N,hD:()=>T,wn:()=>z,Zo:()=>H,uZ:()=>q});var m=t(5321),B=t(4850),u=t(9069),I=t(553),_=t(5152);class A{constructor(U){this.spliceables=U}splice(U,ue,ve){this.spliceables.forEach(X=>X.splice(U,ue,ve))}}var x=t(9488),v=t(5393),f=t(1264),d=t(9898),o=t(4669),h=t(5392),r=t(5976),i=t(9870),c=t(1432),b=t(8401);class l extends Error{constructor(U,ue){super(`ListError [${U}] ${ue}`)}}var a,w,E=t(5707),D=function(de,U,ue,ve){var X,ye=arguments.length,Ce=ye<3?U:ve===null?ve=Object.getOwnPropertyDescriptor(U,ue):ve;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ce=Reflect.decorate(de,U,ue,ve);else for(var Ee=de.length-1;Ee>=0;Ee--)(X=de[Ee])&&(Ce=(ye<3?X(Ce):ye>3?X(U,ue,Ce):X(U,ue))||Ce);return ye>3&&Ce&&Object.defineProperty(U,ue,Ce),Ce},L=function(de,U,ue,ve){return new(ue||(ue=Promise))(function(X,ye){function Ce(Fe){try{Ae(ve.next(Fe))}catch(_e){ye(_e)}}function Ee(Fe){try{Ae(ve.throw(Fe))}catch(_e){ye(_e)}}function Ae(Fe){var _e;Fe.done?X(Fe.value):(_e=Fe.value,_e instanceof ue?_e:new ue(function(te){te(_e)})).then(Ce,Ee)}Ae((ve=ve.apply(de,U||[])).next())})};class k{constructor(U){this.trait=U,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(U){return U}renderElement(U,ue,ve){let X=this.renderedElements.findIndex(ye=>ye.templateData===ve);if(X>=0){let ye=this.renderedElements[X];this.trait.unrender(ve),ye.index=ue}else{let ye={index:ue,templateData:ve};this.renderedElements.push(ye)}this.trait.renderIndex(ue,ve)}splice(U,ue,ve){let X=[];for(let ye of this.renderedElements)ye.index<U?X.push(ye):ye.index>=U+ue&&X.push({index:ye.index+ve-ue,templateData:ye.templateData});this.renderedElements=X}renderIndexes(U){for(let{index:ue,templateData:ve}of this.renderedElements)U.indexOf(ue)>-1&&this.trait.renderIndex(ue,ve)}disposeTemplate(U){let ue=this.renderedElements.findIndex(ve=>ve.templateData===U);ue<0||this.renderedElements.splice(ue,1)}}class R{get name(){return this._trait}get renderer(){return new k(this)}constructor(U){this._trait=U,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new o.Q5,this.onChange=this._onChange.event}splice(U,ue,ve){var X;ue=Math.max(0,Math.min(ue,this.length-U));let ye=ve.length-ue,Ce=U+ue,Ee=[...this.sortedIndexes.filter(Fe=>Fe<U),...ve.map((Fe,_e)=>Fe?_e+U:-1).filter(Fe=>Fe!==-1),...this.sortedIndexes.filter(Fe=>Fe>=Ce).map(Fe=>Fe+ye)],Ae=this.length+ye;if(this.sortedIndexes.length>0&&Ee.length===0&&Ae>0){let Fe=(X=this.sortedIndexes.find(_e=>_e>=U))!==null&&X!==void 0?X:Ae-1;Ee.push(Math.min(Fe,Ae-1))}this.renderer.splice(U,ue,ve.length),this._set(Ee,Ee),this.length=Ae}renderIndex(U,ue){ue.classList.toggle(this._trait,this.contains(U))}unrender(U){U.classList.remove(this._trait)}set(U,ue){return this._set(U,[...U].sort(ne),ue)}_set(U,ue,ve){let X=this.indexes,ye=this.sortedIndexes;this.indexes=U,this.sortedIndexes=ue;let Ce=re(ye,U);return this.renderer.renderIndexes(Ce),this._onChange.fire({indexes:U,browserEvent:ve}),X}get(){return this.indexes}contains(U){return(0,x.ry)(this.sortedIndexes,U,ne)>=0}dispose(){(0,r.B9)(this._onChange)}}D([d.H],R.prototype,"renderer",null);class O extends R{constructor(U){super("selected"),this.setAriaSelected=U}renderIndex(U,ue){super.renderIndex(U,ue),this.setAriaSelected&&(this.contains(U)?ue.setAttribute("aria-selected","true"):ue.setAttribute("aria-selected","false"))}}class ${constructor(U,ue,ve){this.trait=U,this.view=ue,this.identityProvider=ve}splice(U,ue,ve){if(!this.identityProvider)return this.trait.splice(U,ue,ve.map(()=>!1));let X=this.trait.get().map(Ce=>this.identityProvider.getId(this.view.element(Ce)).toString()),ye=ve.map(Ce=>X.indexOf(this.identityProvider.getId(Ce).toString())>-1);this.trait.splice(U,ue,ye)}}function N(de){return de.tagName==="INPUT"||de.tagName==="TEXTAREA"}function T(de){return!!de.classList.contains("monaco-editor")||!de.classList.contains("monaco-list")&&!!de.parentElement&&T(de.parentElement)}function C(de){return!!(de.tagName==="A"&&de.classList.contains("monaco-button")||de.tagName==="DIV"&&de.classList.contains("monaco-button-dropdown"))||!de.classList.contains("monaco-list")&&!!de.parentElement&&C(de.parentElement)}class W{get onKeyDown(){return this.disposables.add(o.ju.chain(this.disposables.add(new B.Y(this.view.domNode,"keydown")).event).filter(U=>!N(U.target)).map(U=>new u.y(U)))}constructor(U,ue,ve){this.list=U,this.view=ue,this.disposables=new r.SL,this.multipleSelectionDisposables=new r.SL,this.onKeyDown.filter(X=>X.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(X=>X.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(X=>X.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(X=>X.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(X=>X.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(X=>X.keyCode===9).on(this.onEscape,this,this.disposables),ve.multipleSelectionSupport!==!1&&this.onKeyDown.filter(X=>(c.dz?X.metaKey:X.ctrlKey)&&X.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}updateOptions(U){U.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),U.multipleSelectionSupport&&this.onKeyDown.filter(ue=>(c.dz?ue.metaKey:ue.ctrlKey)&&ue.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(U){U.preventDefault(),U.stopPropagation(),this.list.setSelection(this.list.getFocus(),U.browserEvent)}onUpArrow(U){U.preventDefault(),U.stopPropagation(),this.list.focusPrevious(1,!1,U.browserEvent);let ue=this.list.getFocus()[0];this.list.setAnchor(ue),this.list.reveal(ue),this.view.domNode.focus()}onDownArrow(U){U.preventDefault(),U.stopPropagation(),this.list.focusNext(1,!1,U.browserEvent);let ue=this.list.getFocus()[0];this.list.setAnchor(ue),this.list.reveal(ue),this.view.domNode.focus()}onPageUpArrow(U){U.preventDefault(),U.stopPropagation(),this.list.focusPreviousPage(U.browserEvent);let ue=this.list.getFocus()[0];this.list.setAnchor(ue),this.list.reveal(ue),this.view.domNode.focus()}onPageDownArrow(U){U.preventDefault(),U.stopPropagation(),this.list.focusNextPage(U.browserEvent);let ue=this.list.getFocus()[0];this.list.setAnchor(ue),this.list.reveal(ue),this.view.domNode.focus()}onCtrlA(U){U.preventDefault(),U.stopPropagation(),this.list.setSelection((0,x.w6)(this.list.length),U.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(U){this.list.getSelection().length&&(U.preventDefault(),U.stopPropagation(),this.list.setSelection([],U.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}D([d.H],W.prototype,"onKeyDown",null),function(de){de[de.Automatic=0]="Automatic",de[de.Trigger=1]="Trigger"}(a||(a={})),function(de){de[de.Idle=0]="Idle",de[de.Typing=1]="Typing"}(w||(w={}));let K=new class{mightProducePrintableCharacter(de){return!(de.ctrlKey||de.metaKey||de.altKey)&&(de.keyCode>=31&&de.keyCode<=56||de.keyCode>=21&&de.keyCode<=30||de.keyCode>=98&&de.keyCode<=107||de.keyCode>=85&&de.keyCode<=95)}};class j{constructor(U,ue,ve,X,ye){this.list=U,this.view=ue,this.keyboardNavigationLabelProvider=ve,this.keyboardNavigationEventFilter=X,this.delegate=ye,this.enabled=!1,this.state=w.Idle,this.mode=a.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new r.SL,this.disposables=new r.SL,this.updateOptions(U.options)}updateOptions(U){var ue,ve;(ue=U.typeNavigationEnabled)===null||ue===void 0||ue?this.enable():this.disable(),this.mode=(ve=U.typeNavigationMode)!==null&&ve!==void 0?ve:a.Automatic}enable(){if(this.enabled)return;let U=!1,ue=this.enabledDisposables.add(o.ju.chain(this.enabledDisposables.add(new B.Y(this.view.domNode,"keydown")).event)).filter(X=>!N(X.target)).filter(()=>this.mode===a.Automatic||this.triggered).map(X=>new u.y(X)).filter(X=>U||this.keyboardNavigationEventFilter(X)).filter(X=>this.delegate.mightProducePrintableCharacter(X)).forEach(X=>m.zB.stop(X,!0)).map(X=>X.browserEvent.key).event,ve=o.ju.debounce(ue,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);o.ju.reduce(o.ju.any(ue,ve),(X,ye)=>ye===null?null:(X||"")+ye,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),ve(this.onClear,this,this.enabledDisposables),ue(()=>U=!0,void 0,this.enabledDisposables),ve(()=>U=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var U;let ue=this.list.getFocus();if(ue.length>0&&ue[0]===this.previouslyFocused){let ve=(U=this.list.options.accessibilityProvider)===null||U===void 0?void 0:U.getAriaLabel(this.list.element(ue[0]));ve&&(0,_.Z9)(ve)}this.previouslyFocused=-1}onInput(U){if(!U)return this.state=w.Idle,void(this.triggered=!1);let ue=this.list.getFocus(),ve=ue.length>0?ue[0]:0,X=this.state===w.Idle?1:0;this.state=w.Typing;for(let ye=0;ye<this.list.length;ye++){let Ce=(ve+ye+X)%this.list.length,Ee=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(Ce)),Ae=Ee&&Ee.toString();if(Ae===void 0||(0,h.Ji)(U,Ae))return this.previouslyFocused=ve,this.list.setFocus([Ce]),void this.list.reveal(Ce)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class F{constructor(U,ue){this.list=U,this.view=ue,this.disposables=new r.SL,this.disposables.add(o.ju.chain(this.disposables.add(new B.Y(ue.domNode,"keydown")).event)).filter(ve=>!N(ve.target)).map(ve=>new u.y(ve)).filter(ve=>!(ve.keyCode!==2||ve.ctrlKey||ve.metaKey||ve.shiftKey||ve.altKey)).on(this.onTab,this,this.disposables)}onTab(U){if(U.target!==this.view.domNode)return;let ue=this.list.getFocus();if(ue.length===0)return;let ve=this.view.domElement(ue[0]);if(!ve)return;let X=ve.querySelector("[tabIndex]");if(!(X&&X instanceof HTMLElement&&X.tabIndex!==-1))return;let ye=window.getComputedStyle(X);ye.visibility!=="hidden"&&ye.display!=="none"&&(U.preventDefault(),U.stopPropagation(),X.focus())}dispose(){this.disposables.dispose()}}function H(de){return c.dz?de.browserEvent.metaKey:de.browserEvent.ctrlKey}function z(de){return de.browserEvent.shiftKey}let J={isSelectionSingleChangeEvent:H,isSelectionRangeChangeEvent:z};class oe{constructor(U){this.list=U,this.disposables=new r.SL,this._onPointer=new o.Q5,this.onPointer=this._onPointer.event,U.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||J),this.mouseSupport=U.options.mouseSupport===void 0||!!U.options.mouseSupport,this.mouseSupport&&(U.onMouseDown(this.onMouseDown,this,this.disposables),U.onContextMenu(this.onContextMenu,this,this.disposables),U.onMouseDblClick(this.onDoubleClick,this,this.disposables),U.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(I.o.addTarget(U.getHTMLElement()))),o.ju.any(U.onMouseClick,U.onMouseMiddleClick,U.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(U){U.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,U.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||J))}isSelectionSingleChangeEvent(U){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(U)}isSelectionRangeChangeEvent(U){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(U)}isSelectionChangeEvent(U){return this.isSelectionSingleChangeEvent(U)||this.isSelectionRangeChangeEvent(U)}onMouseDown(U){T(U.browserEvent.target)||document.activeElement!==U.browserEvent.target&&this.list.domFocus()}onContextMenu(U){if(N(U.browserEvent.target)||T(U.browserEvent.target))return;let ue=U.index===void 0?[]:[U.index];this.list.setFocus(ue,U.browserEvent)}onViewPointer(U){if(!this.mouseSupport||N(U.browserEvent.target)||T(U.browserEvent.target))return;let ue=U.index;return ue===void 0?(this.list.setFocus([],U.browserEvent),this.list.setSelection([],U.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionRangeChangeEvent(U)||this.isSelectionChangeEvent(U)?this.changeSelection(U):(this.list.setFocus([ue],U.browserEvent),this.list.setAnchor(ue),(ve=U.browserEvent)instanceof MouseEvent&&ve.button===2||this.list.setSelection([ue],U.browserEvent),void this._onPointer.fire(U));var ve}onDoubleClick(U){if(N(U.browserEvent.target)||T(U.browserEvent.target)||this.isSelectionChangeEvent(U))return;let ue=this.list.getFocus();this.list.setSelection(ue,U.browserEvent)}changeSelection(U){let ue=U.index,ve=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(U)){if(ve===void 0){let _e=this.list.getFocus()[0];ve=_e!=null?_e:ue,this.list.setAnchor(ve)}let X=Math.min(ve,ue),ye=Math.max(ve,ue),Ce=(0,x.w6)(X,ye+1),Ee=this.list.getSelection(),Ae=function(_e,te){let Le=_e.indexOf(te);if(Le===-1)return[];let ke=[],le=Le-1;for(;le>=0&&_e[le]===te-(Le-le);)ke.push(_e[le--]);for(ke.reverse(),le=Le;le<_e.length&&_e[le]===te+(le-Le);)ke.push(_e[le++]);return ke}(re(Ee,[ve]),ve);if(Ae.length===0)return;let Fe=re(Ce,function(_e,te){let Le=[],ke=0,le=0;for(;ke<_e.length||le<te.length;)if(ke>=_e.length)Le.push(te[le++]);else if(le>=te.length)Le.push(_e[ke++]);else{if(_e[ke]===te[le]){ke++,le++;continue}_e[ke]<te[le]?Le.push(_e[ke++]):le++}return Le}(Ee,Ae));this.list.setSelection(Fe,U.browserEvent),this.list.setFocus([ue],U.browserEvent)}else if(this.isSelectionSingleChangeEvent(U)){let X=this.list.getSelection(),ye=X.filter(Ce=>Ce!==ue);this.list.setFocus([ue]),this.list.setAnchor(ue),X.length===ye.length?this.list.setSelection([...ye,ue],U.browserEvent):this.list.setSelection(ye,U.browserEvent)}}dispose(){this.disposables.dispose()}}class fe{constructor(U,ue){this.styleElement=U,this.selectorSuffix=ue}style(U){var ue,ve;let X=this.selectorSuffix&&`.${this.selectorSuffix}`,ye=[];U.listBackground&&ye.push(`.monaco-list${X} .monaco-list-rows { background: ${U.listBackground}; }`),U.listFocusBackground&&(ye.push(`.monaco-list${X}:focus .monaco-list-row.focused { background-color: ${U.listFocusBackground}; }`),ye.push(`.monaco-list${X}:focus .monaco-list-row.focused:hover { background-color: ${U.listFocusBackground}; }`)),U.listFocusForeground&&ye.push(`.monaco-list${X}:focus .monaco-list-row.focused { color: ${U.listFocusForeground}; }`),U.listActiveSelectionBackground&&(ye.push(`.monaco-list${X}:focus .monaco-list-row.selected { background-color: ${U.listActiveSelectionBackground}; }`),ye.push(`.monaco-list${X}:focus .monaco-list-row.selected:hover { background-color: ${U.listActiveSelectionBackground}; }`)),U.listActiveSelectionForeground&&ye.push(`.monaco-list${X}:focus .monaco-list-row.selected { color: ${U.listActiveSelectionForeground}; }`),U.listActiveSelectionIconForeground&&ye.push(`.monaco-list${X}:focus .monaco-list-row.selected .codicon { color: ${U.listActiveSelectionIconForeground}; }`),U.listFocusAndSelectionBackground&&ye.push(`
				.monaco-drag-image,
				.monaco-list${X}:focus .monaco-list-row.selected.focused { background-color: ${U.listFocusAndSelectionBackground}; }
			`),U.listFocusAndSelectionForeground&&ye.push(`
				.monaco-drag-image,
				.monaco-list${X}:focus .monaco-list-row.selected.focused { color: ${U.listFocusAndSelectionForeground}; }
			`),U.listInactiveFocusForeground&&(ye.push(`.monaco-list${X} .monaco-list-row.focused { color:  ${U.listInactiveFocusForeground}; }`),ye.push(`.monaco-list${X} .monaco-list-row.focused:hover { color:  ${U.listInactiveFocusForeground}; }`)),U.listInactiveSelectionIconForeground&&ye.push(`.monaco-list${X} .monaco-list-row.focused .codicon { color:  ${U.listInactiveSelectionIconForeground}; }`),U.listInactiveFocusBackground&&(ye.push(`.monaco-list${X} .monaco-list-row.focused { background-color:  ${U.listInactiveFocusBackground}; }`),ye.push(`.monaco-list${X} .monaco-list-row.focused:hover { background-color:  ${U.listInactiveFocusBackground}; }`)),U.listInactiveSelectionBackground&&(ye.push(`.monaco-list${X} .monaco-list-row.selected { background-color:  ${U.listInactiveSelectionBackground}; }`),ye.push(`.monaco-list${X} .monaco-list-row.selected:hover { background-color:  ${U.listInactiveSelectionBackground}; }`)),U.listInactiveSelectionForeground&&ye.push(`.monaco-list${X} .monaco-list-row.selected { color: ${U.listInactiveSelectionForeground}; }`),U.listHoverBackground&&ye.push(`.monaco-list${X}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${U.listHoverBackground}; }`),U.listHoverForeground&&ye.push(`.monaco-list${X}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${U.listHoverForeground}; }`);let Ce=(0,m.XT)(U.listFocusAndSelectionOutline,(0,m.XT)(U.listSelectionOutline,(ue=U.listFocusOutline)!==null&&ue!==void 0?ue:""));Ce&&ye.push(`.monaco-list${X}:focus .monaco-list-row.focused.selected { outline: 1px solid ${Ce}; outline-offset: -1px;}`),U.listFocusOutline&&ye.push(`
				.monaco-drag-image,
				.monaco-list${X}:focus .monaco-list-row.focused { outline: 1px solid ${U.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${X}.last-focused .monaco-list-row.focused { outline: 1px solid ${U.listFocusOutline}; outline-offset: -1px; }
			`);let Ee=(0,m.XT)(U.listSelectionOutline,(ve=U.listInactiveFocusOutline)!==null&&ve!==void 0?ve:"");Ee&&ye.push(`.monaco-list${X} .monaco-list-row.focused.selected { outline: 1px dotted ${Ee}; outline-offset: -1px; }`),U.listSelectionOutline&&ye.push(`.monaco-list${X} .monaco-list-row.selected { outline: 1px dotted ${U.listSelectionOutline}; outline-offset: -1px; }`),U.listInactiveFocusOutline&&ye.push(`.monaco-list${X} .monaco-list-row.focused { outline: 1px dotted ${U.listInactiveFocusOutline}; outline-offset: -1px; }`),U.listHoverOutline&&ye.push(`.monaco-list${X} .monaco-list-row:hover { outline: 1px dashed ${U.listHoverOutline}; outline-offset: -1px; }`),U.listDropBackground&&ye.push(`
				.monaco-list${X}.drop-target,
				.monaco-list${X} .monaco-list-rows.drop-target,
				.monaco-list${X} .monaco-list-row.drop-target { background-color: ${U.listDropBackground} !important; color: inherit !important; }
			`),U.tableColumnsBorder&&ye.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${U.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),U.tableOddRowsBackgroundColor&&ye.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${U.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=ye.join(`
`)}}let q={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropBackground:"#383B3D",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:f.Il.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:f.Il.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:f.Il.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},p={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){}}};function re(de,U){let ue=[],ve=0,X=0;for(;ve<de.length||X<U.length;)if(ve>=de.length)ue.push(U[X++]);else if(X>=U.length)ue.push(de[ve++]);else{if(de[ve]===U[X]){ue.push(de[ve]),ve++,X++;continue}de[ve]<U[X]?ue.push(de[ve++]):ue.push(U[X++])}return ue}let ne=(de,U)=>de-U;class ie{constructor(U,ue){this._templateId=U,this.renderers=ue}get templateId(){return this._templateId}renderTemplate(U){return this.renderers.map(ue=>ue.renderTemplate(U))}renderElement(U,ue,ve,X){let ye=0;for(let Ce of this.renderers)Ce.renderElement(U,ue,ve[ye++],X)}disposeElement(U,ue,ve,X){var ye;let Ce=0;for(let Ee of this.renderers)(ye=Ee.disposeElement)===null||ye===void 0||ye.call(Ee,U,ue,ve[Ce],X),Ce+=1}disposeTemplate(U){let ue=0;for(let ve of this.renderers)ve.disposeTemplate(U[ue++])}}class se{constructor(U){this.accessibilityProvider=U,this.templateId="a18n"}renderTemplate(U){return U}renderElement(U,ue,ve){let X=this.accessibilityProvider.getAriaLabel(U);X?ve.setAttribute("aria-label",X):ve.removeAttribute("aria-label");let ye=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(U);typeof ye=="number"?ve.setAttribute("aria-level",`${ye}`):ve.removeAttribute("aria-level")}disposeTemplate(U){}}class ce{constructor(U,ue){this.list=U,this.dnd=ue}getDragElements(U){let ue=this.list.getSelectedElements();return ue.indexOf(U)>-1?ue:[U]}getDragURI(U){return this.dnd.getDragURI(U)}getDragLabel(U,ue){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(U,ue)}onDragStart(U,ue){var ve,X;(X=(ve=this.dnd).onDragStart)===null||X===void 0||X.call(ve,U,ue)}onDragOver(U,ue,ve,X){return this.dnd.onDragOver(U,ue,ve,X)}onDragLeave(U,ue,ve,X){var ye,Ce;(Ce=(ye=this.dnd).onDragLeave)===null||Ce===void 0||Ce.call(ye,U,ue,ve,X)}onDragEnd(U){var ue,ve;(ve=(ue=this.dnd).onDragEnd)===null||ve===void 0||ve.call(ue,U)}drop(U,ue,ve,X){this.dnd.drop(U,ue,ve,X)}}class be{get onDidChangeFocus(){return o.ju.map(this.eventBufferer.wrapEvent(this.focus.onChange),U=>this.toListEvent(U),this.disposables)}get onDidChangeSelection(){return o.ju.map(this.eventBufferer.wrapEvent(this.selection.onChange),U=>this.toListEvent(U),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let U=!1,ue=this.disposables.add(o.ju.chain(this.disposables.add(new B.Y(this.view.domNode,"keydown")).event)).map(ye=>new u.y(ye)).filter(ye=>U=ye.keyCode===58||ye.shiftKey&&ye.keyCode===68).map(ye=>m.zB.stop(ye,!0)).filter(()=>!1).event,ve=this.disposables.add(o.ju.chain(this.disposables.add(new B.Y(this.view.domNode,"keyup")).event)).forEach(()=>U=!1).map(ye=>new u.y(ye)).filter(ye=>ye.keyCode===58||ye.shiftKey&&ye.keyCode===68).map(ye=>m.zB.stop(ye,!0)).map(({browserEvent:ye})=>{let Ce=this.getFocus(),Ee=Ce.length?Ce[0]:void 0;return{index:Ee,element:Ee!==void 0?this.view.element(Ee):void 0,anchor:Ee!==void 0?this.view.domElement(Ee):this.view.domNode,browserEvent:ye}}).event,X=this.disposables.add(o.ju.chain(this.view.onContextMenu)).filter(ye=>!U).map(({element:ye,index:Ce,browserEvent:Ee})=>({element:ye,index:Ce,anchor:{x:Ee.pageX+1,y:Ee.pageY},browserEvent:Ee})).event;return o.ju.any(ue,ve,X)}get onKeyDown(){return this.disposables.add(new B.Y(this.view.domNode,"keydown")).event}get onDidFocus(){return o.ju.signal(this.disposables.add(new B.Y(this.view.domNode,"focus",!0)).event)}constructor(U,ue,ve,X,ye=p){var Ce,Ee,Ae,Fe;this.user=U,this._options=ye,this.focus=new R("focused"),this.anchor=new R("anchor"),this.eventBufferer=new o.E7,this._ariaLabel="",this.disposables=new r.SL,this._onDidDispose=new o.Q5,this.onDidDispose=this._onDidDispose.event;let _e=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(Ce=this._options.accessibilityProvider)===null||Ce===void 0?void 0:Ce.getWidgetRole():"list";this.selection=new O(_e!=="listbox");let te=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=ye.accessibilityProvider,this.accessibilityProvider&&(te.push(new se(this.accessibilityProvider)),(Ae=(Ee=this.accessibilityProvider).onDidChangeActiveDescendant)===null||Ae===void 0||Ae.call(Ee,this.onDidChangeActiveDescendant,this,this.disposables)),X=X.map(ke=>new ie(ke.templateId,[...te,ke]));let Le=Object.assign(Object.assign({},ye),{dnd:ye.dnd&&new ce(this,ye.dnd)});if(this.view=this.createListView(ue,ve,X,Le),this.view.domNode.setAttribute("role",_e),ye.styleController)this.styleController=ye.styleController(this.view.domId);else{let ke=(0,m.dS)(this.view.domNode);this.styleController=new fe(ke,this.view.domId)}if(this.spliceable=new A([new $(this.focus,this.view,ye.identityProvider),new $(this.selection,this.view,ye.identityProvider),new $(this.anchor,this.view,ye.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new F(this,this.view)),(typeof ye.keyboardSupport!="boolean"||ye.keyboardSupport)&&(this.keyboardController=new W(this,this.view,ye),this.disposables.add(this.keyboardController)),ye.keyboardNavigationLabelProvider){let ke=ye.keyboardNavigationDelegate||K;this.typeNavigationController=new j(this,this.view,ye.keyboardNavigationLabelProvider,(Fe=ye.keyboardNavigationEventFilter)!==null&&Fe!==void 0?Fe:()=>!0,ke),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(ye),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(U,ue,ve,X){return new E.Bv(U,ue,ve,X)}createMouseController(U){return new oe(this)}updateOptions(U={}){var ue,ve;this._options=Object.assign(Object.assign({},this._options),U),(ue=this.typeNavigationController)===null||ue===void 0||ue.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(U),(ve=this.keyboardController)===null||ve===void 0||ve.updateOptions(U),this.view.updateOptions(U)}get options(){return this._options}splice(U,ue,ve=[]){if(U<0||U>this.view.length)throw new l(this.user,`Invalid start index: ${U}`);if(ue<0)throw new l(this.user,`Invalid delete count: ${ue}`);ue===0&&ve.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(U,ue,ve))}rerender(){this.view.rerender()}element(U){return this.view.element(U)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(U){this.view.setScrollTop(U)}get scrollHeight(){return this.view.scrollHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(U){this._ariaLabel=U,this.view.domNode.setAttribute("aria-label",U)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(U,ue){this.view.layout(U,ue)}setSelection(U,ue){for(let ve of U)if(ve<0||ve>=this.length)throw new l(this.user,`Invalid index ${ve}`);this.selection.set(U,ue)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(U=>this.view.element(U))}setAnchor(U){if(U!==void 0){if(U<0||U>=this.length)throw new l(this.user,`Invalid index ${U}`);this.anchor.set([U])}else this.anchor.set([])}getAnchor(){return(0,x.Xh)(this.anchor.get(),void 0)}getAnchorElement(){let U=this.getAnchor();return U===void 0?void 0:this.element(U)}setFocus(U,ue){for(let ve of U)if(ve<0||ve>=this.length)throw new l(this.user,`Invalid index ${ve}`);this.focus.set(U,ue)}focusNext(U=1,ue=!1,ve,X){if(this.length===0)return;let ye=this.focus.get(),Ce=this.findNextIndex(ye.length>0?ye[0]+U:0,ue,X);Ce>-1&&this.setFocus([Ce],ve)}focusPrevious(U=1,ue=!1,ve,X){if(this.length===0)return;let ye=this.focus.get(),Ce=this.findPreviousIndex(ye.length>0?ye[0]-U:0,ue,X);Ce>-1&&this.setFocus([Ce],ve)}focusNextPage(U,ue){return L(this,void 0,void 0,function*(){let ve=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);ve=ve===0?0:ve-1;let X=this.getFocus()[0];if(X!==ve&&(X===void 0||ve>X)){let ye=this.findPreviousIndex(ve,!1,ue);ye>-1&&X!==ye?this.setFocus([ye],U):this.setFocus([ve],U)}else{let ye=this.view.getScrollTop(),Ce=ye+this.view.renderHeight;ve>X&&(Ce-=this.view.elementHeight(ve)),this.view.setScrollTop(Ce),this.view.getScrollTop()!==ye&&(this.setFocus([]),yield(0,v.Vs)(0),yield this.focusNextPage(U,ue))}})}focusPreviousPage(U,ue){return L(this,void 0,void 0,function*(){let ve,X=this.view.getScrollTop();ve=X===0?this.view.indexAt(X):this.view.indexAfter(X-1);let ye=this.getFocus()[0];if(ye!==ve&&(ye===void 0||ye>=ve)){let Ce=this.findNextIndex(ve,!1,ue);Ce>-1&&ye!==Ce?this.setFocus([Ce],U):this.setFocus([ve],U)}else{let Ce=X;this.view.setScrollTop(X-this.view.renderHeight),this.view.getScrollTop()!==Ce&&(this.setFocus([]),yield(0,v.Vs)(0),yield this.focusPreviousPage(U,ue))}})}focusLast(U,ue){if(this.length===0)return;let ve=this.findPreviousIndex(this.length-1,!1,ue);ve>-1&&this.setFocus([ve],U)}focusFirst(U,ue){this.focusNth(0,U,ue)}focusNth(U,ue,ve){if(this.length===0)return;let X=this.findNextIndex(U,!1,ve);X>-1&&this.setFocus([X],ue)}findNextIndex(U,ue=!1,ve){for(let X=0;X<this.length;X++){if(U>=this.length&&!ue)return-1;if(U%=this.length,!ve||ve(this.element(U)))return U;U++}return-1}findPreviousIndex(U,ue=!1,ve){for(let X=0;X<this.length;X++){if(U<0&&!ue)return-1;if(U=(this.length+U%this.length)%this.length,!ve||ve(this.element(U)))return U;U--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(U=>this.view.element(U))}reveal(U,ue){if(U<0||U>=this.length)throw new l(this.user,`Invalid index ${U}`);let ve=this.view.getScrollTop(),X=this.view.elementTop(U),ye=this.view.elementHeight(U);if((0,b.hj)(ue)){let Ce=ye-this.view.renderHeight;this.view.setScrollTop(Ce*(0,i.uZ)(ue,0,1)+X)}else{let Ce=X+ye,Ee=ve+this.view.renderHeight;X<ve&&Ce>=Ee||(X<ve||Ce>=Ee&&ye>=this.view.renderHeight?this.view.setScrollTop(X):Ce>=Ee&&this.view.setScrollTop(Ce-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(U){return this.view.getElementDomId(U)}style(U){this.styleController.style(U)}toListEvent({indexes:U,browserEvent:ue}){return{indexes:U,elements:U.map(ve=>this.view.element(ve)),browserEvent:ue}}_onFocusChange(){let U=this.focus.get();this.view.domNode.classList.toggle("element-focused",U.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var U;let ue=this.focus.get();if(ue.length>0){let ve;!((U=this.accessibilityProvider)===null||U===void 0)&&U.getActiveDescendantId&&(ve=this.accessibilityProvider.getActiveDescendantId(this.view.element(ue[0]))),this.view.domNode.setAttribute("aria-activedescendant",ve||this.view.getElementDomId(ue[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let U=this.selection.get();this.view.domNode.classList.toggle("selection-none",U.length===0),this.view.domNode.classList.toggle("selection-single",U.length===1),this.view.domNode.classList.toggle("selection-multiple",U.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}D([d.H],be.prototype,"onDidChangeFocus",null),D([d.H],be.prototype,"onDidChangeSelection",null),D([d.H],be.prototype,"onContextMenu",null),D([d.H],be.prototype,"onKeyDown",null),D([d.H],be.prototype,"onDidFocus",null)},6542:(ut,Ie,t)=>{"use strict";t.d(Ie,{S:()=>m});let m="monaco-mouse-cursor-text"},3098:(ut,Ie,t)=>{"use strict";t.d(Ie,{g:()=>l,l:()=>m});var m,B=t(5321),u=t(4850),I=t(553),_=t(5393),A=t(9898),x=t(4669),v=t(5976),f=t(1432),d=function(a,w,E,D){var L,k=arguments.length,R=k<3?w:D===null?D=Object.getOwnPropertyDescriptor(w,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,w,E,D);else for(var O=a.length-1;O>=0;O--)(L=a[O])&&(R=(k<3?L(R):k>3?L(w,E,R):L(w,E))||R);return k>3&&R&&Object.defineProperty(w,E,R),R};(function(a){a.North="north",a.South="south",a.East="east",a.West="west"})(m||(m={}));let o=new x.Q5,h=new x.Q5;class r{constructor(){this.disposables=new v.SL}get onPointerMove(){return this.disposables.add(new u.Y(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new u.Y(window,"mouseup")).event}dispose(){this.disposables.dispose()}}d([A.H],r.prototype,"onPointerMove",null),d([A.H],r.prototype,"onPointerUp",null);class i{get onPointerMove(){return this.disposables.add(new u.Y(this.el,I.t.Change)).event}get onPointerUp(){return this.disposables.add(new u.Y(this.el,I.t.End)).event}constructor(w){this.el=w,this.disposables=new v.SL}dispose(){this.disposables.dispose()}}d([A.H],i.prototype,"onPointerMove",null),d([A.H],i.prototype,"onPointerUp",null);class c{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(w){this.factory=w}dispose(){}}d([A.H],c.prototype,"onPointerMove",null),d([A.H],c.prototype,"onPointerUp",null);let b="pointer-events-disabled";class l extends v.JT{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(w){this._state!==w&&(this.el.classList.toggle("disabled",w===0),this.el.classList.toggle("minimum",w===1),this.el.classList.toggle("maximum",w===2),this._state=w,this.onDidEnablementChange.fire(w))}set orthogonalStartSash(w){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),w){let E=D=>{this.orthogonalStartDragHandleDisposables.clear(),D!==0&&(this._orthogonalStartDragHandle=(0,B.R3)(this.el,(0,B.$)(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,v.OF)(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new u.Y(this._orthogonalStartDragHandle,"mouseenter")).event(()=>l.onMouseEnter(w),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new u.Y(this._orthogonalStartDragHandle,"mouseleave")).event(()=>l.onMouseLeave(w),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(w.onDidEnablementChange.event(E,this)),E(w.state)}this._orthogonalStartSash=w}set orthogonalEndSash(w){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),w){let E=D=>{this.orthogonalEndDragHandleDisposables.clear(),D!==0&&(this._orthogonalEndDragHandle=(0,B.R3)(this.el,(0,B.$)(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,v.OF)(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new u.Y(this._orthogonalEndDragHandle,"mouseenter")).event(()=>l.onMouseEnter(w),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new u.Y(this._orthogonalEndDragHandle,"mouseleave")).event(()=>l.onMouseLeave(w),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(w.onDidEnablementChange.event(E,this)),E(w.state)}this._orthogonalEndSash=w}constructor(w,E,D){super(),this.hoverDelay=300,this.hoverDelayer=this._register(new _.vp(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new x.Q5),this._onDidStart=this._register(new x.Q5),this._onDidChange=this._register(new x.Q5),this._onDidReset=this._register(new x.Q5),this._onDidEnd=this._register(new x.Q5),this.orthogonalStartSashDisposables=this._register(new v.SL),this.orthogonalStartDragHandleDisposables=this._register(new v.SL),this.orthogonalEndSashDisposables=this._register(new v.SL),this.orthogonalEndDragHandleDisposables=this._register(new v.SL),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=(0,B.R3)(w,(0,B.$)(".monaco-sash")),D.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${D.orthogonalEdge}`),f.dz&&this.el.classList.add("mac");let L=this._register(new u.Y(this.el,"mousedown")).event;this._register(L(C=>this.onPointerStart(C,new r),this));let k=this._register(new u.Y(this.el,"dblclick")).event;this._register(k(this.onPointerDoublePress,this));let R=this._register(new u.Y(this.el,"mouseenter")).event;this._register(R(()=>l.onMouseEnter(this)));let O=this._register(new u.Y(this.el,"mouseleave")).event;this._register(O(()=>l.onMouseLeave(this))),this._register(I.o.addTarget(this.el));let $=this._register(new u.Y(this.el,I.t.Start)).event;this._register($(C=>this.onPointerStart(C,new i(this.el)),this));let N=this._register(new u.Y(this.el,I.t.Tap)).event,T;this._register(N(C=>{if(T)return clearTimeout(T),T=void 0,void this.onPointerDoublePress(C);clearTimeout(T),T=setTimeout(()=>T=void 0,250)},this)),typeof D.size=="number"?(this.size=D.size,D.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=4,this._register(o.event(C=>{this.size=C,this.layout()}))),this._register(h.event(C=>this.hoverDelay=C)),this.layoutProvider=E,this.orthogonalStartSash=D.orthogonalStartSash,this.orthogonalEndSash=D.orthogonalEndSash,this.orientation=D.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",!1),this.layout()}onPointerStart(w,E){B.zB.stop(w);let D=!1;if(!w.__orthogonalSashEvent){let W=this.getOrthogonalSash(w);W&&(D=!0,w.__orthogonalSashEvent=!0,W.onPointerStart(w,new c(E)))}if(this.linkedSash&&!w.__linkedSashEvent&&(w.__linkedSashEvent=!0,this.linkedSash.onPointerStart(w,new c(E))),!this.state)return;let L=document.getElementsByTagName("iframe");for(let W of L)W.classList.add(b);let k=w.pageX,R=w.pageY,O=w.altKey,$={startX:k,currentX:k,startY:R,currentY:R,altKey:O};this.el.classList.add("active"),this._onDidStart.fire($);let N=(0,B.dS)(this.el),T=()=>{let W="";W=D?"all-scroll":this.orientation===1?this.state===1?"s-resize":this.state===2?"n-resize":f.dz?"row-resize":"ns-resize":this.state===1?"e-resize":this.state===2?"w-resize":f.dz?"col-resize":"ew-resize",N.textContent=`* { cursor: ${W} !important; }`},C=new v.SL;T(),D||this.onDidEnablementChange.event(T,null,C),E.onPointerMove(W=>{B.zB.stop(W,!1);let K={startX:k,currentX:W.pageX,startY:R,currentY:W.pageY,altKey:O};this._onDidChange.fire(K)},null,C),E.onPointerUp(W=>{B.zB.stop(W,!1),this.el.removeChild(N),this.el.classList.remove("active"),this._onDidEnd.fire(),C.dispose();for(let K of L)K.classList.remove(b)},null,C),C.add(E)}onPointerDoublePress(w){let E=this.getOrthogonalSash(w);E&&E._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(w,E=!1){w.el.classList.contains("active")?(w.hoverDelayer.cancel(),w.el.classList.add("hover")):w.hoverDelayer.trigger(()=>w.el.classList.add("hover"),w.hoverDelay).then(void 0,()=>{}),!E&&w.linkedSash&&l.onMouseEnter(w.linkedSash,!0)}static onMouseLeave(w,E=!1){w.hoverDelayer.cancel(),w.el.classList.remove("hover"),!E&&w.linkedSash&&l.onMouseLeave(w.linkedSash,!0)}clearSashHoverState(){l.onMouseLeave(this)}layout(){if(this.orientation===0){let w=this.layoutProvider;this.el.style.left=w.getVerticalSashLeft(this)-this.size/2+"px",w.getVerticalSashTop&&(this.el.style.top=w.getVerticalSashTop(this)+"px"),w.getVerticalSashHeight&&(this.el.style.height=w.getVerticalSashHeight(this)+"px")}else{let w=this.layoutProvider;this.el.style.top=w.getHorizontalSashTop(this)-this.size/2+"px",w.getHorizontalSashLeft&&(this.el.style.left=w.getHorizontalSashLeft(this)+"px"),w.getHorizontalSashWidth&&(this.el.style.width=w.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(w){var E;let D=(E=w.initialTarget)!==null&&E!==void 0?E:w.target;if(D&&D instanceof HTMLElement)return D.classList.contains("orthogonal-drag-handle")?D.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}},9802:(ut,Ie,t)=>{"use strict";t.d(Ie,{s$:()=>O,Io:()=>D,NB:()=>k,$Z:()=>R});var m=t(6268),B=t(5321),u=t(8626),I=t(7448),_=t(3911),A=t(3794),x=t(5393),v=t(5670);class f extends A.${constructor(N){super(),this._onActivate=N.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=N.bgWidth+"px",this.bgDomNode.style.height=N.bgHeight+"px",N.top!==void 0&&(this.bgDomNode.style.top="0px"),N.left!==void 0&&(this.bgDomNode.style.left="0px"),N.bottom!==void 0&&(this.bgDomNode.style.bottom="0px"),N.right!==void 0&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=N.className,this.domNode.classList.add(...v.k.asClassNameArray(N.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px",N.top!==void 0&&(this.domNode.style.top=N.top+"px"),N.left!==void 0&&(this.domNode.style.left=N.left+"px"),N.bottom!==void 0&&(this.domNode.style.bottom=N.bottom+"px"),N.right!==void 0&&(this.domNode.style.right=N.right+"px"),this._pointerMoveMonitor=this._register(new _.C),this._register(B.mu(this.bgDomNode,B.tw.POINTER_DOWN,T=>this._arrowPointerDown(T))),this._register(B.mu(this.domNode,B.tw.POINTER_DOWN,T=>this._arrowPointerDown(T))),this._pointerdownRepeatTimer=this._register(new x.zh),this._pointerdownScheduleRepeatTimer=this._register(new x._F)}_arrowPointerDown(N){N.target&&N.target instanceof Element&&(this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)},200),this._pointerMoveMonitor.startMonitoring(N.target,N.pointerId,N.buttons,T=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),N.preventDefault())}}var d=t(5976);class o extends d.JT{constructor(N,T,C){super(),this._visibility=N,this._visibleClassName=T,this._invisibleClassName=C,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new x._F)}setVisibility(N){this._visibility!==N&&(this._visibility=N,this._updateShouldBeVisible())}setShouldBeVisible(N){this._rawShouldBeVisible=N,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility!==2&&(this._visibility===3||this._rawShouldBeVisible)}_updateShouldBeVisible(){let N=this._applyVisibilitySetting();this._shouldBeVisible!==N&&(this._shouldBeVisible=N,this.ensureVisibility())}setIsNeeded(N){this._isNeeded!==N&&(this._isNeeded=N,this.ensureVisibility())}setDomNode(N){this._domNode=N,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var N;(N=this._domNode)===null||N===void 0||N.setClassName(this._visibleClassName)},0))}_hide(N){var T;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(T=this._domNode)===null||T===void 0||T.setClassName(this._invisibleClassName+(N?" fade":"")))}}var h=t(1432);class r extends A.${constructor(N){super(),this._lazyRender=N.lazyRender,this._host=N.host,this._scrollable=N.scrollable,this._scrollByPage=N.scrollByPage,this._scrollbarState=N.scrollbarState,this._visibilityController=this._register(new o(N.visibility,"visible scrollbar "+N.extraScrollbarClassName,"invisible scrollbar "+N.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new _.C),this._shouldRender=!0,this.domNode=(0,u.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(B.nm(this.domNode.domNode,B.tw.POINTER_DOWN,T=>this._domNodePointerDown(T)))}_createArrow(N){let T=this._register(new f(N));this.domNode.domNode.appendChild(T.bgDomNode),this.domNode.domNode.appendChild(T.domNode)}_createSlider(N,T,C,W){this.slider=(0,u.X)(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(N),this.slider.setLeft(T),typeof C=="number"&&this.slider.setWidth(C),typeof W=="number"&&this.slider.setHeight(W),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(B.nm(this.slider.domNode,B.tw.POINTER_DOWN,K=>{K.button===0&&(K.preventDefault(),this._sliderPointerDown(K))})),this.onclick(this.slider.domNode,K=>{K.leftButton&&K.stopPropagation()})}_onElementSize(N){return this._scrollbarState.setVisibleSize(N)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(N){return this._scrollbarState.setScrollSize(N)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(N){return this._scrollbarState.setScrollPosition(N)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(N){N.target===this.domNode.domNode&&this._onPointerDown(N)}delegatePointerDown(N){let T=this.domNode.domNode.getClientRects()[0].top,C=T+this._scrollbarState.getSliderPosition(),W=T+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),K=this._sliderPointerPosition(N);C<=K&&K<=W?N.button===0&&(N.preventDefault(),this._sliderPointerDown(N)):this._onPointerDown(N)}_onPointerDown(N){let T,C;if(N.target===this.domNode.domNode&&typeof N.offsetX=="number"&&typeof N.offsetY=="number")T=N.offsetX,C=N.offsetY;else{let K=B.i(this.domNode.domNode);T=N.pageX-K.left,C=N.pageY-K.top}let W=this._pointerDownRelativePosition(T,C);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(W):this._scrollbarState.getDesiredScrollPositionFromOffset(W)),N.button===0&&(N.preventDefault(),this._sliderPointerDown(N))}_sliderPointerDown(N){if(!(N.target&&N.target instanceof Element))return;let T=this._sliderPointerPosition(N),C=this._sliderOrthogonalPointerPosition(N),W=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(N.target,N.pointerId,N.buttons,K=>{let j=this._sliderOrthogonalPointerPosition(K),F=Math.abs(j-C);if(h.ED&&F>140)return void this._setDesiredScrollPositionNow(W.getScrollPosition());let H=this._sliderPointerPosition(K)-T;this._setDesiredScrollPositionNow(W.getDesiredScrollPositionFromDelta(H))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(N){let T={};this.writeScrollPosition(T,N),this._scrollable.setScrollPositionNow(T)}updateScrollbarSize(N){this._updateScrollbarSize(N),this._scrollbarState.setScrollbarSize(N),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}class i{constructor(N,T,C,W,K,j){this._scrollbarSize=Math.round(T),this._oppositeScrollbarSize=Math.round(C),this._arrowSize=Math.round(N),this._visibleSize=W,this._scrollSize=K,this._scrollPosition=j,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new i(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(N){let T=Math.round(N);return this._visibleSize!==T&&(this._visibleSize=T,this._refreshComputedValues(),!0)}setScrollSize(N){let T=Math.round(N);return this._scrollSize!==T&&(this._scrollSize=T,this._refreshComputedValues(),!0)}setScrollPosition(N){let T=Math.round(N);return this._scrollPosition!==T&&(this._scrollPosition=T,this._refreshComputedValues(),!0)}setScrollbarSize(N){this._scrollbarSize=Math.round(N)}setOppositeScrollbarSize(N){this._oppositeScrollbarSize=Math.round(N)}static _computeValues(N,T,C,W,K){let j=Math.max(0,C-N),F=Math.max(0,j-2*T),H=W>0&&W>C;if(!H)return{computedAvailableSize:Math.round(j),computedIsNeeded:H,computedSliderSize:Math.round(F),computedSliderRatio:0,computedSliderPosition:0};let z=Math.round(Math.max(20,Math.floor(C*F/W))),J=(F-z)/(W-C),oe=K*J;return{computedAvailableSize:Math.round(j),computedIsNeeded:H,computedSliderSize:Math.round(z),computedSliderRatio:J,computedSliderPosition:Math.round(oe)}}_refreshComputedValues(){let N=i._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=N.computedAvailableSize,this._computedIsNeeded=N.computedIsNeeded,this._computedSliderSize=N.computedSliderSize,this._computedSliderRatio=N.computedSliderRatio,this._computedSliderPosition=N.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(N){if(!this._computedIsNeeded)return 0;let T=N-this._arrowSize-this._computedSliderSize/2;return Math.round(T/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(N){if(!this._computedIsNeeded)return 0;let T=N-this._arrowSize,C=this._scrollPosition;return T<this._computedSliderPosition?C-=this._visibleSize:C+=this._visibleSize,C}getDesiredScrollPositionFromDelta(N){if(!this._computedIsNeeded)return 0;let T=this._computedSliderPosition+N;return Math.round(T/this._computedSliderRatio)}}var c=t(3046);class b extends r{constructor(N,T,C){let W=N.getScrollDimensions(),K=N.getCurrentScrollPosition();if(super({lazyRender:T.lazyRender,host:C,scrollbarState:new i(T.horizontalHasArrows?T.arrowSize:0,T.horizontal===2?0:T.horizontalScrollbarSize,T.vertical===2?0:T.verticalScrollbarSize,W.width,W.scrollWidth,K.scrollLeft),visibility:T.horizontal,extraScrollbarClassName:"horizontal",scrollable:N,scrollByPage:T.scrollByPage}),T.horizontalHasArrows){let j=(T.arrowSize-11)/2,F=(T.horizontalScrollbarSize-11)/2;this._createArrow({className:"scra",icon:c.l.scrollbarButtonLeft,top:F,left:j,bottom:void 0,right:void 0,bgWidth:T.arrowSize,bgHeight:T.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new I.q(null,1,0))}),this._createArrow({className:"scra",icon:c.l.scrollbarButtonRight,top:F,left:void 0,bottom:void 0,right:j,bgWidth:T.arrowSize,bgHeight:T.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new I.q(null,-1,0))})}this._createSlider(Math.floor((T.horizontalScrollbarSize-T.horizontalSliderSize)/2),0,void 0,T.horizontalSliderSize)}_updateSlider(N,T){this.slider.setWidth(N),this.slider.setLeft(T)}_renderDomNode(N,T){this.domNode.setWidth(N),this.domNode.setHeight(T),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(N){return this._shouldRender=this._onElementScrollSize(N.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(N.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(N.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(N,T){return N}_sliderPointerPosition(N){return N.pageX}_sliderOrthogonalPointerPosition(N){return N.pageY}_updateScrollbarSize(N){this.slider.setHeight(N)}writeScrollPosition(N,T){N.scrollLeft=T}updateOptions(N){this.updateScrollbarSize(N.horizontal===2?0:N.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(N.vertical===2?0:N.verticalScrollbarSize),this._visibilityController.setVisibility(N.horizontal),this._scrollByPage=N.scrollByPage}}class l extends r{constructor(N,T,C){let W=N.getScrollDimensions(),K=N.getCurrentScrollPosition();if(super({lazyRender:T.lazyRender,host:C,scrollbarState:new i(T.verticalHasArrows?T.arrowSize:0,T.vertical===2?0:T.verticalScrollbarSize,0,W.height,W.scrollHeight,K.scrollTop),visibility:T.vertical,extraScrollbarClassName:"vertical",scrollable:N,scrollByPage:T.scrollByPage}),T.verticalHasArrows){let j=(T.arrowSize-11)/2,F=(T.verticalScrollbarSize-11)/2;this._createArrow({className:"scra",icon:c.l.scrollbarButtonUp,top:j,left:F,bottom:void 0,right:void 0,bgWidth:T.verticalScrollbarSize,bgHeight:T.arrowSize,onActivate:()=>this._host.onMouseWheel(new I.q(null,0,1))}),this._createArrow({className:"scra",icon:c.l.scrollbarButtonDown,top:void 0,left:F,bottom:j,right:void 0,bgWidth:T.verticalScrollbarSize,bgHeight:T.arrowSize,onActivate:()=>this._host.onMouseWheel(new I.q(null,0,-1))})}this._createSlider(0,Math.floor((T.verticalScrollbarSize-T.verticalSliderSize)/2),T.verticalSliderSize,void 0)}_updateSlider(N,T){this.slider.setHeight(N),this.slider.setTop(T)}_renderDomNode(N,T){this.domNode.setWidth(T),this.domNode.setHeight(N),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(N){return this._shouldRender=this._onElementScrollSize(N.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(N.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(N.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(N,T){return T}_sliderPointerPosition(N){return N.pageY}_sliderOrthogonalPointerPosition(N){return N.pageX}_updateScrollbarSize(N){this.slider.setWidth(N)}writeScrollPosition(N,T){N.scrollTop=T}updateOptions(N){this.updateScrollbarSize(N.vertical===2?0:N.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(N.vertical),this._scrollByPage=N.scrollByPage}}var a=t(4669),w=t(6633);class E{constructor(N,T,C){this.timestamp=N,this.deltaX=T,this.deltaY=C,this.score=0}}class D{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let N=1,T=0,C=1,W=this._rear;for(;;){let K=W===this._front?N:Math.pow(2,-C);if(N-=K,T+=this._memory[W].score*K,W===this._front)break;W=(this._capacity+W-1)%this._capacity,C++}return T<=.5}acceptStandardWheelEvent(N){let T=window.devicePixelRatio/(0,m.getZoomFactor)();h.ED||h.IJ?this.accept(Date.now(),N.deltaX/T,N.deltaY/T):this.accept(Date.now(),N.deltaX,N.deltaY)}accept(N,T,C){let W=new E(N,T,C);W.score=this._computeScore(W),this._front===-1&&this._rear===-1?(this._memory[0]=W,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=W)}_computeScore(N){if(Math.abs(N.deltaX)>0&&Math.abs(N.deltaY)>0)return 1;let T=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],this._isAlmostInt(N.deltaX)&&this._isAlmostInt(N.deltaY)||(T+=.25),Math.min(Math.max(T,0),1)}_isAlmostInt(N){return Math.abs(Math.round(N)-N)<.01}}D.INSTANCE=new D;class L extends A.${get options(){return this._options}constructor(N,T,C){super(),this._onScroll=this._register(new a.Q5),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new a.Q5),N.style.overflow="hidden",this._options=function(K){let j={lazyRender:K.lazyRender!==void 0&&K.lazyRender,className:K.className!==void 0?K.className:"",useShadows:K.useShadows===void 0||K.useShadows,handleMouseWheel:K.handleMouseWheel===void 0||K.handleMouseWheel,flipAxes:K.flipAxes!==void 0&&K.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:K.consumeMouseWheelIfScrollbarIsNeeded!==void 0&&K.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:K.alwaysConsumeMouseWheel!==void 0&&K.alwaysConsumeMouseWheel,scrollYToX:K.scrollYToX!==void 0&&K.scrollYToX,mouseWheelScrollSensitivity:K.mouseWheelScrollSensitivity!==void 0?K.mouseWheelScrollSensitivity:1,fastScrollSensitivity:K.fastScrollSensitivity!==void 0?K.fastScrollSensitivity:5,scrollPredominantAxis:K.scrollPredominantAxis===void 0||K.scrollPredominantAxis,mouseWheelSmoothScroll:K.mouseWheelSmoothScroll===void 0||K.mouseWheelSmoothScroll,arrowSize:K.arrowSize!==void 0?K.arrowSize:11,listenOnDomNode:K.listenOnDomNode!==void 0?K.listenOnDomNode:null,horizontal:K.horizontal!==void 0?K.horizontal:1,horizontalScrollbarSize:K.horizontalScrollbarSize!==void 0?K.horizontalScrollbarSize:10,horizontalSliderSize:K.horizontalSliderSize!==void 0?K.horizontalSliderSize:0,horizontalHasArrows:K.horizontalHasArrows!==void 0&&K.horizontalHasArrows,vertical:K.vertical!==void 0?K.vertical:1,verticalScrollbarSize:K.verticalScrollbarSize!==void 0?K.verticalScrollbarSize:10,verticalHasArrows:K.verticalHasArrows!==void 0&&K.verticalHasArrows,verticalSliderSize:K.verticalSliderSize!==void 0?K.verticalSliderSize:0,scrollByPage:K.scrollByPage!==void 0&&K.scrollByPage};return j.horizontalSliderSize=K.horizontalSliderSize!==void 0?K.horizontalSliderSize:j.horizontalScrollbarSize,j.verticalSliderSize=K.verticalSliderSize!==void 0?K.verticalSliderSize:j.verticalScrollbarSize,h.dz&&(j.className+=" mac"),j}(T),this._scrollable=C,this._register(this._scrollable.onScroll(K=>{this._onWillScroll.fire(K),this._onDidScroll(K),this._onScroll.fire(K)}));let W={onMouseWheel:K=>this._onMouseWheel(K),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new l(this._scrollable,this._options,W)),this._horizontalScrollbar=this._register(new b(this._scrollable,this._options,W)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(N),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=(0,u.X)(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=(0,u.X)(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=(0,u.X)(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,K=>this._onMouseOver(K)),this.onmouseleave(this._listenOnDomNode,K=>this._onMouseLeave(K)),this._hideTimeout=this._register(new x._F),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=(0,d.B9)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(N){this._verticalScrollbar.delegatePointerDown(N)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(N){this._scrollable.setScrollDimensions(N,!1)}updateClassName(N){this._options.className=N,h.dz&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(N){N.handleMouseWheel!==void 0&&(this._options.handleMouseWheel=N.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),N.mouseWheelScrollSensitivity!==void 0&&(this._options.mouseWheelScrollSensitivity=N.mouseWheelScrollSensitivity),N.fastScrollSensitivity!==void 0&&(this._options.fastScrollSensitivity=N.fastScrollSensitivity),N.scrollPredominantAxis!==void 0&&(this._options.scrollPredominantAxis=N.scrollPredominantAxis),N.horizontal!==void 0&&(this._options.horizontal=N.horizontal),N.vertical!==void 0&&(this._options.vertical=N.vertical),N.horizontalScrollbarSize!==void 0&&(this._options.horizontalScrollbarSize=N.horizontalScrollbarSize),N.verticalScrollbarSize!==void 0&&(this._options.verticalScrollbarSize=N.verticalScrollbarSize),N.scrollByPage!==void 0&&(this._options.scrollByPage=N.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(N){this._onMouseWheel(new I.q(N))}_setListeningToMouseWheel(N){if(this._mouseWheelToDispose.length>0!==N&&(this._mouseWheelToDispose=(0,d.B9)(this._mouseWheelToDispose),N)){let T=C=>{this._onMouseWheel(new I.q(C))};this._mouseWheelToDispose.push(B.nm(this._listenOnDomNode,B.tw.MOUSE_WHEEL,T,{passive:!1}))}}_onMouseWheel(N){let T=D.INSTANCE;T.acceptStandardWheelEvent(N);let C=!1;if(N.deltaY||N.deltaX){let K=N.deltaY*this._options.mouseWheelScrollSensitivity,j=N.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(K)>=Math.abs(j)?j=0:K=0),this._options.flipAxes&&([K,j]=[j,K]);let F=!h.dz&&N.browserEvent&&N.browserEvent.shiftKey;!this._options.scrollYToX&&!F||j||(j=K,K=0),N.browserEvent&&N.browserEvent.altKey&&(j*=this._options.fastScrollSensitivity,K*=this._options.fastScrollSensitivity);let H=this._scrollable.getFutureScrollPosition(),z={};if(K){let J=50*K,oe=H.scrollTop-(J<0?Math.floor(J):Math.ceil(J));this._verticalScrollbar.writeScrollPosition(z,oe)}if(j){let J=50*j,oe=H.scrollLeft-(J<0?Math.floor(J):Math.ceil(J));this._horizontalScrollbar.writeScrollPosition(z,oe)}z=this._scrollable.validateScrollPosition(z),(H.scrollLeft!==z.scrollLeft||H.scrollTop!==z.scrollTop)&&(this._options.mouseWheelSmoothScroll&&T.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(z):this._scrollable.setScrollPositionNow(z),C=!0)}let W=C;!W&&this._options.alwaysConsumeMouseWheel&&(W=!0),!W&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(W=!0),W&&(N.preventDefault(),N.stopPropagation())}_onDidScroll(N){this._shouldRender=this._horizontalScrollbar.onDidScroll(N)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(N)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let N=this._scrollable.getCurrentScrollPosition(),T=N.scrollTop>0,C=N.scrollLeft>0,W=C?" left":"",K=T?" top":"",j=C||T?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${W}`),this._topShadowDomNode.setClassName(`shadow${K}`),this._topLeftShadowDomNode.setClassName(`shadow${j}${K}${W}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(N){this._mouseIsOver=!1,this._hide()}_onMouseOver(N){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet(()=>this._hide(),500)}}class k extends L{constructor(N,T){(T=T||{}).mouseWheelSmoothScroll=!1;let C=new w.Rm({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:W=>B.jL(W)});super(N,T,C),this._register(C)}setScrollPosition(N){this._scrollable.setScrollPositionNow(N)}}class R extends L{constructor(N,T,C){super(N,T,C)}setScrollPosition(N){N.reuseAnimation?this._scrollable.setScrollPositionSmooth(N,N.reuseAnimation):this._scrollable.setScrollPositionNow(N)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class O extends L{constructor(N,T){(T=T||{}).mouseWheelSmoothScroll=!1;let C=new w.Rm({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:W=>B.jL(W)});super(N,T,C),this._register(C),this._element=N,this.onScroll(W=>{W.scrollTopChanged&&(this._element.scrollTop=W.scrollTop),W.scrollLeftChanged&&(this._element.scrollLeft=W.scrollLeft)}),this.scanDomNode()}setScrollPosition(N){this._scrollable.setScrollPositionNow(N)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}},3937:(ut,Ie,t)=>{"use strict";t.d(Ie,{M:()=>l,z:()=>a});var m=t(5321),B=t(4850),u=t(3098),I=t(9802),_=t(9488),A=t(1264),x=t(4669),v=t(5976),f=t(9870),d=t(6633),o=t(8401);let h={separatorBorder:A.Il.transparent};class r{set size(E){this._size=E}get size(){return this._size}get visible(){return this._cachedVisibleSize===void 0}setVisible(E,D){var L,k;E!==this.visible&&(E?(this.size=(0,f.uZ)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof D=="number"?D:this.size,this.size=0),this.container.classList.toggle("visible",E),(k=(L=this.view).setVisible)===null||k===void 0||k.call(L,E))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var E;return(E=this.view.proportionalLayout)===null||E===void 0||E}get snap(){return!!this.view.snap}set enabled(E){this.container.style.pointerEvents=E?"":"none"}constructor(E,D,L,k){this.container=E,this.view=D,this.disposable=k,this._cachedVisibleSize=void 0,typeof L=="number"?(this._size=L,this._cachedVisibleSize=void 0,E.classList.add("visible")):(this._size=0,this._cachedVisibleSize=L.cachedVisibleSize)}layout(E,D){this.layoutContainer(E),this.view.layout(this.size,E,D)}dispose(){return this.disposable.dispose(),this.view}}class i extends r{layoutContainer(E){this.container.style.top=`${E}px`,this.container.style.height=`${this.size}px`}}class c extends r{layoutContainer(E){this.container.style.left=`${E}px`,this.container.style.width=`${this.size}px`}}var b,l;(function(w){w[w.Idle=0]="Idle",w[w.Busy=1]="Busy"})(b||(b={})),function(w){w.Distribute={type:"distribute"},w.Split=function(E){return{type:"split",index:E}},w.Invisible=function(E){return{type:"invisible",cachedVisibleSize:E}}}(l||(l={}));class a extends v.JT{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(E){for(let D of this.sashItems)D.sash.orthogonalStartSash=E;this._orthogonalStartSash=E}set orthogonalEndSash(E){for(let D of this.sashItems)D.sash.orthogonalEndSash=E;this._orthogonalEndSash=E}set startSnappingEnabled(E){this._startSnappingEnabled!==E&&(this._startSnappingEnabled=E,this.updateSashEnablement())}set endSnappingEnabled(E){this._endSnappingEnabled!==E&&(this._endSnappingEnabled=E,this.updateSashEnablement())}constructor(E,D={}){var L,k,R,O,$;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=b.Idle,this._onDidSashChange=this._register(new x.Q5),this._onDidSashReset=this._register(new x.Q5),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(L=D.orientation)!==null&&L!==void 0?L:0,this.inverseAltBehavior=(k=D.inverseAltBehavior)!==null&&k!==void 0&&k,this.proportionalLayout=(R=D.proportionalLayout)===null||R===void 0||R,this.getSashOrthogonalSize=D.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),E.appendChild(this.el),this.sashContainer=(0,m.R3)(this.el,(0,m.$)(".sash-container")),this.viewContainer=(0,m.$)(".split-view-container"),this.scrollable=new d.Rm({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:m.jL}),this.scrollableElement=this._register(new I.$Z(this.viewContainer,{vertical:this.orientation===0?(O=D.scrollbarVisibility)!==null&&O!==void 0?O:1:2,horizontal:this.orientation===1?($=D.scrollbarVisibility)!==null&&$!==void 0?$:1:2},this.scrollable));let N=this._register(new B.Y(this.viewContainer,"scroll")).event;this._register(N(T=>{let C=this.scrollableElement.getScrollPosition(),W=Math.abs(this.viewContainer.scrollLeft-C.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,K=Math.abs(this.viewContainer.scrollTop-C.scrollTop)<=1?void 0:this.viewContainer.scrollTop;W===void 0&&K===void 0||this.scrollableElement.setScrollPosition({scrollLeft:W,scrollTop:K})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(T=>{T.scrollTopChanged&&(this.viewContainer.scrollTop=T.scrollTop),T.scrollLeftChanged&&(this.viewContainer.scrollLeft=T.scrollLeft)})),(0,m.R3)(this.el,this.scrollableElement.getDomNode()),this.style(D.styles||h),D.descriptor&&(this.size=D.descriptor.size,D.descriptor.views.forEach((T,C)=>{let W=o.o8(T.visible)||T.visible?T.size:{type:"invisible",cachedVisibleSize:T.size},K=T.view;this.doAddView(K,W,C,!0)}),this.contentSize=this.viewItems.reduce((T,C)=>T+C.size,0),this.saveProportions())}style(E){E.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",E.separatorBorder.toString()))}addView(E,D,L=this.viewItems.length,k){this.doAddView(E,D,L,k)}layout(E,D){let L=Math.max(this.size,this.contentSize);if(this.size=E,this.layoutContext=D,this.proportions){let k=0;for(let R=0;R<this.viewItems.length;R++){let O=this.viewItems[R],$=this.proportions[R];typeof $=="number"?k+=$:E-=O.size}for(let R=0;R<this.viewItems.length;R++){let O=this.viewItems[R],$=this.proportions[R];typeof $=="number"&&(O.size=(0,f.uZ)(Math.round($*E/k),O.minimumSize,O.maximumSize))}}else{let k=(0,_.w6)(this.viewItems.length),R=k.filter($=>this.viewItems[$].priority===1),O=k.filter($=>this.viewItems[$].priority===2);this.resize(this.viewItems.length-1,E-L,void 0,R,O)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(E=>E.proportionalLayout?E.size/this.contentSize:void 0))}onSashStart({sash:E,start:D,alt:L}){for(let $ of this.viewItems)$.enabled=!1;let k=this.sashItems.findIndex($=>$.sash===E),R=(0,v.F8)((0,m.nm)(document.body,"keydown",$=>O(this.sashDragState.current,$.altKey)),(0,m.nm)(document.body,"keyup",()=>O(this.sashDragState.current,!1))),O=($,N)=>{let T=this.viewItems.map(F=>F.size),C,W,K=Number.NEGATIVE_INFINITY,j=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(N=!N),N)if(k===this.sashItems.length-1){let F=this.viewItems[k];K=(F.minimumSize-F.size)/2,j=(F.maximumSize-F.size)/2}else{let F=this.viewItems[k+1];K=(F.size-F.maximumSize)/2,j=(F.size-F.minimumSize)/2}if(!N){let F=(0,_.w6)(k,-1),H=(0,_.w6)(k+1,this.viewItems.length),z=F.reduce((ie,se)=>ie+(this.viewItems[se].minimumSize-T[se]),0),J=F.reduce((ie,se)=>ie+(this.viewItems[se].viewMaximumSize-T[se]),0),oe=H.length===0?Number.POSITIVE_INFINITY:H.reduce((ie,se)=>ie+(T[se]-this.viewItems[se].minimumSize),0),fe=H.length===0?Number.NEGATIVE_INFINITY:H.reduce((ie,se)=>ie+(T[se]-this.viewItems[se].viewMaximumSize),0),q=Math.max(z,fe),p=Math.min(oe,J),re=this.findFirstSnapIndex(F),ne=this.findFirstSnapIndex(H);if(typeof re=="number"){let ie=this.viewItems[re],se=Math.floor(ie.viewMinimumSize/2);C={index:re,limitDelta:ie.visible?q-se:q+se,size:ie.size}}if(typeof ne=="number"){let ie=this.viewItems[ne],se=Math.floor(ie.viewMinimumSize/2);W={index:ne,limitDelta:ie.visible?p+se:p-se,size:ie.size}}}this.sashDragState={start:$,current:$,index:k,sizes:T,minDelta:K,maxDelta:j,alt:N,snapBefore:C,snapAfter:W,disposable:R}};O(D,L)}onSashChange({current:E}){let{index:D,start:L,sizes:k,alt:R,minDelta:O,maxDelta:$,snapBefore:N,snapAfter:T}=this.sashDragState;this.sashDragState.current=E;let C=E-L,W=this.resize(D,C,k,void 0,void 0,O,$,N,T);if(R){let K=D===this.sashItems.length-1,j=this.viewItems.map(fe=>fe.size),F=K?D:D+1,H=this.viewItems[F],z=H.size-H.maximumSize,J=H.size-H.minimumSize,oe=K?D-1:D+1;this.resize(oe,-W,j,void 0,void 0,z,J)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(E){this._onDidSashChange.fire(E),this.sashDragState.disposable.dispose(),this.saveProportions();for(let D of this.viewItems)D.enabled=!0}onViewChange(E,D){let L=this.viewItems.indexOf(E);L<0||L>=this.viewItems.length||(D=typeof D=="number"?D:E.size,D=(0,f.uZ)(D,E.minimumSize,E.maximumSize),this.inverseAltBehavior&&L>0?(this.resize(L-1,Math.floor((E.size-D)/2)),this.distributeEmptySpace(),this.layoutViews()):(E.size=D,this.relayout([L],void 0)))}resizeView(E,D){if(this.state!==b.Idle)throw new Error("Cant modify splitview");if(this.state=b.Busy,E<0||E>=this.viewItems.length)return;let L=(0,_.w6)(this.viewItems.length).filter($=>$!==E),k=[...L.filter($=>this.viewItems[$].priority===1),E],R=L.filter($=>this.viewItems[$].priority===2),O=this.viewItems[E];D=Math.round(D),D=(0,f.uZ)(D,O.minimumSize,Math.min(O.maximumSize,this.size)),O.size=D,this.relayout(k,R),this.state=b.Idle}distributeViewSizes(){let E=[],D=0;for(let $ of this.viewItems)$.maximumSize-$.minimumSize>0&&(E.push($),D+=$.size);let L=Math.floor(D/E.length);for(let $ of E)$.size=(0,f.uZ)(L,$.minimumSize,$.maximumSize);let k=(0,_.w6)(this.viewItems.length),R=k.filter($=>this.viewItems[$].priority===1),O=k.filter($=>this.viewItems[$].priority===2);this.relayout(R,O)}getViewSize(E){return E<0||E>=this.viewItems.length?-1:this.viewItems[E].size}doAddView(E,D,L=this.viewItems.length,k){if(this.state!==b.Idle)throw new Error("Cant modify splitview");this.state=b.Busy;let R=(0,m.$)(".split-view-view");L===this.viewItems.length?this.viewContainer.appendChild(R):this.viewContainer.insertBefore(R,this.viewContainer.children.item(L));let O=E.onDidChange(K=>this.onViewChange(C,K)),$=(0,v.OF)(()=>this.viewContainer.removeChild(R)),N=(0,v.F8)(O,$),T;T=typeof D=="number"?D:D.type==="split"?this.getViewSize(D.index)/2:D.type==="invisible"?{cachedVisibleSize:D.cachedVisibleSize}:E.minimumSize;let C=this.orientation===0?new i(R,E,T,N):new c(R,E,T,N);if(this.viewItems.splice(L,0,C),this.viewItems.length>1){let K={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},j=this.orientation===0?new u.g(this.sashContainer,{getHorizontalSashTop:re=>this.getSashPosition(re),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},K),{orientation:1})):new u.g(this.sashContainer,{getVerticalSashLeft:re=>this.getSashPosition(re),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},K),{orientation:0})),F=this.orientation===0?re=>({sash:j,start:re.startY,current:re.currentY,alt:re.altKey}):re=>({sash:j,start:re.startX,current:re.currentX,alt:re.altKey}),H=x.ju.map(j.onDidStart,F)(this.onSashStart,this),z=x.ju.map(j.onDidChange,F)(this.onSashChange,this),J=x.ju.map(j.onDidEnd,()=>this.sashItems.findIndex(re=>re.sash===j)),oe=J(this.onSashEnd,this),fe=j.onDidReset(()=>{let re=this.sashItems.findIndex(be=>be.sash===j),ne=(0,_.w6)(re,-1),ie=(0,_.w6)(re+1,this.viewItems.length),se=this.findFirstSnapIndex(ne),ce=this.findFirstSnapIndex(ie);(typeof se!="number"||this.viewItems[se].visible)&&(typeof ce!="number"||this.viewItems[ce].visible)&&this._onDidSashReset.fire(re)}),q=(0,v.F8)(H,z,oe,fe,j),p={sash:j,disposable:q};this.sashItems.splice(L-1,0,p)}let W;R.appendChild(E.element),typeof D!="number"&&D.type==="split"&&(W=[D.index]),k||this.relayout([L],W),this.state=b.Idle,k||typeof D=="number"||D.type!=="distribute"||this.distributeViewSizes()}relayout(E,D){let L=this.viewItems.reduce((k,R)=>k+R.size,0);this.resize(this.viewItems.length-1,this.size-L,void 0,E,D),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(E,D,L=this.viewItems.map(C=>C.size),k,R,O=Number.NEGATIVE_INFINITY,$=Number.POSITIVE_INFINITY,N,T){if(E<0||E>=this.viewItems.length)return 0;let C=(0,_.w6)(E,-1),W=(0,_.w6)(E+1,this.viewItems.length);if(R)for(let ne of R)(0,_.zI)(C,ne),(0,_.zI)(W,ne);if(k)for(let ne of k)(0,_.al)(C,ne),(0,_.al)(W,ne);let K=C.map(ne=>this.viewItems[ne]),j=C.map(ne=>L[ne]),F=W.map(ne=>this.viewItems[ne]),H=W.map(ne=>L[ne]),z=C.reduce((ne,ie)=>ne+(this.viewItems[ie].minimumSize-L[ie]),0),J=C.reduce((ne,ie)=>ne+(this.viewItems[ie].maximumSize-L[ie]),0),oe=W.length===0?Number.POSITIVE_INFINITY:W.reduce((ne,ie)=>ne+(L[ie]-this.viewItems[ie].minimumSize),0),fe=W.length===0?Number.NEGATIVE_INFINITY:W.reduce((ne,ie)=>ne+(L[ie]-this.viewItems[ie].maximumSize),0),q=Math.max(z,fe,O),p=Math.min(oe,J,$),re=!1;if(N){let ne=this.viewItems[N.index],ie=D>=N.limitDelta;re=ie!==ne.visible,ne.setVisible(ie,N.size)}if(!re&&T){let ne=this.viewItems[T.index],ie=D<T.limitDelta;re=ie!==ne.visible,ne.setVisible(ie,T.size)}if(re)return this.resize(E,D,L,k,R,O,$);for(let ne=0,ie=D=(0,f.uZ)(D,q,p);ne<K.length;ne++){let se=K[ne],ce=(0,f.uZ)(j[ne]+ie,se.minimumSize,se.maximumSize);ie-=ce-j[ne],se.size=ce}for(let ne=0,ie=D;ne<F.length;ne++){let se=F[ne],ce=(0,f.uZ)(H[ne]-ie,se.minimumSize,se.maximumSize);ie+=ce-H[ne],se.size=ce}return D}distributeEmptySpace(E){let D=this.viewItems.reduce(($,N)=>$+N.size,0),L=this.size-D,k=(0,_.w6)(this.viewItems.length-1,-1),R=k.filter($=>this.viewItems[$].priority===1),O=k.filter($=>this.viewItems[$].priority===2);for(let $ of O)(0,_.zI)(k,$);for(let $ of R)(0,_.al)(k,$);typeof E=="number"&&(0,_.al)(k,E);for(let $=0;L!==0&&$<k.length;$++){let N=this.viewItems[k[$]],T=(0,f.uZ)(N.size+L,N.minimumSize,N.maximumSize);L-=T-N.size,N.size=T}}layoutViews(){this.contentSize=this.viewItems.reduce((D,L)=>D+L.size,0);let E=0;for(let D of this.viewItems)D.layout(E,this.layoutContext),E+=D.size;this.sashItems.forEach(D=>D.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let E=!1,D=this.viewItems.map(N=>E=N.size-N.minimumSize>0||E);E=!1;let L=this.viewItems.map(N=>E=N.maximumSize-N.size>0||E),k=[...this.viewItems].reverse();E=!1;let R=k.map(N=>E=N.size-N.minimumSize>0||E).reverse();E=!1;let O=k.map(N=>E=N.maximumSize-N.size>0||E).reverse(),$=0;for(let N=0;N<this.sashItems.length;N++){let{sash:T}=this.sashItems[N];$+=this.viewItems[N].size;let C=!(D[N]&&O[N+1]),W=!(L[N]&&R[N+1]);if(C&&W){let K=(0,_.w6)(N,-1),j=(0,_.w6)(N+1,this.viewItems.length),F=this.findFirstSnapIndex(K),H=this.findFirstSnapIndex(j),z=typeof F=="number"&&!this.viewItems[F].visible,J=typeof H=="number"&&!this.viewItems[H].visible;z&&R[N]&&($>0||this.startSnappingEnabled)?T.state=1:J&&D[N]&&($<this.contentSize||this.endSnappingEnabled)?T.state=2:T.state=0}else T.state=C&&!W?1:!C&&W?2:3}}getSashPosition(E){let D=0;for(let L=0;L<this.sashItems.length;L++)if(D+=this.viewItems[L].size,this.sashItems[L].sash===E)return D;return 0}findFirstSnapIndex(E){for(let D of E){let L=this.viewItems[D];if(L.visible&&L.snap)return D}for(let D of E){let L=this.viewItems[D];if(L.visible&&L.maximumSize-L.minimumSize>0)return;if(!L.visible&&L.snap)return D}}dispose(){var E;(E=this.sashDragState)===null||E===void 0||E.disposable.dispose(),(0,v.B9)(this.viewItems),this.viewItems=[],this.sashItems.forEach(D=>D.disposable.dispose()),this.sashItems=[],super.dispose()}}},2900:(ut,Ie,t)=>{"use strict";t.d(Ie,{D:()=>I,Z:()=>_});var m=t(3794),B=t(5670),u=t(4669);let I={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class _ extends m.${constructor(x){super(),this._onChange=this._register(new u.Q5),this.onChange=this._onChange.event,this._onKeyDown=this._register(new u.Q5),this.onKeyDown=this._onKeyDown.event,this._opts=x,this._checked=this._opts.isChecked;let v=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,v.push(...B.k.asClassNameArray(this._icon))),this._opts.actionClassName&&v.push(...this._opts.actionClassName.split(" ")),this._checked&&v.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...v),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,f=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),f.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,f=>{if(f.keyCode===10||f.keyCode===3)return this.checked=!this._checked,this._onChange.fire(!0),f.preventDefault(),void f.stopPropagation();this._onKeyDown.fire(f)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(x){this._checked=x,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},3794:(ut,Ie,t)=>{"use strict";t.d(Ie,{$:()=>A});var m=t(5321),B=t(9069),u=t(7448),I=t(553),_=t(5976);class A extends _.JT{onclick(v,f){this._register(m.nm(v,m.tw.CLICK,d=>f(new u.n(d))))}onmousedown(v,f){this._register(m.nm(v,m.tw.MOUSE_DOWN,d=>f(new u.n(d))))}onmouseover(v,f){this._register(m.nm(v,m.tw.MOUSE_OVER,d=>f(new u.n(d))))}onmouseleave(v,f){this._register(m.nm(v,m.tw.MOUSE_LEAVE,d=>f(new u.n(d))))}onkeydown(v,f){this._register(m.nm(v,m.tw.KEY_DOWN,d=>f(new B.y(d))))}onkeyup(v,f){this._register(m.nm(v,m.tw.KEY_UP,d=>f(new B.y(d))))}oninput(v,f){this._register(m.nm(v,m.tw.INPUT,f))}onblur(v,f){this._register(m.nm(v,m.tw.BLUR,f))}onfocus(v,f){this._register(m.nm(v,m.tw.FOCUS,f))}ignoreGesture(v){return I.o.ignoreTarget(v)}}},4741:(ut,Ie,t)=>{"use strict";t.d(Ie,{Wi:()=>A,Z0:()=>x,aU:()=>_,eZ:()=>f,wY:()=>v,xw:()=>d});var m=t(4669),B=t(5976),u=t(3580),I=function(o,h,r,i){return new(r||(r=Promise))(function(c,b){function l(E){try{w(i.next(E))}catch(D){b(D)}}function a(E){try{w(i.throw(E))}catch(D){b(D)}}function w(E){var D;E.done?c(E.value):(D=E.value,D instanceof r?D:new r(function(L){L(D)})).then(l,a)}w((i=i.apply(o,h||[])).next())})};class _ extends B.JT{constructor(h,r="",i="",c=!0,b){super(),this._onDidChange=this._register(new m.Q5),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=h,this._label=r,this._cssClass=i,this._enabled=c,this._actionCallback=b}get id(){return this._id}get label(){return this._label}set label(h){this._setLabel(h)}_setLabel(h){this._label!==h&&(this._label=h,this._onDidChange.fire({label:h}))}get tooltip(){return this._tooltip||""}set tooltip(h){this._setTooltip(h)}_setTooltip(h){this._tooltip!==h&&(this._tooltip=h,this._onDidChange.fire({tooltip:h}))}get class(){return this._cssClass}set class(h){this._setClass(h)}_setClass(h){this._cssClass!==h&&(this._cssClass=h,this._onDidChange.fire({class:h}))}get enabled(){return this._enabled}set enabled(h){this._setEnabled(h)}_setEnabled(h){this._enabled!==h&&(this._enabled=h,this._onDidChange.fire({enabled:h}))}get checked(){return this._checked}set checked(h){this._setChecked(h)}_setChecked(h){this._checked!==h&&(this._checked=h,this._onDidChange.fire({checked:h}))}run(h,r){return I(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(h))})}}class A extends B.JT{constructor(){super(...arguments),this._onWillRun=this._register(new m.Q5),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new m.Q5),this.onDidRun=this._onDidRun.event}run(h,r){return I(this,void 0,void 0,function*(){if(!h.enabled)return;let i;this._onWillRun.fire({action:h});try{yield this.runAction(h,r)}catch(c){i=c}this._onDidRun.fire({action:h,error:i})})}runAction(h,r){return I(this,void 0,void 0,function*(){yield h.run(r)})}}class x{constructor(){this.id=x.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...h){let r=[];for(let i of h)i.length&&(r=r.length?[...r,new x,...i]:i);return r}run(){return I(this,void 0,void 0,function*(){})}}x.ID="vs.actions.separator";class v{get actions(){return this._actions}constructor(h,r,i,c){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=h,this.label=r,this.class=c,this._actions=i}run(){return I(this,void 0,void 0,function*(){})}}class f extends _{constructor(){super(f.ID,u.NC("submenu.empty","(empty)"),void 0,!1)}}function d(o){var h,r;return{id:o.id,label:o.label,class:void 0,enabled:(h=o.enabled)===null||h===void 0||h,checked:(r=o.checked)!==null&&r!==void 0&&r,run:()=>I(this,void 0,void 0,function*(){return o.run()}),tooltip:o.label}}f.ID="vs.actions.empty"},9488:(ut,Ie,t)=>{"use strict";function m(F,H=0){return F[F.length-(1+H)]}function B(F){if(F.length===0)throw new Error("Invalid tail call");return[F.slice(0,F.length-1),F[F.length-1]]}function u(F,H,z=(J,oe)=>J===oe){if(F===H)return!0;if(!F||!H||F.length!==H.length)return!1;for(let J=0,oe=F.length;J<oe;J++)if(!z(F[J],H[J]))return!1;return!0}function I(F,H){let z=F.length-1;H<z&&(F[H]=F[z]),F.pop()}function _(F,H,z){return function(J,oe){let fe=0,q=J-1;for(;fe<=q;){let p=(fe+q)/2|0,re=z(F[p],H);if(re<0)fe=p+1;else{if(!(re>0))return p;q=p-1}}return-(fe+1)}(F.length)}function A(F,H){let z=0,J=F.length;if(J===0)return 0;for(;z<J;){let oe=Math.floor((z+J)/2);H(F[oe])?J=oe:z=oe+1}return z}function x(F,H,z){if((F|=0)>=H.length)throw new TypeError("invalid index");let J=H[Math.floor(H.length*Math.random())],oe=[],fe=[],q=[];for(let p of H){let re=z(p,J);re<0?oe.push(p):re>0?fe.push(p):q.push(p)}return F<oe.length?x(F,oe,z):F<oe.length+q.length?q[0]:x(F-(oe.length+q.length),fe,z)}function v(F,H){let z=[],J;for(let oe of F.slice(0).sort(H))J&&H(J[0],oe)===0?J.push(oe):(J=[oe],z.push(J));return z}function f(F){return F.filter(H=>!!H)}function d(F){let H=0;for(let z=0;z<F.length;z++)F[z]&&(F[H]=F[z],H+=1);F.length=H}function o(F){return!Array.isArray(F)||F.length===0}function h(F){return Array.isArray(F)&&F.length>0}function r(F,H=z=>z){let z=new Set;return F.filter(J=>{let oe=H(J);return!z.has(oe)&&(z.add(oe),!0)})}function i(F,H){let z=function(J,oe){for(let fe=J.length-1;fe>=0;fe--)if(oe(J[fe]))return fe;return-1}(F,H);if(z!==-1)return F[z]}function c(F,H){return F.length>0?F[0]:H}function b(F,H){let z=typeof H=="number"?F:0;typeof H=="number"?z=F:(z=0,H=F);let J=[];if(z<=H)for(let oe=z;oe<H;oe++)J.push(oe);else for(let oe=z;oe>H;oe--)J.push(oe);return J}function l(F,H,z){let J=F.slice(0,H),oe=F.slice(H);return J.concat(z,oe)}function a(F,H){let z=F.indexOf(H);z>-1&&(F.splice(z,1),F.unshift(H))}function w(F,H){let z=F.indexOf(H);z>-1&&(F.splice(z,1),F.push(H))}function E(F,H){for(let z of H)F.push(z)}function D(F){return Array.isArray(F)?F:[F]}function L(F,H){for(let z of F){let J=H(z);if(J!==void 0)return J}}function k(F,H,z,J){let oe=R(F,H),fe=F.splice(oe,z);return function(q,p,re){let ne=R(q,p),ie=q.length,se=re.length;q.length=ie+se;for(let ce=ie-1;ce>=ne;ce--)q[ce+se]=q[ce];for(let ce=0;ce<se;ce++)q[ce+ne]=re[ce]}(F,oe,J),fe}function R(F,H){return H<0?Math.max(H+F.length,0):Math.min(H,F.length)}var O;function $(F,H){return(z,J)=>H(F(z),F(J))}t.d(Ie,{Dc:()=>T,EB:()=>r,Gb:()=>m,H9:()=>K,HW:()=>x,JH:()=>B,LS:()=>I,Of:()=>h,Rs:()=>d,VJ:()=>W,W$:()=>j,XY:()=>o,Xh:()=>c,Zv:()=>l,_2:()=>D,al:()=>w,bX:()=>L,dF:()=>i,db:()=>k,fS:()=>u,fv:()=>N,jV:()=>C,kX:()=>f,lG:()=>A,ry:()=>_,tT:()=>$,vA:()=>E,vM:()=>v,w6:()=>b,zI:()=>a}),function(F){F.isLessThan=function(H){return H<0},F.isGreaterThan=function(H){return H>0},F.isNeitherLessOrGreaterThan=function(H){return H===0},F.greaterThan=1,F.lessThan=-1,F.neitherLessOrGreaterThan=0}(O||(O={}));let N=(F,H)=>F-H;function T(F,H){if(F.length===0)return;let z=F[0];for(let J=1;J<F.length;J++){let oe=F[J];H(oe,z)>0&&(z=oe)}return z}function C(F,H){if(F.length===0)return;let z=F[0];for(let J=1;J<F.length;J++){let oe=F[J];H(oe,z)>=0&&(z=oe)}return z}function W(F,H){return T(F,(z,J)=>-H(z,J))}class K{constructor(H){this.items=H,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(H){let z=this.firstIdx;for(;z<this.items.length&&H(this.items[z]);)z++;let J=z===this.firstIdx?null:this.items.slice(this.firstIdx,z);return this.firstIdx=z,J}takeFromEndWhile(H){let z=this.lastIdx;for(;z>=0&&H(this.items[z]);)z--;let J=z===this.lastIdx?null:this.items.slice(z+1,this.lastIdx+1);return this.lastIdx=z,J}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){let H=this.items[this.firstIdx];return this.firstIdx++,H}takeCount(H){let z=this.items.slice(this.firstIdx,this.firstIdx+H);return this.firstIdx+=H,z}}class j{constructor(H){this.iterate=H}toArray(){let H=[];return this.iterate(z=>(H.push(z),!0)),H}filter(H){return new j(z=>this.iterate(J=>!H(J)||z(J)))}map(H){return new j(z=>this.iterate(J=>z(H(J))))}findLast(H){let z;return this.iterate(J=>(H(J)&&(z=J),!0)),z}findLastMaxBy(H){let z,J=!0;return this.iterate(oe=>((J||O.isGreaterThan(H(oe,z)))&&(J=!1,z=oe),!0)),z}}j.empty=new j(F=>{})},5146:(ut,Ie,t)=>{"use strict";t.d(Ie,{DM:()=>_,eZ:()=>I,ok:()=>B,vE:()=>u});var m=t(7301);function B(A,x){if(!A)throw new Error(x?`Assertion failed (${x})`:"Assertion Failed")}function u(A,x="Unreachable"){throw new Error(x)}function I(A){A()||(A(),(0,m.dL)(new m.he("Assertion Failed")))}function _(A,x){let v=0;for(;v<A.length-1;){if(!x(A[v],A[v+1]))return!1;v++}return!0}},5393:(ut,Ie,t)=>{"use strict";t.d(Ie,{Aq:()=>O,CR:()=>k,J8:()=>f,PG:()=>d,Ps:()=>l,To:()=>D,Ue:()=>L,Vg:()=>b,Vs:()=>c,_F:()=>a,eP:()=>o,jT:()=>R,pY:()=>E,rH:()=>i,vp:()=>r,zS:()=>N,zh:()=>w});var m=t(1050),B=t(7301),u=t(4669),I=t(5976),_=t(1432),A=t(5635),x=function(T,C,W,K){return new(W||(W=Promise))(function(j,F){function H(oe){try{J(K.next(oe))}catch(fe){F(fe)}}function z(oe){try{J(K.throw(oe))}catch(fe){F(fe)}}function J(oe){var fe;oe.done?j(oe.value):(fe=oe.value,fe instanceof W?fe:new W(function(q){q(fe)})).then(H,z)}J((K=K.apply(T,C||[])).next())})},v=function(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C,W=T[Symbol.asyncIterator];return W?W.call(T):(T=typeof __values=="function"?__values(T):T[Symbol.iterator](),C={},K("next"),K("throw"),K("return"),C[Symbol.asyncIterator]=function(){return this},C);function K(j){C[j]=T[j]&&function(F){return new Promise(function(H,z){(function(J,oe,fe,q){Promise.resolve(q).then(function(p){J({value:p,done:fe})},oe)})(H,z,(F=T[j](F)).done,F.value)})}}};function f(T){return!!T&&typeof T.then=="function"}function d(T){let C=new m.A,W=T(C.token),K=new Promise((j,F)=>{let H=C.token.onCancellationRequested(()=>{H.dispose(),C.dispose(),F(new B.FU)});Promise.resolve(W).then(z=>{H.dispose(),C.dispose(),j(z)},z=>{H.dispose(),C.dispose(),F(z)})});return new class{cancel(){C.cancel()}then(j,F){return K.then(j,F)}catch(j){return this.then(void 0,j)}finally(j){return K.finally(j)}}}function o(T,C,W){return new Promise((K,j)=>{let F=C.onCancellationRequested(()=>{F.dispose(),K(W)});T.then(K,j).finally(()=>F.dispose())})}class h{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(C){if(this.activePromise){if(this.queuedPromiseFactory=C,!this.queuedPromise){let W=()=>{this.queuedPromise=null;let K=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,K};this.queuedPromise=new Promise(K=>{this.activePromise.then(W,W).then(K)})}return new Promise((W,K)=>{this.queuedPromise.then(W,K)})}return this.activePromise=C(),new Promise((W,K)=>{this.activePromise.then(j=>{this.activePromise=null,W(j)},j=>{this.activePromise=null,K(j)})})}}class r{constructor(C){this.defaultDelay=C,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(C,W=this.defaultDelay){this.task=C,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((j,F)=>{this.doResolve=j,this.doReject=F}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let j=this.task;return this.task=null,j()}}));let K=()=>{var j;this.deferred=null,(j=this.doResolve)===null||j===void 0||j.call(this,null)};return this.deferred=W===A.n?(j=>{let F=!0;return queueMicrotask(()=>{F&&(F=!1,j())}),{isTriggered:()=>F,dispose:()=>{F=!1}}})(K):((j,F)=>{let H=!0,z=setTimeout(()=>{H=!1,F()},j);return{isTriggered:()=>H,dispose:()=>{clearTimeout(z),H=!1}}})(W,K),this.completionPromise}isTriggered(){var C;return!!(!((C=this.deferred)===null||C===void 0)&&C.isTriggered())}cancel(){var C;this.cancelTimeout(),this.completionPromise&&((C=this.doReject)===null||C===void 0||C.call(this,new B.FU),this.completionPromise=null)}cancelTimeout(){var C;(C=this.deferred)===null||C===void 0||C.dispose(),this.deferred=null}dispose(){this.cancel()}}class i{constructor(C){this.delayer=new r(C),this.throttler=new h}trigger(C,W){return this.delayer.trigger(()=>this.throttler.queue(C),W)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}function c(T,C){return C?new Promise((W,K)=>{let j=setTimeout(()=>{F.dispose(),W()},T),F=C.onCancellationRequested(()=>{clearTimeout(j),F.dispose(),K(new B.FU)})}):d(W=>c(T,W))}function b(T,C=0){let W=setTimeout(T,C);return(0,I.OF)(()=>clearTimeout(W))}function l(T,C=K=>!!K,W=null){let K=0,j=T.length,F=()=>{if(K>=j)return Promise.resolve(W);let H=T[K++];return Promise.resolve(H()).then(z=>C(z)?Promise.resolve(z):F())};return F()}class a{constructor(C,W){this._token=-1,typeof C=="function"&&typeof W=="number"&&this.setIfNotSet(C,W)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(C,W){this.cancel(),this._token=setTimeout(()=>{this._token=-1,C()},W)}setIfNotSet(C,W){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,C()},W))}}class w{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(C,W){this.cancel(),this._token=setInterval(()=>{C()},W)}}class E{constructor(C,W){this.timeoutToken=-1,this.runner=C,this.timeout=W,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(C=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,C)}get delay(){return this.timeout}set delay(C){this.timeout=C}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var C;(C=this.runner)===null||C===void 0||C.call(this)}}let D;D=typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?T=>{(0,_.fn)(()=>{if(C)return;let W=Date.now()+15;T(Object.freeze({didTimeout:!0,timeRemaining:()=>Math.max(0,W-Date.now())}))});let C=!1;return{dispose(){C||(C=!0)}}}:(T,C)=>{let W=requestIdleCallback(T,typeof C=="number"?{timeout:C}:void 0),K=!1;return{dispose(){K||(K=!0,cancelIdleCallback(W))}}};class L{constructor(C){this._didRun=!1,this._executor=()=>{try{this._value=C()}catch(W){this._error=W}finally{this._didRun=!0}},this._handle=D(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class k{get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((C,W)=>{this.completeCallback=C,this.errorCallback=W})}complete(C){return new Promise(W=>{this.completeCallback(C),this.resolved=!0,W()})}cancel(){new Promise(C=>{this.errorCallback(new B.FU),this.rejected=!0,C()})}}var R;(function(T){T.settled=function(C){return x(this,void 0,void 0,function*(){let W,K=yield Promise.all(C.map(j=>j.then(F=>F,F=>{W||(W=F)})));if(W!==void 0)throw W;return K})},T.withAsyncBody=function(C){return new Promise((W,K)=>x(this,void 0,void 0,function*(){try{yield C(W,K)}catch(j){K(j)}}))}})(R||(R={}));class O{static fromArray(C){return new O(W=>{W.emitMany(C)})}static fromPromise(C){return new O(W=>x(this,void 0,void 0,function*(){W.emitMany(yield C)}))}static fromPromises(C){return new O(W=>x(this,void 0,void 0,function*(){yield Promise.all(C.map(K=>x(this,void 0,void 0,function*(){return W.emitOne(yield K)})))}))}static merge(C){return new O(W=>x(this,void 0,void 0,function*(){yield Promise.all(C.map(K=>{var j,F,H;return x(this,void 0,void 0,function*(){var z,J,oe,fe;try{for(j=!0,F=v(K);!(z=(H=yield F.next()).done);){fe=H.value,j=!1;try{let q=fe;W.emitOne(q)}finally{j=!0}}}catch(q){J={error:q}}finally{try{j||z||!(oe=F.return)||(yield oe.call(F))}finally{if(J)throw J.error}}})}))}))}constructor(C){this._state=0,this._results=[],this._error=null,this._onStateChanged=new u.Q5,queueMicrotask(()=>x(this,void 0,void 0,function*(){let W={emitOne:K=>this.emitOne(K),emitMany:K=>this.emitMany(K),reject:K=>this.reject(K)};try{yield Promise.resolve(C(W)),this.resolve()}catch(K){this.reject(K)}finally{W.emitOne=void 0,W.emitMany=void 0,W.reject=void 0}}))}[Symbol.asyncIterator](){let C=0;return{next:()=>x(this,void 0,void 0,function*(){for(;;){if(this._state===2)throw this._error;if(C<this._results.length)return{done:!1,value:this._results[C++]};if(this._state===1)return{done:!0,value:void 0};yield u.ju.toPromise(this._onStateChanged.event)}})}}static map(C,W){return new O(K=>x(this,void 0,void 0,function*(){var j,F,H,z;try{for(var J,oe=!0,fe=v(C);!(j=(J=yield fe.next()).done);){z=J.value,oe=!1;try{let q=z;K.emitOne(W(q))}finally{oe=!0}}}catch(q){F={error:q}}finally{try{oe||j||!(H=fe.return)||(yield H.call(fe))}finally{if(F)throw F.error}}}))}map(C){return O.map(this,C)}static filter(C,W){return new O(K=>x(this,void 0,void 0,function*(){var j,F,H,z;try{for(var J,oe=!0,fe=v(C);!(j=(J=yield fe.next()).done);){z=J.value,oe=!1;try{let q=z;W(q)&&K.emitOne(q)}finally{oe=!0}}}catch(q){F={error:q}}finally{try{oe||j||!(H=fe.return)||(yield H.call(fe))}finally{if(F)throw F.error}}}))}filter(C){return O.filter(this,C)}static coalesce(C){return O.filter(C,W=>!!W)}coalesce(){return O.coalesce(this)}static toPromise(C){var W,K,j,F,H,z,J;return x(this,void 0,void 0,function*(){let oe=[];try{for(W=!0,K=v(C);j=yield K.next(),!(F=j.done);){J=j.value,W=!1;try{let fe=J;oe.push(fe)}finally{W=!0}}}catch(fe){H={error:fe}}finally{try{W||F||!(z=K.return)||(yield z.call(K))}finally{if(H)throw H.error}}return oe})}toPromise(){return O.toPromise(this)}emitOne(C){this._state===0&&(this._results.push(C),this._onStateChanged.fire())}emitMany(C){this._state===0&&(this._results=this._results.concat(C),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(C){this._state===0&&(this._state=2,this._error=C,this._onStateChanged.fire())}}O.EMPTY=O.fromArray([]);class $ extends O{constructor(C,W){super(W),this._source=C}cancel(){this._source.cancel()}}function N(T){let C=new m.A,W=T(C.token);return new $(C,K=>x(this,void 0,void 0,function*(){var j,F,H,z;let J=C.token.onCancellationRequested(()=>{J.dispose(),C.dispose(),K.reject(new B.FU)});try{try{for(var oe,fe=!0,q=v(W);!(j=(oe=yield q.next()).done);){z=oe.value,fe=!1;try{let p=z;if(C.token.isCancellationRequested)return;K.emitOne(p)}finally{fe=!0}}}catch(p){F={error:p}}finally{try{fe||j||!(H=q.return)||(yield H.call(q))}finally{if(F)throw F.error}}J.dispose(),C.dispose()}catch(p){J.dispose(),C.dispose(),K.reject(p)}}))}},3060:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ag:()=>A,Cg:()=>f,KN:()=>u,Q$:()=>v,T4:()=>x,mP:()=>I,oq:()=>_});let m=typeof Buffer!="undefined",B;class u{static wrap(o){return m&&!Buffer.isBuffer(o)&&(o=Buffer.from(o.buffer,o.byteOffset,o.byteLength)),new u(o)}constructor(o){this.buffer=o,this.byteLength=this.buffer.byteLength}toString(){return m?this.buffer.toString():(B||(B=new TextDecoder),B.decode(this.buffer))}}function I(d,o){return d[o+0]<<0>>>0|d[o+1]<<8>>>0}function _(d,o,h){d[h+0]=255&o,o>>>=8,d[h+1]=255&o}function A(d,o){return d[o]*Math.pow(2,24)+d[o+1]*Math.pow(2,16)+d[o+2]*Math.pow(2,8)+d[o+3]}function x(d,o,h){d[h+3]=o,o>>>=8,d[h+2]=o,o>>>=8,d[h+1]=o,o>>>=8,d[h]=o}function v(d,o){return d[o]}function f(d,o,h){d[h]=o}},701:(ut,Ie,t)=>{"use strict";t.d(Ie,{b:()=>B,t:()=>m});class m{constructor(I){this.fn=I,this.lastCache=void 0,this.lastArgKey=void 0}get(I){let _=JSON.stringify(I);return this.lastArgKey!==_&&(this.lastArgKey=_,this.lastCache=this.fn(I)),this.lastCache}}class B{get cachedValues(){return this._map}constructor(I){this.fn=I,this._map=new Map}get(I){if(this._map.has(I))return this._map.get(I);let _=this.fn(I);return this._map.set(I,_),_}}},1050:(ut,Ie,t)=>{"use strict";t.d(Ie,{A:()=>_,T:()=>u});var m=t(4669);let B=Object.freeze(function(A,x){let v=setTimeout(A.bind(x),0);return{dispose(){clearTimeout(v)}}});var u;(function(A){A.isCancellationToken=function(x){return x===A.None||x===A.Cancelled||x instanceof I||!(!x||typeof x!="object")&&typeof x.isCancellationRequested=="boolean"&&typeof x.onCancellationRequested=="function"},A.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:m.ju.None}),A.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:B})})(u||(u={}));class I{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?B:(this._emitter||(this._emitter=new m.Q5),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class _{constructor(x){this._token=void 0,this._parentListener=void 0,this._parentListener=x&&x.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new I),this._token}cancel(){this._token?this._token instanceof I&&this._token.cancel():this._token=u.Cancelled}dispose(x=!1){var v;x&&this.cancel(),(v=this._parentListener)===null||v===void 0||v.dispose(),this._token?this._token instanceof I&&this._token.dispose():this._token=u.None}}},3046:(ut,Ie,t)=>{"use strict";t.d(Ie,{l:()=>_,u:()=>I});var m=t(8401);let B=Object.create(null);function u(A,x){if((0,m.HD)(x)){let v=B[x];if(v===void 0)throw new Error(`${A} references an unknown codicon: ${x}`);x=v}return B[A]=x,{id:A}}function I(){return B}let _={add:u("add",6e4),plus:u("plus",6e4),gistNew:u("gist-new",6e4),repoCreate:u("repo-create",6e4),lightbulb:u("lightbulb",60001),lightBulb:u("light-bulb",60001),repo:u("repo",60002),repoDelete:u("repo-delete",60002),gistFork:u("gist-fork",60003),repoForked:u("repo-forked",60003),gitPullRequest:u("git-pull-request",60004),gitPullRequestAbandoned:u("git-pull-request-abandoned",60004),recordKeys:u("record-keys",60005),keyboard:u("keyboard",60005),tag:u("tag",60006),tagAdd:u("tag-add",60006),tagRemove:u("tag-remove",60006),person:u("person",60007),personFollow:u("person-follow",60007),personOutline:u("person-outline",60007),personFilled:u("person-filled",60007),gitBranch:u("git-branch",60008),gitBranchCreate:u("git-branch-create",60008),gitBranchDelete:u("git-branch-delete",60008),sourceControl:u("source-control",60008),mirror:u("mirror",60009),mirrorPublic:u("mirror-public",60009),star:u("star",60010),starAdd:u("star-add",60010),starDelete:u("star-delete",60010),starEmpty:u("star-empty",60010),comment:u("comment",60011),commentAdd:u("comment-add",60011),alert:u("alert",60012),warning:u("warning",60012),search:u("search",60013),searchSave:u("search-save",60013),logOut:u("log-out",60014),signOut:u("sign-out",60014),logIn:u("log-in",60015),signIn:u("sign-in",60015),eye:u("eye",60016),eyeUnwatch:u("eye-unwatch",60016),eyeWatch:u("eye-watch",60016),circleFilled:u("circle-filled",60017),primitiveDot:u("primitive-dot",60017),closeDirty:u("close-dirty",60017),debugBreakpoint:u("debug-breakpoint",60017),debugBreakpointDisabled:u("debug-breakpoint-disabled",60017),debugHint:u("debug-hint",60017),primitiveSquare:u("primitive-square",60018),edit:u("edit",60019),pencil:u("pencil",60019),info:u("info",60020),issueOpened:u("issue-opened",60020),gistPrivate:u("gist-private",60021),gitForkPrivate:u("git-fork-private",60021),lock:u("lock",60021),mirrorPrivate:u("mirror-private",60021),close:u("close",60022),removeClose:u("remove-close",60022),x:u("x",60022),repoSync:u("repo-sync",60023),sync:u("sync",60023),clone:u("clone",60024),desktopDownload:u("desktop-download",60024),beaker:u("beaker",60025),microscope:u("microscope",60025),vm:u("vm",60026),deviceDesktop:u("device-desktop",60026),file:u("file",60027),fileText:u("file-text",60027),more:u("more",60028),ellipsis:u("ellipsis",60028),kebabHorizontal:u("kebab-horizontal",60028),mailReply:u("mail-reply",60029),reply:u("reply",60029),organization:u("organization",60030),organizationFilled:u("organization-filled",60030),organizationOutline:u("organization-outline",60030),newFile:u("new-file",60031),fileAdd:u("file-add",60031),newFolder:u("new-folder",60032),fileDirectoryCreate:u("file-directory-create",60032),trash:u("trash",60033),trashcan:u("trashcan",60033),history:u("history",60034),clock:u("clock",60034),folder:u("folder",60035),fileDirectory:u("file-directory",60035),symbolFolder:u("symbol-folder",60035),logoGithub:u("logo-github",60036),markGithub:u("mark-github",60036),github:u("github",60036),terminal:u("terminal",60037),console:u("console",60037),repl:u("repl",60037),zap:u("zap",60038),symbolEvent:u("symbol-event",60038),error:u("error",60039),stop:u("stop",60039),variable:u("variable",60040),symbolVariable:u("symbol-variable",60040),array:u("array",60042),symbolArray:u("symbol-array",60042),symbolModule:u("symbol-module",60043),symbolPackage:u("symbol-package",60043),symbolNamespace:u("symbol-namespace",60043),symbolObject:u("symbol-object",60043),symbolMethod:u("symbol-method",60044),symbolFunction:u("symbol-function",60044),symbolConstructor:u("symbol-constructor",60044),symbolBoolean:u("symbol-boolean",60047),symbolNull:u("symbol-null",60047),symbolNumeric:u("symbol-numeric",60048),symbolNumber:u("symbol-number",60048),symbolStructure:u("symbol-structure",60049),symbolStruct:u("symbol-struct",60049),symbolParameter:u("symbol-parameter",60050),symbolTypeParameter:u("symbol-type-parameter",60050),symbolKey:u("symbol-key",60051),symbolText:u("symbol-text",60051),symbolReference:u("symbol-reference",60052),goToFile:u("go-to-file",60052),symbolEnum:u("symbol-enum",60053),symbolValue:u("symbol-value",60053),symbolRuler:u("symbol-ruler",60054),symbolUnit:u("symbol-unit",60054),activateBreakpoints:u("activate-breakpoints",60055),archive:u("archive",60056),arrowBoth:u("arrow-both",60057),arrowDown:u("arrow-down",60058),arrowLeft:u("arrow-left",60059),arrowRight:u("arrow-right",60060),arrowSmallDown:u("arrow-small-down",60061),arrowSmallLeft:u("arrow-small-left",60062),arrowSmallRight:u("arrow-small-right",60063),arrowSmallUp:u("arrow-small-up",60064),arrowUp:u("arrow-up",60065),bell:u("bell",60066),bold:u("bold",60067),book:u("book",60068),bookmark:u("bookmark",60069),debugBreakpointConditionalUnverified:u("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:u("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:u("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:u("debug-breakpoint-data-unverified",60072),debugBreakpointData:u("debug-breakpoint-data",60073),debugBreakpointDataDisabled:u("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:u("debug-breakpoint-log-unverified",60074),debugBreakpointLog:u("debug-breakpoint-log",60075),debugBreakpointLogDisabled:u("debug-breakpoint-log-disabled",60075),briefcase:u("briefcase",60076),broadcast:u("broadcast",60077),browser:u("browser",60078),bug:u("bug",60079),calendar:u("calendar",60080),caseSensitive:u("case-sensitive",60081),check:u("check",60082),checklist:u("checklist",60083),chevronDown:u("chevron-down",60084),dropDownButton:u("drop-down-button",60084),chevronLeft:u("chevron-left",60085),chevronRight:u("chevron-right",60086),chevronUp:u("chevron-up",60087),chromeClose:u("chrome-close",60088),chromeMaximize:u("chrome-maximize",60089),chromeMinimize:u("chrome-minimize",60090),chromeRestore:u("chrome-restore",60091),circle:u("circle",60092),circleOutline:u("circle-outline",60092),debugBreakpointUnverified:u("debug-breakpoint-unverified",60092),circleSlash:u("circle-slash",60093),circuitBoard:u("circuit-board",60094),clearAll:u("clear-all",60095),clippy:u("clippy",60096),closeAll:u("close-all",60097),cloudDownload:u("cloud-download",60098),cloudUpload:u("cloud-upload",60099),code:u("code",60100),collapseAll:u("collapse-all",60101),colorMode:u("color-mode",60102),commentDiscussion:u("comment-discussion",60103),compareChanges:u("compare-changes",60157),creditCard:u("credit-card",60105),dash:u("dash",60108),dashboard:u("dashboard",60109),database:u("database",60110),debugContinue:u("debug-continue",60111),debugDisconnect:u("debug-disconnect",60112),debugPause:u("debug-pause",60113),debugRestart:u("debug-restart",60114),debugStart:u("debug-start",60115),debugStepInto:u("debug-step-into",60116),debugStepOut:u("debug-step-out",60117),debugStepOver:u("debug-step-over",60118),debugStop:u("debug-stop",60119),debug:u("debug",60120),deviceCameraVideo:u("device-camera-video",60121),deviceCamera:u("device-camera",60122),deviceMobile:u("device-mobile",60123),diffAdded:u("diff-added",60124),diffIgnored:u("diff-ignored",60125),diffModified:u("diff-modified",60126),diffRemoved:u("diff-removed",60127),diffRenamed:u("diff-renamed",60128),diff:u("diff",60129),discard:u("discard",60130),editorLayout:u("editor-layout",60131),emptyWindow:u("empty-window",60132),exclude:u("exclude",60133),extensions:u("extensions",60134),eyeClosed:u("eye-closed",60135),fileBinary:u("file-binary",60136),fileCode:u("file-code",60137),fileMedia:u("file-media",60138),filePdf:u("file-pdf",60139),fileSubmodule:u("file-submodule",60140),fileSymlinkDirectory:u("file-symlink-directory",60141),fileSymlinkFile:u("file-symlink-file",60142),fileZip:u("file-zip",60143),files:u("files",60144),filter:u("filter",60145),flame:u("flame",60146),foldDown:u("fold-down",60147),foldUp:u("fold-up",60148),fold:u("fold",60149),folderActive:u("folder-active",60150),folderOpened:u("folder-opened",60151),gear:u("gear",60152),gift:u("gift",60153),gistSecret:u("gist-secret",60154),gist:u("gist",60155),gitCommit:u("git-commit",60156),gitCompare:u("git-compare",60157),gitMerge:u("git-merge",60158),githubAction:u("github-action",60159),githubAlt:u("github-alt",60160),globe:u("globe",60161),grabber:u("grabber",60162),graph:u("graph",60163),gripper:u("gripper",60164),heart:u("heart",60165),home:u("home",60166),horizontalRule:u("horizontal-rule",60167),hubot:u("hubot",60168),inbox:u("inbox",60169),issueClosed:u("issue-closed",60324),issueReopened:u("issue-reopened",60171),issues:u("issues",60172),italic:u("italic",60173),jersey:u("jersey",60174),json:u("json",60175),bracket:u("bracket",60175),kebabVertical:u("kebab-vertical",60176),key:u("key",60177),law:u("law",60178),lightbulbAutofix:u("lightbulb-autofix",60179),linkExternal:u("link-external",60180),link:u("link",60181),listOrdered:u("list-ordered",60182),listUnordered:u("list-unordered",60183),liveShare:u("live-share",60184),loading:u("loading",60185),location:u("location",60186),mailRead:u("mail-read",60187),mail:u("mail",60188),markdown:u("markdown",60189),megaphone:u("megaphone",60190),mention:u("mention",60191),milestone:u("milestone",60192),mortarBoard:u("mortar-board",60193),move:u("move",60194),multipleWindows:u("multiple-windows",60195),mute:u("mute",60196),noNewline:u("no-newline",60197),note:u("note",60198),octoface:u("octoface",60199),openPreview:u("open-preview",60200),package_:u("package",60201),paintcan:u("paintcan",60202),pin:u("pin",60203),play:u("play",60204),run:u("run",60204),plug:u("plug",60205),preserveCase:u("preserve-case",60206),preview:u("preview",60207),project:u("project",60208),pulse:u("pulse",60209),question:u("question",60210),quote:u("quote",60211),radioTower:u("radio-tower",60212),reactions:u("reactions",60213),references:u("references",60214),refresh:u("refresh",60215),regex:u("regex",60216),remoteExplorer:u("remote-explorer",60217),remote:u("remote",60218),remove:u("remove",60219),replaceAll:u("replace-all",60220),replace:u("replace",60221),repoClone:u("repo-clone",60222),repoForcePush:u("repo-force-push",60223),repoPull:u("repo-pull",60224),repoPush:u("repo-push",60225),report:u("report",60226),requestChanges:u("request-changes",60227),rocket:u("rocket",60228),rootFolderOpened:u("root-folder-opened",60229),rootFolder:u("root-folder",60230),rss:u("rss",60231),ruby:u("ruby",60232),saveAll:u("save-all",60233),saveAs:u("save-as",60234),save:u("save",60235),screenFull:u("screen-full",60236),screenNormal:u("screen-normal",60237),searchStop:u("search-stop",60238),server:u("server",60240),settingsGear:u("settings-gear",60241),settings:u("settings",60242),shield:u("shield",60243),smiley:u("smiley",60244),sortPrecedence:u("sort-precedence",60245),splitHorizontal:u("split-horizontal",60246),splitVertical:u("split-vertical",60247),squirrel:u("squirrel",60248),starFull:u("star-full",60249),starHalf:u("star-half",60250),symbolClass:u("symbol-class",60251),symbolColor:u("symbol-color",60252),symbolCustomColor:u("symbol-customcolor",60252),symbolConstant:u("symbol-constant",60253),symbolEnumMember:u("symbol-enum-member",60254),symbolField:u("symbol-field",60255),symbolFile:u("symbol-file",60256),symbolInterface:u("symbol-interface",60257),symbolKeyword:u("symbol-keyword",60258),symbolMisc:u("symbol-misc",60259),symbolOperator:u("symbol-operator",60260),symbolProperty:u("symbol-property",60261),wrench:u("wrench",60261),wrenchSubaction:u("wrench-subaction",60261),symbolSnippet:u("symbol-snippet",60262),tasklist:u("tasklist",60263),telescope:u("telescope",60264),textSize:u("text-size",60265),threeBars:u("three-bars",60266),thumbsdown:u("thumbsdown",60267),thumbsup:u("thumbsup",60268),tools:u("tools",60269),triangleDown:u("triangle-down",60270),triangleLeft:u("triangle-left",60271),triangleRight:u("triangle-right",60272),triangleUp:u("triangle-up",60273),twitter:u("twitter",60274),unfold:u("unfold",60275),unlock:u("unlock",60276),unmute:u("unmute",60277),unverified:u("unverified",60278),verified:u("verified",60279),versions:u("versions",60280),vmActive:u("vm-active",60281),vmOutline:u("vm-outline",60282),vmRunning:u("vm-running",60283),watch:u("watch",60284),whitespace:u("whitespace",60285),wholeWord:u("whole-word",60286),window:u("window",60287),wordWrap:u("word-wrap",60288),zoomIn:u("zoom-in",60289),zoomOut:u("zoom-out",60290),listFilter:u("list-filter",60291),listFlat:u("list-flat",60292),listSelection:u("list-selection",60293),selection:u("selection",60293),listTree:u("list-tree",60294),debugBreakpointFunctionUnverified:u("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:u("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:u("debug-breakpoint-function-disabled",60296),debugStackframeActive:u("debug-stackframe-active",60297),circleSmallFilled:u("circle-small-filled",60298),debugStackframeDot:u("debug-stackframe-dot",60298),debugStackframe:u("debug-stackframe",60299),debugStackframeFocused:u("debug-stackframe-focused",60299),debugBreakpointUnsupported:u("debug-breakpoint-unsupported",60300),symbolString:u("symbol-string",60301),debugReverseContinue:u("debug-reverse-continue",60302),debugStepBack:u("debug-step-back",60303),debugRestartFrame:u("debug-restart-frame",60304),callIncoming:u("call-incoming",60306),callOutgoing:u("call-outgoing",60307),menu:u("menu",60308),expandAll:u("expand-all",60309),feedback:u("feedback",60310),groupByRefType:u("group-by-ref-type",60311),ungroupByRefType:u("ungroup-by-ref-type",60312),account:u("account",60313),bellDot:u("bell-dot",60314),debugConsole:u("debug-console",60315),library:u("library",60316),output:u("output",60317),runAll:u("run-all",60318),syncIgnored:u("sync-ignored",60319),pinned:u("pinned",60320),githubInverted:u("github-inverted",60321),debugAlt:u("debug-alt",60305),serverProcess:u("server-process",60322),serverEnvironment:u("server-environment",60323),pass:u("pass",60324),stopCircle:u("stop-circle",60325),playCircle:u("play-circle",60326),record:u("record",60327),debugAltSmall:u("debug-alt-small",60328),vmConnect:u("vm-connect",60329),cloud:u("cloud",60330),merge:u("merge",60331),exportIcon:u("export",60332),graphLeft:u("graph-left",60333),magnet:u("magnet",60334),notebook:u("notebook",60335),redo:u("redo",60336),checkAll:u("check-all",60337),pinnedDirty:u("pinned-dirty",60338),passFilled:u("pass-filled",60339),circleLargeFilled:u("circle-large-filled",60340),circleLarge:u("circle-large",60341),circleLargeOutline:u("circle-large-outline",60341),combine:u("combine",60342),gather:u("gather",60342),table:u("table",60343),variableGroup:u("variable-group",60344),typeHierarchy:u("type-hierarchy",60345),typeHierarchySub:u("type-hierarchy-sub",60346),typeHierarchySuper:u("type-hierarchy-super",60347),gitPullRequestCreate:u("git-pull-request-create",60348),runAbove:u("run-above",60349),runBelow:u("run-below",60350),notebookTemplate:u("notebook-template",60351),debugRerun:u("debug-rerun",60352),workspaceTrusted:u("workspace-trusted",60353),workspaceUntrusted:u("workspace-untrusted",60354),workspaceUnspecified:u("workspace-unspecified",60355),terminalCmd:u("terminal-cmd",60356),terminalDebian:u("terminal-debian",60357),terminalLinux:u("terminal-linux",60358),terminalPowershell:u("terminal-powershell",60359),terminalTmux:u("terminal-tmux",60360),terminalUbuntu:u("terminal-ubuntu",60361),terminalBash:u("terminal-bash",60362),arrowSwap:u("arrow-swap",60363),copy:u("copy",60364),personAdd:u("person-add",60365),filterFilled:u("filter-filled",60366),wand:u("wand",60367),debugLineByLine:u("debug-line-by-line",60368),inspect:u("inspect",60369),layers:u("layers",60370),layersDot:u("layers-dot",60371),layersActive:u("layers-active",60372),compass:u("compass",60373),compassDot:u("compass-dot",60374),compassActive:u("compass-active",60375),azure:u("azure",60376),issueDraft:u("issue-draft",60377),gitPullRequestClosed:u("git-pull-request-closed",60378),gitPullRequestDraft:u("git-pull-request-draft",60379),debugAll:u("debug-all",60380),debugCoverage:u("debug-coverage",60381),runErrors:u("run-errors",60382),folderLibrary:u("folder-library",60383),debugContinueSmall:u("debug-continue-small",60384),beakerStop:u("beaker-stop",60385),graphLine:u("graph-line",60386),graphScatter:u("graph-scatter",60387),pieChart:u("pie-chart",60388),bracketDot:u("bracket-dot",60389),bracketError:u("bracket-error",60390),lockSmall:u("lock-small",60391),azureDevops:u("azure-devops",60392),verifiedFilled:u("verified-filled",60393),newLine:u("newline",60394),layout:u("layout",60395),layoutActivitybarLeft:u("layout-activitybar-left",60396),layoutActivitybarRight:u("layout-activitybar-right",60397),layoutPanelLeft:u("layout-panel-left",60398),layoutPanelCenter:u("layout-panel-center",60399),layoutPanelJustify:u("layout-panel-justify",60400),layoutPanelRight:u("layout-panel-right",60401),layoutPanel:u("layout-panel",60402),layoutSidebarLeft:u("layout-sidebar-left",60403),layoutSidebarRight:u("layout-sidebar-right",60404),layoutStatusbar:u("layout-statusbar",60405),layoutMenubar:u("layout-menubar",60406),layoutCentered:u("layout-centered",60407),layoutSidebarRightOff:u("layout-sidebar-right-off",60416),layoutPanelOff:u("layout-panel-off",60417),layoutSidebarLeftOff:u("layout-sidebar-left-off",60418),target:u("target",60408),indent:u("indent",60409),recordSmall:u("record-small",60410),errorSmall:u("error-small",60411),arrowCircleDown:u("arrow-circle-down",60412),arrowCircleLeft:u("arrow-circle-left",60413),arrowCircleRight:u("arrow-circle-right",60414),arrowCircleUp:u("arrow-circle-up",60415),heartFilled:u("heart-filled",60420),map:u("map",60421),mapFilled:u("map-filled",60422),circleSmall:u("circle-small",60423),bellSlash:u("bell-slash",60424),bellSlashDot:u("bell-slash-dot",60425),commentUnresolved:u("comment-unresolved",60426),gitPullRequestGoToChanges:u("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:u("git-pull-request-new-changes",60428),searchFuzzy:u("search-fuzzy",60429),commentDraft:u("comment-draft",60430),send:u("send",60431),sparkle:u("sparkle",60432),insert:u("insert",60433),dialogError:u("dialog-error","error"),dialogWarning:u("dialog-warning","warning"),dialogInfo:u("dialog-info","info"),dialogClose:u("dialog-close","close"),treeItemExpanded:u("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:u("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:u("tree-filter-on-type-off","list-selection"),treeFilterClear:u("tree-filter-clear","close"),treeItemLoading:u("tree-item-loading","loading"),menuSelection:u("menu-selection","check"),menuSubmenu:u("menu-submenu","chevron-right"),menuBarMore:u("menubar-more","more"),scrollbarButtonLeft:u("scrollbar-button-left","triangle-left"),scrollbarButtonRight:u("scrollbar-button-right","triangle-right"),scrollbarButtonUp:u("scrollbar-button-up","triangle-up"),scrollbarButtonDown:u("scrollbar-button-down","triangle-down"),toolBarMore:u("toolbar-more","more"),quickInputBack:u("quick-input-back","arrow-left")}},1264:(ut,Ie,t)=>{"use strict";function m(A,x){let v=Math.pow(10,x);return Math.round(A*v)/v}t.d(Ie,{Il:()=>_,Oz:()=>u,VS:()=>B,tx:()=>I});class B{constructor(x,v,f,d=1){this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,x)),this.g=0|Math.min(255,Math.max(0,v)),this.b=0|Math.min(255,Math.max(0,f)),this.a=m(Math.max(Math.min(1,d),0),3)}static equals(x,v){return x.r===v.r&&x.g===v.g&&x.b===v.b&&x.a===v.a}}class u{constructor(x,v,f,d){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,x),0),this.s=m(Math.max(Math.min(1,v),0),3),this.l=m(Math.max(Math.min(1,f),0),3),this.a=m(Math.max(Math.min(1,d),0),3)}static equals(x,v){return x.h===v.h&&x.s===v.s&&x.l===v.l&&x.a===v.a}static fromRGBA(x){let v=x.r/255,f=x.g/255,d=x.b/255,o=x.a,h=Math.max(v,f,d),r=Math.min(v,f,d),i=0,c=0,b=(r+h)/2,l=h-r;if(l>0){switch(c=Math.min(b<=.5?l/(2*b):l/(2-2*b),1),h){case v:i=(f-d)/l+(f<d?6:0);break;case f:i=(d-v)/l+2;break;case d:i=(v-f)/l+4}i*=60,i=Math.round(i)}return new u(i,c,b,o)}static _hue2rgb(x,v,f){return f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?x+6*(v-x)*f:f<.5?v:f<.6666666666666666?x+(v-x)*(.6666666666666666-f)*6:x}static toRGBA(x){let v=x.h/360,{s:f,l:d,a:o}=x,h,r,i;if(f===0)h=r=i=d;else{let c=d<.5?d*(1+f):d+f-d*f,b=2*d-c;h=u._hue2rgb(b,c,v+.3333333333333333),r=u._hue2rgb(b,c,v),i=u._hue2rgb(b,c,v-.3333333333333333)}return new B(Math.round(255*h),Math.round(255*r),Math.round(255*i),o)}}class I{constructor(x,v,f,d){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,x),0),this.s=m(Math.max(Math.min(1,v),0),3),this.v=m(Math.max(Math.min(1,f),0),3),this.a=m(Math.max(Math.min(1,d),0),3)}static equals(x,v){return x.h===v.h&&x.s===v.s&&x.v===v.v&&x.a===v.a}static fromRGBA(x){let v=x.r/255,f=x.g/255,d=x.b/255,o=Math.max(v,f,d),h=o-Math.min(v,f,d),r=o===0?0:h/o,i;return i=h===0?0:o===v?((f-d)/h%6+6)%6:o===f?(d-v)/h+2:(v-f)/h+4,new I(Math.round(60*i),r,o,x.a)}static toRGBA(x){let{h:v,s:f,v:d,a:o}=x,h=d*f,r=h*(1-Math.abs(v/60%2-1)),i=d-h,[c,b,l]=[0,0,0];return v<60?(c=h,b=r):v<120?(c=r,b=h):v<180?(b=h,l=r):v<240?(b=r,l=h):v<300?(c=r,l=h):v<=360&&(c=h,l=r),c=Math.round(255*(c+i)),b=Math.round(255*(b+i)),l=Math.round(255*(l+i)),new B(c,b,l,o)}}class _{static fromHex(x){return _.Format.CSS.parseHex(x)||_.red}static equals(x,v){return!x&&!v||!(!x||!v)&&x.equals(v)}get hsla(){return this._hsla?this._hsla:u.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:I.fromRGBA(this.rgba)}constructor(x){if(!x)throw new Error("Color needs a value");if(x instanceof B)this.rgba=x;else if(x instanceof u)this._hsla=x,this.rgba=u.toRGBA(x);else{if(!(x instanceof I))throw new Error("Invalid color ctor argument");this._hsva=x,this.rgba=I.toRGBA(x)}}equals(x){return!!x&&B.equals(this.rgba,x.rgba)&&u.equals(this.hsla,x.hsla)&&I.equals(this.hsva,x.hsva)}getRelativeLuminance(){return m(.2126*_._relativeLuminanceForComponent(this.rgba.r)+.7152*_._relativeLuminanceForComponent(this.rgba.g)+.0722*_._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(x){let v=x/255;return v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4)}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(x){return this.getRelativeLuminance()>x.getRelativeLuminance()}isDarkerThan(x){return this.getRelativeLuminance()<x.getRelativeLuminance()}lighten(x){return new _(new u(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*x,this.hsla.a))}darken(x){return new _(new u(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*x,this.hsla.a))}transparent(x){let{r:v,g:f,b:d,a:o}=this.rgba;return new _(new B(v,f,d,o*x))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new _(new B(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(x){if(this.isOpaque()||x.rgba.a!==1)return this;let{r:v,g:f,b:d,a:o}=this.rgba;return new _(new B(x.rgba.r-o*(x.rgba.r-v),x.rgba.g-o*(x.rgba.g-f),x.rgba.b-o*(x.rgba.b-d),1))}toString(){return this._toString||(this._toString=_.Format.CSS.format(this)),this._toString}static getLighterColor(x,v,f){if(x.isLighterThan(v))return x;f=f||.5;let d=x.getRelativeLuminance(),o=v.getRelativeLuminance();return f=f*(o-d)/o,x.lighten(f)}static getDarkerColor(x,v,f){if(x.isDarkerThan(v))return x;f=f||.5;let d=x.getRelativeLuminance();return f=f*(d-v.getRelativeLuminance())/d,x.darken(f)}}_.white=new _(new B(255,255,255,1)),_.black=new _(new B(0,0,0,1)),_.red=new _(new B(255,0,0,1)),_.blue=new _(new B(0,0,255,1)),_.green=new _(new B(0,255,0,1)),_.cyan=new _(new B(0,255,255,1)),_.lightgrey=new _(new B(211,211,211,1)),_.transparent=new _(new B(0,0,0,0)),function(A){let x;(function(v){let f;(function(d){function o(r){let i=r.toString(16);return i.length!==2?"0"+i:i}function h(r){switch(r){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}d.formatRGB=function(r){return r.rgba.a===1?`rgb(${r.rgba.r}, ${r.rgba.g}, ${r.rgba.b})`:A.Format.CSS.formatRGBA(r)},d.formatRGBA=function(r){return`rgba(${r.rgba.r}, ${r.rgba.g}, ${r.rgba.b}, ${+r.rgba.a.toFixed(2)})`},d.formatHSL=function(r){return r.hsla.a===1?`hsl(${r.hsla.h}, ${(100*r.hsla.s).toFixed(2)}%, ${(100*r.hsla.l).toFixed(2)}%)`:A.Format.CSS.formatHSLA(r)},d.formatHSLA=function(r){return`hsla(${r.hsla.h}, ${(100*r.hsla.s).toFixed(2)}%, ${(100*r.hsla.l).toFixed(2)}%, ${r.hsla.a.toFixed(2)})`},d.formatHex=function(r){return`#${o(r.rgba.r)}${o(r.rgba.g)}${o(r.rgba.b)}`},d.formatHexA=function(r,i=!1){return i&&r.rgba.a===1?A.Format.CSS.formatHex(r):`#${o(r.rgba.r)}${o(r.rgba.g)}${o(r.rgba.b)}${o(Math.round(255*r.rgba.a))}`},d.format=function(r){return r.isOpaque()?A.Format.CSS.formatHex(r):A.Format.CSS.formatRGBA(r)},d.parseHex=function(r){let i=r.length;if(i===0||r.charCodeAt(0)!==35)return null;if(i===7){let c=16*h(r.charCodeAt(1))+h(r.charCodeAt(2)),b=16*h(r.charCodeAt(3))+h(r.charCodeAt(4)),l=16*h(r.charCodeAt(5))+h(r.charCodeAt(6));return new A(new B(c,b,l,1))}if(i===9){let c=16*h(r.charCodeAt(1))+h(r.charCodeAt(2)),b=16*h(r.charCodeAt(3))+h(r.charCodeAt(4)),l=16*h(r.charCodeAt(5))+h(r.charCodeAt(6)),a=16*h(r.charCodeAt(7))+h(r.charCodeAt(8));return new A(new B(c,b,l,a/255))}if(i===4){let c=h(r.charCodeAt(1)),b=h(r.charCodeAt(2)),l=h(r.charCodeAt(3));return new A(new B(16*c+c,16*b+b,16*l+l))}if(i===5){let c=h(r.charCodeAt(1)),b=h(r.charCodeAt(2)),l=h(r.charCodeAt(3)),a=h(r.charCodeAt(4));return new A(new B(16*c+c,16*b+b,16*l+l,(16*a+a)/255))}return null}})(f=v.CSS||(v.CSS={}))})(x=A.Format||(A.Format={}))}(_||(_={}))},3278:(ut,Ie,t)=>{"use strict";t.d(Ie,{Hl:()=>x,Ix:()=>A,Z0:()=>v,ZO:()=>_});var m=t(9488),B=t(3725),u=t(8e3),I=function(f,d,o,h){return new(o||(o=Promise))(function(r,i){function c(a){try{l(h.next(a))}catch(w){i(w)}}function b(a){try{l(h.throw(a))}catch(w){i(w)}}function l(a){var w;a.done?r(a.value):(w=a.value,w instanceof o?w:new o(function(E){E(w)})).then(c,b)}l((h=h.apply(f,d||[])).next())})};function _(f){return{id:(0,u.R)(),asString:()=>I(this,void 0,void 0,function*(){return f}),asFile:()=>{},value:typeof f=="string"?f:void 0}}function A(f,d,o){return{id:(0,u.R)(),asString:()=>I(this,void 0,void 0,function*(){return""}),asFile:()=>({name:f,uri:d,data:o}),value:void 0}}class x{constructor(){this._entries=new Map}get size(){let d=0;return this.forEach(()=>d++),d}has(d){return this._entries.has(this.toKey(d))}matches(d){if(this.has(d))return!0;if(d.toLowerCase()==="files")return B.$.some(this.values(),c=>c.asFile());if(d==="*/*")return this._entries.size>0;let o=this.toKey(d).match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!o)return!1;let[h,r,i]=o;return i==="*"&&B.$.some(this._entries.keys(),c=>c.startsWith(r+"/"))}get(d){var o;return(o=this._entries.get(this.toKey(d)))===null||o===void 0?void 0:o[0]}append(d,o){let h=this._entries.get(d);h?h.push(o):this._entries.set(this.toKey(d),[o])}replace(d,o){this._entries.set(this.toKey(d),[o])}delete(d){this._entries.delete(this.toKey(d))}*entries(){for(let[d,o]of this._entries.entries())for(let h of o)yield[d,h]}values(){return Array.from(this._entries.values()).flat()}forEach(d){for(let[o,h]of this.entries())d(h,o)}toKey(d){return d.toLowerCase()}}let v=Object.freeze({create:f=>(0,m.EB)(f.map(d=>d.toString())).join(`\r
`),split:f=>f.split(`\r
`),parse:f=>v.split(f).filter(d=>!d.startsWith("#"))})},9898:(ut,Ie,t)=>{"use strict";function m(B,u,I){let _=null,A=null;if(typeof I.value=="function"?(_="value",A=I.value,A.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof I.get=="function"&&(_="get",A=I.get),!A)throw new Error("not supported");let x=`$memoize$${u}`;I[_]=function(...v){return this.hasOwnProperty(x)||Object.defineProperty(this,x,{configurable:!1,enumerable:!1,writable:!1,value:A.apply(this,v)}),this[x]}}t.d(Ie,{H:()=>m})},2484:(ut,Ie,t)=>{"use strict";t.d(Ie,{Hs:()=>v,a$:()=>I});class m{constructor(d,o,h,r){this.originalStart=d,this.originalLength=o,this.modifiedStart=h,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}var B=t(9954);class u{constructor(d){this.source=d}getElements(){let d=this.source,o=new Int32Array(d.length);for(let h=0,r=d.length;h<r;h++)o[h]=d.charCodeAt(h);return o}}function I(f,d,o){return new v(new u(f),new u(d)).ComputeDiff(o).changes}class _{static Assert(d,o){if(!d)throw new Error(o)}}class A{static Copy(d,o,h,r,i){for(let c=0;c<i;c++)h[r+c]=d[o+c]}static Copy2(d,o,h,r,i){for(let c=0;c<i;c++)h[r+c]=d[o+c]}}class x{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new m(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(d,o){this.m_originalStart=Math.min(this.m_originalStart,d),this.m_modifiedStart=Math.min(this.m_modifiedStart,o),this.m_originalCount++}AddModifiedElement(d,o){this.m_originalStart=Math.min(this.m_originalStart,d),this.m_modifiedStart=Math.min(this.m_modifiedStart,o),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class v{constructor(d,o,h=null){this.ContinueProcessingPredicate=h,this._originalSequence=d,this._modifiedSequence=o;let[r,i,c]=v._getElements(d),[b,l,a]=v._getElements(o);this._hasStrings=c&&a,this._originalStringElements=r,this._originalElementsOrHash=i,this._modifiedStringElements=b,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(d){return d.length>0&&typeof d[0]=="string"}static _getElements(d){let o=d.getElements();if(v._isStringArray(o)){let h=new Int32Array(o.length);for(let r=0,i=o.length;r<i;r++)h[r]=(0,B.Cv)(o[r],0);return[o,h,!0]}return o instanceof Int32Array?[[],o,!1]:[[],new Int32Array(o),!1]}ElementsAreEqual(d,o){return this._originalElementsOrHash[d]===this._modifiedElementsOrHash[o]&&(!this._hasStrings||this._originalStringElements[d]===this._modifiedStringElements[o])}ElementsAreStrictEqual(d,o){return!!this.ElementsAreEqual(d,o)&&v._getStrictElement(this._originalSequence,d)===v._getStrictElement(this._modifiedSequence,o)}static _getStrictElement(d,o){return typeof d.getStrictElement=="function"?d.getStrictElement(o):null}OriginalElementsAreEqual(d,o){return this._originalElementsOrHash[d]===this._originalElementsOrHash[o]&&(!this._hasStrings||this._originalStringElements[d]===this._originalStringElements[o])}ModifiedElementsAreEqual(d,o){return this._modifiedElementsOrHash[d]===this._modifiedElementsOrHash[o]&&(!this._hasStrings||this._modifiedStringElements[d]===this._modifiedStringElements[o])}ComputeDiff(d){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,d)}_ComputeDiff(d,o,h,r,i){let c=[!1],b=this.ComputeDiffRecursive(d,o,h,r,c);return i&&(b=this.PrettifyChanges(b)),{quitEarly:c[0],changes:b}}ComputeDiffRecursive(d,o,h,r,i){for(i[0]=!1;d<=o&&h<=r&&this.ElementsAreEqual(d,h);)d++,h++;for(;o>=d&&r>=h&&this.ElementsAreEqual(o,r);)o--,r--;if(d>o||h>r){let E;return h<=r?(_.Assert(d===o+1,"originalStart should only be one more than originalEnd"),E=[new m(d,0,h,r-h+1)]):d<=o?(_.Assert(h===r+1,"modifiedStart should only be one more than modifiedEnd"),E=[new m(d,o-d+1,h,0)]):(_.Assert(d===o+1,"originalStart should only be one more than originalEnd"),_.Assert(h===r+1,"modifiedStart should only be one more than modifiedEnd"),E=[]),E}let c=[0],b=[0],l=this.ComputeRecursionPoint(d,o,h,r,c,b,i),a=c[0],w=b[0];if(l!==null)return l;if(!i[0]){let E=this.ComputeDiffRecursive(d,a,h,w,i),D=[];return D=i[0]?[new m(a+1,o-(a+1)+1,w+1,r-(w+1)+1)]:this.ComputeDiffRecursive(a+1,o,w+1,r,i),this.ConcatenateChanges(E,D)}return[new m(d,o-d+1,h,r-h+1)]}WALKTRACE(d,o,h,r,i,c,b,l,a,w,E,D,L,k,R,O,$,N){let T=null,C=null,W=new x,K=o,j=h,F=L[0]-O[0]-r,H=-1073741824,z=this.m_forwardHistory.length-1;do{let J=F+d;J===K||J<j&&a[J-1]<a[J+1]?(k=(E=a[J+1])-F-r,E<H&&W.MarkNextChange(),H=E,W.AddModifiedElement(E+1,k),F=J+1-d):(k=(E=a[J-1]+1)-F-r,E<H&&W.MarkNextChange(),H=E-1,W.AddOriginalElement(E,k+1),F=J-1-d),z>=0&&(d=(a=this.m_forwardHistory[z])[0],K=1,j=a.length-1)}while(--z>=-1);if(T=W.getReverseChanges(),N[0]){let J=L[0]+1,oe=O[0]+1;if(T!==null&&T.length>0){let fe=T[T.length-1];J=Math.max(J,fe.getOriginalEnd()),oe=Math.max(oe,fe.getModifiedEnd())}C=[new m(J,D-J+1,oe,R-oe+1)]}else{W=new x,K=c,j=b,F=L[0]-O[0]-l,H=1073741824,z=$?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let J=F+i;J===K||J<j&&w[J-1]>=w[J+1]?(k=(E=w[J+1]-1)-F-l,E>H&&W.MarkNextChange(),H=E+1,W.AddOriginalElement(E+1,k+1),F=J+1-i):(k=(E=w[J-1])-F-l,E>H&&W.MarkNextChange(),H=E,W.AddModifiedElement(E+1,k+1),F=J-1-i),z>=0&&(i=(w=this.m_reverseHistory[z])[0],K=1,j=w.length-1)}while(--z>=-1);C=W.getChanges()}return this.ConcatenateChanges(T,C)}ComputeRecursionPoint(d,o,h,r,i,c,b){let l=0,a=0,w=0,E=0,D=0,L=0;d--,h--,i[0]=0,c[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let k=o-d+(r-h),R=k+1,O=new Int32Array(R),$=new Int32Array(R),N=r-h,T=o-d,C=d-h,W=o-r,K=(T-N)%2==0;O[N]=d,$[T]=o,b[0]=!1;for(let j=1;j<=k/2+1;j++){let F=0,H=0;w=this.ClipDiagonalBound(N-j,j,N,R),E=this.ClipDiagonalBound(N+j,j,N,R);for(let J=w;J<=E;J+=2){l=J===w||J<E&&O[J-1]<O[J+1]?O[J+1]:O[J-1]+1,a=l-(J-N)-C;let oe=l;for(;l<o&&a<r&&this.ElementsAreEqual(l+1,a+1);)l++,a++;if(O[J]=l,l+a>F+H&&(F=l,H=a),!K&&Math.abs(J-T)<=j-1&&l>=$[J])return i[0]=l,c[0]=a,oe<=$[J]&&j<=1448?this.WALKTRACE(N,w,E,C,T,D,L,W,O,$,l,o,i,a,r,c,K,b):null}let z=(F-d+(H-h)-j)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(F,z))return b[0]=!0,i[0]=F,c[0]=H,z>0&&j<=1448?this.WALKTRACE(N,w,E,C,T,D,L,W,O,$,l,o,i,a,r,c,K,b):(d++,h++,[new m(d,o-d+1,h,r-h+1)]);D=this.ClipDiagonalBound(T-j,j,T,R),L=this.ClipDiagonalBound(T+j,j,T,R);for(let J=D;J<=L;J+=2){l=J===D||J<L&&$[J-1]>=$[J+1]?$[J+1]-1:$[J-1],a=l-(J-T)-W;let oe=l;for(;l>d&&a>h&&this.ElementsAreEqual(l,a);)l--,a--;if($[J]=l,K&&Math.abs(J-N)<=j&&l<=O[J])return i[0]=l,c[0]=a,oe>=O[J]&&j<=1448?this.WALKTRACE(N,w,E,C,T,D,L,W,O,$,l,o,i,a,r,c,K,b):null}if(j<=1447){let J=new Int32Array(E-w+2);J[0]=N-w+1,A.Copy2(O,w,J,1,E-w+1),this.m_forwardHistory.push(J),J=new Int32Array(L-D+2),J[0]=T-D+1,A.Copy2($,D,J,1,L-D+1),this.m_reverseHistory.push(J)}}return this.WALKTRACE(N,w,E,C,T,D,L,W,O,$,l,o,i,a,r,c,K,b)}PrettifyChanges(d){for(let o=0;o<d.length;o++){let h=d[o],r=o<d.length-1?d[o+1].originalStart:this._originalElementsOrHash.length,i=o<d.length-1?d[o+1].modifiedStart:this._modifiedElementsOrHash.length,c=h.originalLength>0,b=h.modifiedLength>0;for(;h.originalStart+h.originalLength<r&&h.modifiedStart+h.modifiedLength<i&&(!c||this.OriginalElementsAreEqual(h.originalStart,h.originalStart+h.originalLength))&&(!b||this.ModifiedElementsAreEqual(h.modifiedStart,h.modifiedStart+h.modifiedLength));){let a=this.ElementsAreStrictEqual(h.originalStart,h.modifiedStart);if(this.ElementsAreStrictEqual(h.originalStart+h.originalLength,h.modifiedStart+h.modifiedLength)&&!a)break;h.originalStart++,h.modifiedStart++}let l=[null];o<d.length-1&&this.ChangesOverlap(d[o],d[o+1],l)&&(d[o]=l[0],d.splice(o+1,1),o--)}for(let o=d.length-1;o>=0;o--){let h=d[o],r=0,i=0;if(o>0){let E=d[o-1];r=E.originalStart+E.originalLength,i=E.modifiedStart+E.modifiedLength}let c=h.originalLength>0,b=h.modifiedLength>0,l=0,a=this._boundaryScore(h.originalStart,h.originalLength,h.modifiedStart,h.modifiedLength);for(let E=1;;E++){let D=h.originalStart-E,L=h.modifiedStart-E;if(D<r||L<i||c&&!this.OriginalElementsAreEqual(D,D+h.originalLength)||b&&!this.ModifiedElementsAreEqual(L,L+h.modifiedLength))break;let k=(D===r&&L===i?5:0)+this._boundaryScore(D,h.originalLength,L,h.modifiedLength);k>a&&(a=k,l=E)}h.originalStart-=l,h.modifiedStart-=l;let w=[null];o>0&&this.ChangesOverlap(d[o-1],d[o],w)&&(d[o-1]=w[0],d.splice(o,1),o++)}if(this._hasStrings)for(let o=1,h=d.length;o<h;o++){let r=d[o-1],i=d[o],c=i.originalStart-r.originalStart-r.originalLength,b=r.originalStart,l=i.originalStart+i.originalLength,a=l-b,w=r.modifiedStart,E=i.modifiedStart+i.modifiedLength,D=E-w;if(c<5&&a<20&&D<20){let L=this._findBetterContiguousSequence(b,a,w,D,c);if(L){let[k,R]=L;k===r.originalStart+r.originalLength&&R===r.modifiedStart+r.modifiedLength||(r.originalLength=k-r.originalStart,r.modifiedLength=R-r.modifiedStart,i.originalStart=k+c,i.modifiedStart=R+c,i.originalLength=l-i.originalStart,i.modifiedLength=E-i.modifiedStart)}}}return d}_findBetterContiguousSequence(d,o,h,r,i){if(o<i||r<i)return null;let c=d+o-i+1,b=h+r-i+1,l=0,a=0,w=0;for(let E=d;E<c;E++)for(let D=h;D<b;D++){let L=this._contiguousSequenceScore(E,D,i);L>0&&L>l&&(l=L,a=E,w=D)}return l>0?[a,w]:null}_contiguousSequenceScore(d,o,h){let r=0;for(let i=0;i<h;i++){if(!this.ElementsAreEqual(d+i,o+i))return 0;r+=this._originalStringElements[d+i].length}return r}_OriginalIsBoundary(d){return d<=0||d>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[d])}_OriginalRegionIsBoundary(d,o){if(this._OriginalIsBoundary(d)||this._OriginalIsBoundary(d-1))return!0;if(o>0){let h=d+o;if(this._OriginalIsBoundary(h-1)||this._OriginalIsBoundary(h))return!0}return!1}_ModifiedIsBoundary(d){return d<=0||d>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[d])}_ModifiedRegionIsBoundary(d,o){if(this._ModifiedIsBoundary(d)||this._ModifiedIsBoundary(d-1))return!0;if(o>0){let h=d+o;if(this._ModifiedIsBoundary(h-1)||this._ModifiedIsBoundary(h))return!0}return!1}_boundaryScore(d,o,h,r){return(this._OriginalRegionIsBoundary(d,o)?1:0)+(this._ModifiedRegionIsBoundary(h,r)?1:0)}ConcatenateChanges(d,o){let h=[];if(d.length===0||o.length===0)return o.length>0?o:d;if(this.ChangesOverlap(d[d.length-1],o[0],h)){let r=new Array(d.length+o.length-1);return A.Copy(d,0,r,0,d.length-1),r[d.length-1]=h[0],A.Copy(o,1,r,d.length,o.length-1),r}{let r=new Array(d.length+o.length);return A.Copy(d,0,r,0,d.length),A.Copy(o,0,r,d.length,o.length),r}}ChangesOverlap(d,o,h){if(_.Assert(d.originalStart<=o.originalStart,"Left change is not less than or equal to right change"),_.Assert(d.modifiedStart<=o.modifiedStart,"Left change is not less than or equal to right change"),d.originalStart+d.originalLength>=o.originalStart||d.modifiedStart+d.modifiedLength>=o.modifiedStart){let r=d.originalStart,i=d.originalLength,c=d.modifiedStart,b=d.modifiedLength;return d.originalStart+d.originalLength>=o.originalStart&&(i=o.originalStart+o.originalLength-d.originalStart),d.modifiedStart+d.modifiedLength>=o.modifiedStart&&(b=o.modifiedStart+o.modifiedLength-d.modifiedStart),h[0]=new m(r,i,c,b),!0}return h[0]=null,!1}ClipDiagonalBound(d,o,h,r){if(d>=0&&d<r)return d;let i=o%2==0;return d<0?i===(h%2==0)?0:1:i===((r-h-1)%2==0)?r-1:r-2}}},7301:(ut,Ie,t)=>{"use strict";t.d(Ie,{B8:()=>o,Cp:()=>u,F0:()=>v,FU:()=>x,L6:()=>d,b1:()=>f,dL:()=>B,he:()=>r,n2:()=>A,ri:()=>I});let m=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(i){setTimeout(()=>{throw i.stack?h.isErrorNoTelemetry(i)?new h(i.message+`

`+i.stack):new Error(i.message+`

`+i.stack):i},0)}}emit(i){this.listeners.forEach(c=>{c(i)})}onUnexpectedError(i){this.unexpectedErrorHandler(i),this.emit(i)}onUnexpectedExternalError(i){this.unexpectedErrorHandler(i)}};function B(i){A(i)||m.onUnexpectedError(i)}function u(i){A(i)||m.onUnexpectedExternalError(i)}function I(i){if(i instanceof Error){let{name:c,message:b}=i;return{$isError:!0,name:c,message:b,stack:i.stacktrace||i.stack,noTelemetry:h.isErrorNoTelemetry(i)}}return i}let _="Canceled";function A(i){return i instanceof x||i instanceof Error&&i.name===_&&i.message===_}class x extends Error{constructor(){super(_),this.name=this.message}}function v(){let i=new Error(_);return i.name=i.message,i}function f(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function d(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class o extends Error{constructor(c){super("NotSupported"),c&&(this.message=c)}}class h extends Error{constructor(c){super(c),this.name="CodeExpectedError"}static fromError(c){if(c instanceof h)return c;let b=new h;return b.message=c.message,b.stack=c.stack,b}static isErrorNoTelemetry(c){return c.name==="CodeExpectedError"}}class r extends Error{constructor(c){super(c||"An unexpected bug occurred."),Object.setPrototypeOf(this,r.prototype)}}},4669:(ut,Ie,t)=>{"use strict";t.d(Ie,{D0:()=>b,E7:()=>w,F3:()=>h,K3:()=>c,Q5:()=>o,SZ:()=>l,ZD:()=>E,ju:()=>m,z5:()=>a});var m,B=t(7301),u=t(8289),I=t(5976),_=t(1741),A=t(4013);(function(D){function L(j){return(F,H=null,z)=>{let J,oe=!1;return J=j(fe=>{if(!oe)return J?J.dispose():oe=!0,F.call(H,fe)},null,z),oe&&J.dispose(),J}}function k(j,F,H){return N((z,J=null,oe)=>j(fe=>z.call(J,F(fe)),null,oe),H)}function R(j,F,H){return N((z,J=null,oe)=>j(fe=>{F(fe),z.call(J,fe)},null,oe),H)}function O(j,F,H){return N((z,J=null,oe)=>j(fe=>F(fe)&&z.call(J,fe),null,oe),H)}function $(j,F,H,z){let J=H;return k(j,oe=>(J=F(J,oe),J),z)}function N(j,F){let H,z=new o({onWillAddFirstListener(){H=j(z.fire,z)},onDidRemoveLastListener(){H==null||H.dispose()}});return F==null||F.add(z),z.event}function T(j,F,H=100,z=!1,J=!1,oe,fe){let q,p,re,ne,ie=0,se=new o({leakWarningThreshold:oe,onWillAddFirstListener(){q=j(ce=>{ie++,p=F(p,ce),z&&!re&&(se.fire(p),p=void 0),ne=()=>{let be=p;p=void 0,re=void 0,(!z||ie>1)&&se.fire(be),ie=0},typeof H=="number"?(clearTimeout(re),re=setTimeout(ne,H)):re===void 0&&(re=0,queueMicrotask(ne))})},onWillRemoveListener(){J&&ie>0&&(ne==null||ne())},onDidRemoveLastListener(){ne=void 0,q.dispose()}});return fe==null||fe.add(se),se.event}function C(j,F=(z,J)=>z===J,H){let z,J=!0;return O(j,oe=>{let fe=J||!F(oe,z);return J=!1,z=oe,fe},H)}D.None=()=>I.JT.None,D.defer=function(j,F){return T(j,()=>{},0,void 0,!0,void 0,F)},D.once=L,D.map=k,D.forEach=R,D.filter=O,D.signal=function(j){return j},D.any=function(...j){return(F,H=null,z)=>(0,I.F8)(...j.map(J=>J(oe=>F.call(H,oe),null,z)))},D.reduce=$,D.debounce=T,D.accumulate=function(j,F=0,H){return D.debounce(j,(z,J)=>z?(z.push(J),z):[J],F,void 0,!0,void 0,H)},D.latch=C,D.split=function(j,F,H){return[D.filter(j,F,H),D.filter(j,z=>!F(z),H)]},D.buffer=function(j,F=!1,H=[]){let z=H.slice(),J=j(q=>{z?z.push(q):fe.fire(q)}),oe=()=>{z==null||z.forEach(q=>fe.fire(q)),z=null},fe=new o({onWillAddFirstListener(){J||(J=j(q=>fe.fire(q)))},onDidAddFirstListener(){z&&(F?setTimeout(oe):oe())},onDidRemoveLastListener(){J&&J.dispose(),J=null}});return fe.event};class W{constructor(F){this.event=F,this.disposables=new I.SL}map(F){return new W(k(this.event,F,this.disposables))}forEach(F){return new W(R(this.event,F,this.disposables))}filter(F){return new W(O(this.event,F,this.disposables))}reduce(F,H){return new W($(this.event,F,H,this.disposables))}latch(){return new W(C(this.event,void 0,this.disposables))}debounce(F,H=100,z=!1,J=!1,oe){return new W(T(this.event,F,H,z,J,oe,this.disposables))}on(F,H,z){return this.event(F,H,z)}once(F,H,z){return L(this.event)(F,H,z)}dispose(){this.disposables.dispose()}}D.chain=function(j){return new W(j)},D.fromNodeEventEmitter=function(j,F,H=z=>z){let z=(...oe)=>J.fire(H(...oe)),J=new o({onWillAddFirstListener:()=>j.on(F,z),onDidRemoveLastListener:()=>j.removeListener(F,z)});return J.event},D.fromDOMEventEmitter=function(j,F,H=z=>z){let z=(...oe)=>J.fire(H(...oe)),J=new o({onWillAddFirstListener:()=>j.addEventListener(F,z),onDidRemoveLastListener:()=>j.removeEventListener(F,z)});return J.event},D.toPromise=function(j){return new Promise(F=>L(j)(F))},D.runAndSubscribe=function(j,F){return F(void 0),j(H=>F(H))},D.runAndSubscribeWithStore=function(j,F){let H=null;function z(oe){H==null||H.dispose(),H=new I.SL,F(oe,H)}z(void 0);let J=j(oe=>z(oe));return(0,I.OF)(()=>{J.dispose(),H==null||H.dispose()})};class K{constructor(F,H){this._observable=F,this._counter=0,this._hasChanged=!1;let z={onWillAddFirstListener:()=>{F.addObserver(this)},onDidRemoveLastListener:()=>{F.removeObserver(this)}};this.emitter=new o(z),H&&H.add(this.emitter)}beginUpdate(F){this._counter++}handlePossibleChange(F){}handleChange(F,H){this._hasChanged=!0}endUpdate(F){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}D.fromObservable=function(j,F){return new K(j,F).emitter.event},D.fromObservableLight=function(j){return F=>{let H=0,z=!1,J={beginUpdate(){H++},endUpdate(){H--,H===0&&(j.reportChanges(),z&&(z=!1,F()))},handlePossibleChange(){},handleChange(){z=!0}};return j.addObserver(J),{dispose(){j.removeObserver(J)}}}}})(m||(m={}));class x{constructor(L){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${L}_${x._idPool++}`,x.all.add(this)}start(L){this._stopWatch=new A.G(!0),this.listenerCount=L}stop(){if(this._stopWatch){let L=this._stopWatch.elapsed();this.durations.push(L),this.elapsedOverall+=L,this.invocationCount+=1,this._stopWatch=void 0}}}x.all=new Set,x._idPool=0;class v{constructor(L,k=Math.random().toString(18).slice(2,5)){this.threshold=L,this.name=k,this._warnCountdown=0}dispose(){var L;(L=this._stacks)===null||L===void 0||L.clear()}check(L,k){let R=this.threshold;if(R<=0||k<R)return;this._stacks||(this._stacks=new Map);let O=this._stacks.get(L.value)||0;if(this._stacks.set(L.value,O+1),this._warnCountdown-=1,this._warnCountdown<=0){let $;this._warnCountdown=.5*R;let N=0;for(let[T,C]of this._stacks)(!$||N<C)&&($=T,N=C);console.warn(`[${this.name}] potential listener LEAK detected, having ${k} listeners already. MOST frequent listener (${N}):`),console.warn($)}return()=>{let $=this._stacks.get(L.value)||0;this._stacks.set(L.value,$-1)}}}class f{static create(){var L;return new f((L=new Error().stack)!==null&&L!==void 0?L:"")}constructor(L){this.value=L}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class d{constructor(L,k,R){this.callback=L,this.callbackThis=k,this.stack=R,this.subscription=new I.dt}invoke(L){this.callback.call(this.callbackThis,L)}}class o{constructor(L){var k,R,O,$,N;this._disposed=!1,this._options=L,this._leakageMon=!((k=this._options)===null||k===void 0)&&k.leakWarningThreshold?new v((O=(R=this._options)===null||R===void 0?void 0:R.leakWarningThreshold)!==null&&O!==void 0?O:-1):void 0,this._perfMon=!(($=this._options)===null||$===void 0)&&$._profName?new x(this._options._profName):void 0,this._deliveryQueue=(N=this._options)===null||N===void 0?void 0:N.deliveryQueue}dispose(){var L,k,R,O;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(L=this._deliveryQueue)===null||L===void 0||L.clear(this),(R=(k=this._options)===null||k===void 0?void 0:k.onDidRemoveLastListener)===null||R===void 0||R.call(k),(O=this._leakageMon)===null||O===void 0||O.dispose())}get event(){return this._event||(this._event=(L,k,R)=>{var O,$,N;if(this._listeners||(this._listeners=new _.S),this._leakageMon&&this._listeners.size>3*this._leakageMon.threshold)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),I.JT.None;let T=this._listeners.isEmpty(),C,W;T&&(!((O=this._options)===null||O===void 0)&&O.onWillAddFirstListener)&&this._options.onWillAddFirstListener(this),this._leakageMon&&this._listeners.size>=Math.ceil(.2*this._leakageMon.threshold)&&(W=f.create(),C=this._leakageMon.check(W,this._listeners.size+1));let K=new d(L,k,W),j=this._listeners.push(K);T&&(!(($=this._options)===null||$===void 0)&&$.onDidAddFirstListener)&&this._options.onDidAddFirstListener(this),!((N=this._options)===null||N===void 0)&&N.onDidAddListener&&this._options.onDidAddListener(this,L,k);let F=K.subscription.set(()=>{var H,z;C==null||C(),!this._disposed&&((z=(H=this._options)===null||H===void 0?void 0:H.onWillRemoveListener)===null||z===void 0||z.call(H,this),j(),this._options&&this._options.onDidRemoveLastListener)&&(this._listeners&&!this._listeners.isEmpty()||this._options.onDidRemoveLastListener(this))});return R instanceof I.SL?R.add(F):Array.isArray(R)&&R.push(F),F}),this._event}fire(L){var k,R,O;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new r((k=this._options)===null||k===void 0?void 0:k.onListenerError));for(let $ of this._listeners)this._deliveryQueue.push(this,$,L);(R=this._perfMon)===null||R===void 0||R.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(O=this._perfMon)===null||O===void 0||O.stop()}}hasListeners(){return!!this._listeners&&!this._listeners.isEmpty()}}class h{constructor(L=B.dL){this._onListenerError=L,this._queue=new _.S}get size(){return this._queue.size}push(L,k,R){this._queue.push(new i(L,k,R))}clear(L){let k=new _.S;for(let R of this._queue)R.emitter!==L&&k.push(R);this._queue=k}deliver(){for(;this._queue.size>0;){let L=this._queue.shift();try{L.listener.invoke(L.event)}catch(k){this._onListenerError(k)}}}}class r extends h{clear(L){this._queue.clear()}}class i{constructor(L,k,R){this.emitter=L,this.listener=k,this.event=R}}class c extends o{constructor(L){super(L),this._isPaused=0,this._eventQueue=new _.S,this._mergeFn=L==null?void 0:L.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused==0)if(this._mergeFn){if(this._eventQueue.size>0){let L=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(L))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(L){this._listeners&&(this._isPaused!==0?this._eventQueue.push(L):super.fire(L))}}class b extends c{constructor(L){var k;super(L),this._delay=(k=L.delay)!==null&&k!==void 0?k:100}fire(L){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(L)}}class l extends o{constructor(L){super(L),this._queuedEvents=[],this._mergeFn=L==null?void 0:L.merge}fire(L){this.hasListeners()&&(this._queuedEvents.push(L),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(k=>super.fire(k)),this._queuedEvents=[]}))}}class a{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new o({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(L){let k={event:L,listener:null};return this.events.push(k),this.hasListeners&&this.hook(k),(0,I.OF)((0,u.I)(()=>{this.hasListeners&&this.unhook(k);let R=this.events.indexOf(k);this.events.splice(R,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(L=>this.hook(L))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(L=>this.unhook(L))}hook(L){L.listener=L.event(k=>this.emitter.fire(k))}unhook(L){L.listener&&L.listener.dispose(),L.listener=null}dispose(){this.emitter.dispose()}}class w{constructor(){this.buffers=[]}wrapEvent(L){return(k,R,O)=>L($=>{let N=this.buffers[this.buffers.length-1];N?N.push(()=>k.call(R,$)):k.call(R,$)},void 0,O)}bufferEvents(L){let k=[];this.buffers.push(k);let R=L();return this.buffers.pop(),k.forEach(O=>O()),R}}class E{constructor(){this.listening=!1,this.inputEvent=m.None,this.inputEventListener=I.JT.None,this.emitter=new o({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(L){this.inputEvent=L,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=L(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}},5527:(ut,Ie,t)=>{"use strict";t.d(Ie,{KM:()=>v,ej:()=>_,fn:()=>A,oP:()=>d,yj:()=>x});var m=t(8721),B=t(1432),u=t(7295);function I(o){return o===47||o===92}function _(o){return o.replace(/[\\/]/g,m.KR.sep)}function A(o){return o.indexOf("/")===-1&&(o=_(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}function x(o,h=m.KR.sep){if(!o)return"";let r=o.length,i=o.charCodeAt(0);if(I(i)){if(I(o.charCodeAt(1))&&!I(o.charCodeAt(2))){let b=3,l=b;for(;b<r&&!I(o.charCodeAt(b));b++);if(l!==b&&!I(o.charCodeAt(b+1))){for(b+=1;b<r;b++)if(I(o.charCodeAt(b)))return o.slice(0,b+1).replace(/[\\/]/g,h)}}return h}if(f(i)&&o.charCodeAt(1)===58)return I(o.charCodeAt(2))?o.slice(0,2)+h:o.slice(0,2);let c=o.indexOf("://");if(c!==-1){for(c+=3;c<r;c++)if(I(o.charCodeAt(c)))return o.slice(0,c+1)}return""}function v(o,h,r,i=m.ir){if(o===h)return!0;if(!o||!h||h.length>o.length)return!1;if(r){if(!(0,u.ok)(o,h))return!1;if(h.length===o.length)return!0;let c=h.length;return h.charAt(h.length-1)===i&&c--,o.charAt(c)===i}return h.charAt(h.length-1)!==i&&(h+=i),o.indexOf(h)===0}function f(o){return o>=65&&o<=90||o>=97&&o<=122}function d(o,h=B.ED){return!!h&&f(o.charCodeAt(0))&&o.charCodeAt(1)===58}},5392:(ut,Ie,t)=>{"use strict";t.d(Ie,{CL:()=>ne,EW:()=>se,Ji:()=>I,KZ:()=>E,Oh:()=>$,Sy:()=>x,ir:()=>A,jB:()=>N,l7:()=>be,mB:()=>T,mX:()=>ie,or:()=>u});var m=t(3702),B=t(7295);function u(...U){return function(ue,ve){for(let X=0,ye=U.length;X<ye;X++){let Ce=U[X](ue,ve);if(Ce)return Ce}return null}}_.bind(void 0,!1);let I=_.bind(void 0,!0);function _(U,ue,ve){if(!ve||ve.length<ue.length)return null;let X;return X=U?B.ok(ve,ue):ve.indexOf(ue)===0,X?ue.length>0?[{start:0,end:ue.length}]:[]:null}function A(U,ue){let ve=ue.toLowerCase().indexOf(U.toLowerCase());return ve===-1?null:[{start:ve,end:ve+U.length}]}function x(U,ue){return v(U.toLowerCase(),ue.toLowerCase(),0,0)}function v(U,ue,ve,X){if(ve===U.length)return[];if(X===ue.length)return null;if(U[ve]===ue[X]){let ye=null;return(ye=v(U,ue,ve+1,X+1))?b({start:X,end:X+1},ye):null}return v(U,ue,ve,X+1)}function f(U){return 97<=U&&U<=122}function d(U){return 65<=U&&U<=90}function o(U){return 48<=U&&U<=57}function h(U){return U===32||U===9||U===10||U===13}let r=new Set;function i(U){return h(U)||r.has(U)}function c(U){return f(U)||d(U)||o(U)}function b(U,ue){return ue.length===0?ue=[U]:U.end===ue[0].start?ue[0].start=U.start:ue.unshift(U),ue}function l(U,ue){for(let ve=ue;ve<U.length;ve++){let X=U.charCodeAt(ve);if(d(X)||o(X)||ve>0&&!c(U.charCodeAt(ve-1)))return ve}return U.length}function a(U,ue,ve,X){if(ve===U.length)return[];if(X===ue.length||U[ve]!==ue[X].toLowerCase())return null;{let ye=null,Ce=X+1;for(ye=a(U,ue,ve+1,X+1);!ye&&(Ce=l(ue,Ce))<ue.length;)ye=a(U,ue,ve+1,Ce),Ce++;return ye===null?null:b({start:X,end:X+1},ye)}}function w(U,ue){if(!ue||(ue=ue.trim()).length===0||!function(Ce){let Ee=0,Ae=0,Fe=0,_e=0;for(let te=0;te<Ce.length;te++)Fe=Ce.charCodeAt(te),d(Fe)&&Ee++,f(Fe)&&Ae++,h(Fe)&&_e++;return Ee!==0&&Ae!==0||_e!==0?Ee<=5:Ce.length<=30}(U)||ue.length>60)return null;let ve=function(Ce){let Ee=0,Ae=0,Fe=0,_e=0,te=0;for(let Le=0;Le<Ce.length;Le++)te=Ce.charCodeAt(Le),d(te)&&Ee++,f(te)&&Ae++,c(te)&&Fe++,o(te)&&_e++;return{upperPercent:Ee/Ce.length,lowerPercent:Ae/Ce.length,alphaPercent:Fe/Ce.length,numericPercent:_e/Ce.length}}(ue);if(!function(Ce){let{upperPercent:Ee,lowerPercent:Ae,alphaPercent:Fe,numericPercent:_e}=Ce;return Ae>.2&&Ee<.8&&Fe>.6&&_e<.2}(ve)){if(!function(Ce){let{upperPercent:Ee,lowerPercent:Ae}=Ce;return Ae===0&&Ee>.6}(ve))return null;ue=ue.toLowerCase()}let X=null,ye=0;for(U=U.toLowerCase();ye<ue.length&&(X=a(U,ue,0,ye))===null;)ye=l(ue,ye+1);return X}function E(U,ue,ve=!1){if(!ue||ue.length===0)return null;let X=null,ye=0;for(U=U.toLowerCase(),ue=ue.toLowerCase();ye<ue.length&&(X=D(U,ue,0,ye,ve))===null;)ye=L(ue,ye+1);return X}function D(U,ue,ve,X,ye){if(ve===U.length)return[];if(X===ue.length)return null;if((Ce=U.charCodeAt(ve))===(Ee=ue.charCodeAt(X))||i(Ce)&&i(Ee)){let Ae=null,Fe=X+1;if(Ae=D(U,ue,ve+1,X+1,ye),!ye)for(;!Ae&&(Fe=L(ue,Fe))<ue.length;)Ae=D(U,ue,ve+1,Fe,ye),Fe++;return Ae?U.charCodeAt(ve)!==ue.charCodeAt(X)?Ae:b({start:X,end:X+1},Ae):null}return null;var Ce,Ee}function L(U,ue){for(let ve=ue;ve<U.length;ve++)if(i(U.charCodeAt(ve))||ve>0&&i(U.charCodeAt(ve-1)))return ve;return U.length}"()[]{}<>`'\"-/;:,.?!".split("").forEach(U=>r.add(U.charCodeAt(0)));let k=u(I,w,A),R=u(I,w,x),O=new m.z6(1e4);function $(U,ue,ve=!1){if(typeof U!="string"||typeof ue!="string")return null;let X=O.get(U);X||(X=new RegExp(B.un(U),"i"),O.set(U,X));let ye=X.exec(ue);return ye?[{start:ye.index,end:ye.index+ye[0].length}]:ve?R(U,ue):k(U,ue)}function N(U,ue,ve,X,ye,Ce){let Ee=Math.min(13,U.length);for(;ve<Ee;ve++){let Ae=se(U,ue,ve,X,ye,Ce,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(Ae)return Ae}return[0,Ce]}function T(U){if(U===void 0)return[];let ue=[],ve=U[1];for(let X=U.length-1;X>1;X--){let ye=U[X]+ve,Ce=ue[ue.length-1];Ce&&Ce.end===ye?Ce.end=ye+1:ue.push({start:ye,end:ye+1})}return ue}let C=128;function W(){let U=[],ue=[];for(let ve=0;ve<=C;ve++)ue[ve]=0;for(let ve=0;ve<=C;ve++)U.push(ue.slice(0));return U}function K(U){let ue=[];for(let ve=0;ve<=U;ve++)ue[ve]=0;return ue}let j=K(2*C),F=K(2*C),H=W(),z=W(),J=W(),oe=!1;function fe(U,ue,ve,X,ye){function Ce(Ae,Fe,_e=" "){for(;Ae.length<Fe;)Ae=_e+Ae;return Ae}let Ee=` |   |${X.split("").map(Ae=>Ce(Ae,3)).join("|")}
`;for(let Ae=0;Ae<=ve;Ae++)Ee+=Ae===0?" |":`${ue[Ae-1]}|`,Ee+=U[Ae].slice(0,ye+1).map(Fe=>Ce(Fe.toString(),3)).join("|")+`
`;return Ee}function q(U,ue){if(ue<0||ue>=U.length)return!1;let ve=U.codePointAt(ue);switch(ve){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!B.C8(ve)}}function p(U,ue){if(ue<0||ue>=U.length)return!1;switch(U.charCodeAt(ue)){case 32:case 9:return!0;default:return!1}}function re(U,ue,ve){return ue[U]!==ve[U]}var ne;(function(U){U.Default=[-100,0],U.isDefault=function(ue){return!ue||ue.length===2&&ue[0]===-100&&ue[1]===0}})(ne||(ne={}));class ie{constructor(ue,ve){this.firstMatchCanBeWeak=ue,this.boostFullMatch=ve}}function se(U,ue,ve,X,ye,Ce,Ee=ie.default){let Ae=U.length>C?C:U.length,Fe=X.length>C?C:X.length;if(ve>=Ae||Ce>=Fe||Ae-ve>Fe-Ce||!function(Ve,Ye,tt,Qe,bt,ht,xt=!1){for(;Ye<tt&&bt<ht;)Ve[Ye]===Qe[bt]&&(xt&&(j[Ye]=bt),Ye+=1),bt+=1;return Ye===tt}(ue,ve,Ae,ye,Ce,Fe,!0))return;(function(Ve,Ye,tt,Qe,bt,ht){let xt=Ve-1,Qt=Ye-1;for(;xt>=tt&&Qt>=Qe;)bt[xt]===ht[Qt]&&(F[xt]=Qt,xt--),Qt--})(Ae,Fe,ve,Ce,ue,ye);let _e=1,te=1,Le=ve,ke=Ce,le=[!1];for(_e=1,Le=ve;Le<Ae;_e++,Le++){let Ve=j[Le],Ye=F[Le],tt=Le+1<Ae?F[Le+1]:Fe;for(te=Ve-Ce+1,ke=Ve;ke<tt;te++,ke++){let Qe=Number.MIN_SAFE_INTEGER,bt=!1;ke<=Ye&&(Qe=ce(U,ue,Le,ve,X,ye,ke,Fe,Ce,H[_e-1][te-1]===0,le));let ht=0;Qe!==Number.MAX_SAFE_INTEGER&&(bt=!0,ht=Qe+z[_e-1][te-1]);let xt=ke>Ve,Qt=xt?z[_e][te-1]+(H[_e][te-1]>0?-5:0):0,At=ke>Ve+1&&H[_e][te-1]>0,mi=At?z[_e][te-2]+(H[_e][te-2]>0?-5:0):0;if(At&&(!xt||mi>=Qt)&&(!bt||mi>=ht))z[_e][te]=mi,J[_e][te]=3,H[_e][te]=0;else if(xt&&(!bt||Qt>=ht))z[_e][te]=Qt,J[_e][te]=2,H[_e][te]=0;else{if(!bt)throw new Error("not possible");z[_e][te]=ht,J[_e][te]=1,H[_e][te]=H[_e-1][te-1]+1}}}if(oe&&function(Ve,Ye,tt,Qe){Ve=Ve.substr(Ye),tt=tt.substr(Qe),console.log(fe(z,Ve,Ve.length,tt,tt.length)),console.log(fe(J,Ve,Ve.length,tt,tt.length)),console.log(fe(H,Ve,Ve.length,tt,tt.length))}(U,ve,X,Ce),!le[0]&&!Ee.firstMatchCanBeWeak)return;_e--,te--;let ee=[z[_e][te],Ce],me=0,xe=0;for(;_e>=1;){let Ve=te;do{let Ye=J[_e][Ve];if(Ye===3)Ve-=2;else{if(Ye!==2)break;Ve-=1}}while(Ve>=1);me>1&&ue[ve+_e-1]===ye[Ce+te-1]&&!re(Ve+Ce-1,X,ye)&&me+1>H[_e][Ve]&&(Ve=te),Ve===te?me++:me=1,xe||(xe=Ve),_e--,te=Ve-1,ee.push(te)}Fe===Ae&&Ee.boostFullMatch&&(ee[0]+=2);let We=xe-Ae;return ee[0]-=We,ee}function ce(U,ue,ve,X,ye,Ce,Ee,Ae,Fe,_e,te){if(ue[ve]!==Ce[Ee])return Number.MIN_SAFE_INTEGER;let Le=1,ke=!1;return Ee===ve-X?Le=U[ve]===ye[Ee]?7:5:!re(Ee,ye,Ce)||Ee!==0&&re(Ee-1,ye,Ce)?!q(Ce,Ee)||Ee!==0&&q(Ce,Ee-1)?(q(Ce,Ee-1)||p(Ce,Ee-1))&&(Le=5,ke=!0):Le=5:(Le=U[ve]===ye[Ee]?7:5,ke=!0),Le>1&&ve===X&&(te[0]=!0),ke||(ke=re(Ee,ye,Ce)||q(Ce,Ee-1)||p(Ce,Ee-1)),ve===X?Ee>Fe&&(Le-=ke?3:5):Le+=_e?ke?2:0:ke?0:1,Ee+1===Ae&&(Le-=ke?3:5),Le}function be(U,ue,ve,X,ye,Ce,Ee){return function(Ae,Fe,_e,te,Le,ke,le,ee){let me=se(Ae,Fe,_e,te,Le,ke,ee);if(Ae.length>=3){let xe=Math.min(7,Ae.length-1);for(let We=_e+1;We<xe;We++){let Ve=de(Ae,We);if(Ve){let Ye=se(Ve,Ve.toLowerCase(),_e,te,Le,ke,ee);Ye&&(Ye[0]-=3,(!me||Ye[0]>me[0])&&(me=Ye))}}}return me}(U,ue,ve,X,ye,Ce,0,Ee)}function de(U,ue){if(ue+1>=U.length)return;let ve=U[ue],X=U[ue+1];return ve!==X?U.slice(0,ue)+X+ve+U.slice(ue+2):void 0}ie.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}},8289:(ut,Ie,t)=>{"use strict";function m(B){let u=this,I,_=!1;return function(){return _||(_=!0,I=B.apply(u,arguments)),I}}t.d(Ie,{I:()=>m})},9954:(ut,Ie,t)=>{"use strict";t.d(Ie,{Cv:()=>_,SP:()=>u,vp:()=>B,yP:()=>f});var m=t(7295);function B(d){return u(d,0)}function u(d,o){switch(typeof d){case"object":return d===null?I(349,o):Array.isArray(d)?(h=d,r=I(104579,r=o),h.reduce((i,c)=>u(c,i),r)):function(i,c){return c=I(181387,c),Object.keys(i).sort().reduce((b,l)=>(b=_(l,b),u(i[l],b)),c)}(d,o);case"string":return _(d,o);case"boolean":return function(i,c){return I(i?433:863,c)}(d,o);case"number":return I(d,o);case"undefined":return I(937,o);default:return I(617,o)}var h,r}function I(d,o){return(o<<5)-o+d|0}function _(d,o){o=I(149417,o);for(let h=0,r=d.length;h<r;h++)o=I(d.charCodeAt(h),o);return o}function A(d,o,h=32){let r=h-o;return(d<<o|(~((1<<r)-1)&d)>>>r)>>>0}function x(d,o=0,h=d.byteLength,r=0){for(let i=0;i<h;i++)d[o+i]=r}function v(d,o=32){return d instanceof ArrayBuffer?Array.from(new Uint8Array(d)).map(h=>h.toString(16).padStart(2,"0")).join(""):function(h,r,i="0"){for(;h.length<r;)h=i+h;return h}((d>>>0).toString(16),o/4)}class f{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(o){let h=o.length;if(h===0)return;let r=this._buff,i,c,b=this._buffLen,l=this._leftoverHighSurrogate;for(l!==0?(i=l,c=-1,l=0):(i=o.charCodeAt(0),c=0);;){let a=i;if(m.ZG(i)){if(!(c+1<h)){l=i;break}{let w=o.charCodeAt(c+1);m.YK(w)?(c++,a=m.rL(i,w)):a=65533}}else m.YK(i)&&(a=65533);if(b=this._push(r,b,a),c++,!(c<h))break;i=o.charCodeAt(c)}this._buffLen=b,this._leftoverHighSurrogate=l}_push(o,h,r){return r<128?o[h++]=r:r<2048?(o[h++]=192|(1984&r)>>>6,o[h++]=128|(63&r)>>>0):r<65536?(o[h++]=224|(61440&r)>>>12,o[h++]=128|(4032&r)>>>6,o[h++]=128|(63&r)>>>0):(o[h++]=240|(1835008&r)>>>18,o[h++]=128|(258048&r)>>>12,o[h++]=128|(4032&r)>>>6,o[h++]=128|(63&r)>>>0),h>=64&&(this._step(),h-=64,this._totalLen+=64,o[0]=o[64],o[1]=o[65],o[2]=o[66]),h}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),v(this._h0)+v(this._h1)+v(this._h2)+v(this._h3)+v(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,x(this._buff,this._buffLen),this._buffLen>56&&(this._step(),x(this._buff));let o=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(o/4294967296),!1),this._buffDV.setUint32(60,o%4294967296,!1),this._step()}_step(){let o=f._bigBlock32,h=this._buffDV;for(let D=0;D<64;D+=4)o.setUint32(D,h.getUint32(D,!1),!1);for(let D=64;D<320;D+=4)o.setUint32(D,A(o.getUint32(D-12,!1)^o.getUint32(D-32,!1)^o.getUint32(D-56,!1)^o.getUint32(D-64,!1),1),!1);let r,i,c,b=this._h0,l=this._h1,a=this._h2,w=this._h3,E=this._h4;for(let D=0;D<80;D++)D<20?(r=l&a|~l&w,i=1518500249):D<40?(r=l^a^w,i=1859775393):D<60?(r=l&a|l&w|a&w,i=2400959708):(r=l^a^w,i=3395469782),c=A(b,5)+r+E+i+o.getUint32(4*D,!1)&4294967295,E=w,w=a,a=A(l,30),l=b,b=c;this._h0=this._h0+b&4294967295,this._h1=this._h1+l&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+w&4294967295,this._h4=this._h4+E&4294967295}}f._bigBlock32=new DataView(new ArrayBuffer(320))},9365:(ut,Ie,t)=>{"use strict";t.d(Ie,{CP:()=>x,Fr:()=>v,W5:()=>A,d9:()=>d,g_:()=>f,oR:()=>o,v1:()=>h});var m=t(7301),B=t(1212),u=t(5935),I=t(7295),_=t(666);class A{constructor(i="",c=!1){var b,l,a;if(this.value=i,typeof this.value!="string")throw(0,m.b1)("value");typeof c=="boolean"?(this.isTrusted=c,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(b=c.isTrusted)!==null&&b!==void 0?b:void 0,this.supportThemeIcons=(l=c.supportThemeIcons)!==null&&l!==void 0&&l,this.supportHtml=(a=c.supportHtml)!==null&&a!==void 0&&a)}appendText(i,c=0){var b;return this.value+=(b=this.supportThemeIcons?(0,B.Qo)(i):i,b.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")).replace(/([ \t]+)/g,(l,a)=>"&nbsp;".repeat(a.length)).replace(/\>/gm,"\\>").replace(/\n/g,c===1?`\\
`:`

`),this}appendMarkdown(i){return this.value+=i,this}appendCodeblock(i,c){return this.value+="\n```",this.value+=i,this.value+=`
`,this.value+=c,this.value+="\n```\n",this}appendLink(i,c,b){return this.value+="[",this.value+=this._escape(c,"]"),this.value+="](",this.value+=this._escape(String(i),")"),b&&(this.value+=` "${this._escape(this._escape(b,'"'),")")}"`),this.value+=")",this}_escape(i,c){let b=new RegExp((0,I.ec)(c),"g");return i.replace(b,(l,a)=>i.charAt(a-1)!=="\\"?`\\${l}`:l)}}function x(r){return v(r)?!r.value:!Array.isArray(r)||r.every(x)}function v(r){return r instanceof A||!(!r||typeof r!="object")&&!(typeof r.value!="string"||typeof r.isTrusted!="boolean"&&typeof r.isTrusted!="object"&&r.isTrusted!==void 0||typeof r.supportThemeIcons!="boolean"&&r.supportThemeIcons!==void 0)}function f(r,i){return r===i||!(!r||!i)&&r.value===i.value&&r.isTrusted===i.isTrusted&&r.supportThemeIcons===i.supportThemeIcons&&r.supportHtml===i.supportHtml&&(r.baseUri===i.baseUri||!!r.baseUri&&!!i.baseUri&&(0,u.Xy)(_.o.from(r.baseUri),_.o.from(i.baseUri)))}function d(r){return r.replace(/"/g,"&quot;")}function o(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function h(r){let i=[],c=r.split("|").map(l=>l.trim());r=c[0];let b=c[1];if(b){let l=/height=(\d+)/.exec(b),a=/width=(\d+)/.exec(b),w=l?l[1]:"",E=a?a[1]:"",D=isFinite(parseInt(E)),L=isFinite(parseInt(w));D&&i.push(`width="${E}"`),L&&i.push(`height="${w}"`)}return{href:r,dimensions:i}}},1212:(ut,Ie,t)=>{"use strict";t.d(Ie,{Gt:()=>c,Ho:()=>i,JL:()=>h,Qo:()=>x,f$:()=>f,x$:()=>o});var m=t(5392),B=t(7295),u=t(5670);let I="$(",_=new RegExp(`\\$\\(${u.k.iconNameExpression}(?:${u.k.iconModifierExpression})?\\)`,"g"),A=new RegExp(`(\\\\)?${_.source}`,"g");function x(b){return b.replace(A,(l,a)=>a?l:`\\${l}`)}let v=new RegExp(`\\\\${_.source}`,"g");function f(b){return b.replace(v,l=>`\\${l}`)}let d=new RegExp(`(\\s)?(\\\\)?${_.source}(\\s)?`,"g");function o(b){return b.indexOf(I)===-1?b:b.replace(d,(l,a,w,E)=>w?l:a||E||"")}function h(b){return b?b.replace(/\$\((.*?)\)/g,(l,a)=>` ${a} `).trim():""}let r=new RegExp(`\\$\\(${u.k.iconNameCharacter}+\\)`,"g");function i(b){r.lastIndex=0;let l="",a=[],w=0;for(;;){let E=r.lastIndex,D=r.exec(b),L=b.substring(E,D==null?void 0:D.index);if(L.length>0){l+=L;for(let k=0;k<L.length;k++)a.push(w)}if(!D)break;w+=D[0].length}return{text:l,iconOffsets:a}}function c(b,l,a=!1){let{text:w,iconOffsets:E}=l;if(!E||E.length===0)return(0,m.Oh)(b,w,a);let D=(0,B.j3)(w," "),L=w.length-D.length,k=(0,m.Oh)(b,D,a);if(k)for(let R of k){let O=E[R.start+L]+L;R.start+=O,R.end+=O}return k}},4742:(ut,Ie,t)=>{"use strict";t.d(Ie,{R:()=>m,a:()=>B});class m{constructor(I){this._prefix=I,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}let B=new m("id#")},7173:(ut,Ie,t)=>{"use strict";t.d(Ie,{F:()=>B});var m=t(4669);let B=new class{constructor(){this._onDidChange=new m.Q5,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}},3725:(ut,Ie,t)=>{"use strict";var m;t.d(Ie,{$:()=>m}),function(B){function u(A){return A&&typeof A=="object"&&typeof A[Symbol.iterator]=="function"}B.is=u;let I=Object.freeze([]);function*_(A){yield A}B.empty=function(){return I},B.single=_,B.wrap=function(A){return u(A)?A:_(A)},B.from=function(A){return A||I},B.isEmpty=function(A){return!A||A[Symbol.iterator]().next().done===!0},B.first=function(A){return A[Symbol.iterator]().next().value},B.some=function(A,x){for(let v of A)if(x(v))return!0;return!1},B.find=function(A,x){for(let v of A)if(x(v))return v},B.filter=function*(A,x){for(let v of A)x(v)&&(yield v)},B.map=function*(A,x){let v=0;for(let f of A)yield x(f,v++)},B.concat=function*(...A){for(let x of A)for(let v of x)yield v},B.reduce=function(A,x,v){let f=v;for(let d of A)f=x(f,d);return f},B.slice=function*(A,x,v=A.length){for(x<0&&(x+=A.length),v<0?v+=A.length:v>A.length&&(v=A.length);x<v;x++)yield A[x]},B.consume=function(A,x=Number.POSITIVE_INFINITY){let v=[];if(x===0)return[v,A];let f=A[Symbol.iterator]();for(let d=0;d<x;d++){let o=f.next();if(o.done)return[v,B.empty()];v.push(o.value)}return[v,{[Symbol.iterator]:()=>f}]}}(m||(m={}))},2258:(ut,Ie,t)=>{"use strict";t.d(Ie,{H_:()=>_,Vd:()=>d,gx:()=>r,kL:()=>h});class m{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(c,b){this._keyCodeToStr[c]=b,this._strToKeyCode[b.toLowerCase()]=c}keyCodeToStr(c){return this._keyCodeToStr[c]}strToKeyCode(c){return this._strToKeyCode[c.toLowerCase()]||0}}let B=new m,u=new m,I=new m,_=new Array(230),A={},x=[],v=Object.create(null),f=Object.create(null),d=[],o=[];for(let i=0;i<=193;i++)d[i]=-1;for(let i=0;i<=132;i++)o[i]=-1;var h;function r(i,c){return(i|(65535&c)<<16>>>0)>>>0}(function(){let i="",c=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[1,1,"Hyper",0,i,0,i,i,i],[1,2,"Super",0,i,0,i,i,i],[1,3,"Fn",0,i,0,i,i,i],[1,4,"FnLock",0,i,0,i,i,i],[1,5,"Suspend",0,i,0,i,i,i],[1,6,"Resume",0,i,0,i,i,i],[1,7,"Turbo",0,i,0,i,i,i],[1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[1,9,"WakeUp",0,i,0,i,i,i],[0,10,"KeyA",31,"A",65,"VK_A",i,i],[0,11,"KeyB",32,"B",66,"VK_B",i,i],[0,12,"KeyC",33,"C",67,"VK_C",i,i],[0,13,"KeyD",34,"D",68,"VK_D",i,i],[0,14,"KeyE",35,"E",69,"VK_E",i,i],[0,15,"KeyF",36,"F",70,"VK_F",i,i],[0,16,"KeyG",37,"G",71,"VK_G",i,i],[0,17,"KeyH",38,"H",72,"VK_H",i,i],[0,18,"KeyI",39,"I",73,"VK_I",i,i],[0,19,"KeyJ",40,"J",74,"VK_J",i,i],[0,20,"KeyK",41,"K",75,"VK_K",i,i],[0,21,"KeyL",42,"L",76,"VK_L",i,i],[0,22,"KeyM",43,"M",77,"VK_M",i,i],[0,23,"KeyN",44,"N",78,"VK_N",i,i],[0,24,"KeyO",45,"O",79,"VK_O",i,i],[0,25,"KeyP",46,"P",80,"VK_P",i,i],[0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[0,27,"KeyR",48,"R",82,"VK_R",i,i],[0,28,"KeyS",49,"S",83,"VK_S",i,i],[0,29,"KeyT",50,"T",84,"VK_T",i,i],[0,30,"KeyU",51,"U",85,"VK_U",i,i],[0,31,"KeyV",52,"V",86,"VK_V",i,i],[0,32,"KeyW",53,"W",87,"VK_W",i,i],[0,33,"KeyX",54,"X",88,"VK_X",i,i],[0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[0,36,"Digit1",22,"1",49,"VK_1",i,i],[0,37,"Digit2",23,"2",50,"VK_2",i,i],[0,38,"Digit3",24,"3",51,"VK_3",i,i],[0,39,"Digit4",25,"4",52,"VK_4",i,i],[0,40,"Digit5",26,"5",53,"VK_5",i,i],[0,41,"Digit6",27,"6",54,"VK_6",i,i],[0,42,"Digit7",28,"7",55,"VK_7",i,i],[0,43,"Digit8",29,"8",56,"VK_8",i,i],[0,44,"Digit9",30,"9",57,"VK_9",i,i],[0,45,"Digit0",21,"0",48,"VK_0",i,i],[1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,i,0,i,i,i],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[1,64,"F1",59,"F1",112,"VK_F1",i,i],[1,65,"F2",60,"F2",113,"VK_F2",i,i],[1,66,"F3",61,"F3",114,"VK_F3",i,i],[1,67,"F4",62,"F4",115,"VK_F4",i,i],[1,68,"F5",63,"F5",116,"VK_F5",i,i],[1,69,"F6",64,"F6",117,"VK_F6",i,i],[1,70,"F7",65,"F7",118,"VK_F7",i,i],[1,71,"F8",66,"F8",119,"VK_F8",i,i],[1,72,"F9",67,"F9",120,"VK_F9",i,i],[1,73,"F10",68,"F10",121,"VK_F10",i,i],[1,74,"F11",69,"F11",122,"VK_F11",i,i],[1,75,"F12",70,"F12",123,"VK_F12",i,i],[1,76,"PrintScreen",0,i,0,i,i,i],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",i,i],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[1,80,"Home",14,"Home",36,"VK_HOME",i,i],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[1,83,"End",13,"End",35,"VK_END",i,i],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",i,i],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",i,i],[1,94,"NumpadEnter",3,i,0,i,i,i],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",i,i],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",i,i],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",i,i],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",i,i],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",i,i],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",i,i],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",i,i],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",i,i],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",i,i],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",i,i],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",i,i],[1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[1,108,"Power",0,i,0,i,i,i],[1,109,"NumpadEqual",0,i,0,i,i,i],[1,110,"F13",71,"F13",124,"VK_F13",i,i],[1,111,"F14",72,"F14",125,"VK_F14",i,i],[1,112,"F15",73,"F15",126,"VK_F15",i,i],[1,113,"F16",74,"F16",127,"VK_F16",i,i],[1,114,"F17",75,"F17",128,"VK_F17",i,i],[1,115,"F18",76,"F18",129,"VK_F18",i,i],[1,116,"F19",77,"F19",130,"VK_F19",i,i],[1,117,"F20",78,"F20",0,"VK_F20",i,i],[1,118,"F21",79,"F21",0,"VK_F21",i,i],[1,119,"F22",80,"F22",0,"VK_F22",i,i],[1,120,"F23",81,"F23",0,"VK_F23",i,i],[1,121,"F24",82,"F24",0,"VK_F24",i,i],[1,122,"Open",0,i,0,i,i,i],[1,123,"Help",0,i,0,i,i,i],[1,124,"Select",0,i,0,i,i,i],[1,125,"Again",0,i,0,i,i,i],[1,126,"Undo",0,i,0,i,i,i],[1,127,"Cut",0,i,0,i,i,i],[1,128,"Copy",0,i,0,i,i,i],[1,129,"Paste",0,i,0,i,i,i],[1,130,"Find",0,i,0,i,i,i],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,136,"KanaMode",0,i,0,i,i,i],[0,137,"IntlYen",0,i,0,i,i,i],[1,138,"Convert",0,i,0,i,i,i],[1,139,"NonConvert",0,i,0,i,i,i],[1,140,"Lang1",0,i,0,i,i,i],[1,141,"Lang2",0,i,0,i,i,i],[1,142,"Lang3",0,i,0,i,i,i],[1,143,"Lang4",0,i,0,i,i,i],[1,144,"Lang5",0,i,0,i,i,i],[1,145,"Abort",0,i,0,i,i,i],[1,146,"Props",0,i,0,i,i,i],[1,147,"NumpadParenLeft",0,i,0,i,i,i],[1,148,"NumpadParenRight",0,i,0,i,i,i],[1,149,"NumpadBackspace",0,i,0,i,i,i],[1,150,"NumpadMemoryStore",0,i,0,i,i,i],[1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[1,152,"NumpadMemoryClear",0,i,0,i,i,i],[1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",i,i],[1,156,"NumpadClearEntry",0,i,0,i,i,i],[1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[1,0,i,6,"Alt",18,"VK_MENU",i,i],[1,0,i,57,"Meta",91,"VK_COMMAND",i,i],[1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[1,165,"BrightnessUp",0,i,0,i,i,i],[1,166,"BrightnessDown",0,i,0,i,i,i],[1,167,"MediaPlay",0,i,0,i,i,i],[1,168,"MediaRecord",0,i,0,i,i,i],[1,169,"MediaFastForward",0,i,0,i,i,i],[1,170,"MediaRewind",0,i,0,i,i,i],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,174,"Eject",0,i,0,i,i,i],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,180,"SelectTask",0,i,0,i,i,i],[1,181,"LaunchScreenSaver",0,i,0,i,i,i],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[1,189,"ZoomToggle",0,i,0,i,i,i],[1,190,"MailReply",0,i,0,i,i,i],[1,191,"MailForward",0,i,0,i,i,i],[1,192,"MailSend",0,i,0,i,i,i],[1,0,i,114,"KeyInComposition",229,i,i,i],[1,0,i,116,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,0,i,96,"OEM_8",223,"VK_OEM_8",i,i],[1,0,i,0,i,0,"VK_KANA",i,i],[1,0,i,0,i,0,"VK_HANGUL",i,i],[1,0,i,0,i,0,"VK_JUNJA",i,i],[1,0,i,0,i,0,"VK_FINAL",i,i],[1,0,i,0,i,0,"VK_HANJA",i,i],[1,0,i,0,i,0,"VK_KANJI",i,i],[1,0,i,0,i,0,"VK_CONVERT",i,i],[1,0,i,0,i,0,"VK_NONCONVERT",i,i],[1,0,i,0,i,0,"VK_ACCEPT",i,i],[1,0,i,0,i,0,"VK_MODECHANGE",i,i],[1,0,i,0,i,0,"VK_SELECT",i,i],[1,0,i,0,i,0,"VK_PRINT",i,i],[1,0,i,0,i,0,"VK_EXECUTE",i,i],[1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[1,0,i,0,i,0,"VK_HELP",i,i],[1,0,i,0,i,0,"VK_APPS",i,i],[1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[1,0,i,0,i,0,"VK_PACKET",i,i],[1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[1,0,i,0,i,0,"VK_ATTN",i,i],[1,0,i,0,i,0,"VK_CRSEL",i,i],[1,0,i,0,i,0,"VK_EXSEL",i,i],[1,0,i,0,i,0,"VK_EREOF",i,i],[1,0,i,0,i,0,"VK_PLAY",i,i],[1,0,i,0,i,0,"VK_ZOOM",i,i],[1,0,i,0,i,0,"VK_NONAME",i,i],[1,0,i,0,i,0,"VK_PA1",i,i],[1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],b=[],l=[];for(let a of c){let[w,E,D,L,k,R,O,$,N]=a;if(l[E]||(l[E]=!0,x[E]=D,v[D]=E,f[D.toLowerCase()]=E,w&&(d[E]=L,L!==0&&L!==3&&L!==5&&L!==4&&L!==6&&L!==57&&(o[L]=E))),!b[L]){if(b[L]=!0,!k)throw new Error(`String representation missing for key code ${L} around scan code ${D}`);B.define(L,k),u.define(L,$||k),I.define(L,N||$||k)}R&&(_[R]=L),O&&(A[O]=L)}o[3]=46})(),function(i){i.toString=function(c){return B.keyCodeToStr(c)},i.fromString=function(c){return B.strToKeyCode(c)},i.toUserSettingsUS=function(c){return u.keyCodeToStr(c)},i.toUserSettingsGeneral=function(c){return I.keyCodeToStr(c)},i.fromUserSettings=function(c){return u.strToKeyCode(c)||I.strToKeyCode(c)},i.toElectronAccelerator=function(c){if(c>=98&&c<=113)return null;switch(c){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return B.keyCodeToStr(c)}}(h||(h={}))},8030:(ut,Ie,t)=>{"use strict";t.d(Ie,{X4:()=>I,jC:()=>_,r6:()=>A,xo:()=>u});var m=t(3580);class B{constructor(f,d,o=d){this.modifierLabels=[null],this.modifierLabels[2]=f,this.modifierLabels[1]=d,this.modifierLabels[3]=o}toLabel(f,d,o){if(d.length===0)return null;let h=[];for(let r=0,i=d.length;r<i;r++){let c=d[r],b=o(c);if(b===null)return null;h[r]=x(c,b,this.modifierLabels[f])}return h.join(" ")}}let u=new B({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:m.NC({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m.NC({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m.NC({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m.NC({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m.NC({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m.NC({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m.NC({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m.NC({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),I=new B({ctrlKey:m.NC({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m.NC({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m.NC({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:m.NC({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m.NC({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m.NC({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m.NC({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m.NC({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m.NC({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m.NC({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m.NC({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m.NC({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),_=new B({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),A=new B({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function x(v,f,d){if(f===null)return"";let o=[];return v.ctrlKey&&o.push(d.ctrlKey),v.shiftKey&&o.push(d.shiftKey),v.altKey&&o.push(d.altKey),v.metaKey&&o.push(d.metaKey),f!==""&&o.push(f),o.join(d.separator)}},8313:(ut,Ie,t)=>{"use strict";t.d(Ie,{$M:()=>I,Z9:()=>B,aZ:()=>A,f1:()=>x});var m=t(7301);function B(v,f){if(typeof v=="number"){if(v===0)return null;let d=(65535&v)>>>0,o=(4294901760&v)>>>16;return new _(o!==0?[u(d,f),u(o,f)]:[u(d,f)])}{let d=[];for(let o=0;o<v.length;o++)d.push(u(v[o],f));return new _(d)}}function u(v,f){let d=!!(2048&v),o=!!(256&v);return new I(f===2?o:d,!!(1024&v),!!(512&v),f===2?d:o,255&v)}class I{constructor(f,d,o,h,r){this.ctrlKey=f,this.shiftKey=d,this.altKey=o,this.metaKey=h,this.keyCode=r}equals(f){return f instanceof I&&this.ctrlKey===f.ctrlKey&&this.shiftKey===f.shiftKey&&this.altKey===f.altKey&&this.metaKey===f.metaKey&&this.keyCode===f.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class _{constructor(f){if(f.length===0)throw(0,m.b1)("chords");this.chords=f}}class A{constructor(f,d,o,h,r,i){this.ctrlKey=f,this.shiftKey=d,this.altKey=o,this.metaKey=h,this.keyLabel=r,this.keyAriaLabel=i}}class x{}},9579:(ut,Ie,t)=>{"use strict";t.d(Ie,{o:()=>m});class m{constructor(u){this.executor=u,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(u){this._error=u}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}},5976:(ut,Ie,t)=>{"use strict";t.d(Ie,{B9:()=>f,F8:()=>d,JT:()=>r,Jz:()=>l,L6:()=>c,OF:()=>o,SL:()=>h,Wf:()=>v,XK:()=>i,b2:()=>a,dk:()=>x,dt:()=>b});var m=t(8289),B=t(3725);let u=null;function I(w){return u==null||u.trackDisposable(w),w}function _(w){u==null||u.markAsDisposed(w)}function A(w,E){u==null||u.setParent(w,E)}function x(w){return u==null||u.markAsSingleton(w),w}function v(w){return typeof w.dispose=="function"&&w.dispose.length===0}function f(w){if(B.$.is(w)){let E=[];for(let D of w)if(D)try{D.dispose()}catch(L){E.push(L)}if(E.length===1)throw E[0];if(E.length>1)throw new AggregateError(E,"Encountered errors while disposing of store");return Array.isArray(w)?[]:w}if(w)return w.dispose(),w}function d(...w){let E=o(()=>f(w));return function(D,L){if(u)for(let k of D)u.setParent(k,L)}(w,E),E}function o(w){let E=I({dispose:(0,m.I)(()=>{_(E),w()})});return E}class h{constructor(){this._toDispose=new Set,this._isDisposed=!1,I(this)}dispose(){this._isDisposed||(_(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{f(this._toDispose)}finally{this._toDispose.clear()}}add(E){if(!E)return E;if(E===this)throw new Error("Cannot register a disposable on itself!");return A(E,this),this._isDisposed?h.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(E),E}}h.DISABLE_DISPOSED_WARNING=!1;class r{constructor(){this._store=new h,I(this),A(this._store,this)}dispose(){_(this),this._store.dispose()}_register(E){if(E===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(E)}}r.None=Object.freeze({dispose(){}});class i{constructor(){this._isDisposed=!1,I(this)}get value(){return this._isDisposed?void 0:this._value}set value(E){var D;this._isDisposed||E===this._value||((D=this._value)===null||D===void 0||D.dispose(),E&&A(E,this),this._value=E)}clear(){this.value=void 0}dispose(){var E;this._isDisposed=!0,_(this),(E=this._value)===null||E===void 0||E.dispose(),this._value=void 0}}class c{constructor(E){this._disposable=E,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter==0&&this._disposable.dispose(),this}}class b{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1,I(this)}set(E){let D=E;return this.unset=()=>D=void 0,this.isset=()=>D!==void 0,this.dispose=()=>{D&&(D(),D=void 0,_(this))},this}}class l{constructor(E){this.object=E}dispose(){}}class a{constructor(){this._store=new Map,this._isDisposed=!1,I(this)}dispose(){_(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{f(this._store.values())}finally{this._store.clear()}}get(E){return this._store.get(E)}set(E,D,L=!1){var k;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),L||(k=this._store.get(E))===null||k===void 0||k.dispose(),this._store.set(E,D)}deleteAndDispose(E){var D;(D=this._store.get(E))===null||D===void 0||D.dispose(),this._store.delete(E)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}},1741:(ut,Ie,t)=>{"use strict";t.d(Ie,{S:()=>B});class m{constructor(I){this.element=I,this.next=m.Undefined,this.prev=m.Undefined}}m.Undefined=new m(void 0);class B{constructor(){this._first=m.Undefined,this._last=m.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===m.Undefined}clear(){let I=this._first;for(;I!==m.Undefined;){let _=I.next;I.prev=m.Undefined,I.next=m.Undefined,I=_}this._first=m.Undefined,this._last=m.Undefined,this._size=0}unshift(I){return this._insert(I,!1)}push(I){return this._insert(I,!0)}_insert(I,_){let A=new m(I);if(this._first===m.Undefined)this._first=A,this._last=A;else if(_){let v=this._last;this._last=A,A.prev=v,v.next=A}else{let v=this._first;this._first=A,A.next=v,v.prev=A}this._size+=1;let x=!1;return()=>{x||(x=!0,this._remove(A))}}shift(){if(this._first!==m.Undefined){let I=this._first.element;return this._remove(this._first),I}}pop(){if(this._last!==m.Undefined){let I=this._last.element;return this._remove(this._last),I}}_remove(I){if(I.prev!==m.Undefined&&I.next!==m.Undefined){let _=I.prev;_.next=I.next,I.next.prev=_}else I.prev===m.Undefined&&I.next===m.Undefined?(this._first=m.Undefined,this._last=m.Undefined):I.next===m.Undefined?(this._last=this._last.prev,this._last.next=m.Undefined):I.prev===m.Undefined&&(this._first=this._first.next,this._first.prev=m.Undefined);this._size-=1}*[Symbol.iterator](){let I=this._first;for(;I!==m.Undefined;)yield I.element,I=I.next}}},3702:(ut,Ie,t)=>{"use strict";var m,B;t.d(Ie,{Y9:()=>I,z6:()=>A});class u{constructor(v,f){this.uri=v,this.value=f}}class I{constructor(v,f){this[m]="ResourceMap",v instanceof I?(this.map=new Map(v.map),this.toKey=f!=null?f:I.defaultToKey):(this.map=new Map,this.toKey=v!=null?v:I.defaultToKey)}set(v,f){return this.map.set(this.toKey(v),new u(v,f)),this}get(v){var f;return(f=this.map.get(this.toKey(v)))===null||f===void 0?void 0:f.value}has(v){return this.map.has(this.toKey(v))}get size(){return this.map.size}clear(){this.map.clear()}delete(v){return this.map.delete(this.toKey(v))}forEach(v,f){f!==void 0&&(v=v.bind(f));for(let[d,o]of this.map)v(o.value,o.uri,this)}*values(){for(let v of this.map.values())yield v.value}*keys(){for(let v of this.map.values())yield v.uri}*entries(){for(let v of this.map.values())yield[v.uri,v.value]}*[(m=Symbol.toStringTag,Symbol.iterator)](){for(let[,v]of this.map)yield[v.uri,v.value]}}I.defaultToKey=x=>x.toString();class _{constructor(){this[B]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var v;return(v=this._head)===null||v===void 0?void 0:v.value}get last(){var v;return(v=this._tail)===null||v===void 0?void 0:v.value}has(v){return this._map.has(v)}get(v,f=0){let d=this._map.get(v);if(d)return f!==0&&this.touch(d,f),d.value}set(v,f,d=0){let o=this._map.get(v);if(o)o.value=f,d!==0&&this.touch(o,d);else{switch(o={key:v,value:f,next:void 0,previous:void 0},d){case 0:case 2:default:this.addItemLast(o);break;case 1:this.addItemFirst(o)}this._map.set(v,o),this._size++}return this}delete(v){return!!this.remove(v)}remove(v){let f=this._map.get(v);if(f)return this._map.delete(v),this.removeItem(f),this._size--,f.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let v=this._head;return this._map.delete(v.key),this.removeItem(v),this._size--,v.value}forEach(v,f){let d=this._state,o=this._head;for(;o;){if(f?v.bind(f)(o.value,o.key,this):v(o.value,o.key,this),this._state!==d)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let v=this,f=this._state,d=this._head,o={[Symbol.iterator]:()=>o,next(){if(v._state!==f)throw new Error("LinkedMap got modified during iteration.");if(d){let h={value:d.key,done:!1};return d=d.next,h}return{value:void 0,done:!0}}};return o}values(){let v=this,f=this._state,d=this._head,o={[Symbol.iterator]:()=>o,next(){if(v._state!==f)throw new Error("LinkedMap got modified during iteration.");if(d){let h={value:d.value,done:!1};return d=d.next,h}return{value:void 0,done:!0}}};return o}entries(){let v=this,f=this._state,d=this._head,o={[Symbol.iterator]:()=>o,next(){if(v._state!==f)throw new Error("LinkedMap got modified during iteration.");if(d){let h={value:[d.key,d.value],done:!1};return d=d.next,h}return{value:void 0,done:!0}}};return o}[(B=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(v){if(v>=this.size)return;if(v===0)return void this.clear();let f=this._head,d=this.size;for(;f&&d>v;)this._map.delete(f.key),f=f.next,d--;this._head=f,this._size=d,f&&(f.previous=void 0),this._state++}addItemFirst(v){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");v.next=this._head,this._head.previous=v}else this._tail=v;this._head=v,this._state++}addItemLast(v){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");v.previous=this._tail,this._tail.next=v}else this._head=v;this._tail=v,this._state++}removeItem(v){if(v===this._head&&v===this._tail)this._head=void 0,this._tail=void 0;else if(v===this._head){if(!v.next)throw new Error("Invalid list");v.next.previous=void 0,this._head=v.next}else if(v===this._tail){if(!v.previous)throw new Error("Invalid list");v.previous.next=void 0,this._tail=v.previous}else{let f=v.next,d=v.previous;if(!f||!d)throw new Error("Invalid list");f.previous=d,d.next=f}v.next=void 0,v.previous=void 0,this._state++}touch(v,f){if(!this._head||!this._tail)throw new Error("Invalid list");if(f===1||f===2){if(f===1){if(v===this._head)return;let d=v.next,o=v.previous;v===this._tail?(o.next=void 0,this._tail=o):(d.previous=o,o.next=d),v.previous=void 0,v.next=this._head,this._head.previous=v,this._head=v,this._state++}else if(f===2){if(v===this._tail)return;let d=v.next,o=v.previous;v===this._head?(d.previous=void 0,this._head=d):(d.previous=o,o.next=d),v.next=void 0,v.previous=this._tail,this._tail.next=v,this._tail=v,this._state++}}}toJSON(){let v=[];return this.forEach((f,d)=>{v.push([d,f])}),v}fromJSON(v){this.clear();for(let[f,d]of v)this.set(f,d)}}class A extends _{constructor(v,f=1){super(),this._limit=v,this._ratio=Math.min(Math.max(0,f),1)}get limit(){return this._limit}set limit(v){this._limit=v,this.checkTrim()}get(v,f=2){return super.get(v,f)}peek(v){return super.get(v,0)}set(v,f){return super.set(v,f,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},3897:(ut,Ie,t)=>{"use strict";t.d(Ie,{Q:()=>u});var m=t(3060),B=t(666);function u(_){let A=JSON.parse(_);return A=I(A),A}function I(_,A=0){if(!_||A>200)return _;if(typeof _=="object"){switch(_.$mid){case 1:return B.o.revive(_);case 2:return new RegExp(_.source,_.flags);case 16:return new Date(_.source)}if(_ instanceof m.KN||_ instanceof Uint8Array)return _;if(Array.isArray(_))for(let x=0;x<_.length;++x)_[x]=I(_[x],A+1);else for(let x in _)Object.hasOwnProperty.call(_,x)&&(_[x]=I(_[x],A+1))}return _}},1170:(ut,Ie,t)=>{"use strict";t.d(Ie,{v:()=>m});let m=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"})},6663:(ut,Ie,t)=>{"use strict";t.d(Ie,{Gi:()=>x,WX:()=>_,lg:()=>m});var m,B=t(7301),u=t(1432),I=t(666);(function(f){f.inMemory="inmemory",f.vscode="vscode",f.internal="private",f.walkThrough="walkThrough",f.walkThroughSnippet="walkThroughSnippet",f.http="http",f.https="https",f.file="file",f.mailto="mailto",f.untitled="untitled",f.data="data",f.command="command",f.vscodeRemote="vscode-remote",f.vscodeRemoteResource="vscode-remote-resource",f.vscodeUserData="vscode-userdata",f.vscodeCustomEditor="vscode-custom-editor",f.vscodeNotebookCell="vscode-notebook-cell",f.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",f.vscodeNotebookCellOutput="vscode-notebook-cell-output",f.vscodeInteractive="vscode-interactive",f.vscodeInteractiveInput="vscode-interactive-input",f.vscodeSettings="vscode-settings",f.vscodeWorkspaceTrust="vscode-workspace-trust",f.vscodeTerminal="vscode-terminal",f.vscodeInteractiveSesssion="vscode-chat-editor",f.webviewPanel="webview-panel",f.vscodeWebview="vscode-webview",f.extension="extension",f.vscodeFileResource="vscode-file",f.tmp="tmp",f.vsls="vsls",f.vscodeSourceControl="vscode-scm"})(m||(m={}));let _=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${m.vscodeRemoteResource}`}setPreferredWebSchema(f){this._preferredWebSchema=f}rewrite(f){if(this._delegate)try{return this._delegate(f)}catch(c){return B.dL(c),f}let d=f.authority,o=this._hosts[d];o&&o.indexOf(":")!==-1&&o.indexOf("[")===-1&&(o=`[${o}]`);let h=this._ports[d],r=this._connectionTokens[d],i=`path=${encodeURIComponent(f.path)}`;return typeof r=="string"&&(i+=`&tkn=${encodeURIComponent(r)}`),I.o.from({scheme:u.$L?this._preferredWebSchema:m.vscodeRemoteResource,authority:`${o}:${h}`,path:this._remoteResourcesPath,query:i})}};class A{uriToBrowserUri(d){return d.scheme===m.vscodeRemote?_.rewrite(d):d.scheme===m.file&&(u.tY||u.n2&&u.li.origin===`${m.vscodeFileResource}://${A.FALLBACK_AUTHORITY}`)?d.with({scheme:m.vscodeFileResource,authority:d.authority||A.FALLBACK_AUTHORITY,query:null,fragment:null}):d}}A.FALLBACK_AUTHORITY="vscode-app";let x=new A;var v;(function(f){let d=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);f.CoopAndCoep=Object.freeze(d.get("3"));let o="vscode-coi";f.getHeadersFromQuery=function(h){let r;typeof h=="string"?r=new URL(h).searchParams:h instanceof URL?r=h.searchParams:I.o.isUri(h)&&(r=new URL(h.toString(!0)).searchParams);let i=r==null?void 0:r.get(o);if(i)return d.get(i)},f.addSearchParam=function(h,r,i){if(!globalThis.crossOriginIsolated)return;let c=r&&i?"3":i?"2":"1";h instanceof URLSearchParams?h.set(o,c):h[o]=c}})(v||(v={}))},9870:(ut,Ie,t)=>{"use strict";function m(I,_,A){return Math.min(Math.max(I,_),A)}t.d(Ie,{N:()=>u,nM:()=>B,uZ:()=>m});class B{constructor(){this._n=1,this._val=0}update(_){return this._val=this._val+(_-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class u{constructor(_){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(_),this._values.fill(0,0,_)}update(_){let A=this._values[this._index];return this._values[this._index]=_,this._index=(this._index+1)%this._values.length,this._sum-=A,this._sum+=_,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},6248:(ut,Ie,t)=>{"use strict";t.d(Ie,{$E:()=>f,I8:()=>B,IU:()=>d,_A:()=>u,fS:()=>v,jB:()=>x,rs:()=>_});var m=t(8401);function B(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;let h=Array.isArray(o)?[]:{};return Object.entries(o).forEach(([r,i])=>{h[r]=i&&typeof i=="object"?B(i):i}),h}function u(o){if(!o||typeof o!="object")return o;let h=[o];for(;h.length>0;){let r=h.shift();Object.freeze(r);for(let i in r)if(I.call(r,i)){let c=r[i];typeof c!="object"||Object.isFrozen(c)||(0,m.fU)(c)||h.push(c)}}return o}let I=Object.prototype.hasOwnProperty;function _(o,h){return A(o,h,new Set)}function A(o,h,r){if((0,m.Jp)(o))return o;let i=h(o);if(i!==void 0)return i;if(Array.isArray(o)){let c=[];for(let b of o)c.push(A(b,h,r));return c}if((0,m.Kn)(o)){if(r.has(o))throw new Error("Cannot clone recursive data-structure");r.add(o);let c={};for(let b in o)I.call(o,b)&&(c[b]=A(o[b],h,r));return r.delete(o),c}return o}function x(o,h,r=!0){return(0,m.Kn)(o)?((0,m.Kn)(h)&&Object.keys(h).forEach(i=>{i in o?r&&((0,m.Kn)(o[i])&&(0,m.Kn)(h[i])?x(o[i],h[i],r):o[i]=h[i]):o[i]=h[i]}),o):h}function v(o,h){if(o===h)return!0;if(o==null||h==null||typeof o!=typeof h||typeof o!="object"||Array.isArray(o)!==Array.isArray(h))return!1;let r,i;if(Array.isArray(o)){if(o.length!==h.length)return!1;for(r=0;r<o.length;r++)if(!v(o[r],h[r]))return!1}else{let c=[];for(i in o)c.push(i);c.sort();let b=[];for(i in h)b.push(i);if(b.sort(),!v(c,b))return!1;for(r=0;r<c.length;r++)if(!v(o[c[r]],h[c[r]]))return!1}return!0}function f(o){let h=[];for(let r of function(i){let c=[],b=Object.getPrototypeOf(i);for(;Object.prototype!==b;)c=c.concat(Object.getOwnPropertyNames(b)),b=Object.getPrototypeOf(b);return c}(o))typeof o[r]=="function"&&h.push(r);return h}function d(o,h){let r=c=>function(){let b=Array.prototype.slice.call(arguments,0);return h(c,b)},i={};for(let c of o)i[c]=r(c);return i}},2495:(ut,Ie,t)=>{"use strict";t.d(Ie,{EH:()=>A,nJ:()=>x,Dz:()=>f,nK:()=>I,rD:()=>o,GN:()=>c,aq:()=>r,uh:()=>m.uh,PS:()=>m.PS});var m=t(9869),B=t(7301),u=t(536);function I(l,a){return new _(l,a)}(0,m.Qv)(I);class _ extends m.hm{get debugName(){return typeof this._debugName=="function"?this._debugName():this._debugName}constructor(a,w){var E;super(),this._debugName=a,this.computeFn=w,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,(E=(0,u.jl)())===null||E===void 0||E.handleDerivedCreated(this)}onLastObserverRemoved(){this.state=0,this.value=void 0;for(let a of this.dependencies)a.removeObserver(this);this.dependencies.clear()}get(){if(this.observers.size===0){let a=this.computeFn(this);return this.onLastObserverRemoved(),a}do{if(this.state===1){this.state=3;for(let a of this.dependencies)if(a.reportChanges(),this.state===2)break}this._recomputeIfNeeded()}while(this.state!==3);return this.value}_recomputeIfNeeded(){var a;if(this.state===3)return;let w=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=w;let E=this.state!==0,D=this.value;this.state=3;try{this.value=this.computeFn(this)}finally{for(let k of this.dependenciesToBeRemoved)k.removeObserver(this);this.dependenciesToBeRemoved.clear()}let L=E&&D!==this.value;if((a=(0,u.jl)())===null||a===void 0||a.handleDerivedRecomputed(this,{oldValue:D,newValue:this.value,change:void 0,didChange:L}),L)for(let k of this.observers)k.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(){this.updateCount++;let a=this.updateCount===1;if(this.state===3&&(this.state=1,!a))for(let w of this.observers)w.handlePossibleChange(this);if(a)for(let w of this.observers)w.beginUpdate(this)}endUpdate(){if(this.updateCount--,this.updateCount===0){let a=[...this.observers];for(let w of a)w.endUpdate(this)}if(this.updateCount<0)throw new B.he}handlePossibleChange(a){if(this.state===3&&this.dependencies.has(a)){this.state=1;for(let w of this.observers)w.handlePossibleChange(this)}}handleChange(a,w){let E=this.state===3;if((this.state===1||E)&&this.dependencies.has(a)&&(this.state=2,E))for(let D of this.observers)D.handlePossibleChange(this)}readObservable(a){a.addObserver(this);let w=a.get();return this.dependencies.add(a),this.dependenciesToBeRemoved.delete(a),w}}function A(l,a){return new v(l,a,void 0)}function x(l,a,w){return new v(l,w,a.handleChange)}class v{constructor(a,w,E){var D;this.debugName=a,this.runFn=w,this._handleChange=E,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,(D=(0,u.jl)())===null||D===void 0||D.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(let a of this.dependencies)a.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var a;if(this.state===3)return;let w=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=w,this.state=3,(a=(0,u.jl)())===null||a===void 0||a.handleAutorunTriggered(this);try{this.runFn(this)}finally{for(let E of this.dependenciesToBeRemoved)E.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let a of this.dependencies)if(a.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--}handlePossibleChange(a){this.state===3&&this.dependencies.has(a)&&(this.state=1)}handleChange(a,w){this.dependencies.has(a)&&(!this._handleChange||this._handleChange({changedObservable:a,change:w,didChange:E=>E===a}))&&(this.state=2)}readObservable(a){if(this.disposed)return a.get();a.addObserver(this);let w=a.get();return this.dependencies.add(a),this.dependenciesToBeRemoved.delete(a),w}}function f(l){return new d(l)}(function(l){l.Observer=v})(A||(A={}));class d extends m.Nc{constructor(a){super(),this.value=a}get debugName(){return this.toString()}get(){return this.value}addObserver(a){}removeObserver(a){}toString(){return`Const: ${this.value}`}}function o(l,a){return new h(l,a)}class h extends m.hm{constructor(a,w){super(),this.event=a,this.getValue=w,this.hasValue=!1,this.handleEvent=E=>{var D;let L=this.getValue(E),k=!this.hasValue||this.value!==L;(D=(0,u.jl)())===null||D===void 0||D.handleFromEventObservableTriggered(this,{oldValue:this.value,newValue:L,change:void 0,didChange:k}),k&&(this.value=L,this.hasValue&&(0,m.PS)(R=>{for(let O of this.observers)R.updateObserver(O,this),O.handleChange(this,void 0)},()=>{let R=this.getDebugName();return"Event fired"+(R?`: ${R}`:"")}),this.hasValue=!0)}}getDebugName(){return(0,m.$P)(this.getValue)}get debugName(){let a=this.getDebugName();return"From Event"+(a?`: ${a}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this.getValue(void 0)}}function r(l,a){return new i(l,a)}(function(l){l.Observer=h})(o||(o={}));class i extends m.hm{constructor(a,w){super(),this.debugName=a,this.event=w,this.handleEvent=()=>{(0,m.PS)(E=>{for(let D of this.observers)E.updateObserver(D,this),D.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function c(l){return new b(l)}class b extends m.hm{constructor(a){super(),this.debugName=a}trigger(a,w){if(a)for(let E of this.observers)a.updateObserver(E,this),E.handleChange(this,w);else(0,m.PS)(E=>{this.trigger(E,w)},()=>`Trigger signal ${this.debugName}`)}get(){}}},9869:(ut,Ie,t)=>{"use strict";t.d(Ie,{$P:()=>v,DN:()=>o,Nc:()=>I,PS:()=>A,Qv:()=>u,hm:()=>_,uh:()=>f});var m=t(536);let B;function u(r){B=r}class I{get TChange(){return null}reportChanges(){this.get()}read(i){return i?i.readObservable(this):this.get()}map(i){return B(()=>{let c=v(i);return c!==void 0?c:`${this.debugName} (mapped)`},c=>i(this.read(c),c))}}class _ extends I{constructor(){super(...arguments),this.observers=new Set}addObserver(i){let c=this.observers.size;this.observers.add(i),c===0&&this.onFirstObserverAdded()}removeObserver(i){this.observers.delete(i)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function A(r,i){var c,b;let l=new x(r,i);try{(c=(0,m.jl)())===null||c===void 0||c.handleBeginTransaction(l),r(l)}finally{l.finish(),(b=(0,m.jl)())===null||b===void 0||b.handleEndTransaction()}}class x{constructor(i,c){this.fn=i,this._getDebugName=c,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():v(this.fn)}updateObserver(i,c){this.updatingObservers.push({observer:i,observable:c}),i.beginUpdate(c)}finish(){let i=this.updatingObservers;this.updatingObservers=null;for(let{observer:c,observable:b}of i)c.endUpdate(b)}}function v(r){let i=r.toString(),c=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(i),b=c?c[1]:void 0;return b==null?void 0:b.trim()}function f(r,i){return new d(r,i)}class d extends _{constructor(i,c){super(),this.debugName=i,this._value=c}get(){return this._value}set(i,c,b){var l;if(this._value===i)return;let a;c||(c=a=new x(()=>{},()=>`Setting ${this.debugName}`));try{let w=this._value;this._setValue(i),(l=(0,m.jl)())===null||l===void 0||l.handleObservableChanged(this,{oldValue:w,newValue:i,change:b,didChange:!0});for(let E of this.observers)c.updateObserver(E,this),E.handleChange(this,b)}finally{a&&a.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(i){this._value=i}}function o(r,i){return new h(r,i)}class h extends d{_setValue(i){this._value!==i&&(this._value&&this._value.dispose(),this._value=i)}dispose(){var i;(i=this._value)===null||i===void 0||i.dispose()}}},536:(ut,Ie,t)=>{"use strict";let m;function B(d){m=d}function u(){return m}t.d(Ie,{EK:()=>B,Qy:()=>I,jl:()=>u});class I{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}textToConsoleArgs(o){return function(h){let r=new Array,i={},c="";(function l(a){if("length"in a)for(let w of a)w&&l(w);else"text"in a?(c+=`%c${a.text}`,r.push(a.style),a.data&&Object.assign(i,a.data)):"data"in a&&Object.assign(i,a.data)})(h);let b=[c,...r];return Object.keys(i).length>0&&b.push(i),b}([_(f("|  ",this.indentation)),o])}formatInfo(o){return o.didChange?[_(" "),x(v(o.oldValue,70),{color:"red",strikeThrough:!0}),_(" "),x(v(o.newValue,60),{color:"green"})]:[_(" (unchanged)")]}handleObservableChanged(o,h){console.log(...this.textToConsoleArgs([A("observable value changed"),x(o.debugName,{color:"BlueViolet"}),...this.formatInfo(h)]))}formatChanges(o){if(o.size!==0)return x(" (changed deps: "+[...o].map(h=>h.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(o){let h=o.handleChange;this.changedObservablesSets.set(o,new Set),o.handleChange=(r,i)=>(this.changedObservablesSets.get(o).add(r),h.apply(o,[r,i]))}handleDerivedRecomputed(o,h){let r=this.changedObservablesSets.get(o);console.log(...this.textToConsoleArgs([A("derived recomputed"),x(o.debugName,{color:"BlueViolet"}),...this.formatInfo(h),this.formatChanges(r)])),r.clear()}handleFromEventObservableTriggered(o,h){console.log(...this.textToConsoleArgs([A("observable from event triggered"),x(o.debugName,{color:"BlueViolet"}),...this.formatInfo(h)]))}handleAutorunCreated(o){let h=o.handleChange;this.changedObservablesSets.set(o,new Set),o.handleChange=(r,i)=>(this.changedObservablesSets.get(o).add(r),h.apply(o,[r,i]))}handleAutorunTriggered(o){let h=this.changedObservablesSets.get(o);console.log(...this.textToConsoleArgs([A("autorun"),x(o.debugName,{color:"BlueViolet"}),this.formatChanges(h)])),h.clear()}handleBeginTransaction(o){let h=o.getDebugName();h===void 0&&(h=""),console.log(...this.textToConsoleArgs([A("transaction"),x(h,{color:"BlueViolet"})])),this.indentation++}handleEndTransaction(){this.indentation--}}function _(d){return x(d,{color:"black"})}function A(d){return x(function(o,h){for(;o.length<10;)o+=" ";return o}(`${d}: `),{color:"black",bold:!0})}function x(d,o={color:"black"}){let h={color:o.color};return o.strikeThrough&&(h["text-decoration"]="line-through"),o.bold&&(h["font-weight"]="bold"),{text:d,style:(r=h,Object.entries(r).reduce((i,[c,b])=>`${i}${c}:${b};`,""))};var r}function v(d,o){switch(typeof d){case"number":default:return""+d;case"string":return d.length+2<=o?`"${d}"`:`"${d.substr(0,o-7)}"+...`;case"boolean":return d?"true":"false";case"undefined":return"undefined";case"object":return d===null?"null":Array.isArray(d)?function(h,r){let i="[ ",c=!0;for(let b of h){if(c||(i+=", "),i.length-5>r){i+="...";break}c=!1,i+=`${v(b,r-i.length)}`}return i+=" ]",i}(d,o):function(h,r){let i="{ ",c=!0;for(let[b,l]of Object.entries(h)){if(c||(i+=", "),i.length-5>r){i+="...";break}c=!1,i+=`${b}: ${v(l,r-i.length)}`}return i+=" }",i}(d,o);case"symbol":return d.toString();case"function":return`[[Function${d.name?" "+d.name:""}]]`}}function f(d,o){let h="";for(let r=1;r<=o;r++)h+=d;return h}},8721:(ut,Ie,t)=>{"use strict";t.d(Ie,{EZ:()=>O,XX:()=>R,DZ:()=>$,Fv:()=>D,KR:()=>E,Gf:()=>k,DB:()=>L,ir:()=>N,Ku:()=>a});var m=t(1432);let B;if(m.li.vscode!==void 0&&m.li.vscode.process!==void 0){let T=m.li.vscode.process;B={get platform(){return T.platform},get arch(){return T.arch},get env(){return T.env},cwd:()=>T.cwd()}}else B=typeof process!="undefined"?{get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd:()=>process.env.VSCODE_CWD||process.cwd()}:{get platform(){return m.ED?"win32":m.dz?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};let u=B.cwd,I=B.env,_=B.platform,A=46,x=47,v=92,f=58;class d extends Error{constructor(C,W,K){let j;typeof W=="string"&&W.indexOf("not ")===0?(j="must not be",W=W.replace(/^not /,"")):j="must be";let F=C.indexOf(".")!==-1?"property":"argument",H=`The "${C}" ${F} ${j} of type ${W}`;H+=". Received type "+typeof K,super(H),this.code="ERR_INVALID_ARG_TYPE"}}function o(T,C){if(typeof T!="string")throw new d(C,"string",T)}let h=_==="win32";function r(T){return T===x||T===v}function i(T){return T===x}function c(T){return T>=65&&T<=90||T>=97&&T<=122}function b(T,C,W,K){let j="",F=0,H=-1,z=0,J=0;for(let oe=0;oe<=T.length;++oe){if(oe<T.length)J=T.charCodeAt(oe);else{if(K(J))break;J=x}if(K(J)){if(!(H===oe-1||z===1))if(z===2){if(j.length<2||F!==2||j.charCodeAt(j.length-1)!==A||j.charCodeAt(j.length-2)!==A){if(j.length>2){let fe=j.lastIndexOf(W);fe===-1?(j="",F=0):(j=j.slice(0,fe),F=j.length-1-j.lastIndexOf(W)),H=oe,z=0;continue}if(j.length!==0){j="",F=0,H=oe,z=0;continue}}C&&(j+=j.length>0?`${W}..`:"..",F=2)}else j.length>0?j+=`${W}${T.slice(H+1,oe)}`:j=T.slice(H+1,oe),F=oe-H-1;H=oe,z=0}else J===A&&z!==-1?++z:z=-1}return j}function l(T,C){(function(j,F){if(j===null||typeof j!="object")throw new d("pathObject","Object",j)})(C);let W=C.dir||C.root,K=C.base||`${C.name||""}${C.ext||""}`;return W?W===C.root?`${W}${K}`:`${W}${T}${K}`:K}let a={resolve(...T){let C="",W="",K=!1;for(let j=T.length-1;j>=-1;j--){let F;if(j>=0){if(F=T[j],o(F,"path"),F.length===0)continue}else C.length===0?F=u():(F=I[`=${C}`]||u(),(F===void 0||F.slice(0,2).toLowerCase()!==C.toLowerCase()&&F.charCodeAt(2)===v)&&(F=`${C}\\`));let H=F.length,z=0,J="",oe=!1,fe=F.charCodeAt(0);if(H===1)r(fe)&&(z=1,oe=!0);else if(r(fe))if(oe=!0,r(F.charCodeAt(1))){let q=2,p=q;for(;q<H&&!r(F.charCodeAt(q));)q++;if(q<H&&q!==p){let re=F.slice(p,q);for(p=q;q<H&&r(F.charCodeAt(q));)q++;if(q<H&&q!==p){for(p=q;q<H&&!r(F.charCodeAt(q));)q++;q!==H&&q===p||(J=`\\\\${re}\\${F.slice(p,q)}`,z=q)}}}else z=1;else c(fe)&&F.charCodeAt(1)===f&&(J=F.slice(0,2),z=2,H>2&&r(F.charCodeAt(2))&&(oe=!0,z=3));if(J.length>0)if(C.length>0){if(J.toLowerCase()!==C.toLowerCase())continue}else C=J;if(K){if(C.length>0)break}else if(W=`${F.slice(z)}\\${W}`,K=oe,oe&&C.length>0)break}return W=b(W,!K,"\\",r),K?`${C}\\${W}`:`${C}${W}`||"."},normalize(T){o(T,"path");let C=T.length;if(C===0)return".";let W,K=0,j=!1,F=T.charCodeAt(0);if(C===1)return i(F)?"\\":T;if(r(F))if(j=!0,r(T.charCodeAt(1))){let z=2,J=z;for(;z<C&&!r(T.charCodeAt(z));)z++;if(z<C&&z!==J){let oe=T.slice(J,z);for(J=z;z<C&&r(T.charCodeAt(z));)z++;if(z<C&&z!==J){for(J=z;z<C&&!r(T.charCodeAt(z));)z++;if(z===C)return`\\\\${oe}\\${T.slice(J)}\\`;z!==J&&(W=`\\\\${oe}\\${T.slice(J,z)}`,K=z)}}}else K=1;else c(F)&&T.charCodeAt(1)===f&&(W=T.slice(0,2),K=2,C>2&&r(T.charCodeAt(2))&&(j=!0,K=3));let H=K<C?b(T.slice(K),!j,"\\",r):"";return H.length!==0||j||(H="."),H.length>0&&r(T.charCodeAt(C-1))&&(H+="\\"),W===void 0?j?`\\${H}`:H:j?`${W}\\${H}`:`${W}${H}`},isAbsolute(T){o(T,"path");let C=T.length;if(C===0)return!1;let W=T.charCodeAt(0);return r(W)||C>2&&c(W)&&T.charCodeAt(1)===f&&r(T.charCodeAt(2))},join(...T){if(T.length===0)return".";let C,W;for(let F=0;F<T.length;++F){let H=T[F];o(H,"path"),H.length>0&&(C===void 0?C=W=H:C+=`\\${H}`)}if(C===void 0)return".";let K=!0,j=0;if(typeof W=="string"&&r(W.charCodeAt(0))){++j;let F=W.length;F>1&&r(W.charCodeAt(1))&&(++j,F>2&&(r(W.charCodeAt(2))?++j:K=!1))}if(K){for(;j<C.length&&r(C.charCodeAt(j));)j++;j>=2&&(C=`\\${C.slice(j)}`)}return a.normalize(C)},relative(T,C){if(o(T,"from"),o(C,"to"),T===C)return"";let W=a.resolve(T),K=a.resolve(C);if(W===K||(T=W.toLowerCase())===(C=K.toLowerCase()))return"";let j=0;for(;j<T.length&&T.charCodeAt(j)===v;)j++;let F=T.length;for(;F-1>j&&T.charCodeAt(F-1)===v;)F--;let H=F-j,z=0;for(;z<C.length&&C.charCodeAt(z)===v;)z++;let J=C.length;for(;J-1>z&&C.charCodeAt(J-1)===v;)J--;let oe=J-z,fe=H<oe?H:oe,q=-1,p=0;for(;p<fe;p++){let ne=T.charCodeAt(j+p);if(ne!==C.charCodeAt(z+p))break;ne===v&&(q=p)}if(p!==fe){if(q===-1)return K}else{if(oe>fe){if(C.charCodeAt(z+p)===v)return K.slice(z+p+1);if(p===2)return K.slice(z+p)}H>fe&&(T.charCodeAt(j+p)===v?q=p:p===2&&(q=3)),q===-1&&(q=0)}let re="";for(p=j+q+1;p<=F;++p)p!==F&&T.charCodeAt(p)!==v||(re+=re.length===0?"..":"\\..");return z+=q,re.length>0?`${re}${K.slice(z,J)}`:(K.charCodeAt(z)===v&&++z,K.slice(z,J))},toNamespacedPath(T){if(typeof T!="string"||T.length===0)return T;let C=a.resolve(T);if(C.length<=2)return T;if(C.charCodeAt(0)===v){if(C.charCodeAt(1)===v){let W=C.charCodeAt(2);if(W!==63&&W!==A)return`\\\\?\\UNC\\${C.slice(2)}`}}else if(c(C.charCodeAt(0))&&C.charCodeAt(1)===f&&C.charCodeAt(2)===v)return`\\\\?\\${C}`;return T},dirname(T){o(T,"path");let C=T.length;if(C===0)return".";let W=-1,K=0,j=T.charCodeAt(0);if(C===1)return r(j)?T:".";if(r(j)){if(W=K=1,r(T.charCodeAt(1))){let z=2,J=z;for(;z<C&&!r(T.charCodeAt(z));)z++;if(z<C&&z!==J){for(J=z;z<C&&r(T.charCodeAt(z));)z++;if(z<C&&z!==J){for(J=z;z<C&&!r(T.charCodeAt(z));)z++;if(z===C)return T;z!==J&&(W=K=z+1)}}}}else c(j)&&T.charCodeAt(1)===f&&(W=C>2&&r(T.charCodeAt(2))?3:2,K=W);let F=-1,H=!0;for(let z=C-1;z>=K;--z)if(r(T.charCodeAt(z))){if(!H){F=z;break}}else H=!1;if(F===-1){if(W===-1)return".";F=W}return T.slice(0,F)},basename(T,C){C!==void 0&&o(C,"ext"),o(T,"path");let W,K=0,j=-1,F=!0;if(T.length>=2&&c(T.charCodeAt(0))&&T.charCodeAt(1)===f&&(K=2),C!==void 0&&C.length>0&&C.length<=T.length){if(C===T)return"";let H=C.length-1,z=-1;for(W=T.length-1;W>=K;--W){let J=T.charCodeAt(W);if(r(J)){if(!F){K=W+1;break}}else z===-1&&(F=!1,z=W+1),H>=0&&(J===C.charCodeAt(H)?--H==-1&&(j=W):(H=-1,j=z))}return K===j?j=z:j===-1&&(j=T.length),T.slice(K,j)}for(W=T.length-1;W>=K;--W)if(r(T.charCodeAt(W))){if(!F){K=W+1;break}}else j===-1&&(F=!1,j=W+1);return j===-1?"":T.slice(K,j)},extname(T){o(T,"path");let C=0,W=-1,K=0,j=-1,F=!0,H=0;T.length>=2&&T.charCodeAt(1)===f&&c(T.charCodeAt(0))&&(C=K=2);for(let z=T.length-1;z>=C;--z){let J=T.charCodeAt(z);if(r(J)){if(!F){K=z+1;break}}else j===-1&&(F=!1,j=z+1),J===A?W===-1?W=z:H!==1&&(H=1):W!==-1&&(H=-1)}return W===-1||j===-1||H===0||H===1&&W===j-1&&W===K+1?"":T.slice(W,j)},format:l.bind(null,"\\"),parse(T){o(T,"path");let C={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return C;let W=T.length,K=0,j=T.charCodeAt(0);if(W===1)return r(j)?(C.root=C.dir=T,C):(C.base=C.name=T,C);if(r(j)){if(K=1,r(T.charCodeAt(1))){let q=2,p=q;for(;q<W&&!r(T.charCodeAt(q));)q++;if(q<W&&q!==p){for(p=q;q<W&&r(T.charCodeAt(q));)q++;if(q<W&&q!==p){for(p=q;q<W&&!r(T.charCodeAt(q));)q++;q===W?K=q:q!==p&&(K=q+1)}}}}else if(c(j)&&T.charCodeAt(1)===f){if(W<=2)return C.root=C.dir=T,C;if(K=2,r(T.charCodeAt(2))){if(W===3)return C.root=C.dir=T,C;K=3}}K>0&&(C.root=T.slice(0,K));let F=-1,H=K,z=-1,J=!0,oe=T.length-1,fe=0;for(;oe>=K;--oe)if(j=T.charCodeAt(oe),r(j)){if(!J){H=oe+1;break}}else z===-1&&(J=!1,z=oe+1),j===A?F===-1?F=oe:fe!==1&&(fe=1):F!==-1&&(fe=-1);return z!==-1&&(F===-1||fe===0||fe===1&&F===z-1&&F===H+1?C.base=C.name=T.slice(H,z):(C.name=T.slice(H,F),C.base=T.slice(H,z),C.ext=T.slice(F,z))),C.dir=H>0&&H!==K?T.slice(0,H-1):C.root,C},sep:"\\",delimiter:";",win32:null,posix:null},w=(()=>{if(h){let T=/\\/g;return()=>{let C=u().replace(T,"/");return C.slice(C.indexOf("/"))}}return()=>u()})(),E={resolve(...T){let C="",W=!1;for(let K=T.length-1;K>=-1&&!W;K--){let j=K>=0?T[K]:w();o(j,"path"),j.length!==0&&(C=`${j}/${C}`,W=j.charCodeAt(0)===x)}return C=b(C,!W,"/",i),W?`/${C}`:C.length>0?C:"."},normalize(T){if(o(T,"path"),T.length===0)return".";let C=T.charCodeAt(0)===x,W=T.charCodeAt(T.length-1)===x;return(T=b(T,!C,"/",i)).length===0?C?"/":W?"./":".":(W&&(T+="/"),C?`/${T}`:T)},isAbsolute:T=>(o(T,"path"),T.length>0&&T.charCodeAt(0)===x),join(...T){if(T.length===0)return".";let C;for(let W=0;W<T.length;++W){let K=T[W];o(K,"path"),K.length>0&&(C===void 0?C=K:C+=`/${K}`)}return C===void 0?".":E.normalize(C)},relative(T,C){if(o(T,"from"),o(C,"to"),T===C||(T=E.resolve(T))===(C=E.resolve(C)))return"";let W=T.length,K=W-1,j=C.length-1,F=K<j?K:j,H=-1,z=0;for(;z<F;z++){let oe=T.charCodeAt(1+z);if(oe!==C.charCodeAt(1+z))break;oe===x&&(H=z)}if(z===F)if(j>F){if(C.charCodeAt(1+z)===x)return C.slice(1+z+1);if(z===0)return C.slice(1+z)}else K>F&&(T.charCodeAt(1+z)===x?H=z:z===0&&(H=0));let J="";for(z=1+H+1;z<=W;++z)z!==W&&T.charCodeAt(z)!==x||(J+=J.length===0?"..":"/..");return`${J}${C.slice(1+H)}`},toNamespacedPath:T=>T,dirname(T){if(o(T,"path"),T.length===0)return".";let C=T.charCodeAt(0)===x,W=-1,K=!0;for(let j=T.length-1;j>=1;--j)if(T.charCodeAt(j)===x){if(!K){W=j;break}}else K=!1;return W===-1?C?"/":".":C&&W===1?"//":T.slice(0,W)},basename(T,C){C!==void 0&&o(C,"ext"),o(T,"path");let W,K=0,j=-1,F=!0;if(C!==void 0&&C.length>0&&C.length<=T.length){if(C===T)return"";let H=C.length-1,z=-1;for(W=T.length-1;W>=0;--W){let J=T.charCodeAt(W);if(J===x){if(!F){K=W+1;break}}else z===-1&&(F=!1,z=W+1),H>=0&&(J===C.charCodeAt(H)?--H==-1&&(j=W):(H=-1,j=z))}return K===j?j=z:j===-1&&(j=T.length),T.slice(K,j)}for(W=T.length-1;W>=0;--W)if(T.charCodeAt(W)===x){if(!F){K=W+1;break}}else j===-1&&(F=!1,j=W+1);return j===-1?"":T.slice(K,j)},extname(T){o(T,"path");let C=-1,W=0,K=-1,j=!0,F=0;for(let H=T.length-1;H>=0;--H){let z=T.charCodeAt(H);if(z!==x)K===-1&&(j=!1,K=H+1),z===A?C===-1?C=H:F!==1&&(F=1):C!==-1&&(F=-1);else if(!j){W=H+1;break}}return C===-1||K===-1||F===0||F===1&&C===K-1&&C===W+1?"":T.slice(C,K)},format:l.bind(null,"/"),parse(T){o(T,"path");let C={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return C;let W=T.charCodeAt(0)===x,K;W?(C.root="/",K=1):K=0;let j=-1,F=0,H=-1,z=!0,J=T.length-1,oe=0;for(;J>=K;--J){let fe=T.charCodeAt(J);if(fe!==x)H===-1&&(z=!1,H=J+1),fe===A?j===-1?j=J:oe!==1&&(oe=1):j!==-1&&(oe=-1);else if(!z){F=J+1;break}}if(H!==-1){let fe=F===0&&W?1:F;j===-1||oe===0||oe===1&&j===H-1&&j===F+1?C.base=C.name=T.slice(fe,H):(C.name=T.slice(fe,j),C.base=T.slice(fe,H),C.ext=T.slice(j,H))}return F>0?C.dir=T.slice(0,F-1):W&&(C.dir="/"),C},sep:"/",delimiter:":",win32:null,posix:null};E.win32=a.win32=a,E.posix=a.posix=E;let D=h?a.normalize:E.normalize,L=h?a.resolve:E.resolve,k=h?a.relative:E.relative,R=h?a.dirname:E.dirname,O=h?a.basename:E.basename,$=h?a.extname:E.extname,N=h?a.sep:E.sep},1432:(ut,Ie,t)=>{"use strict";t.d(Ie,{$L:()=>T,ED:()=>R,G6:()=>ne,IJ:()=>$,OS:()=>J,dK:()=>F,dz:()=>O,fn:()=>z,gn:()=>W,i7:()=>p,li:()=>w,n2:()=>C,r:()=>q,tY:()=>N,tq:()=>K,un:()=>ie,vU:()=>re});var m,B=t(3580);let u="en",I,_,A=!1,x=!1,v=!1,f=!1,d=!1,o=!1,h=!1,r=!1,i=!1,c=!1,b=u,l=null,a=null,w=typeof self=="object"?self:typeof t.g=="object"?t.g:{},E;w.vscode!==void 0&&w.vscode.process!==void 0?E=w.vscode.process:typeof process!="undefined"&&(E=process);let D=typeof((m=E==null?void 0:E.versions)===null||m===void 0?void 0:m.electron)=="string",L=D&&(E==null?void 0:E.type)==="renderer";if(typeof navigator!="object"||L)if(typeof E=="object"){A=E.platform==="win32",x=E.platform==="darwin",v=E.platform==="linux",f=v&&!!E.env.SNAP&&!!E.env.SNAP_REVISION,h=D,i=!!E.env.CI||!!E.env.BUILD_ARTIFACTSTAGINGDIRECTORY,I=u,b=u;let se=E.env.VSCODE_NLS_CONFIG;if(se)try{let ce=JSON.parse(se),be=ce.availableLanguages["*"];I=ce.locale,l=ce.osLocale,b=be||u,a=ce._translationsConfigFile}catch(ce){}d=!0}else console.error("Unable to resolve platform.");else _=navigator.userAgent,A=_.indexOf("Windows")>=0,x=_.indexOf("Macintosh")>=0,r=(_.indexOf("Macintosh")>=0||_.indexOf("iPad")>=0||_.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,v=_.indexOf("Linux")>=0,c=(_==null?void 0:_.indexOf("Mobi"))>=0,o=!0,I=B.aj(B.NC({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||u,b=I,l=navigator.language;let k=0;x?k=1:A?k=3:v&&(k=2);let R=A,O=x,$=v,N=d,T=o,C=o&&typeof w.importScripts=="function",W=r,K=c,j=_,F=b,H=typeof w.postMessage=="function"&&!w.importScripts,z=(()=>{if(H){let se=[];w.addEventListener("message",be=>{if(be.data&&be.data.vscodeScheduleAsyncWork)for(let de=0,U=se.length;de<U;de++){let ue=se[de];if(ue.id===be.data.vscodeScheduleAsyncWork)return se.splice(de,1),void ue.callback()}});let ce=0;return be=>{let de=++ce;se.push({id:de,callback:be}),w.postMessage({vscodeScheduleAsyncWork:de},"*")}}return se=>setTimeout(se)})(),J=x||r?2:A?1:3,oe=!0,fe=!1;function q(){if(!fe){fe=!0;let se=new Uint8Array(2);se[0]=1,se[1]=2,oe=new Uint16Array(se.buffer)[0]===513}return oe}let p=!!(j&&j.indexOf("Chrome")>=0),re=!!(j&&j.indexOf("Firefox")>=0),ne=!!(!p&&j&&j.indexOf("Safari")>=0),ie=!!(j&&j.indexOf("Edg/")>=0);j&&j.indexOf("Android")},1134:(ut,Ie,t)=>{"use strict";var m;t.d(Ie,{e:()=>m}),function(B){function u(_,A){if(_.start>=A.end||A.start>=_.end)return{start:0,end:0};let x=Math.max(_.start,A.start),v=Math.min(_.end,A.end);return v-x<=0?{start:0,end:0}:{start:x,end:v}}function I(_){return _.end-_.start<=0}B.intersect=u,B.isEmpty=I,B.intersects=function(_,A){return!I(u(_,A))},B.relativeComplement=function(_,A){let x=[],v={start:_.start,end:Math.min(A.start,_.end)},f={start:Math.max(A.end,_.start),end:_.end};return I(v)||x.push(v),I(f)||x.push(f),x}}(m||(m={}))},5935:(ut,Ie,t)=>{"use strict";t.d(Ie,{AH:()=>b,DZ:()=>r,EZ:()=>h,Hx:()=>o,SF:()=>f,Vb:()=>D,Vo:()=>c,XX:()=>i,Xy:()=>d,i3:()=>a,lX:()=>l,z_:()=>x});var m=t(5527),B=t(6663),u=t(8721),I=t(1432),_=t(7295),A=t(666);function x(L){return(0,A.q)(L,!0)}class v{constructor(k){this._ignorePathCasing=k}compare(k,R,O=!1){return k===R?0:(0,_.qu)(this.getComparisonKey(k,O),this.getComparisonKey(R,O))}isEqual(k,R,O=!1){return k===R||!(!k||!R)&&this.getComparisonKey(k,O)===this.getComparisonKey(R,O)}getComparisonKey(k,R=!1){return k.with({path:this._ignorePathCasing(k)?k.path.toLowerCase():void 0,fragment:R?null:void 0}).toString()}isEqualOrParent(k,R,O=!1){if(k.scheme===R.scheme){if(k.scheme===B.lg.file)return m.KM(x(k),x(R),this._ignorePathCasing(k))&&k.query===R.query&&(O||k.fragment===R.fragment);if(w(k.authority,R.authority))return m.KM(k.path,R.path,this._ignorePathCasing(k),"/")&&k.query===R.query&&(O||k.fragment===R.fragment)}return!1}joinPath(k,...R){return A.o.joinPath(k,...R)}basenameOrAuthority(k){return h(k)||k.authority}basename(k){return u.KR.basename(k.path)}extname(k){return u.KR.extname(k.path)}dirname(k){if(k.path.length===0)return k;let R;return k.scheme===B.lg.file?R=A.o.file(u.XX(x(k))).path:(R=u.KR.dirname(k.path),k.authority&&R.length&&R.charCodeAt(0)!==47&&(console.error(`dirname("${k.toString})) resulted in a relative path`),R="/")),k.with({path:R})}normalizePath(k){if(!k.path.length)return k;let R;return R=k.scheme===B.lg.file?A.o.file(u.Fv(x(k))).path:u.KR.normalize(k.path),k.with({path:R})}relativePath(k,R){if(k.scheme!==R.scheme||!w(k.authority,R.authority))return;if(k.scheme===B.lg.file){let N=u.Gf(x(k),x(R));return I.ED?m.ej(N):N}let O=k.path||"/",$=R.path||"/";if(this._ignorePathCasing(k)){let N=0;for(let T=Math.min(O.length,$.length);N<T&&(O.charCodeAt(N)===$.charCodeAt(N)||O.charAt(N).toLowerCase()===$.charAt(N).toLowerCase());N++);O=$.substr(0,N)+O.substr(N)}return u.KR.relative(O,$)}resolvePath(k,R){if(k.scheme===B.lg.file){let O=A.o.file(u.DB(x(k),R));return k.with({authority:O.authority,path:O.path})}return R=m.fn(R),k.with({path:u.KR.resolve(k.path,R)})}isAbsolutePath(k){return!!k.path&&k.path[0]==="/"}isEqualAuthority(k,R){return k===R||k!==void 0&&R!==void 0&&(0,_.qq)(k,R)}hasTrailingPathSeparator(k,R=u.ir){if(k.scheme===B.lg.file){let O=x(k);return O.length>m.yj(O).length&&O[O.length-1]===R}{let O=k.path;return O.length>1&&O.charCodeAt(O.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(k.fsPath)}}removeTrailingPathSeparator(k,R=u.ir){return E(k,R)?k.with({path:k.path.substr(0,k.path.length-1)}):k}addTrailingPathSeparator(k,R=u.ir){let O=!1;if(k.scheme===B.lg.file){let $=x(k);O=$!==void 0&&$.length===m.yj($).length&&$[$.length-1]===R}else{R="/";let $=k.path;O=$.length===1&&$.charCodeAt($.length-1)===47}return O||E(k,R)?k:k.with({path:k.path+"/"})}}let f=new v(()=>!1),d=(new v(L=>L.scheme!==B.lg.file||!I.IJ),new v(L=>!0),f.isEqual.bind(f)),o=(f.isEqualOrParent.bind(f),f.getComparisonKey.bind(f),f.basenameOrAuthority.bind(f)),h=f.basename.bind(f),r=f.extname.bind(f),i=f.dirname.bind(f),c=f.joinPath.bind(f),b=f.normalizePath.bind(f),l=f.relativePath.bind(f),a=f.resolvePath.bind(f),w=(f.isAbsolutePath.bind(f),f.isEqualAuthority.bind(f)),E=f.hasTrailingPathSeparator.bind(f);var D;f.removeTrailingPathSeparator.bind(f),f.addTrailingPathSeparator.bind(f),function(L){L.META_DATA_LABEL="label",L.META_DATA_DESCRIPTION="description",L.META_DATA_SIZE="size",L.META_DATA_MIME="mime",L.parseMetaData=function(k){let R=new Map;k.path.substring(k.path.indexOf(";")+1,k.path.lastIndexOf(";")).split(";").forEach($=>{let[N,T]=$.split(":");N&&T&&R.set(N,T)});let O=k.path.substring(0,k.path.indexOf(";"));return O&&R.set(L.META_DATA_MIME,O),R}}(D||(D={}))},6633:(ut,Ie,t)=>{"use strict";t.d(Ie,{Rm:()=>I});var m=t(4669),B=t(5976);class u{constructor(f,d,o,h,r,i,c){this._forceIntegerValues=f,this._scrollStateBrand=void 0,this._forceIntegerValues&&(d|=0,o|=0,h|=0,r|=0,i|=0,c|=0),this.rawScrollLeft=h,this.rawScrollTop=c,d<0&&(d=0),h+d>o&&(h=o-d),h<0&&(h=0),r<0&&(r=0),c+r>i&&(c=i-r),c<0&&(c=0),this.width=d,this.scrollWidth=o,this.scrollLeft=h,this.height=r,this.scrollHeight=i,this.scrollTop=c}equals(f){return this.rawScrollLeft===f.rawScrollLeft&&this.rawScrollTop===f.rawScrollTop&&this.width===f.width&&this.scrollWidth===f.scrollWidth&&this.scrollLeft===f.scrollLeft&&this.height===f.height&&this.scrollHeight===f.scrollHeight&&this.scrollTop===f.scrollTop}withScrollDimensions(f,d){return new u(this._forceIntegerValues,f.width!==void 0?f.width:this.width,f.scrollWidth!==void 0?f.scrollWidth:this.scrollWidth,d?this.rawScrollLeft:this.scrollLeft,f.height!==void 0?f.height:this.height,f.scrollHeight!==void 0?f.scrollHeight:this.scrollHeight,d?this.rawScrollTop:this.scrollTop)}withScrollPosition(f){return new u(this._forceIntegerValues,this.width,this.scrollWidth,f.scrollLeft!==void 0?f.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,f.scrollTop!==void 0?f.scrollTop:this.rawScrollTop)}createScrollEvent(f,d){let o=this.width!==f.width,h=this.scrollWidth!==f.scrollWidth,r=this.scrollLeft!==f.scrollLeft,i=this.height!==f.height,c=this.scrollHeight!==f.scrollHeight,b=this.scrollTop!==f.scrollTop;return{inSmoothScrolling:d,oldWidth:f.width,oldScrollWidth:f.scrollWidth,oldScrollLeft:f.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:f.height,oldScrollHeight:f.scrollHeight,oldScrollTop:f.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:o,scrollWidthChanged:h,scrollLeftChanged:r,heightChanged:i,scrollHeightChanged:c,scrollTopChanged:b}}}class I extends B.JT{constructor(f){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new m.Q5),this.onScroll=this._onScroll.event,this._smoothScrollDuration=f.smoothScrollDuration,this._scheduleAtNextAnimationFrame=f.scheduleAtNextAnimationFrame,this._state=new u(f.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(f){this._smoothScrollDuration=f}validateScrollPosition(f){return this._state.withScrollPosition(f)}getScrollDimensions(){return this._state}setScrollDimensions(f,d){var o;let h=this._state.withScrollDimensions(f,d);this._setState(h,!!this._smoothScrolling),(o=this._smoothScrolling)===null||o===void 0||o.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(f){let d=this._state.withScrollPosition(f);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(d,!1)}setScrollPositionSmooth(f,d){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(f);if(this._smoothScrolling){f={scrollLeft:f.scrollLeft===void 0?this._smoothScrolling.to.scrollLeft:f.scrollLeft,scrollTop:f.scrollTop===void 0?this._smoothScrolling.to.scrollTop:f.scrollTop};let o=this._state.withScrollPosition(f);if(this._smoothScrolling.to.scrollLeft===o.scrollLeft&&this._smoothScrolling.to.scrollTop===o.scrollTop)return;let h;h=d?new x(this._smoothScrolling.from,o,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,o,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=h}else{let o=this._state.withScrollPosition(f);this._smoothScrolling=x.start(this._state,o,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let f=this._smoothScrolling.tick(),d=this._state.withScrollPosition(f);return this._setState(d,!0),this._smoothScrolling?f.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})):void 0}_setState(f,d){let o=this._state;o.equals(f)||(this._state=f,this._onScroll.fire(this._state.createScrollEvent(o,d)))}}class _{constructor(f,d,o){this.scrollLeft=f,this.scrollTop=d,this.isDone=o}}function A(v,f){let d=f-v;return function(o){return v+d*(1-(h=1-o,Math.pow(h,3)));var h}}class x{constructor(f,d,o,h){this.from=f,this.to=d,this.duration=h,this.startTime=o,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(f,d,o){if(Math.abs(f-d)>2.5*o){let c,b;return f<d?(c=f+.75*o,b=d-.75*o):(c=f-.75*o,b=d+.75*o),h=A(f,c),r=A(b,d),i=.33,function(l){return l<i?h(l/i):r((l-i)/(1-i))}}var h,r,i;return A(f,d)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(f){this.to=f.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(f){let d=(f-this.startTime)/this.duration;if(d<1){let o=this.scrollLeft(d),h=this.scrollTop(d);return new _(o,h,!1)}return new _(this.to.scrollLeft,this.to.scrollTop,!0)}combine(f,d,o){return x.start(f,d,o)}static start(f,d,o){o+=10;let h=Date.now()-10;return new x(f,d,h,o)}}},4603:(ut,Ie,t)=>{"use strict";t.d(Ie,{Z:()=>u});var m,B=t(7295);(function(I){I[I.Ignore=0]="Ignore",I[I.Info=1]="Info",I[I.Warning=2]="Warning",I[I.Error=3]="Error"})(m||(m={})),function(I){let _="error",A="warning",x="info";I.fromValue=function(v){return v?B.qq(_,v)?I.Error:B.qq(A,v)||B.qq("warn",v)?I.Warning:B.qq(x,v)?I.Info:I.Ignore:I.Ignore},I.toString=function(v){switch(v){case I.Error:return _;case I.Warning:return A;case I.Info:return x;default:return"ignore"}}}(m||(m={}));let u=m},4013:(ut,Ie,t)=>{"use strict";t.d(Ie,{G:()=>u});var m=t(1432);let B=m.li.performance&&typeof m.li.performance.now=="function";class u{static create(_=!0){return new u(_)}constructor(_){this._highResolution=B&&_,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?m.li.performance.now():Date.now()}}},7295:(ut,Ie,t)=>{"use strict";t.d(Ie,{$i:()=>se,B4:()=>_e,C8:()=>U,GF:()=>i,HO:()=>q,IO:()=>c,J_:()=>p,K7:()=>de,Kw:()=>X,LC:()=>a,Mh:()=>W,P1:()=>K,PJ:()=>ye,Qe:()=>ce,R1:()=>r,T5:()=>O,TT:()=>L,Ut:()=>ne,V8:()=>w,W1:()=>oe,WU:()=>A,YK:()=>F,YU:()=>x,ZG:()=>j,ZH:()=>z,ZK:()=>te,ab:()=>be,c1:()=>ue,df:()=>N,ec:()=>v,fy:()=>f,j3:()=>d,j_:()=>R,m5:()=>I,mK:()=>$,mr:()=>b,oH:()=>Ae,oL:()=>o,ok:()=>C,ow:()=>E,qq:()=>T,qu:()=>D,rL:()=>H,uS:()=>ve,un:()=>h,uq:()=>l,vH:()=>fe,vU:()=>Le,zY:()=>k});var m,B=t(701),u=t(9579);function I(ke){return!ke||typeof ke!="string"||ke.trim().length===0}let _=/{(\d+)}/g;function A(ke,...le){return le.length===0?ke:ke.replace(_,function(ee,me){let xe=parseInt(me,10);return isNaN(xe)||xe<0||xe>=le.length?ee:le[xe]})}function x(ke){return ke.replace(/[<>&]/g,function(le){switch(le){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return le}})}function v(ke){return ke.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function f(ke,le=" "){return o(d(ke,le),le)}function d(ke,le){if(!ke||!le)return ke;let ee=le.length;if(ee===0||ke.length===0)return ke;let me=0;for(;ke.indexOf(le,me)===me;)me+=ee;return ke.substring(me)}function o(ke,le){if(!ke||!le)return ke;let ee=le.length,me=ke.length;if(ee===0||me===0)return ke;let xe=me,We=-1;for(;We=ke.lastIndexOf(le,xe-1),We!==-1&&We+ee===xe;){if(We===0)return"";xe=We}return ke.substring(0,xe)}function h(ke){return ke.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function r(ke){return ke.replace(/\*/g,"")}function i(ke,le,ee={}){if(!ke)throw new Error("Cannot create regex from empty string");le||(ke=v(ke)),ee.wholeWord&&(/\B/.test(ke.charAt(0))||(ke="\\b"+ke),/\B/.test(ke.charAt(ke.length-1))||(ke+="\\b"));let me="";return ee.global&&(me+="g"),ee.matchCase||(me+="i"),ee.multiline&&(me+="m"),ee.unicode&&(me+="u"),new RegExp(ke,me)}function c(ke){return ke.source!=="^"&&ke.source!=="^$"&&ke.source!=="$"&&ke.source!=="^\\s*$"&&!(!ke.exec("")||ke.lastIndex!==0)}function b(ke){return(ke.global?"g":"")+(ke.ignoreCase?"i":"")+(ke.multiline?"m":"")+(ke.unicode?"u":"")}function l(ke){return ke.split(/\r\n|\r|\n/)}function a(ke){for(let le=0,ee=ke.length;le<ee;le++){let me=ke.charCodeAt(le);if(me!==32&&me!==9)return le}return-1}function w(ke,le=0,ee=ke.length){for(let me=le;me<ee;me++){let xe=ke.charCodeAt(me);if(xe!==32&&xe!==9)return ke.substring(le,me)}return ke.substring(le,ee)}function E(ke,le=ke.length-1){for(let ee=le;ee>=0;ee--){let me=ke.charCodeAt(ee);if(me!==32&&me!==9)return ee}return-1}function D(ke,le){return ke<le?-1:ke>le?1:0}function L(ke,le,ee=0,me=ke.length,xe=0,We=le.length){for(;ee<me&&xe<We;ee++,xe++){let tt=ke.charCodeAt(ee),Qe=le.charCodeAt(xe);if(tt<Qe)return-1;if(tt>Qe)return 1}let Ve=me-ee,Ye=We-xe;return Ve<Ye?-1:Ve>Ye?1:0}function k(ke,le){return R(ke,le,0,ke.length,0,le.length)}function R(ke,le,ee=0,me=ke.length,xe=0,We=le.length){for(;ee<me&&xe<We;ee++,xe++){let tt=ke.charCodeAt(ee),Qe=le.charCodeAt(xe);if(tt===Qe)continue;if(tt>=128||Qe>=128)return L(ke.toLowerCase(),le.toLowerCase(),ee,me,xe,We);$(tt)&&(tt-=32),$(Qe)&&(Qe-=32);let bt=tt-Qe;if(bt!==0)return bt}let Ve=me-ee,Ye=We-xe;return Ve<Ye?-1:Ve>Ye?1:0}function O(ke){return ke>=48&&ke<=57}function $(ke){return ke>=97&&ke<=122}function N(ke){return ke>=65&&ke<=90}function T(ke,le){return ke.length===le.length&&R(ke,le)===0}function C(ke,le){let ee=le.length;return!(le.length>ke.length)&&R(ke,le,0,ee)===0}function W(ke,le){let ee=Math.min(ke.length,le.length),me;for(me=0;me<ee;me++)if(ke.charCodeAt(me)!==le.charCodeAt(me))return me;return ee}function K(ke,le){let ee=Math.min(ke.length,le.length),me,xe=ke.length-1,We=le.length-1;for(me=0;me<ee;me++)if(ke.charCodeAt(xe-me)!==le.charCodeAt(We-me))return me;return ee}function j(ke){return 55296<=ke&&ke<=56319}function F(ke){return 56320<=ke&&ke<=57343}function H(ke,le){return le-56320+(ke-55296<<10)+65536}function z(ke,le,ee){let me=ke.charCodeAt(ee);if(j(me)&&ee+1<le){let xe=ke.charCodeAt(ee+1);if(F(xe))return H(me,xe)}return me}class J{get offset(){return this._offset}constructor(le,ee=0){this._str=le,this._len=le.length,this._offset=ee}setOffset(le){this._offset=le}prevCodePoint(){let le=function(ee,me){let xe=ee.charCodeAt(me-1);if(F(xe)&&me>1){let We=ee.charCodeAt(me-2);if(j(We))return H(We,xe)}return xe}(this._str,this._offset);return this._offset-=le>=65536?2:1,le}nextCodePoint(){let le=z(this._str,this._len,this._offset);return this._offset+=le>=65536?2:1,le}eol(){return this._offset>=this._len}}class oe{get offset(){return this._iterator.offset}constructor(le,ee=0){this._iterator=new J(le,ee)}nextGraphemeLength(){let le=Ee.getInstance(),ee=this._iterator,me=ee.offset,xe=le.getGraphemeBreakType(ee.nextCodePoint());for(;!ee.eol();){let We=ee.offset,Ve=le.getGraphemeBreakType(ee.nextCodePoint());if(Ce(xe,Ve)){ee.setOffset(We);break}xe=Ve}return ee.offset-me}prevGraphemeLength(){let le=Ee.getInstance(),ee=this._iterator,me=ee.offset,xe=le.getGraphemeBreakType(ee.prevCodePoint());for(;ee.offset>0;){let We=ee.offset,Ve=le.getGraphemeBreakType(ee.prevCodePoint());if(Ce(Ve,xe)){ee.setOffset(We);break}xe=Ve}return me-ee.offset}eol(){return this._iterator.eol()}}function fe(ke,le){return new oe(ke,le).nextGraphemeLength()}function q(ke,le){return new oe(ke,le).prevGraphemeLength()}function p(ke,le){le>0&&F(ke.charCodeAt(le))&&le--;let ee=le+fe(ke,le);return[ee-q(ke,ee),ee]}let re;function ne(ke){return re||(re=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),re.test(ke)}let ie=/^[\t\n\r\x20-\x7E]*$/;function se(ke){return ie.test(ke)}let ce=/[\u2028\u2029]/;function be(ke){return ce.test(ke)}function de(ke){return ke>=11904&&ke<=55215||ke>=63744&&ke<=64255||ke>=65281&&ke<=65374}function U(ke){return ke>=127462&&ke<=127487||ke===8986||ke===8987||ke===9200||ke===9203||ke>=9728&&ke<=10175||ke===11088||ke===11093||ke>=127744&&ke<=128591||ke>=128640&&ke<=128764||ke>=128992&&ke<=129008||ke>=129280&&ke<=129535||ke>=129648&&ke<=129782}let ue=String.fromCharCode(65279);function ve(ke){return!!(ke&&ke.length>0&&ke.charCodeAt(0)===65279)}function X(ke,le=!1){return!!ke&&(le&&(ke=ke.replace(/\\./g,"")),ke.toLowerCase()!==ke)}function ye(ke){return(ke%=52)<26?String.fromCharCode(97+ke):String.fromCharCode(65+ke-26)}function Ce(ke,le){return ke===0?le!==5&&le!==7:!(ke===2&&le===3||ke!==4&&ke!==2&&ke!==3&&le!==4&&le!==2&&le!==3&&(ke===8&&(le===8||le===9||le===11||le===12)||!(ke!==11&&ke!==9||le!==9&&le!==10)||(ke===12||ke===10)&&le===10||le===5||le===13||le===7||ke===1||ke===13&&le===14||ke===6&&le===6))}class Ee{static getInstance(){return Ee._INSTANCE||(Ee._INSTANCE=new Ee),Ee._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(le){if(le<32)return le===10?3:le===13?2:4;if(le<127)return 0;let ee=this._data,me=ee.length/3,xe=1;for(;xe<=me;)if(le<ee[3*xe])xe*=2;else{if(!(le>ee[3*xe+1]))return ee[3*xe+2];xe=2*xe+1}return 0}}function Ae(ke,le){if(ke===0)return 0;let ee=function(xe,We){let Ve=new J(We,xe),Ye=Ve.prevCodePoint();for(;Fe(Ye)||Ye===65039||Ye===8419;){if(Ve.offset===0)return;Ye=Ve.prevCodePoint()}if(!U(Ye))return;let tt=Ve.offset;return tt>0&&Ve.prevCodePoint()===8205&&(tt=Ve.offset),tt}(ke,le);if(ee!==void 0)return ee;let me=new J(le,ke);return me.prevCodePoint(),me.offset}function Fe(ke){return 127995<=ke&&ke<=127999}Ee._INSTANCE=null;let _e="\xA0";class te{static getInstance(le){return te.cache.get(Array.from(le))}static getLocales(){return te._locales.value}constructor(le){this.confusableDictionary=le}isAmbiguous(le){return this.confusableDictionary.has(le)}getPrimaryConfusable(le){return this.confusableDictionary.get(le)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}m=te,te.ambiguousCharacterData=new u.o(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),te.cache=new B.t(ke=>{function le(Ye){let tt=new Map;for(let Qe=0;Qe<Ye.length;Qe+=2)tt.set(Ye[Qe],Ye[Qe+1]);return tt}function ee(Ye,tt){if(!Ye)return tt;let Qe=new Map;for(let[bt,ht]of Ye)tt.has(bt)&&Qe.set(bt,ht);return Qe}let me=m.ambiguousCharacterData.value,xe,We=ke.filter(Ye=>!Ye.startsWith("_")&&Ye in me);We.length===0&&(We=["_default"]);for(let Ye of We)xe=ee(xe,le(me[Ye]));let Ve=function(Ye,tt){let Qe=new Map(Ye);for(let[bt,ht]of tt)Qe.set(bt,ht);return Qe}(le(me._common),xe);return new te(Ve)}),te._locales=new u.o(()=>Object.keys(te.ambiguousCharacterData.value).filter(ke=>!ke.startsWith("_")));class Le{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Le.getRawData())),this._data}static isInvisibleCharacter(le){return Le.getData().has(le)}static get codePoints(){return Le.getData()}}Le._data=void 0},5635:(ut,Ie,t)=>{"use strict";t.d(Ie,{n:()=>m});let m=Symbol("MicrotaskDelay")},4767:(ut,Ie,t)=>{"use strict";t.d(Ie,{Id:()=>x});var m=t(7295);class B{constructor(){this._value="",this._pos=0}reset(f){return this._value=f,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(f){return f.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class u{constructor(f=!0){this._caseSensitive=f}reset(f){return this._value=f,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let f=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46){if(!f)break;this._from++}else f=!1;return this}cmp(f){return this._caseSensitive?(0,m.TT)(f,this._value,0,f.length,this._from,this._to):(0,m.j_)(f,this._value,0,f.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class I{constructor(f=!0,d=!0){this._splitOnBackslash=f,this._caseSensitive=d}reset(f){this._from=0,this._to=0,this._value=f,this._valueLen=f.length;for(let d=f.length-1;d>=0;d--,this._valueLen--){let o=this._value.charCodeAt(d);if(!(o===47||this._splitOnBackslash&&o===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let f=!0;for(;this._to<this._valueLen;this._to++){let d=this._value.charCodeAt(this._to);if(d===47||this._splitOnBackslash&&d===92){if(!f)break;this._from++}else f=!1}return this}cmp(f){return this._caseSensitive?(0,m.TT)(f,this._value,0,f.length,this._from,this._to):(0,m.j_)(f,this._value,0,f.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class _{constructor(f,d){this._ignorePathCasing=f,this._ignoreQueryAndFragment=d,this._states=[],this._stateIdx=0}reset(f){return this._value=f,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new I(!1,!this._ignorePathCasing(f)),this._pathIterator.reset(f.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(f)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(f){if(this._states[this._stateIdx]===1)return(0,m.zY)(f,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,m.zY)(f,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(f);if(this._states[this._stateIdx]===4)return(0,m.qu)(f,this._value.query);if(this._states[this._stateIdx]===5)return(0,m.qu)(f,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class A{constructor(){this.height=1}rotateLeft(){let f=this.right;return this.right=f.left,f.left=this,this.updateHeight(),f.updateHeight(),f}rotateRight(){let f=this.left;return this.left=f.right,f.right=this,this.updateHeight(),f.updateHeight(),f}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var f,d;return(d=(f=this.left)===null||f===void 0?void 0:f.height)!==null&&d!==void 0?d:0}get heightRight(){var f,d;return(d=(f=this.right)===null||f===void 0?void 0:f.height)!==null&&d!==void 0?d:0}}class x{static forUris(f=()=>!1,d=()=>!1){return new x(new _(f,d))}static forStrings(){return new x(new B)}static forConfigKeys(){return new x(new u)}constructor(f){this._iter=f}clear(){this._root=void 0}set(f,d){let o=this._iter.reset(f),h;this._root||(this._root=new A,this._root.segment=o.value());let r=[];for(h=this._root;;){let c=o.cmp(h.segment);if(c>0)h.left||(h.left=new A,h.left.segment=o.value()),r.push([-1,h]),h=h.left;else if(c<0)h.right||(h.right=new A,h.right.segment=o.value()),r.push([1,h]),h=h.right;else{if(!o.hasNext())break;o.next(),h.mid||(h.mid=new A,h.mid.segment=o.value()),r.push([0,h]),h=h.mid}}let i=h.value;h.value=d,h.key=f;for(let c=r.length-1;c>=0;c--){let b=r[c][1];b.updateHeight();let l=b.balanceFactor();if(l<-1||l>1){let a=r[c][0],w=r[c+1][0];if(a===1&&w===1)r[c][1]=b.rotateLeft();else if(a===-1&&w===-1)r[c][1]=b.rotateRight();else if(a===1&&w===-1)b.right=r[c+1][1]=r[c+1][1].rotateRight(),r[c][1]=b.rotateLeft();else{if(a!==-1||w!==1)throw new Error;b.left=r[c+1][1]=r[c+1][1].rotateLeft(),r[c][1]=b.rotateRight()}if(c>0)switch(r[c-1][0]){case-1:r[c-1][1].left=r[c][1];break;case 1:r[c-1][1].right=r[c][1];break;case 0:r[c-1][1].mid=r[c][1]}else this._root=r[0][1]}}return i}get(f){var d;return(d=this._getNode(f))===null||d===void 0?void 0:d.value}_getNode(f){let d=this._iter.reset(f),o=this._root;for(;o;){let h=d.cmp(o.segment);if(h>0)o=o.left;else if(h<0)o=o.right;else{if(!d.hasNext())break;d.next(),o=o.mid}}return o}has(f){let d=this._getNode(f);return!((d==null?void 0:d.value)===void 0&&(d==null?void 0:d.mid)===void 0)}delete(f){return this._delete(f,!1)}deleteSuperstr(f){return this._delete(f,!0)}_delete(f,d){var o;let h=this._iter.reset(f),r=[],i=this._root;for(;i;){let c=h.cmp(i.segment);if(c>0)r.push([-1,i]),i=i.left;else if(c<0)r.push([1,i]),i=i.right;else{if(!h.hasNext())break;h.next(),r.push([0,i]),i=i.mid}}if(i){if(d?(i.left=void 0,i.mid=void 0,i.right=void 0,i.height=1):(i.key=void 0,i.value=void 0),!i.mid&&!i.value)if(i.left&&i.right){let c=this._min(i.right);if(c.key){let{key:b,value:l,segment:a}=c;this._delete(c.key,!1),i.key=b,i.value=l,i.segment=a}}else{let c=(o=i.left)!==null&&o!==void 0?o:i.right;if(r.length>0){let[b,l]=r[r.length-1];switch(b){case-1:l.left=c;break;case 0:l.mid=c;break;case 1:l.right=c}}else this._root=c}for(let c=r.length-1;c>=0;c--){let b=r[c][1];b.updateHeight();let l=b.balanceFactor();if(l>1?(b.right.balanceFactor()>=0||(b.right=b.right.rotateRight()),r[c][1]=b.rotateLeft()):l<-1&&(b.left.balanceFactor()<=0||(b.left=b.left.rotateLeft()),r[c][1]=b.rotateRight()),c>0)switch(r[c-1][0]){case-1:r[c-1][1].left=r[c][1];break;case 1:r[c-1][1].right=r[c][1];break;case 0:r[c-1][1].mid=r[c][1]}else this._root=r[0][1]}}}_min(f){for(;f.left;)f=f.left;return f}findSubstr(f){let d=this._iter.reset(f),o,h=this._root;for(;h;){let r=d.cmp(h.segment);if(r>0)h=h.left;else if(r<0)h=h.right;else{if(!d.hasNext())break;d.next(),o=h.value||o,h=h.mid}}return h&&h.value||o}findSuperstr(f){return this._findSuperstrOrElement(f,!1)}_findSuperstrOrElement(f,d){let o=this._iter.reset(f),h=this._root;for(;h;){let r=o.cmp(h.segment);if(r>0)h=h.left;else if(r<0)h=h.right;else{if(!o.hasNext())return h.mid?this._entries(h.mid):d?h.value:void 0;o.next(),h=h.mid}}}forEach(f){for(let[d,o]of this)f(o,d)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(f){let d=[];return this._dfsEntries(f,d),d[Symbol.iterator]()}_dfsEntries(f,d){f&&(f.left&&this._dfsEntries(f.left,d),f.value&&d.push([f.key,f.value]),f.mid&&this._dfsEntries(f.mid,d),f.right&&this._dfsEntries(f.right,d))}}},5670:(ut,Ie,t)=>{"use strict";t.d(Ie,{k:()=>B});var m,B,u=t(3046);(function(I){I.isThemeColor=function(_){return _&&typeof _=="object"&&typeof _.id=="string"}})(m||(m={})),function(I){I.iconNameSegment="[A-Za-z0-9]+",I.iconNameExpression="[A-Za-z0-9-]+",I.iconModifierExpression="~[A-Za-z]+",I.iconNameCharacter="[A-Za-z0-9~-]";let _=new RegExp(`^(${I.iconNameExpression})(${I.iconModifierExpression})?$`);function A(v){let f=_.exec(v.id);if(!f)return A(u.l.error);let[,d,o]=f,h=["codicon","codicon-"+d];return o&&h.push("codicon-modifier-"+o.substring(1)),h}I.asClassNameArray=A,I.asClassName=function(v){return A(v).join(" ")},I.asCSSSelector=function(v){return"."+A(v).join(".")},I.isThemeIcon=function(v){return v&&typeof v=="object"&&typeof v.id=="string"&&(v.color===void 0||m.isThemeColor(v.color))};let x=new RegExp(`^\\$\\((${I.iconNameExpression}(?:${I.iconModifierExpression})?)\\)$`);I.fromString=function(v){let f=x.exec(v);if(!f)return;let[,d]=f;return{id:d}},I.fromId=function(v){return{id:v}},I.modify=function(v,f){let d=v.id,o=d.lastIndexOf("~");return o!==-1&&(d=d.substring(0,o)),f&&(d=`${d}~${f}`),{id:d}},I.getModifier=function(v){let f=v.id.lastIndexOf("~");if(f!==-1)return v.id.substring(f+1)},I.isEqual=function(v,f){var d,o;return v.id===f.id&&((d=v.color)===null||d===void 0?void 0:d.id)===((o=f.color)===null||o===void 0?void 0:o.id)}}(B||(B={}))},8401:(ut,Ie,t)=>{"use strict";function m(l){return typeof l=="string"}function B(l){return!(typeof l!="object"||l===null||Array.isArray(l)||l instanceof RegExp||l instanceof Date)}function u(l){let a=Object.getPrototypeOf(Uint8Array);return typeof l=="object"&&l instanceof a}function I(l){return typeof l=="number"&&!isNaN(l)}function _(l){return!!l&&typeof l[Symbol.iterator]=="function"}function A(l){return l===!0||l===!1}function x(l){return l===void 0}function v(l){return!f(l)}function f(l){return x(l)||l===null}function d(l,a){if(!l)throw new Error(a?`Unexpected type, expected '${a}'`:"Unexpected type")}function o(l){if(f(l))throw new Error("Assertion Failed: argument is undefined or null");return l}function h(l){return typeof l=="function"}function r(l,a){let w=Math.min(l.length,a.length);for(let E=0;E<w;E++)i(l[E],a[E])}function i(l,a){if(m(a)){if(typeof l!==a)throw new Error(`argument does not match constraint: typeof ${a}`)}else if(h(a)){try{if(l instanceof a)return}catch(w){}if(!f(l)&&l.constructor===a||a.length===1&&a.call(void 0,l)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function c(l){return l===null?void 0:l}function b(l){return l===void 0?null:l}t.d(Ie,{$K:()=>v,D8:()=>r,HD:()=>m,Jp:()=>f,Kn:()=>B,M2:()=>b,TW:()=>_,cW:()=>o,f6:()=>c,fU:()=>u,hj:()=>I,jn:()=>A,mf:()=>h,o8:()=>x,p_:()=>d})},5427:(ut,Ie,t)=>{"use strict";function m(u){return u<0?0:u>255?255:0|u}function B(u){return u<0?0:u>4294967295?4294967295:0|u}t.d(Ie,{A:()=>B,K:()=>m})},666:(ut,Ie,t)=>{"use strict";t.d(Ie,{o:()=>d,q:()=>b});var m=t(8721),B=t(1432);let u=/^\w[\w\d+.-]*$/,I=/^\//,_=/^\/\//;function A(D,L){if(!D.scheme&&L)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${D.authority}", path: "${D.path}", query: "${D.query}", fragment: "${D.fragment}"}`);if(D.scheme&&!u.test(D.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(D.path){if(D.authority){if(!I.test(D.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_.test(D.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let x="",v="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class d{static isUri(L){return L instanceof d||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"}constructor(L,k,R,O,$,N=!1){typeof L=="object"?(this.scheme=L.scheme||x,this.authority=L.authority||x,this.path=L.path||x,this.query=L.query||x,this.fragment=L.fragment||x):(this.scheme=function(T,C){return T||C?T:"file"}(L,N),this.authority=k||x,this.path=function(T,C){switch(T){case"https":case"http":case"file":C?C[0]!==v&&(C=v+C):C=v}return C}(this.scheme,R||x),this.query=O||x,this.fragment=$||x,A(this,N))}get fsPath(){return b(this,!1)}with(L){if(!L)return this;let{scheme:k,authority:R,path:O,query:$,fragment:N}=L;return k===void 0?k=this.scheme:k===null&&(k=x),R===void 0?R=this.authority:R===null&&(R=x),O===void 0?O=this.path:O===null&&(O=x),$===void 0?$=this.query:$===null&&($=x),N===void 0?N=this.fragment:N===null&&(N=x),k===this.scheme&&R===this.authority&&O===this.path&&$===this.query&&N===this.fragment?this:new h(k,R,O,$,N)}static parse(L,k=!1){let R=f.exec(L);return R?new h(R[2]||x,E(R[4]||x),E(R[5]||x),E(R[7]||x),E(R[9]||x),k):new h(x,x,x,x,x)}static file(L){let k=x;if(B.ED&&(L=L.replace(/\\/g,v)),L[0]===v&&L[1]===v){let R=L.indexOf(v,2);R===-1?(k=L.substring(2),L=v):(k=L.substring(2,R),L=L.substring(R)||v)}return new h("file",k,L,x,x)}static from(L){let k=new h(L.scheme,L.authority,L.path,L.query,L.fragment);return A(k,!0),k}static joinPath(L,...k){if(!L.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let R;return R=B.ED&&L.scheme==="file"?d.file(m.Ku.join(b(L,!0),...k)).path:m.KR.join(L.path,...k),L.with({path:R})}toString(L=!1){return l(this,L)}toJSON(){return this}static revive(L){if(L){if(L instanceof d)return L;{let k=new h(L);return k._formatted=L.external,k._fsPath=L._sep===o?L.fsPath:null,k}}return L}}let o=B.ED?1:void 0;class h extends d{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(L=!1){return L?l(this,!0):(this._formatted||(this._formatted=l(this,!1)),this._formatted)}toJSON(){let L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=o),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L}}let r={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function i(D,L,k){let R,O=-1;for(let $=0;$<D.length;$++){let N=D.charCodeAt($);if(N>=97&&N<=122||N>=65&&N<=90||N>=48&&N<=57||N===45||N===46||N===95||N===126||L&&N===47||k&&N===91||k&&N===93||k&&N===58)O!==-1&&(R+=encodeURIComponent(D.substring(O,$)),O=-1),R!==void 0&&(R+=D.charAt($));else{R===void 0&&(R=D.substr(0,$));let T=r[N];T!==void 0?(O!==-1&&(R+=encodeURIComponent(D.substring(O,$)),O=-1),R+=T):O===-1&&(O=$)}}return O!==-1&&(R+=encodeURIComponent(D.substring(O))),R!==void 0?R:D}function c(D){let L;for(let k=0;k<D.length;k++){let R=D.charCodeAt(k);R===35||R===63?(L===void 0&&(L=D.substr(0,k)),L+=r[R]):L!==void 0&&(L+=D[k])}return L!==void 0?L:D}function b(D,L){let k;return k=D.authority&&D.path.length>1&&D.scheme==="file"?`//${D.authority}${D.path}`:D.path.charCodeAt(0)===47&&(D.path.charCodeAt(1)>=65&&D.path.charCodeAt(1)<=90||D.path.charCodeAt(1)>=97&&D.path.charCodeAt(1)<=122)&&D.path.charCodeAt(2)===58?L?D.path.substr(1):D.path[1].toLowerCase()+D.path.substr(2):D.path,B.ED&&(k=k.replace(/\//g,"\\")),k}function l(D,L){let k=L?c:i,R="",{scheme:O,authority:$,path:N,query:T,fragment:C}=D;if(O&&(R+=O,R+=":"),($||O==="file")&&(R+=v,R+=v),$){let W=$.indexOf("@");if(W!==-1){let K=$.substr(0,W);$=$.substr(W+1),W=K.lastIndexOf(":"),W===-1?R+=k(K,!1,!1):(R+=k(K.substr(0,W),!1,!1),R+=":",R+=k(K.substr(W+1),!1,!0)),R+="@"}$=$.toLowerCase(),W=$.lastIndexOf(":"),W===-1?R+=k($,!1,!0):(R+=k($.substr(0,W),!1,!0),R+=$.substr(W))}if(N){if(N.length>=3&&N.charCodeAt(0)===47&&N.charCodeAt(2)===58){let W=N.charCodeAt(1);W>=65&&W<=90&&(N=`/${String.fromCharCode(W+32)}:${N.substr(3)}`)}else if(N.length>=2&&N.charCodeAt(1)===58){let W=N.charCodeAt(0);W>=65&&W<=90&&(N=`${String.fromCharCode(W+32)}:${N.substr(2)}`)}R+=k(N,!0,!1)}return T&&(R+="?",R+=k(T,!1,!1)),C&&(R+="#",R+=L?C:i(C,!1,!1)),R}function a(D){try{return decodeURIComponent(D)}catch(L){return D.length>3?D.substr(0,3)+a(D.substr(3)):D}}let w=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function E(D){return D.match(w)?D.replace(w,L=>a(L)):D}},8e3:(ut,Ie,t)=>{"use strict";t.d(Ie,{R:()=>m});let m=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let B;B=typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?crypto.getRandomValues.bind(crypto):function(_){for(let A=0;A<_.length;A++)_[A]=Math.floor(256*Math.random());return _};let u=new Uint8Array(16),I=[];for(let _=0;_<256;_++)I.push(_.toString(16).padStart(2,"0"));return function(){B(u),u[6]=15&u[6]|64,u[8]=63&u[8]|128;let _=0,A="";return A+=I[u[_++]],A+=I[u[_++]],A+=I[u[_++]],A+=I[u[_++]],A+="-",A+=I[u[_++]],A+=I[u[_++]],A+="-",A+=I[u[_++]],A+=I[u[_++]],A+="-",A+=I[u[_++]],A+=I[u[_++]],A+="-",A+=I[u[_++]],A+=I[u[_++]],A+=I[u[_++]],A+=I[u[_++]],A+=I[u[_++]],A+=I[u[_++]],A}}()},5552:(ut,Ie,t)=>{"use strict";t.d(Ie,{H:()=>o});var m=t(1593),B=Object.defineProperty,u=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,_=Object.prototype.hasOwnProperty,A=(h,r,i,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let b of I(r))_.call(h,b)||b===i||B(h,b,{get:()=>r[b],enumerable:!(c=u(r,b))||c.enumerable});return h},x={};A(x,m,"default");var v={},f={},d=class{constructor(h){Ho(this,"_languageId");Ho(this,"_loadingTriggered");Ho(this,"_lazyLoadPromise");Ho(this,"_lazyLoadPromiseResolve");Ho(this,"_lazyLoadPromiseReject");this._languageId=h,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((r,i)=>{this._lazyLoadPromiseResolve=r,this._lazyLoadPromiseReject=i})}static getOrCreate(h){return f[h]||(f[h]=new d(h)),f[h]}load(){return this._loadingTriggered||(this._loadingTriggered=!0,v[this._languageId].loader().then(h=>this._lazyLoadPromiseResolve(h),h=>this._lazyLoadPromiseReject(h))),this._lazyLoadPromise}};function o(h){let r=h.id;v[r]=h,x.languages.register(h);let i=d.getOrCreate(r);x.languages.registerTokensProviderFactory(r,{create:()=>ca(this,null,function*(){return(yield i.load()).language})}),x.languages.onLanguageEncountered(r,()=>ca(this,null,function*(){let c=yield i.load();x.languages.setLanguageConfiguration(r,c.conf)}))}},3814:(ut,Ie,t)=>{"use strict";t.r(Ie),(0,t(5552).H)({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>t.e(240).then(t.bind(t,2240))})},201:(ut,Ie,t)=>{"use strict";t.r(Ie),(0,t(5552).H)({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>t.e(571).then(t.bind(t,2571))})},7365:(ut,Ie,t)=>{"use strict";t.r(Ie),(0,t(5552).H)({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>t.e(954).then(t.bind(t,8770))})},2136:(ut,Ie,t)=>{"use strict";t.d(Ie,{N:()=>B});var m=t(8626);function B(u,I){u instanceof m.Z?(u.setFontFamily(I.getMassagedFontFamily()),u.setFontWeight(I.fontWeight),u.setFontSize(I.fontSize),u.setFontFeatureSettings(I.fontFeatureSettings),u.setFontVariationSettings(I.fontVariationSettings),u.setLineHeight(I.lineHeight),u.setLetterSpacing(I.letterSpacing)):(u.style.fontFamily=I.getMassagedFontFamily(),u.style.fontWeight=I.fontWeight,u.style.fontSize=I.fontSize+"px",u.style.fontFeatureSettings=I.fontFeatureSettings,u.style.fontVariationSettings=I.fontVariationSettings,u.style.lineHeight=I.lineHeight+"px",u.style.letterSpacing=I.letterSpacing+"px")}},4534:(ut,Ie,t)=>{"use strict";t.d(Ie,{I:()=>u});var m=t(5976),B=t(4669);class u extends m.JT{constructor(_,A){super(),this._onDidChange=this._register(new B.Q5),this.onDidChange=this._onDidChange.event,this._referenceDomElement=_,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,A)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(_=>{_&&_[0]&&_[0].contentRect?this.observe({width:_[0].contentRect.width,height:_[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(_){this.measureReferenceDomElement(!0,_)}measureReferenceDomElement(_,A){let x=0,v=0;A?(x=A.width,v=A.height):this._referenceDomElement&&(x=this._referenceDomElement.clientWidth,v=this._referenceDomElement.clientHeight),x=Math.max(5,x),v=Math.max(5,v),this._width===x&&this._height===v||(this._width=x,this._height=v,_&&this._onDidChange.fire())}}},7231:(ut,Ie,t)=>{"use strict";t.d(Ie,{g:()=>o});var m=t(6268),B=t(4669),u=t(5976),I=t(2136);class _{constructor(r,i){this.chr=r,this.type=i,this.width=0}fulfill(r){this.width=r}}class A{constructor(r,i){this._bareFontInfo=r,this._requests=i,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){let r=document.createElement("div");r.style.position="absolute",r.style.top="-50000px",r.style.width="50000px";let i=document.createElement("div");(0,I.N)(i,this._bareFontInfo),r.appendChild(i);let c=document.createElement("div");(0,I.N)(c,this._bareFontInfo),c.style.fontWeight="bold",r.appendChild(c);let b=document.createElement("div");(0,I.N)(b,this._bareFontInfo),b.style.fontStyle="italic",r.appendChild(b);let l=[];for(let a of this._requests){let w;a.type===0&&(w=i),a.type===2&&(w=c),a.type===1&&(w=b),w.appendChild(document.createElement("br"));let E=document.createElement("span");A._render(E,a),w.appendChild(E),l.push(E)}this._container=r,this._testElements=l}static _render(r,i){if(i.chr===" "){let c="\xA0";for(let b=0;b<8;b++)c+=c;r.innerText=c}else{let c=i.chr;for(let b=0;b<8;b++)c+=c;r.textContent=c}}_readFromDomElements(){for(let r=0,i=this._requests.length;r<i;r++){let c=this._requests[r],b=this._testElements[r];c.fulfill(b.offsetWidth/256)}}}var x=t(4141),v=t(7374);class f extends u.JT{constructor(){super(),this._onDidChange=this._register(new B.Q5),this.onDidChange=this._onDidChange.event,this._cache=new d,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new d,this._onDidChange.fire()}_writeToCache(r,i){this._cache.put(r,i),i.isTrusted||this._evictUntrustedReadingsTimeout!==-1||(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){let r=this._cache.getValues(),i=!1;for(let c of r)c.isTrusted||(i=!0,this._cache.remove(c));i&&this._onDidChange.fire()}readFontInfo(r){if(!this._cache.has(r)){let i=this._actualReadFontInfo(r);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new v.pR({pixelRatio:m.PixelRatio.value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(r,i)}return this._cache.get(r)}_createRequest(r,i,c,b){let l=new _(r,i);return c.push(l),b==null||b.push(l),l}_actualReadFontInfo(r){let i=[],c=[],b=this._createRequest("n",0,i,c),l=this._createRequest("\uFF4D",0,i,null),a=this._createRequest(" ",0,i,c),w=this._createRequest("0",0,i,c),E=this._createRequest("1",0,i,c),D=this._createRequest("2",0,i,c),L=this._createRequest("3",0,i,c),k=this._createRequest("4",0,i,c),R=this._createRequest("5",0,i,c),O=this._createRequest("6",0,i,c),$=this._createRequest("7",0,i,c),N=this._createRequest("8",0,i,c),T=this._createRequest("9",0,i,c),C=this._createRequest("\u2192",0,i,c),W=this._createRequest("\uFFEB",0,i,null),K=this._createRequest("\xB7",0,i,c),j=this._createRequest(String.fromCharCode(11825),0,i,null),F="|/-_ilm%";for(let fe=0,q=8;fe<q;fe++)this._createRequest(F.charAt(fe),0,i,c),this._createRequest(F.charAt(fe),1,i,c),this._createRequest(F.charAt(fe),2,i,c);(function(fe,q){new A(fe,q).read()})(r,i);let H=Math.max(w.width,E.width,D.width,L.width,k.width,R.width,O.width,$.width,N.width,T.width),z=r.fontFeatureSettings===x.n0.OFF,J=c[0].width;for(let fe=1,q=c.length;z&&fe<q;fe++){let p=J-c[fe].width;if(p<-.001||p>.001){z=!1;break}}let oe=!0;return z&&W.width!==J&&(oe=!1),W.width>C.width&&(oe=!1),new v.pR({pixelRatio:m.PixelRatio.value,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontSize:r.fontSize,fontFeatureSettings:r.fontFeatureSettings,fontVariationSettings:r.fontVariationSettings,lineHeight:r.lineHeight,letterSpacing:r.letterSpacing,isMonospace:z,typicalHalfwidthCharacterWidth:b.width,typicalFullwidthCharacterWidth:l.width,canUseHalfwidthRightwardsArrow:oe,spaceWidth:a.width,middotWidth:K.width,wsmiddotWidth:j.width,maxDigitWidth:H},!0)}}class d{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(r){let i=r.getId();return!!this._values[i]}get(r){let i=r.getId();return this._values[i]}put(r,i){let c=r.getId();this._keys[c]=r,this._values[c]=i}remove(r){let i=r.getId();delete this._keys[i],delete this._values[i]}getValues(){return Object.keys(this._keys).map(r=>this._values[r])}}let o=new f},7940:(ut,Ie,t)=>{"use strict";t.d(Ie,{n:()=>B});var m=t(4669);let B=new class{constructor(){this._tabFocusTerminal=!1,this._tabFocusEditor=!1,this._onDidChangeTabFocus=new m.Q5,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(u){return u==="terminalFocus"?this._tabFocusTerminal:this._tabFocusEditor}setTabFocusMode(u,I){I==="terminalFocus"?this._tabFocusTerminal=u:this._tabFocusEditor=u,this._onDidChangeTabFocus.fire()}}},5715:(ut,Ie,t)=>{"use strict";t.d(Ie,{Fz:()=>l,Nl:()=>c,RA:()=>i,Tj:()=>w,pd:()=>m});var m,B=t(6268),u=t(5321),I=t(4850),_=t(9069),A=t(795),x=t(5393),v=t(4669),f=t(5976),d=t(1170),o=t(7295),h=t(5887),r=t(3860);(function(E){E.Tap="-monaco-textarea-synthetic-tap"})(m||(m={}));let i={forceCopyWithSyntaxHighlighting:!1};class c{constructor(){this._lastState=null}set(D,L){this._lastState={lastCopiedValue:D,data:L}}get(D){return this._lastState&&this._lastState.lastCopiedValue===D?this._lastState.data:(this._lastState=null,null)}}c.INSTANCE=new c;class b{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(D){let L={text:D=D||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=D.length,L}}class l extends f.JT{get textAreaState(){return this._textAreaState}constructor(D,L,k,R){super(),this._host=D,this._textArea=L,this._OS=k,this._browser=R,this._onFocus=this._register(new v.Q5),this.onFocus=this._onFocus.event,this._onBlur=this._register(new v.Q5),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new v.Q5),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new v.Q5),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new v.Q5),this.onCut=this._onCut.event,this._onPaste=this._register(new v.Q5),this.onPaste=this._onPaste.event,this._onType=this._register(new v.Q5),this.onType=this._onType.event,this._onCompositionStart=this._register(new v.Q5),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new v.Q5),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new v.Q5),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new v.Q5),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new x.pY(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new x.pY(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=h.un.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let O=null;this._register(this._textArea.onKeyDown($=>{let N=new _.y($);(N.keyCode===114||this._currentComposition&&N.keyCode===1)&&N.stopPropagation(),N.equals(9)&&N.preventDefault(),O=N,this._onKeyDown.fire(N)})),this._register(this._textArea.onKeyUp($=>{let N=new _.y($);this._onKeyUp.fire(N)})),this._register(this._textArea.onCompositionStart($=>{h.al&&console.log("[compositionstart]",$);let N=new b;if(this._currentComposition)this._currentComposition=N;else{if(this._currentComposition=N,this._OS===2&&O&&O.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===$.data&&(O.code==="ArrowRight"||O.code==="ArrowLeft"))return h.al&&console.log("[compositionstart] Handling long press case on macOS + arrow key",$),N.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:$.data});this._browser.isAndroid,this._onCompositionStart.fire({data:$.data})}})),this._register(this._textArea.onCompositionUpdate($=>{h.al&&console.log("[compositionupdate]",$);let N=this._currentComposition;if(!N)return;if(this._browser.isAndroid){let C=h.un.readFromTextArea(this._textArea,this._textAreaState),W=h.un.deduceAndroidCompositionInput(this._textAreaState,C);return this._textAreaState=C,this._onType.fire(W),void this._onCompositionUpdate.fire($)}let T=N.handleCompositionUpdate($.data);this._textAreaState=h.un.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(T),this._onCompositionUpdate.fire($)})),this._register(this._textArea.onCompositionEnd($=>{h.al&&console.log("[compositionend]",$);let N=this._currentComposition;if(!N)return;if(this._currentComposition=null,this._browser.isAndroid){let C=h.un.readFromTextArea(this._textArea,this._textAreaState),W=h.un.deduceAndroidCompositionInput(this._textAreaState,C);return this._textAreaState=C,this._onType.fire(W),void this._onCompositionEnd.fire()}let T=N.handleCompositionUpdate($.data);this._textAreaState=h.un.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(T),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput($=>{if(h.al&&console.log("[input]",$),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;let N=h.un.readFromTextArea(this._textArea,this._textAreaState),T=h.un.deduceInput(this._textAreaState,N,this._OS===2);(T.replacePrevCharCnt!==0||T.text.length!==1||!o.ZG(T.text.charCodeAt(0))&&T.text.charCodeAt(0)!==127)&&(this._textAreaState=N,T.text===""&&T.replacePrevCharCnt===0&&T.replaceNextCharCnt===0&&T.positionDelta===0||this._onType.fire(T))})),this._register(this._textArea.onCut($=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection($),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy($=>{this._ensureClipboardGetsEditorSelection($)})),this._register(this._textArea.onPaste($=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),$.preventDefault(),!$.clipboardData)return;let[N,T]=a.getTextData($.clipboardData);N&&(T=T||c.INSTANCE.get(N),this._onPaste.fire({text:N,metadata:T}))})),this._register(this._textArea.onFocus(()=>{let $=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!$&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let D=0;return u.nm(document,"selectionchange",L=>{if(A.B.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;let k=Date.now(),R=k-D;if(D=k,R<5)return;let O=k-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),O<100||!this._textAreaState.selection)return;let $=this._textArea.getValue();if(this._textAreaState.value!==$)return;let N=this._textArea.getSelectionStart(),T=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===N&&this._textAreaState.selectionEnd===T)return;let C=this._textAreaState.deduceEditorPosition(N),W=this._host.deduceModelPosition(C[0],C[1],C[2]),K=this._textAreaState.deduceEditorPosition(T),j=this._host.deduceModelPosition(K[0],K[1],K[2]),F=new r.Y(W.lineNumber,W.column,j.lineNumber,j.column);this._onSelectionChangeRequest.fire(F)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(D){this._hasFocus!==D&&(this._hasFocus=D,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(D,L){this._hasFocus||(L=L.collapseSelection()),L.writeToTextArea(D,this._textArea,this._hasFocus),this._textAreaState=L}writeScreenReaderContent(D){this._currentComposition||this._setAndWriteTextAreaState(D,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(D){let L=this._host.getDataToCopy(),k={version:1,isFromEmptySelection:L.isFromEmptySelection,multicursorText:L.multicursorText,mode:L.mode};c.INSTANCE.set(this._browser.isFirefox?L.text.replace(/\r\n/g,`
`):L.text,k),D.preventDefault(),D.clipboardData&&a.setTextData(D.clipboardData,L.text,L.html,k)}}class a{static getTextData(D){let L=D.getData(d.v.text),k=null,R=D.getData("vscode-editor-data");if(typeof R=="string")try{k=JSON.parse(R),k.version!==1&&(k=null)}catch(O){}return L.length===0&&k===null&&D.files.length>0?[Array.prototype.slice.call(D.files,0).map(O=>O.name).join(`
`),null]:[L,k]}static setTextData(D,L,k,R){D.setData(d.v.text,L),typeof k=="string"&&D.setData("text/html",k),D.setData("vscode-editor-data",JSON.stringify(R))}}class w extends f.JT{constructor(D){super(),this._actual=D,this.onKeyDown=this._register(new I.Y(this._actual,"keydown")).event,this.onKeyUp=this._register(new I.Y(this._actual,"keyup")).event,this.onCompositionStart=this._register(new I.Y(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new I.Y(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new I.Y(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new I.Y(this._actual,"beforeinput")).event,this.onInput=this._register(new I.Y(this._actual,"input")).event,this.onCut=this._register(new I.Y(this._actual,"cut")).event,this.onCopy=this._register(new I.Y(this._actual,"copy")).event,this.onPaste=this._register(new I.Y(this._actual,"paste")).event,this.onFocus=this._register(new I.Y(this._actual,"focus")).event,this.onBlur=this._register(new I.Y(this._actual,"blur")).event,this._onSyntheticTap=this._register(new v.Q5),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>A.B.onKeyDown())),this._register(this.onBeforeInput(()=>A.B.onBeforeInput())),this._register(this.onInput(()=>A.B.onInput())),this._register(this.onKeyUp(()=>A.B.onKeyUp())),this._register(u.nm(this._actual,m.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){let D=u.Ay(this._actual);return D?D.activeElement===this._actual:!!u.Uw(this._actual)&&document.activeElement===this._actual}setIgnoreSelectionChangeTime(D){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(D,L){let k=this._actual;k.value!==L&&(this.setIgnoreSelectionChangeTime("setValue"),k.value=L)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(D,L,k){let R=this._actual,O=null,$=u.Ay(R);O=$?$.activeElement:document.activeElement;let N=O===R,T=R.selectionStart,C=R.selectionEnd;if(N&&T===L&&C===k)B.isFirefox&&window.parent!==window&&R.focus();else{if(N)return this.setIgnoreSelectionChangeTime("setSelectionRange"),R.setSelectionRange(L,k),void(B.isFirefox&&window.parent!==window&&R.focus());try{let W=u.vL(R);this.setIgnoreSelectionChangeTime("setSelectionRange"),R.focus(),R.setSelectionRange(L,k),u._0(R,W)}catch(W){}}}}},5887:(ut,Ie,t)=>{"use strict";t.d(Ie,{al:()=>u,ee:()=>_,un:()=>I});var m=t(7295),B=t(4314);let u=!1;class I{constructor(x,v,f,d,o){this.value=x,this.selectionStart=v,this.selectionEnd=f,this.selection=d,this.newlineCountBeforeSelection=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(x,v){let f=x.getValue(),d=x.getSelectionStart(),o=x.getSelectionEnd(),h;return v&&f.substring(0,d)===v.value.substring(0,v.selectionStart)&&(h=v.newlineCountBeforeSelection),new I(f,d,o,null,h)}collapseSelection(){return this.selectionStart===this.value.length?this:new I(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(x,v,f){u&&console.log(`writeToTextArea ${x}: ${this.toString()}`),v.setValue(x,this.value),f&&v.setSelectionRange(x,this.selectionStart,this.selectionEnd)}deduceEditorPosition(x){var v,f,d,o,h,r,i,c;if(x<=this.selectionStart){let a=this.value.substring(x,this.selectionStart);return this._finishDeduceEditorPosition((f=(v=this.selection)===null||v===void 0?void 0:v.getStartPosition())!==null&&f!==void 0?f:null,a,-1)}if(x>=this.selectionEnd){let a=this.value.substring(this.selectionEnd,x);return this._finishDeduceEditorPosition((o=(d=this.selection)===null||d===void 0?void 0:d.getEndPosition())!==null&&o!==void 0?o:null,a,1)}let b=this.value.substring(this.selectionStart,x);if(b.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition((r=(h=this.selection)===null||h===void 0?void 0:h.getStartPosition())!==null&&r!==void 0?r:null,b,1);let l=this.value.substring(x,this.selectionEnd);return this._finishDeduceEditorPosition((c=(i=this.selection)===null||i===void 0?void 0:i.getEndPosition())!==null&&c!==void 0?c:null,l,-1)}_finishDeduceEditorPosition(x,v,f){let d=0,o=-1;for(;(o=v.indexOf(`
`,o+1))!==-1;)d++;return[x,f*v.length,d]}static deduceInput(x,v,f){if(!x)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};u&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${x.toString()}`),console.log(`CURRENT STATE: ${v.toString()}`));let d=Math.min(m.Mh(x.value,v.value),x.selectionStart,v.selectionStart),o=Math.min(m.P1(x.value,v.value),x.value.length-x.selectionEnd,v.value.length-v.selectionEnd),h=x.value.substring(d,x.value.length-o),r=v.value.substring(d,v.value.length-o),i=x.selectionStart-d,c=x.selectionEnd-d,b=v.selectionStart-d,l=v.selectionEnd-d;if(u&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${h}>, selectionStart: ${i}, selectionEnd: ${c}`),console.log(`AFTER DIFFING CURRENT STATE: <${r}>, selectionStart: ${b}, selectionEnd: ${l}`)),b===l){let a=x.selectionStart-d;return u&&console.log(`REMOVE PREVIOUS: ${a} chars`),{text:r,replacePrevCharCnt:a,replaceNextCharCnt:0,positionDelta:0}}return{text:r,replacePrevCharCnt:c-i,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(x,v){if(!x)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(u&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${x.toString()}`),console.log(`CURRENT STATE: ${v.toString()}`)),x.value===v.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:v.selectionEnd-x.selectionEnd};let f=Math.min(m.Mh(x.value,v.value),x.selectionEnd),d=Math.min(m.P1(x.value,v.value),x.value.length-x.selectionEnd),o=x.value.substring(f,x.value.length-d),h=v.value.substring(f,v.value.length-d),r=x.selectionStart-f,i=x.selectionEnd-f,c=v.selectionStart-f,b=v.selectionEnd-f;return u&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${o}>, selectionStart: ${r}, selectionEnd: ${i}`),console.log(`AFTER DIFFING CURRENT STATE: <${h}>, selectionStart: ${c}, selectionEnd: ${b}`)),{text:h,replacePrevCharCnt:i,replaceNextCharCnt:o.length-i,positionDelta:b-h.length}}}I.EMPTY=new I("",0,0,null,void 0);class _{static _getPageOfLine(x,v){return Math.floor((x-1)/v)}static _getRangeForPage(x,v){let f=x*v,d=f+1,o=f+v;return new B.e(d,1,o+1,1)}static fromEditorSelection(x,v,f,d){let h=_._getPageOfLine(v.startLineNumber,f),r=_._getRangeForPage(h,f),i=_._getPageOfLine(v.endLineNumber,f),c=_._getRangeForPage(i,f),b=r.intersectRanges(new B.e(1,1,v.startLineNumber,v.startColumn));if(d&&x.getValueLengthInRange(b,1)>500){let k=x.modifyPosition(b.getEndPosition(),-500);b=B.e.fromPositions(k,b.getEndPosition())}let l=x.getValueInRange(b,1),a=x.getLineCount(),w=x.getLineMaxColumn(a),E=c.intersectRanges(new B.e(v.endLineNumber,v.endColumn,a,w));if(d&&x.getValueLengthInRange(E,1)>500){let k=x.modifyPosition(E.getStartPosition(),500);E=B.e.fromPositions(E.getStartPosition(),k)}let D=x.getValueInRange(E,1),L;if(h===i||h+1===i)L=x.getValueInRange(v,1);else{let k=r.intersectRanges(v),R=c.intersectRanges(v);L=x.getValueInRange(k,1)+String.fromCharCode(8230)+x.getValueInRange(R,1)}return d&&L.length>1e3&&(L=L.substring(0,500)+String.fromCharCode(8230)+L.substring(L.length-500,L.length)),new I(l+L+D,l.length,l.length+L.length,v,b.endLineNumber-b.startLineNumber)}}},9317:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CoreEditingCommands:()=>$,CoreEditorCommand:()=>a,CoreNavigationCommands:()=>D,EditorScroll_:()=>w,RevealLine_:()=>E});var m=t(3580),B=t(6268),u=t(8401),I=t(5152),_=t(6830),A=t(1640),x=t(5343),v=t(187),f=t(4314);class d{static columnSelect(W,K,j,F,H,z){let J=Math.abs(H-j)+1,oe=j>H,fe=F>z,q=F<z,p=[];for(let re=0;re<J;re++){let ne=j+(oe?-re:re),ie=W.columnFromVisibleColumn(K,ne,F),se=W.columnFromVisibleColumn(K,ne,z),ce=W.visibleColumnFromColumn(K,new v.L(ne,ie)),be=W.visibleColumnFromColumn(K,new v.L(ne,se));q&&(ce>z||be<F)||fe&&(be>F||ce<z)||p.push(new x.rS(new f.e(ne,ie,ne,ie),0,0,new v.L(ne,se),0))}if(p.length===0)for(let re=0;re<J;re++){let ne=j+(oe?-re:re),ie=K.getLineMaxColumn(ne);p.push(new x.rS(new f.e(ne,ie,ne,ie),0,0,new v.L(ne,ie),0))}return{viewStates:p,reversed:oe,fromLineNumber:j,fromVisualColumn:F,toLineNumber:H,toVisualColumn:z}}static columnSelectLeft(W,K,j){let F=j.toViewVisualColumn;return F>0&&F--,d.columnSelect(W,K,j.fromViewLineNumber,j.fromViewVisualColumn,j.toViewLineNumber,F)}static columnSelectRight(W,K,j){let F=0,H=Math.min(j.fromViewLineNumber,j.toViewLineNumber),z=Math.max(j.fromViewLineNumber,j.toViewLineNumber);for(let oe=H;oe<=z;oe++){let fe=K.getLineMaxColumn(oe),q=W.visibleColumnFromColumn(K,new v.L(oe,fe));F=Math.max(F,q)}let J=j.toViewVisualColumn;return J<F&&J++,this.columnSelect(W,K,j.fromViewLineNumber,j.fromViewVisualColumn,j.toViewLineNumber,J)}static columnSelectUp(W,K,j,F){let H=F?W.pageSize:1,z=Math.max(1,j.toViewLineNumber-H);return this.columnSelect(W,K,j.fromViewLineNumber,j.fromViewVisualColumn,z,j.toViewVisualColumn)}static columnSelectDown(W,K,j,F){let H=F?W.pageSize:1,z=Math.min(K.getLineCount(),j.toViewLineNumber+H);return this.columnSelect(W,K,j.fromViewLineNumber,j.fromViewVisualColumn,z,j.toViewVisualColumn)}}var o=t(9436),h=t(8108),r=t(1336),i=t(9102),c=t(3983),b=t(9989);let l=0;class a extends _._l{runEditorCommand(W,K,j){let F=K._getViewModel();F&&this.runCoreEditorCommand(F,j||{})}}var w,E,D;(function(C){C.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:function(W){if(!u.Kn(W))return!1;let K=W;return!(!u.HD(K.to)||!u.o8(K.by)&&!u.HD(K.by)||!u.o8(K.value)&&!u.hj(K.value)||!u.o8(K.revealCursor)&&!u.jn(K.revealCursor))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},C.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},C.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},C.parse=function(W){let K,j;switch(W.to){case C.RawDirection.Up:K=1;break;case C.RawDirection.Right:K=2;break;case C.RawDirection.Down:K=3;break;case C.RawDirection.Left:K=4;break;default:return null}switch(W.by){case C.RawUnit.Line:j=1;break;case C.RawUnit.WrappedLine:j=2;break;case C.RawUnit.Page:j=3;break;case C.RawUnit.HalfPage:j=4;break;case C.RawUnit.Editor:j=5;break;case C.RawUnit.Column:j=6;break;default:j=2}return{direction:K,unit:j,value:Math.floor(W.value||1),revealCursor:!!W.revealCursor,select:!!W.select}}})(w||(w={})),function(C){C.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:function(W){if(!u.Kn(W))return!1;let K=W;return!(!u.hj(K.lineNumber)&&!u.HD(K.lineNumber)||!u.o8(K.at)&&!u.HD(K.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},C.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(E||(E={}));class L{constructor(W){W.addImplementation(1e4,"code-editor",(K,j)=>{let F=K.get(A.$).getFocusedCodeEditor();return!(!F||!F.hasTextFocus())&&this._runEditorCommand(K,F,j)}),W.addImplementation(1e3,"generic-dom-input-textarea",(K,j)=>{let F=document.activeElement;return!!(F&&["input","textarea"].indexOf(F.tagName.toLowerCase())>=0)&&(this.runDOMCommand(),!0)}),W.addImplementation(0,"generic-dom",(K,j)=>{let F=K.get(A.$).getActiveCodeEditor();return!!F&&(F.focus(),this._runEditorCommand(K,F,j))})}_runEditorCommand(W,K,j){return this.runEditorCommand(W,K,j)||!0}}(function(C){class W extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){U.position&&(de.model.pushStackElement(),de.setCursorStates(U.source,3,[h.P.moveTo(de,de.getPrimaryCursorState(),this._inSelectionMode,U.position,U.viewPosition)])&&U.revealType!==2&&de.revealPrimaryCursor(U.source,!0,!0))}}C.MoveTo=(0,_.fK)(new W({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),C.MoveToSelect=(0,_.fK)(new W({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class K extends a{runCoreEditorCommand(de,U){de.model.pushStackElement();let ue=this._getColumnSelectResult(de,de.getPrimaryCursorState(),de.getCursorColumnSelectData(),U);ue!==null&&(de.setCursorStates(U.source,3,ue.viewStates.map(ve=>x.Vi.fromViewState(ve))),de.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:ue.fromLineNumber,fromViewVisualColumn:ue.fromVisualColumn,toViewLineNumber:ue.toLineNumber,toViewVisualColumn:ue.toVisualColumn}),ue.reversed?de.revealTopMostCursor(U.source):de.revealBottomMostCursor(U.source))}}C.ColumnSelect=(0,_.fK)(new class extends K{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(be,de,U,ue){if(ue.position===void 0||ue.viewPosition===void 0||ue.mouseColumn===void 0)return null;let ve=be.model.validatePosition(ue.position),X=be.coordinatesConverter.validateViewPosition(new v.L(ue.viewPosition.lineNumber,ue.viewPosition.column),ve),ye=ue.doColumnSelect?U.fromViewLineNumber:X.lineNumber,Ce=ue.doColumnSelect?U.fromViewVisualColumn:ue.mouseColumn-1;return d.columnSelect(be.cursorConfig,be,ye,Ce,X.lineNumber,ue.mouseColumn-1)}}),C.CursorColumnSelectLeft=(0,_.fK)(new class extends K{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(be,de,U,ue){return d.columnSelectLeft(be.cursorConfig,be,U)}}),C.CursorColumnSelectRight=(0,_.fK)(new class extends K{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(be,de,U,ue){return d.columnSelectRight(be.cursorConfig,be,U)}});class j extends K{constructor(de){super(de),this._isPaged=de.isPaged}_getColumnSelectResult(de,U,ue,ve){return d.columnSelectUp(de.cursorConfig,de,ue,this._isPaged)}}C.CursorColumnSelectUp=(0,_.fK)(new j({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3600,linux:{primary:0}}})),C.CursorColumnSelectPageUp=(0,_.fK)(new j({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3595,linux:{primary:0}}}));class F extends K{constructor(de){super(de),this._isPaged=de.isPaged}_getColumnSelectResult(de,U,ue,ve){return d.columnSelectDown(de.cursorConfig,de,ue,this._isPaged)}}C.CursorColumnSelectDown=(0,_.fK)(new F({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3602,linux:{primary:0}}})),C.CursorColumnSelectPageDown=(0,_.fK)(new F({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3596,linux:{primary:0}}}));class H extends a{constructor(){super({id:"cursorMove",precondition:void 0,description:h.N.description})}runCoreEditorCommand(de,U){let ue=h.N.parse(U);ue&&this._runCursorMove(de,U.source,ue)}_runCursorMove(de,U,ue){de.model.pushStackElement(),de.setCursorStates(U,3,H._move(de,de.getCursorStates(),ue)),de.revealPrimaryCursor(U,!0)}static _move(de,U,ue){let ve=ue.select,X=ue.value;switch(ue.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return h.P.simpleMove(de,U,ue.direction,ve,X,ue.unit);case 11:case 13:case 12:case 14:return h.P.viewportMove(de,U,ue.direction,ve,X);default:return null}}}C.CursorMoveImpl=H,C.CursorMove=(0,_.fK)(new H);class z extends a{constructor(de){super(de),this._staticArgs=de.args}runCoreEditorCommand(de,U){let ue=this._staticArgs;this._staticArgs.value===-1&&(ue={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:U.pageSize||de.cursorConfig.pageSize}),de.model.pushStackElement(),de.setCursorStates(U.source,3,h.P.simpleMove(de,de.getCursorStates(),ue.direction,ue.select,ue.value,ue.unit)),de.revealPrimaryCursor(U.source,!0)}}C.CursorLeft=(0,_.fK)(new z({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),C.CursorLeftSelect=(0,_.fK)(new z({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1039}})),C.CursorRight=(0,_.fK)(new z({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),C.CursorRightSelect=(0,_.fK)(new z({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1041}})),C.CursorUp=(0,_.fK)(new z({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),C.CursorUpSelect=(0,_.fK)(new z({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),C.CursorPageUp=(0,_.fK)(new z({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:11}})),C.CursorPageUpSelect=(0,_.fK)(new z({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1035}})),C.CursorDown=(0,_.fK)(new z({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),C.CursorDownSelect=(0,_.fK)(new z({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),C.CursorPageDown=(0,_.fK)(new z({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:12}})),C.CursorPageDownSelect=(0,_.fK)(new z({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1036}})),C.CreateCursor=(0,_.fK)(new class extends a{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(be,de){if(!de.position)return;let U;U=de.wholeLine?h.P.line(be,be.getPrimaryCursorState(),!1,de.position,de.viewPosition):h.P.moveTo(be,be.getPrimaryCursorState(),!1,de.position,de.viewPosition);let ue=be.getCursorStates();if(ue.length>1){let ve=U.modelState?U.modelState.position:null,X=U.viewState?U.viewState.position:null;for(let ye=0,Ce=ue.length;ye<Ce;ye++){let Ee=ue[ye];if((!ve||Ee.modelState.selection.containsPosition(ve))&&(!X||Ee.viewState.selection.containsPosition(X)))return ue.splice(ye,1),be.model.pushStackElement(),void be.setCursorStates(de.source,3,ue)}}ue.push(U),be.model.pushStackElement(),be.setCursorStates(de.source,3,ue)}}),C.LastCursorMoveToSelect=(0,_.fK)(new class extends a{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(be,de){if(!de.position)return;let U=be.getLastAddedCursorIndex(),ue=be.getCursorStates(),ve=ue.slice(0);ve[U]=h.P.moveTo(be,ue[U],!0,de.position,de.viewPosition),be.model.pushStackElement(),be.setCursorStates(de.source,3,ve)}});class J extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){de.model.pushStackElement(),de.setCursorStates(U.source,3,h.P.moveToBeginningOfLine(de,de.getCursorStates(),this._inSelectionMode)),de.revealPrimaryCursor(U.source,!0)}}C.CursorHome=(0,_.fK)(new J({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),C.CursorHomeSelect=(0,_.fK)(new J({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class oe extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){de.model.pushStackElement(),de.setCursorStates(U.source,3,this._exec(de.getCursorStates())),de.revealPrimaryCursor(U.source,!0)}_exec(de){let U=[];for(let ue=0,ve=de.length;ue<ve;ue++){let X=de[ue],ye=X.modelState.position.lineNumber;U[ue]=x.Vi.fromModelState(X.modelState.move(this._inSelectionMode,ye,1,0))}return U}}C.CursorLineStart=(0,_.fK)(new oe({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:0,mac:{primary:287}}})),C.CursorLineStartSelect=(0,_.fK)(new oe({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:0,mac:{primary:1311}}}));class fe extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){de.model.pushStackElement(),de.setCursorStates(U.source,3,h.P.moveToEndOfLine(de,de.getCursorStates(),this._inSelectionMode,U.sticky||!1)),de.revealPrimaryCursor(U.source,!0)}}C.CursorEnd=(0,_.fK)(new fe({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:l,kbExpr:i.u.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),C.CursorEndSelect=(0,_.fK)(new fe({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:l,kbExpr:i.u.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m.NC("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class q extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){de.model.pushStackElement(),de.setCursorStates(U.source,3,this._exec(de,de.getCursorStates())),de.revealPrimaryCursor(U.source,!0)}_exec(de,U){let ue=[];for(let ve=0,X=U.length;ve<X;ve++){let ye=U[ve],Ce=ye.modelState.position.lineNumber,Ee=de.model.getLineMaxColumn(Ce);ue[ve]=x.Vi.fromModelState(ye.modelState.move(this._inSelectionMode,Ce,Ee,0))}return ue}}C.CursorLineEnd=(0,_.fK)(new q({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:0,mac:{primary:291}}})),C.CursorLineEndSelect=(0,_.fK)(new q({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:0,mac:{primary:1315}}}));class p extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){de.model.pushStackElement(),de.setCursorStates(U.source,3,h.P.moveToBeginningOfBuffer(de,de.getCursorStates(),this._inSelectionMode)),de.revealPrimaryCursor(U.source,!0)}}C.CursorTop=(0,_.fK)(new p({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:2062,mac:{primary:2064}}})),C.CursorTopSelect=(0,_.fK)(new p({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3086,mac:{primary:3088}}}));class re extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){de.model.pushStackElement(),de.setCursorStates(U.source,3,h.P.moveToEndOfBuffer(de,de.getCursorStates(),this._inSelectionMode)),de.revealPrimaryCursor(U.source,!0)}}C.CursorBottom=(0,_.fK)(new re({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:2061,mac:{primary:2066}}})),C.CursorBottomSelect=(0,_.fK)(new re({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:3085,mac:{primary:3090}}}));class ne extends a{constructor(){super({id:"editorScroll",precondition:void 0,description:w.description})}determineScrollMethod(de){return[6].includes(de.unit)&&[4,2].includes(de.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(de.unit)&&[1,3].includes(de.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(de,U){let ue=w.parse(U);if(!ue)return;let ve=this.determineScrollMethod(ue);ve&&ve(de,U.source,ue)}_runVerticalEditorScroll(de,U,ue){let ve=this._computeDesiredScrollTop(de,ue);if(ue.revealCursor){let X=de.getCompletelyVisibleViewRangeAtScrollTop(ve);de.setCursorStates(U,3,[h.P.findPositionInViewportIfOutside(de,de.getPrimaryCursorState(),X,ue.select)])}de.viewLayout.setScrollPosition({scrollTop:ve},0)}_computeDesiredScrollTop(de,U){if(U.unit===1){let X=de.viewLayout.getFutureViewport(),ye=de.getCompletelyVisibleViewRangeAtScrollTop(X.top),Ce=de.coordinatesConverter.convertViewRangeToModelRange(ye),Ee;Ee=U.direction===1?Math.max(1,Ce.startLineNumber-U.value):Math.min(de.model.getLineCount(),Ce.startLineNumber+U.value);let Ae=de.coordinatesConverter.convertModelPositionToViewPosition(new v.L(Ee,1));return de.viewLayout.getVerticalOffsetForLineNumber(Ae.lineNumber)}if(U.unit===5){let X=0;return U.direction===3&&(X=de.model.getLineCount()-de.cursorConfig.pageSize),de.viewLayout.getVerticalOffsetForLineNumber(X)}let ue;ue=U.unit===3?de.cursorConfig.pageSize*U.value:U.unit===4?Math.round(de.cursorConfig.pageSize/2)*U.value:U.value;let ve=(U.direction===1?-1:1)*ue;return de.viewLayout.getCurrentScrollTop()+ve*de.cursorConfig.lineHeight}_runHorizontalEditorScroll(de,U,ue){let ve=this._computeDesiredScrollLeft(de,ue);de.viewLayout.setScrollPosition({scrollLeft:ve},0)}_computeDesiredScrollLeft(de,U){let ue=(U.direction===4?-1:1)*U.value;return de.viewLayout.getCurrentScrollLeft()+ue*de.cursorConfig.typicalHalfwidthCharacterWidth}}C.EditorScrollImpl=ne,C.EditorScroll=(0,_.fK)(new ne),C.ScrollLineUp=(0,_.fK)(new class extends a{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Up,by:w.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollPageUp=(0,_.fK)(new class extends a{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Up,by:w.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollEditorTop=(0,_.fK)(new class extends a{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Up,by:w.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollLineDown=(0,_.fK)(new class extends a{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Down,by:w.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollPageDown=(0,_.fK)(new class extends a{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Down,by:w.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollEditorBottom=(0,_.fK)(new class extends a{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Down,by:w.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollLeft=(0,_.fK)(new class extends a{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Left,by:w.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:de.source})}}),C.ScrollRight=(0,_.fK)(new class extends a{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus}})}runCoreEditorCommand(be,de){C.EditorScroll.runCoreEditorCommand(be,{to:w.RawDirection.Right,by:w.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:de.source})}});class ie extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){U.position&&(de.model.pushStackElement(),de.setCursorStates(U.source,3,[h.P.word(de,de.getPrimaryCursorState(),this._inSelectionMode,U.position)]),U.revealType!==2&&de.revealPrimaryCursor(U.source,!0,!0))}}C.WordSelect=(0,_.fK)(new ie({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),C.WordSelectDrag=(0,_.fK)(new ie({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),C.LastCursorWordSelect=(0,_.fK)(new class extends a{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(be,de){if(!de.position)return;let U=be.getLastAddedCursorIndex(),ue=be.getCursorStates(),ve=ue.slice(0),X=ue[U];ve[U]=h.P.word(be,X,X.modelState.hasSelection(),de.position),be.model.pushStackElement(),be.setCursorStates(de.source,3,ve)}});class se extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){U.position&&(de.model.pushStackElement(),de.setCursorStates(U.source,3,[h.P.line(de,de.getPrimaryCursorState(),this._inSelectionMode,U.position,U.viewPosition)]),U.revealType!==2&&de.revealPrimaryCursor(U.source,!1,!0))}}C.LineSelect=(0,_.fK)(new se({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),C.LineSelectDrag=(0,_.fK)(new se({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class ce extends a{constructor(de){super(de),this._inSelectionMode=de.inSelectionMode}runCoreEditorCommand(de,U){if(!U.position)return;let ue=de.getLastAddedCursorIndex(),ve=de.getCursorStates(),X=ve.slice(0);X[ue]=h.P.line(de,ve[ue],this._inSelectionMode,U.position,U.viewPosition),de.model.pushStackElement(),de.setCursorStates(U.source,3,X)}}C.LastCursorLineSelect=(0,_.fK)(new ce({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),C.LastCursorLineSelectDrag=(0,_.fK)(new ce({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),C.CancelSelection=(0,_.fK)(new class extends a{constructor(){super({id:"cancelSelection",precondition:i.u.hasNonEmptySelection,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(be,de){be.model.pushStackElement(),be.setCursorStates(de.source,3,[h.P.cancelSelection(be,be.getPrimaryCursorState())]),be.revealPrimaryCursor(de.source,!0)}}),C.RemoveSecondaryCursors=(0,_.fK)(new class extends a{constructor(){super({id:"removeSecondaryCursors",precondition:i.u.hasMultipleSelections,kbOpts:{weight:l+1,kbExpr:i.u.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(be,de){be.model.pushStackElement(),be.setCursorStates(de.source,3,[be.getPrimaryCursorState()]),be.revealPrimaryCursor(de.source,!0),(0,I.i7)(m.NC("removedCursor","Removed secondary cursors"))}}),C.RevealLine=(0,_.fK)(new class extends a{constructor(){super({id:"revealLine",precondition:void 0,description:E.description})}runCoreEditorCommand(be,de){let U=de,ue=U.lineNumber||0,ve=typeof ue=="number"?ue+1:parseInt(ue)+1;ve<1&&(ve=1);let X=be.model.getLineCount();ve>X&&(ve=X);let ye=new f.e(ve,1,ve,be.model.getLineMaxColumn(ve)),Ce=0;if(U.at)switch(U.at){case E.RawAtArgument.Top:Ce=3;break;case E.RawAtArgument.Center:Ce=1;break;case E.RawAtArgument.Bottom:Ce=4}let Ee=be.coordinatesConverter.convertModelRangeToViewRange(ye);be.revealRange(de.source,!1,Ee,Ce,0)}}),C.SelectAll=new class extends L{constructor(){super(_.Sq)}runDOMCommand(){B.isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(be,de,U){let ue=de._getViewModel();ue&&this.runCoreEditorCommand(ue,U)}runCoreEditorCommand(be,de){be.model.pushStackElement(),be.setCursorStates("keyboard",3,[h.P.selectAll(be,be.getPrimaryCursorState())])}},C.SetSelection=(0,_.fK)(new class extends a{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(be,de){de.selection&&(be.model.pushStackElement(),be.setCursorStates(de.source,3,[x.Vi.fromModelSelection(de.selection)]))}})})(D||(D={}));let k=c.Ao.and(i.u.textInputFocus,i.u.columnSelection);function R(C,W){b.W.registerKeybindingRule({id:C,primary:W,when:k,weight:l+1})}function O(C){return C.register(),C}var $;R(D.CursorColumnSelectLeft.id,1039),R(D.CursorColumnSelectRight.id,1041),R(D.CursorColumnSelectUp.id,1040),R(D.CursorColumnSelectPageUp.id,1035),R(D.CursorColumnSelectDown.id,1042),R(D.CursorColumnSelectPageDown.id,1036),function(C){class W extends _._l{runEditorCommand(j,F,H){let z=F._getViewModel();z&&this.runCoreEditingCommand(F,z,H||{})}}C.CoreEditingCommand=W,C.LineBreakInsert=(0,_.fK)(new class extends W{constructor(){super({id:"lineBreakInsert",precondition:i.u.writable,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(K,j,F){K.pushUndoStop(),K.executeCommands(this.id,r.u6.lineBreakInsert(j.cursorConfig,j.model,j.getCursorStates().map(H=>H.modelState.selection)))}}),C.Outdent=(0,_.fK)(new class extends W{constructor(){super({id:"outdent",precondition:i.u.writable,kbOpts:{weight:l,kbExpr:c.Ao.and(i.u.editorTextFocus,i.u.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(K,j,F){K.pushUndoStop(),K.executeCommands(this.id,r.u6.outdent(j.cursorConfig,j.model,j.getCursorStates().map(H=>H.modelState.selection))),K.pushUndoStop()}}),C.Tab=(0,_.fK)(new class extends W{constructor(){super({id:"tab",precondition:i.u.writable,kbOpts:{weight:l,kbExpr:c.Ao.and(i.u.editorTextFocus,i.u.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(K,j,F){K.pushUndoStop(),K.executeCommands(this.id,r.u6.tab(j.cursorConfig,j.model,j.getCursorStates().map(H=>H.modelState.selection))),K.pushUndoStop()}}),C.DeleteLeft=(0,_.fK)(new class extends W{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(K,j,F){let[H,z]=o.A.deleteLeft(j.getPrevEditOperationType(),j.cursorConfig,j.model,j.getCursorStates().map(J=>J.modelState.selection),j.getCursorAutoClosedCharacters());H&&K.pushUndoStop(),K.executeCommands(this.id,z),j.setPrevEditOperationType(2)}}),C.DeleteRight=(0,_.fK)(new class extends W{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:l,kbExpr:i.u.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(K,j,F){let[H,z]=o.A.deleteRight(j.getPrevEditOperationType(),j.cursorConfig,j.model,j.getCursorStates().map(J=>J.modelState.selection));H&&K.pushUndoStop(),K.executeCommands(this.id,z),j.setPrevEditOperationType(3)}}),C.Undo=new class extends L{constructor(){super(_.n_)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(K,j,F){if(j.hasModel()&&j.getOption(87)!==!0)return j.getModel().undo()}},C.Redo=new class extends L{constructor(){super(_.kz)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(K,j,F){if(j.hasModel()&&j.getOption(87)!==!0)return j.getModel().redo()}}}($||($={}));class N extends _.mY{constructor(W,K,j){super({id:W,precondition:void 0,description:j}),this._handlerId=K}runCommand(W,K){let j=W.get(A.$).getFocusedCodeEditor();j&&j.trigger("keyboard",this._handlerId,K)}}function T(C,W){O(new N("default:"+C,C)),O(new N(C,C,W))}T("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),T("replacePreviousChar"),T("compositionType"),T("compositionStart"),T("compositionEnd"),T("paste"),T("cut")},2944:(ut,Ie,t)=>{"use strict";t.d(Ie,{B:()=>x,d:()=>d});var m=t(3547),B=t(3278),u=t(1170),I=t(666),_=t(6021),A=function(o,h,r,i){return new(r||(r=Promise))(function(c,b){function l(E){try{w(i.next(E))}catch(D){b(D)}}function a(E){try{w(i.throw(E))}catch(D){b(D)}}function w(E){var D;E.done?c(E.value):(D=E.value,D instanceof r?D:new r(function(L){L(D)})).then(l,a)}w((i=i.apply(o,h||[])).next())})};function x(o){let h=new B.Hl;for(let r of o.items){let i=r.type;if(r.kind==="string"){let c=new Promise(b=>r.getAsString(b));h.append(i,(0,B.ZO)(c))}else if(r.kind==="file"){let c=r.getAsFile();c&&h.append(i,v(c))}}return h}function v(o){let h=o.path?I.o.parse(o.path):void 0;return(0,B.Ix)(o.name,h,()=>A(this,void 0,void 0,function*(){return new Uint8Array(yield o.arrayBuffer())}))}let f=Object.freeze([_.Km.EDITORS,_.Km.FILES,m.g.RESOURCES]);function d(o,h,r=!1){var i;if(h.dataTransfer&&(r||!o.has(u.v.uriList))){let c=(0,_.GR)(h).filter(b=>b.resource).map(b=>b.resource.toString());for(let b of(i=h.dataTransfer)===null||i===void 0?void 0:i.items){let l=b.getAsFile();l&&c.push(l.path?I.o.file(l.path).toString():l.name)}c.length&&o.replace(u.v.uriList,(0,B.ZO)(B.Z0.create(c)))}for(let c of f)o.delete(c)}},5520:(ut,Ie,t)=>{"use strict";t.d(Ie,{CL:()=>B,Pi:()=>I,QI:()=>u});var m=t(6518);function B(_){return!(!_||typeof _.getEditorType!="function")&&_.getEditorType()===m.g.ICodeEditor}function u(_){return!(!_||typeof _.getEditorType!="function")&&_.getEditorType()===m.g.IDiffEditor}function I(_){return B(_)?_:u(_)?_.getModifiedEditor():function(A){return!!A&&typeof A=="object"&&typeof A.onDidChangeActiveEditor=="function"}(_)&&B(_.activeCodeEditor)?_.activeCodeEditor:null}},9994:(ut,Ie,t)=>{"use strict";t.d(Ie,{AL:()=>b,N5:()=>i,Pp:()=>h,YN:()=>x,gy:()=>r,kG:()=>o,rU:()=>v,t7:()=>l,tC:()=>c});var m=t(5321),B=t(3911),u=t(7448),I=t(5393),_=t(5976),A=t(3910);class x{constructor(D,L){this.x=D,this.y=L,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new v(this.x-window.scrollX,this.y-window.scrollY)}}class v{constructor(D,L){this.clientX=D,this.clientY=L,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new x(this.clientX+window.scrollX,this.clientY+window.scrollY)}}class f{constructor(D,L,k,R){this.x=D,this.y=L,this.width=k,this.height=R,this._editorPagePositionBrand=void 0}}class d{constructor(D,L){this.x=D,this.y=L,this._positionRelativeToEditorBrand=void 0}}function o(E){let D=m.i(E);return new f(D.left,D.top,D.width,D.height)}function h(E,D,L){let k=D.width/E.offsetWidth,R=D.height/E.offsetHeight,O=(L.x-D.x)/k,$=(L.y-D.y)/R;return new d(O,$)}class r extends u.n{constructor(D,L,k){super(D),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=L,this.pos=new x(this.posx,this.posy),this.editorPos=o(k),this.relativePos=h(k,this.editorPos,this.pos)}}class i{constructor(D){this._editorViewDomNode=D}_create(D){return new r(D,!1,this._editorViewDomNode)}onContextMenu(D,L){return m.nm(D,"contextmenu",k=>{L(this._create(k))})}onMouseUp(D,L){return m.nm(D,"mouseup",k=>{L(this._create(k))})}onMouseDown(D,L){return m.nm(D,m.tw.MOUSE_DOWN,k=>{L(this._create(k))})}onPointerDown(D,L){return m.nm(D,m.tw.POINTER_DOWN,k=>{L(this._create(k),k.pointerId)})}onMouseLeave(D,L){return m.nm(D,m.tw.MOUSE_LEAVE,k=>{L(this._create(k))})}onMouseMove(D,L){return m.nm(D,"mousemove",k=>L(this._create(k)))}}class c{constructor(D){this._editorViewDomNode=D}_create(D){return new r(D,!1,this._editorViewDomNode)}onPointerUp(D,L){return m.nm(D,"pointerup",k=>{L(this._create(k))})}onPointerDown(D,L){return m.nm(D,m.tw.POINTER_DOWN,k=>{L(this._create(k),k.pointerId)})}onPointerLeave(D,L){return m.nm(D,m.tw.POINTER_LEAVE,k=>{L(this._create(k))})}onPointerMove(D,L){return m.nm(D,"pointermove",k=>L(this._create(k)))}}class b extends _.JT{constructor(D){super(),this._editorViewDomNode=D,this._globalPointerMoveMonitor=this._register(new B.C),this._keydownListener=null}startMonitoring(D,L,k,R,O){this._keydownListener=m.mu(document,"keydown",$=>{$.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,$.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(D,L,k,$=>{R(new r($,!0,this._editorViewDomNode))},$=>{this._keydownListener.dispose(),O($)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class l{constructor(D){this._editor=D,this._instanceId=++l._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new I.pY(()=>this.garbageCollect(),1e3)}createClassNameRef(D){let L=this.getOrCreateRule(D);return L.increaseRefCount(),{className:L.className,dispose:()=>{L.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(D){let L=this.computeUniqueKey(D),k=this._rules.get(L);if(!k){let R=this._counter++;k=new a(L,`dyn-rule-${this._instanceId}-${R}`,m.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,D),this._rules.set(L,k)}return k}computeUniqueKey(D){return JSON.stringify(D)}garbageCollect(){for(let D of this._rules.values())D.hasReferences()||(this._rules.delete(D.key),D.dispose())}}l._idPool=0;class a{constructor(D,L,k,R){this.key=D,this.className=L,this.properties=R,this._referenceCount=0,this._styleElement=m.dS(k),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(D,L){let k=`.${D} {`;for(let R in L){let O=L[R],$;$=typeof O=="object"?(0,A.n_1)(O.id):O,k+=`
	${w(R)}: ${$};`}return k+=`
}`,k}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function w(E){return E.replace(/(^[A-Z])/,([D])=>D.toLowerCase()).replace(/([A-Z])/g,([D])=>`-${D.toLowerCase()}`)}},6830:(ut,Ie,t)=>{"use strict";t.d(Ie,{AJ:()=>a,QG:()=>T,Qr:()=>$,R6:()=>D,Sq:()=>H,Uc:()=>m,_K:()=>C,_l:()=>E,fK:()=>O,jY:()=>L,kz:()=>F,mY:()=>l,n_:()=>j,rn:()=>N,sb:()=>R,x1:()=>k});var m,B=t(3580),u=t(666),I=t(1640),_=t(187),A=t(3733),x=t(8216),v=t(4144),f=t(4565),d=t(3983),o=t(2065),h=t(9989),r=t(9872),i=t(829),c=t(8401),b=t(3557);class l{constructor(J){this.id=J.id,this.precondition=J.precondition,this._kbOpts=J.kbOpts,this._menuOpts=J.menuOpts,this._description=J.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let J=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let oe of J){let fe=oe.kbExpr;this.precondition&&(fe=fe?d.Ao.and(fe,this.precondition):this.precondition);let q={id:this.id,weight:oe.weight,args:oe.args,when:fe,primary:oe.primary,secondary:oe.secondary,win:oe.win,linux:oe.linux,mac:oe.mac};h.W.registerKeybindingRule(q)}}f.P.registerCommand({id:this.id,handler:(J,oe)=>this.runCommand(J,oe),description:this._description})}_registerMenuItem(J){v.BH.appendMenuItem(J.menuId,{group:J.group,command:{id:this.id,title:J.title,icon:J.icon,precondition:this.precondition},when:J.when,order:J.order})}}class a extends l{constructor(){super(...arguments),this._implementations=[]}addImplementation(J,oe,fe){return this._implementations.push({priority:J,name:oe,implementation:fe}),this._implementations.sort((q,p)=>p.priority-q.priority),{dispose:()=>{for(let q=0;q<this._implementations.length;q++)if(this._implementations[q].implementation===fe)return void this._implementations.splice(q,1)}}}runCommand(J,oe){let fe=J.get(b.VZ);fe.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let q of this._implementations){let p=q.implementation(J,oe);if(p)return fe.trace(`Command '${this.id}' was handled by '${q.name}'.`),typeof p=="boolean"?void 0:p}fe.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class w extends l{constructor(J,oe){super(oe),this.command=J}runCommand(J,oe){return this.command.runCommand(J,oe)}}class E extends l{static bindToContribution(J){return class extends E{constructor(oe){super(oe),this._callback=oe.handler}runEditorCommand(oe,fe,q){let p=J(fe);p&&this._callback(p,q)}}}static runEditorCommand(J,oe,fe,q){let p=J.get(I.$),re=p.getFocusedCodeEditor()||p.getActiveCodeEditor();if(re)return re.invokeWithinContext(ne=>{if(ne.get(d.i6).contextMatchesRules((0,c.f6)(fe)))return q(ne,re,oe)})}runCommand(J,oe){return E.runEditorCommand(J,oe,this.precondition,(fe,q,p)=>this.runEditorCommand(fe,q,p))}}class D extends E{static convertOptions(J){let oe;function fe(q){return q.menuId||(q.menuId=v.eH.EditorContext),q.title||(q.title=J.label),q.when=d.Ao.and(J.precondition,q.when),q}return oe=Array.isArray(J.menuOpts)?J.menuOpts:J.menuOpts?[J.menuOpts]:[],Array.isArray(J.contextMenuOpts)?oe.push(...J.contextMenuOpts.map(fe)):J.contextMenuOpts&&oe.push(fe(J.contextMenuOpts)),J.menuOpts=oe,J}constructor(J){super(D.convertOptions(J)),this.label=J.label,this.alias=J.alias}runEditorCommand(J,oe,fe){return this.reportTelemetry(J,oe),this.run(J,oe,fe||{})}reportTelemetry(J,oe){J.get(i.b).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class L extends D{constructor(){super(...arguments),this._implementations=[]}addImplementation(J,oe){return this._implementations.push([J,oe]),this._implementations.sort((fe,q)=>q[0]-fe[0]),{dispose:()=>{for(let fe=0;fe<this._implementations.length;fe++)if(this._implementations[fe][1]===oe)return void this._implementations.splice(fe,1)}}}run(J,oe,fe){for(let q of this._implementations){let p=q[1](J,oe,fe);if(p)return typeof p=="boolean"?void 0:p}}}class k extends v.Ke{run(J,...oe){let fe=J.get(I.$),q=fe.getFocusedCodeEditor()||fe.getActiveCodeEditor();if(q)return q.invokeWithinContext(p=>{if(p.get(d.i6).contextMatchesRules((0,c.f6)(this.desc.precondition)))return this.runEditorCommand(p,q,...oe)})}}function R(z,J){f.P.registerCommand(z,function(oe,...fe){let q=oe.get(o.TG),[p,re]=fe;(0,c.p_)(u.o.isUri(p)),(0,c.p_)(_.L.isIPosition(re));let ne=oe.get(A.q).getModel(p);if(ne){let ie=_.L.lift(re);return q.invokeFunction(J,ne,ie,...fe.slice(2))}return oe.get(x.S).createModelReference(p).then(ie=>new Promise((se,ce)=>{try{se(q.invokeFunction(J,ie.object.textEditorModel,_.L.lift(re),fe.slice(2)))}catch(be){ce(be)}}).finally(()=>{ie.dispose()}))})}function O(z){return W.INSTANCE.registerEditorCommand(z),z}function $(z){let J=new z;return W.INSTANCE.registerEditorAction(J),J}function N(z){return W.INSTANCE.registerEditorAction(z),z}function T(z){W.INSTANCE.registerEditorAction(z)}function C(z,J,oe){W.INSTANCE.registerEditorContribution(z,J,oe)}(function(z){z.getEditorCommand=function(J){return W.INSTANCE.getEditorCommand(J)},z.getEditorActions=function(){return W.INSTANCE.getEditorActions()},z.getEditorContributions=function(){return W.INSTANCE.getEditorContributions()},z.getSomeEditorContributions=function(J){return W.INSTANCE.getEditorContributions().filter(oe=>J.indexOf(oe.id)>=0)},z.getDiffEditorContributions=function(){return W.INSTANCE.getDiffEditorContributions()}})(m||(m={}));class W{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(J,oe,fe){this.editorContributions.push({id:J,ctor:oe,instantiation:fe})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(J){J.register(),this.editorActions.push(J)}getEditorActions(){return this.editorActions}registerEditorCommand(J){J.register(),this.editorCommands[J.id]=J}getEditorCommand(J){return this.editorCommands[J]||null}}function K(z){return z.register(),z}W.INSTANCE=new W,r.B.add("editor.contributions",W.INSTANCE);let j=K(new a({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"1_do",title:B.NC({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:v.eH.CommandPalette,group:"",title:B.NC("undo","Undo"),order:1}]}));K(new w(j,{id:"default:undo",precondition:void 0}));let F=K(new a({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"1_do",title:B.NC({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:v.eH.CommandPalette,group:"",title:B.NC("redo","Redo"),order:1}]}));K(new w(F,{id:"default:redo",precondition:void 0}));let H=K(new a({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:v.eH.MenubarSelectionMenu,group:"1_basic",title:B.NC({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:v.eH.CommandPalette,group:"",title:B.NC("selectAll","Select All"),order:1}]}))},6007:(ut,Ie,t)=>{"use strict";t.d(Ie,{Gl:()=>A,fo:()=>_,vu:()=>I});var m=t(2065),B=t(666),u=t(8401);let I=(0,m.yh)("IWorkspaceEditService");class _{constructor(f){this.metadata=f}static convert(f){return f.edits.map(d=>{if(A.is(d))return A.lift(d);if(x.is(d))return x.lift(d);throw new Error("Unsupported edit")})}}class A extends _{static is(f){return f instanceof A||(0,u.Kn)(f)&&B.o.isUri(f.resource)&&(0,u.Kn)(f.textEdit)}static lift(f){return f instanceof A?f:new A(f.resource,f.textEdit,f.versionId,f.metadata)}constructor(f,d,o=void 0,h){super(h),this.resource=f,this.textEdit=d,this.versionId=o}}class x extends _{static is(f){return f instanceof x||(0,u.Kn)(f)&&(!!f.newResource||!!f.oldResource)}static lift(f){return f instanceof x?f:new x(f.oldResource,f.newResource,f.options,f.metadata)}constructor(f,d,o={},h){super(h),this.oldResource=f,this.newResource=d,this.options=o}}},1640:(ut,Ie,t)=>{"use strict";t.d(Ie,{$:()=>m});let m=(0,t(2065).yh)("codeEditorService")},2573:(ut,Ie,t)=>{"use strict";t.d(Ie,{Q8:()=>Ri,eu:()=>ft});var m=t(5393),B=t(5976),u=t(7301),I=t(4669),_=t(6248),A=t(1432),x=t(7295);let v=!1;function f(Wt){A.$L&&(v||(v=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(Wt.message))}class d{constructor(Te,Ze,rt,yt){this.vsWorker=Te,this.req=Ze,this.method=rt,this.args=yt,this.type=0}}class o{constructor(Te,Ze,rt,yt){this.vsWorker=Te,this.seq=Ze,this.res=rt,this.err=yt,this.type=1}}class h{constructor(Te,Ze,rt,yt){this.vsWorker=Te,this.req=Ze,this.eventName=rt,this.arg=yt,this.type=2}}class r{constructor(Te,Ze,rt){this.vsWorker=Te,this.req=Ze,this.event=rt,this.type=3}}class i{constructor(Te,Ze){this.vsWorker=Te,this.req=Ze,this.type=4}}class c{constructor(Te){this._workerId=-1,this._handler=Te,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(Te){this._workerId=Te}sendMessage(Te,Ze){let rt=String(++this._lastSentReq);return new Promise((yt,Nt)=>{this._pendingReplies[rt]={resolve:yt,reject:Nt},this._send(new d(this._workerId,rt,Te,Ze))})}listen(Te,Ze){let rt=null,yt=new I.Q5({onWillAddFirstListener:()=>{rt=String(++this._lastSentReq),this._pendingEmitters.set(rt,yt),this._send(new h(this._workerId,rt,Te,Ze))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(rt),this._send(new i(this._workerId,rt)),rt=null}});return yt.event}handleMessage(Te){Te&&Te.vsWorker&&(this._workerId!==-1&&Te.vsWorker!==this._workerId||this._handleMessage(Te))}_handleMessage(Te){switch(Te.type){case 1:return this._handleReplyMessage(Te);case 0:return this._handleRequestMessage(Te);case 2:return this._handleSubscribeEventMessage(Te);case 3:return this._handleEventMessage(Te);case 4:return this._handleUnsubscribeEventMessage(Te)}}_handleReplyMessage(Te){if(!this._pendingReplies[Te.seq])return void console.warn("Got reply to unknown seq");let Ze=this._pendingReplies[Te.seq];if(delete this._pendingReplies[Te.seq],Te.err){let rt=Te.err;return Te.err.$isError&&(rt=new Error,rt.name=Te.err.name,rt.message=Te.err.message,rt.stack=Te.err.stack),void Ze.reject(rt)}Ze.resolve(Te.res)}_handleRequestMessage(Te){let Ze=Te.req;this._handler.handleMessage(Te.method,Te.args).then(rt=>{this._send(new o(this._workerId,Ze,rt,void 0))},rt=>{rt.detail instanceof Error&&(rt.detail=(0,u.ri)(rt.detail)),this._send(new o(this._workerId,Ze,void 0,(0,u.ri)(rt)))})}_handleSubscribeEventMessage(Te){let Ze=Te.req,rt=this._handler.handleEvent(Te.eventName,Te.arg)(yt=>{this._send(new r(this._workerId,Ze,yt))});this._pendingEvents.set(Ze,rt)}_handleEventMessage(Te){this._pendingEmitters.has(Te.req)?this._pendingEmitters.get(Te.req).fire(Te.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(Te){this._pendingEvents.has(Te.req)?(this._pendingEvents.get(Te.req).dispose(),this._pendingEvents.delete(Te.req)):console.warn("Got unsubscribe for unknown req")}_send(Te){let Ze=[];if(Te.type===0)for(let rt=0;rt<Te.args.length;rt++)Te.args[rt]instanceof ArrayBuffer&&Ze.push(Te.args[rt]);else Te.type===1&&Te.res instanceof ArrayBuffer&&Ze.push(Te.res);this._handler.sendMessage(Te,Ze)}}class b extends B.JT{constructor(Te,Ze,rt){super();let yt=null;this._worker=this._register(Te.create("vs/base/common/worker/simpleWorker",Pe=>{this._protocol.handleMessage(Pe)},Pe=>{yt==null||yt(Pe)})),this._protocol=new c({sendMessage:(Pe,Xe)=>{this._worker.postMessage(Pe,Xe)},handleMessage:(Pe,Xe)=>{if(typeof rt[Pe]!="function")return Promise.reject(new Error("Missing method "+Pe+" on main thread host."));try{return Promise.resolve(rt[Pe].apply(rt,Xe))}catch($e){return Promise.reject($e)}},handleEvent:(Pe,Xe)=>{if(a(Pe)){let $e=rt[Pe].call(rt,Xe);if(typeof $e!="function")throw new Error(`Missing dynamic event ${Pe} on main thread host.`);return $e}if(l(Pe)){let $e=rt[Pe];if(typeof $e!="function")throw new Error(`Missing event ${Pe} on main thread host.`);return $e}throw new Error(`Malformed event name ${Pe}`)}}),this._protocol.setWorkerId(this._worker.getId());let Nt=null,dt=globalThis.require;dt!==void 0&&typeof dt.getConfig=="function"?Nt=dt.getConfig():globalThis.requirejs!==void 0&&(Nt=globalThis.requirejs.s.contexts._.config);let Re=(0,_.$E)(rt);this._onModuleLoaded=this._protocol.sendMessage("$initialize",[this._worker.getId(),JSON.parse(JSON.stringify(Nt)),Ze,Re]);let qe=(Pe,Xe)=>this._request(Pe,Xe),Ue=(Pe,Xe)=>this._protocol.listen(Pe,Xe);this._lazyProxy=new Promise((Pe,Xe)=>{yt=Xe,this._onModuleLoaded.then($e=>{Pe(function(ot,Tt,Ot){let ti=Gt=>function(){let $t=Array.prototype.slice.call(arguments,0);return Tt(Gt,$t)},zt=Gt=>function($t){return Ot(Gt,$t)},Jt={};for(let Gt of ot)a(Gt)?Jt[Gt]=zt(Gt):l(Gt)?Jt[Gt]=Ot(Gt,void 0):Jt[Gt]=ti(Gt);return Jt}($e,qe,Ue))},$e=>{Xe($e),this._onError("Worker failed to load "+Ze,$e)})})}getProxyObject(){return this._lazyProxy}_request(Te,Ze){return new Promise((rt,yt)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(Te,Ze).then(rt,yt)},yt)})}_onError(Te,Ze){console.error(Te),console.info(Ze)}}function l(Wt){return Wt[0]==="o"&&Wt[1]==="n"&&x.df(Wt.charCodeAt(2))}function a(Wt){return/^onDynamic/.test(Wt)&&x.df(Wt.charCodeAt(9))}var w;let E=(w=window.trustedTypes)===null||w===void 0?void 0:w.createPolicy("defaultWorkerFactory",{createScriptURL:Wt=>Wt});class D{constructor(Te,Ze,rt,yt,Nt){this.id=Ze;let dt=function(Re){let qe=globalThis.MonacoEnvironment;if(qe){if(typeof qe.getWorker=="function")return qe.getWorker("workerMain.js",Re);if(typeof qe.getWorkerUrl=="function"){let Ue=qe.getWorkerUrl("workerMain.js",Re);return new Worker(E?E.createScriptURL(Ue):Ue,{name:Re})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}(rt);typeof dt.then=="function"?this.worker=dt:this.worker=Promise.resolve(dt),this.postMessage(Te,[]),this.worker.then(Re=>{Re.onmessage=function(qe){yt(qe.data)},Re.onmessageerror=Nt,typeof Re.addEventListener=="function"&&Re.addEventListener("error",Nt)})}getId(){return this.id}postMessage(Te,Ze){var rt;(rt=this.worker)===null||rt===void 0||rt.then(yt=>yt.postMessage(Te,Ze))}dispose(){var Te;(Te=this.worker)===null||Te===void 0||Te.then(Ze=>Ze.terminate()),this.worker=null}}class L{constructor(Te){this._label=Te,this._webWorkerFailedBeforeError=!1}create(Te,Ze,rt){let yt=++L.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new D(Te,yt,this._label||"anonymous"+yt,Ze,Nt=>{f(Nt),this._webWorkerFailedBeforeError=Nt,rt(Nt)})}}L.LAST_WORKER_ID=0;var k=t(4314),R=t(1381),O=t(2484),$=t(666),N=t(187),T=t(310);class C{constructor(Te,Ze,rt,yt){this._uri=Te,this._lines=Ze,this._eol=rt,this._versionId=yt,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(Te){Te.eol&&Te.eol!==this._eol&&(this._eol=Te.eol,this._lineStarts=null);let Ze=Te.changes;for(let rt of Ze)this._acceptDeleteRange(rt.range),this._acceptInsertText(new N.L(rt.range.startLineNumber,rt.range.startColumn),rt.text);this._versionId=Te.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){let Te=this._eol.length,Ze=this._lines.length,rt=new Uint32Array(Ze);for(let yt=0;yt<Ze;yt++)rt[yt]=this._lines[yt].length+Te;this._lineStarts=new T.oQ(rt)}}_setLineText(Te,Ze){this._lines[Te]=Ze,this._lineStarts&&this._lineStarts.setValue(Te,this._lines[Te].length+this._eol.length)}_acceptDeleteRange(Te){if(Te.startLineNumber!==Te.endLineNumber)this._setLineText(Te.startLineNumber-1,this._lines[Te.startLineNumber-1].substring(0,Te.startColumn-1)+this._lines[Te.endLineNumber-1].substring(Te.endColumn-1)),this._lines.splice(Te.startLineNumber,Te.endLineNumber-Te.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(Te.startLineNumber,Te.endLineNumber-Te.startLineNumber);else{if(Te.startColumn===Te.endColumn)return;this._setLineText(Te.startLineNumber-1,this._lines[Te.startLineNumber-1].substring(0,Te.startColumn-1)+this._lines[Te.startLineNumber-1].substring(Te.endColumn-1))}}_acceptInsertText(Te,Ze){if(Ze.length===0)return;let rt=(0,x.uq)(Ze);if(rt.length===1)return void this._setLineText(Te.lineNumber-1,this._lines[Te.lineNumber-1].substring(0,Te.column-1)+rt[0]+this._lines[Te.lineNumber-1].substring(Te.column-1));rt[rt.length-1]+=this._lines[Te.lineNumber-1].substring(Te.column-1),this._setLineText(Te.lineNumber-1,this._lines[Te.lineNumber-1].substring(0,Te.column-1)+rt[0]);let yt=new Uint32Array(rt.length-1);for(let Nt=1;Nt<rt.length;Nt++)this._lines.splice(Te.lineNumber+Nt-1,0,rt[Nt]),yt[Nt-1]=rt[Nt].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(Te.lineNumber,yt)}}var W=t(270),K=t(4906);class j{constructor(Te,Ze,rt){let yt=new Uint8Array(Te*Ze);for(let Nt=0,dt=Te*Ze;Nt<dt;Nt++)yt[Nt]=rt;this._data=yt,this.rows=Te,this.cols=Ze}get(Te,Ze){return this._data[Te*this.cols+Ze]}set(Te,Ze,rt){this._data[Te*this.cols+Ze]=rt}}class F{constructor(Te){let Ze=0,rt=0;for(let Nt=0,dt=Te.length;Nt<dt;Nt++){let[Re,qe,Ue]=Te[Nt];qe>Ze&&(Ze=qe),Re>rt&&(rt=Re),Ue>rt&&(rt=Ue)}Ze++,rt++;let yt=new j(rt,Ze,0);for(let Nt=0,dt=Te.length;Nt<dt;Nt++){let[Re,qe,Ue]=Te[Nt];yt.set(Re,qe,Ue)}this._states=yt,this._maxCharCode=Ze}nextState(Te,Ze){return Ze<0||Ze>=this._maxCharCode?0:this._states.get(Te,Ze)}}let H=null,z=null;class J{static _createLink(Te,Ze,rt,yt,Nt){let dt=Nt-1;do{let Re=Ze.charCodeAt(dt);if(Te.get(Re)!==2)break;dt--}while(dt>yt);if(yt>0){let Re=Ze.charCodeAt(yt-1),qe=Ze.charCodeAt(dt);(Re===40&&qe===41||Re===91&&qe===93||Re===123&&qe===125)&&dt--}return{range:{startLineNumber:rt,startColumn:yt+1,endLineNumber:rt,endColumn:dt+2},url:Ze.substring(yt,dt+1)}}static computeLinks(Te,Ze=function(){return H===null&&(H=new F([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),H}()){let rt=function(){if(z===null){z=new K.N(0);let Nt=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let Re=0;Re<Nt.length;Re++)z.set(Nt.charCodeAt(Re),1);let dt=".,;:";for(let Re=0;Re<dt.length;Re++)z.set(dt.charCodeAt(Re),2)}return z}(),yt=[];for(let Nt=1,dt=Te.getLineCount();Nt<=dt;Nt++){let Re=Te.getLineContent(Nt),qe=Re.length,Ue=0,Pe=0,Xe=0,$e=1,ot=!1,Tt=!1,Ot=!1,ti=!1;for(;Ue<qe;){let zt=!1,Jt=Re.charCodeAt(Ue);if($e===13){let Gt;switch(Jt){case 40:ot=!0,Gt=0;break;case 41:Gt=ot?0:1;break;case 91:Ot=!0,Tt=!0,Gt=0;break;case 93:Ot=!1,Gt=Tt?0:1;break;case 123:ti=!0,Gt=0;break;case 125:Gt=ti?0:1;break;case 39:case 34:case 96:Gt=Xe===Jt?1:Xe===39||Xe===34||Xe===96?0:1;break;case 42:Gt=Xe===42?1:0;break;case 124:Gt=Xe===124?1:0;break;case 32:Gt=Ot?0:1;break;default:Gt=rt.get(Jt)}Gt===1&&(yt.push(J._createLink(rt,Re,Nt,Pe,Ue)),zt=!0)}else if($e===12){let Gt;Jt===91?(Tt=!0,Gt=0):Gt=rt.get(Jt),Gt===1?zt=!0:$e=13}else $e=Ze.nextState($e,Jt),$e===0&&(zt=!0);zt&&($e=1,ot=!1,Tt=!1,ti=!1,Pe=Ue+1,Xe=Jt),Ue++}$e===13&&yt.push(J._createLink(rt,Re,Nt,Pe,qe))}return yt}}class oe{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(Te,Ze,rt,yt,Nt){if(Te&&Ze){let dt=this.doNavigateValueSet(Ze,Nt);if(dt)return{range:Te,value:dt}}if(rt&&yt){let dt=this.doNavigateValueSet(yt,Nt);if(dt)return{range:rt,value:dt}}return null}doNavigateValueSet(Te,Ze){let rt=this.numberReplace(Te,Ze);return rt!==null?rt:this.textReplace(Te,Ze)}numberReplace(Te,Ze){let rt=Math.pow(10,Te.length-(Te.lastIndexOf(".")+1)),yt=Number(Te),Nt=parseFloat(Te);return isNaN(yt)||isNaN(Nt)||yt!==Nt?null:yt!==0||Ze?(yt=Math.floor(yt*rt),yt+=Ze?rt:-rt,String(yt/rt)):null}textReplace(Te,Ze){return this.valueSetsReplace(this._defaultValueSet,Te,Ze)}valueSetsReplace(Te,Ze,rt){let yt=null;for(let Nt=0,dt=Te.length;yt===null&&Nt<dt;Nt++)yt=this.valueSetReplace(Te[Nt],Ze,rt);return yt}valueSetReplace(Te,Ze,rt){let yt=Te.indexOf(Ze);return yt>=0?(yt+=rt?1:-1,yt<0?yt=Te.length-1:yt%=Te.length,Te[yt]):null}}oe.INSTANCE=new oe;var fe=t(927),q=t(4013),p=t(1446),re=t(652),ne=t(5146),ie=t(5463);function se(Wt,Te,Ze,rt){return new O.Hs(Wt,Te,Ze).ComputeDiff(rt)}class ce{constructor(Te){let Ze=[],rt=[];for(let yt=0,Nt=Te.length;yt<Nt;yt++)Ze[yt]=ve(Te[yt],1),rt[yt]=X(Te[yt],1);this.lines=Te,this._startColumns=Ze,this._endColumns=rt}getElements(){let Te=[];for(let Ze=0,rt=this.lines.length;Ze<rt;Ze++)Te[Ze]=this.lines[Ze].substring(this._startColumns[Ze]-1,this._endColumns[Ze]-1);return Te}getStrictElement(Te){return this.lines[Te]}getStartLineNumber(Te){return Te+1}getEndLineNumber(Te){return Te+1}createCharSequence(Te,Ze,rt){let yt=[],Nt=[],dt=[],Re=0;for(let qe=Ze;qe<=rt;qe++){let Ue=this.lines[qe],Pe=Te?this._startColumns[qe]:1,Xe=Te?this._endColumns[qe]:Ue.length+1;for(let $e=Pe;$e<Xe;$e++)yt[Re]=Ue.charCodeAt($e-1),Nt[Re]=qe+1,dt[Re]=$e,Re++;!Te&&qe<rt&&(yt[Re]=10,Nt[Re]=qe+1,dt[Re]=Ue.length+1,Re++)}return new be(yt,Nt,dt)}}class be{constructor(Te,Ze,rt){this._charCodes=Te,this._lineNumbers=Ze,this._columns=rt}toString(){return"["+this._charCodes.map((Te,Ze)=>(Te===10?"\\n":String.fromCharCode(Te))+`-(${this._lineNumbers[Ze]},${this._columns[Ze]})`).join(", ")+"]"}_assertIndex(Te,Ze){if(Te<0||Te>=Ze.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(Te){return Te>0&&Te===this._lineNumbers.length?this.getEndLineNumber(Te-1):(this._assertIndex(Te,this._lineNumbers),this._lineNumbers[Te])}getEndLineNumber(Te){return Te===-1?this.getStartLineNumber(Te+1):(this._assertIndex(Te,this._lineNumbers),this._charCodes[Te]===10?this._lineNumbers[Te]+1:this._lineNumbers[Te])}getStartColumn(Te){return Te>0&&Te===this._columns.length?this.getEndColumn(Te-1):(this._assertIndex(Te,this._columns),this._columns[Te])}getEndColumn(Te){return Te===-1?this.getStartColumn(Te+1):(this._assertIndex(Te,this._columns),this._charCodes[Te]===10?1:this._columns[Te]+1)}}class de{constructor(Te,Ze,rt,yt,Nt,dt,Re,qe){this.originalStartLineNumber=Te,this.originalStartColumn=Ze,this.originalEndLineNumber=rt,this.originalEndColumn=yt,this.modifiedStartLineNumber=Nt,this.modifiedStartColumn=dt,this.modifiedEndLineNumber=Re,this.modifiedEndColumn=qe}static createFromDiffChange(Te,Ze,rt){let yt=Ze.getStartLineNumber(Te.originalStart),Nt=Ze.getStartColumn(Te.originalStart),dt=Ze.getEndLineNumber(Te.originalStart+Te.originalLength-1),Re=Ze.getEndColumn(Te.originalStart+Te.originalLength-1),qe=rt.getStartLineNumber(Te.modifiedStart),Ue=rt.getStartColumn(Te.modifiedStart),Pe=rt.getEndLineNumber(Te.modifiedStart+Te.modifiedLength-1),Xe=rt.getEndColumn(Te.modifiedStart+Te.modifiedLength-1);return new de(yt,Nt,dt,Re,qe,Ue,Pe,Xe)}}class U{constructor(Te,Ze,rt,yt,Nt){this.originalStartLineNumber=Te,this.originalEndLineNumber=Ze,this.modifiedStartLineNumber=rt,this.modifiedEndLineNumber=yt,this.charChanges=Nt}static createFromDiffResult(Te,Ze,rt,yt,Nt,dt,Re){let qe,Ue,Pe,Xe,$e;if(Ze.originalLength===0?(qe=rt.getStartLineNumber(Ze.originalStart)-1,Ue=0):(qe=rt.getStartLineNumber(Ze.originalStart),Ue=rt.getEndLineNumber(Ze.originalStart+Ze.originalLength-1)),Ze.modifiedLength===0?(Pe=yt.getStartLineNumber(Ze.modifiedStart)-1,Xe=0):(Pe=yt.getStartLineNumber(Ze.modifiedStart),Xe=yt.getEndLineNumber(Ze.modifiedStart+Ze.modifiedLength-1)),dt&&Ze.originalLength>0&&Ze.originalLength<20&&Ze.modifiedLength>0&&Ze.modifiedLength<20&&Nt()){let ot=rt.createCharSequence(Te,Ze.originalStart,Ze.originalStart+Ze.originalLength-1),Tt=yt.createCharSequence(Te,Ze.modifiedStart,Ze.modifiedStart+Ze.modifiedLength-1);if(ot.getElements().length>0&&Tt.getElements().length>0){let Ot=se(ot,Tt,Nt,!0).changes;Re&&(Ot=function(ti){if(ti.length<=1)return ti;let zt=[ti[0]],Jt=zt[0];for(let Gt=1,$t=ti.length;Gt<$t;Gt++){let si=ti[Gt],ai=si.originalStart-(Jt.originalStart+Jt.originalLength),_i=si.modifiedStart-(Jt.modifiedStart+Jt.modifiedLength);Math.min(ai,_i)<3?(Jt.originalLength=si.originalStart+si.originalLength-Jt.originalStart,Jt.modifiedLength=si.modifiedStart+si.modifiedLength-Jt.modifiedStart):(zt.push(si),Jt=si)}return zt}(Ot)),$e=[];for(let ti=0,zt=Ot.length;ti<zt;ti++)$e.push(de.createFromDiffChange(Ot[ti],ot,Tt))}}return new U(qe,Ue,Pe,Xe,$e)}}class ue{constructor(Te,Ze,rt){this.shouldComputeCharChanges=rt.shouldComputeCharChanges,this.shouldPostProcessCharChanges=rt.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=rt.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=rt.shouldMakePrettyDiff,this.originalLines=Te,this.modifiedLines=Ze,this.original=new ce(Te),this.modified=new ce(Ze),this.continueLineDiff=ye(rt.maxComputationTime),this.continueCharDiff=ye(rt.maxComputationTime===0?0:Math.min(rt.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};let Te=se(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),Ze=Te.changes,rt=Te.quitEarly;if(this.shouldIgnoreTrimWhitespace){let Re=[];for(let qe=0,Ue=Ze.length;qe<Ue;qe++)Re.push(U.createFromDiffResult(this.shouldIgnoreTrimWhitespace,Ze[qe],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:rt,changes:Re}}let yt=[],Nt=0,dt=0;for(let Re=-1,qe=Ze.length;Re<qe;Re++){let Ue=Re+1<qe?Ze[Re+1]:null,Pe=Ue?Ue.originalStart:this.originalLines.length,Xe=Ue?Ue.modifiedStart:this.modifiedLines.length;for(;Nt<Pe&&dt<Xe;){let $e=this.originalLines[Nt],ot=this.modifiedLines[dt];if($e!==ot){{let Tt=ve($e,1),Ot=ve(ot,1);for(;Tt>1&&Ot>1&&$e.charCodeAt(Tt-2)===ot.charCodeAt(Ot-2);)Tt--,Ot--;(Tt>1||Ot>1)&&this._pushTrimWhitespaceCharChange(yt,Nt+1,1,Tt,dt+1,1,Ot)}{let Tt=X($e,1),Ot=X(ot,1),ti=$e.length+1,zt=ot.length+1;for(;Tt<ti&&Ot<zt&&$e.charCodeAt(Tt-1)===$e.charCodeAt(Ot-1);)Tt++,Ot++;(Tt<ti||Ot<zt)&&this._pushTrimWhitespaceCharChange(yt,Nt+1,Tt,ti,dt+1,Ot,zt)}}Nt++,dt++}Ue&&(yt.push(U.createFromDiffResult(this.shouldIgnoreTrimWhitespace,Ue,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),Nt+=Ue.originalLength,dt+=Ue.modifiedLength)}return{quitEarly:rt,changes:yt}}_pushTrimWhitespaceCharChange(Te,Ze,rt,yt,Nt,dt,Re){if(this._mergeTrimWhitespaceCharChange(Te,Ze,rt,yt,Nt,dt,Re))return;let qe;this.shouldComputeCharChanges&&(qe=[new de(Ze,rt,Ze,yt,Nt,dt,Nt,Re)]),Te.push(new U(Ze,Ze,Nt,Nt,qe))}_mergeTrimWhitespaceCharChange(Te,Ze,rt,yt,Nt,dt,Re){let qe=Te.length;if(qe===0)return!1;let Ue=Te[qe-1];return Ue.originalEndLineNumber!==0&&Ue.modifiedEndLineNumber!==0&&(Ue.originalEndLineNumber===Ze&&Ue.modifiedEndLineNumber===Nt?(this.shouldComputeCharChanges&&Ue.charChanges&&Ue.charChanges.push(new de(Ze,rt,Ze,yt,Nt,dt,Nt,Re)),!0):Ue.originalEndLineNumber+1===Ze&&Ue.modifiedEndLineNumber+1===Nt&&(Ue.originalEndLineNumber=Ze,Ue.modifiedEndLineNumber=Nt,this.shouldComputeCharChanges&&Ue.charChanges&&Ue.charChanges.push(new de(Ze,rt,Ze,yt,Nt,dt,Nt,Re)),!0))}}function ve(Wt,Te){let Ze=x.LC(Wt);return Ze===-1?Te:Ze+1}function X(Wt,Te){let Ze=x.ow(Wt);return Ze===-1?Te:Ze+2}function ye(Wt){if(Wt===0)return()=>!0;let Te=Date.now();return()=>Date.now()-Te<Wt}var Ce=t(9247);class Ee{static trivial(Te,Ze){return new Ee([new Ae(new Ce.q(0,Te.length),new Ce.q(0,Ze.length))],!1)}static trivialTimedOut(Te,Ze){return new Ee([new Ae(new Ce.q(0,Te.length),new Ce.q(0,Ze.length))],!0)}constructor(Te,Ze){this.diffs=Te,this.hitTimeout=Ze}}class Ae{constructor(Te,Ze){this.seq1Range=Te,this.seq2Range=Ze}reverse(){return new Ae(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(Te){return new Ae(this.seq1Range.join(Te.seq1Range),this.seq2Range.join(Te.seq2Range))}}class Fe{isValid(){return!0}}Fe.instance=new Fe;class _e{constructor(Te){if(this.timeout=Te,this.startTime=Date.now(),this.valid=!0,Te<=0)throw new u.he("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}}class te{constructor(Te,Ze){this.width=Te,this.height=Ze,this.array=[],this.array=new Array(Te*Ze)}get(Te,Ze){return this.array[Te+Ze*this.width]}set(Te,Ze,rt){this.array[Te+Ze*this.width]=rt}}class Le{compute(Te,Ze,rt=Fe.instance,yt){if(Te.length===0||Ze.length===0)return Ee.trivial(Te,Ze);let Nt=new te(Te.length,Ze.length),dt=new te(Te.length,Ze.length),Re=new te(Te.length,Ze.length);for(let Tt=0;Tt<Te.length;Tt++)for(let Ot=0;Ot<Ze.length;Ot++){if(!rt.isValid())return Ee.trivialTimedOut(Te,Ze);let ti=Tt===0?0:Nt.get(Tt-1,Ot),zt=Ot===0?0:Nt.get(Tt,Ot-1),Jt;Te.getElement(Tt)===Ze.getElement(Ot)?(Jt=Tt===0||Ot===0?0:Nt.get(Tt-1,Ot-1),Tt>0&&Ot>0&&dt.get(Tt-1,Ot-1)===3&&(Jt+=Re.get(Tt-1,Ot-1)),Jt+=yt?yt(Tt,Ot):1):Jt=-1;let Gt=Math.max(ti,zt,Jt);if(Gt===Jt){let $t=Tt>0&&Ot>0?Re.get(Tt-1,Ot-1):0;Re.set(Tt,Ot,$t+1),dt.set(Tt,Ot,3)}else Gt===ti?(Re.set(Tt,Ot,0),dt.set(Tt,Ot,1)):Gt===zt&&(Re.set(Tt,Ot,0),dt.set(Tt,Ot,2));Nt.set(Tt,Ot,Gt)}let qe=[],Ue=Te.length,Pe=Ze.length;function Xe(Tt,Ot){Tt+1===Ue&&Ot+1===Pe||qe.push(new Ae(new Ce.q(Tt+1,Ue),new Ce.q(Ot+1,Pe))),Ue=Tt,Pe=Ot}let $e=Te.length-1,ot=Ze.length-1;for(;$e>=0&&ot>=0;)dt.get($e,ot)===3?(Xe($e,ot),$e--,ot--):dt.get($e,ot)===1?$e--:ot--;return Xe(-1,-1),qe.reverse(),new Ee(qe,!1)}}function ke(Wt,Te,Ze){let rt=Ze;return rt=function(yt,Nt,dt){let Re=[];dt.length>0&&Re.push(dt[0]);for(let qe=1;qe<dt.length;qe++){let Ue=Re[Re.length-1],Pe=dt[qe];if(Pe.seq1Range.isEmpty){let Xe=!0,$e=Pe.seq1Range.start-Ue.seq1Range.endExclusive;for(let ot=1;ot<=$e;ot++)if(Nt.getElement(Pe.seq2Range.start-ot)!==Nt.getElement(Pe.seq2Range.endExclusive-ot)){Xe=!1;break}if(Xe){Re[Re.length-1]=new Ae(Ue.seq1Range,new Ce.q(Ue.seq2Range.start,Pe.seq2Range.endExclusive-$e));continue}}Re.push(Pe)}return Re}(0,Te,rt),rt=function(yt,Nt,dt){if(!yt.getBoundaryScore||!Nt.getBoundaryScore)return dt;for(let Re=0;Re<dt.length;Re++){let qe=dt[Re];if(qe.seq1Range.isEmpty){let Ue=Re>0?dt[Re-1].seq2Range.endExclusive:-1,Pe=Re+1<dt.length?dt[Re+1].seq2Range.start:Nt.length;dt[Re]=le(qe,yt,Nt,Pe,Ue)}else if(qe.seq2Range.isEmpty){let Ue=Re>0?dt[Re-1].seq1Range.endExclusive:-1,Pe=Re+1<dt.length?dt[Re+1].seq1Range.start:yt.length;dt[Re]=le(qe.reverse(),Nt,yt,Pe,Ue).reverse()}}return dt}(Wt,Te,rt),rt}function le(Wt,Te,Ze,rt,yt){let Nt=1;for(;Wt.seq2Range.start-Nt>yt&&Ze.getElement(Wt.seq2Range.start-Nt)===Ze.getElement(Wt.seq2Range.endExclusive-Nt)&&Nt<20;)Nt++;Nt--;let dt=0;for(;Wt.seq2Range.start+dt<rt&&Ze.getElement(Wt.seq2Range.start+dt)===Ze.getElement(Wt.seq2Range.endExclusive+dt)&&dt<20;)dt++;if(Nt===0&&dt===0)return Wt;let Re=0,qe=-1;for(let Ue=-Nt;Ue<=dt;Ue++){let Pe=Wt.seq2Range.start+Ue,Xe=Wt.seq2Range.endExclusive+Ue,$e=Wt.seq1Range.start+Ue,ot=Te.getBoundaryScore($e)+Ze.getBoundaryScore(Pe)+Ze.getBoundaryScore(Xe);ot>qe&&(qe=ot,Re=Ue)}return Re!==0?new Ae(Wt.seq1Range.delta(Re),Wt.seq2Range.delta(Re)):Wt}class ee{compute(Te,Ze,rt=Fe.instance){if(Te.length===0||Ze.length===0)return Ee.trivial(Te,Ze);function yt(ot,Tt){for(;ot<Te.length&&Tt<Ze.length&&Te.getElement(ot)===Ze.getElement(Tt);)ot++,Tt++;return ot}let Nt=0,dt=new xe;dt.set(0,yt(0,0));let Re=new We;Re.set(0,dt.get(0)===0?null:new me(null,0,0,dt.get(0)));let qe=0;e:for(;;)for(Nt++,qe=-Nt;qe<=Nt;qe+=2){if(!rt.isValid())return Ee.trivialTimedOut(Te,Ze);let ot=qe===Nt?-1:dt.get(qe+1),Tt=qe===-Nt?-1:dt.get(qe-1)+1,Ot=Math.min(Math.max(ot,Tt),Te.length),ti=Ot-qe,zt=yt(Ot,ti);dt.set(qe,zt);let Jt=Ot===ot?Re.get(qe+1):Re.get(qe-1);if(Re.set(qe,zt!==Ot?new me(Jt,Ot,ti,zt-Ot):Jt),dt.get(qe)===Te.length&&dt.get(qe)-qe===Ze.length)break e}let Ue=Re.get(qe),Pe=[],Xe=Te.length,$e=Ze.length;for(;;){let ot=Ue?Ue.x+Ue.length:0,Tt=Ue?Ue.y+Ue.length:0;if(ot===Xe&&Tt===$e||Pe.push(new Ae(new Ce.q(ot,Xe),new Ce.q(Tt,$e))),!Ue)break;Xe=Ue.x,$e=Ue.y,Ue=Ue.prev}return Pe.reverse(),new Ee(Pe,!1)}}class me{constructor(Te,Ze,rt,yt){this.prev=Te,this.x=Ze,this.y=rt,this.length=yt}}class xe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(Te){return Te<0?(Te=-Te-1,this.negativeArr[Te]):this.positiveArr[Te]}set(Te,Ze){if(Te<0){if((Te=-Te-1)>=this.negativeArr.length){let rt=this.negativeArr;this.negativeArr=new Int32Array(2*rt.length),this.negativeArr.set(rt)}this.negativeArr[Te]=Ze}else{if(Te>=this.positiveArr.length){let rt=this.positiveArr;this.positiveArr=new Int32Array(2*rt.length),this.positiveArr.set(rt)}this.positiveArr[Te]=Ze}}}class We{constructor(){this.positiveArr=[],this.negativeArr=[]}get(Te){return Te<0?(Te=-Te-1,this.negativeArr[Te]):this.positiveArr[Te]}set(Te,Ze){Te<0?(Te=-Te-1,this.negativeArr[Te]=Ze):this.positiveArr[Te]=Ze}}class Ve{constructor(Te,Ze){this.trimmedHash=Te,this.lines=Ze}getElement(Te){return this.trimmedHash[Te]}get length(){return this.trimmedHash.length}getBoundaryScore(Te){return 1e3-((Te===0?0:Ye(this.lines[Te-1]))+(Te===this.lines.length?0:Ye(this.lines[Te])))}}function Ye(Wt){let Te=0;for(;Te<Wt.length&&(Wt.charCodeAt(Te)===32||Wt.charCodeAt(Te)===9);)Te++;return Te}class tt{constructor(Te,Ze,rt){this.lines=Te,this.considerWhitespaceChanges=rt,this.elements=[],this.firstCharOffsetByLineMinusOne=[],this.offsetByLine=[];let yt=!1;Ze.start>0&&Ze.endExclusive>=Te.length&&(Ze=new Ce.q(Ze.start-1,Ze.endExclusive),yt=!0),this.lineRange=Ze;for(let Nt=this.lineRange.start;Nt<this.lineRange.endExclusive;Nt++){let dt=Te[Nt],Re=0;if(yt)Re=dt.length,dt="",yt=!1;else if(!rt){let qe=dt.trimStart();Re=dt.length-qe.length,dt=qe.trimEnd()}this.offsetByLine.push(Re);for(let qe=0;qe<dt.length;qe++)this.elements.push(dt.charCodeAt(qe));Nt<Te.length-1&&(this.elements.push(`
`.charCodeAt(0)),this.firstCharOffsetByLineMinusOne[Nt-this.lineRange.start]=this.elements.length)}this.offsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return[...this.elements].map(Te=>String.fromCharCode(Te)).join("")}getElement(Te){return this.elements[Te]}get length(){return this.elements.length}getBoundaryScore(Te){let Ze=xt(Te>0?this.elements[Te-1]:-1),rt=xt(Te<this.elements.length?this.elements[Te]:-1);if(Ze===6&&rt===7)return 0;let yt=0;return Ze!==rt&&(yt+=10,rt===1&&(yt+=1)),yt+=ht(Ze),yt+=ht(rt),yt}translateOffset(Te){if(this.lineRange.isEmpty)return new N.L(this.lineRange.start+1,1);let Ze=0,rt=this.firstCharOffsetByLineMinusOne.length;for(;Ze<rt;){let Nt=Math.floor((Ze+rt)/2);this.firstCharOffsetByLineMinusOne[Nt]>Te?rt=Nt:Ze=Nt+1}let yt=Ze===0?0:this.firstCharOffsetByLineMinusOne[Ze-1];return new N.L(this.lineRange.start+Ze+1,Te-yt+1+this.offsetByLine[Ze])}translateRange(Te){return k.e.fromPositions(this.translateOffset(Te.start),this.translateOffset(Te.endExclusive))}findWordContaining(Te){if(Te<0||Te>=this.elements.length||!Qe(this.elements[Te]))return;let Ze=Te;for(;Ze>0&&Qe(this.elements[Ze-1]);)Ze--;let rt=Te;for(;rt<this.elements.length&&Qe(this.elements[rt]);)rt++;return new Ce.q(Ze,rt)}}function Qe(Wt){return Wt>=97&&Wt<=122||Wt>=65&&Wt<=90||Wt>=48&&Wt<=57}let bt={0:0,1:0,2:0,3:10,4:2,5:3,6:10,7:10};function ht(Wt){return bt[Wt]}function xt(Wt){return Wt===10?7:Wt===13?6:function(Te){return Te===32||Te===9}(Wt)?5:Wt>=97&&Wt<=122?0:Wt>=65&&Wt<=90?1:Wt>=48&&Wt<=57?2:Wt===-1?3:4}let Qt={legacy:new class{computeDiff(Wt,Te,Ze){var rt;let yt=new ue(Wt,Te,{maxComputationTime:Ze.maxComputationTimeMs,shouldIgnoreTrimWhitespace:Ze.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),Nt=[],dt=null;for(let Re of yt.changes){let qe,Ue;qe=Re.originalEndLineNumber===0?new ie.z(Re.originalStartLineNumber+1,Re.originalStartLineNumber+1):new ie.z(Re.originalStartLineNumber,Re.originalEndLineNumber+1),Ue=Re.modifiedEndLineNumber===0?new ie.z(Re.modifiedStartLineNumber+1,Re.modifiedStartLineNumber+1):new ie.z(Re.modifiedStartLineNumber,Re.modifiedEndLineNumber+1);let Pe=new re.f0(qe,Ue,(rt=Re.charChanges)===null||rt===void 0?void 0:rt.map(Xe=>new re.iy(new k.e(Xe.originalStartLineNumber,Xe.originalStartColumn,Xe.originalEndLineNumber,Xe.originalEndColumn),new k.e(Xe.modifiedStartLineNumber,Xe.modifiedStartColumn,Xe.modifiedEndLineNumber,Xe.modifiedEndColumn))));dt&&(dt.modifiedRange.endLineNumberExclusive!==Pe.modifiedRange.startLineNumber&&dt.originalRange.endLineNumberExclusive!==Pe.originalRange.startLineNumber||(Pe=new re.f0(dt.originalRange.join(Pe.originalRange),dt.modifiedRange.join(Pe.modifiedRange),dt.innerChanges&&Pe.innerChanges?dt.innerChanges.concat(Pe.innerChanges):void 0),Nt.pop())),Nt.push(Pe),dt=Pe}return(0,ne.eZ)(()=>(0,ne.DM)(Nt,(Re,qe)=>qe.originalRange.startLineNumber-Re.originalRange.endLineNumberExclusive==qe.modifiedRange.startLineNumber-Re.modifiedRange.endLineNumberExclusive&&Re.originalRange.endLineNumberExclusive<qe.originalRange.startLineNumber&&Re.modifiedRange.endLineNumberExclusive<qe.modifiedRange.startLineNumber)),new re.hZ(Nt,yt.quitEarly)}},advanced:new class{constructor(){this.dynamicProgrammingDiffing=new Le,this.myersDiffingAlgorithm=new ee}computeDiff(Wt,Te,Ze){let rt=Ze.maxComputationTimeMs===0?Fe.instance:new _e(Ze.maxComputationTimeMs),yt=!Ze.ignoreTrimWhitespace,Nt=new Map;function dt(Gt){let $t=Nt.get(Gt);return $t===void 0&&($t=Nt.size,Nt.set(Gt,$t)),$t}let Re=Wt.map(Gt=>dt(Gt.trim())),qe=Te.map(Gt=>dt(Gt.trim())),Ue=new Ve(Re,Wt),Pe=new Ve(qe,Te),Xe=(()=>Ue.length+Pe.length<1500?this.dynamicProgrammingDiffing.compute(Ue,Pe,rt,(Gt,$t)=>Wt[Gt]===Te[$t]?Te[$t].length===0?.1:1+Math.log(1+Te[$t].length):.99):this.myersDiffingAlgorithm.compute(Ue,Pe))(),$e=Xe.diffs,ot=Xe.hitTimeout;$e=ke(Ue,Pe,$e);let Tt=[],Ot=Gt=>{if(yt)for(let $t=0;$t<Gt;$t++){let si=ti+$t,ai=zt+$t;if(Wt[si]!==Te[ai]){let _i=this.refineDiff(Wt,Te,new Ae(new Ce.q(si,si+1),new Ce.q(ai,ai+1)),rt,yt);for(let Li of _i.mappings)Tt.push(Li);_i.hitTimeout&&(ot=!0)}}},ti=0,zt=0;for(let Gt of $e){(0,ne.eZ)(()=>Gt.seq1Range.start-ti==Gt.seq2Range.start-zt),Ot(Gt.seq1Range.start-ti),ti=Gt.seq1Range.endExclusive,zt=Gt.seq2Range.endExclusive;let $t=this.refineDiff(Wt,Te,Gt,rt,yt);$t.hitTimeout&&(ot=!0);for(let si of $t.mappings)Tt.push(si)}Ot(Wt.length-ti);let Jt=function(Gt,$t,si){let ai=[];for(let _i of function*(Li,ri){let qt,je;for(let Rt of Li)je!==void 0&&(wt=Rt,(mt=je).originalRange.overlapOrTouch(wt.originalRange)||mt.modifiedRange.overlapOrTouch(wt.modifiedRange))?qt.push(Rt):(qt&&(yield qt),qt=[Rt]),je=Rt;var mt,wt;qt&&(yield qt)}(Gt.map(Li=>function(ri,qt,je){let mt=0,wt=0;ri.modifiedRange.startColumn-1>=je[ri.modifiedRange.startLineNumber-1].length&&ri.originalRange.startColumn-1>=qt[ri.originalRange.startLineNumber-1].length&&(mt=1),ri.modifiedRange.endColumn===1&&ri.originalRange.endColumn===1&&ri.originalRange.startLineNumber+mt<=ri.originalRange.endLineNumber&&ri.modifiedRange.startLineNumber+mt<=ri.modifiedRange.endLineNumber&&(wt=-1);let Rt=new ie.z(ri.originalRange.startLineNumber+mt,ri.originalRange.endLineNumber+1+wt),oi=new ie.z(ri.modifiedRange.startLineNumber+mt,ri.modifiedRange.endLineNumber+1+wt);return new re.f0(Rt,oi,[ri])}(Li,$t,si)))){let Li=_i[0],ri=_i[_i.length-1];ai.push(new re.f0(Li.originalRange.join(ri.originalRange),Li.modifiedRange.join(ri.modifiedRange),_i.map(qt=>qt.innerChanges[0])))}return(0,ne.eZ)(()=>(0,ne.DM)(ai,(_i,Li)=>Li.originalRange.startLineNumber-_i.originalRange.endLineNumberExclusive==Li.modifiedRange.startLineNumber-_i.modifiedRange.endLineNumberExclusive&&_i.originalRange.endLineNumberExclusive<Li.originalRange.startLineNumber&&_i.modifiedRange.endLineNumberExclusive<Li.modifiedRange.startLineNumber)),ai}(Tt,Wt,Te);return new re.hZ(Jt,ot)}refineDiff(Wt,Te,Ze,rt,yt){let Nt=new tt(Wt,Ze.seq1Range,yt),dt=new tt(Te,Ze.seq2Range,yt),Re=Nt.length+dt.length<500?this.dynamicProgrammingDiffing.compute(Nt,dt,rt):this.myersDiffingAlgorithm.compute(Nt,dt,rt),qe=Re.diffs;return qe=ke(Nt,dt,qe),qe=function(Ue,Pe,Xe){let $e=[],ot;function Tt(){if(!ot)return;let Ot=ot.s1Range.length-ot.deleted;ot.s2Range.length,ot.added,Math.max(ot.deleted,ot.added)+(ot.count-1)>Ot&&$e.push(new Ae(ot.s1Range,ot.s2Range)),ot=void 0}for(let Ot of Xe){let ti=function(si,ai){var _i,Li,ri,qt;if(!ot||!ot.s1Range.containsRange(si)||!ot.s2Range.containsRange(ai))if(!ot||ot.s1Range.endExclusive<si.start&&ot.s2Range.endExclusive<ai.start)Tt(),ot={added:0,deleted:0,count:0,s1Range:si,s2Range:ai};else{let wt=Ce.q.tryCreate(ot.s1Range.endExclusive,si.start),Rt=Ce.q.tryCreate(ot.s2Range.endExclusive,ai.start);ot.deleted+=(_i=wt==null?void 0:wt.length)!==null&&_i!==void 0?_i:0,ot.added+=(Li=Rt==null?void 0:Rt.length)!==null&&Li!==void 0?Li:0,ot.s1Range=ot.s1Range.join(si),ot.s2Range=ot.s2Range.join(ai)}let je=si.intersect(Ot.seq1Range),mt=ai.intersect(Ot.seq2Range);ot.count++,ot.deleted+=(ri=je==null?void 0:je.length)!==null&&ri!==void 0?ri:0,ot.added+=(qt=mt==null?void 0:mt.length)!==null&&qt!==void 0?qt:0},zt=Ue.findWordContaining(Ot.seq1Range.start-1),Jt=Pe.findWordContaining(Ot.seq2Range.start-1),Gt=Ue.findWordContaining(Ot.seq1Range.endExclusive),$t=Pe.findWordContaining(Ot.seq2Range.endExclusive);zt&&Gt&&Jt&&$t&&zt.equals(Gt)&&Jt.equals($t)?ti(zt,Jt):(zt&&Jt&&ti(zt,Jt),Gt&&$t&&ti(Gt,$t))}return Tt(),function(Ot,ti){let zt=[];for(;Ot.length>0||ti.length>0;){let Jt=Ot[0],Gt=ti[0],$t;$t=Jt&&(!Gt||Jt.seq1Range.start<Gt.seq1Range.start)?Ot.shift():ti.shift(),zt.length>0&&zt[zt.length-1].seq1Range.endExclusive>=$t.seq1Range.start?zt[zt.length-1]=zt[zt.length-1].join($t):zt.push($t)}return zt}(Xe,$e)}(Nt,dt,qe),qe=function(Ue,Pe,Xe){let $e=[];for(let ot of Xe){let Tt=$e[$e.length-1];Tt&&(ot.seq1Range.start-Tt.seq1Range.endExclusive<=2||ot.seq2Range.start-Tt.seq2Range.endExclusive<=2)?$e[$e.length-1]=new Ae(Tt.seq1Range.join(ot.seq1Range),Tt.seq2Range.join(ot.seq2Range)):$e.push(ot)}return $e}(0,0,qe),{mappings:qe.map(Ue=>new re.iy(Nt.translateRange(Ue.seq1Range),dt.translateRange(Ue.seq2Range))),hitTimeout:Re.hitTimeout}}}};var At=t(1264);function mi(Wt){let Te=[];for(let Ze of Wt){let rt=Number(Ze);(rt||rt===0&&Ze.replace(/\s/g,"")!=="")&&Te.push(rt)}return Te}function Lt(Wt,Te,Ze,rt){return{red:Wt/255,blue:Ze/255,green:Te/255,alpha:rt}}function ct(Wt,Te){let Ze=Te.index,rt=Te[0].length;if(!Ze)return;let yt=Wt.positionAt(Ze);return{startLineNumber:yt.lineNumber,startColumn:yt.column,endLineNumber:yt.lineNumber,endColumn:yt.column+rt}}function Kt(Wt,Te){if(!Wt)return;let Ze=At.Il.Format.CSS.parseHex(Te);return Ze?{range:Wt,color:Lt(Ze.rgba.r,Ze.rgba.g,Ze.rgba.b,Ze.rgba.a)}:void 0}function pi(Wt,Te,Ze){if(!Wt||Te.length!==1)return;let rt=mi(Te[0].values());return{range:Wt,color:Lt(rt[0],rt[1],rt[2],Ze?rt[3]:1)}}function li(Wt,Te,Ze){if(!Wt||Te.length!==1)return;let rt=mi(Te[0].values()),yt=new At.Il(new At.Oz(rt[0],rt[1]/100,rt[2]/100,Ze?rt[3]:1));return{range:Wt,color:Lt(yt.rgba.r,yt.rgba.g,yt.rgba.b,yt.rgba.a)}}function Wi(Wt,Te){return typeof Wt=="string"?[...Wt.matchAll(Te)]:Wt.findMatches(Te)}var Vi=function(Wt,Te,Ze,rt){return new(Ze||(Ze=Promise))(function(yt,Nt){function dt(Ue){try{qe(rt.next(Ue))}catch(Pe){Nt(Pe)}}function Re(Ue){try{qe(rt.throw(Ue))}catch(Pe){Nt(Pe)}}function qe(Ue){var Pe;Ue.done?yt(Ue.value):(Pe=Ue.value,Pe instanceof Ze?Pe:new Ze(function(Xe){Xe(Pe)})).then(dt,Re)}qe((rt=rt.apply(Wt,Te||[])).next())})};class Xi extends C{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(Te){let Ze=[];for(let rt=0;rt<this._lines.length;rt++){let yt=this._lines[rt],Nt=this.offsetAt(new N.L(rt+1,1)),dt=yt.matchAll(Te);for(let Re of dt)(Re.index||Re.index===0)&&(Re.index=Re.index+Nt),Ze.push(Re)}return Ze}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(Te){return this._lines[Te-1]}getWordAtPosition(Te,Ze){let rt=(0,W.t2)(Te.column,(0,W.eq)(Ze),this._lines[Te.lineNumber-1],0);return rt?new k.e(Te.lineNumber,rt.startColumn,Te.lineNumber,rt.endColumn):null}words(Te){let Ze=this._lines,rt=this._wordenize.bind(this),yt=0,Nt="",dt=0,Re=[];return{*[Symbol.iterator](){for(;;)if(dt<Re.length){let qe=Nt.substring(Re[dt].start,Re[dt].end);dt+=1,yield qe}else{if(!(yt<Ze.length))break;Nt=Ze[yt],Re=rt(Nt,Te),dt=0,yt+=1}}}}getLineWords(Te,Ze){let rt=this._lines[Te-1],yt=this._wordenize(rt,Ze),Nt=[];for(let dt of yt)Nt.push({word:rt.substring(dt.start,dt.end),startColumn:dt.start+1,endColumn:dt.end+1});return Nt}_wordenize(Te,Ze){let rt=[],yt;for(Ze.lastIndex=0;(yt=Ze.exec(Te))&&yt[0].length!==0;)rt.push({start:yt.index,end:yt.index+yt[0].length});return rt}getValueInRange(Te){if((Te=this._validateRange(Te)).startLineNumber===Te.endLineNumber)return this._lines[Te.startLineNumber-1].substring(Te.startColumn-1,Te.endColumn-1);let Ze=this._eol,rt=Te.startLineNumber-1,yt=Te.endLineNumber-1,Nt=[];Nt.push(this._lines[rt].substring(Te.startColumn-1));for(let dt=rt+1;dt<yt;dt++)Nt.push(this._lines[dt]);return Nt.push(this._lines[yt].substring(0,Te.endColumn-1)),Nt.join(Ze)}offsetAt(Te){return Te=this._validatePosition(Te),this._ensureLineStarts(),this._lineStarts.getPrefixSum(Te.lineNumber-2)+(Te.column-1)}positionAt(Te){Te=Math.floor(Te),Te=Math.max(0,Te),this._ensureLineStarts();let Ze=this._lineStarts.getIndexOf(Te),rt=this._lines[Ze.index].length;return{lineNumber:1+Ze.index,column:1+Math.min(Ze.remainder,rt)}}_validateRange(Te){let Ze=this._validatePosition({lineNumber:Te.startLineNumber,column:Te.startColumn}),rt=this._validatePosition({lineNumber:Te.endLineNumber,column:Te.endColumn});return Ze.lineNumber!==Te.startLineNumber||Ze.column!==Te.startColumn||rt.lineNumber!==Te.endLineNumber||rt.column!==Te.endColumn?{startLineNumber:Ze.lineNumber,startColumn:Ze.column,endLineNumber:rt.lineNumber,endColumn:rt.column}:Te}_validatePosition(Te){if(!N.L.isIPosition(Te))throw new Error("bad position");let{lineNumber:Ze,column:rt}=Te,yt=!1;if(Ze<1)Ze=1,rt=1,yt=!0;else if(Ze>this._lines.length)Ze=this._lines.length,rt=this._lines[Ze-1].length+1,yt=!0;else{let Nt=this._lines[Ze-1].length+1;rt<1?(rt=1,yt=!0):rt>Nt&&(rt=Nt,yt=!0)}return yt?{lineNumber:Ze,column:rt}:Te}}class en{constructor(Te,Ze){this._host=Te,this._models=Object.create(null),this._foreignModuleFactory=Ze,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(Te){return this._models[Te]}_getModels(){let Te=[];return Object.keys(this._models).forEach(Ze=>Te.push(this._models[Ze])),Te}acceptNewModel(Te){this._models[Te.url]=new Xi($.o.parse(Te.url),Te.lines,Te.EOL,Te.versionId)}acceptModelChanged(Te,Ze){this._models[Te]&&this._models[Te].onEvents(Ze)}acceptRemovedModel(Te){this._models[Te]&&delete this._models[Te]}computeUnicodeHighlights(Te,Ze,rt){return Vi(this,void 0,void 0,function*(){let yt=this._getModel(Te);return yt?p.a.computeUnicodeHighlights(yt,Ze,rt):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(Te,Ze,rt,yt){return Vi(this,void 0,void 0,function*(){let Nt=this._getModel(Te),dt=this._getModel(Ze);return Nt&&dt?en.computeDiff(Nt,dt,rt,yt):null})}static computeDiff(Te,Ze,rt,yt){let Nt=yt==="advanced"?Qt.advanced:Qt.legacy,dt=Te.getLinesContent(),Re=Ze.getLinesContent(),qe=Nt.computeDiff(dt,Re,rt);return{identical:!(qe.changes.length>0)&&this._modelsAreIdentical(Te,Ze),quitEarly:qe.hitTimeout,changes:qe.changes.map(Ue=>{var Pe;return[Ue.originalRange.startLineNumber,Ue.originalRange.endLineNumberExclusive,Ue.modifiedRange.startLineNumber,Ue.modifiedRange.endLineNumberExclusive,(Pe=Ue.innerChanges)===null||Pe===void 0?void 0:Pe.map(Xe=>[Xe.originalRange.startLineNumber,Xe.originalRange.startColumn,Xe.originalRange.endLineNumber,Xe.originalRange.endColumn,Xe.modifiedRange.startLineNumber,Xe.modifiedRange.startColumn,Xe.modifiedRange.endLineNumber,Xe.modifiedRange.endColumn])]})}}static _modelsAreIdentical(Te,Ze){let rt=Te.getLineCount();if(rt!==Ze.getLineCount())return!1;for(let yt=1;yt<=rt;yt++)if(Te.getLineContent(yt)!==Ze.getLineContent(yt))return!1;return!0}computeMoreMinimalEdits(Te,Ze,rt){return Vi(this,void 0,void 0,function*(){let yt=this._getModel(Te);if(!yt)return Ze;let Nt=[],dt;Ze=Ze.slice(0).sort((Re,qe)=>Re.range&&qe.range?k.e.compareRangesUsingStarts(Re.range,qe.range):(Re.range?0:1)-(qe.range?0:1));for(let{range:Re,text:qe,eol:Ue}of Ze){if(typeof Ue=="number"&&(dt=Ue),k.e.isEmpty(Re)&&!qe)continue;let Pe=yt.getValueInRange(Re);if(qe=qe.replace(/\r\n|\n|\r/g,yt.eol),Pe===qe)continue;if(Math.max(qe.length,Pe.length)>en._diffLimit){Nt.push({range:Re,text:qe});continue}let Xe=(0,O.a$)(Pe,qe,rt),$e=yt.offsetAt(k.e.lift(Re).getStartPosition());for(let ot of Xe){let Tt=yt.positionAt($e+ot.originalStart),Ot=yt.positionAt($e+ot.originalStart+ot.originalLength),ti={text:qe.substr(ot.modifiedStart,ot.modifiedLength),range:{startLineNumber:Tt.lineNumber,startColumn:Tt.column,endLineNumber:Ot.lineNumber,endColumn:Ot.column}};yt.getValueInRange(ti.range)!==ti.text&&Nt.push(ti)}}return typeof dt=="number"&&Nt.push({eol:dt,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),Nt})}computeLinks(Te){return Vi(this,void 0,void 0,function*(){let Ze=this._getModel(Te);return Ze?function(rt){return rt&&typeof rt.getLineCount=="function"&&typeof rt.getLineContent=="function"?J.computeLinks(rt):[]}(Ze):null})}computeDefaultDocumentColors(Te){return Vi(this,void 0,void 0,function*(){let Ze=this._getModel(Te);return Ze?function(rt){return rt&&typeof rt.getValue=="function"&&typeof rt.positionAt=="function"?function(yt){let Nt=[],dt=Wi(yt,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(dt.length>0)for(let Re of dt){let qe=Re.filter($e=>$e!==void 0),Ue=qe[1],Pe=qe[2];if(!Pe)continue;let Xe;if(Ue==="rgb"){let $e=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;Xe=pi(ct(yt,Re),Wi(Pe,$e),!1)}else if(Ue==="rgba"){let $e=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;Xe=pi(ct(yt,Re),Wi(Pe,$e),!0)}else if(Ue==="hsl"){let $e=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;Xe=li(ct(yt,Re),Wi(Pe,$e),!1)}else if(Ue==="hsla"){let $e=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;Xe=li(ct(yt,Re),Wi(Pe,$e),!0)}else Ue==="#"&&(Xe=Kt(ct(yt,Re),Ue+Pe));Xe&&Nt.push(Xe)}return Nt}(rt):[]}(Ze):null})}textualSuggest(Te,Ze,rt,yt){return Vi(this,void 0,void 0,function*(){let Nt=new q.G(!0),dt=new RegExp(rt,yt),Re=new Set;e:for(let qe of Te){let Ue=this._getModel(qe);if(Ue){for(let Pe of Ue.words(dt))if(Pe!==Ze&&isNaN(Number(Pe))&&(Re.add(Pe),Re.size>en._suggestionsLimit))break e}}return{words:Array.from(Re),duration:Nt.elapsed()}})}computeWordRanges(Te,Ze,rt,yt){return Vi(this,void 0,void 0,function*(){let Nt=this._getModel(Te);if(!Nt)return Object.create(null);let dt=new RegExp(rt,yt),Re=Object.create(null);for(let qe=Ze.startLineNumber;qe<Ze.endLineNumber;qe++){let Ue=Nt.getLineWords(qe,dt);for(let Pe of Ue){if(!isNaN(Number(Pe.word)))continue;let Xe=Re[Pe.word];Xe||(Xe=[],Re[Pe.word]=Xe),Xe.push({startLineNumber:qe,startColumn:Pe.startColumn,endLineNumber:qe,endColumn:Pe.endColumn})}}return Re})}navigateValueSet(Te,Ze,rt,yt,Nt){return Vi(this,void 0,void 0,function*(){let dt=this._getModel(Te);if(!dt)return null;let Re=new RegExp(yt,Nt);Ze.startColumn===Ze.endColumn&&(Ze={startLineNumber:Ze.startLineNumber,startColumn:Ze.startColumn,endLineNumber:Ze.endLineNumber,endColumn:Ze.endColumn+1});let qe=dt.getValueInRange(Ze),Ue=dt.getWordAtPosition({lineNumber:Ze.startLineNumber,column:Ze.startColumn},Re);if(!Ue)return null;let Pe=dt.getValueInRange(Ue);return oe.INSTANCE.navigateValueSet(Ze,qe,Ue,Pe,rt)})}loadForeignModule(Te,Ze,rt){let yt={host:(0,_.IU)(rt,(Nt,dt)=>this._host.fhr(Nt,dt)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(yt,Ze),Promise.resolve((0,_.$E)(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(Te,Ze){if(!this._foreignModule||typeof this._foreignModule[Te]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+Te));try{return Promise.resolve(this._foreignModule[Te].apply(this._foreignModule,Ze))}catch(rt){return Promise.reject(rt)}}}en._diffLimit=1e5,en._suggestionsLimit=1e4,typeof importScripts=="function"&&(globalThis.monaco=(0,fe.O)());var rn=t(3733),tn=t(1765),yn=t(9488),sn=t(3557),ci=t(1922),Xt=function(Wt,Te){return function(Ze,rt){Te(Ze,rt,Wt)}},kt=function(Wt,Te,Ze,rt){return new(Ze||(Ze=Promise))(function(yt,Nt){function dt(Ue){try{qe(rt.next(Ue))}catch(Pe){Nt(Pe)}}function Re(Ue){try{qe(rt.throw(Ue))}catch(Pe){Nt(Pe)}}function qe(Ue){var Pe;Ue.done?yt(Ue.value):(Pe=Ue.value,Pe instanceof Ze?Pe:new Ze(function(Xe){Xe(Pe)})).then(dt,Re)}qe((rt=rt.apply(Wt,Te||[])).next())})};function It(Wt,Te){let Ze=Wt.getModel(Te);return!!Ze&&!Ze.isTooLargeForSyncing()}let ft=class extends B.JT{constructor(Wt,Te,Ze,rt,yt){super(),this._modelService=Wt,this._workerManager=this._register(new jt(this._modelService,rt)),this._logService=Ze,this._register(yt.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(Nt,dt)=>It(this._modelService,Nt.uri)?this._workerManager.withWorker().then(Re=>Re.computeLinks(Nt.uri)).then(Re=>Re&&{links:Re}):Promise.resolve({links:[]})})),this._register(yt.completionProvider.register("*",new Mt(this._workerManager,Te,this._modelService,rt)))}dispose(){super.dispose()}canComputeUnicodeHighlights(Wt){return It(this._modelService,Wt)}computedUnicodeHighlights(Wt,Te,Ze){return this._workerManager.withWorker().then(rt=>rt.computedUnicodeHighlights(Wt,Te,Ze))}computeDiff(Wt,Te,Ze,rt){return kt(this,void 0,void 0,function*(){let yt=yield this._workerManager.withWorker().then(dt=>dt.computeDiff(Wt,Te,Ze,rt));return yt?{identical:yt.identical,quitEarly:yt.quitEarly,changes:yt.changes.map(dt=>{var Re;return new re.f0(new ie.z(dt[0],dt[1]),new ie.z(dt[2],dt[3]),(Re=dt[4])===null||Re===void 0?void 0:Re.map(qe=>new re.iy(new k.e(qe[0],qe[1],qe[2],qe[3]),new k.e(qe[4],qe[5],qe[6],qe[7]))))})}:null})}computeMoreMinimalEdits(Wt,Te,Ze=!1){if((0,yn.Of)(Te)){if(!It(this._modelService,Wt))return Promise.resolve(Te);let rt=q.G.create(!0),yt=this._workerManager.withWorker().then(Nt=>Nt.computeMoreMinimalEdits(Wt,Te,Ze));return yt.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",Wt.toString(!0),rt.elapsed())),Promise.race([yt,(0,m.Vs)(1e3).then(()=>Te)])}return Promise.resolve(void 0)}canNavigateValueSet(Wt){return It(this._modelService,Wt)}navigateValueSet(Wt,Te,Ze){return this._workerManager.withWorker().then(rt=>rt.navigateValueSet(Wt,Te,Ze))}canComputeWordRanges(Wt){return It(this._modelService,Wt)}computeWordRanges(Wt,Te){return this._workerManager.withWorker().then(Ze=>Ze.computeWordRanges(Wt,Te))}};ft=function(Wt,Te,Ze,rt){var yt,Nt=arguments.length,dt=Nt<3?Te:rt===null?rt=Object.getOwnPropertyDescriptor(Te,Ze):rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")dt=Reflect.decorate(Wt,Te,Ze,rt);else for(var Re=Wt.length-1;Re>=0;Re--)(yt=Wt[Re])&&(dt=(Nt<3?yt(dt):Nt>3?yt(Te,Ze,dt):yt(Te,Ze))||dt);return Nt>3&&dt&&Object.defineProperty(Te,Ze,dt),dt}([Xt(0,rn.q),Xt(1,tn.V),Xt(2,sn.VZ),Xt(3,R.c_),Xt(4,ci.p)],ft);class Mt{constructor(Te,Ze,rt,yt){this.languageConfigurationService=yt,this._debugDisplayName="wordbasedCompletions",this._workerManager=Te,this._configurationService=Ze,this._modelService=rt}provideCompletionItems(Te,Ze){return kt(this,void 0,void 0,function*(){let rt=this._configurationService.getValue(Te.uri,Ze,"editor");if(!rt.wordBasedSuggestions)return;let yt=[];if(rt.wordBasedSuggestionsMode==="currentDocument")It(this._modelService,Te.uri)&&yt.push(Te.uri);else for(let Xe of this._modelService.getModels())It(this._modelService,Xe.uri)&&(Xe===Te?yt.unshift(Xe.uri):rt.wordBasedSuggestionsMode!=="allDocuments"&&Xe.getLanguageId()!==Te.getLanguageId()||yt.push(Xe.uri));if(yt.length===0)return;let Nt=this.languageConfigurationService.getLanguageConfiguration(Te.getLanguageId()).getWordDefinition(),dt=Te.getWordAtPosition(Ze),Re=dt?new k.e(Ze.lineNumber,dt.startColumn,Ze.lineNumber,dt.endColumn):k.e.fromPositions(Ze),qe=Re.setEndPosition(Ze.lineNumber,Ze.column),Ue=yield this._workerManager.withWorker(),Pe=yield Ue.textualSuggest(yt,dt==null?void 0:dt.word,Nt);return Pe?{duration:Pe.duration,suggestions:Pe.words.map(Xe=>({kind:18,label:Xe,insertText:Xe,range:{insert:qe,replace:Re}}))}:void 0})}}class jt extends B.JT{constructor(Te,Ze){super(),this.languageConfigurationService=Ze,this._modelService=Te,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new m.zh).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(15e4)),this._register(this._modelService.onModelRemoved(rt=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){this._editorWorkerClient&&this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){this._editorWorkerClient&&new Date().getTime()-this._lastWorkerUsedTime>3e5&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Ri(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class di extends B.JT{constructor(Te,Ze,rt){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=Te,this._modelService=Ze,!rt){let yt=new m.zh;yt.cancelAndSet(()=>this._checkStopModelSync(),Math.round(3e4)),this._register(yt)}}dispose(){for(let Te in this._syncedModels)(0,B.B9)(this._syncedModels[Te]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(Te,Ze){for(let rt of Te){let yt=rt.toString();this._syncedModels[yt]||this._beginModelSync(rt,Ze),this._syncedModels[yt]&&(this._syncedModelsLastUsedTime[yt]=new Date().getTime())}}_checkStopModelSync(){let Te=new Date().getTime(),Ze=[];for(let rt in this._syncedModelsLastUsedTime)Te-this._syncedModelsLastUsedTime[rt]>6e4&&Ze.push(rt);for(let rt of Ze)this._stopModelSync(rt)}_beginModelSync(Te,Ze){let rt=this._modelService.getModel(Te);if(!rt||!Ze&&rt.isTooLargeForSyncing())return;let yt=Te.toString();this._proxy.acceptNewModel({url:rt.uri.toString(),lines:rt.getLinesContent(),EOL:rt.getEOL(),versionId:rt.getVersionId()});let Nt=new B.SL;Nt.add(rt.onDidChangeContent(dt=>{this._proxy.acceptModelChanged(yt.toString(),dt)})),Nt.add(rt.onWillDispose(()=>{this._stopModelSync(yt)})),Nt.add((0,B.OF)(()=>{this._proxy.acceptRemovedModel(yt)})),this._syncedModels[yt]=Nt}_stopModelSync(Te){let Ze=this._syncedModels[Te];delete this._syncedModels[Te],delete this._syncedModelsLastUsedTime[Te],(0,B.B9)(Ze)}}class fi{constructor(Te){this._instance=Te,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class Si{constructor(Te){this._workerClient=Te}fhr(Te,Ze){return this._workerClient.fhr(Te,Ze)}}class Ri extends B.JT{constructor(Te,Ze,rt,yt){super(),this.languageConfigurationService=yt,this._disposed=!1,this._modelService=Te,this._keepIdleModels=Ze,this._workerFactory=new L(rt),this._worker=null,this._modelManager=null}fhr(Te,Ze){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new b(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Si(this)))}catch(Te){f(Te),this._worker=new fi(new en(new Si(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,Te=>(f(Te),this._worker=new fi(new en(new Si(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(Te){return this._modelManager||(this._modelManager=this._register(new di(Te,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(Te,Ze=!1){return kt(this,void 0,void 0,function*(){return this._disposed?Promise.reject((0,u.F0)()):this._getProxy().then(rt=>(this._getOrCreateModelManager(rt).ensureSyncedResources(Te,Ze),rt))})}computedUnicodeHighlights(Te,Ze,rt){return this._withSyncedResources([Te]).then(yt=>yt.computeUnicodeHighlights(Te.toString(),Ze,rt))}computeDiff(Te,Ze,rt,yt){return this._withSyncedResources([Te,Ze],!0).then(Nt=>Nt.computeDiff(Te.toString(),Ze.toString(),rt,yt))}computeMoreMinimalEdits(Te,Ze,rt){return this._withSyncedResources([Te]).then(yt=>yt.computeMoreMinimalEdits(Te.toString(),Ze,rt))}computeLinks(Te){return this._withSyncedResources([Te]).then(Ze=>Ze.computeLinks(Te.toString()))}computeDefaultDocumentColors(Te){return this._withSyncedResources([Te]).then(Ze=>Ze.computeDefaultDocumentColors(Te.toString()))}textualSuggest(Te,Ze,rt){return kt(this,void 0,void 0,function*(){let yt=yield this._withSyncedResources(Te),Nt=rt.source,dt=(0,x.mr)(rt);return yt.textualSuggest(Te.map(Re=>Re.toString()),Ze,Nt,dt)})}computeWordRanges(Te,Ze){return this._withSyncedResources([Te]).then(rt=>{let yt=this._modelService.getModel(Te);if(!yt)return Promise.resolve(null);let Nt=this.languageConfigurationService.getLanguageConfiguration(yt.getLanguageId()).getWordDefinition(),dt=Nt.source,Re=(0,x.mr)(Nt);return rt.computeWordRanges(Te.toString(),Ze,dt,Re)})}navigateValueSet(Te,Ze,rt){return this._withSyncedResources([Te]).then(yt=>{let Nt=this._modelService.getModel(Te);if(!Nt)return null;let dt=this.languageConfigurationService.getLanguageConfiguration(Nt.getLanguageId()).getWordDefinition(),Re=dt.source,qe=(0,x.mr)(dt);return yt.navigateValueSet(Te.toString(),Ze,rt,Re,qe)})}dispose(){super.dispose(),this._disposed=!0}}},3407:(ut,Ie,t)=>{"use strict";t.d(Ie,{Z:()=>m});class m{static capture(u){if(u.getScrollTop()===0||u.hasPendingScrollAnimation())return new m(u.getScrollTop(),u.getContentHeight(),null,0,null);let I=null,_=0,A=u.getVisibleRanges();if(A.length>0){I=A[0].getStartPosition();let x=u.getTopForPosition(I.lineNumber,I.column);_=u.getScrollTop()-x}return new m(u.getScrollTop(),u.getContentHeight(),I,_,u.getPosition())}constructor(u,I,_,A,x){this._initialScrollTop=u,this._initialContentHeight=I,this._visiblePosition=_,this._visiblePositionScrollDelta=A,this._cursorPosition=x}restore(u){if((this._initialContentHeight!==u.getContentHeight()||this._initialScrollTop!==u.getScrollTop())&&this._visiblePosition){let I=u.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);u.setScrollTop(I+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(u){if(this._initialContentHeight===u.getContentHeight()&&this._initialScrollTop===u.getScrollTop())return;let I=u.getPosition();if(!this._cursorPosition||!I)return;let _=u.getTopForLineNumber(I.lineNumber)-u.getTopForLineNumber(this._cursorPosition.lineNumber);u.setScrollTop(u.getScrollTop()+_)}}},1998:(ut,Ie,t)=>{"use strict";t.d(Ie,{Gm:()=>Ds});var m=t(6357),B=t(6830);let u=class{constructor(Ct,e){}dispose(){}};var I,_;u.ID="editor.contrib.markerDecorations",u=function(Ct,e,s,y){var P,Q=arguments.length,pe=Q<3?e:y===null?y=Object.getOwnPropertyDescriptor(e,s):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pe=Reflect.decorate(Ct,e,s,y);else for(var Se=Ct.length-1;Se>=0;Se--)(P=Ct[Se])&&(pe=(Q<3?P(pe):Q>3?P(e,s,pe):P(e,s))||pe);return Q>3&&pe&&Object.defineProperty(e,s,pe),pe}([(I=1,_=m.i,function(Ct,e){_(Ct,e,I)})],u),(0,B._K)(u.ID,u,0);var A=t(3580),x=t(5321),v=t(7301),f=t(4669),d=t(5976),o=t(6663),h=t(6268),r=t(9488),i=t(6248),c=t(1432),b=t(4534),l=t(7231);class a{constructor(e,s){this.key=e,this.migrate=s}apply(e){let s=a._read(e,this.key);this.migrate(s,y=>a._read(e,y),(y,P)=>a._write(e,y,P))}static _read(e,s){if(e===void 0)return;let y=s.indexOf(".");if(y>=0){let P=s.substring(0,y);return this._read(e[P],s.substring(y+1))}return e[s]}static _write(e,s,y){let P=s.indexOf(".");if(P>=0){let Q=s.substring(0,P);return e[Q]=e[Q]||{},void this._write(e[Q],s.substring(P+1),y)}e[s]=y}}function w(Ct,e){a.items.push(new a(Ct,e))}function E(Ct,e){w(Ct,(s,y,P)=>{if(s!==void 0){for(let[Q,pe]of e)if(s===Q)return void P(Ct,pe)}})}a.items=[],E("wordWrap",[[!0,"on"],[!1,"off"]]),E("lineNumbers",[[!0,"on"],[!1,"off"]]),E("cursorBlinking",[["visible","solid"]]),E("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),E("renderLineHighlight",[[!0,"line"],[!1,"none"]]),E("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),E("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),E("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),E("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),E("autoIndent",[[!1,"advanced"],[!0,"full"]]),E("matchBrackets",[[!0,"always"],[!1,"never"]]),E("renderFinalNewline",[[!0,"on"],[!1,"off"]]),E("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),w("autoClosingBrackets",(Ct,e,s)=>{Ct===!1&&(s("autoClosingBrackets","never"),e("autoClosingQuotes")===void 0&&s("autoClosingQuotes","never"),e("autoSurround")===void 0&&s("autoSurround","never"))}),w("renderIndentGuides",(Ct,e,s)=>{Ct!==void 0&&(s("renderIndentGuides",void 0),e("guides.indentation")===void 0&&s("guides.indentation",!!Ct))}),w("highlightActiveIndentGuide",(Ct,e,s)=>{Ct!==void 0&&(s("highlightActiveIndentGuide",void 0),e("guides.highlightActiveIndentation")===void 0&&s("guides.highlightActiveIndentation",!!Ct))});let D={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};w("suggest.filteredTypes",(Ct,e,s)=>{if(Ct&&typeof Ct=="object"){for(let y of Object.entries(D))Ct[y[0]]===!1&&e(`suggest.${y[1]}`)===void 0&&s(`suggest.${y[1]}`,!1);s("suggest.filteredTypes",void 0)}}),w("quickSuggestions",(Ct,e,s)=>{if(typeof Ct=="boolean"){let y=Ct?"on":"off";s("quickSuggestions",{comments:y,strings:y,other:y})}}),w("experimental.stickyScroll.enabled",(Ct,e,s)=>{typeof Ct=="boolean"&&(s("experimental.stickyScroll.enabled",void 0),e("stickyScroll.enabled")===void 0&&s("stickyScroll.enabled",Ct))}),w("experimental.stickyScroll.maxLineCount",(Ct,e,s)=>{typeof Ct=="number"&&(s("experimental.stickyScroll.maxLineCount",void 0),e("stickyScroll.maxLineCount")===void 0&&s("stickyScroll.maxLineCount",Ct))});var L=t(7940),k=t(4141),R=t(2334),O=t(7374),$=t(1106);let N=class extends d.JT{constructor(Ct,e,s,y){super(),this._accessibilityService=y,this._onDidChange=this._register(new f.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new f.Q5),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new k.LJ,this.isSimpleWidget=Ct,this._containerObserver=this._register(new b.I(s,e.dimension)),this._rawOptions=j(e),this._validatedOptions=K.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(11)&&this._containerObserver.startObserving(),this._register(R.C.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(L.n.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(l.g.onDidChange(()=>this._recomputeOptions())),this._register(h.PixelRatio.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){let Ct=this._computeOptions(),e=K.checkEquals(this.options,Ct);e!==null&&(this.options=Ct,this._onDidChangeFast.fire(e),this._onDidChange.fire(e))}_computeOptions(){let Ct=this._readEnvConfiguration(),e=O.E4.createFromValidatedSettings(this._validatedOptions,Ct.pixelRatio,this.isSimpleWidget),s=this._readFontInfo(e),y={memory:this._computeOptionsMemory,outerWidth:Ct.outerWidth,outerHeight:Ct.outerHeight-this._reservedHeight,fontInfo:s,extraEditorClassName:Ct.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:Ct.emptySelectionClipboard,pixelRatio:Ct.pixelRatio,tabFocusMode:L.n.getTabFocusMode("editorFocus"),accessibilitySupport:Ct.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return K.computeOptions(this._validatedOptions,y)}_readEnvConfiguration(){return{extraEditorClassName:T(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:h.isWebKit||h.isFirefox,pixelRatio:h.PixelRatio.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(Ct){return l.g.readFontInfo(Ct)}getRawOptions(){return this._rawOptions}updateOptions(Ct){let e=j(Ct);K.applyUpdate(this._rawOptions,e)&&(this._validatedOptions=K.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(Ct){this._containerObserver.observe(Ct)}setIsDominatedByLongLines(Ct){this._isDominatedByLongLines!==Ct&&(this._isDominatedByLongLines=Ct,this._recomputeOptions())}setModelLineCount(Ct){let e=function(s){let y=0;for(;s;)s=Math.floor(s/10),y++;return y||1}(Ct);this._lineNumbersDigitCount!==e&&(this._lineNumbersDigitCount=e,this._recomputeOptions())}setViewLineCount(Ct){this._viewLineCount!==Ct&&(this._viewLineCount=Ct,this._recomputeOptions())}setReservedHeight(Ct){this._reservedHeight!==Ct&&(this._reservedHeight=Ct,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(Ct){this._glyphMarginDecorationLaneCount!==Ct&&(this._glyphMarginDecorationLaneCount=Ct,this._recomputeOptions())}};function T(){let Ct="";return h.isSafari||h.isWebkitWebView||(Ct+="no-user-select "),h.isSafari&&(Ct+="no-minimap-shadow ",Ct+="enable-user-select "),c.dz&&(Ct+="mac "),Ct}N=function(Ct,e,s,y){var P,Q=arguments.length,pe=Q<3?e:y===null?y=Object.getOwnPropertyDescriptor(e,s):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pe=Reflect.decorate(Ct,e,s,y);else for(var Se=Ct.length-1;Se>=0;Se--)(P=Ct[Se])&&(pe=(Q<3?P(pe):Q>3?P(e,s,pe):P(e,s))||pe);return Q>3&&pe&&Object.defineProperty(e,s,pe),pe}([function(Ct,e){return function(s,y){e(s,y,Ct)}}(3,$.F)],N);class C{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,s){this._values[e]=s}}class W{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,s){this._values[e]=s}}class K{static validateOptions(e){let s=new C;for(let y of k.Bc){let P=y.name==="_never_"?void 0:e[y.name];s._write(y.id,y.validate(P))}return s}static computeOptions(e,s){let y=new W;for(let P of k.Bc)y._write(P.id,P.compute(s,y,e._read(P.id)));return y}static _deepEquals(e,s){if(typeof e!="object"||typeof s!="object"||!e||!s)return e===s;if(Array.isArray(e)||Array.isArray(s))return!(!Array.isArray(e)||!Array.isArray(s))&&r.fS(e,s);if(Object.keys(e).length!==Object.keys(s).length)return!1;for(let y in e)if(!K._deepEquals(e[y],s[y]))return!1;return!0}static checkEquals(e,s){let y=[],P=!1;for(let Q of k.Bc){let pe=!K._deepEquals(e._read(Q.id),s._read(Q.id));y[Q.id]=pe,pe&&(P=!0)}return P?new k.Bb(y):null}static applyUpdate(e,s){let y=!1;for(let P of k.Bc)if(s.hasOwnProperty(P.name)){let Q=P.applyUpdate(e[P.name],s[P.name]);e[P.name]=Q.newValue,y=y||Q.didChange}return y}}function j(Ct){let e=i.I8(Ct);return function(s){a.items.forEach(y=>y.apply(s))}(e),e}var F=t(1640),H=t(3860),z=t(8626),J=t(553),oe=t(7448),fe=t(9994);class q extends d.JT{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let s=!1;for(let y=0,P=e.length;y<P;y++){let Q=e[y];switch(Q.type){case 0:this.onCompositionStart(Q)&&(s=!0);break;case 1:this.onCompositionEnd(Q)&&(s=!0);break;case 2:this.onConfigurationChanged(Q)&&(s=!0);break;case 3:this.onCursorStateChanged(Q)&&(s=!0);break;case 4:this.onDecorationsChanged(Q)&&(s=!0);break;case 5:this.onFlushed(Q)&&(s=!0);break;case 6:this.onFocusChanged(Q)&&(s=!0);break;case 7:this.onLanguageConfigurationChanged(Q)&&(s=!0);break;case 8:this.onLineMappingChanged(Q)&&(s=!0);break;case 9:this.onLinesChanged(Q)&&(s=!0);break;case 10:this.onLinesDeleted(Q)&&(s=!0);break;case 11:this.onLinesInserted(Q)&&(s=!0);break;case 12:this.onRevealRangeRequest(Q)&&(s=!0);break;case 13:this.onScrollChanged(Q)&&(s=!0);break;case 15:this.onTokensChanged(Q)&&(s=!0);break;case 14:this.onThemeChanged(Q)&&(s=!0);break;case 16:this.onTokensColorsChanged(Q)&&(s=!0);break;case 17:this.onZonesChanged(Q)&&(s=!0);break;default:console.info("View received unknown event: "),console.info(Q)}}s&&(this._shouldRender=!0)}}class p extends q{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class re{static write(e,s){e.setAttribute("data-mprt",String(s))}static read(e){let s=e.getAttribute("data-mprt");return s===null?0:parseInt(s,10)}static collect(e,s){let y=[],P=0;for(;e&&e!==document.body&&e!==s;)e.nodeType===e.ELEMENT_NODE&&(y[P++]=this.read(e)),e=e.parentElement;let Q=new Uint8Array(P);for(let pe=0;pe<P;pe++)Q[pe]=y[P-pe-1];return Q}}class ne{constructor(e,s){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=s,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let y=this._viewLayout.getCurrentViewport();this.scrollTop=y.top,this.scrollLeft=y.left,this.viewportWidth=y.width,this.viewportHeight=y.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,s){return this._viewLayout.getVerticalOffsetForLineNumber(e,s)}getVerticalOffsetAfterLineNumber(e,s){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,s)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class ie extends ne{constructor(e,s,y){super(e,s),this._renderingContextBrand=void 0,this._viewLines=y}linesVisibleRangesForRange(e,s){return this._viewLines.linesVisibleRangesForRange(e,s)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class se{constructor(e,s,y){this.outsideRenderedLine=e,this.lineNumber=s,this.ranges=y}}class ce{static from(e){let s=new Array(e.length);for(let y=0,P=e.length;y<P;y++){let Q=e[y];s[y]=new ce(Q.left,Q.width)}return s}constructor(e,s){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(s)}toString(){return`[${this.left},${this.width}]`}}class be{constructor(e,s){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=s}toString(){return`[${this.left},${this.width}]`}static compare(e,s){return e.left-s.left}}class de{constructor(e,s){this.outsideRenderedLine=e,this.originalLeft=s,this.left=Math.round(this.originalLeft)}}class U{constructor(e,s){this.outsideRenderedLine=e,this.ranges=s}}class ue{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,s){e.selectNodeContents(s)}static _readClientRects(e,s,y,P,Q){let pe=this._createRange();try{return pe.setStart(e,s),pe.setEnd(y,P),pe.getClientRects()}catch(Se){return null}finally{this._detachRange(pe,Q)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(be.compare);let s=[],y=0,P=e[0];for(let Q=1,pe=e.length;Q<pe;Q++){let Se=e[Q];P.left+P.width+.9>=Se.left?P.width=Math.max(P.width,Se.left+Se.width-P.left):(s[y++]=P,P=Se)}return s[y++]=P,s}static _createHorizontalRangesFromClientRects(e,s,y){if(!e||e.length===0)return null;let P=[];for(let Q=0,pe=e.length;Q<pe;Q++){let Se=e[Q];P[Q]=new be(Math.max(0,(Se.left-s)/y),Se.width/y)}return this._mergeAdjacentRanges(P)}static readHorizontalRanges(e,s,y,P,Q,pe){let Se=e.children.length-1;if(0>Se)return null;if((s=Math.min(Se,Math.max(0,s)))===(P=Math.min(Se,Math.max(0,P)))&&y===Q&&y===0&&!e.children[s].firstChild){let st=e.children[s].getClientRects();return pe.markDidDomLayout(),this._createHorizontalRangesFromClientRects(st,pe.clientRectDeltaLeft,pe.clientRectScale)}s!==P&&P>0&&Q===0&&(P--,Q=1073741824);let Be=e.children[s].firstChild,it=e.children[P].firstChild;if(Be&&it||(!Be&&y===0&&s>0&&(Be=e.children[s-1].firstChild,y=1073741824),!it&&Q===0&&P>0&&(it=e.children[P-1].firstChild,Q=1073741824)),!Be||!it)return null;y=Math.min(Be.textContent.length,Math.max(0,y)),Q=Math.min(it.textContent.length,Math.max(0,Q));let Ge=this._readClientRects(Be,y,it,Q,pe.endNode);return pe.markDidDomLayout(),this._createHorizontalRangesFromClientRects(Ge,pe.clientRectDeltaLeft,pe.clientRectScale)}}var ve=t(2550),X=t(1557),ye=t(2321);let Ce=!!c.tY||!(c.IJ||h.isFirefox||h.isSafari),Ee=!0;class Ae{constructor(e,s){this.themeType=s;let y=e.options,P=y.get(48),Q=y.get(36);this.renderWhitespace=Q==="off"?y.get(94):"none",this.renderControlCharacters=y.get(89),this.spaceWidth=P.spaceWidth,this.middotWidth=P.middotWidth,this.wsmiddotWidth=P.wsmiddotWidth,this.useMonospaceOptimizations=P.isMonospace&&!y.get(31),this.canUseHalfwidthRightwardsArrow=P.canUseHalfwidthRightwardsArrow,this.lineHeight=y.get(64),this.stopRenderingLineAfter=y.get(112),this.fontLigatures=y.get(49)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Fe{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=(0,z.X)(e)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return!(!(0,ye.c3)(this._options.themeType)&&this._options.renderWhitespace!=="selection"||(this._isMaybeInvalid=!0,0))}renderLine(e,s,y,P){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;let Q=y.getViewLineRenderingData(e),pe=this._options,Se=ve.Kp.filter(Q.inlineDecorations,e,Q.minColumn,Q.maxColumn),Be=null;if((0,ye.c3)(pe.themeType)||this._options.renderWhitespace==="selection"){let Dt=y.selections;for(let Et of Dt){if(Et.endLineNumber<e||Et.startLineNumber>e)continue;let Vt=Et.startLineNumber===e?Et.startColumn:Q.minColumn,Ht=Et.endLineNumber===e?Et.endColumn:Q.maxColumn;Vt<Ht&&((0,ye.c3)(pe.themeType)&&Se.push(new ve.Kp(Vt,Ht,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(Be||(Be=[]),Be.push(new X.zG(Vt-1,Ht-1))))}}let it=new X.IJ(pe.useMonospaceOptimizations,pe.canUseHalfwidthRightwardsArrow,Q.content,Q.continuesWithWrappedLine,Q.isBasicASCII,Q.containsRTL,Q.minColumn-1,Q.tokens,Se,Q.tabSize,Q.startVisibleColumn,pe.spaceWidth,pe.middotWidth,pe.wsmiddotWidth,pe.stopRenderingLineAfter,pe.renderWhitespace,pe.renderControlCharacters,pe.fontLigatures!==k.n0.OFF,Be);if(this._renderedViewLine&&this._renderedViewLine.input.equals(it))return!1;P.appendString('<div style="top:'),P.appendString(String(s)),P.appendString("px;height:"),P.appendString(String(this._options.lineHeight)),P.appendString('px;" class="'),P.appendString(Fe.CLASS_NAME),P.appendString('">');let Ge=(0,X.d1)(it,P);P.appendString("</div>");let st=null;return Ee&&Ce&&Q.isBasicASCII&&pe.useMonospaceOptimizations&&Ge.containsForeignElements===0&&(st=new _e(this._renderedViewLine?this._renderedViewLine.domNode:null,it,Ge.characterMapping)),st||(st=ke(this._renderedViewLine?this._renderedViewLine.domNode:null,it,Ge.characterMapping,Ge.containsRTL,Ge.containsForeignElements)),this._renderedViewLine=st,!0}layoutLine(e,s){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(s),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof _e}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof _e?this._renderedViewLine.monospaceAssumptionsAreValid():Ee}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof _e&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,s,y,P){if(!this._renderedViewLine)return null;s=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,s)),y=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,y));let Q=this._renderedViewLine.input.stopRenderingLineAfter;if(Q!==-1&&s>Q+1&&y>Q+1)return new U(!0,[new be(this.getWidth(P),0)]);Q!==-1&&s>Q+1&&(s=Q+1),Q!==-1&&y>Q+1&&(y=Q+1);let pe=this._renderedViewLine.getVisibleRangesForRange(e,s,y,P);return pe&&pe.length>0?new U(!1,pe):null}getColumnOfNodeOffset(e,s,y){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,s,y):1}}Fe.CLASS_NAME="view-line";class _e{constructor(e,s,y){this._cachedWidth=-1,this.domNode=e,this.input=s;let P=Math.floor(s.lineContent.length/300);if(P>0){this._keyColumnPixelOffsetCache=new Float32Array(P);for(let Q=0;Q<P;Q++)this._keyColumnPixelOffsetCache[Q]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=y,this._charWidth=s.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){let s=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*s)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Ee;if(this.input.lineContent.length<300){let e=this.getWidth(null),s=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-s)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Ee=!1)}return Ee}toSlowRenderedLine(){return ke(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,s,y,P){let Q=this._getColumnPixelOffset(e,s,P),pe=this._getColumnPixelOffset(e,y,P);return[new be(Q,pe-Q)]}_getColumnPixelOffset(e,s,y){if(s<=300){let it=this._characterMapping.getHorizontalOffset(s);return this._charWidth*it}let P=Math.floor((s-1)/300)-1,Q=300*(P+1)+1,pe=-1;if(this._keyColumnPixelOffsetCache&&(pe=this._keyColumnPixelOffsetCache[P],pe===-1&&(pe=this._actualReadPixelOffset(e,Q,y),this._keyColumnPixelOffsetCache[P]=pe)),pe===-1){let it=this._characterMapping.getHorizontalOffset(s);return this._charWidth*it}let Se=this._characterMapping.getHorizontalOffset(Q),Be=this._characterMapping.getHorizontalOffset(s);return pe+this._charWidth*(Be-Se)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,s,y){if(!this.domNode)return-1;let P=this._characterMapping.getDomPosition(s),Q=ue.readHorizontalRanges(this._getReadingTarget(this.domNode),P.partIndex,P.charIndex,P.partIndex,P.charIndex,y);return Q&&Q.length!==0?Q[0].left:-1}getColumnOfNodeOffset(e,s,y){let P=s.textContent.length,Q=-1;for(;s;)s=s.previousSibling,Q++;return this._characterMapping.getColumn(new X.Nd(Q,y),P)}}class te{constructor(e,s,y,P,Q){if(this.domNode=e,this.input=s,this._characterMapping=y,this._isWhitespaceOnly=/^\s*$/.test(s.lineContent),this._containsForeignElements=Q,this._cachedWidth=-1,this._pixelOffsetCache=null,!P||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let pe=0,Se=this._characterMapping.length;pe<=Se;pe++)this._pixelOffsetCache[pe]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,s,y,P){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){let Q=this._readPixelOffset(this.domNode,e,s,P);if(Q===-1)return null;let pe=this._readPixelOffset(this.domNode,e,y,P);return pe===-1?null:[new be(Q,pe-Q)]}return this._readVisibleRangesForRange(this.domNode,e,s,y,P)}_readVisibleRangesForRange(e,s,y,P,Q){if(y===P){let pe=this._readPixelOffset(e,s,y,Q);return pe===-1?null:[new be(pe,0)]}return this._readRawVisibleRangesForRange(e,y,P,Q)}_readPixelOffset(e,s,y,P){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(P);let Q=this._getReadingTarget(e);return Q.firstChild?(P.markDidDomLayout(),Q.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){let Q=this._pixelOffsetCache[y];if(Q!==-1)return Q;let pe=this._actualReadPixelOffset(e,s,y,P);return this._pixelOffsetCache[y]=pe,pe}return this._actualReadPixelOffset(e,s,y,P)}_actualReadPixelOffset(e,s,y,P){if(this._characterMapping.length===0){let Be=ue.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,P);return Be&&Be.length!==0?Be[0].left:-1}if(y===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(P);let Q=this._characterMapping.getDomPosition(y),pe=ue.readHorizontalRanges(this._getReadingTarget(e),Q.partIndex,Q.charIndex,Q.partIndex,Q.charIndex,P);if(!pe||pe.length===0)return-1;let Se=pe[0].left;if(this.input.isBasicASCII){let Be=this._characterMapping.getHorizontalOffset(y),it=Math.round(this.input.spaceWidth*Be);if(Math.abs(it-Se)<=1)return it}return Se}_readRawVisibleRangesForRange(e,s,y,P){if(s===1&&y===this._characterMapping.length)return[new be(0,this.getWidth(P))];let Q=this._characterMapping.getDomPosition(s),pe=this._characterMapping.getDomPosition(y);return ue.readHorizontalRanges(this._getReadingTarget(e),Q.partIndex,Q.charIndex,pe.partIndex,pe.charIndex,P)}getColumnOfNodeOffset(e,s,y){let P=s.textContent.length,Q=-1;for(;s;)s=s.previousSibling,Q++;return this._characterMapping.getColumn(new X.Nd(Q,y),P)}}class Le extends te{_readVisibleRangesForRange(e,s,y,P,Q){let pe=super._readVisibleRangesForRange(e,s,y,P,Q);if(!pe||pe.length===0||y===P||y===1&&P===this._characterMapping.length)return pe;if(!this.input.containsRTL){let Se=this._readPixelOffset(e,s,P,Q);if(Se!==-1){let Be=pe[pe.length-1];Be.left<Se&&(Be.width=Se-Be.left)}}return pe}}let ke=h.isWebKit?function(Ct,e,s,y,P){return new Le(Ct,e,s,y,P)}:function(Ct,e,s,y,P){return new te(Ct,e,s,y,P)};var le,ee=t(187),me=t(4314),xe=t(7988),We=t(7128);class Ve{constructor(e=null){this.hitTarget=e,this.type=0}}class Ye{constructor(e,s,y){this.position=e,this.spanNode=s,this.injectedText=y,this.type=1}}(function(Ct){Ct.createFromDOMInfo=function(e,s,y){let P=e.getPositionFromDOMInfo(s,y);return P?new Ye(P,s,null):new Ve(s)}})(le||(le={}));class tt{constructor(e,s){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=s}}class Qe{static _deduceRage(e,s=null){return!s&&e?new me.e(e.lineNumber,e.column,e.lineNumber,e.column):s!=null?s:null}static createUnknown(e,s,y){return{type:0,element:e,mouseColumn:s,position:y,range:this._deduceRage(y)}}static createTextarea(e,s){return{type:1,element:e,mouseColumn:s,position:null,range:null}}static createMargin(e,s,y,P,Q,pe){return{type:e,element:s,mouseColumn:y,position:P,range:Q,detail:pe}}static createViewZone(e,s,y,P,Q){return{type:e,element:s,mouseColumn:y,position:P,range:this._deduceRage(P),detail:Q}}static createContentText(e,s,y,P,Q){return{type:6,element:e,mouseColumn:s,position:y,range:this._deduceRage(y,P),detail:Q}}static createContentEmpty(e,s,y,P){return{type:7,element:e,mouseColumn:s,position:y,range:this._deduceRage(y),detail:P}}static createContentWidget(e,s,y){return{type:9,element:e,mouseColumn:s,position:null,range:null,detail:y}}static createScrollbar(e,s,y){return{type:11,element:e,mouseColumn:s,position:y,range:this._deduceRage(y)}}static createOverlayWidget(e,s,y){return{type:12,element:e,mouseColumn:s,position:null,range:null,detail:y}}static createOutsideEditor(e,s,y,P){return{type:13,element:null,mouseColumn:e,position:s,range:this._deduceRage(s),outsidePosition:y,outsideDistance:P}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class bt{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class ht{constructor(e,s,y){this.viewModel=e.viewModel;let P=e.configuration.options;this.layoutInfo=P.get(139),this.viewDomNode=s.viewDomNode,this.lineHeight=P.get(64),this.stickyTabStops=P.get(111),this.typicalHalfwidthCharacterWidth=P.get(48).typicalHalfwidthCharacterWidth,this.lastRenderData=y,this._context=e,this._viewHelper=s}getZoneAtCoord(e){return ht.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,s){let y=e.viewLayout.getWhitespaceAtVerticalOffset(s);if(y){let P=y.verticalOffset+y.height/2,Q=e.viewModel.getLineCount(),pe,Se=null,Be=null;return y.afterLineNumber!==Q&&(Be=new ee.L(y.afterLineNumber+1,1)),y.afterLineNumber>0&&(Se=new ee.L(y.afterLineNumber,e.viewModel.getLineMaxColumn(y.afterLineNumber))),pe=Be===null?Se:Se===null?Be:s<P?Se:Be,{viewZoneId:y.id,afterLineNumber:y.afterLineNumber,positionBefore:Se,positionAfter:Be,position:pe}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){let P=this._context.viewModel.getLineCount(),Q=this._context.viewModel.getLineMaxColumn(P);return{range:new me.e(P,Q,P,Q),isAfterLines:!0}}let s=this._context.viewLayout.getLineNumberAtVerticalOffset(e),y=this._context.viewModel.getLineMaxColumn(s);return{range:new me.e(s,1,s,y),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,s){return ht._findAttribute(e,s,this._viewHelper.viewDomNode)}static _findAttribute(e,s,y){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(s))return e.getAttribute(s);if(e===y)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,s){return this._viewHelper.visibleRangeForPosition(e,s)}getPositionFromDOMInfo(e,s){return this._viewHelper.getPositionFromDOMInfo(e,s)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class xt{constructor(e,s,y,P){this.editorPos=s,this.pos=y,this.relativePos=P,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Lt._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class Qt extends xt{constructor(e,s,y,P,Q){super(e,s,y,P),this._ctx=e,Q?(this.target=Q,this.targetPath=re.collect(Q,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?xe.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Qe.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Qe.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,s,y,P){return Qe.createMargin(e,this.target,this._getMouseColumn(s),s,y,P)}fulfillViewZone(e,s,y){return Qe.createViewZone(e,this.target,this._getMouseColumn(s),s,y)}fulfillContentText(e,s,y){return Qe.createContentText(this.target,this._getMouseColumn(e),e,s,y)}fulfillContentEmpty(e,s){return Qe.createContentEmpty(this.target,this._getMouseColumn(e),e,s)}fulfillContentWidget(e){return Qe.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Qe.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Qe.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new Qt(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}let At={isAfterLines:!0};function mi(Ct){return{isAfterLines:!1,horizontalDistanceToText:Ct}}class Lt{constructor(e,s){this._context=e,this._viewHelper=s}mouseTargetIsWidget(e){let s=e.target,y=re.collect(s,this._viewHelper.viewDomNode);return!(!bt.isChildOfContentWidgets(y)&&!bt.isChildOfOverflowingContentWidgets(y)&&!bt.isChildOfOverlayWidgets(y))}createMouseTarget(e,s,y,P,Q){let pe=new ht(this._context,this._viewHelper,e),Se=new Qt(pe,s,y,P,Q);try{let Be=Lt._createMouseTarget(pe,Se,!1);if(Be.type===6&&pe.stickyTabStops&&Be.position!==null){let it=Lt._snapToSoftTabBoundary(Be.position,pe.viewModel),Ge=me.e.fromPositions(it,it).plusRange(Be.range);return Se.fulfillContentText(it,Ge,Be.detail)}return Be}catch(Be){return Se.fulfillUnknown()}}static _createMouseTarget(e,s,y){if(s.target===null){if(y)return s.fulfillUnknown();let pe=Lt._doHitTest(e,s);return pe.type===1?Lt.createMouseTargetFromHitTestPosition(e,s,pe.spanNode,pe.position,pe.injectedText):this._createMouseTarget(e,s.withTarget(pe.hitTarget),!0)}let P=s,Q=null;return Q=Q||Lt._hitTestContentWidget(e,P),Q=Q||Lt._hitTestOverlayWidget(e,P),Q=Q||Lt._hitTestMinimap(e,P),Q=Q||Lt._hitTestScrollbarSlider(e,P),Q=Q||Lt._hitTestViewZone(e,P),Q=Q||Lt._hitTestMargin(e,P),Q=Q||Lt._hitTestViewCursor(e,P),Q=Q||Lt._hitTestTextArea(e,P),Q=Q||Lt._hitTestViewLines(e,P,y),Q=Q||Lt._hitTestScrollbar(e,P),Q||s.fulfillUnknown()}static _hitTestContentWidget(e,s){if(bt.isChildOfContentWidgets(s.targetPath)||bt.isChildOfOverflowingContentWidgets(s.targetPath)){let y=e.findAttribute(s.target,"widgetId");return y?s.fulfillContentWidget(y):s.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,s){if(bt.isChildOfOverlayWidgets(s.targetPath)){let y=e.findAttribute(s.target,"widgetId");return y?s.fulfillOverlayWidget(y):s.fulfillUnknown()}return null}static _hitTestViewCursor(e,s){if(s.target){let y=e.lastRenderData.lastViewCursorsRenderData;for(let P of y)if(s.target===P.domNode)return s.fulfillContentText(P.position,null,{mightBeForeignElement:!1,injectedText:null})}if(s.isInContentArea){let y=e.lastRenderData.lastViewCursorsRenderData,P=s.mouseContentHorizontalOffset,Q=s.mouseVerticalOffset;for(let pe of y){if(P<pe.contentLeft||P>pe.contentLeft+pe.width)continue;let Se=e.getVerticalOffsetForLineNumber(pe.position.lineNumber);if(Se<=Q&&Q<=Se+pe.height)return s.fulfillContentText(pe.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,s){let y=e.getZoneAtCoord(s.mouseVerticalOffset);if(y){let P=s.isInContentArea?8:5;return s.fulfillViewZone(P,y.position,y)}return null}static _hitTestTextArea(e,s){return bt.isTextArea(s.targetPath)?e.lastRenderData.lastTextareaPosition?s.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):s.fulfillTextarea():null}static _hitTestMargin(e,s){if(s.isInMarginArea){let y=e.getFullLineRangeAtCoord(s.mouseVerticalOffset),P=y.range.getStartPosition(),Q=Math.abs(s.relativePos.x),pe={isAfterLines:y.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:Q};return Q-=e.layoutInfo.glyphMarginLeft,Q<=e.layoutInfo.glyphMarginWidth?s.fulfillMargin(2,P,y.range,pe):(Q-=e.layoutInfo.glyphMarginWidth,Q<=e.layoutInfo.lineNumbersWidth?s.fulfillMargin(3,P,y.range,pe):(Q-=e.layoutInfo.lineNumbersWidth,s.fulfillMargin(4,P,y.range,pe)))}return null}static _hitTestViewLines(e,s,y){if(!bt.isChildOfViewLines(s.targetPath))return null;if(e.isInTopPadding(s.mouseVerticalOffset))return s.fulfillContentEmpty(new ee.L(1,1),At);if(e.isAfterLines(s.mouseVerticalOffset)||e.isInBottomPadding(s.mouseVerticalOffset)){let Q=e.viewModel.getLineCount(),pe=e.viewModel.getLineMaxColumn(Q);return s.fulfillContentEmpty(new ee.L(Q,pe),At)}if(y){if(bt.isStrictChildOfViewLines(s.targetPath)){let Q=e.getLineNumberAtVerticalOffset(s.mouseVerticalOffset);if(e.viewModel.getLineLength(Q)===0){let Se=e.getLineWidth(Q),Be=mi(s.mouseContentHorizontalOffset-Se);return s.fulfillContentEmpty(new ee.L(Q,1),Be)}let pe=e.getLineWidth(Q);if(s.mouseContentHorizontalOffset>=pe){let Se=mi(s.mouseContentHorizontalOffset-pe),Be=new ee.L(Q,e.viewModel.getLineMaxColumn(Q));return s.fulfillContentEmpty(Be,Se)}}return s.fulfillUnknown()}let P=Lt._doHitTest(e,s);return P.type===1?Lt.createMouseTargetFromHitTestPosition(e,s,P.spanNode,P.position,P.injectedText):this._createMouseTarget(e,s.withTarget(P.hitTarget),!0)}static _hitTestMinimap(e,s){if(bt.isChildOfMinimap(s.targetPath)){let y=e.getLineNumberAtVerticalOffset(s.mouseVerticalOffset),P=e.viewModel.getLineMaxColumn(y);return s.fulfillScrollbar(new ee.L(y,P))}return null}static _hitTestScrollbarSlider(e,s){if(bt.isChildOfScrollableElement(s.targetPath)&&s.target&&s.target.nodeType===1){let y=s.target.className;if(y&&/\b(slider|scrollbar)\b/.test(y)){let P=e.getLineNumberAtVerticalOffset(s.mouseVerticalOffset),Q=e.viewModel.getLineMaxColumn(P);return s.fulfillScrollbar(new ee.L(P,Q))}}return null}static _hitTestScrollbar(e,s){if(bt.isChildOfScrollableElement(s.targetPath)){let y=e.getLineNumberAtVerticalOffset(s.mouseVerticalOffset),P=e.viewModel.getLineMaxColumn(y);return s.fulfillScrollbar(new ee.L(y,P))}return null}getMouseColumn(e){let s=this._context.configuration.options,y=s.get(139),P=this._context.viewLayout.getCurrentScrollLeft()+e.x-y.contentLeft;return Lt._getMouseColumn(P,s.get(48).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,s){return e<0?1:Math.round(e/s)+1}static createMouseTargetFromHitTestPosition(e,s,y,P,Q){let pe=P.lineNumber,Se=P.column,Be=e.getLineWidth(pe);if(s.mouseContentHorizontalOffset>Be){let Ut=mi(s.mouseContentHorizontalOffset-Be);return s.fulfillContentEmpty(P,Ut)}let it=e.visibleRangeForPosition(pe,Se);if(!it)return s.fulfillUnknown(P);let Ge=it.left;if(Math.abs(s.mouseContentHorizontalOffset-Ge)<1)return s.fulfillContentText(P,null,{mightBeForeignElement:!!Q,injectedText:Q});let st=[];if(st.push({offset:it.left,column:Se}),Se>1){let Ut=e.visibleRangeForPosition(pe,Se-1);Ut&&st.push({offset:Ut.left,column:Se-1})}if(Se<e.viewModel.getLineMaxColumn(pe)){let Ut=e.visibleRangeForPosition(pe,Se+1);Ut&&st.push({offset:Ut.left,column:Se+1})}st.sort((Ut,ui)=>Ut.offset-ui.offset);let Dt=s.pos.toClientCoordinates(),Et=y.getBoundingClientRect(),Vt=Et.left<=Dt.clientX&&Dt.clientX<=Et.right,Ht=null;for(let Ut=1;Ut<st.length;Ut++){let ui=st[Ut-1],gi=st[Ut];if(ui.offset<=s.mouseContentHorizontalOffset&&s.mouseContentHorizontalOffset<=gi.offset){Ht=new me.e(pe,ui.column,pe,gi.column),P=Math.abs(ui.offset-s.mouseContentHorizontalOffset)<Math.abs(gi.offset-s.mouseContentHorizontalOffset)?new ee.L(pe,ui.column):new ee.L(pe,gi.column);break}}return s.fulfillContentText(P,Ht,{mightBeForeignElement:!Vt||!!Q,injectedText:Q})}static _doHitTestWithCaretRangeFromPoint(e,s){let y=e.getLineNumberAtVerticalOffset(s.mouseVerticalOffset),P=e.getVerticalOffsetForLineNumber(y),Q=P+e.lineHeight;if(!(y===e.viewModel.getLineCount()&&s.mouseVerticalOffset>Q)){let pe=Math.floor((P+Q)/2),Se=s.pos.y+(pe-s.mouseVerticalOffset);Se<=s.editorPos.y&&(Se=s.editorPos.y+1),Se>=s.editorPos.y+s.editorPos.height&&(Se=s.editorPos.y+s.editorPos.height-1);let Be=new fe.YN(s.pos.x,Se),it=this._actualDoHitTestWithCaretRangeFromPoint(e,Be.toClientCoordinates());if(it.type===1)return it}return this._actualDoHitTestWithCaretRangeFromPoint(e,s.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,s){let y=x.Ay(e.viewDomNode),P;if(P=y?y.caretRangeFromPoint===void 0?function(pe,Se,Be){let it=document.createRange(),Ge=pe.elementFromPoint(Se,Be);if(Ge!==null){for(;Ge&&Ge.firstChild&&Ge.firstChild.nodeType!==Ge.firstChild.TEXT_NODE&&Ge.lastChild&&Ge.lastChild.firstChild;)Ge=Ge.lastChild;let st=Ge.getBoundingClientRect(),Dt=`${window.getComputedStyle(Ge,null).getPropertyValue("font-style")} ${window.getComputedStyle(Ge,null).getPropertyValue("font-variant")} ${window.getComputedStyle(Ge,null).getPropertyValue("font-weight")} ${window.getComputedStyle(Ge,null).getPropertyValue("font-size")}/${window.getComputedStyle(Ge,null).getPropertyValue("line-height")} ${window.getComputedStyle(Ge,null).getPropertyValue("font-family")}`,Et=Ge.innerText,Vt,Ht=st.left,Ut=0;if(Se>st.left+st.width)Ut=Et.length;else{let ui=ct.getInstance();for(let gi=0;gi<Et.length+1;gi++){if(Vt=ui.getCharWidth(Et.charAt(gi),Dt)/2,Ht+=Vt,Se<Ht){Ut=gi;break}Ht+=Vt}}it.setStart(Ge.firstChild,Ut),it.setEnd(Ge.firstChild,Ut)}return it}(y,s.clientX,s.clientY):y.caretRangeFromPoint(s.clientX,s.clientY):document.caretRangeFromPoint(s.clientX,s.clientY),!P||!P.startContainer)return new Ve;let Q=P.startContainer;if(Q.nodeType===Q.TEXT_NODE){let pe=Q.parentNode,Se=pe?pe.parentNode:null,Be=Se?Se.parentNode:null;return(Be&&Be.nodeType===Be.ELEMENT_NODE?Be.className:null)===Fe.CLASS_NAME?le.createFromDOMInfo(e,pe,P.startOffset):new Ve(Q.parentNode)}if(Q.nodeType===Q.ELEMENT_NODE){let pe=Q.parentNode,Se=pe?pe.parentNode:null;return(Se&&Se.nodeType===Se.ELEMENT_NODE?Se.className:null)===Fe.CLASS_NAME?le.createFromDOMInfo(e,Q,Q.textContent.length):new Ve(Q)}return new Ve}static _doHitTestWithCaretPositionFromPoint(e,s){let y=document.caretPositionFromPoint(s.clientX,s.clientY);if(y.offsetNode.nodeType===y.offsetNode.TEXT_NODE){let P=y.offsetNode.parentNode,Q=P?P.parentNode:null,pe=Q?Q.parentNode:null;return(pe&&pe.nodeType===pe.ELEMENT_NODE?pe.className:null)===Fe.CLASS_NAME?le.createFromDOMInfo(e,y.offsetNode.parentNode,y.offset):new Ve(y.offsetNode.parentNode)}if(y.offsetNode.nodeType===y.offsetNode.ELEMENT_NODE){let P=y.offsetNode.parentNode,Q=P&&P.nodeType===P.ELEMENT_NODE?P.className:null,pe=P?P.parentNode:null,Se=pe&&pe.nodeType===pe.ELEMENT_NODE?pe.className:null;if(Q===Fe.CLASS_NAME){let Be=y.offsetNode.childNodes[Math.min(y.offset,y.offsetNode.childNodes.length-1)];if(Be)return le.createFromDOMInfo(e,Be,0)}else if(Se===Fe.CLASS_NAME)return le.createFromDOMInfo(e,y.offsetNode,0)}return new Ve(y.offsetNode)}static _snapToSoftTabBoundary(e,s){let y=s.getLineContent(e.lineNumber),{tabSize:P}=s.model.getOptions(),Q=We.l.atomicPosition(y,e.column-1,P,2);return Q!==-1?new ee.L(e.lineNumber,Q+1):e}static _doHitTest(e,s){let y=new Ve;if(typeof document.caretRangeFromPoint=="function"?y=this._doHitTestWithCaretRangeFromPoint(e,s):document.caretPositionFromPoint&&(y=this._doHitTestWithCaretPositionFromPoint(e,s.pos.toClientCoordinates())),y.type===1){let P=e.viewModel.getInjectedTextAt(y.position),Q=e.viewModel.normalizePosition(y.position,2);!P&&Q.equals(y.position)||(y=new Ye(Q,y.spanNode,P))}return y}}class ct{static getInstance(){return ct._INSTANCE||(ct._INSTANCE=new ct),ct._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,s){let y=e+s;if(this._cache[y])return this._cache[y];let P=this._canvas.getContext("2d");P.font=s;let Q=P.measureText(e).width;return this._cache[y]=Q,Q}}ct._INSTANCE=null;var Kt=t(9802);class pi extends q{constructor(e,s,y){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=s,this.viewHelper=y,this.mouseTargetFactory=new Lt(this._context,y),this._mouseDownOperation=this._register(new li(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(pe,Se)=>this._createMouseTarget(pe,Se),pe=>this._getMouseColumn(pe))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(139).height;let P=new fe.N5(this.viewHelper.viewDomNode);this._register(P.onContextMenu(this.viewHelper.viewDomNode,pe=>this._onContextMenu(pe,!0))),this._register(P.onMouseMove(this.viewHelper.viewDomNode,pe=>{this._onMouseMove(pe),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=x.nm(document,"mousemove",Se=>{this.viewHelper.viewDomNode.contains(Se.target)||this._onMouseLeave(new fe.gy(Se,!1,this.viewHelper.viewDomNode))}))})),this._register(P.onMouseUp(this.viewHelper.viewDomNode,pe=>this._onMouseUp(pe))),this._register(P.onMouseLeave(this.viewHelper.viewDomNode,pe=>this._onMouseLeave(pe)));let Q=0;this._register(P.onPointerDown(this.viewHelper.viewDomNode,(pe,Se)=>{Q=Se})),this._register(x.nm(this.viewHelper.viewDomNode,x.tw.POINTER_UP,pe=>{this._mouseDownOperation.onPointerUp()})),this._register(P.onMouseDown(this.viewHelper.viewDomNode,pe=>this._onMouseDown(pe,Q))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){let e=Kt.Io.INSTANCE,s=0,y=R.C.getZoomLevel(),P=!1,Q=0;function pe(Se){return c.dz?(Se.metaKey||Se.ctrlKey)&&!Se.shiftKey&&!Se.altKey:Se.ctrlKey&&!Se.metaKey&&!Se.shiftKey&&!Se.altKey}this._register(x.nm(this.viewHelper.viewDomNode,x.tw.MOUSE_WHEEL,Se=>{if(this.viewController.emitMouseWheel(Se),!this._context.configuration.options.get(73))return;let Be=new oe.q(Se);if(e.acceptStandardWheelEvent(Be),e.isPhysicalMouseWheel()){if(pe(Se)){let it=R.C.getZoomLevel(),Ge=Be.deltaY>0?1:-1;R.C.setZoomLevel(it+Ge),Be.preventDefault(),Be.stopPropagation()}}else Date.now()-s>50&&(y=R.C.getZoomLevel(),P=pe(Se),Q=0),s=Date.now(),Q+=Be.deltaY,P&&(R.C.setZoomLevel(y+Q/5),Be.preventDefault(),Be.stopPropagation())},{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(139)){let s=this._context.configuration.options.get(139).height;this._height!==s&&(this._height=s,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,s){let y=new fe.rU(e,s).toPageCoordinates(),P=(0,fe.kG)(this.viewHelper.viewDomNode);if(y.y<P.y||y.y>P.y+P.height||y.x<P.x||y.x>P.x+P.width)return null;let Q=(0,fe.Pp)(this.viewHelper.viewDomNode,P,y);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),P,y,Q,null)}_createMouseTarget(e,s){let y=e.target;if(!this.viewHelper.viewDomNode.contains(y)){let P=x.Ay(this.viewHelper.viewDomNode);P&&(y=P.elementsFromPoint(e.posx,e.posy).find(Q=>this.viewHelper.viewDomNode.contains(Q)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,s?y:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,s){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,s)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,s){let y=this._createMouseTarget(e,!0),P=y.type===6||y.type===7,Q=y.type===2||y.type===3||y.type===4,pe=y.type===3,Se=this._context.configuration.options.get(104),Be=y.type===8||y.type===5,it=y.type===9,Ge=e.leftButton||e.middleButton;c.dz&&e.leftButton&&e.ctrlKey&&(Ge=!1);let st=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(Ge&&(P||pe&&Se))st(),this._mouseDownOperation.start(y.type,e,s);else if(Q)e.preventDefault();else if(Be){let Dt=y.detail;Ge&&this.viewHelper.shouldSuppressMouseDownOnViewZone(Dt.viewZoneId)&&(st(),this._mouseDownOperation.start(y.type,e,s),e.preventDefault())}else it&&this.viewHelper.shouldSuppressMouseDownOnWidget(y.detail)&&(st(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:y})}}class li extends d.JT{constructor(e,s,y,P,Q,pe){super(),this._context=e,this._viewController=s,this._viewHelper=y,this._mouseTargetFactory=P,this._createMouseTarget=Q,this._getMouseColumn=pe,this._mouseMoveMonitor=this._register(new fe.AL(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new Wi(this._context,this._viewHelper,this._mouseTargetFactory,(Se,Be,it)=>this._dispatchMouse(Se,Be,it))),this._mouseState=new Xi,this._currentSelection=new H.Y(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);let s=this._findMousePosition(e,!1);s&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:s}):s.type!==13||s.outsidePosition!=="above"&&s.outsidePosition!=="below"?(this._topBottomDragScrolling.stop(),this._dispatchMouse(s,!0,1)):this._topBottomDragScrolling.start(s,e))}start(e,s,y){this._lastMouseEvent=s,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(s),this._mouseState.setModifiers(s);let P=this._findMousePosition(s,!0);if(!P||!P.position)return;this._mouseState.trySetCount(s.detail,P.position),s.detail=this._mouseState.count;let Q=this._context.configuration.options;if(!Q.get(87)&&Q.get(33)&&!Q.get(20)&&!this._mouseState.altKey&&s.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&P.type===6&&P.position&&this._currentSelection.containsPosition(P.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,y,s.buttons,pe=>this._onMouseDownThenMove(pe),pe=>{let Se=this._findMousePosition(this._lastMouseEvent,!1);pe&&pe instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:Se?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});this._mouseState.isDragAndDrop=!1,this._dispatchMouse(P,s.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,y,s.buttons,pe=>this._onMouseDownThenMove(pe),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){let s=e.editorPos,y=this._context.viewModel,P=this._context.viewLayout,Q=this._getMouseColumn(e);if(e.posy<s.y){let Se=s.y-e.posy,Be=Math.max(P.getCurrentScrollTop()-Se,0),it=ht.getZoneAtCoord(this._context,Be);if(it){let st=this._helpPositionJumpOverViewZone(it);if(st)return Qe.createOutsideEditor(Q,st,"above",Se)}let Ge=P.getLineNumberAtVerticalOffset(Be);return Qe.createOutsideEditor(Q,new ee.L(Ge,1),"above",Se)}if(e.posy>s.y+s.height){let Se=e.posy-s.y-s.height,Be=P.getCurrentScrollTop()+e.relativePos.y,it=ht.getZoneAtCoord(this._context,Be);if(it){let st=this._helpPositionJumpOverViewZone(it);if(st)return Qe.createOutsideEditor(Q,st,"below",Se)}let Ge=P.getLineNumberAtVerticalOffset(Be);return Qe.createOutsideEditor(Q,new ee.L(Ge,y.getLineMaxColumn(Ge)),"below",Se)}let pe=P.getLineNumberAtVerticalOffset(P.getCurrentScrollTop()+e.relativePos.y);if(e.posx<s.x){let Se=s.x-e.posx;return Qe.createOutsideEditor(Q,new ee.L(pe,1),"left",Se)}if(e.posx>s.x+s.width){let Se=e.posx-s.x-s.width;return Qe.createOutsideEditor(Q,new ee.L(pe,y.getLineMaxColumn(pe)),"right",Se)}return null}_findMousePosition(e,s){let y=this._getPositionOutsideEditor(e);if(y)return y;let P=this._createMouseTarget(e,s);if(!P.position)return null;if(P.type===8||P.type===5){let Q=this._helpPositionJumpOverViewZone(P.detail);if(Q)return Qe.createViewZone(P.type,P.element,P.mouseColumn,Q,P.detail)}return P}_helpPositionJumpOverViewZone(e){let s=new ee.L(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),y=e.positionBefore,P=e.positionAfter;return y&&P?y.isBefore(s)?y:P:null}_dispatchMouse(e,s,y){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:y,inSelectionMode:s,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class Wi extends d.JT{constructor(e,s,y,P){super(),this._context=e,this._viewHelper=s,this._mouseTargetFactory=y,this._dispatchMouse=P,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,s){this._operation?this._operation.setPosition(e,s):this._operation=new Vi(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,s)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class Vi extends d.JT{constructor(e,s,y,P,Q,pe){super(),this._context=e,this._viewHelper=s,this._mouseTargetFactory=y,this._dispatchMouse=P,this._position=Q,this._mouseEvent=pe,this._lastTime=Date.now(),this._animationFrameDisposable=x.jL(()=>this._execute())}dispose(){this._animationFrameDisposable.dispose()}setPosition(e,s){this._position=e,this._mouseEvent=s}_tick(){let e=Date.now(),s=e-this._lastTime;return this._lastTime=e,s}_getScrollSpeed(){let e=this._context.configuration.options.get(64),s=this._context.configuration.options.get(139).height/e,y=this._position.outsideDistance/e;return y<=1.5?Math.max(30,s*(1+y)):y<=3?Math.max(60,s*(2+y)):Math.max(200,s*(7+y))}_execute(){let e=this._context.configuration.options.get(64),s=this._getScrollSpeed()*(this._tick()/1e3)*e,y=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,y),this._viewHelper.renderNow();let P=this._context.viewLayout.getLinesViewportData(),Q=this._position.outsidePosition==="above"?P.startLineNumber:P.endLineNumber,pe;{let Se=(0,fe.kG)(this._viewHelper.viewDomNode),Be=this._context.configuration.options.get(139).horizontalScrollbarHeight,it=new fe.YN(this._mouseEvent.pos.x,Se.y+Se.height-Be-.1),Ge=(0,fe.Pp)(this._viewHelper.viewDomNode,Se,it);pe=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),Se,it,Ge,null)}pe.position&&pe.position.lineNumber===Q||(pe=this._position.outsidePosition==="above"?Qe.createOutsideEditor(this._position.mouseColumn,new ee.L(Q,1),"above",this._position.outsideDistance):Qe.createOutsideEditor(this._position.mouseColumn,new ee.L(Q,this._context.viewModel.getLineMaxColumn(Q)),"below",this._position.outsideDistance)),this._dispatchMouse(pe,!0,2),this._animationFrameDisposable=x.jL(()=>this._execute())}}class Xi{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,s){let y=new Date().getTime();y-this._lastSetMouseDownCountTime>Xi.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=y,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(s)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=s,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}Xi.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var en=t(161),rn=t(5715);class tn extends pi{constructor(e,s,y){super(e,s,y),this._register(J.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(x.nm(this.viewHelper.linesContentDomNode,J.t.Tap,Q=>this.onTap(Q))),this._register(x.nm(this.viewHelper.linesContentDomNode,J.t.Change,Q=>this.onChange(Q))),this._register(x.nm(this.viewHelper.linesContentDomNode,J.t.Contextmenu,Q=>this._onContextMenu(new fe.gy(Q,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(x.nm(this.viewHelper.linesContentDomNode,"pointerdown",Q=>{let pe=Q.pointerType;this._lastPointerType=pe!=="mouse"?pe==="touch"?"touch":"pen":"mouse"}));let P=new fe.tC(this.viewHelper.viewDomNode);this._register(P.onPointerMove(this.viewHelper.viewDomNode,Q=>this._onMouseMove(Q))),this._register(P.onPointerUp(this.viewHelper.viewDomNode,Q=>this._onMouseUp(Q))),this._register(P.onPointerLeave(this.viewHelper.viewDomNode,Q=>this._onMouseLeave(Q))),this._register(P.onPointerDown(this.viewHelper.viewDomNode,(Q,pe)=>this._onMouseDown(Q,pe)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();let s=this._createMouseTarget(new fe.gy(e,!1,this.viewHelper.viewDomNode),!1);s.position&&this.viewController.dispatchMouse({position:s.position,mouseColumn:s.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:s.type===6&&s.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,s){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,s)}}class yn extends pi{constructor(e,s,y){super(e,s,y),this._register(J.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(x.nm(this.viewHelper.linesContentDomNode,J.t.Tap,P=>this.onTap(P))),this._register(x.nm(this.viewHelper.linesContentDomNode,J.t.Change,P=>this.onChange(P))),this._register(x.nm(this.viewHelper.linesContentDomNode,J.t.Contextmenu,P=>this._onContextMenu(new fe.gy(P,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();let s=this._createMouseTarget(new fe.gy(e,!1,this.viewHelper.viewDomNode),!1);if(s.position){let y=document.createEvent("CustomEvent");y.initEvent(rn.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(y),this.viewController.moveTo(s.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class sn extends d.JT{constructor(e,s,y){super(),c.gn&&en.D.pointerEvents?this.handler=this._register(new tn(e,s,y)):window.TouchEvent?this.handler=this._register(new yn(e,s,y)):this.handler=this._register(new pi(e,s,y))}getTargetAtClientPoint(e,s){return this.handler.getTargetAtClientPoint(e,s)}}var ci=t(7295),Xt=t(2136),kt=t(5887);class It extends q{}var ft=t(7781),Mt=t(8625);class jt extends It{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new ee.L(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(64);let s=e.get(65);this._renderLineNumbers=s.renderType,this._renderCustomLineNumbers=s.renderFn,this._renderFinalNewline=e.get(90);let y=e.get(139);this._lineNumbersLeft=y.lineNumbersLeft,this._lineNumbersWidth=y.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let s=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(s);let y=!1;return this._activeLineNumber!==s.lineNumber&&(this._activeLineNumber=s.lineNumber,y=!0),this._renderLineNumbers!==2&&this._renderLineNumbers!==3||(y=!0),y}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){let s=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ee.L(e,1));if(s.column!==1)return"";let y=s.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(y);if(this._renderLineNumbers===2){let P=Math.abs(this._lastCursorModelPosition.lineNumber-y);return P===0?'<span class="relative-current-line-number">'+y+"</span>":String(P)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===y||y%10==0?String(y):"":String(y)}prepareRender(e){if(this._renderLineNumbers===0)return void(this._renderResult=null);let s=c.IJ?this._lineHeight%2==0?" lh-even":" lh-odd":"",y=e.visibleRange.startLineNumber,P=e.visibleRange.endLineNumber,Q=this._context.viewModel.getLineCount(),pe=[];for(let Se=y;Se<=P;Se++){let Be=Se-y,it=this._getLineRenderLineNumber(Se);if(!it){pe[Be]="";continue}let Ge="";if(Se===Q&&this._context.viewModel.getLineLength(Se)===0){if(this._renderFinalNewline==="off"){pe[Be]="";continue}this._renderFinalNewline==="dimmed"&&(Ge=" dimmed-line-number")}Se===this._activeLineNumber&&(Ge=" active-line-number"),pe[Be]=`<div class="${jt.CLASS_NAME}${s}${Ge}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${it}</div>`}this._renderResult=pe}render(e,s){if(!this._renderResult)return"";let y=s-e;return y<0||y>=this._renderResult.length?"":this._renderResult[y]}}jt.CLASS_NAME="line-numbers",(0,ft.Ic)((Ct,e)=>{let s=Ct.getColor(Mt.hw),y=Ct.getColor(Mt.Bj);y?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${y}; }`):s&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${s.transparent(.4)}; }`)});class di extends p{constructor(e){super(e);let s=this._context.configuration.options,y=s.get(139);this._canUseLayerHinting=!s.get(30),this._contentLeft=y.contentLeft,this._glyphMarginLeft=y.glyphMarginLeft,this._glyphMarginWidth=y.glyphMarginWidth,this._domNode=(0,z.X)(document.createElement("div")),this._domNode.setClassName(di.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,z.X)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(di.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(139);return this._canUseLayerHinting=!s.get(30),this._contentLeft=y.contentLeft,this._glyphMarginLeft=y.glyphMarginLeft,this._glyphMarginWidth=y.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let s=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-s);let y=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(y),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(y)}}di.CLASS_NAME="glyph-margin",di.OUTER_CLASS_NAME="margin";var fi=t(4929),Si=t(6542),Ri=t(6887),Wt=t(1264),Te=t(7173);class Ze{constructor(e,s,y,P,Q){this._context=e,this.modelLineNumber=s,this.distanceToModelLineStart=y,this.widthOfHiddenLineTextBefore=P,this.distanceToModelLineEnd=Q,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){let s=new ee.L(this.modelLineNumber,this.distanceToModelLineStart+1),y=new ee.L(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(y),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}let rt=h.isFirefox;class yt extends p{constructor(e,s,y){super(e),this._primaryCursorPosition=new ee.L(1,1),this._primaryCursorVisibleRange=null,this._viewController=s,this._visibleRangeProvider=y,this._scrollLeft=0,this._scrollTop=0;let P=this._context.configuration.options,Q=P.get(139);this._setAccessibilityOptions(P),this._contentLeft=Q.contentLeft,this._contentWidth=Q.contentWidth,this._contentHeight=Q.height,this._fontInfo=P.get(48),this._lineHeight=P.get(64),this._emptySelectionClipboard=P.get(35),this._copyWithSyntaxHighlighting=P.get(23),this._visibleTextArea=null,this._selections=[new H.Y(1,1,1,1)],this._modelSelections=[new H.Y(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,z.X)(document.createElement("textarea")),re.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Si.S}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:pe}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=pe*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(P)),this.textArea.setAttribute("tabindex",String(P.get(119))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",A.NC("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,z.X)(document.createElement("div")),this.textAreaCover.setPosition("absolute");let Se={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:Ge=>this._context.viewModel.getLineMaxColumn(Ge),getValueInRange:(Ge,st)=>this._context.viewModel.getValueInRange(Ge,st),getValueLengthInRange:(Ge,st)=>this._context.viewModel.getValueLengthInRange(Ge,st),modifyPosition:(Ge,st)=>this._context.viewModel.modifyPosition(Ge,st)},Be={getDataToCopy:()=>{let Ge=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,c.ED),st=this._context.viewModel.model.getEOL(),Dt=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),Et=Array.isArray(Ge)?Ge:null,Vt=Array.isArray(Ge)?Ge.join(st):Ge,Ht,Ut=null;if(rn.RA.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&Vt.length<65536){let ui=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);ui&&(Ht=ui.html,Ut=ui.mode)}return{isFromEmptySelection:Dt,multicursorText:Et,text:Vt,html:Ht,mode:Ut}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){let Ge=this._selections[0];if(c.dz&&Ge.isEmpty()){let Dt=Ge.getStartPosition(),Et=this._getWordBeforePosition(Dt);if(Et.length===0&&(Et=this._getCharacterBeforePosition(Dt)),Et.length>0)return new kt.un(Et,Et.length,Et.length,me.e.fromPositions(Dt),0)}let st=500;if(c.dz&&!Ge.isEmpty()&&Se.getValueLengthInRange(Ge,0)<st){let Dt=Se.getValueInRange(Ge,0);return new kt.un(Dt,0,Dt.length,Ge,0)}if(h.isSafari&&!Ge.isEmpty()){let Dt="vscode-placeholder";return new kt.un(Dt,0,Dt.length,null,void 0)}return kt.un.EMPTY}if(h.isAndroid){let Ge=this._selections[0];if(Ge.isEmpty()){let st=Ge.getStartPosition(),[Dt,Et]=this._getAndroidWordAtPosition(st);if(Dt.length>0)return new kt.un(Dt,Et,Et,me.e.fromPositions(st),0)}return kt.un.EMPTY}return kt.ee.fromEditorSelection(Se,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(Ge,st,Dt)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(Ge,st,Dt)},it=this._register(new rn.Tj(this.textArea.domNode));this._textAreaInput=this._register(new rn.Fz(Be,it,c.OS,h)),this._register(this._textAreaInput.onKeyDown(Ge=>{this._viewController.emitKeyDown(Ge)})),this._register(this._textAreaInput.onKeyUp(Ge=>{this._viewController.emitKeyUp(Ge)})),this._register(this._textAreaInput.onPaste(Ge=>{let st=!1,Dt=null,Et=null;Ge.metadata&&(st=this._emptySelectionClipboard&&!!Ge.metadata.isFromEmptySelection,Dt=Ge.metadata.multicursorText!==void 0?Ge.metadata.multicursorText:null,Et=Ge.metadata.mode),this._viewController.paste(Ge.text,st,Dt,Et)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(Ge=>{Ge.replacePrevCharCnt||Ge.replaceNextCharCnt||Ge.positionDelta?(kt.al&&console.log(` => compositionType: <<${Ge.text}>>, ${Ge.replacePrevCharCnt}, ${Ge.replaceNextCharCnt}, ${Ge.positionDelta}`),this._viewController.compositionType(Ge.text,Ge.replacePrevCharCnt,Ge.replaceNextCharCnt,Ge.positionDelta)):(kt.al&&console.log(` => type: <<${Ge.text}>>`),this._viewController.type(Ge.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(Ge=>{this._viewController.setSelection(Ge)})),this._register(this._textAreaInput.onCompositionStart(Ge=>{let st=this.textArea.domNode,Dt=this._modelSelections[0],{distanceToModelLineStart:Et,widthOfHiddenTextBefore:Vt}=(()=>{let Ut=st.value.substring(0,Math.min(st.selectionStart,st.selectionEnd)),ui=Ut.lastIndexOf(`
`),gi=Ut.substring(ui+1),vi=gi.lastIndexOf("	"),Bi=gi.length-vi-1,Di=Dt.getStartPosition(),Hi=Math.min(Di.column-1,Bi),Ui=Di.column-1-Hi,Ii=gi.substring(0,gi.length-Hi),{tabSize:Ki}=this._context.viewModel.model.getOptions(),Zi=function(cn,mn,hn){if(cn.length===0)return 0;let Hn=document.createElement("div");Hn.style.position="absolute",Hn.style.top="-50000px",Hn.style.width="50000px";let $n=document.createElement("span");(0,Xt.N)($n,mn),$n.style.whiteSpace="pre",$n.style.tabSize=hn*mn.spaceWidth+"px",$n.append(cn),Hn.appendChild($n),document.body.appendChild(Hn);let So=$n.offsetWidth;return document.body.removeChild(Hn),So}(Ii,this._fontInfo,Ki);return{distanceToModelLineStart:Ui,widthOfHiddenTextBefore:Zi}})(),{distanceToModelLineEnd:Ht}=(()=>{let Ut=st.value.substring(Math.max(st.selectionStart,st.selectionEnd)),ui=Ut.indexOf(`
`),gi=ui===-1?Ut:Ut.substring(0,ui),vi=gi.indexOf("	"),Bi=vi===-1?gi.length:gi.length-vi-1,Di=Dt.getEndPosition(),Hi=Math.min(this._context.viewModel.model.getLineMaxColumn(Di.lineNumber)-Di.column,Bi);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(Di.lineNumber)-Di.column-Hi}})();this._context.viewModel.revealRange("keyboard",!0,me.e.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Ze(this._context,Dt.startLineNumber,Et,Vt,Ht),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Si.S} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(Ge=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Si.S}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Te.F.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeScreenReaderContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){let s=this._context.viewModel.getLineContent(e.lineNumber),y=(0,fi.u)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?'),P=!0,Q=e.column,pe=!0,Se=e.column,Be=0;for(;Be<50&&(P||pe);){if(P&&Q<=1&&(P=!1),P){let it=s.charCodeAt(Q-2);y.get(it)!==0?P=!1:Q--}if(pe&&Se>s.length&&(pe=!1),pe){let it=s.charCodeAt(Se-1);y.get(it)!==0?pe=!1:Se++}Be++}return[s.substring(Q-1,Se-1),e.column-Q]}_getWordBeforePosition(e){let s=this._context.viewModel.getLineContent(e.lineNumber),y=(0,fi.u)(this._context.configuration.options.get(125)),P=e.column,Q=0;for(;P>1;){let pe=s.charCodeAt(P-2);if(y.get(pe)!==0||Q>50)return s.substring(P-1,e.column-1);Q++,P--}return s.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){let s=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!ci.ZG(s.charCodeAt(0)))return s}return""}_getAriaLabel(e){return e.get(2)===1?A.NC("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",c.IJ?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);let s=e.get(3);this._accessibilitySupport===2&&s===k.BH.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=s;let y=e.get(139).wrappingColumn;if(y!==-1&&this._accessibilitySupport!==1){let P=e.get(48);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(y*P.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=rt?0:1}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(139);this._setAccessibilityOptions(s),this._contentLeft=y.contentLeft,this._contentWidth=y.contentWidth,this._contentHeight=y.height,this._fontInfo=s.get(48),this._lineHeight=s.get(64),this._emptySelectionClipboard=s.get(35),this._copyWithSyntaxHighlighting=s.get(23),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:P}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=P*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("tabindex",String(s.get(119))),(e.hasChanged(32)||e.hasChanged(87))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){let e=this._context.configuration.options;!Te.F.enabled||e.get(32)&&e.get(87)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var s;this._primaryCursorPosition=new ee.L(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(s=this._visibleTextArea)===null||s===void 0||s.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){let P=this._visibleTextArea.visibleTextareaStart,Q=this._visibleTextArea.visibleTextareaEnd,pe=this._visibleTextArea.startPosition,Se=this._visibleTextArea.endPosition;if(pe&&Se&&P&&Q&&Q.left>=this._scrollLeft&&P.left<=this._scrollLeft+this._contentWidth){let Be=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,it=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),Ge=this._visibleTextArea.widthOfHiddenLineTextBefore,st=this._contentLeft+P.left-this._scrollLeft,Dt=Q.left-P.left+1;if(st<this._contentLeft){let ui=this._contentLeft-st;st+=ui,Ge+=ui,Dt-=ui}Dt>this._contentWidth&&(Dt=this._contentWidth);let Et=this._context.viewModel.getViewLineData(pe.lineNumber),Vt=Et.tokens.findTokenIndexAtOffset(pe.column-1),Ht=Vt===Et.tokens.findTokenIndexAtOffset(Se.column-1),Ut=this._visibleTextArea.definePresentation(Ht?Et.tokens.getPresentation(Vt):null);this.textArea.domNode.scrollTop=it*this._lineHeight,this.textArea.domNode.scrollLeft=Ge,this._doRender({lastRenderPosition:null,top:Be,left:st,width:Dt,height:this._lineHeight,useCover:!1,color:(Ri.RW.getColorMap()||[])[Ut.foreground],italic:Ut.italic,bold:Ut.bold,underline:Ut.underline,strikethrough:Ut.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();let s=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(s<this._contentLeft||s>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();let y=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(y<0||y>this._contentHeight)this._renderAtTopLeft();else if(c.dz){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:y,left:this._textAreaWrapping?this._contentLeft:s,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;let P=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=P*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:y,left:this._textAreaWrapping?this._contentLeft:s,width:this._textAreaWidth,height:rt?0:1,useCover:!1})}_newlinecount(e){let s=0,y=-1;for(;y=e.indexOf(`
`,y+1),y!==-1;)s++;return s}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:rt?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;let s=this.textArea,y=this.textAreaCover;(0,Xt.N)(s,this._fontInfo),s.setTop(e.top),s.setLeft(e.left),s.setWidth(e.width),s.setHeight(e.height),s.setColor(e.color?Wt.Il.Format.CSS.formatHex(e.color):""),s.setFontStyle(e.italic?"italic":""),e.bold&&s.setFontWeight("bold"),s.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),y.setTop(e.useCover?e.top:0),y.setLeft(e.useCover?e.left:0),y.setWidth(e.useCover?e.width:0),y.setHeight(e.useCover?e.height:0);let P=this._context.configuration.options;P.get(55)?y.setClassName("monaco-editor-background textAreaCover "+di.OUTER_CLASS_NAME):P.get(65).renderType!==0?y.setClassName("monaco-editor-background textAreaCover "+jt.CLASS_NAME):y.setClassName("monaco-editor-background textAreaCover")}}var Nt=t(9317);class dt{constructor(e,s,y,P){this.configuration=e,this.viewModel=s,this.userInputEvents=y,this.commandDelegate=P}paste(e,s,y,P){this.commandDelegate.paste(e,s,y,P)}type(e){this.commandDelegate.type(e)}compositionType(e,s,y,P){this.commandDelegate.compositionType(e,s,y,P)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Nt.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){let s=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<s?new ee.L(e.lineNumber,s):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(75)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(75)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let s=this.configuration.options,y=c.IJ&&s.get(102),P=s.get(20);e.middleButton&&!y?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||P?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,s){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:s}}moveTo(e,s){Nt.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_moveToSelect(e,s){Nt.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_columnSelect(e,s,y){e=this._validateViewColumn(e),Nt.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:s,doColumnSelect:y})}_createCursor(e,s){e=this._validateViewColumn(e),Nt.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:s})}_lastCursorMoveToSelect(e,s){Nt.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_wordSelect(e,s){Nt.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_wordSelectDrag(e,s){Nt.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_lastCursorWordSelect(e,s){Nt.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_lineSelect(e,s){Nt.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_lineSelectDrag(e,s){Nt.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_lastCursorLineSelect(e,s){Nt.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_lastCursorLineSelectDrag(e,s){Nt.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,s))}_selectAll(){Nt.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class Re{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var s;(s=this.onKeyDown)===null||s===void 0||s.call(this,e)}emitKeyUp(e){var s;(s=this.onKeyUp)===null||s===void 0||s.call(this,e)}emitContextMenu(e){var s;(s=this.onContextMenu)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var s;(s=this.onMouseMove)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var s;(s=this.onMouseLeave)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var s;(s=this.onMouseDown)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var s;(s=this.onMouseUp)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var s;(s=this.onMouseDrag)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var s;(s=this.onMouseDrop)===null||s===void 0||s.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var s;(s=this.onMouseWheel)===null||s===void 0||s.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return Re.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,s){let y=Object.assign({},e);return y.position&&(y.position=s.convertViewPositionToModelPosition(y.position)),y.range&&(y.range=s.convertViewRangeToModelRange(y.range)),y.type!==5&&y.type!==8||(y.detail=this.convertViewToModelViewZoneData(y.detail,s)),y}static convertViewToModelViewZoneData(e,s){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?s.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?s.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:s.convertViewPositionToModelPosition(e.position),afterLineNumber:s.convertViewPositionToModelPosition(new ee.L(e.afterLineNumber,1)).lineNumber}}}var qe,Ue=t(72);class Pe{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,s){this._lines=s,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let s=e-this._rendLineNumberStart;if(s<0||s>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[s]}onLinesDeleted(e,s){if(this.getCount()===0)return null;let y=this.getStartLineNumber(),P=this.getEndLineNumber();if(s<y){let Se=s-e+1;return this._rendLineNumberStart-=Se,null}if(e>P)return null;let Q=0,pe=0;for(let Se=y;Se<=P;Se++){let Be=Se-this._rendLineNumberStart;e<=Se&&Se<=s&&(pe===0?(Q=Be,pe=1):pe++)}if(e<y){let Se=0;Se=s<y?s-e+1:y-e,this._rendLineNumberStart-=Se}return this._lines.splice(Q,pe)}onLinesChanged(e,s){let y=e+s-1;if(this.getCount()===0)return!1;let P=this.getStartLineNumber(),Q=this.getEndLineNumber(),pe=!1;for(let Se=e;Se<=y;Se++)Se>=P&&Se<=Q&&(this._lines[Se-this._rendLineNumberStart].onContentChanged(),pe=!0);return pe}onLinesInserted(e,s){if(this.getCount()===0)return null;let y=s-e+1,P=this.getStartLineNumber(),Q=this.getEndLineNumber();if(e<=P)return this._rendLineNumberStart+=y,null;if(e>Q)return null;if(y+e>Q)return this._lines.splice(e-this._rendLineNumberStart,Q-e+1);let pe=[];for(let st=0;st<y;st++)pe[st]=this._createLine();let Se=e-this._rendLineNumberStart,Be=this._lines.slice(0,Se),it=this._lines.slice(Se,this._lines.length-y),Ge=this._lines.slice(this._lines.length-y,this._lines.length);return this._lines=Be.concat(pe).concat(it),Ge}onTokensChanged(e){if(this.getCount()===0)return!1;let s=this.getStartLineNumber(),y=this.getEndLineNumber(),P=!1;for(let Q=0,pe=e.length;Q<pe;Q++){let Se=e[Q];if(Se.toLineNumber<s||Se.fromLineNumber>y)continue;let Be=Math.max(s,Se.fromLineNumber),it=Math.min(y,Se.toLineNumber);for(let Ge=Be;Ge<=it;Ge++){let st=Ge-this._rendLineNumberStart;this._lines[st].onTokensChanged(),P=!0}}return P}}class Xe{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new Pe(()=>this._host.createVisibleLine())}_createDomNode(){let e=(0,z.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(139)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){let s=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(s)for(let y=0,P=s.length;y<P;y++){let Q=s[y].getDomNode();Q&&this.domNode.domNode.removeChild(Q)}return!0}onLinesInserted(e){let s=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(s)for(let y=0,P=s.length;y<P;y++){let Q=s[y].getDomNode();Q&&this.domNode.domNode.removeChild(Q)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let s=this._linesCollection._get(),y=new $e(this.domNode.domNode,this._host,e),P={rendLineNumberStart:s.rendLineNumberStart,lines:s.lines,linesLength:s.lines.length},Q=y.render(P,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(Q.rendLineNumberStart,Q.lines)}}class $e{constructor(e,s,y){this.domNode=e,this.host=s,this.viewportData=y}render(e,s,y,P){let Q={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(Q.rendLineNumberStart+Q.linesLength-1<s||y<Q.rendLineNumberStart){Q.rendLineNumberStart=s,Q.linesLength=y-s+1,Q.lines=[];for(let pe=s;pe<=y;pe++)Q.lines[pe-s]=this.host.createVisibleLine();return this._finishRendering(Q,!0,P),Q}if(this._renderUntouchedLines(Q,Math.max(s-Q.rendLineNumberStart,0),Math.min(y-Q.rendLineNumberStart,Q.linesLength-1),P,s),Q.rendLineNumberStart>s){let pe=s,Se=Math.min(y,Q.rendLineNumberStart-1);pe<=Se&&(this._insertLinesBefore(Q,pe,Se,P,s),Q.linesLength+=Se-pe+1)}else if(Q.rendLineNumberStart<s){let pe=Math.min(Q.linesLength,s-Q.rendLineNumberStart);pe>0&&(this._removeLinesBefore(Q,pe),Q.linesLength-=pe)}if(Q.rendLineNumberStart=s,Q.rendLineNumberStart+Q.linesLength-1<y){let pe=Q.rendLineNumberStart+Q.linesLength,Se=y;pe<=Se&&(this._insertLinesAfter(Q,pe,Se,P,s),Q.linesLength+=Se-pe+1)}else if(Q.rendLineNumberStart+Q.linesLength-1>y){let pe=Math.max(0,y-Q.rendLineNumberStart+1),Se=Q.linesLength-1-pe+1;Se>0&&(this._removeLinesAfter(Q,Se),Q.linesLength-=Se)}return this._finishRendering(Q,!1,P),Q}_renderUntouchedLines(e,s,y,P,Q){let pe=e.rendLineNumberStart,Se=e.lines;for(let Be=s;Be<=y;Be++){let it=pe+Be;Se[Be].layoutLine(it,P[it-Q])}}_insertLinesBefore(e,s,y,P,Q){let pe=[],Se=0;for(let Be=s;Be<=y;Be++)pe[Se++]=this.host.createVisibleLine();e.lines=pe.concat(e.lines)}_removeLinesBefore(e,s){for(let y=0;y<s;y++){let P=e.lines[y].getDomNode();P&&this.domNode.removeChild(P)}e.lines.splice(0,s)}_insertLinesAfter(e,s,y,P,Q){let pe=[],Se=0;for(let Be=s;Be<=y;Be++)pe[Se++]=this.host.createVisibleLine();e.lines=e.lines.concat(pe)}_removeLinesAfter(e,s){let y=e.linesLength-s;for(let P=0;P<s;P++){let Q=e.lines[y+P].getDomNode();Q&&this.domNode.removeChild(Q)}e.lines.splice(y,s)}_finishRenderingNewLines(e,s,y,P){$e._ttPolicy&&(y=$e._ttPolicy.createHTML(y));let Q=this.domNode.lastChild;s||!Q?this.domNode.innerHTML=y:Q.insertAdjacentHTML("afterend",y);let pe=this.domNode.lastChild;for(let Se=e.linesLength-1;Se>=0;Se--){let Be=e.lines[Se];P[Se]&&(Be.setDomNode(pe),pe=pe.previousSibling)}}_finishRenderingInvalidLines(e,s,y){let P=document.createElement("div");$e._ttPolicy&&(s=$e._ttPolicy.createHTML(s)),P.innerHTML=s;for(let Q=0;Q<e.linesLength;Q++){let pe=e.lines[Q];if(y[Q]){let Se=P.firstChild,Be=pe.getDomNode();Be.parentNode.replaceChild(Se,Be),pe.setDomNode(Se)}}}_finishRendering(e,s,y){let P=$e._sb,Q=e.linesLength,pe=e.lines,Se=e.rendLineNumberStart,Be=[];{P.reset();let it=!1;for(let Ge=0;Ge<Q;Ge++){let st=pe[Ge];Be[Ge]=!1,st.getDomNode()||st.renderLine(Ge+Se,y[Ge],this.viewportData,P)&&(Be[Ge]=!0,it=!0)}it&&this._finishRenderingNewLines(e,s,P.build(),Be)}{P.reset();let it=!1,Ge=[];for(let st=0;st<Q;st++){let Dt=pe[st];Ge[st]=!1,Be[st]||Dt.renderLine(st+Se,y[st],this.viewportData,P)&&(Ge[st]=!0,it=!0)}it&&this._finishRenderingInvalidLines(e,P.build(),Ge)}}}$e._ttPolicy=(qe=window.trustedTypes)===null||qe===void 0?void 0:qe.createPolicy("editorViewLayer",{createHTML:Ct=>Ct}),$e._sb=new Ue.HT(1e5);class ot extends p{constructor(e){super(e),this._visibleLines=new Xe(this),this.domNode=this._visibleLines.domNode;let s=this._context.configuration.options.get(48);(0,Xt.N)(this.domNode,s),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,s=this._dynamicOverlays.length;e<s;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,s=this._dynamicOverlays.length;e<s;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new Tt(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let s=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();for(let Q=s;Q<=y;Q++)this._visibleLines.getVisibleLine(Q).onConfigurationChanged(e);let P=this._context.configuration.options.get(48);return(0,Xt.N)(this.domNode,P),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let s=this._dynamicOverlays.filter(y=>y.shouldRender());for(let y=0,P=s.length;y<P;y++){let Q=s[y];Q.prepareRender(e),Q.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class Tt{constructor(e,s){this._configuration=e,this._lineHeight=this._configuration.options.get(64),this._dynamicOverlays=s,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,z.X)(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(64)}renderLine(e,s,y,P){let Q="";for(let pe=0,Se=this._dynamicOverlays.length;pe<Se;pe++)Q+=this._dynamicOverlays[pe].render(y.startLineNumber,e);return this._renderedContent!==Q&&(this._renderedContent=Q,P.appendString('<div style="position:absolute;top:'),P.appendString(String(s)),P.appendString("px;width:100%;height:"),P.appendString(String(this._lineHeight)),P.appendString('px;">'),P.appendString(Q),P.appendString("</div>"),!0)}layoutLine(e,s){this._domNode&&(this._domNode.setTop(s),this._domNode.setHeight(this._lineHeight))}}class Ot extends ot{constructor(e){super(e);let s=this._context.configuration.options.get(139);this._contentWidth=s.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){let s=this._context.configuration.options.get(139);return this._contentWidth=s.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class ti extends ot{constructor(e){super(e);let s=this._context.configuration.options,y=s.get(139);this._contentLeft=y.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,Xt.N)(this.domNode,s.get(48))}onConfigurationChanged(e){let s=this._context.configuration.options;(0,Xt.N)(this.domNode,s.get(48));let y=s.get(139);return this._contentLeft=y.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let s=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(s),this.domNode.setWidth(this._contentLeft)}}class zt extends p{constructor(e,s){super(e),this._viewDomNode=s,this._widgets={},this.domNode=(0,z.X)(document.createElement("div")),re.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,z.X)(document.createElement("div")),re.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){let s=Object.keys(this._widgets);for(let y of s)this._widgets[y].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){let e=Object.keys(this._widgets);for(let s of e)this._widgets[s].updateAnchorViewPosition()}addWidget(e){let s=new Jt(this._context,this._viewDomNode,e);this._widgets[s.id]=s,s.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(s.domNode):this.domNode.appendChild(s.domNode),this.setShouldRender()}setWidgetPosition(e,s,y,P,Q){this._widgets[e.getId()].setPosition(s,y,P,Q),this.setShouldRender()}removeWidget(e){let s=e.getId();if(this._widgets.hasOwnProperty(s)){let y=this._widgets[s];delete this._widgets[s];let P=y.domNode.domNode;P.parentNode.removeChild(P),P.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){let s=Object.keys(this._widgets);for(let y of s)this._widgets[y].onBeforeRender(e)}prepareRender(e){let s=Object.keys(this._widgets);for(let y of s)this._widgets[y].prepareRender(e)}render(e){let s=Object.keys(this._widgets);for(let y of s)this._widgets[y].render(e)}}class Jt{constructor(e,s,y){this._primaryAnchor=new Gt(null,null),this._secondaryAnchor=new Gt(null,null),this._context=e,this._viewDomNode=s,this._actual=y,this.domNode=(0,z.X)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let P=this._context.configuration.options,Q=P.get(139);this._fixedOverflowWidgets=P.get(40),this._contentWidth=Q.contentWidth,this._contentLeft=Q.contentLeft,this._lineHeight=P.get(64),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){let s=this._context.configuration.options;if(this._lineHeight=s.get(64),e.hasChanged(139)){let y=s.get(139);this._contentLeft=y.contentLeft,this._contentWidth=y.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,s,y){function P(Q,pe,Se){if(!Q)return new Gt(null,null);let Be=pe.model.validatePosition(Q);if(pe.coordinatesConverter.modelPositionIsVisible(Be)){let it=pe.coordinatesConverter.convertModelPositionToViewPosition(Be,Se!=null?Se:void 0);return new Gt(Q,it)}return new Gt(Q,null)}this._affinity=e,this._primaryAnchor=P(s,this._context.viewModel,this._affinity),this._secondaryAnchor=P(y,this._context.viewModel,this._affinity)}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,s,y,P){this._setPosition(P,e,s),this._preference=y,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,s,y,P){let Q=e.top,pe=Q,Se=e.top+e.height,Be=Q-y,it=pe>=y,Ge=Se,st=P.viewportHeight-Se>=y,Dt=e.left;return Dt+s>P.scrollLeft+P.viewportWidth&&(Dt=P.scrollLeft+P.viewportWidth-s),Dt<P.scrollLeft&&(Dt=P.scrollLeft),{fitsAbove:it,aboveTop:Be,fitsBelow:st,belowTop:Ge,left:Dt}}_layoutHorizontalSegmentInPage(e,s,y,P){let Q=Math.max(15,s.left-P),pe=Math.min(s.left+s.width+P,e.width-15),Se=s.left+y-window.scrollX;if(Se+P>pe){let Be=Se-(pe-P);Se-=Be,y-=Be}if(Se<Q){let Be=Se-Q;Se-=Be,y-=Be}return[y,Se]}_layoutBoxInPage(e,s,y,P){let Q=e.top-y,pe=e.top+e.height,Se=x.i(this._viewDomNode.domNode),Be=Se.top+Q-window.scrollY,it=Se.top+pe-window.scrollY,Ge=x.D6(document.body),[st,Dt]=this._layoutHorizontalSegmentInPage(Ge,Se,e.left-P.scrollLeft+this._contentLeft,s),Et=Be>=22,Vt=it+y<=Ge.height-22;return this._fixedOverflowWidgets?{fitsAbove:Et,aboveTop:Math.max(Be,22),fitsBelow:Vt,belowTop:it,left:Dt}:{fitsAbove:Et,aboveTop:Q,fitsBelow:Vt,belowTop:pe,left:st}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new $t(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var s,y;return{primary:P(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:P(((s=this._secondaryAnchor.viewPosition)===null||s===void 0?void 0:s.lineNumber)===((y=this._primaryAnchor.viewPosition)===null||y===void 0?void 0:y.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function P(Q,pe,Se){if(!Q)return null;let Be=e.visibleRangeForPosition(Q);if(!Be)return null;let it=Q.column===1&&pe===3?0:Be.left,Ge=e.getVerticalOffsetForLineNumber(Q.lineNumber)-e.scrollTop;return new si(Ge,it,Se)}}_reduceAnchorCoordinates(e,s,y){if(!s)return e;let P=this._context.configuration.options.get(48),Q=s.left;return Q=Q<e.left?Math.max(Q,e.left-y+P.typicalFullwidthCharacterWidth):Math.min(Q,e.left+y-P.typicalFullwidthCharacterWidth),new si(e.top,Q,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;let{primary:s,secondary:y}=this._getAnchorsCoordinates(e);if(!s)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let pe=null;if(typeof this._actual.beforeRender=="function"&&(pe=ai(this._actual.beforeRender,this._actual)),pe)this._cachedDomNodeOffsetWidth=pe.width,this._cachedDomNodeOffsetHeight=pe.height;else{let Se=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(Se.width),this._cachedDomNodeOffsetHeight=Math.round(Se.height)}}let P=this._reduceAnchorCoordinates(s,y,this._cachedDomNodeOffsetWidth),Q;Q=this.allowEditorOverflow?this._layoutBoxInPage(P,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(P,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let pe=1;pe<=2;pe++)for(let Se of this._preference)if(Se===1){if(!Q)return null;if(pe===2||Q.fitsAbove)return{coordinate:new $t(Q.aboveTop,Q.left),position:1}}else{if(Se!==2)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new $t(P.top,P.left)),position:0}:{coordinate:new $t(P.top,P.left),position:0};if(!Q)return null;if(pe===2||Q.fitsBelow)return{coordinate:new $t(Q.belowTop,Q.left),position:2}}return null}onBeforeRender(e){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void(typeof this._actual.afterRender=="function"&&ai(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&ai(this._actual.afterRender,this._actual,this._renderData.position)}}class Gt{constructor(e,s){this.modelPosition=e,this.viewPosition=s}}class $t{constructor(e,s){this.top=e,this.left=s,this._coordinateBrand=void 0}}class si{constructor(e,s,y){this.top=e,this.left=s,this.height=y,this._anchorCoordinateBrand=void 0}}function ai(Ct,e,...s){try{return Ct.call(e,...s)}catch(y){return null}}class _i extends It{constructor(e){super(),this._context=e;let s=this._context.configuration.options,y=s.get(139);this._lineHeight=s.get(64),this._renderLineHighlight=s.get(91),this._renderLineHighlightOnlyWhenFocus=s.get(92),this._contentLeft=y.contentLeft,this._contentWidth=y.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new H.Y(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,s=this._selections.map(P=>P.positionLineNumber);s.sort((P,Q)=>P-Q),r.fS(this._cursorLineNumbers,s)||(this._cursorLineNumbers=s,e=!0);let y=this._selections.every(P=>P.isEmpty());return this._selectionIsEmpty!==y&&(this._selectionIsEmpty=y,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(139);return this._lineHeight=s.get(64),this._renderLineHighlight=s.get(91),this._renderLineHighlightOnlyWhenFocus=s.get(92),this._contentLeft=y.contentLeft,this._contentWidth=y.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis())return void(this._renderData=null);let s=this._renderOne(e),y=e.visibleRange.startLineNumber,P=e.visibleRange.endLineNumber,Q=this._cursorLineNumbers.length,pe=0,Se=[];for(let Be=y;Be<=P;Be++){let it=Be-y;for(;pe<Q&&this._cursorLineNumbers[pe]<Be;)pe++;pe<Q&&this._cursorLineNumbers[pe]===Be?Se[it]=s:Se[it]=""}this._renderData=Se}render(e,s){if(!this._renderData)return"";let y=s-e;return y>=this._renderData.length?"":this._renderData[y]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class Li extends _i{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class ri extends _i{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}(0,ft.Ic)((Ct,e)=>{let s=Ct.getColor(Mt.Kh);if(s&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${s}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${s}; border: none; }`)),!s||s.isTransparent()||Ct.defines(Mt.Mm)){let y=Ct.getColor(Mt.Mm);y&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${y}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${y}; }`),(0,ye.c3)(Ct.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class qt extends It{constructor(e){super(),this._context=e;let s=this._context.configuration.options;this._lineHeight=s.get(64),this._typicalHalfwidthCharacterWidth=s.get(48).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options;return this._lineHeight=s.get(64),this._typicalHalfwidthCharacterWidth=s.get(48).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let s=e.getDecorationsInViewport(),y=[],P=0;for(let Be=0,it=s.length;Be<it;Be++){let Ge=s[Be];Ge.options.className&&(y[P++]=Ge)}y=y.sort((Be,it)=>{if(Be.options.zIndex<it.options.zIndex)return-1;if(Be.options.zIndex>it.options.zIndex)return 1;let Ge=Be.options.className,st=it.options.className;return Ge<st?-1:Ge>st?1:me.e.compareRangesUsingStarts(Be.range,it.range)});let Q=e.visibleRange.startLineNumber,pe=e.visibleRange.endLineNumber,Se=[];for(let Be=Q;Be<=pe;Be++)Se[Be-Q]="";this._renderWholeLineDecorations(e,y,Se),this._renderNormalDecorations(e,y,Se),this._renderResult=Se}_renderWholeLineDecorations(e,s,y){let P=String(this._lineHeight),Q=e.visibleRange.startLineNumber,pe=e.visibleRange.endLineNumber;for(let Se=0,Be=s.length;Se<Be;Se++){let it=s[Se];if(!it.options.isWholeLine)continue;let Ge='<div class="cdr '+it.options.className+'" style="left:0;width:100%;height:'+P+'px;"></div>',st=Math.max(it.range.startLineNumber,Q),Dt=Math.min(it.range.endLineNumber,pe);for(let Et=st;Et<=Dt;Et++)y[Et-Q]+=Ge}}_renderNormalDecorations(e,s,y){let P=String(this._lineHeight),Q=e.visibleRange.startLineNumber,pe=null,Se=!1,Be=null;for(let it=0,Ge=s.length;it<Ge;it++){let st=s[it];if(st.options.isWholeLine)continue;let Dt=st.options.className,Et=!!st.options.showIfCollapsed,Vt=st.range;Et&&Vt.endColumn===1&&Vt.endLineNumber!==Vt.startLineNumber&&(Vt=new me.e(Vt.startLineNumber,Vt.startColumn,Vt.endLineNumber-1,this._context.viewModel.getLineMaxColumn(Vt.endLineNumber-1))),pe===Dt&&Se===Et&&me.e.areIntersectingOrTouching(Be,Vt)?Be=me.e.plusRange(Be,Vt):(pe!==null&&this._renderNormalDecoration(e,Be,pe,Se,P,Q,y),pe=Dt,Se=Et,Be=Vt)}pe!==null&&this._renderNormalDecoration(e,Be,pe,Se,P,Q,y)}_renderNormalDecoration(e,s,y,P,Q,pe,Se){let Be=e.linesVisibleRangesForRange(s,y==="findMatch");if(Be)for(let it=0,Ge=Be.length;it<Ge;it++){let st=Be[it];if(st.outsideRenderedLine)continue;let Dt=st.lineNumber-pe;if(P&&st.ranges.length===1){let Et=st.ranges[0];if(Et.width<this._typicalHalfwidthCharacterWidth){let Vt=Math.round(Et.left+Et.width/2),Ht=Math.max(0,Math.round(Vt-this._typicalHalfwidthCharacterWidth/2));st.ranges[0]=new ce(Ht,this._typicalHalfwidthCharacterWidth)}}for(let Et=0,Vt=st.ranges.length;Et<Vt;Et++){let Ht=st.ranges[Et],Ut='<div class="cdr '+y+'" style="left:'+String(Ht.left)+"px;width:"+String(Ht.width)+"px;height:"+Q+'px;"></div>';Se[Dt]+=Ut}}}render(e,s){if(!this._renderResult)return"";let y=s-e;return y<0||y>=this._renderResult.length?"":this._renderResult[y]}}class je extends p{constructor(e,s,y,P){super(e);let Q=this._context.configuration.options,pe=Q.get(98),Se=Q.get(72),Be=Q.get(38),it=Q.get(101),Ge={listenOnDomNode:y.domNode,className:"editor-scrollable "+(0,ft.m6)(e.theme.type),useShadows:!1,lazyRender:!0,vertical:pe.vertical,horizontal:pe.horizontal,verticalHasArrows:pe.verticalHasArrows,horizontalHasArrows:pe.horizontalHasArrows,verticalScrollbarSize:pe.verticalScrollbarSize,verticalSliderSize:pe.verticalSliderSize,horizontalScrollbarSize:pe.horizontalScrollbarSize,horizontalSliderSize:pe.horizontalSliderSize,handleMouseWheel:pe.handleMouseWheel,alwaysConsumeMouseWheel:pe.alwaysConsumeMouseWheel,arrowSize:pe.arrowSize,mouseWheelScrollSensitivity:Se,fastScrollSensitivity:Be,scrollPredominantAxis:it,scrollByPage:pe.scrollByPage};this.scrollbar=this._register(new Kt.$Z(s.domNode,Ge,this._context.viewLayout.getScrollable())),re.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=(0,z.X)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let st=(Dt,Et,Vt)=>{let Ht={};if(Et){let Ut=Dt.scrollTop;Ut&&(Ht.scrollTop=this._context.viewLayout.getCurrentScrollTop()+Ut,Dt.scrollTop=0)}if(Vt){let Ut=Dt.scrollLeft;Ut&&(Ht.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+Ut,Dt.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(Ht,1)};this._register(x.nm(y.domNode,"scroll",Dt=>st(y.domNode,!0,!0))),this._register(x.nm(s.domNode,"scroll",Dt=>st(s.domNode,!0,!1))),this._register(x.nm(P.domNode,"scroll",Dt=>st(P.domNode,!0,!1))),this._register(x.nm(this.scrollbarDomNode.domNode,"scroll",Dt=>st(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,s=e.get(139);this.scrollbarDomNode.setLeft(s.contentLeft),e.get(70).side==="right"?this.scrollbarDomNode.setWidth(s.contentWidth+s.minimap.minimapWidth):this.scrollbarDomNode.setWidth(s.contentWidth),this.scrollbarDomNode.setHeight(s.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(98)||e.hasChanged(72)||e.hasChanged(38)){let s=this._context.configuration.options,y=s.get(98),P=s.get(72),Q=s.get(38),pe=s.get(101),Se={vertical:y.vertical,horizontal:y.horizontal,verticalScrollbarSize:y.verticalScrollbarSize,horizontalScrollbarSize:y.horizontalScrollbarSize,scrollByPage:y.scrollByPage,handleMouseWheel:y.handleMouseWheel,mouseWheelScrollSensitivity:P,fastScrollSensitivity:Q,scrollPredominantAxis:pe};this.scrollbar.updateOptions(Se)}return e.hasChanged(139)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+(0,ft.m6)(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class mt{constructor(e,s,y,P,Q){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+s,this.className=String(y),this.zIndex=P!=null?P:0,this.decorationLane=Q!=null?Q:1}}class wt{constructor(e,s){this.className=e,this.zIndex=s}}class Rt{constructor(){this.lanes=[]}add(e,s){for(;e>=this.lanes.length;)this.lanes.push([]);this.lanes[e].push(s)}getLaneDecorations(e){return e<this.lanes.length?this.lanes[e]:[]}isEmpty(){for(let e of this.lanes)if(e.length>0)return!1;return!0}}class oi extends It{_render(e,s,y,P){let Q=[];for(let Be=e;Be<=s;Be++)Q[Be-e]=new Rt;if(y.length===0)return Q;y.sort((Be,it)=>Be.className===it.className?Be.startLineNumber===it.startLineNumber?Be.endLineNumber-it.endLineNumber:Be.startLineNumber-it.startLineNumber:Be.className<it.className?-1:1);let pe=null,Se=0;for(let Be=0,it=y.length;Be<it;Be++){let Ge=y[Be],st=Ge.className,Dt=Ge.zIndex,Et=Math.max(Ge.startLineNumber,e)-e,Vt=Math.min(Ge.endLineNumber,s)-e,Ht=Math.min(Ge.decorationLane,P);pe===st?(Et=Math.max(Se+1,Et),Se=Math.max(Se,Vt)):(pe=st,Se=Vt);for(let Ut=Et;Ut<=Se;Ut++)Q[Ut].add(Ht,new wt(st,Dt))}return Q}}class ei extends oi{constructor(e){super(),this._context=e;let s=this._context.configuration.options,y=s.get(139);this._lineHeight=s.get(64),this._glyphMargin=s.get(55),this._glyphMarginLeft=y.glyphMarginLeft,this._glyphMarginWidth=y.glyphMarginWidth,this._glyphMarginDecorationLaneCount=y.glyphMarginDecorationLaneCount,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(139);return this._lineHeight=s.get(64),this._glyphMargin=s.get(55),this._glyphMarginLeft=y.glyphMarginLeft,this._glyphMarginWidth=y.glyphMarginWidth,this._glyphMarginDecorationLaneCount=y.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){var s;let y=e.getDecorationsInViewport(),P=[],Q=0;for(let pe=0,Se=y.length;pe<Se;pe++){let Be=y[pe],it=Be.options.glyphMarginClassName,Ge=Be.options.zIndex,st=(s=Be.options.glyphMargin)===null||s===void 0?void 0:s.position;it&&(P[Q++]=new mt(Be.range.startLineNumber,Be.range.endLineNumber,it,Ge,st))}return P}prepareRender(e){if(!this._glyphMargin)return void(this._renderResult=null);let s=e.visibleRange.startLineNumber,y=e.visibleRange.endLineNumber,P=this._getDecorations(e),Q=this._render(s,y,P,this._glyphMarginDecorationLaneCount),pe=this._lineHeight.toString(),Se='" style="width:'+Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount).toString()+"px;height:"+pe+"px;",Be=[];for(let it=s;it<=y;it++){let Ge=it-s,st=Q[Ge];if(st.isEmpty())Be[Ge]="";else{let Dt="";for(let Et=1;Et<=this._glyphMarginDecorationLaneCount;Et+=1){let Vt=st.getLaneDecorations(Et);if(Vt.length===0)continue;Vt.sort((gi,vi)=>vi.zIndex-gi.zIndex);let Ht=Vt[0],Ut=[Ht.className];for(let gi=1;gi<Vt.length;gi+=1){let vi=Vt[gi];if(vi.zIndex!==Ht.zIndex)break;Ut.push(vi.className)}let ui=(this._glyphMarginLeft+(Et-1)*this._lineHeight).toString();Dt+='<div class="cgmr codicon '+Ut.join(" ")+Se+"left:"+ui+'px;"></div>'}Be[Ge]=Dt}}this._renderResult=Be}render(e,s){if(!this._renderResult)return"";let y=s-e;return y<0||y>=this._renderResult.length?"":this._renderResult[y]}}var yi=t(8401),ki=t(1516),Ti=t(5094);class Pi extends It{constructor(e){super(),this._context=e,this._primaryPosition=null;let s=this._context.configuration.options,y=s.get(140),P=s.get(48);this._lineHeight=s.get(64),this._spaceWidth=P.spaceWidth,this._maxIndentLeft=y.wrappingColumn===-1?-1:y.wrappingColumn*P.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=s.get(14),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(140),P=s.get(48);return this._lineHeight=s.get(64),this._spaceWidth=P.spaceWidth,this._maxIndentLeft=y.wrappingColumn===-1?-1:y.wrappingColumn*P.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=s.get(14),!0}onCursorStateChanged(e){var s;let y=e.selections[0].getPosition();return!(!((s=this._primaryPosition)===null||s===void 0)&&s.equals(y))&&(this._primaryPosition=y,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var s,y,P,Q;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1)return void(this._renderResult=null);let pe=e.visibleRange.startLineNumber,Se=e.visibleRange.endLineNumber,Be=e.scrollWidth,it=this._lineHeight,Ge=this._primaryPosition,st=this.getGuidesByLine(pe,Math.min(Se+1,this._context.viewModel.getLineCount()),Ge),Dt=[];for(let Et=pe;Et<=Se;Et++){let Vt=Et-pe,Ht=st[Vt],Ut="",ui=(y=(s=e.visibleRangeForPosition(new ee.L(Et,1)))===null||s===void 0?void 0:s.left)!==null&&y!==void 0?y:0;for(let gi of Ht){let vi=gi.column===-1?ui+(gi.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new ee.L(Et,gi.column)).left;if(vi>Be||this._maxIndentLeft>0&&vi>this._maxIndentLeft)break;let Bi=gi.horizontalLine?gi.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",Di=gi.horizontalLine?((Q=(P=e.visibleRangeForPosition(new ee.L(Et,gi.horizontalLine.endColumn)))===null||P===void 0?void 0:P.left)!==null&&Q!==void 0?Q:vi+this._spaceWidth)-vi:this._spaceWidth;Ut+=`<div class="core-guide ${gi.className} ${Bi}" style="left:${vi}px;height:${it}px;width:${Di}px"></div>`}Dt[Vt]=Ut}this._renderResult=Dt}getGuidesByLine(e,s,y){let P=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,s,y,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Ti.s6.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Ti.s6.EnabledForActive:Ti.s6.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,Q=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,s):null,pe=0,Se=0,Be=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&y){let st=this._context.viewModel.getActiveIndentGuide(y.lineNumber,e,s);pe=st.startLineNumber,Se=st.endLineNumber,Be=st.indent}let{indentSize:it}=this._context.viewModel.model.getOptions(),Ge=[];for(let st=e;st<=s;st++){let Dt=new Array;Ge.push(Dt);let Et=P?P[st-e]:[],Vt=new r.H9(Et),Ht=Q?Q[st-e]:0;for(let Ut=1;Ut<=Ht;Ut++){let ui=(Ut-1)*it+1,gi=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||Et.length===0)&&pe<=st&&st<=Se&&Ut===Be;Dt.push(...Vt.takeWhile(Bi=>Bi.visibleColumn<ui)||[]);let vi=Vt.peek();vi&&vi.visibleColumn===ui&&!vi.horizontalLine||Dt.push(new Ti.UO(ui,-1,gi?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}Dt.push(...Vt.takeWhile(Ut=>!0)||[])}return Ge}render(e,s){if(!this._renderResult)return"";let y=s-e;return y<0||y>=this._renderResult.length?"":this._renderResult[y]}}function Ni(Ct){if(!Ct||!Ct.isTransparent())return Ct}(0,ft.Ic)((Ct,e)=>{let s=[{bracketColor:Mt.zJ,guideColor:Mt.oV,guideColorActive:Mt.Qb},{bracketColor:Mt.Vs,guideColor:Mt.m$,guideColorActive:Mt.m3},{bracketColor:Mt.CE,guideColor:Mt.DS,guideColorActive:Mt.To},{bracketColor:Mt.UP,guideColor:Mt.lS,guideColorActive:Mt.L7},{bracketColor:Mt.r0,guideColor:Mt.Jn,guideColorActive:Mt.HV},{bracketColor:Mt.m1,guideColor:Mt.YF,guideColorActive:Mt.f9}],y=new ki.W,P=s.map(Q=>{var pe,Se;let Be=Ct.getColor(Q.bracketColor),it=Ct.getColor(Q.guideColor),Ge=Ct.getColor(Q.guideColorActive),st=Ni((pe=Ni(it))!==null&&pe!==void 0?pe:Be==null?void 0:Be.transparent(.3)),Dt=Ni((Se=Ni(Ge))!==null&&Se!==void 0?Se:Be);if(st&&Dt)return{guideColor:st,guideColorActive:Dt}}).filter(yi.$K);if(P.length>0){for(let Q=0;Q<30;Q++){let pe=P[Q%P.length];e.addRule(`.monaco-editor .${y.getInlineClassNameOfLevel(Q).replace(/ /g,".")} { --guide-color: ${pe.guideColor}; --guide-color-active: ${pe.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${y.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${y.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${y.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});var gn=t(5393);class Dn{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;let e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,s){this._domNode=e,this.endNode=s,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Yt{constructor(){this._currentVisibleRange=new me.e(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Ai{constructor(e,s,y,P,Q,pe,Se){this.minimalReveal=e,this.lineNumber=s,this.startColumn=y,this.endColumn=P,this.startScrollTop=Q,this.stopScrollTop=pe,this.scrollType=Se,this.type="range",this.minLineNumber=s,this.maxLineNumber=s}}class zi{constructor(e,s,y,P,Q){this.minimalReveal=e,this.selections=s,this.startScrollTop=y,this.stopScrollTop=P,this.scrollType=Q,this.type="selections";let pe=s[0].startLineNumber,Se=s[0].endLineNumber;for(let Be=1,it=s.length;Be<it;Be++){let Ge=s[Be];pe=Math.min(pe,Ge.startLineNumber),Se=Math.max(Se,Ge.endLineNumber)}this.minLineNumber=pe,this.maxLineNumber=Se}}class un extends p{constructor(e,s){super(e),this._linesContent=s,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Xe(this),this.domNode=this._visibleLines.domNode;let y=this._context.configuration,P=this._context.configuration.options,Q=P.get(48),pe=P.get(140);this._lineHeight=P.get(64),this._typicalHalfwidthCharacterWidth=Q.typicalHalfwidthCharacterWidth,this._isViewportWrapping=pe.isViewportWrapping,this._revealHorizontalRightPadding=P.get(95),this._cursorSurroundingLines=P.get(27),this._cursorSurroundingLinesStyle=P.get(28),this._canUseLayerHinting=!P.get(30),this._viewLineOptions=new Ae(y,this._context.theme.type),re.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Si.S}`),(0,Xt.N)(this.domNode,Q),this._maxLineWidth=0,this._asyncUpdateLineWidths=new gn.pY(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new gn.pY(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Yt,this._horizontalRevealRequest=null,this._stickyScrollEnabled=P.get(110).enabled,this._maxNumberStickyLines=P.get(110).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Fe(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(140)&&(this._maxLineWidth=0);let s=this._context.configuration.options,y=s.get(48),P=s.get(140);return this._lineHeight=s.get(64),this._typicalHalfwidthCharacterWidth=y.typicalHalfwidthCharacterWidth,this._isViewportWrapping=P.isViewportWrapping,this._revealHorizontalRightPadding=s.get(95),this._cursorSurroundingLines=s.get(27),this._cursorSurroundingLinesStyle=s.get(28),this._canUseLayerHinting=!s.get(30),this._stickyScrollEnabled=s.get(110).enabled,this._maxNumberStickyLines=s.get(110).maxLineCount,(0,Xt.N)(this.domNode,y),this._onOptionsMaybeChanged(),e.hasChanged(139)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,s=new Ae(e,this._context.theme.type);if(!this._viewLineOptions.equals(s)){this._viewLineOptions=s;let y=this._visibleLines.getStartLineNumber(),P=this._visibleLines.getEndLineNumber();for(let Q=y;Q<=P;Q++)this._visibleLines.getVisibleLine(Q).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){let s=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber(),P=!1;for(let Q=s;Q<=y;Q++)P=this._visibleLines.getVisibleLine(Q).onSelectionChanged()||P;return P}onDecorationsChanged(e){{let s=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();for(let P=s;P<=y;P++)this._visibleLines.getVisibleLine(P).onDecorationsChanged()}return!0}onFlushed(e){let s=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,s}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let s=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(s===-1)return!1;let y=this._context.viewLayout.validateScrollPosition({scrollTop:s});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?y={scrollTop:y.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Ai(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),y.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new zi(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),y.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let P=Math.abs(this._context.viewLayout.getCurrentScrollTop()-y.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(y,P),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let s=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),y=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<s||e.scrollTop>y)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,s){let y=this._getViewLineDomNode(e);if(y===null)return null;let P=this._getLineNumberFor(y);if(P===-1||P<1||P>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(P)===1)return new ee.L(P,1);let Q=this._visibleLines.getStartLineNumber(),pe=this._visibleLines.getEndLineNumber();if(P<Q||P>pe)return null;let Se=this._visibleLines.getVisibleLine(P).getColumnOfNodeOffset(P,e,s),Be=this._context.viewModel.getLineMinColumn(P);return Se<Be&&(Se=Be),new ee.L(P,Se)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Fe.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let s=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();for(let P=s;P<=y;P++)if(e===this._visibleLines.getVisibleLine(P).getDomNode())return P;return-1}getLineWidth(e){let s=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber();if(e<s||e>y)return-1;let P=new Dn(this.domNode.domNode,this._textRangeRestingSpot),Q=this._visibleLines.getVisibleLine(e).getWidth(P);return this._updateLineWidthsSlowIfDomDidLayout(P),Q}linesVisibleRangesForRange(e,s){if(this.shouldRender())return null;let y=e.endLineNumber,P=me.e.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!P)return null;let Q=[],pe=0,Se=new Dn(this.domNode.domNode,this._textRangeRestingSpot),Be=0;s&&(Be=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ee.L(P.startLineNumber,1)).lineNumber);let it=this._visibleLines.getStartLineNumber(),Ge=this._visibleLines.getEndLineNumber();for(let st=P.startLineNumber;st<=P.endLineNumber;st++){if(st<it||st>Ge)continue;let Dt=st===P.startLineNumber?P.startColumn:1,Et=st===P.endLineNumber?P.endColumn:this._context.viewModel.getLineMaxColumn(st),Vt=this._visibleLines.getVisibleLine(st).getVisibleRangesForRange(st,Dt,Et,Se);if(Vt){if(s&&st<y){let Ht=Be;Be=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ee.L(st+1,1)).lineNumber,Ht!==Be&&(Vt.ranges[Vt.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}Q[pe++]=new se(Vt.outsideRenderedLine,st,ce.from(Vt.ranges))}}return this._updateLineWidthsSlowIfDomDidLayout(Se),pe===0?null:Q}_visibleRangesForLineRange(e,s,y){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;let P=new Dn(this.domNode.domNode,this._textRangeRestingSpot),Q=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,s,y,P);return this._updateLineWidthsSlowIfDomDidLayout(P),Q}visibleRangeForPosition(e){let s=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return s?new de(s.outsideRenderedLine,s.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){let s=this._visibleLines.getStartLineNumber(),y=this._visibleLines.getEndLineNumber(),P=1,Q=!0;for(let pe=s;pe<=y;pe++){let Se=this._visibleLines.getVisibleLine(pe);!e||Se.getWidthIsFast()?P=Math.max(P,Se.getWidth(null)):Q=!1}return Q&&s===1&&y===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(P),Q}_checkMonospaceFontAssumptions(){let e=-1,s=-1,y=this._visibleLines.getStartLineNumber(),P=this._visibleLines.getEndLineNumber();for(let Q=y;Q<=P;Q++){let pe=this._visibleLines.getVisibleLine(Q);if(pe.needsMonospaceFontCheck()){let Se=pe.getWidth(null);Se>s&&(s=Se,e=Q)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let Q=y;Q<=P;Q++)this._visibleLines.getVisibleLine(Q).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let y=this._horizontalRevealRequest;if(e.startLineNumber<=y.minLineNumber&&y.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let P=this._computeScrollLeftToReveal(y);P&&(this._isViewportWrapping||this._ensureMaxLineWidth(P.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:P.scrollLeft},y.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),c.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let y=this._visibleLines.getStartLineNumber(),P=this._visibleLines.getEndLineNumber();for(let Q=y;Q<=P;Q++)if(this._visibleLines.getVisibleLine(Q).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let s=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-s),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let s=Math.ceil(e);this._maxLineWidth<s&&(this._maxLineWidth=s,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,s,y,P,Q,pe){let Se=e.top,Be=e.height,it=Se+Be,Ge,st,Dt;if(Q&&Q.length>0){let Ut=Q[0].startLineNumber,ui=Q[0].endLineNumber;for(let gi=1,vi=Q.length;gi<vi;gi++){let Bi=Q[gi];Ut=Math.min(Ut,Bi.startLineNumber),ui=Math.max(ui,Bi.endLineNumber)}Ge=!1,st=this._context.viewLayout.getVerticalOffsetForLineNumber(Ut),Dt=this._context.viewLayout.getVerticalOffsetForLineNumber(ui)+this._lineHeight}else{if(!P)return-1;Ge=!0,st=this._context.viewLayout.getVerticalOffsetForLineNumber(P.startLineNumber),Dt=this._context.viewLayout.getVerticalOffsetForLineNumber(P.endLineNumber)+this._lineHeight}let Et,Vt=0,Ht=0;if(s!=="mouse"&&!y||this._cursorSurroundingLinesStyle!=="default"){let Ut=Math.min(Be/this._lineHeight/2,this._cursorSurroundingLines);Vt=this._stickyScrollEnabled?Math.max(Ut,this._maxNumberStickyLines)*this._lineHeight:Ut*this._lineHeight,Ht=Math.max(0,Ut-1)*this._lineHeight}else y||(Vt=this._lineHeight);if(y||pe!==0&&pe!==4||(Ht+=this._lineHeight),st-=Vt,Dt+=Ht,Dt-st>Be){if(!Ge)return-1;Et=st}else if(pe===5||pe===6)if(pe===6&&Se<=st&&Dt<=it)Et=Se;else{let Ut=st-Math.max(5*this._lineHeight,.2*Be),ui=Dt-Be;Et=Math.max(ui,Ut)}else if(pe===1||pe===2)if(pe===2&&Se<=st&&Dt<=it)Et=Se;else{let Ut=(st+Dt)/2;Et=Math.max(0,Ut-Be/2)}else Et=this._computeMinimumScrolling(Se,it,st,Dt,pe===3,pe===4);return Et}_computeScrollLeftToReveal(e){let s=this._context.viewLayout.getCurrentViewport(),y=this._context.configuration.options.get(139),P=s.left,Q=P+s.width-y.verticalScrollbarWidth,pe=1073741824,Se=0;if(e.type==="range"){let Be=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!Be)return null;for(let it of Be.ranges)pe=Math.min(pe,Math.round(it.left)),Se=Math.max(Se,Math.round(it.left+it.width))}else for(let Be of e.selections){if(Be.startLineNumber!==Be.endLineNumber)return null;let it=this._visibleRangesForLineRange(Be.startLineNumber,Be.startColumn,Be.endColumn);if(!it)return null;for(let Ge of it.ranges)pe=Math.min(pe,Math.round(Ge.left)),Se=Math.max(Se,Math.round(Ge.left+Ge.width))}return e.minimalReveal||(pe=Math.max(0,pe-un.HORIZONTAL_EXTRA_PX),Se+=this._revealHorizontalRightPadding),e.type==="selections"&&Se-pe>s.width?null:{scrollLeft:this._computeMinimumScrolling(P,Q,pe,Se),maxHorizontalOffset:Se}}_computeMinimumScrolling(e,s,y,P,Q,pe){Q=!!Q,pe=!!pe;let Se=(s|=0)-(e|=0);return(P|=0)-(y|=0)<Se?Q?y:pe?Math.max(0,P-Se):y<e?y:P>s?Math.max(0,P-Se):e:y}}un.HORIZONTAL_EXTRA_PX=30;class Ln extends oi{constructor(e){super(),this._context=e;let s=this._context.configuration.options.get(139);this._decorationsLeft=s.decorationsLeft,this._decorationsWidth=s.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options.get(139);return this._decorationsLeft=s.decorationsLeft,this._decorationsWidth=s.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let s=e.getDecorationsInViewport(),y=[],P=0;for(let Q=0,pe=s.length;Q<pe;Q++){let Se=s[Q],Be=Se.options.linesDecorationsClassName,it=Se.options.zIndex;Be&&(y[P++]=new mt(Se.range.startLineNumber,Se.range.endLineNumber,Be,it));let Ge=Se.options.firstLineDecorationClassName;Ge&&(y[P++]=new mt(Se.range.startLineNumber,Se.range.startLineNumber,Ge,it))}return y}prepareRender(e){let s=e.visibleRange.startLineNumber,y=e.visibleRange.endLineNumber,P=this._render(s,y,this._getDecorations(e),1),Q='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',pe=[];for(let Se=s;Se<=y;Se++){let Be=Se-s,it=P[Be].getLaneDecorations(1),Ge="";for(let st of it)Ge+='<div class="cldr '+st.className+Q;pe[Be]=Ge}this._renderResult=pe}render(e,s){return this._renderResult?this._renderResult[s-e]:""}}class pn extends oi{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let s=e.getDecorationsInViewport(),y=[],P=0;for(let Q=0,pe=s.length;Q<pe;Q++){let Se=s[Q],Be=Se.options.marginClassName,it=Se.options.zIndex;Be&&(y[P++]=new mt(Se.range.startLineNumber,Se.range.endLineNumber,Be,it))}return y}prepareRender(e){let s=e.visibleRange.startLineNumber,y=e.visibleRange.endLineNumber,P=this._render(s,y,this._getDecorations(e),1),Q=[];for(let pe=s;pe<=y;pe++){let Se=pe-s,Be=P[Se].getLaneDecorations(1),it="";for(let Ge of Be)it+='<div class="cmdr '+Ge.className+'" style=""></div>';Q[Se]=it}this._renderResult=Q}render(e,s){return this._renderResult?this._renderResult[s-e]:""}}var _n=t(3911);class dn{constructor(e,s,y,P){this._rgba8Brand=void 0,this.r=dn._clamp(e),this.g=dn._clamp(s),this.b=dn._clamp(y),this.a=dn._clamp(P)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}}dn.Empty=new dn(0,0,0,0);class wn extends d.JT{static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,d.dk)(new wn)),this._INSTANCE}constructor(){super(),this._onDidChange=new f.Q5,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Ri.RW.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){let e=Ri.RW.getColorMap();if(!e)return this._colors=[dn.Empty],void(this._backgroundIsLight=!0);this._colors=[dn.Empty];for(let y=1;y<e.length;y++){let P=e[y].rgba;this._colors[y]=new dn(P.r,P.g,P.b,Math.round(255*P.a))}let s=e[2].getRelativeLuminance();this._backgroundIsLight=s>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}wn._INSTANCE=null;var St=t(1118),he=t(3910);let Me=(()=>{let Ct=[];for(let e=32;e<=126;e++)Ct.push(e);return Ct.push(65533),Ct})();var nt=t(5427);class pt{constructor(e,s){this.scale=s,this._minimapCharRendererBrand=void 0,this.charDataNormal=pt.soften(e,.8),this.charDataLight=pt.soften(e,.8333333333333334)}static soften(e,s){let y=new Uint8ClampedArray(e.length);for(let P=0,Q=e.length;P<Q;P++)y[P]=(0,nt.K)(e[P]*s);return y}renderChar(e,s,y,P,Q,pe,Se,Be,it,Ge,st){let Dt=1*this.scale,Et=2*this.scale,Vt=st?1:Et;if(s+Dt>e.width||y+Vt>e.height)return void console.warn("bad render request outside image data");let Ht=Ge?this.charDataLight:this.charDataNormal,Ut=((mn,hn)=>(mn-=32)<0||mn>96?hn<=2?(mn+96)%96:95:mn)(P,it),ui=4*e.width,gi=Se.r,vi=Se.g,Bi=Se.b,Di=Q.r-gi,Hi=Q.g-vi,Ui=Q.b-Bi,Ii=Math.max(pe,Be),Ki=e.data,Zi=Ut*Dt*Et,cn=y*ui+4*s;for(let mn=0;mn<Vt;mn++){let hn=cn;for(let Hn=0;Hn<Dt;Hn++){let $n=Ht[Zi++]/255*(pe/255);Ki[hn++]=gi+Di*$n,Ki[hn++]=vi+Hi*$n,Ki[hn++]=Bi+Ui*$n,Ki[hn++]=Ii}cn+=ui}}blockRenderChar(e,s,y,P,Q,pe,Se,Be){let it=1*this.scale,Ge=2*this.scale,st=Be?1:Ge;if(s+it>e.width||y+st>e.height)return void console.warn("bad render request outside image data");let Dt=4*e.width,Et=Q/255*.5,Vt=pe.r,Ht=pe.g,Ut=pe.b,ui=Vt+(P.r-Vt)*Et,gi=Ht+(P.g-Ht)*Et,vi=Ut+(P.b-Ut)*Et,Bi=Math.max(Q,Se),Di=e.data,Hi=y*Dt+4*s;for(let Ui=0;Ui<st;Ui++){let Ii=Hi;for(let Ki=0;Ki<it;Ki++)Di[Ii++]=ui,Di[Ii++]=gi,Di[Ii++]=vi,Di[Ii++]=Bi;Hi+=Dt}}}var Ke=t(8289);let S={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},V=Ct=>{let e=new Uint8ClampedArray(Ct.length/2);for(let s=0;s<Ct.length;s+=2)e[s>>1]=S[Ct[s]]<<4|15&S[Ct[s+1]];return e},Y={1:(0,Ke.I)(()=>V("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:(0,Ke.I)(()=>V("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class we{static create(e,s){if(this.lastCreated&&e===this.lastCreated.scale&&s===this.lastFontFamily)return this.lastCreated;let y;return y=Y[e]?new pt(Y[e](),e):we.createFromSampleData(we.createSampleData(s).data,e),this.lastFontFamily=s,this.lastCreated=y,y}static createSampleData(e){let s=document.createElement("canvas"),y=s.getContext("2d");s.style.height="16px",s.height=16,s.width=960,s.style.width="960px",y.fillStyle="#ffffff",y.font=`bold 16px ${e}`,y.textBaseline="middle";let P=0;for(let Q of Me)y.fillText(String.fromCharCode(Q),P,8),P+=10;return y.getImageData(0,0,960,16)}static createFromSampleData(e,s){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let y=we._downsample(e,s);return new pt(y,s)}static _downsampleChar(e,s,y,P,Q){let pe=1*Q,Se=2*Q,Be=P,it=0;for(let Ge=0;Ge<Se;Ge++){let st=Ge/Se*16,Dt=(Ge+1)/Se*16;for(let Et=0;Et<pe;Et++){let Vt=Et/pe*10,Ht=(Et+1)/pe*10,Ut=0,ui=0;for(let vi=st;vi<Dt;vi++){let Bi=s+3840*Math.floor(vi),Di=1-(vi-Math.floor(vi));for(let Hi=Vt;Hi<Ht;Hi++){let Ui=1-(Hi-Math.floor(Hi)),Ii=Bi+4*Math.floor(Hi),Ki=Ui*Di;ui+=Ki,Ut+=e[Ii]*e[Ii+3]/255*Ki}}let gi=Ut/ui;it=Math.max(it,gi),y[Be++]=(0,nt.K)(gi)}}return it}static _downsample(e,s){let y=2*s*1*s,P=96*y,Q=new Uint8ClampedArray(P),pe=0,Se=0,Be=0;for(let it=0;it<96;it++)Be=Math.max(Be,this._downsampleChar(e,Se,Q,pe,s)),pe+=y,Se+=40;if(Be>0){let it=255/Be;for(let Ge=0;Ge<P;Ge++)Q[Ge]*=it}return Q}}var Ne=t(4973);class Oe{constructor(e,s,y){let P=e.options,Q=P.get(137),pe=P.get(139),Se=pe.minimap,Be=P.get(48),it=P.get(70);this.renderMinimap=Se.renderMinimap,this.size=it.size,this.minimapHeightIsEditorHeight=Se.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=P.get(100),this.paddingTop=P.get(81).top,this.paddingBottom=P.get(81).bottom,this.showSlider=it.showSlider,this.autohide=it.autohide,this.pixelRatio=Q,this.typicalHalfwidthCharacterWidth=Be.typicalHalfwidthCharacterWidth,this.lineHeight=P.get(64),this.minimapLeft=Se.minimapLeft,this.minimapWidth=Se.minimapWidth,this.minimapHeight=pe.height,this.canvasInnerWidth=Se.minimapCanvasInnerWidth,this.canvasInnerHeight=Se.minimapCanvasInnerHeight,this.canvasOuterWidth=Se.minimapCanvasOuterWidth,this.canvasOuterHeight=Se.minimapCanvasOuterHeight,this.isSampling=Se.minimapIsSampling,this.editorHeight=pe.height,this.fontScale=Se.minimapScale,this.minimapLineHeight=Se.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=(0,Ke.I)(()=>we.create(this.fontScale,Be.fontFamily)),this.defaultBackgroundColor=y.getColor(2),this.backgroundColor=Oe._getMinimapBackground(s,this.defaultBackgroundColor),this.foregroundAlpha=Oe._getMinimapForegroundOpacity(s)}static _getMinimapBackground(e,s){let y=e.getColor(he.kVY);return y?new dn(y.rgba.r,y.rgba.g,y.rgba.b,Math.round(255*y.rgba.a)):s}static _getMinimapForegroundOpacity(e){let s=e.getColor(he.Itd);return s?dn._clamp(Math.round(255*s.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class et{constructor(e,s,y,P,Q,pe,Se,Be,it){this.scrollTop=e,this.scrollHeight=s,this.sliderNeeded=y,this._computedSliderRatio=P,this.sliderTop=Q,this.sliderHeight=pe,this.topPaddingLineCount=Se,this.startLineNumber=Be,this.endLineNumber=it}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){let s=Math.max(this.startLineNumber,e.startLineNumber),y=Math.min(this.endLineNumber,e.endLineNumber);return s>y?null:[s,y]}getYForLineNumber(e,s){return+(e-this.startLineNumber+this.topPaddingLineCount)*s}static create(e,s,y,P,Q,pe,Se,Be,it,Ge,st){let Dt=e.pixelRatio,Et=e.minimapLineHeight,Vt=Math.floor(e.canvasInnerHeight/Et),Ht=e.lineHeight;if(e.minimapHeightIsEditorHeight){let Hi=Be*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(Hi+=Math.max(0,Q-e.lineHeight-e.paddingBottom));let Ui=Math.max(1,Math.floor(Q*Q/Hi)),Ii=Math.max(0,e.minimapHeight-Ui),Ki=Ii/(Ge-Q),Zi=it*Ki,cn=Ii>0,mn=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),hn=Math.floor(e.paddingTop/e.lineHeight);return new et(it,Ge,cn,Ki,Zi,Ui,hn,1,Math.min(Se,mn))}let Ut;if(pe&&y!==Se){let Hi=y-s+1;Ut=Math.floor(Hi*Et/Dt)}else{let Hi=Q/Ht;Ut=Math.floor(Hi*Et/Dt)}let ui=Math.floor(e.paddingTop/Ht),gi,vi=Math.floor(e.paddingBottom/Ht);if(e.scrollBeyondLastLine){let Hi=Q/Ht;vi=Math.max(vi,Hi-1)}gi=vi>0?(ui+Se+vi-Q/Ht-1)*Et/Dt:Math.max(0,(ui+Se)*Et/Dt-Ut),gi=Math.min(e.minimapHeight-Ut,gi);let Bi=gi/(Ge-Q),Di=it*Bi;if(Vt>=ui+Se+vi)return new et(it,Ge,gi>0,Bi,Di,Ut,ui,1,Se);{let Hi,Ui;Hi=s>1?s+ui:Math.max(1,it/Ht);let Ii=Math.max(1,Math.floor(Hi-Di*Dt/Et));Ii<ui?(Ui=ui-Ii+1,Ii=1):(Ui=0,Ii=Math.max(1,Ii-ui)),st&&st.scrollHeight===Ge&&(st.scrollTop>it&&(Ii=Math.min(Ii,st.startLineNumber),Ui=Math.max(Ui,st.topPaddingLineCount)),st.scrollTop<it&&(Ii=Math.max(Ii,st.startLineNumber),Ui=Math.min(Ui,st.topPaddingLineCount)));let Ki=Math.min(Se,Ii-Ui+Vt-1),Zi=(it-P)/Ht,cn;return cn=it>e.paddingTop?(s-Ii+Ui+Zi)*Et/Dt:it/e.paddingTop*(Ui+Zi)*Et/Dt,new et(it,Ge,!0,Bi,cn,Ut,Ui,Ii,Ki)}}}class at{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}at.INVALID=new at(-1);class lt{constructor(e,s,y){this.renderedLayout=e,this._imageData=s,this._renderedLines=new Pe(()=>at.INVALID),this._renderedLines._set(e.startLineNumber,y)}linesEquals(e){if(!this.scrollEquals(e))return!1;let s=this._renderedLines._get().lines;for(let y=0,P=s.length;y<P;y++)if(s[y].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,s){return this._renderedLines.onLinesChanged(e,s)}onLinesDeleted(e,s){this._renderedLines.onLinesDeleted(e,s)}onLinesInserted(e,s){this._renderedLines.onLinesInserted(e,s)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class _t{constructor(e,s,y,P){this._backgroundFillData=_t._createBackgroundFillData(s,y,P),this._buffers=[e.createImageData(s,y),e.createImageData(s,y)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,s,y){let P=y.r,Q=y.g,pe=y.b,Se=y.a,Be=new Uint8ClampedArray(e*s*4),it=0;for(let Ge=0;Ge<s;Ge++)for(let st=0;st<e;st++)Be[it]=P,Be[it+1]=Q,Be[it+2]=pe,Be[it+3]=Se,it+=4;return Be}}class gt{static compute(e,s,y){if(e.renderMinimap===0||!e.isSampling)return[null,[]];let{minimapLineCount:P}=k.gk.computeContainedMinimapLineCount({viewLineCount:s,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),Q=s/P,pe=Q/2;if(!y||y.minimapLines.length===0){let Ht=[];if(Ht[0]=1,P>1){for(let Ut=0,ui=P-1;Ut<ui;Ut++)Ht[Ut]=Math.round(Ut*Q+pe);Ht[P-1]=s}return[new gt(Q,Ht),[]]}let Se=y.minimapLines,Be=Se.length,it=[],Ge=0,st=0,Dt=1,Et=[],Vt=null;for(let Ht=0;Ht<P;Ht++){let Ut=Math.max(Dt,Math.round(Ht*Q)),ui=Math.max(Ut,Math.round((Ht+1)*Q));for(;Ge<Be&&Se[Ge]<Ut;){if(Et.length<10){let vi=Ge+1+st;Vt&&Vt.type==="deleted"&&Vt._oldIndex===Ge-1?Vt.deleteToLineNumber++:(Vt={type:"deleted",_oldIndex:Ge,deleteFromLineNumber:vi,deleteToLineNumber:vi},Et.push(Vt)),st--}Ge++}let gi;if(Ge<Be&&Se[Ge]<=ui)gi=Se[Ge],Ge++;else if(gi=Ht===0?1:Ht+1===P?s:Math.round(Ht*Q+pe),Et.length<10){let vi=Ge+1+st;Vt&&Vt.type==="inserted"&&Vt._i===Ht-1?Vt.insertToLineNumber++:(Vt={type:"inserted",_i:Ht,insertFromLineNumber:vi,insertToLineNumber:vi},Et.push(Vt)),st++}it[Ht]=gi,Dt=gi}if(Et.length<10)for(;Ge<Be;){let Ht=Ge+1+st;Vt&&Vt.type==="deleted"&&Vt._oldIndex===Ge-1?Vt.deleteToLineNumber++:(Vt={type:"deleted",_oldIndex:Ge,deleteFromLineNumber:Ht,deleteToLineNumber:Ht},Et.push(Vt)),st--,Ge++}else Et=[{type:"flush"}];return[new gt(Q,it),Et]}constructor(e,s){this.samplingRatio=e,this.minimapLines=s}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,s){let y=this.modelLineToMinimapLine(e)-1;for(;y>0&&this.minimapLines[y-1]>=e;)y--;let P=this.modelLineToMinimapLine(s)-1;for(;P+1<this.minimapLines.length&&this.minimapLines[P+1]<=s;)P++;if(y===P){let Q=this.minimapLines[y];if(Q<e||Q>s)return null}return[y+1,P+1]}decorationLineRangeToMinimapLineRange(e,s){let y=this.modelLineToMinimapLine(e),P=this.modelLineToMinimapLine(s);return e!==s&&P===y&&(P===this.minimapLines.length?y>1&&y--:P++),[y,P]}onLinesDeleted(e){let s=e.toLineNumber-e.fromLineNumber+1,y=this.minimapLines.length,P=0;for(let Q=this.minimapLines.length-1;Q>=0&&!(this.minimapLines[Q]<e.fromLineNumber);Q--)this.minimapLines[Q]<=e.toLineNumber?(this.minimapLines[Q]=Math.max(1,e.fromLineNumber-1),y=Math.min(y,Q),P=Math.max(P,Q)):this.minimapLines[Q]-=s;return[y,P]}onLinesInserted(e){let s=e.toLineNumber-e.fromLineNumber+1;for(let y=this.minimapLines.length-1;y>=0&&!(this.minimapLines[y]<e.fromLineNumber);y--)this.minimapLines[y]+=s}}class Ft extends p{constructor(e){super(e),this.tokensColorTracker=wn.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Oe(this._context.configuration,this._context.theme,this.tokensColorTracker);let[s]=gt.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=s,this._shouldCheckSampling=!1,this._actual=new Zt(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new Oe(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){let s=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!s&&this._actual.onLinesChanged(s[0],s[1]-s[0]+1)}return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){let[s,y]=this._samplingState.onLinesDeleted(e);return s<=y&&this._actual.onLinesChanged(s+1,y-s+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let s=[];for(let y of e.ranges){let P=this._samplingState.modelLineRangeToMinimapLineRange(y.fromLineNumber,y.toLineNumber);P&&s.push({fromLineNumber:P[0],toLineNumber:P[1]})}return!!s.length&&this._actual.onTokensChanged(s)}return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let s=e.visibleRange.startLineNumber,y=e.visibleRange.endLineNumber;this._samplingState&&(s=this._samplingState.modelLineToMinimapLine(s),y=this._samplingState.modelLineToMinimapLine(y));let P={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:s,viewportEndLineNumber:y,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(s),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(P)}_recreateLineSampling(){this._minimapSelections=null;let e=!!this._samplingState,[s,y]=gt.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=s,e&&this._samplingState)for(let P of y)switch(P.type){case"deleted":this._actual.onLinesDeleted(P.deleteFromLineNumber,P.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(P.insertFromLineNumber,P.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,s,y){if(this._samplingState){let P=[];for(let Q=0,pe=s-e+1;Q<pe;Q++)y[Q]?P[Q]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+Q-1]):P[Q]=null;return P}return this._context.viewModel.getMinimapLinesRenderingData(e,s,y).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(let e of this._selections){let[s,y]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new H.Y(s,e.startColumn,y,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,s){let y;if(this._samplingState){let Q=this._samplingState.minimapLines[e-1],pe=this._samplingState.minimapLines[s-1];y=new me.e(Q,1,pe,this._context.viewModel.getLineMaxColumn(pe))}else y=new me.e(e,1,s,this._context.viewModel.getLineMaxColumn(s));let P=this._context.viewModel.getMinimapDecorationsInRange(y);if(this._samplingState){let Q=[];for(let pe of P){if(!pe.options.minimap)continue;let Se=pe.range,Be=this._samplingState.modelLineToMinimapLine(Se.startLineNumber),it=this._samplingState.modelLineToMinimapLine(Se.endLineNumber);Q.push(new St.$l(new me.e(Be,Se.startColumn,it,Se.endColumn),pe.options))}return Q}return P}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new me.e(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class Zt extends d.JT{constructor(e,s){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=s,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(he.ov3),this._domNode=(0,z.X)(document.createElement("div")),re.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,z.X)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,z.X)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,z.X)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,z.X)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,z.X)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=x.mu(this._domNode.domNode,x.tw.POINTER_DOWN,y=>{if(y.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(y.button===0&&this._lastRenderData){let Se=x.i(this._slider.domNode),Be=Se.top+Se.height/2;this._startSliderDragging(y,Be,this._lastRenderData.renderedLayout)}return}let P=this._model.options.minimapLineHeight,Q=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*y.offsetY,pe=Math.floor(Q/P)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;pe=Math.min(pe,this._model.getLineCount()),this._model.revealLineNumber(pe)}),this._sliderPointerMoveMonitor=new _n.C,this._sliderPointerDownListener=x.mu(this._slider.domNode,x.tw.POINTER_DOWN,y=>{y.preventDefault(),y.stopPropagation(),y.button===0&&this._lastRenderData&&this._startSliderDragging(y,y.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=J.o.addTarget(this._domNode.domNode),this._sliderTouchStartListener=x.nm(this._domNode.domNode,J.t.Start,y=>{y.preventDefault(),y.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(y))},{passive:!1}),this._sliderTouchMoveListener=x.nm(this._domNode.domNode,J.t.Change,y=>{y.preventDefault(),y.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(y)},{passive:!1}),this._sliderTouchEndListener=x.mu(this._domNode.domNode,J.t.End,y=>{y.preventDefault(),y.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,s,y){if(!(e.target&&e.target instanceof Element))return;let P=e.pageX;this._slider.toggleClassName("active",!0);let Q=(pe,Se)=>{let Be=x.i(this._domNode.domNode),it=Math.min(Math.abs(Se-P),Math.abs(Se-Be.left),Math.abs(Se-Be.left-Be.width));if(c.ED&&it>140)return void this._model.setScrollTop(y.scrollTop);let Ge=pe-s;this._model.setScrollTop(y.getDesiredScrollTopFromDelta(Ge))};e.pageY!==s&&Q(e.pageY,P),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,pe=>Q(pe.pageY,pe.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){let s=this._domNode.domNode.getBoundingClientRect().top,y=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-s);this._model.setScrollTop(y)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){let e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new _t(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,s){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,s)}onLinesDeleted(e,s){var y;return(y=this._lastRenderData)===null||y===void 0||y.onLinesDeleted(e,s),!0}onLinesInserted(e,s){var y;return(y=this._lastRenderData)===null||y===void 0||y.onLinesInserted(e,s),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(he.ov3),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");let s=et.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(s.sliderNeeded?"block":"none"),this._slider.setTop(s.sliderTop),this._slider.setHeight(s.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(s.sliderHeight),this.renderDecorations(s),this._lastRenderData=this.renderLines(s)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let s=this._model.getSelections();s.sort(me.e.compareRangesUsingStarts);let y=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);y.sort((Dt,Et)=>(Dt.options.zIndex||0)-(Et.options.zIndex||0));let{canvasInnerWidth:P,canvasInnerHeight:Q}=this._model.options,pe=this._model.options.minimapLineHeight,Se=this._model.options.minimapCharWidth,Be=this._model.getOptions().tabSize,it=this._decorationsCanvas.domNode.getContext("2d");it.clearRect(0,0,P,Q);let Ge=new ii(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(it,s,Ge,e,pe),this._renderDecorationsLineHighlights(it,y,Ge,e,pe);let st=new ii(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(it,s,st,e,pe,Be,Se,P),this._renderDecorationsHighlights(it,y,st,e,pe,Be,Se,P)}}_renderSelectionLineHighlights(e,s,y,P,Q){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let pe=0,Se=0;for(let Be of s){let it=P.intersectWithViewport(Be);if(!it)continue;let[Ge,st]=it;for(let Vt=Ge;Vt<=st;Vt++)y.set(Vt,!0);let Dt=P.getYForLineNumber(Ge,Q),Et=P.getYForLineNumber(st,Q);Se>=Dt||(Se>pe&&e.fillRect(k.y0,pe,e.canvas.width,Se-pe),pe=Dt),Se=Et}Se>pe&&e.fillRect(k.y0,pe,e.canvas.width,Se-pe)}_renderDecorationsLineHighlights(e,s,y,P,Q){let pe=new Map;for(let Se=s.length-1;Se>=0;Se--){let Be=s[Se],it=Be.options.minimap;if(!it||it.position!==Ne.F5.Inline)continue;let Ge=P.intersectWithViewport(Be.range);if(!Ge)continue;let[st,Dt]=Ge,Et=it.getColor(this._theme.value);if(!Et||Et.isTransparent())continue;let Vt=pe.get(Et.toString());Vt||(Vt=Et.transparent(.5).toString(),pe.set(Et.toString(),Vt)),e.fillStyle=Vt;for(let Ht=st;Ht<=Dt;Ht++){if(y.has(Ht))continue;y.set(Ht,!0);let Ut=P.getYForLineNumber(st,Q);e.fillRect(k.y0,Ut,e.canvas.width,Q)}}}_renderSelectionsHighlights(e,s,y,P,Q,pe,Se,Be){if(this._selectionColor&&!this._selectionColor.isTransparent())for(let it of s){let Ge=P.intersectWithViewport(it);if(!Ge)continue;let[st,Dt]=Ge;for(let Et=st;Et<=Dt;Et++)this.renderDecorationOnLine(e,y,it,this._selectionColor,P,Et,Q,Q,pe,Se,Be)}}_renderDecorationsHighlights(e,s,y,P,Q,pe,Se,Be){for(let it of s){let Ge=it.options.minimap;if(!Ge)continue;let st=P.intersectWithViewport(it.range);if(!st)continue;let[Dt,Et]=st,Vt=Ge.getColor(this._theme.value);if(Vt&&!Vt.isTransparent())for(let Ht=Dt;Ht<=Et;Ht++)switch(Ge.position){case Ne.F5.Inline:this.renderDecorationOnLine(e,y,it.range,Vt,P,Ht,Q,Q,pe,Se,Be);continue;case Ne.F5.Gutter:{let Ut=P.getYForLineNumber(Ht,Q),ui=2;this.renderDecoration(e,Vt,ui,Ut,2,Q);continue}}}}renderDecorationOnLine(e,s,y,P,Q,pe,Se,Be,it,Ge,st){let Dt=Q.getYForLineNumber(pe,Be);if(Dt+Se<0||Dt>this._model.options.canvasInnerHeight)return;let{startLineNumber:Et,endLineNumber:Vt}=y,Ht=Et===pe?y.startColumn:1,Ut=Vt===pe?y.endColumn:this._model.getLineMaxColumn(pe),ui=this.getXOffsetForPosition(s,pe,Ht,it,Ge,st),gi=this.getXOffsetForPosition(s,pe,Ut,it,Ge,st);this.renderDecoration(e,P,ui,Dt,gi-ui,Se)}getXOffsetForPosition(e,s,y,P,Q,pe){if(y===1)return k.y0;if((y-1)*Q>=pe)return pe;let Se=e.get(s);if(!Se){let Be=this._model.getLineContent(s);Se=[k.y0];let it=k.y0;for(let Ge=1;Ge<Be.length+1;Ge++){let st=Be.charCodeAt(Ge-1),Dt=it+(st===9?P*Q:ci.K7(st)?2*Q:Q);if(Dt>=pe){Se[Ge]=pe;break}Se[Ge]=Dt,it=Dt}e.set(s,Se)}return y-1<Se.length?Se[y-1]:pe}renderDecoration(e,s,y,P,Q,pe){e.fillStyle=s&&s.toString()||"",e.fillRect(y,P,Q,pe)}renderLines(e){let s=e.startLineNumber,y=e.endLineNumber,P=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){let mn=this._lastRenderData._get();return new lt(e,mn.imageData,mn.lines)}let Q=this._getBuffer();if(!Q)return null;let[pe,Se,Be]=Zt._renderUntouchedLines(Q,e.topPaddingLineCount,s,y,P,this._lastRenderData),it=this._model.getMinimapLinesRenderingData(s,y,Be),Ge=this._model.getOptions().tabSize,st=this._model.options.defaultBackgroundColor,Dt=this._model.options.backgroundColor,Et=this._model.options.foregroundAlpha,Vt=this._model.tokensColorTracker,Ht=Vt.backgroundIsLight(),Ut=this._model.options.renderMinimap,ui=this._model.options.charRenderer(),gi=this._model.options.fontScale,vi=this._model.options.minimapCharWidth,Bi=(Ut===1?2:3)*gi,Di=P>Bi?Math.floor((P-Bi)/2):0,Hi=Dt.a/255,Ui=new dn(Math.round((Dt.r-st.r)*Hi+st.r),Math.round((Dt.g-st.g)*Hi+st.g),Math.round((Dt.b-st.b)*Hi+st.b),255),Ii=e.topPaddingLineCount*P,Ki=[];for(let mn=0,hn=y-s+1;mn<hn;mn++)Be[mn]&&Zt._renderLine(Q,Ui,Dt.a,Ht,Ut,vi,Vt,Et,ui,Ii,Di,Ge,it[mn],gi,P),Ki[mn]=new at(Ii),Ii+=P;let Zi=pe===-1?0:pe,cn=(Se===-1?Q.height:Se)-Zi;return this._canvas.domNode.getContext("2d").putImageData(Q,0,0,0,Zi,Q.width,cn),new lt(e,Q,Ki)}static _renderUntouchedLines(e,s,y,P,Q,pe){let Se=[];if(!pe){for(let Ui=0,Ii=P-y+1;Ui<Ii;Ui++)Se[Ui]=!0;return[-1,-1,Se]}let Be=pe._get(),it=Be.imageData.data,Ge=Be.rendLineNumberStart,st=Be.lines,Dt=st.length,Et=e.width,Vt=e.data,Ht=(P-y+1)*Q*Et*4,Ut=-1,ui=-1,gi=-1,vi=-1,Bi=-1,Di=-1,Hi=s*Q;for(let Ui=y;Ui<=P;Ui++){let Ii=Ui-y,Ki=Ui-Ge,Zi=Ki>=0&&Ki<Dt?st[Ki].dy:-1;if(Zi===-1){Se[Ii]=!0,Hi+=Q;continue}let cn=Zi*Et*4,mn=(Zi+Q)*Et*4,hn=Hi*Et*4,Hn=(Hi+Q)*Et*4;vi===cn&&Di===hn?(vi=mn,Di=Hn):(gi!==-1&&(Vt.set(it.subarray(gi,vi),Bi),Ut===-1&&gi===0&&gi===Bi&&(Ut=vi),ui===-1&&vi===Ht&&gi===Bi&&(ui=gi)),gi=cn,vi=mn,Bi=hn,Di=Hn),Se[Ii]=!1,Hi+=Q}return gi!==-1&&(Vt.set(it.subarray(gi,vi),Bi),Ut===-1&&gi===0&&gi===Bi&&(Ut=vi),ui===-1&&vi===Ht&&gi===Bi&&(ui=gi)),[Ut===-1?-1:Ut/(4*Et),ui===-1?-1:ui/(4*Et),Se]}static _renderLine(e,s,y,P,Q,pe,Se,Be,it,Ge,st,Dt,Et,Vt,Ht){let Ut=Et.content,ui=Et.tokens,gi=e.width-pe,vi=Ht===1,Bi=k.y0,Di=0,Hi=0;for(let Ui=0,Ii=ui.getCount();Ui<Ii;Ui++){let Ki=ui.getEndOffset(Ui),Zi=ui.getForeground(Ui),cn=Se.getColor(Zi);for(;Di<Ki;Di++){if(Bi>gi)return;let mn=Ut.charCodeAt(Di);if(mn===9){let hn=Dt-(Di+Hi)%Dt;Hi+=hn-1,Bi+=hn*pe}else if(mn===32)Bi+=pe;else{let hn=ci.K7(mn)?2:1;for(let Hn=0;Hn<hn;Hn++)if(Q===2?it.blockRenderChar(e,Bi,Ge+st,cn,Be,s,y,vi):it.renderChar(e,Bi,Ge+st,mn,cn,Be,s,y,Vt,P,vi),Bi+=pe,Bi>gi)return}}}}}class ii{constructor(e,s,y){this._startLineNumber=e,this._endLineNumber=s,this._defaultValue=y,this._values=[];for(let P=0,Q=this._endLineNumber-this._startLineNumber+1;P<Q;P++)this._values[P]=y}has(e){return this.get(e)!==this._defaultValue}set(e,s){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=s)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class hi extends p{constructor(e){super(e);let s=this._context.configuration.options.get(139);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._domNode=(0,z.X)(document.createElement("div")),re.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let s=this._context.configuration.options.get(139);return this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,!0}addWidget(e){let s=(0,z.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:s},s.setPosition("absolute"),s.setAttribute("widgetId",e.getId()),this._domNode.appendChild(s),this.setShouldRender()}setWidgetPosition(e,s){let y=this._widgets[e.getId()];return y.preference!==s&&(y.preference=s,this.setShouldRender(),!0)}removeWidget(e){let s=e.getId();if(this._widgets.hasOwnProperty(s)){let y=this._widgets[s].domNode.domNode;delete this._widgets[s],y.parentNode.removeChild(y),this.setShouldRender()}}_renderWidget(e){let s=e.domNode;if(e.preference!==null)if(e.preference===0)s.setTop(0),s.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){let y=s.domNode.clientHeight;s.setTop(this._editorHeight-y-2*this._horizontalScrollbarHeight),s.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(s.setTop(0),s.domNode.style.right="50%");else s.setTop("")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);let s=Object.keys(this._widgets);for(let y=0,P=s.length;y<P;y++){let Q=s[y];this._renderWidget(this._widgets[Q])}}}class wi{constructor(e,s){let y=e.options;this.lineHeight=y.get(64),this.pixelRatio=y.get(137),this.overviewRulerLanes=y.get(80),this.renderBorder=y.get(79);let P=s.getColor(Mt.zw);this.borderColor=P?P.toString():null,this.hideCursor=y.get(57);let Q=s.getColor(Mt.n0);this.cursorColor=Q?Q.transparent(.7).toString():null,this.themeType=s.type;let pe=y.get(70),Se=pe.enabled,Be=pe.side,it=s.getColor(Mt.e_),Ge=Ri.RW.getDefaultBackground();this.backgroundColor=it||(Se&&Be==="right"?Ge:null);let st=y.get(139).overviewRuler;this.top=st.top,this.right=st.right,this.domWidth=st.width,this.domHeight=st.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[Dt,Et]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=Dt,this.w=Et}_initLanes(e,s,y){let P=s-e;if(y>=3){let Q=Math.floor(P/3),pe=Math.floor(P/3),Se=P-Q-pe,Be=e+Q;return[[0,e,Be,e,e+Q+Se,e,Be,e],[0,Q,Se,Q+Se,pe,Q+Se+pe,Se+pe,Q+Se+pe]]}if(y===2){let Q=Math.floor(P/2),pe=P-Q;return[[0,e,e,e,e+Q,e,e,e],[0,Q,Q,Q,pe,Q+pe,Q+pe,Q+pe]]}return[[0,e,e,e,e,e,e,e],[0,P,P,P,P,P,P,P]]}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&Wt.Il.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Ei extends p{constructor(e){super(e),this._domNode=(0,z.X)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Ri.RW.onDidChange(s=>{s.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let s=new wi(this._context.configuration,this._context.theme);return!(this._settings&&this._settings.equals(s)||(this._settings=s,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),0))}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let s=0,y=e.selections.length;s<y;s++)this._cursorPositions[s]=e.selections[s].getPosition();return this._cursorPositions.sort(ee.L.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){let e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0)return this._domNode.setBackgroundColor(e?Wt.Il.Format.CSS.formatHexA(e):""),void this._domNode.setDisplay("none");this._domNode.setDisplay("block");let s=this._settings.canvasWidth,y=this._settings.canvasHeight,P=this._settings.lineHeight,Q=this._context.viewLayout,pe=y/this._context.viewLayout.getScrollHeight(),Se=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),Be=6*this._settings.pixelRatio|0,it=Be/2|0,Ge=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(Ge.fillStyle=Wt.Il.Format.CSS.formatHexA(e),Ge.fillRect(0,0,s,y)):(Ge.clearRect(0,0,s,y),Ge.fillStyle=Wt.Il.Format.CSS.formatHexA(e),Ge.fillRect(0,0,s,y)):Ge.clearRect(0,0,s,y);let st=this._settings.x,Dt=this._settings.w;Se.sort(St.SQ.cmp);for(let Et of Se){let Vt=Et.color,Ht=Et.data;Ge.fillStyle=Vt;let Ut=0,ui=0,gi=0;for(let vi=0,Bi=Ht.length/3;vi<Bi;vi++){let Di=Ht[3*vi],Hi=Ht[3*vi+1],Ui=Ht[3*vi+2],Ii=Q.getVerticalOffsetForLineNumber(Hi)*pe|0,Ki=(Q.getVerticalOffsetForLineNumber(Ui)+P)*pe|0;if(Ki-Ii<Be){let Zi=(Ii+Ki)/2|0;Zi<it?Zi=it:Zi+it>y&&(Zi=y-it),Ii=Zi-it,Ki=Zi+it}Ii>gi+1||Di!==Ut?(vi!==0&&Ge.fillRect(st[Ut],ui,Dt[Ut],gi-ui),Ut=Di,ui=Ii,gi=Ki):Ki>gi&&(gi=Ki)}Ge.fillRect(st[Ut],ui,Dt[Ut],gi-ui)}if(!this._settings.hideCursor&&this._settings.cursorColor){let Et=2*this._settings.pixelRatio|0,Vt=Et/2|0,Ht=this._settings.x[7],Ut=this._settings.w[7];Ge.fillStyle=this._settings.cursorColor;let ui=-100,gi=-100;for(let vi=0,Bi=this._cursorPositions.length;vi<Bi;vi++){let Di=this._cursorPositions[vi],Hi=Q.getVerticalOffsetForLineNumber(Di.lineNumber)*pe|0;Hi<Vt?Hi=Vt:Hi+Vt>y&&(Hi=y-Vt);let Ui=Hi-Vt,Ii=Ui+Et;Ui>gi+1?(vi!==0&&Ge.fillRect(Ht,ui,Ut,gi-ui),ui=Ui,gi=Ii):Ii>gi&&(gi=Ii)}Ge.fillRect(Ht,ui,Ut,gi-ui)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(Ge.beginPath(),Ge.lineWidth=1,Ge.strokeStyle=this._settings.borderColor,Ge.moveTo(0,0),Ge.lineTo(0,y),Ge.stroke(),Ge.moveTo(0,0),Ge.lineTo(s,0),Ge.stroke())}}var xi=t(665);class bi extends q{constructor(e,s){super(),this._context=e;let y=this._context.configuration.options;this._domNode=(0,z.X)(document.createElement("canvas")),this._domNode.setClassName(s),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new xi.Tj(P=>this._context.viewLayout.getVerticalOffsetForLineNumber(P)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(y.get(64)),this._zoneManager.setPixelRatio(y.get(137)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options;return e.hasChanged(64)&&(this._zoneManager.setLineHeight(s.get(64)),this._render()),e.hasChanged(137)&&(this._zoneManager.setPixelRatio(s.get(137)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let s=!1;s=this._zoneManager.setDOMWidth(e.width)||s,s=this._zoneManager.setDOMHeight(e.height)||s,s&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;let e=this._zoneManager.getCanvasWidth(),s=this._zoneManager.getCanvasHeight(),y=this._zoneManager.resolveColorZones(),P=this._zoneManager.getId2Color(),Q=this._domNode.domNode.getContext("2d");return Q.clearRect(0,0,e,s),y.length>0&&this._renderOneLane(Q,y,P,e),!0}_renderOneLane(e,s,y,P){let Q=0,pe=0,Se=0;for(let Be of s){let it=Be.colorId,Ge=Be.from,st=Be.to;it!==Q?(e.fillRect(0,pe,P,Se-pe),Q=it,e.fillStyle=y[Q],pe=Ge,Se=st):Se>=Ge?Se=Math.max(Se,st):(e.fillRect(0,pe,P,Se-pe),pe=Ge,Se=st)}e.fillRect(0,pe,P,Se-pe)}}class vn extends p{constructor(e){super(e),this.domNode=(0,z.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let s=this._context.configuration.options;this._rulers=s.get(97),this._typicalHalfwidthCharacterWidth=s.get(48).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options;return this._rulers=s.get(97),this._typicalHalfwidthCharacterWidth=s.get(48).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,s=this._rulers.length;if(e===s)return;if(e<s){let{tabSize:P}=this._context.viewModel.model.getOptions(),Q=P,pe=s-e;for(;pe>0;){let Se=(0,z.X)(document.createElement("div"));Se.setClassName("view-ruler"),Se.setWidth(Q),this.domNode.appendChild(Se),this._renderedRulers.push(Se),pe--}return}let y=e-s;for(;y>0;){let P=this._renderedRulers.pop();this.domNode.removeChild(P),y--}}render(e){this._ensureRulersCount();for(let s=0,y=this._rulers.length;s<y;s++){let P=this._renderedRulers[s],Q=this._rulers[s];P.setBoxShadow(Q.color?`1px 0 0 0 ${Q.color} inset`:""),P.setHeight(Math.min(e.scrollHeight,1e6)),P.setLeft(Q.column*this._typicalHalfwidthCharacterWidth)}}}class Pn extends p{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let s=this._context.configuration.options.get(98);this._useShadows=s.useShadows,this._domNode=(0,z.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){let e=this._context.configuration.options.get(139);e.minimap.renderMinimap===0||e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}onConfigurationChanged(e){let s=this._context.configuration.options.get(98);return this._useShadows=s.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class xn{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Qn{constructor(e,s){this.lineNumber=e,this.ranges=s}}function ko(Ct){return new xn(Ct)}function go(Ct){return new Qn(Ct.lineNumber,Ct.ranges.map(ko))}class ji extends It{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;let s=this._context.configuration.options;this._lineHeight=s.get(64),this._roundedSelection=s.get(96),this._typicalHalfwidthCharacterWidth=s.get(48).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let s=this._context.configuration.options;return this._lineHeight=s.get(64),this._roundedSelection=s.get(96),this._typicalHalfwidthCharacterWidth=s.get(48).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let s=0,y=e.length;s<y;s++)if(e[s].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,s,y){let P=this._typicalHalfwidthCharacterWidth/4,Q=null,pe=null;if(y&&y.length>0&&s.length>0){let Se=s[0].lineNumber;if(Se===e.startLineNumber)for(let it=0;!Q&&it<y.length;it++)y[it].lineNumber===Se&&(Q=y[it].ranges[0]);let Be=s[s.length-1].lineNumber;if(Be===e.endLineNumber)for(let it=y.length-1;!pe&&it>=0;it--)y[it].lineNumber===Be&&(pe=y[it].ranges[0]);Q&&!Q.startStyle&&(Q=null),pe&&!pe.startStyle&&(pe=null)}for(let Se=0,Be=s.length;Se<Be;Se++){let it=s[Se].ranges[0],Ge=it.left,st=it.left+it.width,Dt={top:0,bottom:0},Et={top:0,bottom:0};if(Se>0){let Vt=s[Se-1].ranges[0].left,Ht=s[Se-1].ranges[0].left+s[Se-1].ranges[0].width;Tn(Ge-Vt)<P?Dt.top=2:Ge>Vt&&(Dt.top=1),Tn(st-Ht)<P?Et.top=2:Vt<st&&st<Ht&&(Et.top=1)}else Q&&(Dt.top=Q.startStyle.top,Et.top=Q.endStyle.top);if(Se+1<Be){let Vt=s[Se+1].ranges[0].left,Ht=s[Se+1].ranges[0].left+s[Se+1].ranges[0].width;Tn(Ge-Vt)<P?Dt.bottom=2:Vt<Ge&&Ge<Ht&&(Dt.bottom=1),Tn(st-Ht)<P?Et.bottom=2:st<Ht&&(Et.bottom=1)}else pe&&(Dt.bottom=pe.startStyle.bottom,Et.bottom=pe.endStyle.bottom);it.startStyle=Dt,it.endStyle=Et}}_getVisibleRangesWithStyle(e,s,y){let P=(s.linesVisibleRangesForRange(e,!0)||[]).map(go);return!this._visibleRangesHaveGaps(P)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(s.visibleRange,P,y),P}_createSelectionPiece(e,s,y,P,Q){return'<div class="cslr '+y+'" style="top:'+e.toString()+"px;left:"+P.toString()+"px;width:"+Q.toString()+"px;height:"+s+'px;"></div>'}_actualRenderOneSelection(e,s,y,P){if(P.length===0)return;let Q=!!P[0].ranges[0].startStyle,pe=this._lineHeight.toString(),Se=(this._lineHeight-1).toString(),Be=P[0].lineNumber,it=P[P.length-1].lineNumber;for(let Ge=0,st=P.length;Ge<st;Ge++){let Dt=P[Ge],Et=Dt.lineNumber,Vt=Et-s,Ht=!y||Et!==it&&Et!==Be?pe:Se,Ut=y&&Et===Be?1:0,ui="",gi="";for(let vi=0,Bi=Dt.ranges.length;vi<Bi;vi++){let Di=Dt.ranges[vi];if(Q){let Ui=Di.startStyle,Ii=Di.endStyle;if(Ui.top===1||Ui.bottom===1){ui+=this._createSelectionPiece(Ut,Ht,ji.SELECTION_CLASS_NAME,Di.left-ji.ROUNDED_PIECE_WIDTH,ji.ROUNDED_PIECE_WIDTH);let Ki=ji.EDITOR_BACKGROUND_CLASS_NAME;Ui.top===1&&(Ki+=" "+ji.SELECTION_TOP_RIGHT),Ui.bottom===1&&(Ki+=" "+ji.SELECTION_BOTTOM_RIGHT),ui+=this._createSelectionPiece(Ut,Ht,Ki,Di.left-ji.ROUNDED_PIECE_WIDTH,ji.ROUNDED_PIECE_WIDTH)}if(Ii.top===1||Ii.bottom===1){ui+=this._createSelectionPiece(Ut,Ht,ji.SELECTION_CLASS_NAME,Di.left+Di.width,ji.ROUNDED_PIECE_WIDTH);let Ki=ji.EDITOR_BACKGROUND_CLASS_NAME;Ii.top===1&&(Ki+=" "+ji.SELECTION_TOP_LEFT),Ii.bottom===1&&(Ki+=" "+ji.SELECTION_BOTTOM_LEFT),ui+=this._createSelectionPiece(Ut,Ht,Ki,Di.left+Di.width,ji.ROUNDED_PIECE_WIDTH)}}let Hi=ji.SELECTION_CLASS_NAME;if(Q){let Ui=Di.startStyle,Ii=Di.endStyle;Ui.top===0&&(Hi+=" "+ji.SELECTION_TOP_LEFT),Ui.bottom===0&&(Hi+=" "+ji.SELECTION_BOTTOM_LEFT),Ii.top===0&&(Hi+=" "+ji.SELECTION_TOP_RIGHT),Ii.bottom===0&&(Hi+=" "+ji.SELECTION_BOTTOM_RIGHT)}gi+=this._createSelectionPiece(Ut,Ht,Hi,Di.left,Di.width)}e[Vt][0]+=ui,e[Vt][1]+=gi}}prepareRender(e){let s=[],y=e.visibleRange.startLineNumber,P=e.visibleRange.endLineNumber;for(let pe=y;pe<=P;pe++)s[pe-y]=["",""];let Q=[];for(let pe=0,Se=this._selections.length;pe<Se;pe++){let Be=this._selections[pe];if(Be.isEmpty()){Q[pe]=null;continue}let it=this._getVisibleRangesWithStyle(Be,e,this._previousFrameVisibleRangesWithStyle[pe]);Q[pe]=it,this._actualRenderOneSelection(s,y,this._selections.length>1,it)}this._previousFrameVisibleRangesWithStyle=Q,this._renderResult=s.map(([pe,Se])=>pe+Se)}render(e,s){if(!this._renderResult)return"";let y=s-e;return y<0||y>=this._renderResult.length?"":this._renderResult[y]}}function Tn(Ct){return Ct<0?-Ct:Ct}ji.SELECTION_CLASS_NAME="selected-text",ji.SELECTION_TOP_LEFT="top-left-radius",ji.SELECTION_BOTTOM_LEFT="bottom-left-radius",ji.SELECTION_TOP_RIGHT="top-right-radius",ji.SELECTION_BOTTOM_RIGHT="bottom-right-radius",ji.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",ji.ROUNDED_PIECE_WIDTH=10,(0,ft.Ic)((Ct,e)=>{let s=Ct.getColor(he.yb5);s&&!s.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${s}; }`)});class bn{constructor(e,s,y,P,Q,pe,Se){this.top=e,this.left=s,this.paddingLeft=y,this.width=P,this.height=Q,this.textContent=pe,this.textContentClassName=Se}}class Fn{constructor(e){this._context=e;let s=this._context.configuration.options,y=s.get(48);this._cursorStyle=s.get(26),this._lineHeight=s.get(64),this._typicalHalfwidthCharacterWidth=y.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(s.get(29),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,z.X)(document.createElement("div")),this._domNode.setClassName(`cursor ${Si.S}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,Xt.N)(this._domNode,y),this._domNode.setDisplay("none"),this._position=new ee.L(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(48);return this._cursorStyle=s.get(26),this._lineHeight=s.get(64),this._typicalHalfwidthCharacterWidth=y.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(s.get(29),this._typicalHalfwidthCharacterWidth),(0,Xt.N)(this._domNode,y),!0}onCursorPositionChanged(e,s){return this._domNode.domNode.style.transitionProperty=s?"none":"",this._position=e,!0}_getGraphemeAwarePosition(){let{lineNumber:e,column:s}=this._position,y=this._context.viewModel.getLineContent(e),[P,Q]=ci.J_(y,s-1);return[new ee.L(e,P+1),y.substring(P,Q)]}_prepareRender(e){let s="",y="",[P,Q]=this._getGraphemeAwarePosition();if(this._cursorStyle===k.d2.Line||this._cursorStyle===k.d2.LineThin){let Dt=e.visibleRangeForPosition(P);if(!Dt||Dt.outsideRenderedLine)return null;let Et;this._cursorStyle===k.d2.Line?(Et=x.Uh(this._lineCursorWidth>0?this._lineCursorWidth:2),Et>2&&(s=Q,y=this._getTokenClassName(P))):Et=x.Uh(1);let Vt=Dt.left,Ht=0;Et>=2&&Vt>=1&&(Ht=1,Vt-=Ht);let Ut=e.getVerticalOffsetForLineNumber(P.lineNumber)-e.bigNumbersDelta;return new bn(Ut,Vt,Ht,Et,this._lineHeight,s,y)}let pe=e.linesVisibleRangesForRange(new me.e(P.lineNumber,P.column,P.lineNumber,P.column+Q.length),!1);if(!pe||pe.length===0)return null;let Se=pe[0];if(Se.outsideRenderedLine||Se.ranges.length===0)return null;let Be=Se.ranges[0],it=Q==="	"||Be.width<1?this._typicalHalfwidthCharacterWidth:Be.width;this._cursorStyle===k.d2.Block&&(s=Q,y=this._getTokenClassName(P));let Ge=e.getVerticalOffsetForLineNumber(P.lineNumber)-e.bigNumbersDelta,st=this._lineHeight;return this._cursorStyle!==k.d2.Underline&&this._cursorStyle!==k.d2.UnderlineThin||(Ge+=this._lineHeight-2,st=2),new bn(Ge,Be.left,0,it,st,s,y)}_getTokenClassName(e){let s=this._context.viewModel.getViewLineData(e.lineNumber),y=s.tokens.findTokenIndexAtOffset(e.column-1);return s.tokens.getClassName(y)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Si.S} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Xn extends p{constructor(e){super(e);let s=this._context.configuration.options;this._readOnly=s.get(87),this._cursorBlinking=s.get(24),this._cursorStyle=s.get(26),this._cursorSmoothCaretAnimation=s.get(25),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Fn(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,z.X)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new gn._F,this._cursorFlatBlinkInterval=new gn.zh,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let s=this._context.configuration.options;this._readOnly=s.get(87),this._cursorBlinking=s.get(24),this._cursorStyle=s.get(26),this._cursorSmoothCaretAnimation=s.get(25),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let y=0,P=this._secondaryCursors.length;y<P;y++)this._secondaryCursors[y].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,s,y){let P=this._secondaryCursors.length!==s.length||this._cursorSmoothCaretAnimation==="explicit"&&y!==3;if(this._primaryCursor.onCursorPositionChanged(e,P),this._updateBlinking(),this._secondaryCursors.length<s.length){let Q=s.length-this._secondaryCursors.length;for(let pe=0;pe<Q;pe++){let Se=new Fn(this._context);this._domNode.domNode.insertBefore(Se.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(Se)}}else if(this._secondaryCursors.length>s.length){let Q=this._secondaryCursors.length-s.length;for(let pe=0;pe<Q;pe++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let Q=0;Q<s.length;Q++)this._secondaryCursors[Q].onCursorPositionChanged(s[Q],P)}onCursorStateChanged(e){let s=[];for(let P=0,Q=e.selections.length;P<Q;P++)s[P]=e.selections[P].getPosition();this._onCursorPositionChanged(s[0],s.slice(1),e.reason);let y=e.selections[0].isEmpty();return this._selectionIsEmpty!==y&&(this._selectionIsEmpty=y,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let s=y=>{for(let P=0,Q=e.ranges.length;P<Q;P++)if(e.ranges[P].fromLineNumber<=y.lineNumber&&y.lineNumber<=e.ranges[P].toLineNumber)return!0;return!1};if(s(this._primaryCursor.getPosition()))return!0;for(let y of this._secondaryCursors)if(s(y.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let e=this._getCursorBlinking(),s=e===0,y=e===5;s?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),s||y||(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Xn.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Xn.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case k.d2.Line:e+=" cursor-line-style";break;case k.d2.Block:e+=" cursor-block-style";break;case k.d2.Underline:e+=" cursor-underline-style";break;case k.d2.LineThin:e+=" cursor-line-thin-style";break;case k.d2.BlockOutline:e+=" cursor-block-outline-style";break;case k.d2.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation!=="on"&&this._cursorSmoothCaretAnimation!=="explicit"||(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,s=this._secondaryCursors.length;e<s;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,s=this._secondaryCursors.length;e<s;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let s=0,y=this._secondaryCursors.length;s<y;s++)this._secondaryCursors[s].prepareRender(e)}render(e){let s=[],y=0,P=this._primaryCursor.render(e);P&&(s[y++]=P);for(let Q=0,pe=this._secondaryCursors.length;Q<pe;Q++){let Se=this._secondaryCursors[Q].render(e);Se&&(s[y++]=Se)}this._renderData=s}getLastRenderData(){return this._renderData}}Xn.BLINK_INTERVAL=500,(0,ft.Ic)((Ct,e)=>{let s=Ct.getColor(Mt.n0);if(s){let y=Ct.getColor(Mt.fY);y||(y=s.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${s}; border-color: ${s}; color: ${y}; }`),(0,ye.c3)(Ct.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${y}; border-right: 1px solid ${y}; }`)}});let ho=()=>{throw new Error("Invalid change accessor")};class _o extends p{constructor(e){super(e);let s=this._context.configuration.options,y=s.get(139);this._lineHeight=s.get(64),this._contentWidth=y.contentWidth,this._contentLeft=y.contentLeft,this.domNode=(0,z.X)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,z.X)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),s=new Map;for(let P of e)s.set(P.id,P);let y=!1;return this._context.viewModel.changeWhitespace(P=>{let Q=Object.keys(this._zones);for(let pe=0,Se=Q.length;pe<Se;pe++){let Be=Q[pe],it=this._zones[Be],Ge=this._computeWhitespaceProps(it.delegate);it.isInHiddenArea=Ge.isInHiddenArea;let st=s.get(Be);!st||st.afterLineNumber===Ge.afterViewLineNumber&&st.height===Ge.heightInPx||(P.changeOneWhitespace(Be,Ge.afterViewLineNumber,Ge.heightInPx),this._safeCallOnComputedHeight(it.delegate,Ge.heightInPx),y=!0)}}),y}onConfigurationChanged(e){let s=this._context.configuration.options,y=s.get(139);return this._lineHeight=s.get(64),this._contentWidth=y.contentWidth,this._contentLeft=y.contentLeft,e.hasChanged(64)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var s,y;return(y=(s=e.ordinal)!==null&&s!==void 0?s:e.afterColumn)!==null&&y!==void 0?y:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let s,y;if(e.afterColumn!==void 0)s=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let pe=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;s=new ee.L(pe,this._context.viewModel.model.getLineMaxColumn(pe))}y=s.column===this._context.viewModel.model.getLineMaxColumn(s.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:s.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:s.lineNumber,column:s.column+1});let P=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s,e.afterColumnAffinity),Q=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(y);return{isInHiddenArea:!Q,afterViewLineNumber:P.lineNumber,heightInPx:Q?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let s=!1;return this._context.viewModel.changeWhitespace(y=>{let P={addZone:Q=>(s=!0,this._addZone(y,Q)),removeZone:Q=>{Q&&(s=this._removeZone(y,Q)||s)},layoutZone:Q=>{Q&&(s=this._layoutZone(y,Q)||s)}};(function(Q,pe){try{return Q(pe)}catch(Se){(0,v.dL)(Se)}})(e,P),P.addZone=ho,P.removeZone=ho,P.layoutZone=ho}),s}_addZone(e,s){let y=this._computeWhitespaceProps(s),P={whitespaceId:e.insertWhitespace(y.afterViewLineNumber,this._getZoneOrdinal(s),y.heightInPx,y.minWidthInPx),delegate:s,isInHiddenArea:y.isInHiddenArea,isVisible:!1,domNode:(0,z.X)(s.domNode),marginDomNode:s.marginDomNode?(0,z.X)(s.marginDomNode):null};return this._safeCallOnComputedHeight(P.delegate,y.heightInPx),P.domNode.setPosition("absolute"),P.domNode.domNode.style.width="100%",P.domNode.setDisplay("none"),P.domNode.setAttribute("monaco-view-zone",P.whitespaceId),this.domNode.appendChild(P.domNode),P.marginDomNode&&(P.marginDomNode.setPosition("absolute"),P.marginDomNode.domNode.style.width="100%",P.marginDomNode.setDisplay("none"),P.marginDomNode.setAttribute("monaco-view-zone",P.whitespaceId),this.marginDomNode.appendChild(P.marginDomNode)),this._zones[P.whitespaceId]=P,this.setShouldRender(),P.whitespaceId}_removeZone(e,s){if(this._zones.hasOwnProperty(s)){let y=this._zones[s];return delete this._zones[s],e.removeWhitespace(y.whitespaceId),y.domNode.removeAttribute("monaco-visible-view-zone"),y.domNode.removeAttribute("monaco-view-zone"),y.domNode.domNode.parentNode.removeChild(y.domNode.domNode),y.marginDomNode&&(y.marginDomNode.removeAttribute("monaco-visible-view-zone"),y.marginDomNode.removeAttribute("monaco-view-zone"),y.marginDomNode.domNode.parentNode.removeChild(y.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,s){if(this._zones.hasOwnProperty(s)){let y=this._zones[s],P=this._computeWhitespaceProps(y.delegate);return y.isInHiddenArea=P.isInHiddenArea,e.changeOneWhitespace(y.whitespaceId,P.afterViewLineNumber,P.heightInPx),this._safeCallOnComputedHeight(y.delegate,P.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,s){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(s)}catch(y){(0,v.dL)(y)}}_safeCallOnDomNodeTop(e,s){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(s)}catch(y){(0,v.dL)(y)}}prepareRender(e){}render(e){let s=e.viewportData.whitespaceViewportData,y={},P=!1;for(let pe of s)this._zones[pe.id].isInHiddenArea||(y[pe.id]=pe,P=!0);let Q=Object.keys(this._zones);for(let pe=0,Se=Q.length;pe<Se;pe++){let Be=Q[pe],it=this._zones[Be],Ge=0,st=0,Dt="none";y.hasOwnProperty(Be)?(Ge=y[Be].verticalOffset-e.bigNumbersDelta,st=y[Be].height,Dt="block",it.isVisible||(it.domNode.setAttribute("monaco-visible-view-zone","true"),it.isVisible=!0),this._safeCallOnDomNodeTop(it.delegate,e.getScrolledTopFromAbsoluteTop(y[Be].verticalOffset))):(it.isVisible&&(it.domNode.removeAttribute("monaco-visible-view-zone"),it.isVisible=!1),this._safeCallOnDomNodeTop(it.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),it.domNode.setTop(Ge),it.domNode.setHeight(st),it.domNode.setDisplay(Dt),it.marginDomNode&&(it.marginDomNode.setTop(Ge),it.marginDomNode.setHeight(st),it.marginDomNode.setDisplay(Dt))}P&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}class eo{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class po{constructor(e,s,y){this.configuration=e,this.theme=new eo(s),this.viewModel=y,this.viewLayout=y.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class Do{constructor(e,s,y,P){this.selections=e,this.startLineNumber=0|s.startLineNumber,this.endLineNumber=0|s.endLineNumber,this.relativeVerticalOffset=s.relativeVerticalOffset,this.bigNumbersDelta=0|s.bigNumbersDelta,this.whitespaceViewportData=y,this._model=P,this.visibleRange=new me.e(s.startLineNumber,this._model.getLineMinColumn(s.startLineNumber),s.endLineNumber,this._model.getLineMaxColumn(s.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Ar extends p{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=(0,z.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1,s=this._context.configuration.options.get(139),y=s.contentWidth-s.verticalScrollbarWidth;this.contentWidth!==y&&(this.contentWidth=y,e=!0);let P=s.contentLeft;return this.contentLeft!==P&&(this.contentLeft=P,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var s;let y=0,P=e.getDecorationsInViewport();for(let Q of P){if(!Q.options.blockClassName)continue;let pe,Se,Be=this.blocks[y];Be||(Be=this.blocks[y]=(0,z.X)(document.createElement("div")),this.domNode.appendChild(Be)),Q.options.blockIsAfterEnd?(pe=e.getVerticalOffsetAfterLineNumber(Q.range.endLineNumber,!1),Se=e.getVerticalOffsetAfterLineNumber(Q.range.endLineNumber,!0)):(pe=e.getVerticalOffsetForLineNumber(Q.range.startLineNumber,!0),Se=Q.range.isEmpty()&&!Q.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(Q.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(Q.range.endLineNumber,!0));let[it,Ge,st,Dt]=(s=Q.options.blockPadding)!==null&&s!==void 0?s:[0,0,0,0];Be.setClassName("blockDecorations-block "+Q.options.blockClassName),Be.setLeft(this.contentLeft-Dt),Be.setWidth(this.contentWidth+Dt+Ge),Be.setTop(pe-e.scrollTop-it),Be.setHeight(Se-pe+it+st),y++}for(let Q=y;Q<this.blocks.length;Q++)this.blocks[Q].domNode.remove();this.blocks.length=y}}var Or=t(795);class Pr extends It{constructor(e){super(),this._context=e,this._options=new tr(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let s=new tr(this._context.configuration);return this._options.equals(s)?e.hasChanged(139):(this._options=s,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none")return void(this._renderResult=null);let s=e.visibleRange.startLineNumber,y=e.visibleRange.endLineNumber-s+1,P=new Array(y);for(let pe=0;pe<y;pe++)P[pe]=!0;let Q=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,P);this._renderResult=[];for(let pe=e.viewportData.startLineNumber;pe<=e.viewportData.endLineNumber;pe++){let Se=pe-e.viewportData.startLineNumber,Be=Q.data[Se],it=null;if(this._options.renderWhitespace==="selection"){let Ge=this._selection;for(let st of Ge){if(st.endLineNumber<pe||st.startLineNumber>pe)continue;let Dt=st.startLineNumber===pe?st.startColumn:Be.minColumn,Et=st.endLineNumber===pe?st.endColumn:Be.maxColumn;Dt<Et&&(it||(it=[]),it.push(new X.zG(Dt-1,Et-1)))}}this._renderResult[Se]=this._applyRenderWhitespace(e,pe,it,Be)}}_applyRenderWhitespace(e,s,y,P){if(this._options.renderWhitespace==="selection"&&!y||this._options.renderWhitespace==="trailing"&&P.continuesWithWrappedLine)return"";let Q=this._context.theme.getColor(Mt.dI),pe=this._options.renderWithSVG,Se=P.content,Be=this._options.stopRenderingLineAfter===-1?Se.length:Math.min(this._options.stopRenderingLineAfter,Se.length),it=P.continuesWithWrappedLine,Ge=P.minColumn-1,st=this._options.renderWhitespace==="boundary",Dt=this._options.renderWhitespace==="trailing",Et=this._options.lineHeight,Vt=this._options.middotWidth,Ht=this._options.wsmiddotWidth,Ut=this._options.spaceWidth,ui=Math.abs(Ht-Ut)<Math.abs(Vt-Ut)?11825:183,gi=this._options.canUseHalfwidthRightwardsArrow,vi,Bi="",Di=!1,Hi=ci.LC(Se);Hi===-1?(Di=!0,Hi=Be,vi=Be):vi=ci.ow(Se);let Ui=0,Ii=y&&y[Ui],Ki=0;for(let Zi=Ge;Zi<Be;Zi++){let cn=Se.charCodeAt(Zi);if(Ii&&Zi>=Ii.endOffset&&(Ui++,Ii=y&&y[Ui]),cn!==9&&cn!==32||Dt&&!Di&&Zi<=vi)continue;if(st&&Zi>=Hi&&Zi<=vi&&cn===32){let hn=Zi-1>=0?Se.charCodeAt(Zi-1):0,Hn=Zi+1<Be?Se.charCodeAt(Zi+1):0;if(hn!==32&&Hn!==32)continue}if(st&&it&&Zi===Be-1){let hn=Zi-1>=0?Se.charCodeAt(Zi-1):0;if(cn===32&&hn!==32&&hn!==9)continue}if(y&&(!Ii||Ii.startOffset>Zi||Ii.endOffset<=Zi))continue;let mn=e.visibleRangeForPosition(new ee.L(s,Zi+1));mn&&(pe?(Ki=Math.max(Ki,mn.left),Bi+=cn===9?this._renderArrow(Et,Ut,mn.left):`<circle cx="${(mn.left+Ut/2).toFixed(2)}" cy="${(Et/2).toFixed(2)}" r="${(Ut/7).toFixed(2)}" />`):Bi+=cn===9?`<div class="mwh" style="left:${mn.left}px;height:${Et}px;">${gi?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:`<div class="mwh" style="left:${mn.left}px;height:${Et}px;">${String.fromCharCode(ui)}</div>`)}return pe?(Ki=Math.round(Ki+Ut),`<svg style="position:absolute;width:${Ki}px;height:${Et}px" viewBox="0 0 ${Ki} ${Et}" xmlns="http://www.w3.org/2000/svg" fill="${Q}">`+Bi+"</svg>"):Bi}_renderArrow(e,s,y){let P=e/2,Q=y,pe={x:0,y:s/7/2},Se={x:.8*s,y:pe.y},Be={x:Se.x-.2*Se.x,y:Se.y+.2*Se.x},it={x:Be.x+.1*Se.x,y:Be.y+.1*Se.x},Ge={x:it.x+.35*Se.x,y:it.y-.35*Se.x};return`<path d="M ${[pe,Se,Be,it,Ge,{x:Ge.x,y:-Ge.y},{x:it.x,y:-it.y},{x:Be.x,y:-Be.y},{x:Se.x,y:-Se.y},{x:pe.x,y:-pe.y}].map(st=>`${(Q+st.x).toFixed(2)} ${(P+st.y).toFixed(2)}`).join(" L ")}" />`}render(e,s){if(!this._renderResult)return"";let y=s-e;return y<0||y>=this._renderResult.length?"":this._renderResult[y]}}class tr{constructor(e){let s=e.options,y=s.get(48),P=s.get(36);P==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):P==="svg"?(this.renderWhitespace=s.get(94),this.renderWithSVG=!0):(this.renderWhitespace=s.get(94),this.renderWithSVG=!1),this.spaceWidth=y.spaceWidth,this.middotWidth=y.middotWidth,this.wsmiddotWidth=y.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=y.canUseHalfwidthRightwardsArrow,this.lineHeight=s.get(64),this.stopRenderingLineAfter=s.get(112)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class Fr extends q{constructor(e,s,y,P,Q,pe){super(),this._selections=[new H.Y(1,1,1,1)],this._renderAnimationFrame=null;let Se=new dt(s,P,Q,e);this._context=new po(s,y,P),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new yt(this._context,Se,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,z.X)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,z.X)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,z.X)(document.createElement("div")),re.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new je(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new un(this._context,this._linesContent),this._viewZones=new _o(this._context),this._viewParts.push(this._viewZones);let Be=new Ei(this._context);this._viewParts.push(Be);let it=new Pn(this._context);this._viewParts.push(it);let Ge=new Ot(this._context);this._viewParts.push(Ge),Ge.addDynamicOverlay(new Li(this._context)),Ge.addDynamicOverlay(new ji(this._context)),Ge.addDynamicOverlay(new Pi(this._context)),Ge.addDynamicOverlay(new qt(this._context)),Ge.addDynamicOverlay(new Pr(this._context));let st=new ti(this._context);this._viewParts.push(st),st.addDynamicOverlay(new ri(this._context)),st.addDynamicOverlay(new ei(this._context)),st.addDynamicOverlay(new pn(this._context)),st.addDynamicOverlay(new Ln(this._context)),st.addDynamicOverlay(new jt(this._context));let Dt=new di(this._context);Dt.getDomNode().appendChild(this._viewZones.marginDomNode),Dt.getDomNode().appendChild(st.getDomNode()),this._viewParts.push(Dt),this._contentWidgets=new zt(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Xn(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new hi(this._context),this._viewParts.push(this._overlayWidgets);let Et=new vn(this._context);this._viewParts.push(Et);let Vt=new Ar(this._context);this._viewParts.push(Vt);let Ht=new Ft(this._context);if(this._viewParts.push(Ht),Be){let Ut=this._scrollbar.getOverviewRulerLayoutInfo();Ut.parent.insertBefore(Be.getDomNode(),Ut.insertBefore)}this._linesContent.appendChild(Ge.getDomNode()),this._linesContent.appendChild(Et.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(Dt.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(it.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(Ht.getDomNode()),this._overflowGuardContainer.appendChild(Vt.domNode),this.domNode.appendChild(this._overflowGuardContainer),pe?pe.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new sn(this._context,Se,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){Or.B.onRenderStart(),this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{let e=this._viewCursors.getLastRenderData()||[],s=this._textAreaHandler.getLastRenderData();return new tt(e,s)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,s)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,s)),visibleRangeForPosition:(e,s)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new ee.L(e,s))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){let e=this._context.configuration.options.get(139);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){let e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(136)+" "+(0,ft.m6)(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(let e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=x.lI(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){(function(e){try{return e()}catch(s){(0,v.dL)(s)}})(()=>this._actualRender())}_getViewPartsToRender(){let e=[],s=0;for(let y of this._viewParts)y.shouldRender()&&(e[s++]=y);return e}_actualRender(){if(!x.Uw(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;let s=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(s.startLineNumber,s.endLineNumber,s.centeredLineNumber);let y=new Do(this._selections,s,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(y),this._viewLines.shouldRender()&&(this._viewLines.renderText(y),this._viewLines.onDidRender(),e=this._getViewPartsToRender());let P=new ie(this._context.viewLayout,y,this._viewLines);for(let Q of e)Q.prepareRender(P);for(let Q of e)Q.render(P),Q.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,s){let y=this._context.viewModel.model.validatePosition({lineNumber:e,column:s}),P=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(y);this._flushAccumulatedAndRenderNow();let Q=this._viewLines.visibleRangeForPosition(new ee.L(P.lineNumber,P.column));return Q?Q.left:-1}getTargetAtClientPoint(e,s){let y=this._pointerHandler.getTargetAtClientPoint(e,s);return y?Re.convertViewToModelMouseTarget(y,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new bi(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,s){if(s){this._viewLines.forceShouldRender();for(let y of this._viewParts)y.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var s,y,P,Q,pe,Se,Be,it;this._contentWidgets.setWidgetPosition(e.widget,(y=(s=e.position)===null||s===void 0?void 0:s.position)!==null&&y!==void 0?y:null,(Q=(P=e.position)===null||P===void 0?void 0:P.secondaryPosition)!==null&&Q!==void 0?Q:null,(Se=(pe=e.position)===null||pe===void 0?void 0:pe.preference)!==null&&Se!==void 0?Se:null,(it=(Be=e.position)===null||Be===void 0?void 0:Be.positionAffinity)!==null&&it!==void 0?it:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){let s=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,s)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}var Br=t(653),Wn=t(6518),En=t(9102),Vn=t(3654),Mn=t(5343);class Eo{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Mn.rS(new me.e(1,1,1,1),0,0,new ee.L(1,1),0),new Mn.rS(new me.e(1,1,1,1),0,0,new ee.L(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Mn.Vi(this.modelState,this.viewState)}readSelectionFromMarkers(e){let s=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!s.isEmpty()?H.Y.fromRange(s.collapseToEnd(),this.modelState.selection.getDirection()):H.Y.fromRange(s,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,s,y){this._setState(e,s,y)}static _validatePositionWithCache(e,s,y,P){return s.equals(y)?P:e.normalizePosition(s,2)}static _validateViewState(e,s){let y=s.position,P=s.selectionStart.getStartPosition(),Q=s.selectionStart.getEndPosition(),pe=e.normalizePosition(y,2),Se=this._validatePositionWithCache(e,P,y,pe),Be=this._validatePositionWithCache(e,Q,P,Se);return y.equals(pe)&&P.equals(Se)&&Q.equals(Be)?s:new Mn.rS(me.e.fromPositions(Se,Be),s.selectionStartKind,s.selectionStartLeftoverVisibleColumns+P.column-Se.column,pe,s.leftoverVisibleColumns+y.column-pe.column)}_setState(e,s,y){if(y&&(y=Eo._validateViewState(e.viewModel,y)),s){let P=e.model.validateRange(s.selectionStart),Q=s.selectionStart.equalsRange(P)?s.selectionStartLeftoverVisibleColumns:0,pe=e.model.validatePosition(s.position),Se=s.position.equals(pe)?s.leftoverVisibleColumns:0;s=new Mn.rS(P,s.selectionStartKind,Q,pe,Se)}else{if(!y)return;let P=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(y.selectionStart)),Q=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(y.position));s=new Mn.rS(P,y.selectionStartKind,y.selectionStartLeftoverVisibleColumns,Q,y.leftoverVisibleColumns)}if(y){let P=e.coordinatesConverter.validateViewRange(y.selectionStart,s.selectionStart),Q=e.coordinatesConverter.validateViewPosition(y.position,s.position);y=new Mn.rS(P,s.selectionStartKind,s.selectionStartLeftoverVisibleColumns,Q,s.leftoverVisibleColumns)}else{let P=e.coordinatesConverter.convertModelPositionToViewPosition(new ee.L(s.selectionStart.startLineNumber,s.selectionStart.startColumn)),Q=e.coordinatesConverter.convertModelPositionToViewPosition(new ee.L(s.selectionStart.endLineNumber,s.selectionStart.endColumn)),pe=new me.e(P.lineNumber,P.column,Q.lineNumber,Q.column),Se=e.coordinatesConverter.convertModelPositionToViewPosition(s.position);y=new Mn.rS(pe,s.selectionStartKind,s.selectionStartLeftoverVisibleColumns,Se,s.leftoverVisibleColumns)}this.modelState=s,this.viewState=y,this._updateTrackedRange(e)}}class Ts{constructor(e){this.context=e,this.cursors=[new Eo(e)],this.lastAddedCursorIndex=0}dispose(){for(let e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(let e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(let e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(let e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return(0,r.VJ)(this.cursors,(0,r.tT)(e=>e.viewState.position,ee.L.compare)).viewState.position}getBottomMostViewPosition(){return(0,r.jV)(this.cursors,(0,r.tT)(e=>e.viewState.position,ee.L.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Mn.Vi.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let s=this.cursors.length-1,y=e.length;if(s<y){let P=y-s;for(let Q=0;Q<P;Q++)this._addSecondaryCursor()}else if(s>y){let P=s-y;for(let Q=0;Q<P;Q++)this._removeSecondaryCursor(this.cursors.length-2)}for(let P=0;P<y;P++)this.cursors[P+1].setState(this.context,e[P].modelState,e[P].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Eo(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;let e=this.cursors.slice(0),s=[];for(let y=0,P=e.length;y<P;y++)s.push({index:y,selection:e[y].modelState.selection});s.sort((0,r.tT)(y=>y.selection,me.e.compareRangesUsingStarts));for(let y=0;y<s.length-1;y++){let P=s[y],Q=s[y+1],pe=P.selection,Se=Q.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let Be;if(Be=Se.isEmpty()||pe.isEmpty()?Se.getStartPosition().isBeforeOrEqual(pe.getEndPosition()):Se.getStartPosition().isBefore(pe.getEndPosition()),Be){let it=P.index<Q.index?y:y+1,Ge=P.index<Q.index?y+1:y,st=s[Ge].index,Dt=s[it].index,Et=s[Ge].selection,Vt=s[it].selection;if(!Et.equalsSelection(Vt)){let Ht=Et.plusRange(Vt),Ut=Et.selectionStartLineNumber===Et.startLineNumber&&Et.selectionStartColumn===Et.startColumn,ui=Vt.selectionStartLineNumber===Vt.startLineNumber&&Vt.selectionStartColumn===Vt.startColumn,gi,vi;st===this.lastAddedCursorIndex?(gi=Ut,this.lastAddedCursorIndex=Dt):gi=ui,vi=gi?new H.Y(Ht.startLineNumber,Ht.startColumn,Ht.endLineNumber,Ht.endColumn):new H.Y(Ht.endLineNumber,Ht.endColumn,Ht.startLineNumber,Ht.startColumn),s[it].selection=vi;let Bi=Mn.Vi.fromModelSelection(vi);e[Dt].setState(this.context,Bi.modelState,Bi.viewState)}for(let Ht of s)Ht.index>st&&Ht.index--;e.splice(st,1),s.splice(Ge,1),this._removeSecondaryCursor(st-1),y--}}}}class ir{constructor(e,s,y,P){this._cursorContextBrand=void 0,this.model=e,this.viewModel=s,this.coordinatesConverter=y,this.cursorConfig=P}}var Ca=t(9436),Uo=t(1336),wo=t(4706);class to{constructor(){this.type=0}}class vo{constructor(){this.type=1}}class No{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class xo{constructor(e,s,y){this.selections=e,this.modelSelections=s,this.reason=y,this.type=3}}class Io{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0)}}class Yo{constructor(){this.type=5}}class Zn{constructor(e){this.type=6,this.isFocused=e}}class wa{constructor(){this.type=7}}class Ms{constructor(){this.type=8}}class ps{constructor(e,s){this.fromLineNumber=e,this.count=s,this.type=9}}class nr{constructor(e,s){this.type=10,this.fromLineNumber=e,this.toLineNumber=s}}class ms{constructor(e,s){this.type=11,this.fromLineNumber=e,this.toLineNumber=s}}class Rs{constructor(e,s,y,P,Q,pe,Se){this.source=e,this.minimalReveal=s,this.range=y,this.selections=P,this.verticalType=Q,this.revealHorizontal=pe,this.scrollType=Se,this.type=12}}class ya{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class Jo{constructor(e){this.theme=e,this.type=14}}class Ko{constructor(e){this.type=15,this.ranges=e}}class Wr{constructor(){this.type=16}}class Sa{constructor(){this.type=17}}class fs extends d.JT{constructor(){super(),this._onEvent=this._register(new f.Q5),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let s=0,y=this._outgoingEvents.length;s<y;s++){let P=this._outgoingEvents[s].kind===e.kind?this._outgoingEvents[s].attemptToMerge(e):null;if(P)return void(this._outgoingEvents[s]=P)}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;let e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let s=0,y=this._eventHandlers.length;s<y;s++)this._eventHandlers[s]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let s=0;s<this._eventHandlers.length;s++)if(this._eventHandlers[s]===e){this._eventHandlers.splice(s,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Vr),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){let e=this._collector.outgoingEvents,s=this._collector.viewEvents;this._collector=null;for(let y of e)this._addOutgoingEvent(y);s.length>0&&this._emitMany(s)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){let e=this._viewEventQueue;this._viewEventQueue=null;let s=this._eventHandlers.slice(0);for(let y of s)y.handleEvents(e)}}}class Vr{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class As{constructor(e,s,y,P){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=s,this.contentWidth=y,this.contentHeight=P,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new As(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class or{constructor(e,s){this.kind=1,this.oldHasFocus=e,this.hasFocus=s}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new or(this.oldHasFocus,e.hasFocus)}}class Os{constructor(e,s,y,P,Q,pe,Se,Be){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=s,this._oldScrollHeight=y,this._oldScrollTop=P,this.scrollWidth=Q,this.scrollLeft=pe,this.scrollHeight=Se,this.scrollTop=Be,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!(this.scrollWidthChanged||this.scrollLeftChanged||this.scrollHeightChanged||this.scrollTopChanged)}attemptToMerge(e){return e.kind!==this.kind?null:new Os(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class sr{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Xo{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class jo{constructor(e,s,y,P,Q,pe,Se){this.kind=6,this.oldSelections=e,this.selections=s,this.oldModelVersionId=y,this.modelVersionId=P,this.source=Q,this.reason=pe,this.reachedMaxCursorCount=Se}static _selectionsAreEqual(e,s){if(!e&&!s)return!0;if(!e||!s)return!1;let y=e.length;if(y!==s.length)return!1;for(let P=0;P<y;P++)if(!e[P].equalsSelection(s[P]))return!1;return!0}isNoOp(){return jo._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new jo(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class La{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class _s{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class Oo{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class ka{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class rr{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class ar{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Ps{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Da extends d.JT{constructor(e,s,y,P){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=s,this._coordinatesConverter=y,this.context=new ir(this._model,this._viewModel,this._coordinatesConverter,P),this._cursors=new Ts(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,d.B9)(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new ir(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let s=0;s<this._autoClosedActions.length;s++){let y=this._autoClosedActions[s];y.isValid(e)||(y.dispose(),this._autoClosedActions.splice(s,1),s--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,s,y,P){let Q=!1,pe=this.context.cursorConfig.multiCursorLimit;P!==null&&P.length>pe&&(P=P.slice(0,pe),Q=!0);let Se=vs.from(this._model,this);return this._cursors.setStates(P),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,s,y,Se,Q)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,s,y,P,Q,pe){let Se=this._cursors.getViewPositions(),Be=null,it=null;Se.length>1?it=this._cursors.getViewSelections():Be=me.e.fromPositions(Se[0],Se[0]),e.emitViewEvent(new Rs(s,y,Be,it,P,Q,pe))}saveState(){let e=[],s=this._cursors.getSelections();for(let y=0,P=s.length;y<P;y++){let Q=s[y];e.push({inSelectionMode:!Q.isEmpty(),selectionStart:{lineNumber:Q.selectionStartLineNumber,column:Q.selectionStartColumn},position:{lineNumber:Q.positionLineNumber,column:Q.positionColumn}})}return e}restoreState(e,s){let y=[];for(let P=0,Q=s.length;P<Q;P++){let pe=s[P],Se=1,Be=1;pe.position&&pe.position.lineNumber&&(Se=pe.position.lineNumber),pe.position&&pe.position.column&&(Be=pe.position.column);let it=Se,Ge=Be;pe.selectionStart&&pe.selectionStart.lineNumber&&(it=pe.selectionStart.lineNumber),pe.selectionStart&&pe.selectionStart.column&&(Ge=pe.selectionStart.column),y.push({selectionStartLineNumber:it,selectionStartColumn:Ge,positionLineNumber:Se,positionColumn:Be})}this.setStates(e,"restoreState",0,Mn.Vi.fromModelSelections(y)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,s){if(s instanceof wo.D8){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{let y=s.rawContentChangedEvent;if(this._knownModelVersionId=y.versionId,this._isHandling)return;let P=y.containsEvent(1);if(this._prevEditOperationType=0,P)this._cursors.dispose(),this._cursors=new Ts(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&y.resultingSelection&&y.resultingSelection.length>0){let Q=Mn.Vi.fromModelSelections(y.resultingSelection);this.setStates(e,"modelChange",y.isUndoing?5:y.isRedoing?6:2,Q)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{let Q=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Mn.Vi.fromModelSelections(Q))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),s=e.viewState.selectionStart.getStartPosition(),y=e.viewState.position;return{isReal:!1,fromViewLineNumber:s.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,s),toViewLineNumber:y.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,y)}}getSelections(){return this._cursors.getSelections()}setSelections(e,s,y,P){this.setStates(e,s,P,Mn.Vi.fromModelSelections(y))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,s){let y=[],P=[];for(let Se=0,Be=e.length;Se<Be;Se++)y.push({range:e[Se],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),P.push({range:s[Se],options:{description:"auto-closed-enclosing",stickiness:1}});let Q=this._model.deltaDecorations([],y),pe=this._model.deltaDecorations([],P);this._autoClosedActions.push(new lr(this._model,Q,pe))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let s=es.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(s){this._interpretCommandResult(s);let y=[],P=[];for(let Q=0;Q<e.commands.length;Q++){let pe=e.commands[Q];pe instanceof Uo.g_&&pe.enclosingRange&&pe.closeCharacterRange&&(y.push(pe.closeCharacterRange),P.push(pe.enclosingRange))}y.length>0&&this._pushAutoClosedAction(y,P),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&e.length!==0||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,s,y,P,Q){let pe=vs.from(this._model,this);if(pe.equals(P))return!1;let Se=this._cursors.getSelections(),Be=this._cursors.getViewSelections();if(e.emitViewEvent(new xo(Be,Se,y)),!P||P.cursorState.length!==pe.cursorState.length||pe.cursorState.some((it,Ge)=>!it.modelState.equals(P.cursorState[Ge].modelState))){let it=P?P.cursorState.map(st=>st.modelState.selection):null,Ge=P?P.modelVersionId:0;e.emitOutgoingEvent(new jo(it,Se,Ge,pe.modelVersionId,s||"keyboard",y,Q))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let s=[];for(let y=0,P=e.length;y<P;y++){let Q=e[y];if(!Q.text||Q.text.indexOf(`
`)>=0)return null;let pe=Q.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!pe)return null;let Se=pe[1],Be=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(Se);if(!Be||Be.length!==1)return null;let it=Be[0].open,Ge=Q.text.length-pe[2].length-1,st=Q.text.lastIndexOf(it,Ge-1);if(st===-1)return null;s.push([st,Ge])}return s}executeEdits(e,s,y,P){let Q=null;s==="snippet"&&(Q=this._findAutoClosingPairs(y)),Q&&(y[0]._isTracked=!0);let pe=[],Se=[],Be=this._model.pushEditOperations(this.getSelections(),y,it=>{if(Q)for(let st=0,Dt=Q.length;st<Dt;st++){let[Et,Vt]=Q[st],Ht=it[st],Ut=Ht.range.startLineNumber,ui=Ht.range.startColumn-1+Et,gi=Ht.range.startColumn-1+Vt;pe.push(new me.e(Ut,gi+1,Ut,gi+2)),Se.push(new me.e(Ut,ui+1,Ut,gi+2))}let Ge=P(it);return Ge&&(this._isHandling=!0),Ge});Be&&(this._isHandling=!1,this.setSelections(e,s,Be,0)),pe.length>0&&this._pushAutoClosedAction(pe,Se)}_executeEdit(e,s,y,P=0){if(this.context.cursorConfig.readOnly)return;let Q=vs.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(pe){(0,v.dL)(pe)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(s,y,P,Q,!1)&&this.revealPrimary(s,y,!1,0,!0,0)}getAutoClosedCharacters(){return lr.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new bs(this._model,this.getSelections())}endComposition(e,s){let y=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{s==="keyboard"&&this._executeEditOperation(Uo.u6.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,y,this.getSelections(),this.getAutoClosedCharacters()))},e,s)}type(e,s,y){this._executeEdit(()=>{if(y==="keyboard"){let P=s.length,Q=0;for(;Q<P;){let pe=ci.vH(s,Q),Se=s.substr(Q,pe);this._executeEditOperation(Uo.u6.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),Se)),Q+=pe}}else this._executeEditOperation(Uo.u6.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),s))},e,y)}compositionType(e,s,y,P,Q,pe){if(s.length!==0||y!==0||P!==0)this._executeEdit(()=>{this._executeEditOperation(Uo.u6.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),s,y,P,Q))},e,pe);else if(Q!==0){let Se=this.getSelections().map(Be=>{let it=Be.getPosition();return new H.Y(it.lineNumber,it.column+Q,it.lineNumber,it.column+Q)});this.setSelections(e,pe,Se,0)}}paste(e,s,y,P,Q){this._executeEdit(()=>{this._executeEditOperation(Uo.u6.paste(this.context.cursorConfig,this._model,this.getSelections(),s,y,P||[]))},e,Q,4)}cut(e,s){this._executeEdit(()=>{this._executeEditOperation(Ca.A.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,s)}executeCommand(e,s,y){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Mn.Tp(0,[s],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,y)}executeCommands(e,s,y){this._executeEdit(()=>{this._executeEditOperation(new Mn.Tp(0,s,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,y)}}class vs{static from(e,s){return new vs(e.getVersionId(),s.getCursorStates())}constructor(e,s){this.modelVersionId=e,this.cursorState=s}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let s=0,y=this.cursorState.length;s<y;s++)if(!this.cursorState[s].equals(e.cursorState[s]))return!1;return!0}}class lr{static getAllAutoClosedCharacters(e){let s=[];for(let y of e)s=s.concat(y.getAutoClosedCharactersRanges());return s}constructor(e,s,y){this._model=e,this._autoClosedCharactersDecorations=s,this._autoClosedEnclosingDecorations=y}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let s=0;s<this._autoClosedCharactersDecorations.length;s++){let y=this._model.getDecorationRange(this._autoClosedCharactersDecorations[s]);y&&e.push(y)}return e}isValid(e){let s=[];for(let y=0;y<this._autoClosedEnclosingDecorations.length;y++){let P=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[y]);if(P&&(s.push(P),P.startLineNumber!==P.endLineNumber))return!1}s.sort(me.e.compareRangesUsingStarts),e.sort(me.e.compareRangesUsingStarts);for(let y=0;y<e.length;y++)if(y>=s.length||!s[y].strictContainsRange(e[y]))return!1;return!0}}class es{static executeCommands(e,s,y){let P={model:e,selectionsBefore:s,trackedRanges:[],trackedRangesDirection:[]},Q=this._innerExecuteCommands(P,y);for(let pe=0,Se=P.trackedRanges.length;pe<Se;pe++)P.model._setTrackedRange(P.trackedRanges[pe],null,0);return Q}static _innerExecuteCommands(e,s){if(this._arrayIsEmpty(s))return null;let y=this._getEditOperations(e,s);if(y.operations.length===0)return null;let P=y.operations,Q=this._getLoserCursorMap(P);if(Q.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let pe=[];for(let it=0,Ge=P.length;it<Ge;it++)Q.hasOwnProperty(P[it].identifier.major.toString())||pe.push(P[it]);y.hadTrackedEditOperation&&pe.length>0&&(pe[0]._isTracked=!0);let Se=e.model.pushEditOperations(e.selectionsBefore,pe,it=>{let Ge=[];for(let Et=0;Et<e.selectionsBefore.length;Et++)Ge[Et]=[];for(let Et of it)Et.identifier&&Ge[Et.identifier.major].push(Et);let st=(Et,Vt)=>Et.identifier.minor-Vt.identifier.minor,Dt=[];for(let Et=0;Et<e.selectionsBefore.length;Et++)Ge[Et].length>0?(Ge[Et].sort(st),Dt[Et]=s[Et].computeCursorState(e.model,{getInverseEditOperations:()=>Ge[Et],getTrackedSelection:Vt=>{let Ht=parseInt(Vt,10),Ut=e.model._getTrackedRange(e.trackedRanges[Ht]);return e.trackedRangesDirection[Ht]===0?new H.Y(Ut.startLineNumber,Ut.startColumn,Ut.endLineNumber,Ut.endColumn):new H.Y(Ut.endLineNumber,Ut.endColumn,Ut.startLineNumber,Ut.startColumn)}})):Dt[Et]=e.selectionsBefore[Et];return Dt});Se||(Se=e.selectionsBefore);let Be=[];for(let it in Q)Q.hasOwnProperty(it)&&Be.push(parseInt(it,10));Be.sort((it,Ge)=>Ge-it);for(let it of Be)Se.splice(it,1);return Se}static _arrayIsEmpty(e){for(let s=0,y=e.length;s<y;s++)if(e[s])return!1;return!0}static _getEditOperations(e,s){let y=[],P=!1;for(let Q=0,pe=s.length;Q<pe;Q++){let Se=s[Q];if(Se){let Be=this._getEditOperationsFromCommand(e,Q,Se);y=y.concat(Be.operations),P=P||Be.hadTrackedEditOperation}}return{operations:y,hadTrackedEditOperation:P}}static _getEditOperationsFromCommand(e,s,y){let P=[],Q=0,pe=(it,Ge,st=!1)=>{me.e.isEmpty(it)&&Ge===""||P.push({identifier:{major:s,minor:Q++},range:it,text:Ge,forceMoveMarkers:st,isAutoWhitespaceEdit:y.insertsAutoWhitespace})},Se=!1,Be={addEditOperation:pe,addTrackedEditOperation:(it,Ge,st)=>{Se=!0,pe(it,Ge,st)},trackSelection:(it,Ge)=>{let st=H.Y.liftSelection(it),Dt;if(st.isEmpty())if(typeof Ge=="boolean")Dt=Ge?2:3;else{let Ht=e.model.getLineMaxColumn(st.startLineNumber);Dt=st.startColumn===Ht?2:3}else Dt=1;let Et=e.trackedRanges.length,Vt=e.model._setTrackedRange(null,st,Dt);return e.trackedRanges[Et]=Vt,e.trackedRangesDirection[Et]=st.getDirection(),Et.toString()}};try{y.getEditOperations(e.model,Be)}catch(it){return(0,v.dL)(it),{operations:[],hadTrackedEditOperation:!1}}return{operations:P,hadTrackedEditOperation:Se}}static _getLoserCursorMap(e){(e=e.slice(0)).sort((y,P)=>-me.e.compareRangesUsingEnds(y.range,P.range));let s={};for(let y=1;y<e.length;y++){let P=e[y-1],Q=e[y];if(me.e.getStartPosition(P.range).isBefore(me.e.getEndPosition(Q.range))){let pe;pe=P.identifier.major>Q.identifier.major?P.identifier.major:Q.identifier.major,s[pe.toString()]=!0;for(let Se=0;Se<e.length;Se++)e[Se].identifier.major===pe&&(e.splice(Se,1),Se<y&&y--,Se--);y>0&&y--}}return s}}class ts{constructor(e,s,y){this.text=e,this.startSelection=s,this.endSelection=y}}class bs{static _capture(e,s){let y=[];for(let P of s){if(P.startLineNumber!==P.endLineNumber)return null;y.push(new ts(e.getLineContent(P.startLineNumber),P.startColumn-1,P.endColumn-1))}return y}constructor(e,s){this._original=bs._capture(e,s)}deduceOutcome(e,s){if(!this._original)return null;let y=bs._capture(e,s);if(!y||this._original.length!==y.length)return null;let P=[];for(let Q=0,pe=this._original.length;Q<pe;Q++)P.push(bs._deduceOutcome(this._original[Q],y[Q]));return P}static _deduceOutcome(e,s){let y=Math.min(e.startSelection,s.startSelection,ci.Mh(e.text,s.text)),P=Math.min(e.text.length-e.endSelection,s.text.length-s.endSelection,ci.P1(e.text,s.text)),Q=e.text.substring(y,e.text.length-P),pe=s.text.substring(y,s.text.length-P);return new Uo.Nu(Q,e.startSelection-y,e.endSelection-y,pe,s.startSelection-y,s.endSelection-y)}}var dr=t(8801),Cs=t(2963),yo=t(6633);class is{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;let s=this._inserts,y=this._changes,P=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(s,y,P)}}class hr{constructor(e,s,y,P,Q){this.id=e,this.afterLineNumber=s,this.ordinal=y,this.height=P,this.minWidth=Q,this.prefixSum=0}}class ns{constructor(e,s,y,P){this._instanceId=ci.PJ(++ns.INSTANCE_COUNT),this._pendingChanges=new is,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=s,this._paddingTop=y,this._paddingBottom=P}static findInsertionIndex(e,s,y){let P=0,Q=e.length;for(;P<Q;){let pe=P+Q>>>1;s===e[pe].afterLineNumber?y<e[pe].ordinal?Q=pe:P=pe+1:s<e[pe].afterLineNumber?Q=pe:P=pe+1}return P}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,s){this._paddingTop=e,this._paddingBottom=s}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let s=!1;try{e({insertWhitespace:(y,P,Q,pe)=>{s=!0,y|=0,P|=0,Q|=0,pe|=0;let Se=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new hr(Se,y,P,Q,pe)),Se},changeOneWhitespace:(y,P,Q)=>{s=!0,P|=0,Q|=0,this._pendingChanges.change({id:y,newAfterLineNumber:P,newHeight:Q})},removeWhitespace:y=>{s=!0,this._pendingChanges.remove({id:y})}})}finally{this._pendingChanges.commit(this)}return s}_commitPendingChanges(e,s,y){if((e.length>0||y.length>0)&&(this._minWidth=-1),e.length+s.length+y.length<=1){for(let Be of e)this._insertWhitespace(Be);for(let Be of s)this._changeOneWhitespace(Be.id,Be.newAfterLineNumber,Be.newHeight);for(let Be of y){let it=this._findWhitespaceIndex(Be.id);it!==-1&&this._removeWhitespace(it)}return}let P=new Set;for(let Be of y)P.add(Be.id);let Q=new Map;for(let Be of s)Q.set(Be.id,Be);let pe=Be=>{let it=[];for(let Ge of Be)if(!P.has(Ge.id)){if(Q.has(Ge.id)){let st=Q.get(Ge.id);Ge.afterLineNumber=st.newAfterLineNumber,Ge.height=st.newHeight}it.push(Ge)}return it},Se=pe(this._arr).concat(pe(e));Se.sort((Be,it)=>Be.afterLineNumber===it.afterLineNumber?Be.ordinal-it.ordinal:Be.afterLineNumber-it.afterLineNumber),this._arr=Se,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){let s=ns.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(s,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)}_findWhitespaceIndex(e){let s=this._arr;for(let y=0,P=s.length;y<P;y++)if(s[y].id===e)return y;return-1}_changeOneWhitespace(e,s,y){let P=this._findWhitespaceIndex(e);if(P!==-1&&(this._arr[P].height!==y&&(this._arr[P].height=y,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,P-1)),this._arr[P].afterLineNumber!==s)){let Q=this._arr[P];this._removeWhitespace(P),Q.afterLineNumber=s,this._insertWhitespace(Q)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,s){this._checkPendingChanges(),e|=0,s|=0,this._lineCount-=s-e+1;for(let y=0,P=this._arr.length;y<P;y++){let Q=this._arr[y].afterLineNumber;e<=Q&&Q<=s?this._arr[y].afterLineNumber=e-1:Q>s&&(this._arr[y].afterLineNumber-=s-e+1)}}onLinesInserted(e,s){this._checkPendingChanges(),e|=0,s|=0,this._lineCount+=s-e+1;for(let y=0,P=this._arr.length;y<P;y++)e<=this._arr[y].afterLineNumber&&(this._arr[y].afterLineNumber+=s-e+1)}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let s=Math.max(0,this._prefixSumValidIndex+1);s===0&&(this._arr[0].prefixSum=this._arr[0].height,s++);for(let y=s;y<=e;y++)this._arr[y].prefixSum=this._arr[y-1].prefixSum+this._arr[y].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;let s=this._findLastWhitespaceBeforeLineNumber(e);return s===-1?0:this.getWhitespacesAccumulatedHeight(s)}_findLastWhitespaceBeforeLineNumber(e){e|=0;let s=this._arr,y=0,P=s.length-1;for(;y<=P;){let Q=y+((P-y|0)/2|0)|0;if(s[Q].afterLineNumber<e){if(Q+1>=s.length||s[Q+1].afterLineNumber>=e)return Q;y=Q+1|0}else P=Q-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;let s=this._findLastWhitespaceBeforeLineNumber(e)+1;return s<this._arr.length?s:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,s=!1){let y;return this._checkPendingChanges(),y=(e|=0)>1?this._lineHeight*(e-1):0,y+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(s?1:0))+this._paddingTop}getVerticalOffsetAfterLineNumber(e,s=!1){return this._checkPendingChanges(),e|=0,this._lineHeight*e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(s?1:0))+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let s=0,y=this._arr.length;s<y;s++)e=Math.max(e,this._arr[s].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){return this._checkPendingChanges(),e>this.getLinesTotalHeight()}isInTopPadding(e){return this._paddingTop!==0&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){return this._paddingBottom!==0&&(this._checkPendingChanges(),e>=this.getLinesTotalHeight()-this._paddingBottom)}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;let s=0|this._lineCount,y=this._lineHeight,P=1,Q=s;for(;P<Q;){let pe=(P+Q)/2|0,Se=0|this.getVerticalOffsetForLineNumber(pe);if(e>=Se+y)P=pe+1;else{if(e>=Se)return pe;Q=pe}}return P>s?s:P}getLinesViewportData(e,s){this._checkPendingChanges(),e|=0,s|=0;let y=this._lineHeight,P=0|this.getLineNumberAtOrAfterVerticalOffset(e),Q=0|this.getVerticalOffsetForLineNumber(P),pe=0|this._lineCount,Se=0|this.getFirstWhitespaceIndexAfterLineNumber(P),Be=0|this.getWhitespacesCount(),it,Ge;Se===-1?(Se=Be,Ge=pe+1,it=0):(Ge=0|this.getAfterLineNumberForWhitespaceIndex(Se),it=0|this.getHeightForWhitespaceIndex(Se));let st=Q,Dt=st,Et=5e5,Vt=0;Q>=Et&&(Vt=Math.floor(Q/Et)*Et,Vt=Math.floor(Vt/y)*y,Dt-=Vt);let Ht=[],Ut=e+(s-e)/2,ui=-1;for(let Di=P;Di<=pe;Di++){for(ui===-1&&(st<=Ut&&Ut<st+y||st>Ut)&&(ui=Di),st+=y,Ht[Di-P]=Dt,Dt+=y;Ge===Di;)Dt+=it,st+=it,Se++,Se>=Be?Ge=pe+1:(Ge=0|this.getAfterLineNumberForWhitespaceIndex(Se),it=0|this.getHeightForWhitespaceIndex(Se));if(st>=s){pe=Di;break}}ui===-1&&(ui=pe);let gi=0|this.getVerticalOffsetForLineNumber(pe),vi=P,Bi=pe;return vi<Bi&&Q<e&&vi++,vi<Bi&&gi+y>s&&Bi--,{bigNumbersDelta:Vt,startLineNumber:P,endLineNumber:pe,relativeVerticalOffset:Ht,centeredLineNumber:ui,completelyVisibleStartLineNumber:vi,completelyVisibleEndLineNumber:Bi}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;let s=this.getAfterLineNumberForWhitespaceIndex(e),y,P;return y=s>=1?this._lineHeight*s:0,P=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,y+P+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let s=0,y=this.getWhitespacesCount()-1;if(y<0||e>=this.getVerticalOffsetForWhitespaceIndex(y)+this.getHeightForWhitespaceIndex(y))return-1;for(;s<y;){let P=Math.floor((s+y)/2),Q=this.getVerticalOffsetForWhitespaceIndex(P);if(e>=Q+this.getHeightForWhitespaceIndex(P))s=P+1;else{if(e>=Q)return P;y=P}}return s}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;let s=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(s<0||s>=this.getWhitespacesCount())return null;let y=this.getVerticalOffsetForWhitespaceIndex(s);if(y>e)return null;let P=this.getHeightForWhitespaceIndex(s);return{id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:y,height:P}}getWhitespaceViewportData(e,s){this._checkPendingChanges(),e|=0,s|=0;let y=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),P=this.getWhitespacesCount()-1;if(y<0)return[];let Q=[];for(let pe=y;pe<=P;pe++){let Se=this.getVerticalOffsetForWhitespaceIndex(pe),Be=this.getHeightForWhitespaceIndex(pe);if(Se>=s)break;Q.push({id:this.getIdForWhitespaceIndex(pe),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(pe),verticalOffset:Se,height:Be})}return Q}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}ns.INSTANCE_COUNT=0;class Po{constructor(e,s,y,P){(e|=0)<0&&(e=0),(s|=0)<0&&(s=0),(y|=0)<0&&(y=0),(P|=0)<0&&(P=0),this.width=e,this.contentWidth=s,this.scrollWidth=Math.max(e,s),this.height=y,this.contentHeight=P,this.scrollHeight=Math.max(y,P)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Hr extends d.JT{constructor(e,s){super(),this._onDidContentSizeChange=this._register(new f.Q5),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Po(0,0,0,0),this._scrollable=this._register(new yo.Rm({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:s})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;let s=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);let y=s.contentWidth!==e.contentWidth,P=s.contentHeight!==e.contentHeight;(y||P)&&this._onDidContentSizeChange.fire(new As(s.contentWidth,s.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class Fs extends d.JT{constructor(e,s,y){super(),this._configuration=e;let P=this._configuration.options,Q=P.get(139),pe=P.get(81);this._linesLayout=new ns(s,P.get(64),pe.top,pe.bottom),this._scrollable=this._register(new Hr(0,y)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Po(Q.contentWidth,0,Q.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(109)?125:0)}onConfigurationChanged(e){let s=this._configuration.options;if(e.hasChanged(64)&&this._linesLayout.setLineHeight(s.get(64)),e.hasChanged(81)){let y=s.get(81);this._linesLayout.setPadding(y.top,y.bottom)}if(e.hasChanged(139)){let y=s.get(139),P=y.contentWidth,Q=y.height,pe=this._scrollable.getScrollDimensions(),Se=pe.contentWidth;this._scrollable.setScrollDimensions(new Po(P,pe.contentWidth,Q,this._getContentHeight(P,Q,Se)))}else this._updateHeight();e.hasChanged(109)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,s){this._linesLayout.onLinesDeleted(e,s)}onLinesInserted(e,s){this._linesLayout.onLinesInserted(e,s)}_getHorizontalScrollbarHeight(e,s){let y=this._configuration.options.get(98);return y.horizontal===2||e>=s?0:y.horizontalScrollbarSize}_getContentHeight(e,s,y){let P=this._configuration.options,Q=this._linesLayout.getLinesTotalHeight();return P.get(100)?Q+=Math.max(0,s-P.get(64)-P.get(81).bottom):Q+=this._getHorizontalScrollbarHeight(e,y),Q}_updateHeight(){let e=this._scrollable.getScrollDimensions(),s=e.width,y=e.height,P=e.contentWidth;this._scrollable.setScrollDimensions(new Po(s,e.contentWidth,y,this._getContentHeight(s,y,P)))}getCurrentViewport(){let e=this._scrollable.getScrollDimensions(),s=this._scrollable.getCurrentScrollPosition();return new St.l_(s.scrollTop,s.scrollLeft,e.width,e.height)}getFutureViewport(){let e=this._scrollable.getScrollDimensions(),s=this._scrollable.getFutureScrollPosition();return new St.l_(s.scrollTop,s.scrollLeft,e.width,e.height)}_computeContentWidth(e){let s=this._configuration.options,y=s.get(140),P=s.get(48),Q=s.get(139);if(y.isViewportWrapping){let pe=s.get(70);return e>Q.contentWidth+P.typicalHalfwidthCharacterWidth&&pe.enabled&&pe.side==="right"?e+Q.verticalScrollbarWidth:e}{let pe=s.get(99)*P.typicalHalfwidthCharacterWidth,Se=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+pe+Q.verticalScrollbarWidth,Se)}}setMaxLineWidth(e){let s=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Po(s.width,this._computeContentWidth(e),s.height,s.contentHeight)),this._updateHeight()}saveState(){let e=this._scrollable.getFutureScrollPosition(),s=e.scrollTop,y=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(s);return{scrollTop:s,scrollTopWithoutViewZones:s-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(y),scrollLeft:e.scrollLeft}}changeWhitespace(e){let s=this._linesLayout.changeWhitespace(e);return s&&this.onHeightMaybeChanged(),s}getVerticalOffsetForLineNumber(e,s=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,s)}getVerticalOffsetAfterLineNumber(e,s=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,s)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){let s=this._scrollable.getScrollDimensions();return e+s.height>s.scrollHeight&&(e=s.scrollHeight-s.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+s.height)}getWhitespaceViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,s){s===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,s){let y=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:y.scrollLeft+e,scrollTop:y.scrollTop+s})}}var zr=t(168),Na=t(7378);function $o(Ct,e){return Ct===null?e?ys.INSTANCE:Bs.INSTANCE:new ws(Ct,e)}class ws{constructor(e,s){this._projectionData=e,this._isVisible=s}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,s,y){this._assertVisible();let P=y>0?this._projectionData.breakOffsets[y-1]:0,Q=this._projectionData.breakOffsets[y],pe;if(this._projectionData.injectionOffsets!==null){let Se=this._projectionData.injectionOffsets.map((Be,it)=>new wo.gk(0,0,Be+1,this._projectionData.injectionOptions[it],0));pe=wo.gk.applyInjectedText(e.getLineContent(s),Se).substring(P,Q)}else pe=e.getValueInRange({startLineNumber:s,startColumn:P+1,endLineNumber:s,endColumn:Q+1});return y>0&&(pe=Ws(this._projectionData.wrappedTextIndentLength)+pe),pe}getViewLineLength(e,s,y){return this._assertVisible(),this._projectionData.getLineLength(y)}getViewLineMinColumn(e,s,y){return this._assertVisible(),this._projectionData.getMinOutputOffset(y)+1}getViewLineMaxColumn(e,s,y){return this._assertVisible(),this._projectionData.getMaxOutputOffset(y)+1}getViewLineData(e,s,y){let P=new Array;return this.getViewLinesData(e,s,y,1,0,[!0],P),P[0]}getViewLinesData(e,s,y,P,Q,pe,Se){this._assertVisible();let Be=this._projectionData,it=Be.injectionOffsets,Ge=Be.injectionOptions,st,Dt=null;if(it){Dt=[];let Et=0,Vt=0;for(let Ht=0;Ht<Be.getOutputLineCount();Ht++){let Ut=new Array;Dt[Ht]=Ut;let ui=Ht>0?Be.breakOffsets[Ht-1]:0,gi=Be.breakOffsets[Ht];for(;Vt<it.length;){let vi=Ge[Vt].content.length,Bi=it[Vt]+Et,Di=Bi+vi;if(Bi>gi)break;if(ui<Di){let Hi=Ge[Vt];if(Hi.inlineClassName){let Ui=Ht>0?Be.wrappedTextIndentLength:0,Ii=Ui+Math.max(Bi-ui,0),Ki=Ui+Math.min(Di-ui,gi);Ii!==Ki&&Ut.push(new St.Wx(Ii,Ki,Hi.inlineClassName,Hi.inlineClassNameAffectsLetterSpacing))}}if(!(Di<=gi))break;Et+=vi,Vt++}}}st=it?e.tokenization.getLineTokens(s).withInserted(it.map((Et,Vt)=>({offset:Et,text:Ge[Vt].content,tokenMetadata:Na.A.defaultTokenMetadata}))):e.tokenization.getLineTokens(s);for(let Et=y;Et<y+P;Et++){let Vt=Q+Et-y;pe[Vt]?Se[Vt]=this._getViewLineData(st,Dt?Dt[Et]:null,Et):Se[Vt]=null}}_getViewLineData(e,s,y){this._assertVisible();let P=this._projectionData,Q=y>0?P.wrappedTextIndentLength:0,pe=y>0?P.breakOffsets[y-1]:0,Se=P.breakOffsets[y],Be=e.sliceAndInflate(pe,Se,Q),it=Be.getLineContent();y>0&&(it=Ws(P.wrappedTextIndentLength)+it);let Ge=this._projectionData.getMinOutputOffset(y)+1,st=it.length+1,Dt=y+1<this.getViewLineCount(),Et=y===0?0:P.breakOffsetsVisibleColumn[y-1];return new St.IP(it,Dt,Ge,st,Et,Be,s)}getModelColumnOfViewPosition(e,s){return this._assertVisible(),this._projectionData.translateToInputOffset(e,s-1)+1}getViewPositionOfModelPosition(e,s,y=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(s-1,y).toPosition(e)}getViewLineNumberOfModelPosition(e,s){return this._assertVisible(),e+this._projectionData.translateToOutputPosition(s-1).outputLineIndex}normalizePosition(e,s,y){let P=s.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,s.column-1,y).toPosition(P)}getInjectedTextAt(e,s){return this._projectionData.getInjectedText(e,s-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class ys{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Bs.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,s,y){return e.getLineContent(s)}getViewLineLength(e,s,y){return e.getLineLength(s)}getViewLineMinColumn(e,s,y){return e.getLineMinColumn(s)}getViewLineMaxColumn(e,s,y){return e.getLineMaxColumn(s)}getViewLineData(e,s,y){let P=e.tokenization.getLineTokens(s),Q=P.getLineContent();return new St.IP(Q,!1,1,Q.length+1,0,P.inflate(),null)}getViewLinesData(e,s,y,P,Q,pe,Se){pe[Q]?Se[Q]=this.getViewLineData(e,s,0):Se[Q]=null}getModelColumnOfViewPosition(e,s){return s}getViewPositionOfModelPosition(e,s){return new ee.L(e,s)}getViewLineNumberOfModelPosition(e,s){return e}normalizePosition(e,s,y){return s}getInjectedTextAt(e,s){return null}}ys.INSTANCE=new ys;class Bs{constructor(){}isVisible(){return!1}setVisible(e){return e?ys.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,s,y){throw new Error("Not supported")}getViewLineLength(e,s,y){throw new Error("Not supported")}getViewLineMinColumn(e,s,y){throw new Error("Not supported")}getViewLineMaxColumn(e,s,y){throw new Error("Not supported")}getViewLineData(e,s,y){throw new Error("Not supported")}getViewLinesData(e,s,y,P,Q,pe,Se){throw new Error("Not supported")}getModelColumnOfViewPosition(e,s){throw new Error("Not supported")}getViewPositionOfModelPosition(e,s){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,s){throw new Error("Not supported")}normalizePosition(e,s,y){throw new Error("Not supported")}getInjectedTextAt(e,s){throw new Error("Not supported")}}Bs.INSTANCE=new Bs;let jn=[""];function Ws(Ct){if(Ct>=jn.length)for(let e=1;e<=Ct;e++)jn[e]=cr(e);return jn[Ct]}function cr(Ct){return new Array(Ct+1).join(" ")}var os=t(310);class Ur{constructor(e,s,y,P,Q,pe,Se,Be,it,Ge){this._editorId=e,this.model=s,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=y,this._monospaceLineBreaksComputerFactory=P,this.fontInfo=Q,this.tabSize=pe,this.wrappingStrategy=Se,this.wrappingColumn=Be,this.wrappingIndent=it,this.wordBreak=Ge,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new ur(this)}_constructLines(e,s){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));let y=this.model.getLinesContent(),P=this.model.getInjectedTextDecorations(this._editorId),Q=y.length,pe=this.createLineBreaksComputer(),Se=new r.H9(wo.gk.fromDecorations(P));for(let Ht=0;Ht<Q;Ht++){let Ut=Se.takeWhile(ui=>ui.lineNumber===Ht+1);pe.addRequest(y[Ht],Ut,s?s[Ht]:null)}let Be=pe.finalize(),it=[],Ge=this.hiddenAreasDecorationIds.map(Ht=>this.model.getDecorationRange(Ht)).sort(me.e.compareRangesUsingStarts),st=1,Dt=0,Et=-1,Vt=Et+1<Ge.length?Dt+1:Q+2;for(let Ht=0;Ht<Q;Ht++){let Ut=Ht+1;Ut===Vt&&(Et++,st=Ge[Et].startLineNumber,Dt=Ge[Et].endLineNumber,Vt=Et+1<Ge.length?Dt+1:Q+2);let ui=Ut>=st&&Ut<=Dt,gi=$o(Be[Ht],!ui);it[Ht]=gi.getViewLineCount(),this.modelLineProjections[Ht]=gi}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new os.Ck(it)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){let s=function(st){if(st.length===0)return[];let Dt=st.slice();Dt.sort(me.e.compareRangesUsingStarts);let Et=[],Vt=Dt[0].startLineNumber,Ht=Dt[0].endLineNumber;for(let Ut=1,ui=Dt.length;Ut<ui;Ut++){let gi=Dt[Ut];gi.startLineNumber>Ht+1?(Et.push(new me.e(Vt,1,Ht,1)),Vt=gi.startLineNumber,Ht=gi.endLineNumber):gi.endLineNumber>Ht&&(Ht=gi.endLineNumber)}return Et.push(new me.e(Vt,1,Ht,1)),Et}(e.map(st=>this.model.validateRange(st))),y=this.hiddenAreasDecorationIds.map(st=>this.model.getDecorationRange(st)).sort(me.e.compareRangesUsingStarts);if(s.length===y.length){let st=!1;for(let Dt=0;Dt<s.length;Dt++)if(!s[Dt].equalsRange(y[Dt])){st=!0;break}if(!st)return!1}let P=s.map(st=>({range:st,options:Vn.qx.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,P);let Q=s,pe=1,Se=0,Be=-1,it=Be+1<Q.length?Se+1:this.modelLineProjections.length+2,Ge=!1;for(let st=0;st<this.modelLineProjections.length;st++){let Dt=st+1;Dt===it&&(Be++,pe=Q[Be].startLineNumber,Se=Q[Be].endLineNumber,it=Be+1<Q.length?Se+1:this.modelLineProjections.length+2);let Et=!1;if(Dt>=pe&&Dt<=Se?this.modelLineProjections[st].isVisible()&&(this.modelLineProjections[st]=this.modelLineProjections[st].setVisible(!1),Et=!0):(Ge=!0,this.modelLineProjections[st].isVisible()||(this.modelLineProjections[st]=this.modelLineProjections[st].setVisible(!0),Et=!0)),Et){let Vt=this.modelLineProjections[st].getViewLineCount();this.projectedModelLineLineCounts.setValue(st,Vt)}}return Ge||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,s){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,s,y,P,Q){let pe=this.fontInfo.equals(e),Se=this.wrappingStrategy===s,Be=this.wrappingColumn===y,it=this.wrappingIndent===P,Ge=this.wordBreak===Q;if(pe&&Se&&Be&&it&&Ge)return!1;let st=pe&&Se&&!Be&&it&&Ge;this.fontInfo=e,this.wrappingStrategy=s,this.wrappingColumn=y,this.wrappingIndent=P,this.wordBreak=Q;let Dt=null;if(st){Dt=[];for(let Et=0,Vt=this.modelLineProjections.length;Et<Vt;Et++)Dt[Et]=this.modelLineProjections[Et].getProjectionData()}return this._constructLines(!1,Dt),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,s,y){if(!e||e<=this._validModelVersionId)return null;let P=s===1?1:this.projectedModelLineLineCounts.getPrefixSum(s-1)+1,Q=this.projectedModelLineLineCounts.getPrefixSum(y);return this.modelLineProjections.splice(s-1,y-s+1),this.projectedModelLineLineCounts.removeValues(s-1,y-s+1),new nr(P,Q)}onModelLinesInserted(e,s,y,P){if(!e||e<=this._validModelVersionId)return null;let Q=s>2&&!this.modelLineProjections[s-2].isVisible(),pe=s===1?1:this.projectedModelLineLineCounts.getPrefixSum(s-1)+1,Se=0,Be=[],it=[];for(let Ge=0,st=P.length;Ge<st;Ge++){let Dt=$o(P[Ge],!Q);Be.push(Dt);let Et=Dt.getViewLineCount();Se+=Et,it[Ge]=Et}return this.modelLineProjections=this.modelLineProjections.slice(0,s-1).concat(Be).concat(this.modelLineProjections.slice(s-1)),this.projectedModelLineLineCounts.insertValues(s-1,it),new ms(pe,pe+Se-1)}onModelLineChanged(e,s,y){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let P=s-1,Q=this.modelLineProjections[P].getViewLineCount(),pe=$o(y,this.modelLineProjections[P].isVisible());this.modelLineProjections[P]=pe;let Se=this.modelLineProjections[P].getViewLineCount(),Be=!1,it=0,Ge=-1,st=0,Dt=-1,Et=0,Vt=-1;return Q>Se?(it=this.projectedModelLineLineCounts.getPrefixSum(s-1)+1,Ge=it+Se-1,Et=Ge+1,Vt=Et+(Q-Se)-1,Be=!0):Q<Se?(it=this.projectedModelLineLineCounts.getPrefixSum(s-1)+1,Ge=it+Q-1,st=Ge+1,Dt=st+(Se-Q)-1,Be=!0):(it=this.projectedModelLineLineCounts.getPrefixSum(s-1)+1,Ge=it+Se-1),this.projectedModelLineLineCounts.setValue(P,Se),[Be,it<=Ge?new ps(it,Ge-it+1):null,st<=Dt?new ms(st,Dt):null,Et<=Vt?new nr(Et,Vt):null]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length!==1||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;let s=this.getViewLineCount();return e>s?s:0|e}getActiveIndentGuide(e,s,y){e=this._toValidViewLineNumber(e),s=this._toValidViewLineNumber(s),y=this._toValidViewLineNumber(y);let P=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),Q=this.convertViewPositionToModelPosition(s,this.getViewLineMinColumn(s)),pe=this.convertViewPositionToModelPosition(y,this.getViewLineMinColumn(y)),Se=this.model.guides.getActiveIndentGuide(P.lineNumber,Q.lineNumber,pe.lineNumber),Be=this.convertModelPositionToViewPosition(Se.startLineNumber,1),it=this.convertModelPositionToViewPosition(Se.endLineNumber,this.model.getLineMaxColumn(Se.endLineNumber));return{startLineNumber:Be.lineNumber,endLineNumber:it.lineNumber,indent:Se.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let s=this.projectedModelLineLineCounts.getIndexOf(e-1),y=s.index,P=s.remainder;return new bo(y+1,P)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){let s=this.modelLineProjections[e.modelLineNumber-1],y=s.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),P=s.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,y);return new ee.L(e.modelLineNumber,P)}getModelEndPositionOfViewLine(e){let s=this.modelLineProjections[e.modelLineNumber-1],y=s.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),P=s.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,y);return new ee.L(e.modelLineNumber,P)}getViewLineInfosGroupedByModelRanges(e,s){let y=this.getViewLineInfo(e),P=this.getViewLineInfo(s),Q=new Array,pe=this.getModelStartPositionOfViewLine(y),Se=new Array;for(let Be=y.modelLineNumber;Be<=P.modelLineNumber;Be++){let it=this.modelLineProjections[Be-1];if(it.isVisible()){let Ge=Be===y.modelLineNumber?y.modelLineWrappedLineIdx:0,st=Be===P.modelLineNumber?P.modelLineWrappedLineIdx+1:it.getViewLineCount();for(let Dt=Ge;Dt<st;Dt++)Se.push(new bo(Be,Dt))}if(!it.isVisible()&&pe){let Ge=new ee.L(Be-1,this.model.getLineMaxColumn(Be-1)+1),st=me.e.fromPositions(pe,Ge);Q.push(new Vs(st,Se)),Se=[],pe=null}else it.isVisible()&&!pe&&(pe=new ee.L(Be,1))}if(pe){let Be=me.e.fromPositions(pe,this.getModelEndPositionOfViewLine(P));Q.push(new Vs(Be,Se))}return Q}getViewLinesBracketGuides(e,s,y,P){let Q=y?this.convertViewPositionToModelPosition(y.lineNumber,y.column):null,pe=[];for(let Se of this.getViewLineInfosGroupedByModelRanges(e,s)){let Be=Se.modelRange.startLineNumber,it=this.model.guides.getLinesBracketGuides(Be,Se.modelRange.endLineNumber,Q,P);for(let Ge of Se.viewLines){let st=it[Ge.modelLineNumber-Be].map(Dt=>{if(Dt.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,Dt.forWrappedLinesAfterColumn).lineNumber>=Ge.modelLineWrappedLineIdx||Dt.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,Dt.forWrappedLinesBeforeOrAtColumn).lineNumber<Ge.modelLineWrappedLineIdx)return;if(!Dt.horizontalLine)return Dt;let Et=-1;if(Dt.column!==-1){let Ut=this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,Dt.column);if(Ut.lineNumber===Ge.modelLineWrappedLineIdx)Et=Ut.column;else if(Ut.lineNumber<Ge.modelLineWrappedLineIdx)Et=this.getMinColumnOfViewLine(Ge);else if(Ut.lineNumber>Ge.modelLineWrappedLineIdx)return}let Vt=this.convertModelPositionToViewPosition(Ge.modelLineNumber,Dt.horizontalLine.endColumn),Ht=this.modelLineProjections[Ge.modelLineNumber-1].getViewPositionOfModelPosition(0,Dt.horizontalLine.endColumn);return Ht.lineNumber===Ge.modelLineWrappedLineIdx?new Ti.UO(Dt.visibleColumn,Et,Dt.className,new Ti.vW(Dt.horizontalLine.top,Vt.column),-1,-1):Ht.lineNumber<Ge.modelLineWrappedLineIdx||Dt.visibleColumn!==-1?void 0:new Ti.UO(Dt.visibleColumn,Et,Dt.className,new Ti.vW(Dt.horizontalLine.top,this.getMaxColumnOfViewLine(Ge)),-1,-1)});pe.push(st.filter(Dt=>!!Dt))}}return pe}getViewLinesIndentGuides(e,s){e=this._toValidViewLineNumber(e),s=this._toValidViewLineNumber(s);let y=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),P=this.convertViewPositionToModelPosition(s,this.getViewLineMaxColumn(s)),Q=[],pe=[],Se=[],Be=y.lineNumber-1,it=P.lineNumber-1,Ge=null;for(let Vt=Be;Vt<=it;Vt++){let Ht=this.modelLineProjections[Vt];if(Ht.isVisible()){let Ut=Ht.getViewLineNumberOfModelPosition(0,Vt===Be?y.column:1),ui=Ht.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(Vt+1)),gi=ui-Ut+1,vi=0;gi>1&&Ht.getViewLineMinColumn(this.model,Vt+1,ui)===1&&(vi=Ut===0?1:2),pe.push(gi),Se.push(vi),Ge===null&&(Ge=new ee.L(Vt+1,0))}else Ge!==null&&(Q=Q.concat(this.model.guides.getLinesIndentGuides(Ge.lineNumber,Vt)),Ge=null)}Ge!==null&&(Q=Q.concat(this.model.guides.getLinesIndentGuides(Ge.lineNumber,P.lineNumber)),Ge=null);let st=s-e+1,Dt=new Array(st),Et=0;for(let Vt=0,Ht=Q.length;Vt<Ht;Vt++){let Ut=Q[Vt],ui=Math.min(st-Et,pe[Vt]),gi=Se[Vt],vi;vi=gi===2?0:gi===1?1:ui;for(let Bi=0;Bi<ui;Bi++)Bi===vi&&(Ut=0),Dt[Et++]=Ut}return Dt}getViewLineContent(e){let s=this.getViewLineInfo(e);return this.modelLineProjections[s.modelLineNumber-1].getViewLineContent(this.model,s.modelLineNumber,s.modelLineWrappedLineIdx)}getViewLineLength(e){let s=this.getViewLineInfo(e);return this.modelLineProjections[s.modelLineNumber-1].getViewLineLength(this.model,s.modelLineNumber,s.modelLineWrappedLineIdx)}getViewLineMinColumn(e){let s=this.getViewLineInfo(e);return this.modelLineProjections[s.modelLineNumber-1].getViewLineMinColumn(this.model,s.modelLineNumber,s.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){let s=this.getViewLineInfo(e);return this.modelLineProjections[s.modelLineNumber-1].getViewLineMaxColumn(this.model,s.modelLineNumber,s.modelLineWrappedLineIdx)}getViewLineData(e){let s=this.getViewLineInfo(e);return this.modelLineProjections[s.modelLineNumber-1].getViewLineData(this.model,s.modelLineNumber,s.modelLineWrappedLineIdx)}getViewLinesData(e,s,y){e=this._toValidViewLineNumber(e),s=this._toValidViewLineNumber(s);let P=this.projectedModelLineLineCounts.getIndexOf(e-1),Q=e,pe=P.index,Se=P.remainder,Be=[];for(let it=pe,Ge=this.model.getLineCount();it<Ge;it++){let st=this.modelLineProjections[it];if(!st.isVisible())continue;let Dt=it===pe?Se:0,Et=st.getViewLineCount()-Dt,Vt=!1;if(Q+Et>s&&(Vt=!0,Et=s-Q+1),st.getViewLinesData(this.model,it+1,Dt,Et,Q-e,y,Be),Q+=Et,Vt)break}return Be}validateViewPosition(e,s,y){e=this._toValidViewLineNumber(e);let P=this.projectedModelLineLineCounts.getIndexOf(e-1),Q=P.index,pe=P.remainder,Se=this.modelLineProjections[Q],Be=Se.getViewLineMinColumn(this.model,Q+1,pe),it=Se.getViewLineMaxColumn(this.model,Q+1,pe);s<Be&&(s=Be),s>it&&(s=it);let Ge=Se.getModelColumnOfViewPosition(pe,s);return this.model.validatePosition(new ee.L(Q+1,Ge)).equals(y)?new ee.L(e,s):this.convertModelPositionToViewPosition(y.lineNumber,y.column)}validateViewRange(e,s){let y=this.validateViewPosition(e.startLineNumber,e.startColumn,s.getStartPosition()),P=this.validateViewPosition(e.endLineNumber,e.endColumn,s.getEndPosition());return new me.e(y.lineNumber,y.column,P.lineNumber,P.column)}convertViewPositionToModelPosition(e,s){let y=this.getViewLineInfo(e),P=this.modelLineProjections[y.modelLineNumber-1].getModelColumnOfViewPosition(y.modelLineWrappedLineIdx,s);return this.model.validatePosition(new ee.L(y.modelLineNumber,P))}convertViewRangeToModelRange(e){let s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),y=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new me.e(s.lineNumber,s.column,y.lineNumber,y.column)}convertModelPositionToViewPosition(e,s,y=2){let P=this.model.validatePosition(new ee.L(e,s)),Q=P.lineNumber,pe=P.column,Se=Q-1,Be=!1;for(;Se>0&&!this.modelLineProjections[Se].isVisible();)Se--,Be=!0;if(Se===0&&!this.modelLineProjections[Se].isVisible())return new ee.L(1,1);let it=1+this.projectedModelLineLineCounts.getPrefixSum(Se),Ge;return Ge=Be?this.modelLineProjections[Se].getViewPositionOfModelPosition(it,this.model.getLineMaxColumn(Se+1),y):this.modelLineProjections[Q-1].getViewPositionOfModelPosition(it,pe,y),Ge}convertModelRangeToViewRange(e,s=0){if(e.isEmpty()){let y=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,s);return me.e.fromPositions(y)}{let y=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),P=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new me.e(y.lineNumber,y.column,P.lineNumber,P.column)}}getViewLineNumberOfModelPosition(e,s){let y=e-1;if(this.modelLineProjections[y].isVisible()){let Q=1+this.projectedModelLineLineCounts.getPrefixSum(y);return this.modelLineProjections[y].getViewLineNumberOfModelPosition(Q,s)}for(;y>0&&!this.modelLineProjections[y].isVisible();)y--;if(y===0&&!this.modelLineProjections[y].isVisible())return 1;let P=1+this.projectedModelLineLineCounts.getPrefixSum(y);return this.modelLineProjections[y].getViewLineNumberOfModelPosition(P,this.model.getLineMaxColumn(y+1))}getDecorationsInRange(e,s,y,P,Q){let pe=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),Se=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(Se.lineNumber-pe.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new me.e(pe.lineNumber,1,Se.lineNumber,Se.column),s,y,P,Q);let Be=[],it=pe.lineNumber-1,Ge=Se.lineNumber-1,st=null;for(let Ht=it;Ht<=Ge;Ht++)if(this.modelLineProjections[Ht].isVisible())st===null&&(st=new ee.L(Ht+1,Ht===it?pe.column:1));else if(st!==null){let Ut=this.model.getLineMaxColumn(Ht);Be=Be.concat(this.model.getDecorationsInRange(new me.e(st.lineNumber,st.column,Ht,Ut),s,y,P)),st=null}st!==null&&(Be=Be.concat(this.model.getDecorationsInRange(new me.e(st.lineNumber,st.column,Se.lineNumber,Se.column),s,y,P)),st=null),Be.sort((Ht,Ut)=>{let ui=me.e.compareRangesUsingStarts(Ht.range,Ut.range);return ui===0?Ht.id<Ut.id?-1:Ht.id>Ut.id?1:0:ui});let Dt=[],Et=0,Vt=null;for(let Ht of Be){let Ut=Ht.id;Vt!==Ut&&(Vt=Ut,Dt[Et++]=Ht)}return Dt}getInjectedTextAt(e){let s=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[s.modelLineNumber-1].getInjectedTextAt(s.modelLineWrappedLineIdx,e.column)}normalizePosition(e,s){let y=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[y.modelLineNumber-1].normalizePosition(y.modelLineWrappedLineIdx,e,s)}getLineIndentColumn(e){let s=this.getViewLineInfo(e);return s.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(s.modelLineNumber):0}}class bo{constructor(e,s){this.modelLineNumber=e,this.modelLineWrappedLineIdx=s}}class Vs{constructor(e,s){this.modelRange=e,this.viewLines=s}}class ur{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,s){return this._lines.validateViewPosition(e.lineNumber,e.column,s)}validateViewRange(e,s){return this._lines.validateViewRange(e,s)}convertModelPositionToViewPosition(e,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,s)}convertModelRangeToViewRange(e,s){return this._lines.convertModelRangeToViewRange(e,s)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,s){return this._lines.getViewLineNumberOfModelPosition(e,s)}}class Hs{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new ss(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,s,y,P){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(s,y,P)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,s,y){return new nr(s,y)}onModelLinesInserted(e,s,y,P){return new ms(s,y)}onModelLineChanged(e,s,y){return[!1,new ps(s,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,s,y){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,s,y){return new Array(s-e+1).fill([])}getViewLinesIndentGuides(e,s){let y=s-e+1,P=new Array(y);for(let Q=0;Q<y;Q++)P[Q]=0;return P}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let s=this.model.tokenization.getLineTokens(e),y=s.getLineContent();return new St.IP(y,!1,1,y.length+1,0,s.inflate(),null)}getViewLinesData(e,s,y){let P=this.model.getLineCount();e=Math.min(Math.max(1,e),P),s=Math.min(Math.max(1,s),P);let Q=[];for(let pe=e;pe<=s;pe++){let Se=pe-e;Q[Se]=y[Se]?this.getViewLineData(pe):null}return Q}getDecorationsInRange(e,s,y,P,Q){return this.model.getDecorationsInRange(e,s,y,P,Q)}normalizePosition(e,s){return this.model.normalizePosition(e,s)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class ss{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,s){return this._validPosition(s)}validateViewRange(e,s){return this._validRange(s)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){let s=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>s)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,s){return e}}class Kr extends d.JT{constructor(e,s,y,P,Q,pe,Se,Be,it){if(super(),this.languageConfigurationService=Se,this._themeService=Be,this._attachedView=it,this.hiddenAreasModel=new $r,this.previousHiddenAreas=[],this._editorId=e,this._configuration=s,this.model=y,this._eventDispatcher=new fs,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Mn.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new gn.pY(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=zs.create(this.model),this.model.isTooLargeForTokenization())this._lines=new Hs(this.model);else{let Ge=this._configuration.options,st=Ge.get(48),Dt=Ge.get(133),Et=Ge.get(140),Vt=Ge.get(132),Ht=Ge.get(124);this._lines=new Ur(this._editorId,this.model,P,Q,st,this.model.getOptions().tabSize,Dt,Et.wrappingColumn,Vt,Ht)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Da(y,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Fs(this._configuration,this.getLineCount(),pe)),this._register(this.viewLayout.onDidScroll(Ge=>{Ge.scrollTopChanged&&this._handleVisibleLinesChanged(),Ge.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ya(Ge)),this._eventDispatcher.emitOutgoingEvent(new Os(Ge.oldScrollWidth,Ge.oldScrollLeft,Ge.oldScrollHeight,Ge.oldScrollTop,Ge.scrollWidth,Ge.scrollLeft,Ge.scrollHeight,Ge.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(Ge=>{this._eventDispatcher.emitOutgoingEvent(Ge)})),this._decorations=new zr.CU(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(Ge=>{try{let st=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(st,Ge)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(wn.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new Wr)})),this._register(this._themeService.onDidColorThemeChange(Ge=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new Jo(Ge))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){let e=this.viewLayout.getLinesViewportData(),s=new me.e(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(s)}visibleLinesStabilized(){let e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){let e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Zn(e)),this._eventDispatcher.emitOutgoingEvent(new or(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new to)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new vo)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){let e=new ee.L(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),s=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new qr(s,this._viewportStart.startLineDelta)}return new qr(null,0)}_onConfigurationChanged(e,s){let y=this._captureStableViewport(),P=this._configuration.options,Q=P.get(48),pe=P.get(133),Se=P.get(140),Be=P.get(132),it=P.get(124);this._lines.setWrappingSettings(Q,pe,Se.wrappingColumn,Be,it)&&(e.emitViewEvent(new Yo),e.emitViewEvent(new Ms),e.emitViewEvent(new Io(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),s.hasChanged(87)&&(this._decorations.reset(),e.emitViewEvent(new Io(null))),e.emitViewEvent(new No(s)),this.viewLayout.onConfigurationChanged(s),y.recoverViewportStart(this.coordinatesConverter,this.viewLayout),Mn.LM.shouldRecreate(s)&&(this.cursorConfig=new Mn.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{let y=this._eventDispatcher.beginEmitViewEvents(),P=!1,Q=!1,pe=e instanceof wo.fV?e.rawContentChangedEvent.changes:e.changes,Se=e instanceof wo.fV?e.rawContentChangedEvent.versionId:null,Be=this._lines.createLineBreaksComputer();for(let st of pe)switch(st.changeType){case 4:for(let Dt=0;Dt<st.detail.length;Dt++){let Et=st.detail[Dt],Vt=st.injectedTexts[Dt];Vt&&(Vt=Vt.filter(Ht=>!Ht.ownerId||Ht.ownerId===this._editorId)),Be.addRequest(Et,Vt,null)}break;case 2:{let Dt=null;st.injectedText&&(Dt=st.injectedText.filter(Et=>!Et.ownerId||Et.ownerId===this._editorId)),Be.addRequest(st.detail,Dt,null);break}}let it=Be.finalize(),Ge=new r.H9(it);for(let st of pe)switch(st.changeType){case 1:this._lines.onModelFlushed(),y.emitViewEvent(new Yo),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),P=!0;break;case 3:{let Dt=this._lines.onModelLinesDeleted(Se,st.fromLineNumber,st.toLineNumber);Dt!==null&&(y.emitViewEvent(Dt),this.viewLayout.onLinesDeleted(Dt.fromLineNumber,Dt.toLineNumber)),P=!0;break}case 4:{let Dt=Ge.takeCount(st.detail.length),Et=this._lines.onModelLinesInserted(Se,st.fromLineNumber,st.toLineNumber,Dt);Et!==null&&(y.emitViewEvent(Et),this.viewLayout.onLinesInserted(Et.fromLineNumber,Et.toLineNumber)),P=!0;break}case 2:{let Dt=Ge.dequeue(),[Et,Vt,Ht,Ut]=this._lines.onModelLineChanged(Se,st.lineNumber,Dt);Q=Et,Vt&&y.emitViewEvent(Vt),Ht&&(y.emitViewEvent(Ht),this.viewLayout.onLinesInserted(Ht.fromLineNumber,Ht.toLineNumber)),Ut&&(y.emitViewEvent(Ut),this.viewLayout.onLinesDeleted(Ut.fromLineNumber,Ut.toLineNumber));break}}Se!==null&&this._lines.acceptVersionId(Se),this.viewLayout.onHeightMaybeChanged(),!P&&Q&&(y.emitViewEvent(new Ms),y.emitViewEvent(new Io(null)),this._cursor.onLineMappingChanged(y),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}let s=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&s){let y=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(y){let P=this.coordinatesConverter.convertModelPositionToViewPosition(y.getStartPosition()),Q=this.viewLayout.getVerticalOffsetForLineNumber(P.lineNumber);this.viewLayout.setScrollPosition({scrollTop:Q+this._viewportStart.startLineDelta},1)}}try{let y=this._eventDispatcher.beginEmitViewEvents();e instanceof wo.fV&&y.emitOutgoingEvent(new rr(e.contentChangedEvent)),this._cursor.onModelContentChanged(y,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{let s=[];for(let y=0,P=e.ranges.length;y<P;y++){let Q=e.ranges[y],pe=this.coordinatesConverter.convertModelPositionToViewPosition(new ee.L(Q.fromLineNumber,1)).lineNumber,Se=this.coordinatesConverter.convertModelPositionToViewPosition(new ee.L(Q.toLineNumber,this.model.getLineMaxColumn(Q.toLineNumber))).lineNumber;s[y]={fromLineNumber:pe,toLineNumber:Se}}this._eventDispatcher.emitSingleViewEvent(new Ko(s)),this._eventDispatcher.emitOutgoingEvent(new Ps(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new wa),this.cursorConfig=new Mn.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ka(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Mn.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Oo(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let s=this._eventDispatcher.beginEmitViewEvents();s.emitViewEvent(new Yo),s.emitViewEvent(new Ms),s.emitViewEvent(new Io(null)),this._cursor.onLineMappingChanged(s),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Mn.LM(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ar(e))})),this._register(this.model.onDidChangeDecorations(e=>{var s,y;if(this._decorations.onModelDecorationsChanged(),e.affectsGlyphMargin){let P=this.model.getAllMarginDecorations(),Q=!1;P.sort((Be,it)=>me.e.compareRangesUsingStarts(Be.range,it.range));let pe=null,Se=null;for(let Be of P){let it=(y=(s=Be.options.glyphMargin)===null||s===void 0?void 0:s.position)!==null&&y!==void 0?y:Ne.U.Left;if(it===Ne.U.Left&&(!pe||me.e.compareRangesUsingEnds(pe,Be.range)<0)&&(pe=Be.range),it===Ne.U.Right&&(!Se||me.e.compareRangesUsingEnds(Se,Be.range)<0)&&(Se=Be.range),pe&&Se){if(pe.endLineNumber<Se.startLineNumber){pe=null;continue}if(Se.endLineNumber<pe.startLineNumber){Se=null;continue}Q=!0;break}}this._configuration.setGlyphMarginDecorationLaneCount(Q?2:1)}this._eventDispatcher.emitSingleViewEvent(new Io(e)),this._eventDispatcher.emitOutgoingEvent(new _s(e))}))}setHiddenAreas(e,s){this.hiddenAreasModel.setHiddenAreas(s,e);let y=this.hiddenAreasModel.getMergedRanges();if(y===this.previousHiddenAreas)return;this.previousHiddenAreas=y;let P=this._captureStableViewport(),Q=!1;try{let pe=this._eventDispatcher.beginEmitViewEvents();Q=this._lines.setHiddenAreas(y),Q&&(pe.emitViewEvent(new Yo),pe.emitViewEvent(new Ms),pe.emitViewEvent(new Io(null)),this._cursor.onLineMappingChanged(pe),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged()),P.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),Q&&this._eventDispatcher.emitOutgoingEvent(new Xo)}getVisibleRangesPlusViewportAboveBelow(){let e=this._configuration.options.get(139),s=this._configuration.options.get(64),y=Math.max(20,Math.round(e.height/s)),P=this.viewLayout.getLinesViewportData(),Q=Math.max(1,P.completelyVisibleStartLineNumber-y),pe=Math.min(this.getLineCount(),P.completelyVisibleEndLineNumber+y);return this._toModelVisibleRanges(new me.e(Q,this.getLineMinColumn(Q),pe,this.getLineMaxColumn(pe)))}getVisibleRanges(){let e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){let s=this.coordinatesConverter.convertViewRangeToModelRange(e),y=this._lines.getHiddenAreas();if(y.length===0)return[s];let P=[],Q=0,pe=s.startLineNumber,Se=s.startColumn,Be=s.endLineNumber,it=s.endColumn;for(let Ge=0,st=y.length;Ge<st;Ge++){let Dt=y[Ge].startLineNumber,Et=y[Ge].endLineNumber;Et<pe||Dt>Be||(pe<Dt&&(P[Q++]=new me.e(pe,Se,Dt-1,this.model.getLineMaxColumn(Dt-1))),pe=Et+1,Se=1)}return(pe<Be||pe===Be&&Se<it)&&(P[Q++]=new me.e(pe,Se,Be,it)),P}getCompletelyVisibleViewRange(){let e=this.viewLayout.getLinesViewportData(),s=e.completelyVisibleStartLineNumber,y=e.completelyVisibleEndLineNumber;return new me.e(s,this.getLineMinColumn(s),y,this.getLineMaxColumn(y))}getCompletelyVisibleViewRangeAtScrollTop(e){let s=this.viewLayout.getLinesViewportDataAtScrollTop(e),y=s.completelyVisibleStartLineNumber,P=s.completelyVisibleEndLineNumber;return new me.e(y,this.getLineMinColumn(y),P,this.getLineMaxColumn(P))}saveState(){let e=this.viewLayout.saveState(),s=e.scrollTop,y=this.viewLayout.getLineNumberAtVerticalOffset(s),P=this.coordinatesConverter.convertViewPositionToModelPosition(new ee.L(y,this.getLineMinColumn(y))),Q=this.viewLayout.getVerticalOffsetForLineNumber(y)-s;return{scrollLeft:e.scrollLeft,firstPosition:P,firstPositionDeltaTop:Q}}reduceRestoreState(e){if(e.firstPosition===void 0)return this._reduceRestoreStateCompatibility(e);let s=this.model.validatePosition(e.firstPosition),y=this.coordinatesConverter.convertModelPositionToViewPosition(s),P=this.viewLayout.getVerticalOffsetForLineNumber(y.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:P}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,s,y){this._viewportStart.update(this,e)}getActiveIndentGuide(e,s,y){return this._lines.getActiveIndentGuide(e,s,y)}getLinesIndentGuides(e,s){return this._lines.getViewLinesIndentGuides(e,s)}getBracketGuidesInRangeByLine(e,s,y,P){return this._lines.getViewLinesBracketGuides(e,s,y,P)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){let s=ci.LC(this.getLineContent(e));return s===-1?0:s+1}getLineLastNonWhitespaceColumn(e){let s=ci.ow(this.getLineContent(e));return s===-1?0:s+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,s){let y=this._decorations.getDecorationsViewportData(e).inlineDecorations[s-e.startLineNumber];return this._getViewLineRenderingData(s,y)}getViewLineRenderingData(e){let s=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,s)}_getViewLineRenderingData(e,s){let y=this.model.mightContainRTL(),P=this.model.mightContainNonBasicASCII(),Q=this.getTabSize(),pe=this._lines.getViewLineData(e);return pe.inlineDecorations&&(s=[...s,...pe.inlineDecorations.map(Se=>Se.toInlineDecoration(e))]),new St.wA(pe.minColumn,pe.maxColumn,pe.content,pe.continuesWithWrappedLine,y,P,pe.tokens,s,Q,pe.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,s,y){let P=this._lines.getViewLinesData(e,s,y);return new St.ud(this.getTabSize(),P)}getAllOverviewRulerDecorations(e){let s=this.model.getOverviewRulerDecorations(this._editorId,(0,k.$J)(this._configuration.options)),y=new jr;for(let P of s){let Q=P.options,pe=Q.overviewRuler;if(!pe)continue;let Se=pe.position;if(Se===0)continue;let Be=pe.getColor(e.value),it=this.coordinatesConverter.getViewLineNumberOfModelPosition(P.range.startLineNumber,P.range.startColumn),Ge=this.coordinatesConverter.getViewLineNumberOfModelPosition(P.range.endLineNumber,P.range.endColumn);y.accept(Be,Q.zIndex,it,Ge,Se)}return y.asArray}_invalidateDecorationsColorCache(){let e=this.model.getOverviewRulerDecorations();for(let s of e){let y=s.options.overviewRuler;y==null||y.invalidateCachedColor();let P=s.options.minimap;P==null||P.invalidateCachedColor()}}getValueInRange(e,s){let y=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(y,s)}getValueLengthInRange(e,s){let y=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(y,s)}modifyPosition(e,s){let y=this.coordinatesConverter.convertViewPositionToModelPosition(e);return this.model.modifyPosition(y,s)}deduceModelPositionRelativeToViewPosition(e,s,y){let P=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(s<0?s-=y:s+=y);let Q=this.model.getOffsetAt(P)+s;return this.model.getPositionAt(Q)}getPlainTextToCopy(e,s,y){let P=y?`\r
`:this.model.getEOL();(e=e.slice(0)).sort(me.e.compareRangesUsingStarts);let Q=!1,pe=!1;for(let Be of e)Be.isEmpty()?Q=!0:pe=!0;if(!pe){if(!s)return"";let Be=e.map(Ge=>Ge.startLineNumber),it="";for(let Ge=0;Ge<Be.length;Ge++)Ge>0&&Be[Ge-1]===Be[Ge]||(it+=this.model.getLineContent(Be[Ge])+P);return it}if(Q&&s){let Be=[],it=0;for(let Ge of e){let st=Ge.startLineNumber;Ge.isEmpty()?st!==it&&Be.push(this.model.getLineContent(st)):Be.push(this.model.getValueInRange(Ge,y?2:0)),it=st}return Be.length===1?Be[0]:Be}let Se=[];for(let Be of e)Be.isEmpty()||Se.push(this.model.getValueInRange(Be,y?2:0));return Se.length===1?Se[0]:Se}getRichTextToCopy(e,s){let y=this.model.getLanguageId();if(y===dr.bd||e.length!==1)return null;let P=e[0];if(P.isEmpty()){if(!s)return null;let Be=P.startLineNumber;P=new me.e(Be,this.model.getLineMinColumn(Be),Be,this.model.getLineMaxColumn(Be))}let Q=this._configuration.options.get(48),pe=this._getColorMap(),Se;return/[:;\\\/<>]/.test(Q.fontFamily)||Q.fontFamily===k.hL.fontFamily?Se=k.hL.fontFamily:(Se=Q.fontFamily,Se=Se.replace(/"/g,"'"),/[,']/.test(Se)||/[+ ]/.test(Se)&&(Se=`'${Se}'`),Se=`${Se}, ${k.hL.fontFamily}`),{mode:y,html:`<div style="color: ${pe[1]};background-color: ${pe[2]};font-family: ${Se};font-weight: ${Q.fontWeight};font-size: ${Q.fontSize}px;line-height: ${Q.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(P,pe)+"</div>"}}_getHTMLToCopy(e,s){let y=e.startLineNumber,P=e.startColumn,Q=e.endLineNumber,pe=e.endColumn,Se=this.getTabSize(),Be="";for(let it=y;it<=Q;it++){let Ge=this.model.tokenization.getLineTokens(it),st=Ge.getLineContent(),Dt=it===y?P-1:0,Et=it===Q?pe-1:st.length;Be+=st===""?"<br>":(0,Cs.Fq)(st,Ge.inflate(),s,Dt,Et,Se,c.ED)}return Be}_getColorMap(){let e=Ri.RW.getColorMap(),s=["#000000"];if(e)for(let y=1,P=e.length;y<P;y++)s[y]=Wt.Il.Format.CSS.formatHex(e[y]);return s}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,s,y){return this._withViewEventsCollector(P=>this._cursor.setStates(P,e,s,y))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,s,y=0){this._withViewEventsCollector(P=>this._cursor.setSelections(P,e,s,y))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(s=>this._cursor.restoreState(s,e))}_executeCursorEdit(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new La):this._withViewEventsCollector(e)}executeEdits(e,s,y){this._executeCursorEdit(P=>this._cursor.executeEdits(P,e,s,y))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(s=>this._cursor.endComposition(s,e))}type(e,s){this._executeCursorEdit(y=>this._cursor.type(y,e,s))}compositionType(e,s,y,P,Q){this._executeCursorEdit(pe=>this._cursor.compositionType(pe,e,s,y,P,Q))}paste(e,s,y,P){this._executeCursorEdit(Q=>this._cursor.paste(Q,e,s,y,P))}cut(e){this._executeCursorEdit(s=>this._cursor.cut(s,e))}executeCommand(e,s){this._executeCursorEdit(y=>this._cursor.executeCommand(y,e,s))}executeCommands(e,s){this._executeCursorEdit(y=>this._cursor.executeCommands(y,e,s))}revealPrimaryCursor(e,s,y=!1){this._withViewEventsCollector(P=>this._cursor.revealPrimary(P,e,y,0,s,0))}revealTopMostCursor(e){let s=this._cursor.getTopMostViewPosition(),y=new me.e(s.lineNumber,s.column,s.lineNumber,s.column);this._withViewEventsCollector(P=>P.emitViewEvent(new Rs(e,!1,y,null,0,!0,0)))}revealBottomMostCursor(e){let s=this._cursor.getBottomMostViewPosition(),y=new me.e(s.lineNumber,s.column,s.lineNumber,s.column);this._withViewEventsCollector(P=>P.emitViewEvent(new Rs(e,!1,y,null,0,!0,0)))}revealRange(e,s,y,P,Q){this._withViewEventsCollector(pe=>pe.emitViewEvent(new Rs(e,!1,y,null,P,s,Q)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Sa),this._eventDispatcher.emitOutgoingEvent(new sr))}_withViewEventsCollector(e){try{return e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,s){return this._lines.normalizePosition(e,s)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class zs{static create(e){let s=e._setTrackedRange(null,new me.e(1,1,1,1),1);return new zs(e,1,!1,s,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,s,y,P,Q){this._model=e,this._viewLineNumber=s,this._isValid=y,this._modelTrackedRange=P,this._startLineDelta=Q}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,s){let y=e.coordinatesConverter.convertViewPositionToModelPosition(new ee.L(s,e.getLineMinColumn(s))),P=e.model._setTrackedRange(this._modelTrackedRange,new me.e(y.lineNumber,y.column,y.lineNumber,y.column),1),Q=e.viewLayout.getVerticalOffsetForLineNumber(s),pe=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=s,this._isValid=!0,this._modelTrackedRange=P,this._startLineDelta=pe-Q}invalidate(){this._isValid=!1}}class jr{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,s,y,P,Q){let pe=this._asMap[e];if(pe){let Se=pe.data,Be=Se[Se.length-3],it=Se[Se.length-1];if(Be===Q&&it+1>=y)return void(P>it&&(Se[Se.length-1]=P));Se.push(Q,y,P)}else{let Se=new St.SQ(e,s,[Q,y,P]);this._asMap[e]=Se,this.asArray.push(Se)}}}class $r{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,s){let y=this.hiddenAreas.get(e);y&&To(y,s)||(this.hiddenAreas.set(e,s),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;let e=Array.from(this.hiddenAreas.values()).reduce((s,y)=>function(P,Q){let pe=[],Se=0,Be=0;for(;Se<P.length&&Be<Q.length;){let it=P[Se],Ge=Q[Be];if(it.endLineNumber<Ge.startLineNumber-1)pe.push(P[Se++]);else if(Ge.endLineNumber<it.startLineNumber-1)pe.push(Q[Be++]);else{let st=Math.min(it.startLineNumber,Ge.startLineNumber),Dt=Math.max(it.endLineNumber,Ge.endLineNumber);pe.push(new me.e(st,1,Dt,1)),Se++,Be++}}for(;Se<P.length;)pe.push(P[Se++]);for(;Be<Q.length;)pe.push(Q[Be++]);return pe}(s,y),[]);return To(this.ranges,e)||(this.ranges=e),this.ranges}}function To(Ct,e){if(Ct.length!==e.length)return!1;for(let s=0;s<Ct.length;s++)if(!Ct[s].equalsRange(e[s]))return!1;return!0}class qr{constructor(e,s){this.viewportStartModelPosition=e,this.startLineDelta=s}recoverViewportStart(e,s){if(!this.viewportStartModelPosition)return;let y=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),P=s.getVerticalOffsetForLineNumber(y.lineNumber);s.setScrollPosition({scrollTop:P+this.startLineDelta},1)}}var rs=t(4565),Us=t(3983),gr=t(2065),Ks=t(972),qo=t(9422),Gr=t(4906),Go=t(5146);class Qo{constructor(e,s,y,P,Q){this.injectionOffsets=e,this.injectionOptions=s,this.breakOffsets=y,this.breakOffsetsVisibleColumn=P,this.wrappedTextIndentLength=Q}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){let s=e>0?this.breakOffsets[e-1]:0,y=this.breakOffsets[e]-s;return e>0&&(y+=this.wrappedTextIndentLength),y}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,s){e>0&&(s=Math.max(0,s-this.wrappedTextIndentLength));let y=e===0?s:this.breakOffsets[e-1]+s;if(this.injectionOffsets!==null)for(let P=0;P<this.injectionOffsets.length&&y>this.injectionOffsets[P];P++)y<this.injectionOffsets[P]+this.injectionOptions[P].content.length?y=this.injectionOffsets[P]:y-=this.injectionOptions[P].content.length;return y}translateToOutputPosition(e,s=2){let y=e;if(this.injectionOffsets!==null)for(let P=0;P<this.injectionOffsets.length&&!(e<this.injectionOffsets[P])&&(s===1||e!==this.injectionOffsets[P]);P++)y+=this.injectionOptions[P].content.length;return this.offsetInInputWithInjectionsToOutputPosition(y,s)}offsetInInputWithInjectionsToOutputPosition(e,s=2){let y=0,P=this.breakOffsets.length-1,Q=0,pe=0;for(;y<=P;){Q=y+(P-y)/2|0;let Be=this.breakOffsets[Q];if(pe=Q>0?this.breakOffsets[Q-1]:0,s===0)if(e<=pe)P=Q-1;else{if(!(e>Be))break;y=Q+1}else if(e<pe)P=Q-1;else{if(!(e>=Be))break;y=Q+1}}let Se=e-pe;return Q>0&&(Se+=this.wrappedTextIndentLength),new as(Q,Se)}normalizeOutputPosition(e,s,y){if(this.injectionOffsets!==null){let P=this.outputPositionToOffsetInInputWithInjections(e,s),Q=this.normalizeOffsetInInputWithInjectionsAroundInjections(P,y);if(Q!==P)return this.offsetInInputWithInjectionsToOutputPosition(Q,y)}if(y===0){if(e>0&&s===this.getMinOutputOffset(e))return new as(e-1,this.getMaxOutputOffset(e-1))}else if(y===1&&e<this.getOutputLineCount()-1&&s===this.getMaxOutputOffset(e))return new as(e+1,this.getMinOutputOffset(e+1));return new as(e,s)}outputPositionToOffsetInInputWithInjections(e,s){return e>0&&(s=Math.max(0,s-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+s}normalizeOffsetInInputWithInjectionsAroundInjections(e,s){let y=this.getInjectedTextAtOffset(e);if(!y)return e;if(s===2){if(e===y.offsetInInputWithInjections+y.length&&Ss(this.injectionOptions[y.injectedTextIndex].cursorStops))return y.offsetInInputWithInjections+y.length;{let P=y.offsetInInputWithInjections;if(Fo(this.injectionOptions[y.injectedTextIndex].cursorStops))return P;let Q=y.injectedTextIndex-1;for(;Q>=0&&this.injectionOffsets[Q]===this.injectionOffsets[y.injectedTextIndex]&&!Ss(this.injectionOptions[Q].cursorStops)&&(P-=this.injectionOptions[Q].content.length,!Fo(this.injectionOptions[Q].cursorStops));)Q--;return P}}if(s===1||s===4){let P=y.offsetInInputWithInjections+y.length,Q=y.injectedTextIndex;for(;Q+1<this.injectionOffsets.length&&this.injectionOffsets[Q+1]===this.injectionOffsets[Q];)P+=this.injectionOptions[Q+1].content.length,Q++;return P}if(s===0||s===3){let P=y.offsetInInputWithInjections,Q=y.injectedTextIndex;for(;Q-1>=0&&this.injectionOffsets[Q-1]===this.injectionOffsets[Q];)P-=this.injectionOptions[Q-1].content.length,Q--;return P}(0,Go.vE)(s)}getInjectedText(e,s){let y=this.outputPositionToOffsetInInputWithInjections(e,s),P=this.getInjectedTextAtOffset(y);return P?{options:this.injectionOptions[P.injectedTextIndex]}:null}getInjectedTextAtOffset(e){let s=this.injectionOffsets,y=this.injectionOptions;if(s!==null){let P=0;for(let Q=0;Q<s.length;Q++){let pe=y[Q].content.length,Se=s[Q]+P,Be=s[Q]+P+pe;if(Se>e)break;if(e<=Be)return{injectedTextIndex:Q,offsetInInputWithInjections:Se,length:pe};P+=pe}}}}function Ss(Ct){return Ct==null||Ct===Ne.RM.Right||Ct===Ne.RM.Both}function Fo(Ct){return Ct==null||Ct===Ne.RM.Left||Ct===Ne.RM.Both}class as{constructor(e,s){this.outputLineIndex=e,this.outputOffset=s}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new ee.L(e+this.outputLineIndex,this.outputOffset+1)}}class Ls{static create(e){return new Ls(e.get(128),e.get(127))}constructor(e,s){this.classifier=new pr(e,s)}createLineBreaksComputer(e,s,y,P,Q){let pe=[],Se=[],Be=[];return{addRequest:(it,Ge,st)=>{pe.push(it),Se.push(Ge),Be.push(st)},finalize:()=>{let it=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,Ge=[];for(let st=0,Dt=pe.length;st<Dt;st++){let Et=Se[st],Vt=Be[st];!Vt||Vt.injectionOptions||Et?Ge[st]=xa(this.classifier,pe[st],Et,s,y,it,P,Q):Ge[st]=Qr(this.classifier,Vt,pe[st],s,y,it,P,Q)}return oo.length=0,ks.length=0,Ge}}}}class pr extends Gr.N{constructor(e,s){super(0);for(let y=0;y<e.length;y++)this.set(e.charCodeAt(y),1);for(let y=0;y<s.length;y++)this.set(s.charCodeAt(y),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let oo=[],ks=[];function Qr(Ct,e,s,y,P,Q,pe,Se){if(P===-1)return null;let Be=s.length;if(Be<=1)return null;let it=Se==="keepAll",Ge=e.breakOffsets,st=e.breakOffsetsVisibleColumn,Dt=Yr(s,y,P,Q,pe),Et=P-Dt,Vt=oo,Ht=ks,Ut=0,ui=0,gi=0,vi=P,Bi=Ge.length,Di=0;if(Di>=0){let Hi=Math.abs(st[Di]-vi);for(;Di+1<Bi;){let Ui=Math.abs(st[Di+1]-vi);if(Ui>=Hi)break;Hi=Ui,Di++}}for(;Di<Bi;){let Hi=Di<0?0:Ge[Di],Ui=Di<0?0:st[Di];ui>Hi&&(Hi=ui,Ui=gi);let Ii=0,Ki=0,Zi=0,cn=0;if(Ui<=vi){let hn=Ui,Hn=Hi===0?0:s.charCodeAt(Hi-1),$n=Hi===0?0:Ct.get(Hn),So=!0;for(let fn=Hi;fn<Be;fn++){let Rn=fn,An=s.charCodeAt(fn),Un,io;if(ci.ZG(An)?(fn++,Un=0,io=2):(Un=Ct.get(An),io=Zo(An,hn,y,Q)),Rn>ui&&Bo(0,$n,An,Un,it)&&(Ii=Rn,Ki=hn),hn+=io,hn>vi){Rn>ui?(Zi=Rn,cn=hn-io):(Zi=fn+1,cn=hn),hn-Ki>Et&&(Ii=0),So=!1;break}Hn=An,$n=Un}if(So){Ut>0&&(Vt[Ut]=Ge[Ge.length-1],Ht[Ut]=st[Ge.length-1],Ut++);break}}if(Ii===0){let hn=Ui,Hn=s.charCodeAt(Hi),$n=Ct.get(Hn),So=!1;for(let fn=Hi-1;fn>=ui;fn--){let Rn=fn+1,An=s.charCodeAt(fn);if(An===9){So=!0;break}let Un,io;if(ci.YK(An)?(fn--,Un=0,io=2):(Un=Ct.get(An),io=ci.K7(An)?Q:1),hn<=vi){if(Zi===0&&(Zi=Rn,cn=hn),hn<=vi-Et)break;if(Bo(0,Un,Hn,$n,it)){Ii=Rn,Ki=hn;break}}hn-=io,Hn=An,$n=Un}if(Ii!==0){let fn=Et-(cn-Ki);if(fn<=y){let Rn=s.charCodeAt(Zi),An;An=ci.ZG(Rn)?2:Zo(Rn,cn,y,Q),fn-An<0&&(Ii=0)}}if(So){Di--;continue}}if(Ii===0&&(Ii=Zi,Ki=cn),Ii<=ui){let hn=s.charCodeAt(ui);ci.ZG(hn)?(Ii=ui+2,Ki=gi+2):(Ii=ui+1,Ki=gi+Zo(hn,gi,y,Q))}for(ui=Ii,Vt[Ut]=Ii,gi=Ki,Ht[Ut]=Ki,Ut++,vi=Ki+Et;Di<0||Di<Bi&&st[Di]<Ki;)Di++;let mn=Math.abs(st[Di]-vi);for(;Di+1<Bi;){let hn=Math.abs(st[Di+1]-vi);if(hn>=mn)break;mn=hn,Di++}}return Ut===0?null:(Vt.length=Ut,Ht.length=Ut,oo=e.breakOffsets,ks=e.breakOffsetsVisibleColumn,e.breakOffsets=Vt,e.breakOffsetsVisibleColumn=Ht,e.wrappedTextIndentLength=Dt,e)}function xa(Ct,e,s,y,P,Q,pe,Se){let Be=wo.gk.applyInjectedText(e,s),it,Ge;if(s&&s.length>0?(it=s.map(Ki=>Ki.options),Ge=s.map(Ki=>Ki.column-1)):(it=null,Ge=null),P===-1)return it?new Qo(Ge,it,[Be.length],[],0):null;let st=Be.length;if(st<=1)return it?new Qo(Ge,it,[Be.length],[],0):null;let Dt=Se==="keepAll",Et=Yr(Be,y,P,Q,pe),Vt=P-Et,Ht=[],Ut=[],ui=0,gi=0,vi=0,Bi=P,Di=Be.charCodeAt(0),Hi=Ct.get(Di),Ui=Zo(Di,0,y,Q),Ii=1;ci.ZG(Di)&&(Ui+=1,Di=Be.charCodeAt(1),Hi=Ct.get(Di),Ii++);for(let Ki=Ii;Ki<st;Ki++){let Zi=Ki,cn=Be.charCodeAt(Ki),mn,hn;ci.ZG(cn)?(Ki++,mn=0,hn=2):(mn=Ct.get(cn),hn=Zo(cn,Ui,y,Q)),Bo(0,Hi,cn,mn,Dt)&&(gi=Zi,vi=Ui),Ui+=hn,Ui>Bi&&((gi===0||Ui-vi>Vt)&&(gi=Zi,vi=Ui-hn),Ht[ui]=gi,Ut[ui]=vi,ui++,Bi=vi+Vt,gi=0),Di=cn,Hi=mn}return ui!==0||s&&s.length!==0?(Ht[ui]=st,Ut[ui]=Ui,new Qo(Ge,it,Ht,Ut,Et)):null}function Zo(Ct,e,s,y){return Ct===9?s-e%s:ci.K7(Ct)||Ct<32?y:1}function Zr(Ct,e){return e-Ct%e}function Bo(Ct,e,s,y,P){return s!==32&&(e===2&&y!==2||e!==1&&y===1||!P&&e===3&&y!==2||!P&&y===3&&e!==1)}function Yr(Ct,e,s,y,P){let Q=0;if(P!==0){let pe=ci.LC(Ct);if(pe!==-1){for(let Be=0;Be<pe;Be++)Q+=Ct.charCodeAt(Be)===9?Zr(Q,e):1;let Se=P===3?2:P===2?1:0;for(let Be=0;Be<Se;Be++)Q+=Zr(Q,e);Q+y>s&&(Q=0)}}return Q}var Wo;let ls=(Wo=window.trustedTypes)===null||Wo===void 0?void 0:Wo.createPolicy("domLineBreaksComputer",{createHTML:Ct=>Ct});class Mo{static create(){return new Mo}constructor(){}createLineBreaksComputer(e,s,y,P,Q){let pe=[],Se=[];return{addRequest:(Be,it,Ge)=>{pe.push(Be),Se.push(it)},finalize:()=>function(Be,it,Ge,st,Dt,Et,Vt){var Ht;function Ut(fn){let Rn=Vt[fn];if(Rn){let An=wo.gk.applyInjectedText(Be[fn],Rn),Un=Rn.map(Ro=>Ro.options),io=Rn.map(Ro=>Ro.column-1);return new Qo(io,Un,[An.length],[],0)}return null}if(st===-1){let fn=[];for(let Rn=0,An=Be.length;Rn<An;Rn++)fn[Rn]=Ut(Rn);return fn}let ui=Math.round(st*it.typicalHalfwidthCharacterWidth),gi=Dt===3?2:Dt===2?1:0,vi=Math.round(Ge*gi),Bi=Math.ceil(it.spaceWidth*vi),Di=document.createElement("div");(0,Xt.N)(Di,it);let Hi=new Ue.HT(1e4),Ui=[],Ii=[],Ki=[],Zi=[],cn=[];for(let fn=0;fn<Be.length;fn++){let Rn=wo.gk.applyInjectedText(Be[fn],Vt[fn]),An=0,Un=0,io=ui;if(Dt!==0)if(An=ci.LC(Rn),An===-1)An=0;else{for(let Ao=0;Ao<An;Ao++)Un+=Rn.charCodeAt(Ao)===9?Ge-Un%Ge:1;let Vo=Math.ceil(it.spaceWidth*Un);Vo+it.typicalFullwidthCharacterWidth>ui?(An=0,Un=0):io=ui-Vo}let Ro=Rn.substr(An),so=Jr(Ro,Un,Ge,io,Hi,Bi);Ui[fn]=An,Ii[fn]=Un,Ki[fn]=Ro,Zi[fn]=so[0],cn[fn]=so[1]}let mn=Hi.build(),hn=(Ht=ls==null?void 0:ls.createHTML(mn))!==null&&Ht!==void 0?Ht:mn;Di.innerHTML=hn,Di.style.position="absolute",Di.style.top="10000",Et==="keepAll"?(Di.style.wordBreak="keep-all",Di.style.overflowWrap="anywhere"):(Di.style.wordBreak="inherit",Di.style.overflowWrap="break-word"),document.body.appendChild(Di);let Hn=document.createRange(),$n=Array.prototype.slice.call(Di.children,0),So=[];for(let fn=0;fn<Be.length;fn++){let Rn=Ea(Hn,$n[fn],Ki[fn],Zi[fn]);if(Rn===null){So[fn]=Ut(fn);continue}let An=Ui[fn],Un=Ii[fn]+vi,io=cn[fn],Ro=[];for(let co=0,ds=Rn.length;co<ds;co++)Ro[co]=io[Rn[co]];if(An!==0)for(let co=0,ds=Rn.length;co<ds;co++)Rn[co]+=An;let so,Vo,Ao=Vt[fn];Ao?(so=Ao.map(co=>co.options),Vo=Ao.map(co=>co.column-1)):(so=null,Vo=null),So[fn]=new Qo(Vo,so,Rn,Ro,Un)}return document.body.removeChild(Di),So}(pe,e,s,y,P,Q,Se)}}}function Jr(Ct,e,s,y,P,Q){if(Q!==0){let Dt=String(Q);P.appendString('<div style="text-indent: -'),P.appendString(Dt),P.appendString("px; padding-left: "),P.appendString(Dt),P.appendString("px; box-sizing: border-box; width:")}else P.appendString('<div style="width:');P.appendString(String(y)),P.appendString('px;">');let pe=Ct.length,Se=e,Be=0,it=[],Ge=[],st=0<pe?Ct.charCodeAt(0):0;P.appendString("<span>");for(let Dt=0;Dt<pe;Dt++){Dt!==0&&Dt%16384==0&&P.appendString("</span><span>"),it[Dt]=Be,Ge[Dt]=Se;let Et=st;st=Dt+1<pe?Ct.charCodeAt(Dt+1):0;let Vt=1,Ht=1;switch(Et){case 9:Vt=s-Se%s,Ht=Vt;for(let Ut=1;Ut<=Vt;Ut++)Ut<Vt?P.appendCharCode(160):P.appendASCIICharCode(32);break;case 32:st===32?P.appendCharCode(160):P.appendASCIICharCode(32);break;case 60:P.appendString("&lt;");break;case 62:P.appendString("&gt;");break;case 38:P.appendString("&amp;");break;case 0:P.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:P.appendCharCode(65533);break;default:ci.K7(Et)&&Ht++,Et<32?P.appendCharCode(9216+Et):P.appendCharCode(Et)}Be+=Vt,Se+=Ht}return P.appendString("</span>"),it[Ct.length]=Be,Ge[Ct.length]=Se,P.appendString("</div>"),[it,Ge]}function Ea(Ct,e,s,y){if(s.length<=1)return null;let P=Array.prototype.slice.call(e.children,0),Q=[];try{mr(Ct,P,y,0,null,s.length-1,null,Q)}catch(pe){return console.log(pe),null}return Q.length===0?null:(Q.push(s.length),Q)}function mr(Ct,e,s,y,P,Q,pe,Se){if(y===Q||(P=P||fr(Ct,e,s[y],s[y+1]),pe=pe||fr(Ct,e,s[Q],s[Q+1]),Math.abs(P[0].top-pe[0].top)<=.1))return;if(y+1===Q)return void Se.push(Q);let Be=y+(Q-y)/2|0,it=fr(Ct,e,s[Be],s[Be+1]);mr(Ct,e,s,y,P,Be,it,Se),mr(Ct,e,s,Be,it,Q,pe,Se)}function fr(Ct,e,s,y){return Ct.setStart(e[s/16384|0].firstChild,s%16384),Ct.setEnd(e[y/16384|0].firstChild,y%16384),Ct.getClientRects()}var js=t(2896),_r=t(1381),vr=t(1922);class Xr extends d.JT{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new d.b2),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,s,y){this._editor=e,this._instantiationService=y;for(let P of s)this._pending.has(P.id)?(0,v.dL)(new Error(`Cannot have two contributions with the same id ${P.id}`)):this._pending.set(P.id,P);this._instantiateSome(0),this._register((0,gn.To)(()=>{this._instantiateSome(1)})),this._register((0,gn.To)(()=>{this._instantiateSome(2)})),this._register((0,gn.To)(()=>{this._instantiateSome(3)},5e3))}saveViewState(){let e={};for(let[s,y]of this._instances)typeof y.saveViewState=="function"&&(e[s]=y.saveViewState());return e}restoreViewState(e){for(let[s,y]of this._instances)typeof y.restoreViewState=="function"&&y.restoreViewState(e[s])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){this._register((0,gn.To)(()=>{this._instantiateSome(1)},50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;let s=this._findPendingContributionsByInstantiation(e);for(let y of s)this._instantiateById(y.id)}_findPendingContributionsByInstantiation(e){let s=[];for(let[,y]of this._pending)y.instantiation===e&&s.push(y);return s}_instantiateById(e){let s=this._pending.get(e);if(s){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{let y=this._instantiationService.createInstance(s.ctor,this._editor);this._instances.set(s.id,y),typeof y.restoreViewState=="function"&&s.instantiation!==0&&console.warn(`Editor contribution '${s.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(y){(0,v.dL)(y)}}}}var Kn=function(Ct,e){return function(s,y){e(s,y,Ct)}};let ea=0;class br{constructor(e,s,y,P,Q,pe){this.model=e,this.viewModel=s,this.view=y,this.hasRealView=P,this.listenersToRemove=Q,this.attachedView=pe}dispose(){(0,d.B9)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let Ds=class Js extends d.JT{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,s,y,P,Q,pe,Se,Be,it,Ge,st,Dt){super(),this.languageConfigurationService=st,this._deliveryQueue=new f.F3,this._contributions=this._register(new Xr),this._onDidDispose=this._register(new f.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Cr({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Cr({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Yn(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new f.Q5({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),Q.willCreateCodeEditor();let Et=Object.assign({},s),Vt;this._domElement=e,this._overflowWidgetsDomNode=Et.overflowWidgetsDomNode,delete Et.overflowWidgetsDomNode,this._id=++ea,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=y.telemetryData,this._configuration=this._register(this._createConfiguration(y.isSimpleWidget||!1,Et,Ge)),this._register(this._configuration.onDidChange(Ut=>{this._onDidChangeConfiguration.fire(Ut);let ui=this._configuration.options;if(Ut.hasChanged(139)){let gi=ui.get(139);this._onDidLayoutChange.fire(gi)}})),this._contextKeyService=this._register(Se.createScoped(this._domElement)),this._notificationService=it,this._codeEditorService=Q,this._commandService=pe,this._themeService=Be,this._register(new ta(this,this._contextKeyService)),this._register(new wr(this,this._contextKeyService,Dt)),this._instantiationService=P.createChild(new Ks.y([Us.i6,this._contextKeyService])),this._modelData=null,this._focusTracker=new yr(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},Vt=Array.isArray(y.contributions)?y.contributions:B.Uc.getEditorContributions(),this._contributions.initialize(this,Vt,this._instantiationService);for(let Ut of B.Uc.getEditorActions()){if(this._actions.has(Ut.id)){(0,v.dL)(new Error(`Cannot have two actions with the same id ${Ut.id}`));continue}let ui=new Br.p(Ut.id,Ut.label,Ut.alias,(0,yi.f6)(Ut.precondition),()=>this._instantiationService.invokeFunction(gi=>Promise.resolve(Ut.runEditorCommand(gi,this,null))),this._contextKeyService);this._actions.set(ui.id,ui)}let Ht=()=>!this._configuration.options.get(87)&&this._configuration.options.get(34).enabled;this._register(new x.eg(this._domElement,{onDragEnter:()=>{},onDragOver:Ut=>{if(!Ht())return;let ui=this.getTargetAtClientPoint(Ut.clientX,Ut.clientY);ui!=null&&ui.position&&this.showDropIndicatorAt(ui.position)},onDrop:Ut=>{return ui=this,gi=void 0,Bi=function*(){if(!Ht()||(this.removeDropIndicator(),!Ut.dataTransfer))return;let Di=this.getTargetAtClientPoint(Ut.clientX,Ut.clientY);Di!=null&&Di.position&&this._onDropIntoEditor.fire({position:Di.position,event:Ut})},new((vi=void 0)||(vi=Promise))(function(Di,Hi){function Ui(Zi){try{Ki(Bi.next(Zi))}catch(cn){Hi(cn)}}function Ii(Zi){try{Ki(Bi.throw(Zi))}catch(cn){Hi(cn)}}function Ki(Zi){var cn;Zi.done?Di(Zi.value):(cn=Zi.value,cn instanceof vi?cn:new vi(function(mn){mn(cn)})).then(Ui,Ii)}Ki((Bi=Bi.apply(ui,gi||[])).next())});var ui,gi,vi,Bi},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var s;(s=this._modelData)===null||s===void 0||s.view.writeScreenReaderContent(e)}_createConfiguration(e,s,y){return new N(e,s,this._domElement,y)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return Wn.g.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?js.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(125),e):null}getValue(e=null){if(!this._modelData)return"";let s=!(!e||!e.preserveBOM),y=0;return e&&e.lineEnding&&e.lineEnding===`
`?y=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(y=2),this._modelData.model.getValue(y,s)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){let s=e;if(this._modelData===null&&s===null||this._modelData&&this._modelData.model===s)return;let y=this.hasTextFocus(),P=this._detachModel();this._attachModel(s),y&&this.hasModel()&&this.focus();let Q={oldModelUrl:P?P.uri:null,newModelUrl:s?s.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(Q),this._postDetachModelCleanup(P),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){let s=this._decorationTypeSubtypes[e];for(let y in s)this._removeDecorationType(e+"-"+y)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,s,y,P){let Q=e.model.validatePosition({lineNumber:s,column:y}),pe=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Q);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(pe.lineNumber,P)}getTopForLineNumber(e,s=!1){return this._modelData?Js._getVerticalOffsetForPosition(this._modelData,e,1,s):-1}getTopForPosition(e,s){return this._modelData?Js._getVerticalOffsetForPosition(this._modelData,e,s,!1):-1}static _getVerticalOffsetForPosition(e,s,y,P=!1){let Q=e.model.validatePosition({lineNumber:s,column:y}),pe=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Q);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(pe.lineNumber,P)}getBottomForLineNumber(e,s=!1){return this._modelData?Js._getVerticalOffsetAfterPosition(this._modelData,e,1,s):-1}setHiddenAreas(e,s){var y;(y=this._modelData)===null||y===void 0||y.viewModel.setHiddenAreas(e.map(P=>me.e.lift(P)),s)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;let s=this._modelData.model.validatePosition(e),y=this._modelData.model.getOptions().tabSize;return xe.i.visibleColumnFromColumn(this._modelData.model.getLineContent(s.lineNumber),s.column,y)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,s="api"){if(this._modelData){if(!ee.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(s,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,s,y,P){if(!this._modelData)return;if(!me.e.isIRange(e))throw new Error("Invalid arguments");let Q=this._modelData.model.validateRange(e),pe=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(Q);this._modelData.viewModel.revealRange("api",y,pe,s,P)}revealLine(e,s=0){this._revealLine(e,0,s)}revealLineInCenter(e,s=0){this._revealLine(e,1,s)}revealLineInCenterIfOutsideViewport(e,s=0){this._revealLine(e,2,s)}revealLineNearTop(e,s=0){this._revealLine(e,5,s)}_revealLine(e,s,y){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new me.e(e,1,e,1),s,!1,y)}revealPosition(e,s=0){this._revealPosition(e,0,!0,s)}revealPositionInCenter(e,s=0){this._revealPosition(e,1,!0,s)}revealPositionInCenterIfOutsideViewport(e,s=0){this._revealPosition(e,2,!0,s)}revealPositionNearTop(e,s=0){this._revealPosition(e,5,!0,s)}_revealPosition(e,s,y,P){if(!ee.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new me.e(e.lineNumber,e.column,e.lineNumber,e.column),s,y,P)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,s="api"){let y=H.Y.isISelection(e),P=me.e.isIRange(e);if(!y&&!P)throw new Error("Invalid arguments");if(y)this._setSelectionImpl(e,s);else if(P){let Q={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(Q,s)}}_setSelectionImpl(e,s){if(!this._modelData)return;let y=new H.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(s,[y])}revealLines(e,s,y=0){this._revealLines(e,s,0,y)}revealLinesInCenter(e,s,y=0){this._revealLines(e,s,1,y)}revealLinesInCenterIfOutsideViewport(e,s,y=0){this._revealLines(e,s,2,y)}revealLinesNearTop(e,s,y=0){this._revealLines(e,s,5,y)}_revealLines(e,s,y,P){if(typeof e!="number"||typeof s!="number")throw new Error("Invalid arguments");this._sendRevealRange(new me.e(e,1,s,1),y,!1,P)}revealRange(e,s=0,y=!1,P=!0){this._revealRange(e,y?1:0,P,s)}revealRangeInCenter(e,s=0){this._revealRange(e,1,!0,s)}revealRangeInCenterIfOutsideViewport(e,s=0){this._revealRange(e,2,!0,s)}revealRangeNearTop(e,s=0){this._revealRange(e,5,!0,s)}revealRangeNearTopIfOutsideViewport(e,s=0){this._revealRange(e,6,!0,s)}revealRangeAtTop(e,s=0){this._revealRange(e,3,!0,s)}_revealRange(e,s,y,P){if(!me.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(me.e.lift(e),s,y,P)}setSelections(e,s="api",y=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let P=0,Q=e.length;P<Q;P++)if(!H.Y.isISelection(e[P]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(s,e,y)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,s=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},s)}}setScrollTop(e,s=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},s)}}setScrollPosition(e,s=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,s)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;let e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;let s=e;if(s&&s.cursorState&&s.viewState){let y=s.cursorState;Array.isArray(y)?y.length>0&&this._modelData.viewModel.restoreCursorState(y):this._modelData.viewModel.restoreCursorState([y]),this._contributions.restoreViewState(s.contributionsState||{});let P=this._modelData.viewModel.reduceRestoreState(s.viewState);this._modelData.view.restoreState(P)}}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(s=>s.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,s,y){switch(y=y||{},s){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{let Q=y;return void this._type(e,Q.text||"")}case"replacePreviousChar":{let Q=y;return void this._compositionType(e,Q.text||"",Q.replaceCharCnt||0,0,0)}case"compositionType":{let Q=y;return void this._compositionType(e,Q.text||"",Q.replacePrevCharCnt||0,Q.replaceNextCharCnt||0,Q.positionDelta||0)}case"paste":{let Q=y;return void this._paste(e,Q.text||"",Q.pasteOnNewLine||!1,Q.multicursorText||null,Q.mode||null)}case"cut":return void this._cut(e)}let P=this.getAction(s);P?Promise.resolve(P.run(y)).then(void 0,v.dL):this._modelData&&(this._triggerEditorCommand(e,s,y)||this._triggerCommand(s,y))}_triggerCommand(e,s){this._commandService.executeCommand(e,s)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,s){this._modelData&&s.length!==0&&(e==="keyboard"&&this._onWillType.fire(s),this._modelData.viewModel.type(s,e),e==="keyboard"&&this._onDidType.fire(s))}_compositionType(e,s,y,P,Q){this._modelData&&this._modelData.viewModel.compositionType(s,y,P,Q,e)}_paste(e,s,y,P,Q){if(!this._modelData||s.length===0)return;let pe=this._modelData.viewModel,Se=pe.getSelection().getStartPosition();pe.paste(s,y,P,e);let Be=pe.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new me.e(Se.lineNumber,Se.column,Be.lineNumber,Be.column),languageId:Q})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,s,y){let P=B.Uc.getEditorCommand(s);return!!P&&((y=y||{}).source=e,this._instantiationService.invokeFunction(Q=>{Promise.resolve(P.runEditorCommand(Q,this,y)).then(void 0,v.dL)}),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&!this._configuration.options.get(87)&&(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!!this._modelData&&!this._configuration.options.get(87)&&(this._modelData.model.popStackElement(),!0)}executeEdits(e,s,y){if(!this._modelData||this._configuration.options.get(87))return!1;let P;return P=y?Array.isArray(y)?()=>y:y:()=>null,this._modelData.viewModel.executeEdits(e,s,P),!0}executeCommand(e,s){this._modelData&&this._modelData.viewModel.executeCommand(s,e)}executeCommands(e,s){this._modelData&&this._modelData.viewModel.executeCommands(s,e)}createDecorationsCollection(e){return new ia(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,k.$J)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,k.$J)(this._configuration.options)):null}deltaDecorations(e,s){return this._modelData?e.length===0&&s.length===0?e:this._modelData.model.deltaDecorations(e,s,this._id):[]}removeDecorations(e){this._modelData&&e.length!==0&&this._modelData.model.changeDecorations(s=>{s.deltaDecorations(e,[])})}removeDecorationsByType(e){let s=this._decorationTypeKeysToIds[e];s&&this.deltaDecorations(s,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(139)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){let s={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=s,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(s)}layoutContentWidget(e){let s=e.getId();if(this._contentWidgets.hasOwnProperty(s)){let y=this._contentWidgets[s];y.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(y)}}removeContentWidget(e){let s=e.getId();if(this._contentWidgets.hasOwnProperty(s)){let y=this._contentWidgets[s];delete this._contentWidgets[s],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(y)}}addOverlayWidget(e){let s={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=s,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(s)}layoutOverlayWidget(e){let s=e.getId();if(this._overlayWidgets.hasOwnProperty(s)){let y=this._overlayWidgets[s];y.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(y)}}removeOverlayWidget(e){let s=e.getId();if(this._overlayWidgets.hasOwnProperty(s)){let y=this._overlayWidgets[s];delete this._overlayWidgets[s],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(y)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,s){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,s):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;let s=this._modelData.model.validatePosition(e),y=this._configuration.options,P=y.get(139);return{top:Js._getVerticalOffsetForPosition(this._modelData,s.lineNumber,s.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(s.lineNumber,s.column)+P.glyphMarginWidth+P.lineNumbersWidth+P.decorationsWidth-this.getScrollLeft(),height:y.get(64)}}getOffsetForColumn(e,s){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,s):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,Xt.N)(e,this._configuration.options.get(48))}setBanner(e,s){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?s:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);let s=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());let y=e.onBeforeAttached(),P=new Kr(this._id,this._configuration,e,Mo.create(),Ls.create(this._configuration.options),Se=>x.jL(Se),this.languageConfigurationService,this._themeService,y);s.push(e.onWillDispose(()=>this.setModel(null))),s.push(P.onEvent(Se=>{switch(Se.kind){case 0:this._onDidContentSizeChange.fire(Se);break;case 1:this._editorTextFocus.setValue(Se.hasFocus);break;case 2:this._onDidScrollChange.fire(Se);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(Se.reachedMaxCursorCount){let st=this.getOption(77),Dt=A.NC("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",st);this._notificationService.prompt(qo.zb.Warning,Dt,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:A.NC("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}let Be=[];for(let st=0,Dt=Se.selections.length;st<Dt;st++)Be[st]=Se.selections[st].getPosition();let it={position:Be[0],secondaryPositions:Be.slice(1),reason:Se.reason,source:Se.source};this._onDidChangeCursorPosition.fire(it);let Ge={selection:Se.selections[0],secondarySelections:Se.selections.slice(1),modelVersionId:Se.modelVersionId,oldSelections:Se.oldSelections,oldModelVersionId:Se.oldModelVersionId,source:Se.source,reason:Se.reason};this._onDidChangeCursorSelection.fire(Ge);break}case 7:this._onDidChangeModelDecorations.fire(Se.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(Se.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(Se.event);break;case 10:this._onDidChangeModelContent.fire(Se.event);break;case 11:this._onDidChangeModelOptions.fire(Se.event);break;case 12:this._onDidChangeModelTokens.fire(Se.event)}}));let[Q,pe]=this._createView(P);if(pe){this._domElement.appendChild(Q.domNode.domNode);let Se=Object.keys(this._contentWidgets);for(let Be=0,it=Se.length;Be<it;Be++){let Ge=Se[Be];Q.addContentWidget(this._contentWidgets[Ge])}Se=Object.keys(this._overlayWidgets);for(let Be=0,it=Se.length;Be<it;Be++){let Ge=Se[Be];Q.addOverlayWidget(this._overlayWidgets[Ge])}Q.render(!1,!0),Q.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new br(e,P,Q,pe,s,y)}_createView(e){let s;s=this.isSimpleWidget?{paste:(P,Q,pe,Se)=>{this._paste("keyboard",P,Q,pe,Se)},type:P=>{this._type("keyboard",P)},compositionType:(P,Q,pe,Se)=>{this._compositionType("keyboard",P,Q,pe,Se)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(P,Q,pe,Se)=>{let Be={text:P,pasteOnNewLine:Q,multicursorText:pe,mode:Se};this._commandService.executeCommand("paste",Be)},type:P=>{let Q={text:P};this._commandService.executeCommand("type",Q)},compositionType:(P,Q,pe,Se)=>{if(pe||Se){let Be={text:P,replacePrevCharCnt:Q,replaceNextCharCnt:pe,positionDelta:Se};this._commandService.executeCommand("compositionType",Be)}else{let Be={text:P,replaceCharCnt:Q};this._commandService.executeCommand("replacePreviousChar",Be)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let y=new Re(e.coordinatesConverter);return y.onKeyDown=P=>this._onKeyDown.fire(P),y.onKeyUp=P=>this._onKeyUp.fire(P),y.onContextMenu=P=>this._onContextMenu.fire(P),y.onMouseMove=P=>this._onMouseMove.fire(P),y.onMouseLeave=P=>this._onMouseLeave.fire(P),y.onMouseDown=P=>this._onMouseDown.fire(P),y.onMouseUp=P=>this._onMouseUp.fire(P),y.onMouseDrag=P=>this._onMouseDrag.fire(P),y.onMouseDrop=P=>this._onMouseDrop.fire(P),y.onMouseDropCanceled=P=>this._onMouseDropCanceled.fire(P),y.onMouseWheel=P=>this._onMouseWheel.fire(P),[new Fr(s,this._configuration,this._themeService.getColorTheme(),e,y,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;let e=this._modelData.model,s=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),s&&this._domElement.contains(s)&&this._domElement.removeChild(s),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){let s=[{range:new me.e(e.lineNumber,e.column,e.lineNumber,e.column),options:Js.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(s),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}};Ds.dropIntoEditorDecorationOptions=Vn.qx.register({description:"workbench-dnd-target",className:"dnd-target"}),Ds=function(Ct,e,s,y){var P,Q=arguments.length,pe=Q<3?e:y===null?y=Object.getOwnPropertyDescriptor(e,s):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")pe=Reflect.decorate(Ct,e,s,y);else for(var Se=Ct.length-1;Se>=0;Se--)(P=Ct[Se])&&(pe=(Q<3?P(pe):Q>3?P(e,s,pe):P(e,s))||pe);return Q>3&&pe&&Object.defineProperty(e,s,pe),pe}([Kn(3,gr.TG),Kn(4,F.$),Kn(5,rs.H),Kn(6,Us.i6),Kn(7,ft.XE),Kn(8,qo.lT),Kn(9,$.F),Kn(10,_r.c_),Kn(11,vr.p)],Ds);class Cr extends d.JT{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new f.Q5(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new f.Q5(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){let s=e?2:1;this._value!==s&&(this._value=s,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Yn extends f.Q5{constructor(e,s){super({deliveryQueue:s}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class ta extends d.JT{constructor(e,s){super(),this._editor=e,s.createKey("editorId",e.getId()),this._editorSimpleInput=En.u.editorSimpleInput.bindTo(s),this._editorFocus=En.u.focus.bindTo(s),this._textInputFocus=En.u.textInputFocus.bindTo(s),this._editorTextFocus=En.u.editorTextFocus.bindTo(s),this._editorTabMovesFocus=En.u.tabMovesFocus.bindTo(s),this._editorReadonly=En.u.readOnly.bindTo(s),this._inDiffEditor=En.u.inDiffEditor.bindTo(s),this._editorColumnSelection=En.u.columnSelection.bindTo(s),this._hasMultipleSelections=En.u.hasMultipleSelections.bindTo(s),this._hasNonEmptySelection=En.u.hasNonEmptySelection.bindTo(s),this._canUndo=En.u.canUndo.bindTo(s),this._canRedo=En.u.canRedo.bindTo(s),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(L.n.onDidChangeTabFocus(()=>this._editorTabMovesFocus.set(L.n.getTabFocusMode("editorFocus")))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let e=this._editor.getOptions();this._editorTabMovesFocus.set(L.n.getTabFocusMode("editorFocus")),this._editorReadonly.set(e.get(87)),this._inDiffEditor.set(e.get(59)),this._editorColumnSelection.set(e.get(20))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(s=>!s.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class wr extends d.JT{constructor(e,s,y){super(),this._editor=e,this._contextKeyService=s,this._languageFeaturesService=y,this._langId=En.u.languageId.bindTo(s),this._hasCompletionItemProvider=En.u.hasCompletionItemProvider.bindTo(s),this._hasCodeActionsProvider=En.u.hasCodeActionsProvider.bindTo(s),this._hasCodeLensProvider=En.u.hasCodeLensProvider.bindTo(s),this._hasDefinitionProvider=En.u.hasDefinitionProvider.bindTo(s),this._hasDeclarationProvider=En.u.hasDeclarationProvider.bindTo(s),this._hasImplementationProvider=En.u.hasImplementationProvider.bindTo(s),this._hasTypeDefinitionProvider=En.u.hasTypeDefinitionProvider.bindTo(s),this._hasHoverProvider=En.u.hasHoverProvider.bindTo(s),this._hasDocumentHighlightProvider=En.u.hasDocumentHighlightProvider.bindTo(s),this._hasDocumentSymbolProvider=En.u.hasDocumentSymbolProvider.bindTo(s),this._hasReferenceProvider=En.u.hasReferenceProvider.bindTo(s),this._hasRenameProvider=En.u.hasRenameProvider.bindTo(s),this._hasSignatureHelpProvider=En.u.hasSignatureHelpProvider.bindTo(s),this._hasInlayHintsProvider=En.u.hasInlayHintsProvider.bindTo(s),this._hasDocumentFormattingProvider=En.u.hasDocumentFormattingProvider.bindTo(s),this._hasDocumentSelectionFormattingProvider=En.u.hasDocumentSelectionFormattingProvider.bindTo(s),this._hasMultipleDocumentFormattingProvider=En.u.hasMultipleDocumentFormattingProvider.bindTo(s),this._hasMultipleDocumentSelectionFormattingProvider=En.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(s),this._isInWalkThrough=En.u.isInWalkThroughSnippet.bindTo(s);let P=()=>this._update();this._register(e.onDidChangeModel(P)),this._register(e.onDidChangeModelLanguage(P)),this._register(y.completionProvider.onDidChange(P)),this._register(y.codeActionProvider.onDidChange(P)),this._register(y.codeLensProvider.onDidChange(P)),this._register(y.definitionProvider.onDidChange(P)),this._register(y.declarationProvider.onDidChange(P)),this._register(y.implementationProvider.onDidChange(P)),this._register(y.typeDefinitionProvider.onDidChange(P)),this._register(y.hoverProvider.onDidChange(P)),this._register(y.documentHighlightProvider.onDidChange(P)),this._register(y.documentSymbolProvider.onDidChange(P)),this._register(y.referenceProvider.onDidChange(P)),this._register(y.renameProvider.onDidChange(P)),this._register(y.documentFormattingEditProvider.onDidChange(P)),this._register(y.documentRangeFormattingEditProvider.onDidChange(P)),this._register(y.signatureHelpProvider.onDidChange(P)),this._register(y.inlayHintsProvider.onDidChange(P)),P()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){let e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===o.lg.walkThroughSnippet)}):this.reset()}}class yr extends d.JT{constructor(e){super(),this._onChange=this._register(new f.Q5),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(x.go(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}class ia{get length(){return this._decorationIds.length}constructor(e,s){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(s)&&s.length>0&&this.set(s)}onDidChange(e,s,y){return this._editor.onDidChangeModelDecorations(P=>{this._isChangingDecorations||e.call(s,P)},y)}getRange(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}getRanges(){if(!this._editor.hasModel())return[];let e=this._editor.getModel(),s=[];for(let y of this._decorationIds){let P=e.getDecorationRange(y);P&&s.push(P)}return s}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(s=>{this._decorationIds=s.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}}let $s=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Ia=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function Sr(Ct){return $s+encodeURIComponent(Ct.toString())+Ia}let Ta=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Ma=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,ft.Ic)((Ct,e)=>{let s=Ct.getColor(he.lXJ);s&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Sr(s)}") repeat-x bottom left; }`);let y=Ct.getColor(he.uoC);y&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Sr(y)}") repeat-x bottom left; }`);let P=Ct.getColor(he.c63);P&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Sr(P)}") repeat-x bottom left; }`);let Q=Ct.getColor(he.Dut);Q&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${function(Se){return Ta+encodeURIComponent(Se.toString())+Ma}(Q)}") no-repeat bottom left; }`);let pe=Ct.getColor(Mt.zu);pe&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${pe.rgba.a}; }`)})},4527:(ut,Ie,t)=>{"use strict";t.d(Ie,{H:()=>r});var m=t(6248),B=t(1640),u=t(1998),I=t(4565),_=t(3983),A=t(2065),x=t(9422),v=t(7781),f=t(1106),d=t(1381),o=t(1922),h=function(i,c){return function(b,l){c(b,l,i)}};let r=class extends u.Gm{constructor(i,c,b,l,a,w,E,D,L,k,R,O,$){super(i,Object.assign(Object.assign({},l.getRawOptions()),{overflowWidgetsDomNode:l.getOverflowWidgetsDomNode()}),b,a,w,E,D,L,k,R,O,$),this._parentEditor=l,this._overwriteOptions=c,super.updateOptions(this._overwriteOptions),this._register(l.onDidChangeConfiguration(N=>this._onParentConfigurationChanged(N)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(i){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(i){m.jB(this._overwriteOptions,i,!0),super.updateOptions(this._overwriteOptions)}};r=function(i,c,b,l){var a,w=arguments.length,E=w<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,b):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(i,c,b,l);else for(var D=i.length-1;D>=0;D--)(a=i[D])&&(E=(w<3?a(E):w>3?a(c,b,E):a(c,b))||E);return w>3&&E&&Object.defineProperty(c,b,E),E}([h(4,A.TG),h(5,B.$),h(6,I.H),h(7,_.i6),h(8,v.XE),h(9,x.lT),h(10,f.F),h(11,d.c_),h(12,o.p)],r)},1329:(ut,Ie,t)=>{"use strict";t.d(Ie,{OY:()=>u,Sj:()=>I,T4:()=>B,Uo:()=>_,hP:()=>A});var m=t(3860);class B{constructor(v,f,d=!1){this._range=v,this._text=f,this.insertsAutoWhitespace=d}getEditOperations(v,f){f.addTrackedEditOperation(this._range,this._text)}computeCursorState(v,f){let d=f.getInverseEditOperations()[0].range;return m.Y.fromPositions(d.getEndPosition())}}class u{constructor(v,f){this._range=v,this._text=f}getEditOperations(v,f){f.addTrackedEditOperation(this._range,this._text)}computeCursorState(v,f){let d=f.getInverseEditOperations()[0].range;return m.Y.fromRange(d,0)}}class I{constructor(v,f,d=!1){this._range=v,this._text=f,this.insertsAutoWhitespace=d}getEditOperations(v,f){f.addTrackedEditOperation(this._range,this._text)}computeCursorState(v,f){let d=f.getInverseEditOperations()[0].range;return m.Y.fromPositions(d.getStartPosition())}}class _{constructor(v,f,d,o,h=!1){this._range=v,this._text=f,this._columnDeltaOffset=o,this._lineNumberDeltaOffset=d,this.insertsAutoWhitespace=h}getEditOperations(v,f){f.addTrackedEditOperation(this._range,this._text)}computeCursorState(v,f){let d=f.getInverseEditOperations()[0].range;return m.Y.fromPositions(d.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class A{constructor(v,f,d,o=!1){this._range=v,this._text=f,this._initialSelection=d,this._forceMoveMarkers=o,this._selectionId=null}getEditOperations(v,f){f.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=f.trackSelection(this._initialSelection)}computeCursorState(v,f){return f.getTrackedSelection(this._selectionId)}}},291:(ut,Ie,t)=>{"use strict";t.d(Ie,{U:()=>f});var m=t(7295),B=t(7988),u=t(4314),I=t(3860),_=t(1615),A=t(1381);let x=Object.create(null);function v(h,r){if(r<=0)return"";x[h]||(x[h]=["",h]);let i=x[h];for(let c=i.length;c<=r;c++)i[c]=i[c-1]+h;return i[r]}let f=class Xa{static unshiftIndent(r,i,c,b,l){let a=B.i.visibleColumnFromColumn(r,i,c);if(l){let w=v(" ",b);return v(w,B.i.prevIndentTabStop(a,b)/b)}return v("	",B.i.prevRenderTabStop(a,c)/c)}static shiftIndent(r,i,c,b,l){let a=B.i.visibleColumnFromColumn(r,i,c);if(l){let w=v(" ",b);return v(w,B.i.nextIndentTabStop(a,b)/b)}return v("	",B.i.nextRenderTabStop(a,c)/c)}constructor(r,i,c){this._languageConfigurationService=c,this._opts=i,this._selection=r,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(r,i,c){this._useLastEditRangeForCursorEndPosition?r.addTrackedEditOperation(i,c):r.addEditOperation(i,c)}getEditOperations(r,i){let c=this._selection.startLineNumber,b=this._selection.endLineNumber;this._selection.endColumn===1&&c!==b&&(b-=1);let{tabSize:l,indentSize:a,insertSpaces:w}=this._opts,E=c===b;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(r.getLineContent(c))&&(this._useLastEditRangeForCursorEndPosition=!0);let D=0,L=0;for(let k=c;k<=b;k++,D=L){L=0;let R=r.getLineContent(k),O,$=m.LC(R);if((!this._opts.isUnshift||R.length!==0&&$!==0)&&(E||this._opts.isUnshift||R.length!==0)){if($===-1&&($=R.length),k>1&&B.i.visibleColumnFromColumn(R,$+1,l)%a!=0&&r.tokenization.isCheapToTokenize(k-1)){let N=(0,_.A)(this._opts.autoIndent,r,new u.e(k-1,r.getLineMaxColumn(k-1),k-1,r.getLineMaxColumn(k-1)),this._languageConfigurationService);if(N){if(L=D,N.appendText)for(let T=0,C=N.appendText.length;T<C&&L<a&&N.appendText.charCodeAt(T)===32;T++)L++;N.removeText&&(L=Math.max(0,L-N.removeText));for(let T=0;T<L&&$!==0&&R.charCodeAt($-1)===32;T++)$--}}this._opts.isUnshift&&$===0||(O=this._opts.isUnshift?Xa.unshiftIndent(R,$+1,l,a,w):Xa.shiftIndent(R,$+1,l,a,w),this._addEditOperation(i,new u.e(k,1,k,$+1),O),k!==c||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=$+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&r.getLineLength(c)===0&&(this._useLastEditRangeForCursorEndPosition=!0);let D=w?v(" ",a):"	";for(let L=c;L<=b;L++){let k=r.getLineContent(L),R=m.LC(k);if((!this._opts.isUnshift||k.length!==0&&R!==0)&&(E||this._opts.isUnshift||k.length!==0)&&(R===-1&&(R=k.length),!this._opts.isUnshift||R!==0))if(this._opts.isUnshift){R=Math.min(R,a);for(let O=0;O<R;O++)if(k.charCodeAt(O)===9){R=O+1;break}this._addEditOperation(i,new u.e(L,1,L,R+1),"")}else this._addEditOperation(i,new u.e(L,1,L,1),D),L!==c||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=i.trackSelection(this._selection)}computeCursorState(r,i){if(this._useLastEditRangeForCursorEndPosition){let b=i.getInverseEditOperations()[0];return new I.Y(b.range.endLineNumber,b.range.endColumn,b.range.endLineNumber,b.range.endColumn)}let c=i.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let b=this._selection.startColumn;return c.startColumn<=b?c:c.getDirection()===0?new I.Y(c.startLineNumber,b,c.endLineNumber,c.endColumn):new I.Y(c.endLineNumber,c.endColumn,c.startLineNumber,b)}return c}};var d,o;f=function(h,r,i,c){var b,l=arguments.length,a=l<3?r:c===null?c=Object.getOwnPropertyDescriptor(r,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(h,r,i,c);else for(var w=h.length-1;w>=0;w--)(b=h[w])&&(a=(l<3?b(a):l>3?b(r,i,a):b(r,i))||a);return l>3&&a&&Object.defineProperty(r,i,a),a}([(d=2,o=A.c_,function(h,r){o(h,r,d)})],f)},800:(ut,Ie,t)=>{"use strict";t.d(Ie,{Pe:()=>h,ei:()=>o,wk:()=>A});var m=t(4141),B=t(2075),u=t(3580),I=t(3193),_=t(9872);let A=Object.freeze({id:"editor",order:5,type:"object",title:u.NC("editorConfigurationTitle","Editor"),scope:5}),x=Object.assign(Object.assign({},A),{properties:{"editor.tabSize":{type:"number",default:B.D.tabSize,minimum:1,markdownDescription:u.NC("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:u.NC("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:B.D.insertSpaces,markdownDescription:u.NC("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:B.D.detectIndentation,markdownDescription:u.NC("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:B.D.trimAutoWhitespace,description:u.NC("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:B.D.largeFileOptimizations,description:u.NC("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:u.NC("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[u.NC("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),u.NC("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),u.NC("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:u.NC("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[u.NC("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),u.NC("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),u.NC("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:u.NC("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:u.NC("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:u.NC("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:u.NC("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:u.NC("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:u.NC("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only.")},"editor.language.brackets":{type:["array","null"],default:null,description:u.NC("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:u.NC("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:u.NC("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:u.NC("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:u.NC("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:u.NC("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:u.NC("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:u.NC("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:u.NC("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:u.NC("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:u.NC("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:u.NC("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:u.NC("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[u.NC("wordWrap.off","Lines will never wrap."),u.NC("wordWrap.on","Lines will wrap at the viewport width."),u.NC("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:"legacy",markdownEnumDescriptions:[u.NC("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),u.NC("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]}}});for(let r of m.Bc){let i=r.schema;if(i!==void 0)if((v=i).type!==void 0||v.anyOf!==void 0)x.properties[`editor.${r.name}`]=i;else for(let c in i)Object.hasOwnProperty.call(i,c)&&(x.properties[c]=i[c])}var v;let f=null;function d(){return f===null&&(f=Object.create(null),Object.keys(x.properties).forEach(r=>{f[r]=!0})),f}function o(r){return d()[`editor.${r}`]||!1}function h(r){return d()[`diffEditor.${r}`]||!1}_.B.as(I.IP.Configuration).registerConfiguration(x)},4141:(ut,Ie,t)=>{"use strict";t.d(Ie,{$J:()=>W,Av:()=>j,BH:()=>fe,Bb:()=>v,Bc:()=>J,Bo:()=>N,LJ:()=>f,L_:()=>w,NY:()=>L,O7:()=>c,Zc:()=>l,d2:()=>O,gk:()=>C,hL:()=>z,n0:()=>$,qt:()=>F,rk:()=>o,y0:()=>x});var m=t(3580),B=t(1432),u=t(270),I=t(9488),_=t(6248),A=t(2075);let x=8;class v{constructor(p){this._values=p}hasChanged(p){return this._values[p]}}class f{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class d{constructor(p,re,ne,ie){this.id=p,this.name=re,this.defaultValue=ne,this.schema=ie}applyUpdate(p,re){return h(p,re)}compute(p,re,ne){return ne}}class o{constructor(p,re){this.newValue=p,this.didChange=re}}function h(q,p){if(typeof q!="object"||typeof p!="object"||!q||!p)return new o(p,q!==p);if(Array.isArray(q)||Array.isArray(p)){let ne=Array.isArray(q)&&Array.isArray(p)&&I.fS(q,p);return new o(p,!ne)}let re=!1;for(let ne in p)if(p.hasOwnProperty(ne)){let ie=h(q[ne],p[ne]);ie.didChange&&(q[ne]=ie.newValue,re=!0)}return new o(q,re)}class r{constructor(p){this.schema=void 0,this.id=p,this.name="_never_",this.defaultValue=void 0}applyUpdate(p,re){return h(p,re)}validate(p){return this.defaultValue}}class i{constructor(p,re,ne,ie){this.id=p,this.name=re,this.defaultValue=ne,this.schema=ie}applyUpdate(p,re){return h(p,re)}validate(p){return p===void 0?this.defaultValue:p}compute(p,re,ne){return ne}}function c(q,p){return q===void 0?p:q!=="false"&&!!q}class b extends i{constructor(p,re,ne,ie=void 0){ie!==void 0&&(ie.type="boolean",ie.default=ne),super(p,re,ne,ie)}validate(p){return c(p,this.defaultValue)}}function l(q,p,re,ne){if(q===void 0)return p;let ie=parseInt(q,10);return isNaN(ie)?p:(ie=Math.max(re,ie),ie=Math.min(ne,ie),0|ie)}class a extends i{static clampedInt(p,re,ne,ie){return l(p,re,ne,ie)}constructor(p,re,ne,ie,se,ce=void 0){ce!==void 0&&(ce.type="integer",ce.default=ne,ce.minimum=ie,ce.maximum=se),super(p,re,ne,ce),this.minimum=ie,this.maximum=se}validate(p){return a.clampedInt(p,this.defaultValue,this.minimum,this.maximum)}}function w(q,p,re,ne){if(q===void 0)return p;let ie=E.float(q,p);return E.clamp(ie,re,ne)}class E extends i{static clamp(p,re,ne){return p<re?re:p>ne?ne:p}static float(p,re){if(typeof p=="number")return p;if(p===void 0)return re;let ne=parseFloat(p);return isNaN(ne)?re:ne}constructor(p,re,ne,ie,se){se!==void 0&&(se.type="number",se.default=ne),super(p,re,ne,se),this.validationFn=ie}validate(p){return this.validationFn(E.float(p,this.defaultValue))}}class D extends i{static string(p,re){return typeof p!="string"?re:p}constructor(p,re,ne,ie=void 0){ie!==void 0&&(ie.type="string",ie.default=ne),super(p,re,ne,ie)}validate(p){return D.string(p,this.defaultValue)}}function L(q,p,re,ne){return typeof q!="string"?p:ne&&q in ne?ne[q]:re.indexOf(q)===-1?p:q}class k extends i{constructor(p,re,ne,ie,se=void 0){se!==void 0&&(se.type="string",se.enum=ie,se.default=ne),super(p,re,ne,se),this._allowedValues=ie}validate(p){return L(p,this.defaultValue,this._allowedValues)}}class R extends d{constructor(p,re,ne,ie,se,ce,be=void 0){be!==void 0&&(be.type="string",be.enum=se,be.default=ie),super(p,re,ne,be),this._allowedValues=se,this._convert=ce}validate(p){return typeof p!="string"||this._allowedValues.indexOf(p)===-1?this.defaultValue:this._convert(p)}}var O;(function(q){q[q.Line=1]="Line",q[q.Block=2]="Block",q[q.Underline=3]="Underline",q[q.LineThin=4]="LineThin",q[q.BlockOutline=5]="BlockOutline",q[q.UnderlineThin=6]="UnderlineThin"})(O||(O={}));class $ extends d{constructor(){super(49,"fontLigatures",$.OFF,{anyOf:[{type:"boolean",description:m.NC("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m.NC("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m.NC("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(p){return p===void 0?this.defaultValue:typeof p=="string"?p==="false"?$.OFF:p==="true"?$.ON:p:p?$.ON:$.OFF}}$.OFF='"liga" off, "calt" off',$.ON='"liga" on, "calt" on';class N extends d{constructor(){super(52,"fontVariations",N.OFF,{anyOf:[{type:"boolean",description:m.NC("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:m.NC("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:m.NC("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(p){return p===void 0?this.defaultValue:typeof p=="string"?p==="false"?N.OFF:p==="true"?N.TRANSLATE:p:p?N.TRANSLATE:N.OFF}compute(p,re,ne){return p.fontInfo.fontVariationSettings}}N.OFF="normal",N.TRANSLATE="translate";class T extends d{constructor(){super(51,"fontWeight",z.fontWeight,{anyOf:[{type:"number",minimum:T.MINIMUM_VALUE,maximum:T.MAXIMUM_VALUE,errorMessage:m.NC("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:T.SUGGESTION_VALUES}],default:z.fontWeight,description:m.NC("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(p){return p==="normal"||p==="bold"?p:String(a.clampedInt(p,z.fontWeight,T.MINIMUM_VALUE,T.MAXIMUM_VALUE))}}T.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],T.MINIMUM_VALUE=1,T.MAXIMUM_VALUE=1e3;class C extends r{constructor(){super(139)}compute(p,re,ne){return C.computeLayout(re,{memory:p.memory,outerWidth:p.outerWidth,outerHeight:p.outerHeight,isDominatedByLongLines:p.isDominatedByLongLines,lineHeight:p.fontInfo.lineHeight,viewLineCount:p.viewLineCount,lineNumbersDigitCount:p.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:p.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:p.fontInfo.maxDigitWidth,pixelRatio:p.pixelRatio,glyphMarginDecorationLaneCount:p.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(p){let re=p.height/p.lineHeight,ne=Math.floor(p.paddingTop/p.lineHeight),ie=Math.floor(p.paddingBottom/p.lineHeight);p.scrollBeyondLastLine&&(ie=Math.max(ie,re-1));let se=(ne+p.viewLineCount+ie)/(p.pixelRatio*p.height);return{typicalViewportLineCount:re,extraLinesBeforeFirstLine:ne,extraLinesBeyondLastLine:ie,desiredRatio:se,minimapLineCount:Math.floor(p.viewLineCount/se)}}static _computeMinimapLayout(p,re){let ne=p.outerWidth,ie=p.outerHeight,se=p.pixelRatio;if(!p.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(se*ie),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:ie};let ce=re.stableMinimapLayoutInput,be=ce&&p.outerHeight===ce.outerHeight&&p.lineHeight===ce.lineHeight&&p.typicalHalfwidthCharacterWidth===ce.typicalHalfwidthCharacterWidth&&p.pixelRatio===ce.pixelRatio&&p.scrollBeyondLastLine===ce.scrollBeyondLastLine&&p.paddingTop===ce.paddingTop&&p.paddingBottom===ce.paddingBottom&&p.minimap.enabled===ce.minimap.enabled&&p.minimap.side===ce.minimap.side&&p.minimap.size===ce.minimap.size&&p.minimap.showSlider===ce.minimap.showSlider&&p.minimap.renderCharacters===ce.minimap.renderCharacters&&p.minimap.maxColumn===ce.minimap.maxColumn&&p.minimap.scale===ce.minimap.scale&&p.verticalScrollbarWidth===ce.verticalScrollbarWidth&&p.isViewportWrapping===ce.isViewportWrapping,de=p.lineHeight,U=p.typicalHalfwidthCharacterWidth,ue=p.scrollBeyondLastLine,ve=p.minimap.renderCharacters,X=se>=2?Math.round(2*p.minimap.scale):p.minimap.scale,ye=p.minimap.maxColumn,Ce=p.minimap.size,Ee=p.minimap.side,Ae=p.verticalScrollbarWidth,Fe=p.viewLineCount,_e=p.remainingWidth,te=p.isViewportWrapping,Le=ve?2:3,ke=Math.floor(se*ie),le=ke/se,ee=!1,me=!1,xe=Le*X,We=X/se,Ve=1;if(Ce==="fill"||Ce==="fit"){let{typicalViewportLineCount:ht,extraLinesBeforeFirstLine:xt,extraLinesBeyondLastLine:Qt,desiredRatio:At,minimapLineCount:mi}=C.computeContainedMinimapLineCount({viewLineCount:Fe,scrollBeyondLastLine:ue,paddingTop:p.paddingTop,paddingBottom:p.paddingBottom,height:ie,lineHeight:de,pixelRatio:se});if(Fe/mi>1)ee=!0,me=!0,X=1,xe=1,We=X/se;else{let Lt=!1,ct=X+1;if(Ce==="fit"){let Kt=Math.ceil((xt+Fe+Qt)*xe);te&&be&&_e<=re.stableFitRemainingWidth?(Lt=!0,ct=re.stableFitMaxMinimapScale):Lt=Kt>ke}if(Ce==="fill"||Lt){ee=!0;let Kt=X;xe=Math.min(de*se,Math.max(1,Math.floor(1/At))),te&&be&&_e<=re.stableFitRemainingWidth&&(ct=re.stableFitMaxMinimapScale),X=Math.min(ct,Math.max(1,Math.floor(xe/Le))),X>Kt&&(Ve=Math.min(2,X/Kt)),We=X/se/Ve,ke=Math.ceil(Math.max(ht,xt+Fe+Qt)*xe),te?(re.stableMinimapLayoutInput=p,re.stableFitRemainingWidth=_e,re.stableFitMaxMinimapScale=X):(re.stableMinimapLayoutInput=null,re.stableFitRemainingWidth=0)}}}let Ye=Math.floor(ye*We),tt=Math.min(Ye,Math.max(0,Math.floor((_e-Ae-2)*We/(U+We)))+x),Qe=Math.floor(se*tt),bt=Qe/se;return Qe=Math.floor(Qe*Ve),{renderMinimap:ve?1:2,minimapLeft:Ee==="left"?0:ne-tt-Ae,minimapWidth:tt,minimapHeightIsEditorHeight:ee,minimapIsSampling:me,minimapScale:X,minimapLineHeight:xe,minimapCanvasInnerWidth:Qe,minimapCanvasInnerHeight:ke,minimapCanvasOuterWidth:bt,minimapCanvasOuterHeight:le}}static computeLayout(p,re){let ne=0|re.outerWidth,ie=0|re.outerHeight,se=0|re.lineHeight,ce=0|re.lineNumbersDigitCount,be=re.typicalHalfwidthCharacterWidth,de=re.maxDigitWidth,U=re.pixelRatio,ue=re.viewLineCount,ve=p.get(131),X=ve==="inherit"?p.get(130):ve,ye=X==="inherit"?p.get(126):X,Ce=p.get(129),Ee=re.isDominatedByLongLines,Ae=p.get(55),Fe=p.get(65).renderType!==0,_e=p.get(66),te=p.get(100),Le=p.get(81),ke=p.get(70),le=p.get(98),ee=le.verticalScrollbarSize,me=le.verticalHasArrows,xe=le.arrowSize,We=le.horizontalScrollbarSize,Ve=p.get(41),Ye=p.get(105)!=="never",tt=p.get(63);Ve&&Ye&&(tt+=16);let Qe=0;if(Fe){let Xi=Math.max(ce,_e);Qe=Math.round(Xi*de)}let bt=0;Ae&&(bt=se*re.glyphMarginDecorationLaneCount);let ht=0,xt=ht+bt,Qt=xt+Qe,At=Qt+tt,mi=ne-bt-Qe-tt,Lt=!1,ct=!1,Kt=-1;X==="inherit"&&Ee?(Lt=!0,ct=!0):ye==="on"||ye==="bounded"?ct=!0:ye==="wordWrapColumn"&&(Kt=Ce);let pi=C._computeMinimapLayout({outerWidth:ne,outerHeight:ie,lineHeight:se,typicalHalfwidthCharacterWidth:be,pixelRatio:U,scrollBeyondLastLine:te,paddingTop:Le.top,paddingBottom:Le.bottom,minimap:ke,verticalScrollbarWidth:ee,viewLineCount:ue,remainingWidth:mi,isViewportWrapping:ct},re.memory||new f);pi.renderMinimap!==0&&pi.minimapLeft===0&&(ht+=pi.minimapWidth,xt+=pi.minimapWidth,Qt+=pi.minimapWidth,At+=pi.minimapWidth);let li=mi-pi.minimapWidth,Wi=Math.max(1,Math.floor((li-ee-2)/be)),Vi=me?xe:0;return ct&&(Kt=Math.max(1,Wi),ye==="bounded"&&(Kt=Math.min(Kt,Ce))),{width:ne,height:ie,glyphMarginLeft:ht,glyphMarginWidth:bt,glyphMarginDecorationLaneCount:re.glyphMarginDecorationLaneCount,lineNumbersLeft:xt,lineNumbersWidth:Qe,decorationsLeft:Qt,decorationsWidth:tt,contentLeft:At,contentWidth:li,minimap:pi,viewportColumn:Wi,isWordWrapMinified:Lt,isViewportWrapping:ct,wrappingColumn:Kt,verticalScrollbarWidth:ee,horizontalScrollbarHeight:We,overviewRuler:{top:Vi,width:ee,height:ie-2*Vi,right:0}}}}function W(q){let p=q.get(93);return p==="editable"?q.get(87):p!=="on"}function K(q,p){if(typeof q!="string")return p;switch(q){case"hidden":return 2;case"visible":return 3;default:return 1}}let j="inUntrustedWorkspace",F={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};function H(q,p,re){let ne=re.indexOf(q);return ne===-1?p:re[ne]}let z={fontFamily:B.dz?"Menlo, Monaco, 'Courier New', monospace":B.IJ?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:B.dz?12:14,lineHeight:0,letterSpacing:0},J=[];function oe(q){return J[q.id]=q,q}let fe={acceptSuggestionOnCommitCharacter:oe(new b(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m.NC("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:oe(new k(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m.NC("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m.NC("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:oe(new class extends d{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m.NC("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached"),m.NC("accessibilitySupport.on","Optimize for usage with a Screen Reader"),m.NC("accessibilitySupport.off","Assume a screen reader is not attached")],default:"auto",tags:["accessibility"],description:m.NC("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(q){switch(q){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(q,p,re){return re===0?q.accessibilitySupport:re}}),accessibilityPageSize:oe(new a(3,"accessibilityPageSize",10,1,1073741824,{description:m.NC("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:oe(new D(4,"ariaLabel",m.NC("editorViewAccessibleLabel","Editor content"))),screenReaderAnnounceInlineSuggestion:oe(new b(6,"screenReaderAnnounceInlineSuggestion",!1,{description:m.NC("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader. Note that this does not work on macOS with VoiceOver."),tags:["accessibility"]})),autoClosingBrackets:oe(new k(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m.NC("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m.NC("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m.NC("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:oe(new k(7,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m.NC("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m.NC("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:oe(new k(8,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m.NC("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m.NC("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:oe(new k(9,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m.NC("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m.NC("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m.NC("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:oe(new R(10,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],function(q){switch(q){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}},{enumDescriptions:[m.NC("editor.autoIndent.none","The editor will not insert indentation automatically."),m.NC("editor.autoIndent.keep","The editor will keep the current line's indentation."),m.NC("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m.NC("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m.NC("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m.NC("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:oe(new b(11,"automaticLayout",!1)),autoSurround:oe(new k(12,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m.NC("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m.NC("editor.autoSurround.quotes","Surround with quotes but not brackets."),m.NC("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m.NC("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:oe(new class extends d{constructor(){let q={enabled:A.D.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:A.D.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(13,"bracketPairColorization",q,{"editor.bracketPairColorization.enabled":{type:"boolean",default:q.enabled,markdownDescription:m.NC("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:q.independentColorPoolPerBracketType,description:m.NC("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:c(p.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),bracketPairGuides:oe(new class extends d{constructor(){let q={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(14,"guides",q,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m.NC("editor.guides.bracketPairs.true","Enables bracket pair guides."),m.NC("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m.NC("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:q.bracketPairs,description:m.NC("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m.NC("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m.NC("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m.NC("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:q.bracketPairsHorizontal,description:m.NC("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:q.highlightActiveBracketPair,description:m.NC("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:q.indentation,description:m.NC("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[m.NC("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),m.NC("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),m.NC("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:q.highlightActiveIndentation,description:m.NC("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{bracketPairs:H(p.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:H(p.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:c(p.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:c(p.indentation,this.defaultValue.indentation),highlightActiveIndentation:H(p.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),stickyTabStops:oe(new b(111,"stickyTabStops",!1,{description:m.NC("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:oe(new b(15,"codeLens",!0,{description:m.NC("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:oe(new D(16,"codeLensFontFamily","",{description:m.NC("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:oe(new a(17,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m.NC("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:oe(new b(18,"colorDecorators",!0,{description:m.NC("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorsLimit:oe(new a(19,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:m.NC("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:oe(new b(20,"columnSelection",!1,{description:m.NC("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:oe(new class extends d{constructor(){let q={insertSpace:!0,ignoreEmptyLines:!0};super(21,"comments",q,{"editor.comments.insertSpace":{type:"boolean",default:q.insertSpace,description:m.NC("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:q.ignoreEmptyLines,description:m.NC("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{insertSpace:c(p.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:c(p.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),contextmenu:oe(new b(22,"contextmenu",!0)),copyWithSyntaxHighlighting:oe(new b(23,"copyWithSyntaxHighlighting",!0,{description:m.NC("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:oe(new R(24,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],function(q){switch(q){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}},{description:m.NC("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:oe(new k(25,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[m.NC("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),m.NC("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),m.NC("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:m.NC("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:oe(new R(26,"cursorStyle",O.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],function(q){switch(q){case"line":return O.Line;case"block":return O.Block;case"underline":return O.Underline;case"line-thin":return O.LineThin;case"block-outline":return O.BlockOutline;case"underline-thin":return O.UnderlineThin}},{description:m.NC("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:oe(new a(27,"cursorSurroundingLines",0,0,1073741824,{description:m.NC("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:oe(new k(28,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m.NC("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m.NC("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:m.NC("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:oe(new a(29,"cursorWidth",0,0,1073741824,{markdownDescription:m.NC("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:oe(new b(30,"disableLayerHinting",!1)),disableMonospaceOptimizations:oe(new b(31,"disableMonospaceOptimizations",!1)),domReadOnly:oe(new b(32,"domReadOnly",!1)),dragAndDrop:oe(new b(33,"dragAndDrop",!0,{description:m.NC("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:oe(new class extends b{constructor(){super(35,"emptySelectionClipboard",!0,{description:m.NC("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(q,p,re){return re&&q.emptySelectionClipboard}}),dropIntoEditor:oe(new class extends d{constructor(){let q={enabled:!0,showDropSelector:"afterDrop"};super(34,"dropIntoEditor",q,{"editor.dropIntoEditor.enabled":{type:"boolean",default:q.enabled,markdownDescription:m.NC("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:m.NC("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[m.NC("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),m.NC("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),showDropSelector:L(p.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),stickyScroll:oe(new class extends d{constructor(){let q={enabled:!1,maxLineCount:5,defaultModel:"outlineModel"};super(110,"stickyScroll",q,{"editor.stickyScroll.enabled":{type:"boolean",default:q.enabled,description:m.NC("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:q.maxLineCount,minimum:1,maximum:10,description:m.NC("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:q.defaultModel,description:m.NC("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),maxLineCount:a.clampedInt(p.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:L(p.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"])}}}),experimentalWhitespaceRendering:oe(new k(36,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[m.NC("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),m.NC("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),m.NC("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:m.NC("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:oe(new D(37,"extraEditorClassName","")),fastScrollSensitivity:oe(new E(38,"fastScrollSensitivity",5,q=>q<=0?5:q,{markdownDescription:m.NC("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:oe(new class extends d{constructor(){let q={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(39,"find",q,{"editor.find.cursorMoveOnType":{type:"boolean",default:q.cursorMoveOnType,description:m.NC("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:q.seedSearchStringFromSelection,enumDescriptions:[m.NC("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m.NC("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m.NC("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m.NC("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:q.autoFindInSelection,enumDescriptions:[m.NC("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m.NC("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m.NC("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m.NC("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:q.globalFindClipboard,description:m.NC("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:B.dz},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:q.addExtraSpaceOnTop,description:m.NC("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:q.loop,description:m.NC("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{cursorMoveOnType:c(p.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof q.seedSearchStringFromSelection=="boolean"?q.seedSearchStringFromSelection?"always":"never":L(p.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof q.autoFindInSelection=="boolean"?q.autoFindInSelection?"always":"never":L(p.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:c(p.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:c(p.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:c(p.loop,this.defaultValue.loop)}}}),fixedOverflowWidgets:oe(new b(40,"fixedOverflowWidgets",!1)),folding:oe(new b(41,"folding",!0,{description:m.NC("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:oe(new k(42,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m.NC("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m.NC("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m.NC("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:oe(new b(43,"foldingHighlight",!0,{description:m.NC("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:oe(new b(44,"foldingImportsByDefault",!1,{description:m.NC("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:oe(new a(45,"foldingMaximumRegions",5e3,10,65e3,{description:m.NC("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:oe(new b(46,"unfoldOnClickAfterEndOfLine",!1,{description:m.NC("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:oe(new D(47,"fontFamily",z.fontFamily,{description:m.NC("fontFamily","Controls the font family.")})),fontInfo:oe(new class extends r{constructor(){super(48)}compute(q,p,re){return q.fontInfo}}),fontLigatures2:oe(new $),fontSize:oe(new class extends i{constructor(){super(50,"fontSize",z.fontSize,{type:"number",minimum:6,maximum:100,default:z.fontSize,description:m.NC("fontSize","Controls the font size in pixels.")})}validate(q){let p=E.float(q,this.defaultValue);return p===0?z.fontSize:E.clamp(p,6,100)}compute(q,p,re){return q.fontInfo.fontSize}}),fontWeight:oe(new T),fontVariations:oe(new N),formatOnPaste:oe(new b(53,"formatOnPaste",!1,{description:m.NC("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:oe(new b(54,"formatOnType",!1,{description:m.NC("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:oe(new b(55,"glyphMargin",!0,{description:m.NC("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:oe(new class extends d{constructor(){let q={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},p={type:"string",enum:["peek","gotoAndPeek","goto"],default:q.multiple,enumDescriptions:[m.NC("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),m.NC("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),m.NC("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},re=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(56,"gotoLocation",q,{"editor.gotoLocation.multiple":{deprecationMessage:m.NC("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:m.NC("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},p),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:m.NC("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},p),"editor.gotoLocation.multipleDeclarations":Object.assign({description:m.NC("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},p),"editor.gotoLocation.multipleImplementations":Object.assign({description:m.NC("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},p),"editor.gotoLocation.multipleReferences":Object.assign({description:m.NC("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},p),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:q.alternativeDefinitionCommand,enum:re,description:m.NC("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:q.alternativeTypeDefinitionCommand,enum:re,description:m.NC("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:q.alternativeDeclarationCommand,enum:re,description:m.NC("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:q.alternativeImplementationCommand,enum:re,description:m.NC("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:q.alternativeReferenceCommand,enum:re,description:m.NC("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(q){var p,re,ne,ie,se;if(!q||typeof q!="object")return this.defaultValue;let ce=q;return{multiple:L(ce.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(p=ce.multipleDefinitions)!==null&&p!==void 0?p:L(ce.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(re=ce.multipleTypeDefinitions)!==null&&re!==void 0?re:L(ce.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(ne=ce.multipleDeclarations)!==null&&ne!==void 0?ne:L(ce.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(ie=ce.multipleImplementations)!==null&&ie!==void 0?ie:L(ce.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(se=ce.multipleReferences)!==null&&se!==void 0?se:L(ce.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:D.string(ce.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:D.string(ce.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:D.string(ce.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:D.string(ce.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:D.string(ce.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}),hideCursorInOverviewRuler:oe(new b(57,"hideCursorInOverviewRuler",!1,{description:m.NC("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:oe(new class extends d{constructor(){let q={enabled:!0,delay:300,sticky:!0,above:!0};super(58,"hover",q,{"editor.hover.enabled":{type:"boolean",default:q.enabled,description:m.NC("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:q.delay,minimum:0,maximum:1e4,description:m.NC("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:q.sticky,description:m.NC("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:q.above,description:m.NC("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),delay:a.clampedInt(p.delay,this.defaultValue.delay,0,1e4),sticky:c(p.sticky,this.defaultValue.sticky),above:c(p.above,this.defaultValue.above)}}}),inDiffEditor:oe(new b(59,"inDiffEditor",!1)),letterSpacing:oe(new E(61,"letterSpacing",z.letterSpacing,q=>E.clamp(q,-5,20),{description:m.NC("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:oe(new class extends d{constructor(){let q={enabled:!0};super(62,"lightbulb",q,{"editor.lightbulb.enabled":{type:"boolean",default:q.enabled,description:m.NC("codeActions","Enables the Code Action lightbulb in the editor.")}})}validate(q){return q&&typeof q=="object"?{enabled:c(q.enabled,this.defaultValue.enabled)}:this.defaultValue}}),lineDecorationsWidth:oe(new class extends d{constructor(){super(63,"lineDecorationsWidth",10)}validate(q){return typeof q=="string"&&/^\d+(\.\d+)?ch$/.test(q)?-parseFloat(q.substring(0,q.length-2)):a.clampedInt(q,this.defaultValue,0,1e3)}compute(q,p,re){return re<0?a.clampedInt(-re*q.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):re}}),lineHeight:oe(new class extends E{constructor(){super(64,"lineHeight",z.lineHeight,q=>E.clamp(q,0,150),{markdownDescription:m.NC("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(q,p,re){return q.fontInfo.lineHeight}}),lineNumbers:oe(new class extends d{constructor(){super(65,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m.NC("lineNumbers.off","Line numbers are not rendered."),m.NC("lineNumbers.on","Line numbers are rendered as absolute number."),m.NC("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m.NC("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m.NC("lineNumbers","Controls the display of line numbers.")})}validate(q){let p=this.defaultValue.renderType,re=this.defaultValue.renderFn;return q!==void 0&&(typeof q=="function"?(p=4,re=q):p=q==="interval"?3:q==="relative"?2:q==="on"?1:0),{renderType:p,renderFn:re}}}),lineNumbersMinChars:oe(new a(66,"lineNumbersMinChars",5,1,300)),linkedEditing:oe(new b(67,"linkedEditing",!1,{description:m.NC("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:oe(new b(68,"links",!0,{description:m.NC("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:oe(new k(69,"matchBrackets","always",["always","near","never"],{description:m.NC("matchBrackets","Highlight matching brackets.")})),minimap:oe(new class extends d{constructor(){let q={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(70,"minimap",q,{"editor.minimap.enabled":{type:"boolean",default:q.enabled,description:m.NC("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:q.autohide,description:m.NC("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m.NC("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m.NC("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m.NC("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:q.size,description:m.NC("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:q.side,description:m.NC("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:q.showSlider,description:m.NC("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:q.scale,minimum:1,maximum:3,enum:[1,2,3],description:m.NC("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:q.renderCharacters,description:m.NC("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:q.maxColumn,description:m.NC("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),autohide:c(p.autohide,this.defaultValue.autohide),size:L(p.size,this.defaultValue.size,["proportional","fill","fit"]),side:L(p.side,this.defaultValue.side,["right","left"]),showSlider:L(p.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:c(p.renderCharacters,this.defaultValue.renderCharacters),scale:a.clampedInt(p.scale,1,1,3),maxColumn:a.clampedInt(p.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}),mouseStyle:oe(new k(71,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:oe(new E(72,"mouseWheelScrollSensitivity",1,q=>q===0?1:q,{markdownDescription:m.NC("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:oe(new b(73,"mouseWheelZoom",!1,{markdownDescription:m.NC("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:oe(new b(74,"multiCursorMergeOverlapping",!0,{description:m.NC("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:oe(new R(75,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],function(q){return q==="ctrlCmd"?B.dz?"metaKey":"ctrlKey":"altKey"},{markdownEnumDescriptions:[m.NC("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m.NC("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m.NC({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:oe(new k(76,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m.NC("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m.NC("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m.NC("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:oe(new a(77,"multiCursorLimit",1e4,1,1e5,{markdownDescription:m.NC("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:oe(new b(78,"occurrencesHighlight",!0,{description:m.NC("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:oe(new b(79,"overviewRulerBorder",!0,{description:m.NC("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:oe(new a(80,"overviewRulerLanes",3,0,3)),padding:oe(new class extends d{constructor(){super(81,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m.NC("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m.NC("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{top:a.clampedInt(p.top,0,0,1e3),bottom:a.clampedInt(p.bottom,0,0,1e3)}}}),parameterHints:oe(new class extends d{constructor(){let q={enabled:!0,cycle:!0};super(82,"parameterHints",q,{"editor.parameterHints.enabled":{type:"boolean",default:q.enabled,description:m.NC("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:q.cycle,description:m.NC("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),cycle:c(p.cycle,this.defaultValue.cycle)}}}),peekWidgetDefaultFocus:oe(new k(83,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m.NC("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m.NC("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m.NC("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:oe(new b(84,"definitionLinkOpensInPeek",!1,{description:m.NC("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:oe(new class extends d{constructor(){let q={other:"on",comments:"off",strings:"off"},p=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[m.NC("on","Quick suggestions show inside the suggest widget"),m.NC("inline","Quick suggestions show as ghost text"),m.NC("off","Quick suggestions are disabled")]}];super(85,"quickSuggestions",q,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:p,default:q.strings,description:m.NC("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:p,default:q.comments,description:m.NC("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:p,default:q.other,description:m.NC("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:q,markdownDescription:m.NC("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=q}validate(q){if(typeof q=="boolean"){let de=q?"on":"off";return{comments:de,strings:de,other:de}}if(!q||typeof q!="object")return this.defaultValue;let{other:p,comments:re,strings:ne}=q,ie=["on","inline","off"],se,ce,be;return se=typeof p=="boolean"?p?"on":"off":L(p,this.defaultValue.other,ie),ce=typeof re=="boolean"?re?"on":"off":L(re,this.defaultValue.comments,ie),be=typeof ne=="boolean"?ne?"on":"off":L(ne,this.defaultValue.strings,ie),{other:se,comments:ce,strings:be}}}),quickSuggestionsDelay:oe(new a(86,"quickSuggestionsDelay",10,0,1073741824,{description:m.NC("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:oe(new b(87,"readOnly",!1)),renameOnType:oe(new b(88,"renameOnType",!1,{description:m.NC("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m.NC("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:oe(new b(89,"renderControlCharacters",!0,{description:m.NC("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:oe(new k(90,"renderFinalNewline",B.IJ?"dimmed":"on",["off","on","dimmed"],{description:m.NC("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:oe(new k(91,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m.NC("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m.NC("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:oe(new b(92,"renderLineHighlightOnlyWhenFocus",!1,{description:m.NC("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:oe(new k(93,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:oe(new k(94,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m.NC("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m.NC("renderWhitespace.selection","Render whitespace characters only on selected text."),m.NC("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m.NC("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:oe(new a(95,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:oe(new b(96,"roundedSelection",!0,{description:m.NC("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:oe(new class extends d{constructor(){let q=[],p={type:"number",description:m.NC("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(97,"rulers",q,{type:"array",items:{anyOf:[p,{type:["object"],properties:{column:p,color:{type:"string",description:m.NC("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:q,description:m.NC("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(q){if(Array.isArray(q)){let p=[];for(let re of q)if(typeof re=="number")p.push({column:a.clampedInt(re,0,0,1e4),color:null});else if(re&&typeof re=="object"){let ne=re;p.push({column:a.clampedInt(ne.column,0,0,1e4),color:ne.color})}return p.sort((re,ne)=>re.column-ne.column),p}return this.defaultValue}}),scrollbar:oe(new class extends d{constructor(){let q={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(98,"scrollbar",q,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m.NC("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m.NC("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m.NC("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m.NC("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m.NC("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m.NC("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m.NC("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m.NC("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:q.verticalScrollbarSize,description:m.NC("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:q.horizontalScrollbarSize,description:m.NC("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:q.scrollByPage,description:m.NC("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q,re=a.clampedInt(p.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),ne=a.clampedInt(p.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:a.clampedInt(p.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:K(p.vertical,this.defaultValue.vertical),horizontal:K(p.horizontal,this.defaultValue.horizontal),useShadows:c(p.useShadows,this.defaultValue.useShadows),verticalHasArrows:c(p.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:c(p.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:c(p.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:c(p.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:re,horizontalSliderSize:a.clampedInt(p.horizontalSliderSize,re,0,1e3),verticalScrollbarSize:ne,verticalSliderSize:a.clampedInt(p.verticalSliderSize,ne,0,1e3),scrollByPage:c(p.scrollByPage,this.defaultValue.scrollByPage)}}}),scrollBeyondLastColumn:oe(new a(99,"scrollBeyondLastColumn",4,0,1073741824,{description:m.NC("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:oe(new b(100,"scrollBeyondLastLine",!0,{description:m.NC("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:oe(new b(101,"scrollPredominantAxis",!0,{description:m.NC("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:oe(new b(102,"selectionClipboard",!0,{description:m.NC("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:B.IJ})),selectionHighlight:oe(new b(103,"selectionHighlight",!0,{description:m.NC("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:oe(new b(104,"selectOnLineNumbers",!0)),showFoldingControls:oe(new k(105,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[m.NC("showFoldingControls.always","Always show the folding controls."),m.NC("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),m.NC("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m.NC("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:oe(new b(106,"showUnused",!0,{description:m.NC("showUnused","Controls fading out of unused code.")})),showDeprecated:oe(new b(134,"showDeprecated",!0,{description:m.NC("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:oe(new class extends d{constructor(){let q={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(135,"inlayHints",q,{"editor.inlayHints.enabled":{type:"string",default:q.enabled,description:m.NC("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[m.NC("editor.inlayHints.on","Inlay hints are enabled"),m.NC("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",B.dz?"Ctrl+Option":"Ctrl+Alt"),m.NC("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",B.dz?"Ctrl+Option":"Ctrl+Alt"),m.NC("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:q.fontSize,markdownDescription:m.NC("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:q.fontFamily,markdownDescription:m.NC("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:q.padding,description:m.NC("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return typeof p.enabled=="boolean"&&(p.enabled=p.enabled?"on":"off"),{enabled:L(p.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:a.clampedInt(p.fontSize,this.defaultValue.fontSize,0,100),fontFamily:D.string(p.fontFamily,this.defaultValue.fontFamily),padding:c(p.padding,this.defaultValue.padding)}}}),snippetSuggestions:oe(new k(107,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m.NC("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m.NC("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m.NC("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m.NC("snippetSuggestions.none","Do not show snippet suggestions.")],description:m.NC("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:oe(new class extends d{constructor(){super(108,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m.NC("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(q){return q&&typeof q=="object"?{selectLeadingAndTrailingWhitespace:c(q.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}:this.defaultValue}}),smoothScrolling:oe(new b(109,"smoothScrolling",!1,{description:m.NC("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:oe(new a(112,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:oe(new class extends d{constructor(){let q={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(113,"suggest",q,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m.NC("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m.NC("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:q.insertMode,description:m.NC("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:q.filterGraceful,description:m.NC("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:q.localityBonus,description:m.NC("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:q.shareSuggestSelections,markdownDescription:m.NC("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[m.NC("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),m.NC("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),m.NC("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),m.NC("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:q.selectionMode,markdownDescription:m.NC("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:q.snippetsPreventQuickSuggestions,description:m.NC("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:q.showIcons,description:m.NC("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:q.showStatusBar,description:m.NC("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:q.preview,description:m.NC("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:q.showInlineDetails,description:m.NC("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m.NC("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m.NC("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m.NC("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{insertMode:L(p.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:c(p.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:c(p.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:c(p.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:c(p.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:L(p.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:c(p.showIcons,this.defaultValue.showIcons),showStatusBar:c(p.showStatusBar,this.defaultValue.showStatusBar),preview:c(p.preview,this.defaultValue.preview),previewMode:L(p.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:c(p.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:c(p.showMethods,this.defaultValue.showMethods),showFunctions:c(p.showFunctions,this.defaultValue.showFunctions),showConstructors:c(p.showConstructors,this.defaultValue.showConstructors),showDeprecated:c(p.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:c(p.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:c(p.showFields,this.defaultValue.showFields),showVariables:c(p.showVariables,this.defaultValue.showVariables),showClasses:c(p.showClasses,this.defaultValue.showClasses),showStructs:c(p.showStructs,this.defaultValue.showStructs),showInterfaces:c(p.showInterfaces,this.defaultValue.showInterfaces),showModules:c(p.showModules,this.defaultValue.showModules),showProperties:c(p.showProperties,this.defaultValue.showProperties),showEvents:c(p.showEvents,this.defaultValue.showEvents),showOperators:c(p.showOperators,this.defaultValue.showOperators),showUnits:c(p.showUnits,this.defaultValue.showUnits),showValues:c(p.showValues,this.defaultValue.showValues),showConstants:c(p.showConstants,this.defaultValue.showConstants),showEnums:c(p.showEnums,this.defaultValue.showEnums),showEnumMembers:c(p.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:c(p.showKeywords,this.defaultValue.showKeywords),showWords:c(p.showWords,this.defaultValue.showWords),showColors:c(p.showColors,this.defaultValue.showColors),showFiles:c(p.showFiles,this.defaultValue.showFiles),showReferences:c(p.showReferences,this.defaultValue.showReferences),showFolders:c(p.showFolders,this.defaultValue.showFolders),showTypeParameters:c(p.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:c(p.showSnippets,this.defaultValue.showSnippets),showUsers:c(p.showUsers,this.defaultValue.showUsers),showIssues:c(p.showIssues,this.defaultValue.showIssues)}}}),inlineSuggest:oe(new class extends d{constructor(){let q={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1};super(60,"inlineSuggest",q,{"editor.inlineSuggest.enabled":{type:"boolean",default:q.enabled,description:m.NC("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:q.showToolbar,enum:["always","onHover"],enumDescriptions:[m.NC("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),m.NC("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion.")],description:m.NC("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:q.suppressSuggestions,description:m.NC("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")}})}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{enabled:c(p.enabled,this.defaultValue.enabled),mode:L(p.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:L(p.showToolbar,this.defaultValue.showToolbar,["always","onHover"]),suppressSuggestions:c(p.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:c(p.keepOnBlur,this.defaultValue.keepOnBlur)}}}),suggestFontSize:oe(new a(114,"suggestFontSize",0,0,1e3,{markdownDescription:m.NC("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:oe(new a(115,"suggestLineHeight",0,0,1e3,{markdownDescription:m.NC("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:oe(new b(116,"suggestOnTriggerCharacters",!0,{description:m.NC("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:oe(new k(117,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m.NC("suggestSelection.first","Always select the first suggestion."),m.NC("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m.NC("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m.NC("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:oe(new k(118,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m.NC("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m.NC("tabCompletion.off","Disable tab completions."),m.NC("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m.NC("tabCompletion","Enables tab completions.")})),tabIndex:oe(new a(119,"tabIndex",0,-1,1073741824)),unicodeHighlight:oe(new class extends d{constructor(){let q={nonBasicASCII:j,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:j,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(120,"unicodeHighlight",q,{[F.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,j],default:q.nonBasicASCII,description:m.NC("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[F.invisibleCharacters]:{restricted:!0,type:"boolean",default:q.invisibleCharacters,description:m.NC("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[F.ambiguousCharacters]:{restricted:!0,type:"boolean",default:q.ambiguousCharacters,description:m.NC("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[F.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,j],default:q.includeComments,description:m.NC("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[F.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,j],default:q.includeStrings,description:m.NC("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[F.allowedCharacters]:{restricted:!0,type:"object",default:q.allowedCharacters,description:m.NC("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[F.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:q.allowedLocales,description:m.NC("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(q,p){let re=!1;p.allowedCharacters&&q&&(_.fS(q.allowedCharacters,p.allowedCharacters)||(q=Object.assign(Object.assign({},q),{allowedCharacters:p.allowedCharacters}),re=!0)),p.allowedLocales&&q&&(_.fS(q.allowedLocales,p.allowedLocales)||(q=Object.assign(Object.assign({},q),{allowedLocales:p.allowedLocales}),re=!0));let ne=super.applyUpdate(q,p);return re?new o(ne.newValue,!0):ne}validate(q){if(!q||typeof q!="object")return this.defaultValue;let p=q;return{nonBasicASCII:H(p.nonBasicASCII,j,[!0,!1,j]),invisibleCharacters:c(p.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:c(p.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:H(p.includeComments,j,[!0,!1,j]),includeStrings:H(p.includeStrings,j,[!0,!1,j]),allowedCharacters:this.validateBooleanMap(q.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(q.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(q,p){if(typeof q!="object"||!q)return p;let re={};for(let[ne,ie]of Object.entries(q))ie===!0&&(re[ne]=!0);return re}}),unusualLineTerminators:oe(new k(121,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m.NC("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m.NC("unusualLineTerminators.off","Unusual line terminators are ignored."),m.NC("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m.NC("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:oe(new b(122,"useShadowDOM",!0)),useTabStops:oe(new b(123,"useTabStops",!0,{description:m.NC("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:oe(new k(124,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[m.NC("wordBreak.normal","Use the default line break rule."),m.NC("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:m.NC("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:oe(new D(125,"wordSeparators",u.vu,{description:m.NC("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:oe(new k(126,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m.NC("wordWrap.off","Lines will never wrap."),m.NC("wordWrap.on","Lines will wrap at the viewport width."),m.NC({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m.NC({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m.NC({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:oe(new D(127,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:oe(new D(128,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:oe(new a(129,"wordWrapColumn",80,1,1073741824,{markdownDescription:m.NC({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:oe(new k(130,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:oe(new k(131,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:oe(new class extends r{constructor(){super(136)}compute(q,p,re){let ne=["monaco-editor"];return p.get(37)&&ne.push(p.get(37)),q.extraEditorClassName&&ne.push(q.extraEditorClassName),p.get(71)==="default"?ne.push("mouse-default"):p.get(71)==="copy"&&ne.push("mouse-copy"),p.get(106)&&ne.push("showUnused"),p.get(134)&&ne.push("showDeprecated"),ne.join(" ")}}),defaultColorDecorators:oe(new b(141,"defaultColorDecorators",!1,{markdownDescription:m.NC("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:oe(new class extends r{constructor(){super(137)}compute(q,p,re){return q.pixelRatio}}),tabFocusMode:oe(new b(138,"tabFocusMode",!1,{markdownDescription:m.NC("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:oe(new C),wrappingInfo:oe(new class extends r{constructor(){super(140)}compute(q,p,re){let ne=p.get(139);return{isDominatedByLongLines:q.isDominatedByLongLines,isWordWrapMinified:ne.isWordWrapMinified,isViewportWrapping:ne.isViewportWrapping,wrappingColumn:ne.wrappingColumn}}}),wrappingIndent:oe(new class extends d{constructor(){super(132,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[m.NC("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m.NC("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m.NC("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m.NC("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m.NC("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(q){switch(q){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(q,p,re){return p.get(2)===2?0:re}}),wrappingStrategy:oe(new class extends d{constructor(){super(133,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[m.NC("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m.NC("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:m.NC("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(q){return L(q,"simple",["simple","advanced"])}compute(q,p,re){return p.get(2)===2?"advanced":re}})}},2334:(ut,Ie,t)=>{"use strict";t.d(Ie,{C:()=>B});var m=t(4669);let B=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new m.Q5,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(u){u=Math.min(Math.max(-5,u),20),this._zoomLevel!==u&&(this._zoomLevel=u,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}},7374:(ut,Ie,t)=>{"use strict";t.d(Ie,{E4:()=>_,pR:()=>A});var m=t(1432),B=t(4141),u=t(2334);let I=m.dz?1.5:1.35;class _{static createFromValidatedSettings(v,f,d){let o=v.get(47),h=v.get(51),r=v.get(50),i=v.get(49),c=v.get(52),b=v.get(64),l=v.get(61);return _._create(o,h,r,i,c,b,l,f,d)}static _create(v,f,d,o,h,r,i,c,b){r===0?r=I*d:r<8&&(r*=d),(r=Math.round(r))<8&&(r=8);let l=1+(b?0:.1*u.C.getZoomLevel());return d*=l,r*=l,h===B.Bo.TRANSLATE&&(f==="normal"||f==="bold"?h=B.Bo.OFF:(h=`'wght' ${parseInt(f,10)}`,f="normal")),new _({pixelRatio:c,fontFamily:v,fontWeight:f,fontSize:d,fontFeatureSettings:o,fontVariationSettings:h,lineHeight:r,letterSpacing:i})}constructor(v){this._bareFontInfoBrand=void 0,this.pixelRatio=v.pixelRatio,this.fontFamily=String(v.fontFamily),this.fontWeight=String(v.fontWeight),this.fontSize=v.fontSize,this.fontFeatureSettings=v.fontFeatureSettings,this.fontVariationSettings=v.fontVariationSettings,this.lineHeight=0|v.lineHeight,this.letterSpacing=v.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let v=B.hL.fontFamily,f=_._wrapInQuotes(this.fontFamily);return v&&this.fontFamily!==v?`${f}, ${v}`:f}static _wrapInQuotes(v){return/[,"']/.test(v)?v:/[+ ]/.test(v)?`"${v}"`:v}}class A extends _{constructor(v,f){super(v),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=f,this.isMonospace=v.isMonospace,this.typicalHalfwidthCharacterWidth=v.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=v.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=v.canUseHalfwidthRightwardsArrow,this.spaceWidth=v.spaceWidth,this.middotWidth=v.middotWidth,this.wsmiddotWidth=v.wsmiddotWidth,this.maxDigitWidth=v.maxDigitWidth}equals(v){return this.fontFamily===v.fontFamily&&this.fontWeight===v.fontWeight&&this.fontSize===v.fontSize&&this.fontFeatureSettings===v.fontFeatureSettings&&this.fontVariationSettings===v.fontVariationSettings&&this.lineHeight===v.lineHeight&&this.letterSpacing===v.letterSpacing&&this.typicalHalfwidthCharacterWidth===v.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===v.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===v.canUseHalfwidthRightwardsArrow&&this.spaceWidth===v.spaceWidth&&this.middotWidth===v.middotWidth&&this.wsmiddotWidth===v.wsmiddotWidth&&this.maxDigitWidth===v.maxDigitWidth}}},4906:(ut,Ie,t)=>{"use strict";t.d(Ie,{N:()=>B,q:()=>u});var m=t(5427);class B{constructor(_){let A=(0,m.K)(_);this._defaultValue=A,this._asciiMap=B._createAsciiMap(A),this._map=new Map}static _createAsciiMap(_){let A=new Uint8Array(256);return A.fill(_),A}set(_,A){let x=(0,m.K)(A);_>=0&&_<256?this._asciiMap[_]=x:this._map.set(_,x)}get(_){return _>=0&&_<256?this._asciiMap[_]:this._map.get(_)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class u{constructor(){this._actual=new B(0)}add(_){this._actual.set(_,1)}has(_){return this._actual.get(_)===1}clear(){return this._actual.clear()}}},7988:(ut,Ie,t)=>{"use strict";t.d(Ie,{i:()=>B});var m=t(7295);class B{static _nextVisibleColumn(I,_,A){return I===9?B.nextRenderTabStop(_,A):m.K7(I)||m.C8(I)?_+2:_+1}static visibleColumnFromColumn(I,_,A){let x=Math.min(_-1,I.length),v=I.substring(0,x),f=new m.W1(v),d=0;for(;!f.eol();){let o=m.ZH(v,x,f.offset);f.nextGraphemeLength(),d=this._nextVisibleColumn(o,d,A)}return d}static columnFromVisibleColumn(I,_,A){if(_<=0)return 1;let x=I.length,v=new m.W1(I),f=0,d=1;for(;!v.eol();){let o=m.ZH(I,x,v.offset);v.nextGraphemeLength();let h=this._nextVisibleColumn(o,f,A),r=v.offset+1;if(h>=_)return h-_<_-f?r:d;f=h,d=r}return x+1}static nextRenderTabStop(I,_){return I+_-I%_}static nextIndentTabStop(I,_){return I+_-I%_}static prevRenderTabStop(I,_){return Math.max(0,I-1-(I-1)%_)}static prevIndentTabStop(I,_){return Math.max(0,I-1-(I-1)%_)}}},9386:(ut,Ie,t)=>{"use strict";t.d(Ie,{h:()=>B});var m=t(4314);class B{static insert(I,_){return{range:new m.e(I.lineNumber,I.column,I.lineNumber,I.column),text:_,forceMoveMarkers:!0}}static delete(I){return{range:I,text:null}}static replace(I,_){return{range:I,text:_}}static replaceMove(I,_){return{range:I,text:_,forceMoveMarkers:!0}}}},8625:(ut,Ie,t)=>{"use strict";t.d(Ie,{Bj:()=>i,CE:()=>O,DS:()=>j,HV:()=>p,Jn:()=>H,Kh:()=>_,L7:()=>q,Mm:()=>A,Qb:()=>J,Re:()=>D,To:()=>fe,UP:()=>$,Vs:()=>R,YF:()=>z,Ym:()=>o,dI:()=>f,eS:()=>L,e_:()=>b,f9:()=>re,fY:()=>v,hw:()=>h,lK:()=>E,lS:()=>F,m$:()=>K,m1:()=>T,m3:()=>oe,m9:()=>w,n0:()=>x,oV:()=>W,r0:()=>N,tR:()=>d,ts:()=>C,zJ:()=>k,zu:()=>l,zw:()=>c});var m=t(3580),B=t(1264),u=t(3910),I=t(7781);let _=(0,u.P6G)("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m.NC("lineHighlight","Background color for the highlight of line at the cursor position.")),A=(0,u.P6G)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:u.lRK},m.NC("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),x=((0,u.P6G)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},m.NC("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),(0,u.P6G)("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:u.xL1,hcLight:u.xL1},m.NC("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),(0,u.P6G)("editor.symbolHighlightBackground",{dark:u.MUv,light:u.MUv,hcDark:null,hcLight:null},m.NC("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),(0,u.P6G)("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:u.xL1,hcLight:u.xL1},m.NC("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),(0,u.P6G)("editorCursor.foreground",{dark:"#AEAFAD",light:B.Il.black,hcDark:B.Il.white,hcLight:"#0F4A85"},m.NC("caret","Color of the editor cursor."))),v=(0,u.P6G)("editorCursor.background",null,m.NC("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),f=(0,u.P6G)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},m.NC("editorWhitespaces","Color of whitespace characters in the editor.")),d=(0,u.P6G)("editorIndentGuide.background",{dark:f,light:f,hcDark:f,hcLight:f},m.NC("editorIndentGuides","Color of the editor indentation guides.")),o=(0,u.P6G)("editorIndentGuide.activeBackground",{dark:f,light:f,hcDark:f,hcLight:f},m.NC("editorActiveIndentGuide","Color of the active editor indentation guides.")),h=(0,u.P6G)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:B.Il.white,hcLight:"#292929"},m.NC("editorLineNumbers","Color of editor line numbers.")),r=(0,u.P6G)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:u.xL1,hcLight:u.xL1},m.NC("editorActiveLineNumber","Color of editor active line number"),!1,m.NC("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),i=((0,u.P6G)("editorLineNumber.activeForeground",{dark:r,light:r,hcDark:r,hcLight:r},m.NC("editorActiveLineNumber","Color of editor active line number")),(0,u.P6G)("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m.NC("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."))),c=((0,u.P6G)("editorRuler.foreground",{dark:"#5A5A5A",light:B.Il.lightgrey,hcDark:B.Il.white,hcLight:"#292929"},m.NC("editorRuler","Color of the editor rulers.")),(0,u.P6G)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},m.NC("editorCodeLensForeground","Foreground color of editor CodeLens")),(0,u.P6G)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},m.NC("editorBracketMatchBackground","Background color behind matching brackets")),(0,u.P6G)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:u.lRK,hcLight:u.lRK},m.NC("editorBracketMatchBorder","Color for matching brackets boxes")),(0,u.P6G)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},m.NC("editorOverviewRulerBorder","Color of the overview ruler border."))),b=(0,u.P6G)("editorOverviewRuler.background",null,m.NC("editorOverviewRulerBackground","Background color of the editor overview ruler.")),l=((0,u.P6G)("editorGutter.background",{dark:u.cvW,light:u.cvW,hcDark:u.cvW,hcLight:u.cvW},m.NC("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),(0,u.P6G)("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:B.Il.fromHex("#fff").transparent(.8),hcLight:u.lRK},m.NC("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),(0,u.P6G)("editorUnnecessaryCode.opacity",{dark:B.Il.fromHex("#000a"),light:B.Il.fromHex("#0007"),hcDark:null,hcLight:null},m.NC("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`))),a=((0,u.P6G)("editorGhostText.border",{dark:null,light:null,hcDark:B.Il.fromHex("#fff").transparent(.8),hcLight:B.Il.fromHex("#292929").transparent(.8)},m.NC("editorGhostTextBorder","Border color of ghost text in the editor.")),(0,u.P6G)("editorGhostText.foreground",{dark:B.Il.fromHex("#ffffff56"),light:B.Il.fromHex("#0007"),hcDark:null,hcLight:null},m.NC("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),(0,u.P6G)("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},m.NC("editorGhostTextBackground","Background color of the ghost text in the editor.")),new B.Il(new B.VS(0,122,204,.6))),w=(0,u.P6G)("editorOverviewRuler.rangeHighlightForeground",{dark:a,light:a,hcDark:a,hcLight:a},m.NC("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),E=(0,u.P6G)("editorOverviewRuler.errorForeground",{dark:new B.Il(new B.VS(255,18,18,.7)),light:new B.Il(new B.VS(255,18,18,.7)),hcDark:new B.Il(new B.VS(255,50,50,1)),hcLight:"#B5200D"},m.NC("overviewRuleError","Overview ruler marker color for errors.")),D=(0,u.P6G)("editorOverviewRuler.warningForeground",{dark:u.uoC,light:u.uoC,hcDark:u.pW3,hcLight:u.pW3},m.NC("overviewRuleWarning","Overview ruler marker color for warnings.")),L=(0,u.P6G)("editorOverviewRuler.infoForeground",{dark:u.c63,light:u.c63,hcDark:u.T83,hcLight:u.T83},m.NC("overviewRuleInfo","Overview ruler marker color for infos.")),k=(0,u.P6G)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},m.NC("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),R=(0,u.P6G)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},m.NC("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),O=(0,u.P6G)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},m.NC("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),$=(0,u.P6G)("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),N=(0,u.P6G)("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),T=(0,u.P6G)("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),C=(0,u.P6G)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new B.Il(new B.VS(255,18,18,.8)),light:new B.Il(new B.VS(255,18,18,.8)),hcDark:new B.Il(new B.VS(255,50,50,1)),hcLight:""},m.NC("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),W=(0,u.P6G)("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),K=(0,u.P6G)("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),j=(0,u.P6G)("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),F=(0,u.P6G)("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),H=(0,u.P6G)("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),z=(0,u.P6G)("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),J=(0,u.P6G)("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),oe=(0,u.P6G)("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),fe=(0,u.P6G)("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),q=(0,u.P6G)("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),p=(0,u.P6G)("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),re=(0,u.P6G)("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m.NC("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));(0,u.P6G)("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:"#CEA33D"},m.NC("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),(0,u.P6G)("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:"#cea33d14"},m.NC("editorUnicodeHighlight.background","Background color used to highlight unicode characters.")),(0,I.Ic)((ne,ie)=>{let se=ne.getColor(u.cvW),ce=ne.getColor(_),be=ce&&!ce.isTransparent()?ce:se;be&&ie.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${be}; }`)})},3795:(ut,Ie,t)=>{"use strict";function m(B){let u=0,I=0,_=0,A=0;for(let x=0,v=B.length;x<v;x++){let f=B.charCodeAt(x);f===13?(u===0&&(I=x),u++,x+1<v&&B.charCodeAt(x+1)===10?(A|=2,x++):A|=3,_=x+1):f===10&&(A|=1,u===0&&(I=x),u++,_=x+1)}return u===0&&(I=B.length),[u,I,B.length-_,A]}t.d(Ie,{Q:()=>m})},3158:(ut,Ie,t)=>{"use strict";t.d(Ie,{x:()=>u});var m=t(7295),B=t(7988);function u(I,_,A){let x=m.LC(I);return x===-1&&(x=I.length),function(v,f,d){let o=0;for(let r=0;r<v.length;r++)v.charAt(r)==="	"?o=B.i.nextIndentTabStop(o,f):o++;let h="";if(!d){let r=Math.floor(o/f);o%=f;for(let i=0;i<r;i++)h+="	"}for(let r=0;r<o;r++)h+=" ";return h}(I.substring(0,x),_,A)+I.substring(x)}},5463:(ut,Ie,t)=>{"use strict";t.d(Ie,{z:()=>B});var m=t(7301);class B{static joinMany(I){if(I.length===0)return[];let _=I[0];for(let A=1;A<I.length;A++)_=this.join(_,I[A]);return _}static join(I,_){if(I.length===0)return _;if(_.length===0)return I;let A=[],x=0,v=0,f=null;for(;x<I.length||v<_.length;){let d=null;if(x<I.length&&v<_.length){let o=I[x],h=_[v];o.startLineNumber<h.startLineNumber?(d=o,x++):(d=h,v++)}else x<I.length?(d=I[x],x++):(d=_[v],v++);f===null?f=d:f.endLineNumberExclusive>=d.startLineNumber?f=new B(f.startLineNumber,Math.max(f.endLineNumberExclusive,d.endLineNumberExclusive)):(A.push(f),f=d)}return f!==null&&A.push(f),A}constructor(I,_){if(I>_)throw new m.he(`startLineNumber ${I} cannot be after endLineNumberExclusive ${_}`);this.startLineNumber=I,this.endLineNumberExclusive=_}contains(I){return this.startLineNumber<=I&&I<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(I){return new B(this.startLineNumber+I,this.endLineNumberExclusive+I)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(I){return new B(Math.min(this.startLineNumber,I.startLineNumber),Math.max(this.endLineNumberExclusive,I.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(I){let _=Math.max(this.startLineNumber,I.startLineNumber),A=Math.min(this.endLineNumberExclusive,I.endLineNumberExclusive);if(_<=A)return new B(_,A)}overlapOrTouch(I){return this.startLineNumber<=I.endLineNumberExclusive&&I.startLineNumber<=this.endLineNumberExclusive}equals(I){return this.startLineNumber===I.startLineNumber&&this.endLineNumberExclusive===I.endLineNumberExclusive}}},9247:(ut,Ie,t)=>{"use strict";t.d(Ie,{q:()=>B});var m=t(7301);class B{static addRange(I,_){let A=0;for(;A<_.length&&_[A].endExclusive<I.start;)A++;let x=A;for(;x<_.length&&_[x].start<=I.endExclusive;)x++;if(A===x)_.splice(A,0,I);else{let v=Math.min(I.start,_[A].start),f=Math.max(I.endExclusive,_[x-1].endExclusive);_.splice(A,x-A,new B(v,f))}}static tryCreate(I,_){if(!(I>_))return new B(I,_)}constructor(I,_){if(this.start=I,this.endExclusive=_,I>_)throw new m.he(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(I){return new B(this.start+I,this.endExclusive+I)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(I){return this.start===I.start&&this.endExclusive===I.endExclusive}containsRange(I){return this.start<=I.start&&I.endExclusive<=this.endExclusive}join(I){return new B(Math.min(this.start,I.start),Math.max(this.endExclusive,I.endExclusive))}intersect(I){let _=Math.max(this.start,I.start),A=Math.min(this.endExclusive,I.endExclusive);if(_<=A)return new B(_,A)}}},187:(ut,Ie,t)=>{"use strict";t.d(Ie,{L:()=>m});class m{constructor(u,I){this.lineNumber=u,this.column=I}with(u=this.lineNumber,I=this.column){return u===this.lineNumber&&I===this.column?this:new m(u,I)}delta(u=0,I=0){return this.with(this.lineNumber+u,this.column+I)}equals(u){return m.equals(this,u)}static equals(u,I){return!u&&!I||!!u&&!!I&&u.lineNumber===I.lineNumber&&u.column===I.column}isBefore(u){return m.isBefore(this,u)}static isBefore(u,I){return u.lineNumber<I.lineNumber||!(I.lineNumber<u.lineNumber)&&u.column<I.column}isBeforeOrEqual(u){return m.isBeforeOrEqual(this,u)}static isBeforeOrEqual(u,I){return u.lineNumber<I.lineNumber||!(I.lineNumber<u.lineNumber)&&u.column<=I.column}static compare(u,I){let _=0|u.lineNumber,A=0|I.lineNumber;return _===A?(0|u.column)-(0|I.column):_-A}clone(){return new m(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(u){return new m(u.lineNumber,u.column)}static isIPosition(u){return u&&typeof u.lineNumber=="number"&&typeof u.column=="number"}}},4314:(ut,Ie,t)=>{"use strict";t.d(Ie,{e:()=>B});var m=t(187);class B{constructor(I,_,A,x){I>A||I===A&&_>x?(this.startLineNumber=A,this.startColumn=x,this.endLineNumber=I,this.endColumn=_):(this.startLineNumber=I,this.startColumn=_,this.endLineNumber=A,this.endColumn=x)}isEmpty(){return B.isEmpty(this)}static isEmpty(I){return I.startLineNumber===I.endLineNumber&&I.startColumn===I.endColumn}containsPosition(I){return B.containsPosition(this,I)}static containsPosition(I,_){return!(_.lineNumber<I.startLineNumber||_.lineNumber>I.endLineNumber||_.lineNumber===I.startLineNumber&&_.column<I.startColumn||_.lineNumber===I.endLineNumber&&_.column>I.endColumn)}static strictContainsPosition(I,_){return!(_.lineNumber<I.startLineNumber||_.lineNumber>I.endLineNumber||_.lineNumber===I.startLineNumber&&_.column<=I.startColumn||_.lineNumber===I.endLineNumber&&_.column>=I.endColumn)}containsRange(I){return B.containsRange(this,I)}static containsRange(I,_){return!(_.startLineNumber<I.startLineNumber||_.endLineNumber<I.startLineNumber||_.startLineNumber>I.endLineNumber||_.endLineNumber>I.endLineNumber||_.startLineNumber===I.startLineNumber&&_.startColumn<I.startColumn||_.endLineNumber===I.endLineNumber&&_.endColumn>I.endColumn)}strictContainsRange(I){return B.strictContainsRange(this,I)}static strictContainsRange(I,_){return!(_.startLineNumber<I.startLineNumber||_.endLineNumber<I.startLineNumber||_.startLineNumber>I.endLineNumber||_.endLineNumber>I.endLineNumber||_.startLineNumber===I.startLineNumber&&_.startColumn<=I.startColumn||_.endLineNumber===I.endLineNumber&&_.endColumn>=I.endColumn)}plusRange(I){return B.plusRange(this,I)}static plusRange(I,_){let A,x,v,f;return _.startLineNumber<I.startLineNumber?(A=_.startLineNumber,x=_.startColumn):_.startLineNumber===I.startLineNumber?(A=_.startLineNumber,x=Math.min(_.startColumn,I.startColumn)):(A=I.startLineNumber,x=I.startColumn),_.endLineNumber>I.endLineNumber?(v=_.endLineNumber,f=_.endColumn):_.endLineNumber===I.endLineNumber?(v=_.endLineNumber,f=Math.max(_.endColumn,I.endColumn)):(v=I.endLineNumber,f=I.endColumn),new B(A,x,v,f)}intersectRanges(I){return B.intersectRanges(this,I)}static intersectRanges(I,_){let A=I.startLineNumber,x=I.startColumn,v=I.endLineNumber,f=I.endColumn,d=_.startLineNumber,o=_.startColumn,h=_.endLineNumber,r=_.endColumn;return A<d?(A=d,x=o):A===d&&(x=Math.max(x,o)),v>h?(v=h,f=r):v===h&&(f=Math.min(f,r)),A>v||A===v&&x>f?null:new B(A,x,v,f)}equalsRange(I){return B.equalsRange(this,I)}static equalsRange(I,_){return!I&&!_||!!I&&!!_&&I.startLineNumber===_.startLineNumber&&I.startColumn===_.startColumn&&I.endLineNumber===_.endLineNumber&&I.endColumn===_.endColumn}getEndPosition(){return B.getEndPosition(this)}static getEndPosition(I){return new m.L(I.endLineNumber,I.endColumn)}getStartPosition(){return B.getStartPosition(this)}static getStartPosition(I){return new m.L(I.startLineNumber,I.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(I,_){return new B(this.startLineNumber,this.startColumn,I,_)}setStartPosition(I,_){return new B(I,_,this.endLineNumber,this.endColumn)}collapseToStart(){return B.collapseToStart(this)}static collapseToStart(I){return new B(I.startLineNumber,I.startColumn,I.startLineNumber,I.startColumn)}collapseToEnd(){return B.collapseToEnd(this)}static collapseToEnd(I){return new B(I.endLineNumber,I.endColumn,I.endLineNumber,I.endColumn)}delta(I){return new B(this.startLineNumber+I,this.startColumn,this.endLineNumber+I,this.endColumn)}static fromPositions(I,_=I){return new B(I.lineNumber,I.column,_.lineNumber,_.column)}static lift(I){return I?new B(I.startLineNumber,I.startColumn,I.endLineNumber,I.endColumn):null}static isIRange(I){return I&&typeof I.startLineNumber=="number"&&typeof I.startColumn=="number"&&typeof I.endLineNumber=="number"&&typeof I.endColumn=="number"}static areIntersectingOrTouching(I,_){return!(I.endLineNumber<_.startLineNumber||I.endLineNumber===_.startLineNumber&&I.endColumn<_.startColumn||_.endLineNumber<I.startLineNumber||_.endLineNumber===I.startLineNumber&&_.endColumn<I.startColumn)}static areIntersecting(I,_){return!(I.endLineNumber<_.startLineNumber||I.endLineNumber===_.startLineNumber&&I.endColumn<=_.startColumn||_.endLineNumber<I.startLineNumber||_.endLineNumber===I.startLineNumber&&_.endColumn<=I.startColumn)}static compareRangesUsingStarts(I,_){if(I&&_){let A=0|I.startLineNumber,x=0|_.startLineNumber;if(A===x){let v=0|I.startColumn,f=0|_.startColumn;if(v===f){let d=0|I.endLineNumber,o=0|_.endLineNumber;return d===o?(0|I.endColumn)-(0|_.endColumn):d-o}return v-f}return A-x}return(I?1:0)-(_?1:0)}static compareRangesUsingEnds(I,_){return I.endLineNumber===_.endLineNumber?I.endColumn===_.endColumn?I.startLineNumber===_.startLineNumber?I.startColumn-_.startColumn:I.startLineNumber-_.startLineNumber:I.endColumn-_.endColumn:I.endLineNumber-_.endLineNumber}static spansMultipleLines(I){return I.endLineNumber>I.startLineNumber}toJSON(){return this}}},3860:(ut,Ie,t)=>{"use strict";t.d(Ie,{Y:()=>u});var m=t(187),B=t(4314);class u extends B.e{constructor(_,A,x,v){super(_,A,x,v),this.selectionStartLineNumber=_,this.selectionStartColumn=A,this.positionLineNumber=x,this.positionColumn=v}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(_){return u.selectionsEqual(this,_)}static selectionsEqual(_,A){return _.selectionStartLineNumber===A.selectionStartLineNumber&&_.selectionStartColumn===A.selectionStartColumn&&_.positionLineNumber===A.positionLineNumber&&_.positionColumn===A.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(_,A){return this.getDirection()===0?new u(this.startLineNumber,this.startColumn,_,A):new u(_,A,this.startLineNumber,this.startColumn)}getPosition(){return new m.L(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new m.L(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(_,A){return this.getDirection()===0?new u(_,A,this.endLineNumber,this.endColumn):new u(this.endLineNumber,this.endColumn,_,A)}static fromPositions(_,A=_){return new u(_.lineNumber,_.column,A.lineNumber,A.column)}static fromRange(_,A){return A===0?new u(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new u(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}static liftSelection(_){return new u(_.selectionStartLineNumber,_.selectionStartColumn,_.positionLineNumber,_.positionColumn)}static selectionsArrEqual(_,A){if(_&&!A||!_&&A)return!1;if(!_&&!A)return!0;if(_.length!==A.length)return!1;for(let x=0,v=_.length;x<v;x++)if(!this.selectionsEqual(_[x],A[x]))return!1;return!0}static isISelection(_){return _&&typeof _.selectionStartLineNumber=="number"&&typeof _.selectionStartColumn=="number"&&typeof _.positionLineNumber=="number"&&typeof _.positionColumn=="number"}static createWithDirection(_,A,x,v,f){return f===0?new u(_,A,x,v):new u(x,v,_,A)}}},72:(ut,Ie,t)=>{"use strict";t.d(Ie,{HT:()=>d,kH:()=>f,oe:()=>v});var m=t(7295),B=t(1432),u=t(3060);let I,_,A;function x(){return I||(I=new TextDecoder("UTF-16LE")),I}function v(){return A||(A=B.r()?x():(_||(_=new TextDecoder("UTF-16BE")),_)),A}function f(o,h,r){let i=new Uint16Array(o.buffer,h,r);return r>0&&(i[0]===65279||i[0]===65534)?function(c,b,l){let a=[],w=0;for(let E=0;E<l;E++){let D=u.mP(c,b);b+=2,a[w++]=String.fromCharCode(D)}return a.join("")}(o,h,r):x().decode(i)}class d{constructor(h){this._capacity=0|h,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";let h=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return v().decode(h)}_flushBuffer(){let h=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[h]:this._completedStrings[this._completedStrings.length]=h}appendCharCode(h){let r=this._capacity-this._bufferLength;r<=1&&(r===0||m.ZG(h))&&this._flushBuffer(),this._buffer[this._bufferLength++]=h}appendASCIICharCode(h){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=h}appendString(h){let r=h.length;if(this._bufferLength+r>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=h);for(let i=0;i<r;i++)this._buffer[this._bufferLength++]=h.charCodeAt(i)}}},3033:(ut,Ie,t)=>{"use strict";t.d(Ie,{b:()=>_,q:()=>I});var m=t(3060),B=t(72);function u(x){return x.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class I{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(v,f,d,o){this.oldPosition=v,this.oldText=f,this.newPosition=d,this.newText=o}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${u(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${u(this.oldText)}")`:`(replace@${this.oldPosition} "${u(this.oldText)}" with "${u(this.newText)}")`}static _writeStringSize(v){return 4+2*v.length}static _writeString(v,f,d){let o=f.length;m.T4(v,o,d),d+=4;for(let h=0;h<o;h++)m.oq(v,f.charCodeAt(h),d),d+=2;return d}static _readString(v,f){let d=m.Ag(v,f);return f+=4,(0,B.kH)(v,f,d)}writeSize(){return 8+I._writeStringSize(this.oldText)+I._writeStringSize(this.newText)}write(v,f){return m.T4(v,this.oldPosition,f),f+=4,m.T4(v,this.newPosition,f),f+=4,f=I._writeString(v,this.oldText,f),I._writeString(v,this.newText,f)}static read(v,f,d){let o=m.Ag(v,f);f+=4;let h=m.Ag(v,f);f+=4;let r=I._readString(v,f);f+=I._writeStringSize(r);let i=I._readString(v,f);return f+=I._writeStringSize(i),d.push(new I(o,r,h,i)),f}}function _(x,v){return x===null||x.length===0?v:new A(x,v).compress()}class A{constructor(v,f){this._prevEdits=v,this._currEdits=f,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let v=0,f=0,d=this._getPrev(v),o=this._getCurr(f);for(;v<this._prevLen||f<this._currLen;){if(d===null){this._acceptCurr(o),o=this._getCurr(++f);continue}if(o===null){this._acceptPrev(d),d=this._getPrev(++v);continue}if(o.oldEnd<=d.newPosition){this._acceptCurr(o),o=this._getCurr(++f);continue}if(d.newEnd<=o.oldPosition){this._acceptPrev(d),d=this._getPrev(++v);continue}if(o.oldPosition<d.newPosition){let[c,b]=A._splitCurr(o,d.newPosition-o.oldPosition);this._acceptCurr(c),o=b;continue}if(d.newPosition<o.oldPosition){let[c,b]=A._splitPrev(d,o.oldPosition-d.newPosition);this._acceptPrev(c),d=b;continue}let r,i;if(o.oldEnd===d.newEnd)r=d,i=o,d=this._getPrev(++v),o=this._getCurr(++f);else if(o.oldEnd<d.newEnd){let[c,b]=A._splitPrev(d,o.oldLength);r=c,i=o,d=b,o=this._getCurr(++f)}else{let[c,b]=A._splitCurr(o,d.newLength);r=d,i=c,d=this._getPrev(++v),o=b}this._result[this._resultLen++]=new I(r.oldPosition,r.oldText,i.newPosition,i.newText),this._prevDeltaOffset+=r.newLength-r.oldLength,this._currDeltaOffset+=i.newLength-i.oldLength}let h=A._merge(this._result);return A._removeNoOps(h)}_acceptCurr(v){this._result[this._resultLen++]=A._rebaseCurr(this._prevDeltaOffset,v),this._currDeltaOffset+=v.newLength-v.oldLength}_getCurr(v){return v<this._currLen?this._currEdits[v]:null}_acceptPrev(v){this._result[this._resultLen++]=A._rebasePrev(this._currDeltaOffset,v),this._prevDeltaOffset+=v.newLength-v.oldLength}_getPrev(v){return v<this._prevLen?this._prevEdits[v]:null}static _rebaseCurr(v,f){return new I(f.oldPosition-v,f.oldText,f.newPosition,f.newText)}static _rebasePrev(v,f){return new I(f.oldPosition,f.oldText,f.newPosition+v,f.newText)}static _splitPrev(v,f){let d=v.newText.substr(0,f),o=v.newText.substr(f);return[new I(v.oldPosition,v.oldText,v.newPosition,d),new I(v.oldEnd,"",v.newPosition+f,o)]}static _splitCurr(v,f){let d=v.oldText.substr(0,f),o=v.oldText.substr(f);return[new I(v.oldPosition,d,v.newPosition,v.newText),new I(v.oldPosition+f,o,v.newEnd,"")]}static _merge(v){if(v.length===0)return v;let f=[],d=0,o=v[0];for(let h=1;h<v.length;h++){let r=v[h];o.oldEnd===r.oldPosition?o=new I(o.oldPosition,o.oldText+r.oldText,o.newPosition,o.newText+r.newText):(f[d++]=o,o=r)}return f[d++]=o,f}static _removeNoOps(v){if(v.length===0)return v;let f=[],d=0;for(let o=0;o<v.length;o++){let h=v[o];h.oldText!==h.newText&&(f[d++]=h)}return f}}},2075:(ut,Ie,t)=>{"use strict";t.d(Ie,{D:()=>m});let m={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}},4929:(ut,Ie,t)=>{"use strict";t.d(Ie,{u:()=>u});var m=t(4906);class B extends m.N{constructor(_){super(0);for(let A=0,x=_.length;A<x;A++)this.set(_.charCodeAt(A),2);this.set(32,1),this.set(9,1)}}let u=function(I){let _={};return A=>(_.hasOwnProperty(A)||(_[A]=(x=>new B(x))(A)),_[A])}()},270:(ut,Ie,t)=>{"use strict";t.d(Ie,{Af:()=>I,eq:()=>_,t2:()=>x,vu:()=>u});var m=t(3725),B=t(1741);let u="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",I=function(f=""){let d="(-?\\d*\\.\\d\\w*)|([^";for(let o of u)f.indexOf(o)>=0||(d+="\\"+o);return d+="\\s]+)",new RegExp(d,"g")}();function _(f){let d=I;if(f&&f instanceof RegExp)if(f.global)d=f;else{let o="g";f.ignoreCase&&(o+="i"),f.multiline&&(o+="m"),f.unicode&&(o+="u"),d=new RegExp(f.source,o)}return d.lastIndex=0,d}let A=new B.S;function x(f,d,o,h,r){if(r||(r=m.$.first(A)),o.length>r.maxLen){let a=f-r.maxLen/2;return a<0?a=0:h+=a,x(f,d,o=o.substring(a,f+r.maxLen/2),h,r)}let i=Date.now(),c=f-1-h,b=-1,l=null;for(let a=1;!(Date.now()-i>=r.timeBudget);a++){let w=c-r.windowSize*a;d.lastIndex=Math.max(0,w);let E=v(d,o,c,b);if(!E&&l||(l=E,w<=0))break;b=w}if(l){let a={word:l[0],startColumn:h+1+l.index,endColumn:h+1+l.index+l[0].length};return d.lastIndex=0,a}return null}function v(f,d,o,h){let r;for(;r=f.exec(d);){let i=r.index||0;if(i<=o&&f.lastIndex>=o)return r;if(h>0&&i>h)return null}return null}A.unshift({maxLen:1e3,windowSize:15,timeBudget:150})},7128:(ut,Ie,t)=>{"use strict";t.d(Ie,{l:()=>B});var m=t(7988);class B{static whitespaceVisibleColumn(I,_,A){let x=I.length,v=0,f=-1,d=-1;for(let o=0;o<x;o++){if(o===_)return[f,d,v];switch(v%A==0&&(f=o,d=v),I.charCodeAt(o)){case 32:v+=1;break;case 9:v=m.i.nextRenderTabStop(v,A);break;default:return[-1,-1,-1]}}return _===x?[f,d,v]:[-1,-1,-1]}static atomicPosition(I,_,A,x){let v=I.length,[f,d,o]=B.whitespaceVisibleColumn(I,_,A);if(o===-1)return-1;let h;switch(x){case 0:h=!0;break;case 1:h=!1;break;case 2:if(o%A==0)return _;h=o%A<=A/2}if(h){if(f===-1)return-1;let c=d;for(let b=f;b<v;++b){if(c===d+A)return f;switch(I.charCodeAt(b)){case 32:c+=1;break;case 9:c=m.i.nextRenderTabStop(c,A);break;default:return-1}}return c===d+A?f:-1}let r=m.i.nextRenderTabStop(o,A),i=o;for(let c=_;c<v;c++){if(i===r)return c;switch(I.charCodeAt(c)){case 32:i+=1;break;case 9:i=m.i.nextRenderTabStop(i,A);break;default:return-1}}return i===r?v:-1}}},9436:(ut,Ie,t)=>{"use strict";t.d(Ie,{A:()=>v});var m=t(7295),B=t(1329),u=t(5343),I=t(7988),_=t(839),A=t(4314),x=t(187);class v{static deleteRight(d,o,h,r){let i=[],c=d!==3;for(let b=0,l=r.length;b<l;b++){let a=r[b],w=a;if(w.isEmpty()){let E=a.getPosition(),D=_.o.right(o,h,E);w=new A.e(D.lineNumber,D.column,E.lineNumber,E.column)}w.isEmpty()?i[b]=null:(w.startLineNumber!==w.endLineNumber&&(c=!0),i[b]=new B.T4(w,""))}return[c,i]}static isAutoClosingPairDelete(d,o,h,r,i,c,b){if(o==="never"&&h==="never"||d==="never")return!1;for(let l=0,a=c.length;l<a;l++){let w=c[l],E=w.getPosition();if(!w.isEmpty())return!1;let D=i.getLineContent(E.lineNumber);if(E.column<2||E.column>=D.length+1)return!1;let L=D.charAt(E.column-2),k=r.get(L);if(!k)return!1;if((0,u.LN)(L)){if(h==="never")return!1}else if(o==="never")return!1;let R=D.charAt(E.column-1),O=!1;for(let $ of k)$.open===L&&$.close===R&&(O=!0);if(!O)return!1;if(d==="auto"){let $=!1;for(let N=0,T=b.length;N<T;N++){let C=b[N];if(E.lineNumber===C.startLineNumber&&E.column===C.startColumn){$=!0;break}}if(!$)return!1}}return!0}static _runAutoClosingPairDelete(d,o,h){let r=[];for(let i=0,c=h.length;i<c;i++){let b=h[i].getPosition(),l=new A.e(b.lineNumber,b.column-1,b.lineNumber,b.column+1);r[i]=new B.T4(l,"")}return[!0,r]}static deleteLeft(d,o,h,r,i){if(this.isAutoClosingPairDelete(o.autoClosingDelete,o.autoClosingBrackets,o.autoClosingQuotes,o.autoClosingPairs.autoClosingPairsOpenByEnd,h,r,i))return this._runAutoClosingPairDelete(o,h,r);let c=[],b=d!==2;for(let l=0,a=r.length;l<a;l++){let w=v.getDeleteRange(r[l],h,o);w.isEmpty()?c[l]=null:(w.startLineNumber!==w.endLineNumber&&(b=!0),c[l]=new B.T4(w,""))}return[b,c]}static getDeleteRange(d,o,h){if(!d.isEmpty())return d;let r=d.getPosition();if(h.useTabStops&&r.column>1){let i=o.getLineContent(r.lineNumber),c=m.LC(i),b=c===-1?i.length+1:c+1;if(r.column<=b){let l=h.visibleColumnFromColumn(o,r),a=I.i.prevIndentTabStop(l,h.indentSize),w=h.columnFromVisibleColumn(o,r.lineNumber,a);return new A.e(r.lineNumber,w,r.lineNumber,r.column)}}return A.e.fromPositions(v.getPositionAfterDeleteLeft(r,o),r)}static getPositionAfterDeleteLeft(d,o){if(d.column>1){let h=m.oH(d.column-1,o.getLineContent(d.lineNumber));return d.with(void 0,h+1)}if(d.lineNumber>1){let h=d.lineNumber-1;return new x.L(h,o.getLineMaxColumn(h))}return d}static cut(d,o,h){let r=[],i=null;h.sort((c,b)=>x.L.compare(c.getStartPosition(),b.getEndPosition()));for(let c=0,b=h.length;c<b;c++){let l=h[c];if(l.isEmpty())if(d.emptySelectionClipboard){let a=l.getPosition(),w,E,D,L;a.lineNumber<o.getLineCount()?(w=a.lineNumber,E=1,D=a.lineNumber+1,L=1):a.lineNumber>1&&(i==null?void 0:i.endLineNumber)!==a.lineNumber?(w=a.lineNumber-1,E=o.getLineMaxColumn(a.lineNumber-1),D=a.lineNumber,L=o.getLineMaxColumn(a.lineNumber)):(w=a.lineNumber,E=1,D=a.lineNumber,L=o.getLineMaxColumn(a.lineNumber));let k=new A.e(w,E,D,L);i=k,k.isEmpty()?r[c]=null:r[c]=new B.T4(k,"")}else r[c]=null;else r[c]=new B.T4(l,"")}return new u.Tp(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}},8108:(ut,Ie,t)=>{"use strict";t.d(Ie,{N:()=>m,P:()=>v});var m,B=t(8401),u=t(5343),I=t(839),_=t(2896),A=t(187),x=t(4314);class v{static addCursorDown(d,o,h){let r=[],i=0;for(let c=0,b=o.length;c<b;c++){let l=o[c];r[i++]=new u.Vi(l.modelState,l.viewState),r[i++]=h?u.Vi.fromModelState(I.o.translateDown(d.cursorConfig,d.model,l.modelState)):u.Vi.fromViewState(I.o.translateDown(d.cursorConfig,d,l.viewState))}return r}static addCursorUp(d,o,h){let r=[],i=0;for(let c=0,b=o.length;c<b;c++){let l=o[c];r[i++]=new u.Vi(l.modelState,l.viewState),r[i++]=h?u.Vi.fromModelState(I.o.translateUp(d.cursorConfig,d.model,l.modelState)):u.Vi.fromViewState(I.o.translateUp(d.cursorConfig,d,l.viewState))}return r}static moveToBeginningOfLine(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i];r[i]=this._moveToLineStart(d,b,h)}return r}static _moveToLineStart(d,o,h){let r=o.viewState.position.column,i=r===o.modelState.position.column,c=o.viewState.position.lineNumber,b=d.getLineFirstNonWhitespaceColumn(c);return i||r===b?this._moveToLineStartByModel(d,o,h):this._moveToLineStartByView(d,o,h)}static _moveToLineStartByView(d,o,h){return u.Vi.fromViewState(I.o.moveToBeginningOfLine(d.cursorConfig,d,o.viewState,h))}static _moveToLineStartByModel(d,o,h){return u.Vi.fromModelState(I.o.moveToBeginningOfLine(d.cursorConfig,d.model,o.modelState,h))}static moveToEndOfLine(d,o,h,r){let i=[];for(let c=0,b=o.length;c<b;c++){let l=o[c];i[c]=this._moveToLineEnd(d,l,h,r)}return i}static _moveToLineEnd(d,o,h,r){let i=o.viewState.position,c=d.getLineMaxColumn(i.lineNumber),b=i.column===c,l=o.modelState.position,a=d.model.getLineMaxColumn(l.lineNumber),w=c-i.column==a-l.column;return b||w?this._moveToLineEndByModel(d,o,h,r):this._moveToLineEndByView(d,o,h,r)}static _moveToLineEndByView(d,o,h,r){return u.Vi.fromViewState(I.o.moveToEndOfLine(d.cursorConfig,d,o.viewState,h,r))}static _moveToLineEndByModel(d,o,h,r){return u.Vi.fromModelState(I.o.moveToEndOfLine(d.cursorConfig,d.model,o.modelState,h,r))}static expandLineSelection(d,o){let h=[];for(let r=0,i=o.length;r<i;r++){let c=o[r],b=c.modelState.selection.startLineNumber,l=d.model.getLineCount(),a,w=c.modelState.selection.endLineNumber;w===l?a=d.model.getLineMaxColumn(l):(w++,a=1),h[r]=u.Vi.fromModelState(new u.rS(new x.e(b,1,b,1),0,0,new A.L(w,a),0))}return h}static moveToBeginningOfBuffer(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i];r[i]=u.Vi.fromModelState(I.o.moveToBeginningOfBuffer(d.cursorConfig,d.model,b.modelState,h))}return r}static moveToEndOfBuffer(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i];r[i]=u.Vi.fromModelState(I.o.moveToEndOfBuffer(d.cursorConfig,d.model,b.modelState,h))}return r}static selectAll(d,o){let h=d.model.getLineCount(),r=d.model.getLineMaxColumn(h);return u.Vi.fromModelState(new u.rS(new x.e(1,1,1,1),0,0,new A.L(h,r),0))}static line(d,o,h,r,i){let c=d.model.validatePosition(r),b=i?d.coordinatesConverter.validateViewPosition(new A.L(i.lineNumber,i.column),c):d.coordinatesConverter.convertModelPositionToViewPosition(c);if(!h){let a=d.model.getLineCount(),w=c.lineNumber+1,E=1;return w>a&&(w=a,E=d.model.getLineMaxColumn(w)),u.Vi.fromModelState(new u.rS(new x.e(c.lineNumber,1,w,E),2,0,new A.L(w,E),0))}let l=o.modelState.selectionStart.getStartPosition().lineNumber;if(c.lineNumber<l)return u.Vi.fromViewState(o.viewState.move(!0,b.lineNumber,1,0));if(c.lineNumber>l){let a=d.getLineCount(),w=b.lineNumber+1,E=1;return w>a&&(w=a,E=d.getLineMaxColumn(w)),u.Vi.fromViewState(o.viewState.move(!0,w,E,0))}{let a=o.modelState.selectionStart.getEndPosition();return u.Vi.fromModelState(o.modelState.move(!0,a.lineNumber,a.column,0))}}static word(d,o,h,r){let i=d.model.validatePosition(r);return u.Vi.fromModelState(_.w.word(d.cursorConfig,d.model,o.modelState,h,i))}static cancelSelection(d,o){if(!o.modelState.hasSelection())return new u.Vi(o.modelState,o.viewState);let h=o.viewState.position.lineNumber,r=o.viewState.position.column;return u.Vi.fromViewState(new u.rS(new x.e(h,r,h,r),0,0,new A.L(h,r),0))}static moveTo(d,o,h,r,i){if(h){if(o.modelState.selectionStartKind===1)return this.word(d,o,h,r);if(o.modelState.selectionStartKind===2)return this.line(d,o,h,r,i)}let c=d.model.validatePosition(r),b=i?d.coordinatesConverter.validateViewPosition(new A.L(i.lineNumber,i.column),c):d.coordinatesConverter.convertModelPositionToViewPosition(c);return u.Vi.fromViewState(o.viewState.move(h,b.lineNumber,b.column,0))}static simpleMove(d,o,h,r,i,c){switch(h){case 0:return c===4?this._moveHalfLineLeft(d,o,r):this._moveLeft(d,o,r,i);case 1:return c===4?this._moveHalfLineRight(d,o,r):this._moveRight(d,o,r,i);case 2:return c===2?this._moveUpByViewLines(d,o,r,i):this._moveUpByModelLines(d,o,r,i);case 3:return c===2?this._moveDownByViewLines(d,o,r,i):this._moveDownByModelLines(d,o,r,i);case 4:return c===2?o.map(b=>u.Vi.fromViewState(I.o.moveToPrevBlankLine(d.cursorConfig,d,b.viewState,r))):o.map(b=>u.Vi.fromModelState(I.o.moveToPrevBlankLine(d.cursorConfig,d.model,b.modelState,r)));case 5:return c===2?o.map(b=>u.Vi.fromViewState(I.o.moveToNextBlankLine(d.cursorConfig,d,b.viewState,r))):o.map(b=>u.Vi.fromModelState(I.o.moveToNextBlankLine(d.cursorConfig,d.model,b.modelState,r)));case 6:return this._moveToViewMinColumn(d,o,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(d,o,r);case 8:return this._moveToViewCenterColumn(d,o,r);case 9:return this._moveToViewMaxColumn(d,o,r);case 10:return this._moveToViewLastNonWhitespaceColumn(d,o,r);default:return null}}static viewportMove(d,o,h,r,i){let c=d.getCompletelyVisibleViewRange(),b=d.coordinatesConverter.convertViewRangeToModelRange(c);switch(h){case 11:{let l=this._firstLineNumberInRange(d.model,b,i),a=d.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(d,o[0],r,l,a)]}case 13:{let l=this._lastLineNumberInRange(d.model,b,i),a=d.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(d,o[0],r,l,a)]}case 12:{let l=Math.round((b.startLineNumber+b.endLineNumber)/2),a=d.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(d,o[0],r,l,a)]}case 14:{let l=[];for(let a=0,w=o.length;a<w;a++){let E=o[a];l[a]=this.findPositionInViewportIfOutside(d,E,c,r)}return l}default:return null}}static findPositionInViewportIfOutside(d,o,h,r){let i=o.viewState.position.lineNumber;if(h.startLineNumber<=i&&i<=h.endLineNumber-1)return new u.Vi(o.modelState,o.viewState);{let c;c=i>h.endLineNumber-1?h.endLineNumber-1:i<h.startLineNumber?h.startLineNumber:i;let b=I.o.vertical(d.cursorConfig,d,i,o.viewState.position.column,o.viewState.leftoverVisibleColumns,c,!1);return u.Vi.fromViewState(o.viewState.move(r,b.lineNumber,b.column,b.leftoverVisibleColumns))}}static _firstLineNumberInRange(d,o,h){let r=o.startLineNumber;return o.startColumn!==d.getLineMinColumn(r)&&r++,Math.min(o.endLineNumber,r+h-1)}static _lastLineNumberInRange(d,o,h){let r=o.startLineNumber;return o.startColumn!==d.getLineMinColumn(r)&&r++,Math.max(r,o.endLineNumber-h+1)}static _moveLeft(d,o,h,r){return o.map(i=>u.Vi.fromViewState(I.o.moveLeft(d.cursorConfig,d,i.viewState,h,r)))}static _moveHalfLineLeft(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=Math.round(d.getLineContent(l).length/2);r[i]=u.Vi.fromViewState(I.o.moveLeft(d.cursorConfig,d,b.viewState,h,a))}return r}static _moveRight(d,o,h,r){return o.map(i=>u.Vi.fromViewState(I.o.moveRight(d.cursorConfig,d,i.viewState,h,r)))}static _moveHalfLineRight(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=Math.round(d.getLineContent(l).length/2);r[i]=u.Vi.fromViewState(I.o.moveRight(d.cursorConfig,d,b.viewState,h,a))}return r}static _moveDownByViewLines(d,o,h,r){let i=[];for(let c=0,b=o.length;c<b;c++){let l=o[c];i[c]=u.Vi.fromViewState(I.o.moveDown(d.cursorConfig,d,l.viewState,h,r))}return i}static _moveDownByModelLines(d,o,h,r){let i=[];for(let c=0,b=o.length;c<b;c++){let l=o[c];i[c]=u.Vi.fromModelState(I.o.moveDown(d.cursorConfig,d.model,l.modelState,h,r))}return i}static _moveUpByViewLines(d,o,h,r){let i=[];for(let c=0,b=o.length;c<b;c++){let l=o[c];i[c]=u.Vi.fromViewState(I.o.moveUp(d.cursorConfig,d,l.viewState,h,r))}return i}static _moveUpByModelLines(d,o,h,r){let i=[];for(let c=0,b=o.length;c<b;c++){let l=o[c];i[c]=u.Vi.fromModelState(I.o.moveUp(d.cursorConfig,d.model,l.modelState,h,r))}return i}static _moveToViewPosition(d,o,h,r,i){return u.Vi.fromViewState(o.viewState.move(h,r,i,0))}static _moveToModelPosition(d,o,h,r,i){return u.Vi.fromModelState(o.modelState.move(h,r,i,0))}static _moveToViewMinColumn(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=d.getLineMinColumn(l);r[i]=this._moveToViewPosition(d,b,h,l,a)}return r}static _moveToViewFirstNonWhitespaceColumn(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=d.getLineFirstNonWhitespaceColumn(l);r[i]=this._moveToViewPosition(d,b,h,l,a)}return r}static _moveToViewCenterColumn(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=Math.round((d.getLineMaxColumn(l)+d.getLineMinColumn(l))/2);r[i]=this._moveToViewPosition(d,b,h,l,a)}return r}static _moveToViewMaxColumn(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=d.getLineMaxColumn(l);r[i]=this._moveToViewPosition(d,b,h,l,a)}return r}static _moveToViewLastNonWhitespaceColumn(d,o,h){let r=[];for(let i=0,c=o.length;i<c;i++){let b=o[i],l=b.viewState.position.lineNumber,a=d.getLineLastNonWhitespaceColumn(l);r[i]=this._moveToViewPosition(d,b,h,l,a)}return r}}(function(f){f.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:function(d){if(!B.Kn(d))return!1;let o=d;return!(!B.HD(o.to)||!B.o8(o.select)&&!B.jn(o.select)||!B.o8(o.by)&&!B.HD(o.by)||!B.o8(o.value)&&!B.hj(o.value))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},f.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},f.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},f.parse=function(d){if(!d.to)return null;let o;switch(d.to){case f.RawDirection.Left:o=0;break;case f.RawDirection.Right:o=1;break;case f.RawDirection.Up:o=2;break;case f.RawDirection.Down:o=3;break;case f.RawDirection.PrevBlankLine:o=4;break;case f.RawDirection.NextBlankLine:o=5;break;case f.RawDirection.WrappedLineStart:o=6;break;case f.RawDirection.WrappedLineFirstNonWhitespaceCharacter:o=7;break;case f.RawDirection.WrappedLineColumnCenter:o=8;break;case f.RawDirection.WrappedLineEnd:o=9;break;case f.RawDirection.WrappedLineLastNonWhitespaceCharacter:o=10;break;case f.RawDirection.ViewPortTop:o=11;break;case f.RawDirection.ViewPortBottom:o=13;break;case f.RawDirection.ViewPortCenter:o=12;break;case f.RawDirection.ViewPortIfOutside:o=14;break;default:return null}let h=0;switch(d.by){case f.RawUnit.Line:h=1;break;case f.RawUnit.WrappedLine:h=2;break;case f.RawUnit.Character:h=3;break;case f.RawUnit.HalfLine:h=4}return{direction:o,unit:h,select:!!d.select,value:d.value||1}}})(m||(m={}))},839:(ut,Ie,t)=>{"use strict";t.d(Ie,{o:()=>v});var m=t(5343),B=t(7988),u=t(187),I=t(4314),_=t(7295),A=t(7128);class x{constructor(d,o,h){this._cursorPositionBrand=void 0,this.lineNumber=d,this.column=o,this.leftoverVisibleColumns=h}}class v{static leftPosition(d,o){if(o.column>d.getLineMinColumn(o.lineNumber))return o.delta(void 0,-_.HO(d.getLineContent(o.lineNumber),o.column-1));if(o.lineNumber>1){let h=o.lineNumber-1;return new u.L(h,d.getLineMaxColumn(h))}return o}static leftPositionAtomicSoftTabs(d,o,h){if(o.column<=d.getLineIndentColumn(o.lineNumber)){let r=d.getLineMinColumn(o.lineNumber),i=d.getLineContent(o.lineNumber),c=A.l.atomicPosition(i,o.column-1,h,0);if(c!==-1&&c+1>=r)return new u.L(o.lineNumber,c+1)}return this.leftPosition(d,o)}static left(d,o,h){let r=d.stickyTabStops?v.leftPositionAtomicSoftTabs(o,h,d.tabSize):v.leftPosition(o,h);return new x(r.lineNumber,r.column,0)}static moveLeft(d,o,h,r,i){let c,b;if(h.hasSelection()&&!r)c=h.selection.startLineNumber,b=h.selection.startColumn;else{let l=h.position.delta(void 0,-(i-1)),a=o.normalizePosition(v.clipPositionColumn(l,o),0),w=v.left(d,o,a);c=w.lineNumber,b=w.column}return h.move(r,c,b,0)}static clipPositionColumn(d,o){return new u.L(d.lineNumber,v.clipRange(d.column,o.getLineMinColumn(d.lineNumber),o.getLineMaxColumn(d.lineNumber)))}static clipRange(d,o,h){return d<o?o:d>h?h:d}static rightPosition(d,o,h){return h<d.getLineMaxColumn(o)?h+=_.vH(d.getLineContent(o),h-1):o<d.getLineCount()&&(o+=1,h=d.getLineMinColumn(o)),new u.L(o,h)}static rightPositionAtomicSoftTabs(d,o,h,r,i){if(h<d.getLineIndentColumn(o)){let c=d.getLineContent(o),b=A.l.atomicPosition(c,h-1,r,1);if(b!==-1)return new u.L(o,b+1)}return this.rightPosition(d,o,h)}static right(d,o,h){let r=d.stickyTabStops?v.rightPositionAtomicSoftTabs(o,h.lineNumber,h.column,d.tabSize,d.indentSize):v.rightPosition(o,h.lineNumber,h.column);return new x(r.lineNumber,r.column,0)}static moveRight(d,o,h,r,i){let c,b;if(h.hasSelection()&&!r)c=h.selection.endLineNumber,b=h.selection.endColumn;else{let l=h.position.delta(void 0,i-1),a=o.normalizePosition(v.clipPositionColumn(l,o),1),w=v.right(d,o,a);c=w.lineNumber,b=w.column}return h.move(r,c,b,0)}static vertical(d,o,h,r,i,c,b,l){let a=B.i.visibleColumnFromColumn(o.getLineContent(h),r,d.tabSize)+i,w=o.getLineCount(),E=h===1&&r===1,D=h===w&&r===o.getLineMaxColumn(h),L=c<h?E:D;if((h=c)<1?(h=1,r=b?o.getLineMinColumn(h):Math.min(o.getLineMaxColumn(h),r)):h>w?(h=w,r=b?o.getLineMaxColumn(h):Math.min(o.getLineMaxColumn(h),r)):r=d.columnFromVisibleColumn(o,h,a),i=L?0:a-B.i.visibleColumnFromColumn(o.getLineContent(h),r,d.tabSize),l!==void 0){let k=new u.L(h,r),R=o.normalizePosition(k,l);i+=r-R.column,h=R.lineNumber,r=R.column}return new x(h,r,i)}static down(d,o,h,r,i,c,b){return this.vertical(d,o,h,r,i,h+c,b,4)}static moveDown(d,o,h,r,i){let c,b;h.hasSelection()&&!r?(c=h.selection.endLineNumber,b=h.selection.endColumn):(c=h.position.lineNumber,b=h.position.column);let l=v.down(d,o,c,b,h.leftoverVisibleColumns,i,!0);return h.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(d,o,h){let r=h.selection,i=v.down(d,o,r.selectionStartLineNumber,r.selectionStartColumn,h.selectionStartLeftoverVisibleColumns,1,!1),c=v.down(d,o,r.positionLineNumber,r.positionColumn,h.leftoverVisibleColumns,1,!1);return new m.rS(new I.e(i.lineNumber,i.column,i.lineNumber,i.column),0,i.leftoverVisibleColumns,new u.L(c.lineNumber,c.column),c.leftoverVisibleColumns)}static up(d,o,h,r,i,c,b){return this.vertical(d,o,h,r,i,h-c,b,3)}static moveUp(d,o,h,r,i){let c,b;h.hasSelection()&&!r?(c=h.selection.startLineNumber,b=h.selection.startColumn):(c=h.position.lineNumber,b=h.position.column);let l=v.up(d,o,c,b,h.leftoverVisibleColumns,i,!0);return h.move(r,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(d,o,h){let r=h.selection,i=v.up(d,o,r.selectionStartLineNumber,r.selectionStartColumn,h.selectionStartLeftoverVisibleColumns,1,!1),c=v.up(d,o,r.positionLineNumber,r.positionColumn,h.leftoverVisibleColumns,1,!1);return new m.rS(new I.e(i.lineNumber,i.column,i.lineNumber,i.column),0,i.leftoverVisibleColumns,new u.L(c.lineNumber,c.column),c.leftoverVisibleColumns)}static _isBlankLine(d,o){return d.getLineFirstNonWhitespaceColumn(o)===0}static moveToPrevBlankLine(d,o,h,r){let i=h.position.lineNumber;for(;i>1&&this._isBlankLine(o,i);)i--;for(;i>1&&!this._isBlankLine(o,i);)i--;return h.move(r,i,o.getLineMinColumn(i),0)}static moveToNextBlankLine(d,o,h,r){let i=o.getLineCount(),c=h.position.lineNumber;for(;c<i&&this._isBlankLine(o,c);)c++;for(;c<i&&!this._isBlankLine(o,c);)c++;return h.move(r,c,o.getLineMinColumn(c),0)}static moveToBeginningOfLine(d,o,h,r){let i=h.position.lineNumber,c=o.getLineMinColumn(i),b=o.getLineFirstNonWhitespaceColumn(i)||c,l;return l=h.position.column===b?c:b,h.move(r,i,l,0)}static moveToEndOfLine(d,o,h,r,i){let c=h.position.lineNumber,b=o.getLineMaxColumn(c);return h.move(r,c,b,i?1073741824-b:0)}static moveToBeginningOfBuffer(d,o,h,r){return h.move(r,1,1,0)}static moveToEndOfBuffer(d,o,h,r){let i=o.getLineCount(),c=o.getLineMaxColumn(i);return h.move(r,i,c,0)}}},1336:(ut,Ie,t)=>{"use strict";t.d(Ie,{Nu:()=>w,u6:()=>l,g_:()=>a});var m=t(7301),B=t(7295),u=t(1329),I=t(291),_=t(4314),A=t(3860);class x{constructor(O,$,N){this._range=O,this._charBeforeSelection=$,this._charAfterSelection=N}getEditOperations(O,$){$.addTrackedEditOperation(new _.e(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),$.addTrackedEditOperation(new _.e(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(O,$){let N=$.getInverseEditOperations(),T=N[0].range,C=N[1].range;return new A.Y(T.endLineNumber,T.endColumn,C.endLineNumber,C.endColumn-this._charAfterSelection.length)}}class v{constructor(O,$,N){this._position=O,this._text=$,this._charAfter=N}getEditOperations(O,$){$.addTrackedEditOperation(new _.e(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(O,$){let N=$.getInverseEditOperations()[0].range;return new A.Y(N.endLineNumber,N.startColumn,N.endLineNumber,N.endColumn-this._charAfter.length)}}var f=t(5343),d=t(4929),o=t(187),h=t(9119),r=t(1381),i=t(9111),c=t(5383),b=t(1615);class l{static indent(O,$,N){if($===null||N===null)return[];let T=[];for(let C=0,W=N.length;C<W;C++)T[C]=new I.U(N[C],{isUnshift:!1,tabSize:O.tabSize,indentSize:O.indentSize,insertSpaces:O.insertSpaces,useTabStops:O.useTabStops,autoIndent:O.autoIndent},O.languageConfigurationService);return T}static outdent(O,$,N){let T=[];for(let C=0,W=N.length;C<W;C++)T[C]=new I.U(N[C],{isUnshift:!0,tabSize:O.tabSize,indentSize:O.indentSize,insertSpaces:O.insertSpaces,useTabStops:O.useTabStops,autoIndent:O.autoIndent},O.languageConfigurationService);return T}static shiftIndent(O,$,N){return N=N||1,I.U.shiftIndent($,$.length+N,O.tabSize,O.indentSize,O.insertSpaces)}static unshiftIndent(O,$,N){return N=N||1,I.U.unshiftIndent($,$.length+N,O.tabSize,O.indentSize,O.insertSpaces)}static _distributedPaste(O,$,N,T){let C=[];for(let W=0,K=N.length;W<K;W++)C[W]=new u.T4(N[W],T[W]);return new f.Tp(0,C,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(O,$,N,T,C){let W=[];for(let K=0,j=N.length;K<j;K++){let F=N[K],H=F.getPosition();if(C&&!F.isEmpty()&&(C=!1),C&&T.indexOf(`
`)!==T.length-1&&(C=!1),C){let z=new _.e(H.lineNumber,1,H.lineNumber,1);W[K]=new u.hP(z,T,F,!0)}else W[K]=new u.T4(F,T)}return new f.Tp(0,W,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(O,$,N,T,C){if(T||$.length===1)return null;if(C&&C.length===$.length)return C;if(O.multiCursorPaste==="spread"){N.charCodeAt(N.length-1)===10&&(N=N.substr(0,N.length-1)),N.charCodeAt(N.length-1)===13&&(N=N.substr(0,N.length-1));let W=B.uq(N);if(W.length===$.length)return W}return null}static paste(O,$,N,T,C,W){let K=this._distributePasteToCursors(O,N,T,C,W);return K?(N=N.sort(_.e.compareRangesUsingStarts),this._distributedPaste(O,$,N,K)):this._simplePaste(O,$,N,T,C)}static _goodIndentForLine(O,$,N){let T=null,C="",W=(0,c.r7)(O.autoIndent,$,N,!1,O.languageConfigurationService);if(W)T=W.action,C=W.indentation;else if(N>1){let K;for(K=N-1;K>=1;K--){let H=$.getLineContent(K);if(B.ow(H)>=0)break}if(K<1)return null;let j=$.getLineMaxColumn(K),F=(0,b.A)(O.autoIndent,$,new _.e(K,j,K,j),O.languageConfigurationService);F&&(C=F.indentation+F.appendText)}return T&&(T===h.wU.Indent&&(C=l.shiftIndent(O,C)),T===h.wU.Outdent&&(C=l.unshiftIndent(O,C)),C=O.normalizeIndentation(C)),C||null}static _replaceJumpToNextIndent(O,$,N,T){let C="",W=N.getStartPosition();if(O.insertSpaces){let K=O.visibleColumnFromColumn($,W),j=O.indentSize,F=j-K%j;for(let H=0;H<F;H++)C+=" "}else C="	";return new u.T4(N,C,T)}static tab(O,$,N){let T=[];for(let C=0,W=N.length;C<W;C++){let K=N[C];if(K.isEmpty()){let j=$.getLineContent(K.startLineNumber);if(/^\s*$/.test(j)&&$.tokenization.isCheapToTokenize(K.startLineNumber)){let F=this._goodIndentForLine(O,$,K.startLineNumber);F=F||"	";let H=O.normalizeIndentation(F);if(!j.startsWith(H)){T[C]=new u.T4(new _.e(K.startLineNumber,1,K.startLineNumber,j.length+1),H,!0);continue}}T[C]=this._replaceJumpToNextIndent(O,$,K,!0)}else{if(K.startLineNumber===K.endLineNumber){let j=$.getLineMaxColumn(K.startLineNumber);if(K.startColumn!==1||K.endColumn!==j){T[C]=this._replaceJumpToNextIndent(O,$,K,!1);continue}}T[C]=new I.U(K,{isUnshift:!1,tabSize:O.tabSize,indentSize:O.indentSize,insertSpaces:O.insertSpaces,useTabStops:O.useTabStops,autoIndent:O.autoIndent},O.languageConfigurationService)}}return T}static compositionType(O,$,N,T,C,W,K,j){let F=T.map(H=>this._compositionType(N,H,C,W,K,j));return new f.Tp(4,F,{shouldPushStackElementBefore:D(O,4),shouldPushStackElementAfter:!1})}static _compositionType(O,$,N,T,C,W){if(!$.isEmpty())return null;let K=$.getPosition(),j=Math.max(1,K.column-T),F=Math.min(O.getLineMaxColumn(K.lineNumber),K.column+C),H=new _.e(K.lineNumber,j,K.lineNumber,F);return O.getValueInRange(H)===N&&W===0?null:new u.Uo(H,N,0,W)}static _typeCommand(O,$,N){return N?new u.Sj(O,$,!0):new u.T4(O,$,!0)}static _enter(O,$,N,T){if(O.autoIndent===0)return l._typeCommand(T,`
`,N);if(!$.tokenization.isCheapToTokenize(T.getStartPosition().lineNumber)||O.autoIndent===1){let j=$.getLineContent(T.startLineNumber),F=B.V8(j).substring(0,T.startColumn-1);return l._typeCommand(T,`
`+O.normalizeIndentation(F),N)}let C=(0,b.A)(O.autoIndent,$,T,O.languageConfigurationService);if(C){if(C.indentAction===h.wU.None||C.indentAction===h.wU.Indent)return l._typeCommand(T,`
`+O.normalizeIndentation(C.indentation+C.appendText),N);if(C.indentAction===h.wU.IndentOutdent){let j=O.normalizeIndentation(C.indentation),F=O.normalizeIndentation(C.indentation+C.appendText),H=`
`+F+`
`+j;return N?new u.Sj(T,H,!0):new u.Uo(T,H,-1,F.length-j.length,!0)}if(C.indentAction===h.wU.Outdent){let j=l.unshiftIndent(O,C.indentation);return l._typeCommand(T,`
`+O.normalizeIndentation(j+C.appendText),N)}}let W=$.getLineContent(T.startLineNumber),K=B.V8(W).substring(0,T.startColumn-1);if(O.autoIndent>=4){let j=(0,c.UF)(O.autoIndent,$,T,{unshiftIndent:F=>l.unshiftIndent(O,F),shiftIndent:F=>l.shiftIndent(O,F),normalizeIndentation:F=>O.normalizeIndentation(F)},O.languageConfigurationService);if(j){let F=O.visibleColumnFromColumn($,T.getEndPosition()),H=T.endColumn,z=$.getLineContent(T.endLineNumber),J=B.LC(z);if(T=J>=0?T.setEndPosition(T.endLineNumber,Math.max(T.endColumn,J+1)):T.setEndPosition(T.endLineNumber,$.getLineMaxColumn(T.endLineNumber)),N)return new u.Sj(T,`
`+O.normalizeIndentation(j.afterEnter),!0);{let oe=0;return H<=J+1&&(O.insertSpaces||(F=Math.ceil(F/O.indentSize)),oe=Math.min(F+1-O.normalizeIndentation(j.afterEnter).length-1,0)),new u.Uo(T,`
`+O.normalizeIndentation(j.afterEnter),0,oe,!0)}}}return l._typeCommand(T,`
`+O.normalizeIndentation(K),N)}static _isAutoIndentType(O,$,N){if(O.autoIndent<4)return!1;for(let T=0,C=N.length;T<C;T++)if(!$.tokenization.isCheapToTokenize(N[T].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(O,$,N,T){let C=(0,r.u0)($,N.startLineNumber,N.startColumn),W=(0,c.$9)(O.autoIndent,$,N,T,{shiftIndent:K=>l.shiftIndent(O,K),unshiftIndent:K=>l.unshiftIndent(O,K)},O.languageConfigurationService);if(W===null)return null;if(W!==O.normalizeIndentation(C)){let K=$.getLineFirstNonWhitespaceColumn(N.startLineNumber);return K===0?l._typeCommand(new _.e(N.startLineNumber,1,N.endLineNumber,N.endColumn),O.normalizeIndentation(W)+T,!1):l._typeCommand(new _.e(N.startLineNumber,1,N.endLineNumber,N.endColumn),O.normalizeIndentation(W)+$.getLineContent(N.startLineNumber).substring(K-1,N.startColumn-1)+T,!1)}return null}static _isAutoClosingOvertype(O,$,N,T,C){if(O.autoClosingOvertype==="never"||!O.autoClosingPairs.autoClosingPairsCloseSingleChar.has(C))return!1;for(let W=0,K=N.length;W<K;W++){let j=N[W];if(!j.isEmpty())return!1;let F=j.getPosition(),H=$.getLineContent(F.lineNumber);if(H.charAt(F.column-1)!==C)return!1;let z=(0,f.LN)(C);if((F.column>2?H.charCodeAt(F.column-2):0)===92&&z)return!1;if(O.autoClosingOvertype==="auto"){let J=!1;for(let oe=0,fe=T.length;oe<fe;oe++){let q=T[oe];if(F.lineNumber===q.startLineNumber&&F.column===q.startColumn){J=!0;break}}if(!J)return!1}}return!0}static _runAutoClosingOvertype(O,$,N,T,C){let W=[];for(let K=0,j=T.length;K<j;K++){let F=T[K].getPosition(),H=new _.e(F.lineNumber,F.column,F.lineNumber,F.column+1);W[K]=new u.T4(H,C)}return new f.Tp(4,W,{shouldPushStackElementBefore:D(O,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(O,$){let N=$.charAt(0),T=O.autoClosingPairs.autoClosingPairsOpenByStart.get(N)||[],C=O.autoClosingPairs.autoClosingPairsCloseByStart.get(N)||[],W=T.some(j=>$.startsWith(j.open)),K=C.some(j=>$.startsWith(j.close));return!W&&K}static _findAutoClosingPairOpen(O,$,N,T){let C=O.autoClosingPairs.autoClosingPairsOpenByEnd.get(T);if(!C)return null;let W=null;for(let K of C)if(W===null||K.open.length>W.open.length){let j=!0;for(let F of N)if($.getValueInRange(new _.e(F.lineNumber,F.column-K.open.length+1,F.lineNumber,F.column))+T!==K.open){j=!1;break}j&&(W=K)}return W}static _findContainedAutoClosingPair(O,$){if($.open.length<=1)return null;let N=$.close.charAt($.close.length-1),T=O.autoClosingPairs.autoClosingPairsCloseByEnd.get(N)||[],C=null;for(let W of T)W.open!==$.open&&$.open.includes(W.open)&&$.close.endsWith(W.close)&&(!C||W.open.length>C.open.length)&&(C=W);return C}static _getAutoClosingPairClose(O,$,N,T,C){let W=(0,f.LN)(T),K=W?O.autoClosingQuotes:O.autoClosingBrackets,j=W?O.shouldAutoCloseBefore.quote:O.shouldAutoCloseBefore.bracket;if(K==="never")return null;for(let fe of N)if(!fe.isEmpty())return null;let F=N.map(fe=>{let q=fe.getPosition();return C?{lineNumber:q.lineNumber,beforeColumn:q.column-T.length,afterColumn:q.column}:{lineNumber:q.lineNumber,beforeColumn:q.column,afterColumn:q.column}}),H=this._findAutoClosingPairOpen(O,$,F.map(fe=>new o.L(fe.lineNumber,fe.beforeColumn)),T);if(!H)return null;let z=this._findContainedAutoClosingPair(O,H),J=z?z.close:"",oe=!0;for(let fe of F){let{lineNumber:q,beforeColumn:p,afterColumn:re}=fe,ne=$.getLineContent(q),ie=ne.substring(0,p-1),se=ne.substring(re-1);if(se.startsWith(J)||(oe=!1),se.length>0){let U=se.charAt(0);if(!l._isBeforeClosingBrace(O,se)&&!j(U))return null}if(H.open.length===1&&(T==="'"||T==='"')&&K!=="always"){let U=(0,d.u)(O.wordSeparators);if(ie.length>0){let ue=ie.charCodeAt(ie.length-1);if(U.get(ue)===0)return null}}if(!$.tokenization.isCheapToTokenize(q))return null;$.tokenization.forceTokenization(q);let ce=$.tokenization.getLineTokens(q),be=(0,i.wH)(ce,p-1);if(!H.shouldAutoClose(be,p-be.firstCharOffset))return null;let de=H.findNeutralCharacter();if(de){let U=$.tokenization.getTokenTypeIfInsertingCharacter(q,p,de);if(!H.isOK(U))return null}}return oe?H.close.substring(0,H.close.length-J.length):H.close}static _runAutoClosingOpenCharType(O,$,N,T,C,W,K){let j=[];for(let F=0,H=T.length;F<H;F++){let z=T[F];j[F]=new a(z,C,!W,K)}return new f.Tp(4,j,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(O,$){return(0,f.LN)($)?O.autoSurround==="quotes"||O.autoSurround==="languageDefined":O.autoSurround==="brackets"||O.autoSurround==="languageDefined"}static _isSurroundSelectionType(O,$,N,T){if(!l._shouldSurroundChar(O,T)||!O.surroundingPairs.hasOwnProperty(T))return!1;let C=(0,f.LN)(T);for(let W of N){if(W.isEmpty())return!1;let K=!0;for(let j=W.startLineNumber;j<=W.endLineNumber;j++){let F=$.getLineContent(j),H=j===W.startLineNumber?W.startColumn-1:0,z=j===W.endLineNumber?W.endColumn-1:F.length,J=F.substring(H,z);if(/[^ \t]/.test(J)){K=!1;break}}if(K)return!1;if(C&&W.startLineNumber===W.endLineNumber&&W.startColumn+1===W.endColumn){let j=$.getValueInRange(W);if((0,f.LN)(j))return!1}}return!0}static _runSurroundSelectionType(O,$,N,T,C){let W=[];for(let K=0,j=T.length;K<j;K++){let F=T[K],H=$.surroundingPairs[C];W[K]=new x(F,C,H)}return new f.Tp(0,W,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(O,$,N){return!(N.length!==1||!$.tokenization.isCheapToTokenize(N[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(O,$,N,T,C){if(!$.electricChars.hasOwnProperty(C)||!T.isEmpty())return null;let W=T.getPosition();N.tokenization.forceTokenization(W.lineNumber);let K=N.tokenization.getLineTokens(W.lineNumber),j;try{j=$.onElectricCharacter(C,K,W.column)}catch(F){return(0,m.dL)(F),null}if(!j)return null;if(j.matchOpenBracket){let F=(K.getLineContent()+C).lastIndexOf(j.matchOpenBracket)+1,H=N.bracketPairs.findMatchingBracketUp(j.matchOpenBracket,{lineNumber:W.lineNumber,column:F},500);if(H){if(H.startLineNumber===W.lineNumber)return null;let z=N.getLineContent(H.startLineNumber),J=B.V8(z),oe=$.normalizeIndentation(J),fe=N.getLineContent(W.lineNumber),q=N.getLineFirstNonWhitespaceColumn(W.lineNumber)||W.column,p=oe+fe.substring(q-1,W.column-1)+C,re=new _.e(W.lineNumber,1,W.lineNumber,W.column),ne=new u.T4(re,p);return new f.Tp(E(p,O),[ne],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(O,$,N,T,C,W){if(!T)return null;let K=null;for(let z of T)if(K===null)K=z.insertedText;else if(K!==z.insertedText)return null;if(!K||K.length!==1)return null;let j=K,F=!1;for(let z of T)if(z.deletedText.length!==0){F=!0;break}if(F){if(!l._shouldSurroundChar($,j)||!$.surroundingPairs.hasOwnProperty(j))return null;let z=(0,f.LN)(j);for(let fe of T)if(fe.deletedSelectionStart!==0||fe.deletedSelectionEnd!==fe.deletedText.length||/^[ \t]+$/.test(fe.deletedText)||z&&(0,f.LN)(fe.deletedText))return null;let J=[];for(let fe of C){if(!fe.isEmpty())return null;J.push(fe.getPosition())}if(J.length!==T.length)return null;let oe=[];for(let fe=0,q=J.length;fe<q;fe++)oe.push(new v(J[fe],T[fe].deletedText,$.surroundingPairs[j]));return new f.Tp(4,oe,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype($,N,C,W,j)){let z=C.map(J=>new u.T4(new _.e(J.positionLineNumber,J.positionColumn,J.positionLineNumber,J.positionColumn+1),"",!1));return new f.Tp(4,z,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let H=this._getAutoClosingPairClose($,N,C,j,!0);return H!==null?this._runAutoClosingOpenCharType(O,$,N,C,j,!0,H):null}static typeWithInterceptors(O,$,N,T,C,W,K){if(!O&&K===`
`){let H=[];for(let z=0,J=C.length;z<J;z++)H[z]=l._enter(N,T,!1,C[z]);return new f.Tp(4,H,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!O&&this._isAutoIndentType(N,T,C)){let H=[],z=!1;for(let J=0,oe=C.length;J<oe;J++)if(H[J]=this._runAutoIndentType(N,T,C[J],K),!H[J]){z=!0;break}if(!z)return new f.Tp(4,H,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(N,T,C,W,K))return this._runAutoClosingOvertype($,N,T,C,K);if(!O){let H=this._getAutoClosingPairClose(N,T,C,K,!1);if(H)return this._runAutoClosingOpenCharType($,N,T,C,K,!1,H)}if(!O&&this._isSurroundSelectionType(N,T,C,K))return this._runSurroundSelectionType($,N,T,C,K);if(!O&&this._isTypeInterceptorElectricChar(N,T,C)){let H=this._typeInterceptorElectricChar($,N,T,C[0],K);if(H)return H}let j=[];for(let H=0,z=C.length;H<z;H++)j[H]=new u.T4(C[H],K);let F=E(K,$);return new f.Tp(F,j,{shouldPushStackElementBefore:D($,F),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(O,$,N,T,C){let W=[];for(let j=0,F=T.length;j<F;j++)W[j]=new u.T4(T[j],C);let K=E(C,O);return new f.Tp(K,W,{shouldPushStackElementBefore:D(O,K),shouldPushStackElementAfter:!1})}static lineInsertBefore(O,$,N){if($===null||N===null)return[];let T=[];for(let C=0,W=N.length;C<W;C++){let K=N[C].positionLineNumber;if(K===1)T[C]=new u.Sj(new _.e(1,1,1,1),`
`);else{K--;let j=$.getLineMaxColumn(K);T[C]=this._enter(O,$,!1,new _.e(K,j,K,j))}}return T}static lineInsertAfter(O,$,N){if($===null||N===null)return[];let T=[];for(let C=0,W=N.length;C<W;C++){let K=N[C].positionLineNumber,j=$.getLineMaxColumn(K);T[C]=this._enter(O,$,!1,new _.e(K,j,K,j))}return T}static lineBreakInsert(O,$,N){let T=[];for(let C=0,W=N.length;C<W;C++)T[C]=this._enter(O,$,!0,N[C]);return T}}class a extends u.Uo{constructor(O,$,N,T){super(O,(N?$:"")+T,0,-T.length),this._openCharacter=$,this._closeCharacter=T,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(O,$){let N=$.getInverseEditOperations()[0].range;return this.closeCharacterRange=new _.e(N.startLineNumber,N.endColumn-this._closeCharacter.length,N.endLineNumber,N.endColumn),this.enclosingRange=new _.e(N.startLineNumber,N.endColumn-this._openCharacter.length-this._closeCharacter.length,N.endLineNumber,N.endColumn),super.computeCursorState(O,$)}}class w{constructor(O,$,N,T,C,W){this.deletedText=O,this.deletedSelectionStart=$,this.deletedSelectionEnd=N,this.insertedText=T,this.insertedSelectionStart=C,this.insertedSelectionEnd=W}}function E(R,O){return R===" "?O===5||O===6?6:5:4}function D(R,O){return!(!k(R)||k(O))||R!==5&&L(R)!==L(O)}function L(R){return R===6||R===5?"space":R}function k(R){return R===4||R===5||R===6}},2896:(ut,Ie,t)=>{"use strict";t.d(Ie,{L:()=>v,w:()=>x});var m=t(7295),B=t(5343),u=t(9436),I=t(4929),_=t(187),A=t(4314);class x{static _createWord(o,h,r,i,c){return{start:i,end:c,wordType:h,nextCharClass:r}}static _findPreviousWordOnLine(o,h,r){let i=h.getLineContent(r.lineNumber);return this._doFindPreviousWordOnLine(i,o,r)}static _doFindPreviousWordOnLine(o,h,r){let i=0;for(let c=r.column-2;c>=0;c--){let b=o.charCodeAt(c),l=h.get(b);if(l===0){if(i===2)return this._createWord(o,i,l,c+1,this._findEndOfWord(o,h,i,c+1));i=1}else if(l===2){if(i===1)return this._createWord(o,i,l,c+1,this._findEndOfWord(o,h,i,c+1));i=2}else if(l===1&&i!==0)return this._createWord(o,i,l,c+1,this._findEndOfWord(o,h,i,c+1))}return i!==0?this._createWord(o,i,1,0,this._findEndOfWord(o,h,i,0)):null}static _findEndOfWord(o,h,r,i){let c=o.length;for(let b=i;b<c;b++){let l=o.charCodeAt(b),a=h.get(l);if(a===1||r===1&&a===2||r===2&&a===0)return b}return c}static _findNextWordOnLine(o,h,r){let i=h.getLineContent(r.lineNumber);return this._doFindNextWordOnLine(i,o,r)}static _doFindNextWordOnLine(o,h,r){let i=0,c=o.length;for(let b=r.column-1;b<c;b++){let l=o.charCodeAt(b),a=h.get(l);if(a===0){if(i===2)return this._createWord(o,i,a,this._findStartOfWord(o,h,i,b-1),b);i=1}else if(a===2){if(i===1)return this._createWord(o,i,a,this._findStartOfWord(o,h,i,b-1),b);i=2}else if(a===1&&i!==0)return this._createWord(o,i,a,this._findStartOfWord(o,h,i,b-1),b)}return i!==0?this._createWord(o,i,1,this._findStartOfWord(o,h,i,c-1),c):null}static _findStartOfWord(o,h,r,i){for(let c=i;c>=0;c--){let b=o.charCodeAt(c),l=h.get(b);if(l===1||r===1&&l===2||r===2&&l===0)return c+1}return 0}static moveWordLeft(o,h,r,i){let c=r.lineNumber,b=r.column;b===1&&c>1&&(c-=1,b=h.getLineMaxColumn(c));let l=x._findPreviousWordOnLine(o,h,new _.L(c,b));if(i===0)return new _.L(c,l?l.start+1:1);if(i===1)return l&&l.wordType===2&&l.end-l.start==1&&l.nextCharClass===0&&(l=x._findPreviousWordOnLine(o,h,new _.L(c,l.start+1))),new _.L(c,l?l.start+1:1);if(i===3){for(;l&&l.wordType===2;)l=x._findPreviousWordOnLine(o,h,new _.L(c,l.start+1));return new _.L(c,l?l.start+1:1)}return l&&b<=l.end+1&&(l=x._findPreviousWordOnLine(o,h,new _.L(c,l.start+1))),new _.L(c,l?l.end+1:1)}static _moveWordPartLeft(o,h){let r=h.lineNumber,i=o.getLineMaxColumn(r);if(h.column===1)return r>1?new _.L(r-1,o.getLineMaxColumn(r-1)):h;let c=o.getLineContent(r);for(let b=h.column-1;b>1;b--){let l=c.charCodeAt(b-2),a=c.charCodeAt(b-1);if(l===95&&a!==95)return new _.L(r,b);if(l===45&&a!==45)return new _.L(r,b);if((m.mK(l)||m.T5(l))&&m.df(a))return new _.L(r,b);if(m.df(l)&&m.df(a)&&b+1<i){let w=c.charCodeAt(b);if(m.mK(w)||m.T5(w))return new _.L(r,b)}}return new _.L(r,1)}static moveWordRight(o,h,r,i){let c=r.lineNumber,b=r.column,l=!1;b===h.getLineMaxColumn(c)&&c<h.getLineCount()&&(l=!0,c+=1,b=1);let a=x._findNextWordOnLine(o,h,new _.L(c,b));if(i===2)a&&a.wordType===2&&a.end-a.start==1&&a.nextCharClass===0&&(a=x._findNextWordOnLine(o,h,new _.L(c,a.end+1))),b=a?a.end+1:h.getLineMaxColumn(c);else if(i===3){for(l&&(b=0);a&&(a.wordType===2||a.start+1<=b);)a=x._findNextWordOnLine(o,h,new _.L(c,a.end+1));b=a?a.start+1:h.getLineMaxColumn(c)}else a&&!l&&b>=a.start+1&&(a=x._findNextWordOnLine(o,h,new _.L(c,a.end+1))),b=a?a.start+1:h.getLineMaxColumn(c);return new _.L(c,b)}static _moveWordPartRight(o,h){let r=h.lineNumber,i=o.getLineMaxColumn(r);if(h.column===i)return r<o.getLineCount()?new _.L(r+1,1):h;let c=o.getLineContent(r);for(let b=h.column+1;b<i;b++){let l=c.charCodeAt(b-2),a=c.charCodeAt(b-1);if(l!==95&&a===95)return new _.L(r,b);if(l!==45&&a===45)return new _.L(r,b);if((m.mK(l)||m.T5(l))&&m.df(a))return new _.L(r,b);if(m.df(l)&&m.df(a)&&b+1<i){let w=c.charCodeAt(b);if(m.mK(w)||m.T5(w))return new _.L(r,b)}}return new _.L(r,i)}static _deleteWordLeftWhitespace(o,h){let r=o.getLineContent(h.lineNumber),i=h.column-2,c=m.ow(r,i);return c+1<i?new A.e(h.lineNumber,c+2,h.lineNumber,h.column):null}static deleteWordLeft(o,h){let r=o.wordSeparators,i=o.model,c=o.selection,b=o.whitespaceHeuristics;if(!c.isEmpty())return c;if(u.A.isAutoClosingPairDelete(o.autoClosingDelete,o.autoClosingBrackets,o.autoClosingQuotes,o.autoClosingPairs.autoClosingPairsOpenByEnd,o.model,[o.selection],o.autoClosedCharacters)){let D=o.selection.getPosition();return new A.e(D.lineNumber,D.column-1,D.lineNumber,D.column+1)}let l=new _.L(c.positionLineNumber,c.positionColumn),a=l.lineNumber,w=l.column;if(a===1&&w===1)return null;if(b){let D=this._deleteWordLeftWhitespace(i,l);if(D)return D}let E=x._findPreviousWordOnLine(r,i,l);return h===0?E?w=E.start+1:w>1?w=1:(a--,w=i.getLineMaxColumn(a)):(E&&w<=E.end+1&&(E=x._findPreviousWordOnLine(r,i,new _.L(a,E.start+1))),E?w=E.end+1:w>1?w=1:(a--,w=i.getLineMaxColumn(a))),new A.e(a,w,l.lineNumber,l.column)}static deleteInsideWord(o,h,r){if(!r.isEmpty())return r;let i=new _.L(r.positionLineNumber,r.positionColumn);return this._deleteInsideWordWhitespace(h,i)||this._deleteInsideWordDetermineDeleteRange(o,h,i)}static _charAtIsWhitespace(o,h){let r=o.charCodeAt(h);return r===32||r===9}static _deleteInsideWordWhitespace(o,h){let r=o.getLineContent(h.lineNumber),i=r.length;if(i===0)return null;let c=Math.max(h.column-2,0);if(!this._charAtIsWhitespace(r,c))return null;let b=Math.min(h.column-1,i-1);if(!this._charAtIsWhitespace(r,b))return null;for(;c>0&&this._charAtIsWhitespace(r,c-1);)c--;for(;b+1<i&&this._charAtIsWhitespace(r,b+1);)b++;return new A.e(h.lineNumber,c+1,h.lineNumber,b+2)}static _deleteInsideWordDetermineDeleteRange(o,h,r){let i=h.getLineContent(r.lineNumber),c=i.length;if(c===0)return r.lineNumber>1?new A.e(r.lineNumber-1,h.getLineMaxColumn(r.lineNumber-1),r.lineNumber,1):r.lineNumber<h.getLineCount()?new A.e(r.lineNumber,1,r.lineNumber+1,1):new A.e(r.lineNumber,1,r.lineNumber,1);let b=D=>D.start+1<=r.column&&r.column<=D.end+1,l=(D,L)=>(D=Math.min(D,r.column),L=Math.max(L,r.column),new A.e(r.lineNumber,D,r.lineNumber,L)),a=D=>{let L=D.start+1,k=D.end+1,R=!1;for(;k-1<c&&this._charAtIsWhitespace(i,k-1);)R=!0,k++;if(!R)for(;L>1&&this._charAtIsWhitespace(i,L-2);)L--;return l(L,k)},w=x._findPreviousWordOnLine(o,h,r);if(w&&b(w))return a(w);let E=x._findNextWordOnLine(o,h,r);return E&&b(E)?a(E):w&&E?l(w.end+1,E.start+1):w?l(w.start+1,w.end+1):E?l(E.start+1,E.end+1):l(1,c+1)}static _deleteWordPartLeft(o,h){if(!h.isEmpty())return h;let r=h.getPosition(),i=x._moveWordPartLeft(o,r);return new A.e(r.lineNumber,r.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(o,h){let r=o.length;for(let i=h;i<r;i++){let c=o.charAt(i);if(c!==" "&&c!=="	")return i}return r}static _deleteWordRightWhitespace(o,h){let r=o.getLineContent(h.lineNumber),i=h.column-1,c=this._findFirstNonWhitespaceChar(r,i);return i+1<c?new A.e(h.lineNumber,h.column,h.lineNumber,c+1):null}static deleteWordRight(o,h){let r=o.wordSeparators,i=o.model,c=o.selection,b=o.whitespaceHeuristics;if(!c.isEmpty())return c;let l=new _.L(c.positionLineNumber,c.positionColumn),a=l.lineNumber,w=l.column,E=i.getLineCount(),D=i.getLineMaxColumn(a);if(a===E&&w===D)return null;if(b){let k=this._deleteWordRightWhitespace(i,l);if(k)return k}let L=x._findNextWordOnLine(r,i,l);return h===2?L?w=L.end+1:w<D||a===E?w=D:(a++,L=x._findNextWordOnLine(r,i,new _.L(a,1)),w=L?L.start+1:i.getLineMaxColumn(a)):(L&&w>=L.start+1&&(L=x._findNextWordOnLine(r,i,new _.L(a,L.end+1))),L?w=L.start+1:w<D||a===E?w=D:(a++,L=x._findNextWordOnLine(r,i,new _.L(a,1)),w=L?L.start+1:i.getLineMaxColumn(a))),new A.e(a,w,l.lineNumber,l.column)}static _deleteWordPartRight(o,h){if(!h.isEmpty())return h;let r=h.getPosition(),i=x._moveWordPartRight(o,r);return new A.e(r.lineNumber,r.column,i.lineNumber,i.column)}static _createWordAtPosition(o,h,r){let i=new A.e(h,r.start+1,h,r.end+1);return{word:o.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(o,h,r){let i=(0,I.u)(h),c=x._findPreviousWordOnLine(i,o,r);if(c&&c.wordType===1&&c.start<=r.column-1&&r.column-1<=c.end)return x._createWordAtPosition(o,r.lineNumber,c);let b=x._findNextWordOnLine(i,o,r);return b&&b.wordType===1&&b.start<=r.column-1&&r.column-1<=b.end?x._createWordAtPosition(o,r.lineNumber,b):null}static word(o,h,r,i,c){let b=(0,I.u)(o.wordSeparators),l=x._findPreviousWordOnLine(b,h,c),a=x._findNextWordOnLine(b,h,c);if(!i){let k,R;return l&&l.wordType===1&&l.start<=c.column-1&&c.column-1<=l.end?(k=l.start+1,R=l.end+1):a&&a.wordType===1&&a.start<=c.column-1&&c.column-1<=a.end?(k=a.start+1,R=a.end+1):(k=l?l.end+1:1,R=a?a.start+1:h.getLineMaxColumn(c.lineNumber)),new B.rS(new A.e(c.lineNumber,k,c.lineNumber,R),1,0,new _.L(c.lineNumber,R),0)}let w,E;l&&l.wordType===1&&l.start<c.column-1&&c.column-1<l.end?(w=l.start+1,E=l.end+1):a&&a.wordType===1&&a.start<c.column-1&&c.column-1<a.end?(w=a.start+1,E=a.end+1):(w=c.column,E=c.column);let D=c.lineNumber,L;if(r.selectionStart.containsPosition(c))L=r.selectionStart.endColumn;else if(c.isBeforeOrEqual(r.selectionStart.getStartPosition())){L=w;let k=new _.L(D,L);r.selectionStart.containsPosition(k)&&(L=r.selectionStart.endColumn)}else{L=E;let k=new _.L(D,L);r.selectionStart.containsPosition(k)&&(L=r.selectionStart.startColumn)}return r.move(!0,D,L,0)}}class v extends x{static deleteWordPartLeft(o){let h=f([x.deleteWordLeft(o,0),x.deleteWordLeft(o,2),x._deleteWordPartLeft(o.model,o.selection)]);return h.sort(A.e.compareRangesUsingEnds),h[2]}static deleteWordPartRight(o){let h=f([x.deleteWordRight(o,0),x.deleteWordRight(o,2),x._deleteWordPartRight(o.model,o.selection)]);return h.sort(A.e.compareRangesUsingStarts),h[0]}static moveWordPartLeft(o,h,r){let i=f([x.moveWordLeft(o,h,r,0),x.moveWordLeft(o,h,r,2),x._moveWordPartLeft(h,r)]);return i.sort(_.L.compare),i[2]}static moveWordPartRight(o,h,r){let i=f([x.moveWordRight(o,h,r,0),x.moveWordRight(o,h,r,2),x._moveWordPartRight(h,r)]);return i.sort(_.L.compare),i[0]}}function f(d){return d.filter(o=>!!o)}},5343:(ut,Ie,t)=>{"use strict";t.d(Ie,{LM:()=>d,LN:()=>b,Tp:()=>c,Vi:()=>o,rS:()=>i});var m=t(187),B=t(4314),u=t(3860),I=t(9111),_=t(7988),A=t(3158);let x=()=>!0,v=()=>!1,f=l=>l===" "||l==="	";class d{static shouldRecreate(a){return a.hasChanged(139)||a.hasChanged(125)||a.hasChanged(35)||a.hasChanged(74)||a.hasChanged(76)||a.hasChanged(77)||a.hasChanged(5)||a.hasChanged(9)||a.hasChanged(7)||a.hasChanged(8)||a.hasChanged(12)||a.hasChanged(123)||a.hasChanged(48)||a.hasChanged(87)}constructor(a,w,E,D){this.languageConfigurationService=D,this._cursorMoveConfigurationBrand=void 0,this._languageId=a;let L=E.options,k=L.get(139),R=L.get(48);this.readOnly=L.get(87),this.tabSize=w.tabSize,this.indentSize=w.indentSize,this.insertSpaces=w.insertSpaces,this.stickyTabStops=L.get(111),this.lineHeight=R.lineHeight,this.typicalHalfwidthCharacterWidth=R.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(k.height/this.lineHeight)-2),this.useTabStops=L.get(123),this.wordSeparators=L.get(125),this.emptySelectionClipboard=L.get(35),this.copyWithSyntaxHighlighting=L.get(23),this.multiCursorMergeOverlapping=L.get(74),this.multiCursorPaste=L.get(76),this.multiCursorLimit=L.get(77),this.autoClosingBrackets=L.get(5),this.autoClosingQuotes=L.get(9),this.autoClosingDelete=L.get(7),this.autoClosingOvertype=L.get(8),this.autoSurround=L.get(12),this.autoIndent=L.get(10),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(a,this.autoClosingQuotes,!0),bracket:this._getShouldAutoClose(a,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(a).getAutoClosingPairs();let O=this.languageConfigurationService.getLanguageConfiguration(a).getSurroundingPairs();if(O)for(let $ of O)this.surroundingPairs[$.open]=$.close}get electricChars(){var a;if(!this._electricChars){this._electricChars={};let w=(a=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||a===void 0?void 0:a.getElectricCharacters();if(w)for(let E of w)this._electricChars[E]=!0}return this._electricChars}onElectricCharacter(a,w,E){let D=(0,I.wH)(w,E-1),L=this.languageConfigurationService.getLanguageConfiguration(D.languageId).electricCharacter;return L?L.onElectricCharacter(a,D,E-D.firstCharOffset):null}normalizeIndentation(a){return(0,A.x)(a,this.indentSize,this.insertSpaces)}_getShouldAutoClose(a,w,E){switch(w){case"beforeWhitespace":return f;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(a,E);case"always":return x;case"never":return v}}_getLanguageDefinedShouldAutoClose(a,w){let E=this.languageConfigurationService.getLanguageConfiguration(a).getAutoCloseBeforeSet(w);return D=>E.indexOf(D)!==-1}visibleColumnFromColumn(a,w){return _.i.visibleColumnFromColumn(a.getLineContent(w.lineNumber),w.column,this.tabSize)}columnFromVisibleColumn(a,w,E){let D=_.i.columnFromVisibleColumn(a.getLineContent(w),E,this.tabSize),L=a.getLineMinColumn(w);if(D<L)return L;let k=a.getLineMaxColumn(w);return D>k?k:D}}class o{static fromModelState(a){return new h(a)}static fromViewState(a){return new r(a)}static fromModelSelection(a){let w=u.Y.liftSelection(a),E=new i(B.e.fromPositions(w.getSelectionStart()),0,0,w.getPosition(),0);return o.fromModelState(E)}static fromModelSelections(a){let w=[];for(let E=0,D=a.length;E<D;E++)w[E]=this.fromModelSelection(a[E]);return w}constructor(a,w){this._cursorStateBrand=void 0,this.modelState=a,this.viewState=w}equals(a){return this.viewState.equals(a.viewState)&&this.modelState.equals(a.modelState)}}class h{constructor(a){this.modelState=a,this.viewState=null}}class r{constructor(a){this.modelState=null,this.viewState=a}}class i{constructor(a,w,E,D,L){this.selectionStart=a,this.selectionStartKind=w,this.selectionStartLeftoverVisibleColumns=E,this.position=D,this.leftoverVisibleColumns=L,this._singleCursorStateBrand=void 0,this.selection=i._computeSelection(this.selectionStart,this.position)}equals(a){return this.selectionStartLeftoverVisibleColumns===a.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===a.leftoverVisibleColumns&&this.selectionStartKind===a.selectionStartKind&&this.position.equals(a.position)&&this.selectionStart.equalsRange(a.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(a,w,E,D){return a?new i(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new m.L(w,E),D):new i(new B.e(w,E,w,E),0,D,new m.L(w,E),D)}static _computeSelection(a,w){return a.isEmpty()||!w.isBeforeOrEqual(a.getStartPosition())?u.Y.fromPositions(a.getStartPosition(),w):u.Y.fromPositions(a.getEndPosition(),w)}}class c{constructor(a,w,E){this._editOperationResultBrand=void 0,this.type=a,this.commands=w,this.shouldPushStackElementBefore=E.shouldPushStackElementBefore,this.shouldPushStackElementAfter=E.shouldPushStackElementAfter}}function b(l){return l==="'"||l==='"'||l==="`"}},652:(ut,Ie,t)=>{"use strict";t.d(Ie,{f0:()=>B,hZ:()=>m,iy:()=>u});class m{constructor(_,A){this.changes=_,this.hitTimeout=A}}class B{constructor(_,A,x){this.originalRange=_,this.modifiedRange=A,this.innerChanges=x}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}get changedLineCount(){return Math.max(this.originalRange.length,this.modifiedRange.length)}}class u{constructor(_,A){this.originalRange=_,this.modifiedRange=A}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}}},653:(ut,Ie,t)=>{"use strict";t.d(Ie,{p:()=>m});class m{constructor(u,I,_,A,x,v){this.id=u,this.label=I,this.alias=_,this._precondition=A,this._run=x,this._contextKeyService=v}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(u){return this.isSupported()?this._run(u):Promise.resolve(void 0)}}},6518:(ut,Ie,t)=>{"use strict";t.d(Ie,{g:()=>m});let m={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}},9102:(ut,Ie,t)=>{"use strict";t.d(Ie,{u:()=>m});var m,B=t(3580),u=t(3983);(function(I){I.editorSimpleInput=new u.uy("editorSimpleInput",!1,!0),I.editorTextFocus=new u.uy("editorTextFocus",!1,B.NC("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),I.focus=new u.uy("editorFocus",!1,B.NC("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),I.textInputFocus=new u.uy("textInputFocus",!1,B.NC("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),I.readOnly=new u.uy("editorReadonly",!1,B.NC("editorReadonly","Whether the editor is read only")),I.inDiffEditor=new u.uy("inDiffEditor",!1,B.NC("inDiffEditor","Whether the context is a diff editor")),I.columnSelection=new u.uy("editorColumnSelection",!1,B.NC("editorColumnSelection","Whether `editor.columnSelection` is enabled")),I.writable=I.readOnly.toNegated(),I.hasNonEmptySelection=new u.uy("editorHasSelection",!1,B.NC("editorHasSelection","Whether the editor has text selected")),I.hasOnlyEmptySelection=I.hasNonEmptySelection.toNegated(),I.hasMultipleSelections=new u.uy("editorHasMultipleSelections",!1,B.NC("editorHasMultipleSelections","Whether the editor has multiple selections")),I.hasSingleSelection=I.hasMultipleSelections.toNegated(),I.tabMovesFocus=new u.uy("editorTabMovesFocus",!1,B.NC("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),I.tabDoesNotMoveFocus=I.tabMovesFocus.toNegated(),I.isInWalkThroughSnippet=new u.uy("isInEmbeddedEditor",!1,!0),I.canUndo=new u.uy("canUndo",!1,!0),I.canRedo=new u.uy("canRedo",!1,!0),I.hoverVisible=new u.uy("editorHoverVisible",!1,B.NC("editorHoverVisible","Whether the editor hover is visible")),I.hoverFocused=new u.uy("editorHoverFocused",!1,B.NC("editorHoverFocused","Whether the editor hover is focused")),I.stickyScrollFocused=new u.uy("stickyScrollFocused",!1,B.NC("stickyScrollFocused","Whether the sticky scroll is focused")),I.stickyScrollVisible=new u.uy("stickyScrollVisible",!1,B.NC("stickyScrollVisible","Whether the sticky scroll is visible")),I.standaloneColorPickerVisible=new u.uy("standaloneColorPickerVisible",!1,B.NC("standaloneColorPickerVisible","Whether the standalone color picker is visible")),I.standaloneColorPickerFocused=new u.uy("standaloneColorPickerFocused",!1,B.NC("standaloneColorPickerFocused","Whether the standalone color picker is focused")),I.inCompositeEditor=new u.uy("inCompositeEditor",void 0,B.NC("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),I.notInCompositeEditor=I.inCompositeEditor.toNegated(),I.languageId=new u.uy("editorLangId","",B.NC("editorLangId","The language identifier of the editor")),I.hasCompletionItemProvider=new u.uy("editorHasCompletionItemProvider",!1,B.NC("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),I.hasCodeActionsProvider=new u.uy("editorHasCodeActionsProvider",!1,B.NC("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),I.hasCodeLensProvider=new u.uy("editorHasCodeLensProvider",!1,B.NC("editorHasCodeLensProvider","Whether the editor has a code lens provider")),I.hasDefinitionProvider=new u.uy("editorHasDefinitionProvider",!1,B.NC("editorHasDefinitionProvider","Whether the editor has a definition provider")),I.hasDeclarationProvider=new u.uy("editorHasDeclarationProvider",!1,B.NC("editorHasDeclarationProvider","Whether the editor has a declaration provider")),I.hasImplementationProvider=new u.uy("editorHasImplementationProvider",!1,B.NC("editorHasImplementationProvider","Whether the editor has an implementation provider")),I.hasTypeDefinitionProvider=new u.uy("editorHasTypeDefinitionProvider",!1,B.NC("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),I.hasHoverProvider=new u.uy("editorHasHoverProvider",!1,B.NC("editorHasHoverProvider","Whether the editor has a hover provider")),I.hasDocumentHighlightProvider=new u.uy("editorHasDocumentHighlightProvider",!1,B.NC("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),I.hasDocumentSymbolProvider=new u.uy("editorHasDocumentSymbolProvider",!1,B.NC("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),I.hasReferenceProvider=new u.uy("editorHasReferenceProvider",!1,B.NC("editorHasReferenceProvider","Whether the editor has a reference provider")),I.hasRenameProvider=new u.uy("editorHasRenameProvider",!1,B.NC("editorHasRenameProvider","Whether the editor has a rename provider")),I.hasSignatureHelpProvider=new u.uy("editorHasSignatureHelpProvider",!1,B.NC("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),I.hasInlayHintsProvider=new u.uy("editorHasInlayHintsProvider",!1,B.NC("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),I.hasDocumentFormattingProvider=new u.uy("editorHasDocumentFormattingProvider",!1,B.NC("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),I.hasDocumentSelectionFormattingProvider=new u.uy("editorHasDocumentSelectionFormattingProvider",!1,B.NC("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),I.hasMultipleDocumentFormattingProvider=new u.uy("editorHasMultipleDocumentFormattingProvider",!1,B.NC("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),I.hasMultipleDocumentSelectionFormattingProvider=new u.uy("editorHasMultipleDocumentSelectionFormattingProvider",!1,B.NC("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(m||(m={}))},637:(ut,Ie,t)=>{"use strict";t.d(Ie,{n:()=>u,y:()=>B});let m=[];function B(I){m.push(I)}function u(){return m.slice(0)}},5797:(ut,Ie,t)=>{"use strict";t.d(Ie,{N:()=>m});class m{static getLanguageId(u){return(255&u)>>>0}static getTokenType(u){return(768&u)>>>8}static containsBalancedBrackets(u){return(1024&u)!=0}static getFontStyle(u){return(30720&u)>>>11}static getForeground(u){return(16744448&u)>>>15}static getBackground(u){return(4278190080&u)>>>24}static getClassNameFromMetadata(u){let I="mtk"+this.getForeground(u),_=this.getFontStyle(u);return 1&_&&(I+=" mtki"),2&_&&(I+=" mtkb"),4&_&&(I+=" mtku"),8&_&&(I+=" mtks"),I}static getInlineStyleFromMetadata(u,I){let _=this.getForeground(u),A=this.getFontStyle(u),x=`color: ${I[_]};`;1&A&&(x+="font-style: italic;"),2&A&&(x+="font-weight: bold;");let v="";return 4&A&&(v+=" underline"),8&A&&(v+=" line-through"),v&&(x+=`text-decoration:${v};`),x}static getPresentationFromMetadata(u){let I=this.getForeground(u),_=this.getFontStyle(u);return{foreground:I,italic:!!(1&_),bold:!!(2&_),underline:!!(4&_),strikethrough:!!(8&_)}}}},6887:(ut,Ie,t)=>{"use strict";t.d(Ie,{mY:()=>A,gX:()=>m,MY:()=>I,DI:()=>l,AD:()=>E,gl:()=>x,bw:()=>B,MO:()=>D,ln:()=>a,WW:()=>u,uZ:()=>_,WU:()=>c,RW:()=>L,hG:()=>b,vx:()=>w});var m,B,u,I,_,A,x,v=t(3046),f=t(666),d=t(4314),o=t(4669),h=t(5976),r=function(k,R,O,$){return new(O||(O=Promise))(function(N,T){function C(j){try{K($.next(j))}catch(F){T(F)}}function W(j){try{K($.throw(j))}catch(F){T(F)}}function K(j){var F;j.done?N(j.value):(F=j.value,F instanceof O?F:new O(function(H){H(F)})).then(C,W)}K(($=$.apply(k,R||[])).next())})};class i extends h.JT{get isResolved(){return this._isResolved}constructor(R,O,$){super(),this._registry=R,this._languageId=O,this._factory=$,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return r(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return r(this,void 0,void 0,function*(){let R=yield this._factory.tokenizationSupport;this._isResolved=!0,R&&!this._isDisposed&&this._register(this._registry.register(this._languageId,R))})}}class c{constructor(R,O,$){this.offset=R,this.type=O,this.language=$,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}class b{constructor(R,O){this.tokens=R,this.endState=O,this._tokenizationResultBrand=void 0}}class l{constructor(R,O){this.tokens=R,this.endState=O,this._encodedTokenizationResultBrand=void 0}}(function(k){let R=new Map;R.set(0,v.l.symbolMethod),R.set(1,v.l.symbolFunction),R.set(2,v.l.symbolConstructor),R.set(3,v.l.symbolField),R.set(4,v.l.symbolVariable),R.set(5,v.l.symbolClass),R.set(6,v.l.symbolStruct),R.set(7,v.l.symbolInterface),R.set(8,v.l.symbolModule),R.set(9,v.l.symbolProperty),R.set(10,v.l.symbolEvent),R.set(11,v.l.symbolOperator),R.set(12,v.l.symbolUnit),R.set(13,v.l.symbolValue),R.set(15,v.l.symbolEnum),R.set(14,v.l.symbolConstant),R.set(15,v.l.symbolEnum),R.set(16,v.l.symbolEnumMember),R.set(17,v.l.symbolKeyword),R.set(27,v.l.symbolSnippet),R.set(18,v.l.symbolText),R.set(19,v.l.symbolColor),R.set(20,v.l.symbolFile),R.set(21,v.l.symbolReference),R.set(22,v.l.symbolCustomColor),R.set(23,v.l.symbolFolder),R.set(24,v.l.symbolTypeParameter),R.set(25,v.l.account),R.set(26,v.l.issues),k.toIcon=function($){let N=R.get($);return N||(console.info("No codicon found for CompletionItemKind "+$),N=v.l.symbolProperty),N};let O=new Map;O.set("method",0),O.set("function",1),O.set("constructor",2),O.set("field",3),O.set("variable",4),O.set("class",5),O.set("struct",6),O.set("interface",7),O.set("module",8),O.set("property",9),O.set("event",10),O.set("operator",11),O.set("unit",12),O.set("value",13),O.set("constant",14),O.set("enum",15),O.set("enum-member",16),O.set("enumMember",16),O.set("keyword",17),O.set("snippet",27),O.set("text",18),O.set("color",19),O.set("file",20),O.set("reference",21),O.set("customcolor",22),O.set("folder",23),O.set("type-parameter",24),O.set("typeParameter",24),O.set("account",25),O.set("issue",26),k.fromString=function($,N){let T=O.get($);return T!==void 0||N||(T=9),T}})(m||(m={})),function(k){k[k.Automatic=0]="Automatic",k[k.Explicit=1]="Explicit"}(B||(B={}));class a{constructor(R,O,$,N){this.range=R,this.text=O,this.completionKind=$,this.isSnippetText=N}equals(R){return d.e.lift(this.range).equalsRange(R.range)&&this.text===R.text&&this.completionKind===R.completionKind&&this.isSnippetText===R.isSnippetText}}function w(k){return k&&f.o.isUri(k.uri)&&d.e.isIRange(k.range)&&(d.e.isIRange(k.originSelectionRange)||d.e.isIRange(k.targetSelectionRange))}(function(k){k[k.Invoke=1]="Invoke",k[k.TriggerCharacter=2]="TriggerCharacter",k[k.ContentChange=3]="ContentChange"})(u||(u={})),function(k){k[k.Text=0]="Text",k[k.Read=1]="Read",k[k.Write=2]="Write"}(I||(I={})),function(k){let R=new Map;R.set(0,v.l.symbolFile),R.set(1,v.l.symbolModule),R.set(2,v.l.symbolNamespace),R.set(3,v.l.symbolPackage),R.set(4,v.l.symbolClass),R.set(5,v.l.symbolMethod),R.set(6,v.l.symbolProperty),R.set(7,v.l.symbolField),R.set(8,v.l.symbolConstructor),R.set(9,v.l.symbolEnum),R.set(10,v.l.symbolInterface),R.set(11,v.l.symbolFunction),R.set(12,v.l.symbolVariable),R.set(13,v.l.symbolConstant),R.set(14,v.l.symbolString),R.set(15,v.l.symbolNumber),R.set(16,v.l.symbolBoolean),R.set(17,v.l.symbolArray),R.set(18,v.l.symbolObject),R.set(19,v.l.symbolKey),R.set(20,v.l.symbolNull),R.set(21,v.l.symbolEnumMember),R.set(22,v.l.symbolStruct),R.set(23,v.l.symbolEvent),R.set(24,v.l.symbolOperator),R.set(25,v.l.symbolTypeParameter),k.toIcon=function(O){let $=R.get(O);return $||(console.info("No codicon found for SymbolKind "+O),$=v.l.symbolProperty),$}}(_||(_={}));class E{static fromValue(R){switch(R){case"comment":return E.Comment;case"imports":return E.Imports;case"region":return E.Region}return new E(R)}constructor(R){this.value=R}}E.Comment=new E("comment"),E.Imports=new E("imports"),E.Region=new E("region"),function(k){k.is=function(R){return!(!R||typeof R!="object")&&typeof R.id=="string"&&typeof R.title=="string"}}(A||(A={})),function(k){k[k.Type=1]="Type",k[k.Parameter=2]="Parameter"}(x||(x={}));class D{constructor(R){this.createSupport=R,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(R=>{R&&R.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}let L=new class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new o.Q5,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(k){this._onDidChange.fire({changedLanguages:k,changedColorMap:!1})}register(k,R){return this._tokenizationSupports.set(k,R),this.handleChange([k]),(0,h.OF)(()=>{this._tokenizationSupports.get(k)===R&&(this._tokenizationSupports.delete(k),this.handleChange([k]))})}get(k){return this._tokenizationSupports.get(k)||null}registerFactory(k,R){var O;(O=this._factories.get(k))===null||O===void 0||O.dispose();let $=new i(this,k,R);return this._factories.set(k,$),(0,h.OF)(()=>{let N=this._factories.get(k);N&&N===$&&(this._factories.delete(k),N.dispose())})}getOrCreate(k){return r(this,void 0,void 0,function*(){let R=this.get(k);if(R)return R;let O=this._factories.get(k);return!O||O.isResolved?null:(yield O.resolve(),this.get(k))})}isResolved(k){if(this.get(k))return!0;let R=this._factories.get(k);return!(R&&!R.isResolved)}setColorMap(k){this._colorMap=k,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}},5383:(ut,Ie,t)=>{"use strict";t.d(Ie,{$9:()=>v,UF:()=>x,n8:()=>A,r7:()=>_,tI:()=>f});var m=t(7295),B=t(9119),u=t(9111),I=t(1381);function _(d,o,h,r=!0,i){if(d<4)return null;let c=i.getLanguageConfiguration(o.tokenization.getLanguageId()).indentRulesSupport;if(!c)return null;if(h<=1)return{indentation:"",action:null};for(let a=h-1;a>0&&o.getLineContent(a)==="";a--)if(a===1)return{indentation:"",action:null};let b=function(a,w,E){let D=a.tokenization.getLanguageIdAtPosition(w,0);if(w>1){let L,k=-1;for(L=w-1;L>=1;L--){if(a.tokenization.getLanguageIdAtPosition(L,0)!==D)return k;let R=a.getLineContent(L);if(!E.shouldIgnore(R)&&!/^\s+$/.test(R)&&R!=="")return L;k=L}}return-1}(o,h,c);if(b<0)return null;if(b<1)return{indentation:"",action:null};let l=o.getLineContent(b);if(c.shouldIncrease(l)||c.shouldIndentNextLine(l))return{indentation:m.V8(l),action:B.wU.Indent,line:b};if(c.shouldDecrease(l))return{indentation:m.V8(l),action:null,line:b};{if(b===1)return{indentation:m.V8(o.getLineContent(b)),action:null,line:b};let a=b-1,w=c.getIndentMetadata(o.getLineContent(a));if(!(3&w)&&4&w){let E=0;for(let D=a-1;D>0;D--)if(!c.shouldIndentNextLine(o.getLineContent(D))){E=D;break}return{indentation:m.V8(o.getLineContent(E+1)),action:null,line:E+1}}if(r)return{indentation:m.V8(o.getLineContent(b)),action:null,line:b};for(let E=b;E>0;E--){let D=o.getLineContent(E);if(c.shouldIncrease(D))return{indentation:m.V8(D),action:B.wU.Indent,line:E};if(c.shouldIndentNextLine(D)){let L=0;for(let k=E-1;k>0;k--)if(!c.shouldIndentNextLine(o.getLineContent(E))){L=k;break}return{indentation:m.V8(o.getLineContent(L+1)),action:null,line:L+1}}if(c.shouldDecrease(D))return{indentation:m.V8(D),action:null,line:E}}return{indentation:m.V8(o.getLineContent(1)),action:null,line:1}}}function A(d,o,h,r,i,c){if(d<4)return null;let b=c.getLanguageConfiguration(h);if(!b)return null;let l=c.getLanguageConfiguration(h).indentRulesSupport;if(!l)return null;let a=_(d,o,r,void 0,c),w=o.getLineContent(r);if(a){let E=a.line;if(E!==void 0){let D=!0;for(let L=E;L<r-1;L++)if(!/^\s*$/.test(o.getLineContent(L))){D=!1;break}if(D){let L=b.onEnter(d,"",o.getLineContent(E),"");if(L){let k=m.V8(o.getLineContent(E));return L.removeText&&(k=k.substring(0,k.length-L.removeText)),L.indentAction===B.wU.Indent||L.indentAction===B.wU.IndentOutdent?k=i.shiftIndent(k):L.indentAction===B.wU.Outdent&&(k=i.unshiftIndent(k)),l.shouldDecrease(w)&&(k=i.unshiftIndent(k)),L.appendText&&(k+=L.appendText),m.V8(k)}}}return l.shouldDecrease(w)?a.action===B.wU.Indent?a.indentation:i.unshiftIndent(a.indentation):a.action===B.wU.Indent?i.shiftIndent(a.indentation):a.indentation}return null}function x(d,o,h,r,i){if(d<4)return null;o.tokenization.forceTokenization(h.startLineNumber);let c=o.tokenization.getLineTokens(h.startLineNumber),b=(0,u.wH)(c,h.startColumn-1),l=b.getLineContent(),a,w,E=!1;b.firstCharOffset>0&&c.getLanguageId(0)!==b.languageId?(E=!0,a=l.substr(0,h.startColumn-1-b.firstCharOffset)):a=c.getLineContent().substring(0,h.startColumn-1),w=h.isEmpty()?l.substr(h.startColumn-1-b.firstCharOffset):(0,I.n2)(o,h.endLineNumber,h.endColumn).getLineContent().substr(h.endColumn-1-b.firstCharOffset);let D=i.getLanguageConfiguration(b.languageId).indentRulesSupport;if(!D)return null;let L=a,k=m.V8(a),R={tokenization:{getLineTokens:T=>o.tokenization.getLineTokens(T),getLanguageId:()=>o.getLanguageId(),getLanguageIdAtPosition:(T,C)=>o.getLanguageIdAtPosition(T,C)},getLineContent:T=>T===h.startLineNumber?L:o.getLineContent(T)},O=m.V8(c.getLineContent()),$=_(d,R,h.startLineNumber+1,void 0,i);if(!$){let T=E?O:k;return{beforeEnter:T,afterEnter:T}}let N=E?O:$.indentation;return $.action===B.wU.Indent&&(N=r.shiftIndent(N)),D.shouldDecrease(w)&&(N=r.unshiftIndent(N)),{beforeEnter:E?O:k,afterEnter:N}}function v(d,o,h,r,i,c){if(d<4)return null;let b=(0,I.n2)(o,h.startLineNumber,h.startColumn);if(b.firstCharOffset)return null;let l=c.getLanguageConfiguration(b.languageId).indentRulesSupport;if(!l)return null;let a=b.getLineContent(),w=a.substr(0,h.startColumn-1-b.firstCharOffset),E;if(E=h.isEmpty()?a.substr(h.startColumn-1-b.firstCharOffset):(0,I.n2)(o,h.endLineNumber,h.endColumn).getLineContent().substr(h.endColumn-1-b.firstCharOffset),!l.shouldDecrease(w+E)&&l.shouldDecrease(w+r+E)){let D=_(d,o,h.startLineNumber,!1,c);if(!D)return null;let L=D.indentation;return D.action!==B.wU.Indent&&(L=i.unshiftIndent(L)),L}return null}function f(d,o,h){let r=h.getLanguageConfiguration(d.getLanguageId()).indentRulesSupport;return r?o<1||o>d.getLineCount()?null:r.getIndentMetadata(d.getLineContent(o)):null}},1615:(ut,Ie,t)=>{"use strict";t.d(Ie,{A:()=>u});var m=t(9119),B=t(1381);function u(I,_,A,x){let v=(0,B.n2)(_,A.startLineNumber,A.startColumn),f=x.getLanguageConfiguration(v.languageId);if(!f)return null;let d=v.getLineContent(),o=d.substr(0,A.startColumn-1-v.firstCharOffset),h;h=A.isEmpty()?d.substr(A.startColumn-1-v.firstCharOffset):(0,B.n2)(_,A.endLineNumber,A.endColumn).getLineContent().substr(A.endColumn-1-v.firstCharOffset);let r="";if(A.startLineNumber>1&&v.firstCharOffset===0){let w=(0,B.n2)(_,A.startLineNumber-1);w.languageId===v.languageId&&(r=w.getLineContent())}let i=f.onEnter(I,r,o,h);if(!i)return null;let c=i.indentAction,b=i.appendText,l=i.removeText||0;b?c===m.wU.Indent&&(b="	"+b):b=c===m.wU.Indent||c===m.wU.IndentOutdent?"	":"";let a=(0,B.u0)(_,A.startLineNumber,A.startColumn);return l&&(a=a.substring(0,a.length-l)),{indentAction:c,appendText:b,removeText:l,indentation:a}}},2042:(ut,Ie,t)=>{"use strict";t.d(Ie,{O:()=>m});let m=(0,t(2065).yh)("languageService")},9119:(ut,Ie,t)=>{"use strict";var m;t.d(Ie,{V6:()=>B,c$:()=>u,wU:()=>m}),function(_){_[_.None=0]="None",_[_.Indent=1]="Indent",_[_.IndentOutdent=2]="IndentOutdent",_[_.Outdent=3]="Outdent"}(m||(m={}));class B{constructor(A){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=A.open,this.close=A.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(A.notIn))for(let x=0,v=A.notIn.length;x<v;x++)switch(A.notIn[x]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}isOK(A){switch(A){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(A,x){if(A.getTokenCount()===0)return!0;let v=A.findTokenIndexAtOffset(x-2),f=A.getStandardTokenType(v);return this.isOK(f)}_findNeutralCharacterInRange(A,x){for(let v=A;v<=x;v++){let f=String.fromCharCode(v);if(!this.open.includes(f)&&!this.close.includes(f))return f}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class u{constructor(A){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let x of A)I(this.autoClosingPairsOpenByStart,x.open.charAt(0),x),I(this.autoClosingPairsOpenByEnd,x.open.charAt(x.open.length-1),x),I(this.autoClosingPairsCloseByStart,x.close.charAt(0),x),I(this.autoClosingPairsCloseByEnd,x.close.charAt(x.close.length-1),x),x.close.length===1&&x.open.length===1&&I(this.autoClosingPairsCloseSingleChar,x.close,x)}}function I(_,A,x){_.has(A)?_.get(A).push(x):_.set(A,[x])}},1381:(ut,Ie,t)=>{"use strict";t.d(Ie,{c_:()=>T,u0:()=>j,n2:()=>F});var m=t(4669),B=t(5976),u=t(7295),I=t(270),_=t(9119),A=t(9111);class x{constructor(re){if(re.autoClosingPairs?this._autoClosingPairs=re.autoClosingPairs.map(ne=>new _.V6(ne)):re.brackets?this._autoClosingPairs=re.brackets.map(ne=>new _.V6({open:ne[0],close:ne[1]})):this._autoClosingPairs=[],re.__electricCharacterSupport&&re.__electricCharacterSupport.docComment){let ne=re.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new _.V6({open:ne.open,close:ne.close||""}))}this._autoCloseBeforeForQuotes=typeof re.autoCloseBefore=="string"?re.autoCloseBefore:x.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof re.autoCloseBefore=="string"?re.autoCloseBefore:x.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=re.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(re){return re?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}x.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,x.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;var v=t(9488),f=t(4302);class d{constructor(re){this._richEditBrackets=re}getElectricCharacters(){let re=[];if(this._richEditBrackets)for(let ne of this._richEditBrackets.brackets)for(let ie of ne.close){let se=ie.charAt(ie.length-1);re.push(se)}return(0,v.EB)(re)}onElectricCharacter(re,ne,ie){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let se=ne.findTokenIndexAtOffset(ie-1);if((0,A.Bu)(ne.getStandardTokenType(se)))return null;let ce=this._richEditBrackets.reversedRegex,be=ne.getLineContent().substring(0,ie-1)+re,de=f.Vr.findPrevBracketInRange(ce,1,be,0,be.length);if(!de)return null;let U=be.substring(de.startColumn-1,de.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[U])return null;let ue=ne.getActualLineContentBefore(de.startColumn-1);return/^\s*$/.test(ue)?{matchOpenBracket:U}:null}}function o(p){return p.global&&(p.lastIndex=0),!0}class h{constructor(re){this._indentationRules=re}shouldIncrease(re){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&o(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(re))}shouldDecrease(re){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&o(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(re))}shouldIndentNextLine(re){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&o(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(re))}shouldIgnore(re){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&o(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(re))}getIndentMetadata(re){let ne=0;return this.shouldIncrease(re)&&(ne+=1),this.shouldDecrease(re)&&(ne+=2),this.shouldIndentNextLine(re)&&(ne+=4),this.shouldIgnore(re)&&(ne+=8),ne}}var r=t(7301);class i{constructor(re){(re=re||{}).brackets=re.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],re.brackets.forEach(ne=>{let ie=i._createOpenBracketRegExp(ne[0]),se=i._createCloseBracketRegExp(ne[1]);ie&&se&&this._brackets.push({open:ne[0],openRegExp:ie,close:ne[1],closeRegExp:se})}),this._regExpRules=re.onEnterRules||[]}onEnter(re,ne,ie,se){if(re>=3)for(let ce=0,be=this._regExpRules.length;ce<be;ce++){let de=this._regExpRules[ce];if([{reg:de.beforeText,text:ie},{reg:de.afterText,text:se},{reg:de.previousLineText,text:ne}].every(U=>!U.reg||(U.reg.lastIndex=0,U.reg.test(U.text))))return de.action}if(re>=2&&ie.length>0&&se.length>0)for(let ce=0,be=this._brackets.length;ce<be;ce++){let de=this._brackets[ce];if(de.openRegExp.test(ie)&&de.closeRegExp.test(se))return{indentAction:_.wU.IndentOutdent}}if(re>=2&&ie.length>0){for(let ce=0,be=this._brackets.length;ce<be;ce++)if(this._brackets[ce].openRegExp.test(ie))return{indentAction:_.wU.Indent}}return null}static _createOpenBracketRegExp(re){let ne=u.ec(re);return/\B/.test(ne.charAt(0))||(ne="\\b"+ne),ne+="\\s*$",i._safeRegExp(ne)}static _createCloseBracketRegExp(re){let ne=u.ec(re);return/\B/.test(ne.charAt(ne.length-1))||(ne+="\\b"),ne="^\\s*"+ne,i._safeRegExp(ne)}static _safeRegExp(re){try{return new RegExp(re)}catch(ne){return(0,r.dL)(ne),null}}}var c=t(2065),b=t(3108),l=t(2042),a=t(5026),w=t(8801),E=t(701);class D{constructor(re,ne){this.languageId=re;let ie=ne.brackets?L(ne.brackets):[],se=new E.b(de=>{let U=new Set;return{info:new R(this,de,U),closing:U}}),ce=new E.b(de=>{let U=new Set,ue=new Set;return{info:new O(this,de,U,ue),opening:U,openingColorized:ue}});for(let[de,U]of ie){let ue=se.get(de),ve=ce.get(U);ue.closing.add(ve.info),ve.opening.add(ue.info)}let be=ne.colorizedBracketPairs?L(ne.colorizedBracketPairs):ie.filter(de=>!(de[0]==="<"&&de[1]===">"));for(let[de,U]of be){let ue=se.get(de),ve=ce.get(U);ue.closing.add(ve.info),ve.openingColorized.add(ue.info),ve.opening.add(ue.info)}this._openingBrackets=new Map([...se.cachedValues].map(([de,U])=>[de,U.info])),this._closingBrackets=new Map([...ce.cachedValues].map(([de,U])=>[de,U.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(re){return this._openingBrackets.get(re)}getClosingBracketInfo(re){return this._closingBrackets.get(re)}getBracketInfo(re){return this.getOpeningBracketInfo(re)||this.getClosingBracketInfo(re)}}function L(p){return p.filter(([re,ne])=>re!==""&&ne!=="")}class k{constructor(re,ne){this.config=re,this.bracketText=ne}get languageId(){return this.config.languageId}}class R extends k{constructor(re,ne,ie){super(re,ne),this.openedBrackets=ie,this.isOpeningBracket=!0}}class O extends k{constructor(re,ne,ie,se){super(re,ne),this.openingBrackets=ie,this.openingColorizedBrackets=se,this.isOpeningBracket=!1}closes(re){return re.config===this.config&&this.openingBrackets.has(re)}closesColorized(re){return re.config===this.config&&this.openingColorizedBrackets.has(re)}getOpeningBrackets(){return[...this.openingBrackets]}}var $=function(p,re){return function(ne,ie){re(ne,ie,p)}};class N{constructor(re){this.languageId=re}affects(re){return!this.languageId||this.languageId===re}}let T=(0,c.yh)("languageConfigurationService"),C=class extends B.JT{constructor(p,re){super(),this.configurationService=p,this.languageService=re,this._registry=this._register(new fe),this.onDidChangeEmitter=this._register(new m.Q5),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;let ne=new Set(Object.values(W));this._register(this.configurationService.onDidChangeConfiguration(ie=>{let se=ie.change.keys.some(be=>ne.has(be)),ce=ie.change.overrides.filter(([be,de])=>de.some(U=>ne.has(U))).map(([be])=>be);if(se)this.configurations.clear(),this.onDidChangeEmitter.fire(new N(void 0));else for(let be of ce)this.languageService.isRegisteredLanguageId(be)&&(this.configurations.delete(be),this.onDidChangeEmitter.fire(new N(be)))})),this._register(this._registry.onDidChange(ie=>{this.configurations.delete(ie.languageId),this.onDidChangeEmitter.fire(new N(ie.languageId))}))}register(p,re,ne){return this._registry.register(p,re,ne)}getLanguageConfiguration(p){let re=this.configurations.get(p);return re||(re=function(ne,ie,se,ce){let be=ie.getLanguageConfiguration(ne);if(!be){if(!ce.isRegisteredLanguageId(ne))return new q(ne,{});be=new q(ne,{})}let de=function(ue,ve){let X=ve.getValue(W.brackets,{overrideIdentifier:ue}),ye=ve.getValue(W.colorizedBracketPairs,{overrideIdentifier:ue});return{brackets:K(X),colorizedBracketPairs:K(ye)}}(be.languageId,se),U=z([be.underlyingConfig,de]);return new q(be.languageId,U)}(p,this._registry,this.configurationService,this.languageService),this.configurations.set(p,re)),re}};C=function(p,re,ne,ie){var se,ce=arguments.length,be=ce<3?re:ie===null?ie=Object.getOwnPropertyDescriptor(re,ne):ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")be=Reflect.decorate(p,re,ne,ie);else for(var de=p.length-1;de>=0;de--)(se=p[de])&&(be=(ce<3?se(be):ce>3?se(re,ne,be):se(re,ne))||be);return ce>3&&be&&Object.defineProperty(re,ne,be),be}([$(0,b.Ui),$(1,l.O)],C);let W={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function K(p){if(Array.isArray(p))return p.map(re=>{if(Array.isArray(re)&&re.length===2)return[re[0],re[1]]}).filter(re=>!!re)}function j(p,re,ne){let ie=p.getLineContent(re),se=u.V8(ie);return se.length>ne-1&&(se=se.substring(0,ne-1)),se}function F(p,re,ne){p.tokenization.forceTokenization(re);let ie=p.tokenization.getLineTokens(re),se=ne===void 0?p.getLineMaxColumn(re)-1:ne-1;return(0,A.wH)(ie,se)}class H{constructor(re){this.languageId=re,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(re,ne){let ie=new J(re,ne,++this._order);return this._entries.push(ie),this._resolved=null,(0,B.OF)(()=>{for(let se=0;se<this._entries.length;se++)if(this._entries[se]===ie){this._entries.splice(se,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let re=this._resolve();re&&(this._resolved=new q(this.languageId,re))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(J.cmp),z(this._entries.map(re=>re.configuration)))}}function z(p){let re={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let ne of p)re={comments:ne.comments||re.comments,brackets:ne.brackets||re.brackets,wordPattern:ne.wordPattern||re.wordPattern,indentationRules:ne.indentationRules||re.indentationRules,onEnterRules:ne.onEnterRules||re.onEnterRules,autoClosingPairs:ne.autoClosingPairs||re.autoClosingPairs,surroundingPairs:ne.surroundingPairs||re.surroundingPairs,autoCloseBefore:ne.autoCloseBefore||re.autoCloseBefore,folding:ne.folding||re.folding,colorizedBracketPairs:ne.colorizedBracketPairs||re.colorizedBracketPairs,__electricCharacterSupport:ne.__electricCharacterSupport||re.__electricCharacterSupport};return re}class J{constructor(re,ne,ie){this.configuration=re,this.priority=ne,this.order=ie}static cmp(re,ne){return re.priority===ne.priority?re.order-ne.order:re.priority-ne.priority}}class oe{constructor(re){this.languageId=re}}class fe extends B.JT{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new m.Q5),this.onDidChange=this._onDidChange.event,this._register(this.register(w.bd,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(re,ne,ie=0){let se=this._entries.get(re);se||(se=new H(re),this._entries.set(re,se));let ce=se.register(ne,ie);return this._onDidChange.fire(new oe(re)),(0,B.OF)(()=>{ce.dispose(),this._onDidChange.fire(new oe(re))})}getLanguageConfiguration(re){let ne=this._entries.get(re);return(ne==null?void 0:ne.getResolvedConfiguration())||null}}class q{constructor(re,ne){this.languageId=re,this.underlyingConfig=ne,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new i(this.underlyingConfig):null,this.comments=q._handleComments(this.underlyingConfig),this.characterPair=new x(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||I.Af,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new h(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new D(re,this.underlyingConfig)}getWordDefinition(){return(0,I.eq)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new f.EA(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new d(this.brackets)),this._electricCharacter}onEnter(re,ne,ie,se){return this._onEnterSupport?this._onEnterSupport.onEnter(re,ne,ie,se):null}getAutoClosingPairs(){return new _.c$(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(re){return this.characterPair.getAutoCloseBeforeSet(re)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(re){let ne=re.comments;if(!ne)return null;let ie={};if(ne.lineComment&&(ie.lineCommentToken=ne.lineComment),ne.blockComment){let[se,ce]=ne.blockComment;ie.blockCommentStartToken=se,ie.blockCommentEndToken=ce}return ie}}(0,a.z)(T,C,1)},8801:(ut,Ie,t)=>{"use strict";t.d(Ie,{bd:()=>x,dQ:()=>A});var m=t(3580),B=t(4669),u=t(9872),I=t(1170),_=t(3193);let A=new class{constructor(){this._onDidChangeLanguages=new B.Q5,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(v){return this._languages.push(v),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let f=0,d=this._languages.length;f<d;f++)if(this._languages[f]===v)return void this._languages.splice(f,1)}}}getLanguages(){return this._languages}};u.B.add("editor.modesRegistry",A);let x="plaintext";A.registerLanguage({id:x,extensions:[".txt"],aliases:[m.NC("plainText.alias","Plain Text"),"text"],mimetypes:[I.v.text]}),u.B.as(_.IP.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])},276:(ut,Ie,t)=>{"use strict";t.d(Ie,{Dy:()=>I,Ri:()=>u,TJ:()=>B});var m=t(6887);let B=new class{clone(){return this}equals(_){return this===_}};function u(_,A){return new m.hG([new m.WU(0,"",_)],A)}function I(_,A){let x=new Uint32Array(2);return x[0]=0,x[1]=(32768|_<<0|33554432)>>>0,new m.DI(x,A===null?B:A)}},9111:(ut,Ie,t)=>{"use strict";function m(I,_){let A=I.getCount(),x=I.findTokenIndexAtOffset(_),v=I.getLanguageId(x),f=x;for(;f+1<A&&I.getLanguageId(f+1)===v;)f++;let d=x;for(;d>0&&I.getLanguageId(d-1)===v;)d--;return new B(I,v,d,f+1,I.getStartOffset(d),I.getEndOffset(f))}t.d(Ie,{Bu:()=>u,wH:()=>m});class B{constructor(_,A,x,v,f,d){this._scopedLineTokensBrand=void 0,this._actual=_,this.languageId=A,this._firstTokenIndex=x,this._lastTokenIndex=v,this.firstCharOffset=f,this._lastCharOffset=d}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(_){return this._actual.getLineContent().substring(0,this.firstCharOffset+_)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(_){return this._actual.findTokenIndexAtOffset(_+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(_){return this._actual.getStandardTokenType(_+this._firstTokenIndex)}}function u(I){return(3&I)!=0}},4302:(ut,Ie,t)=>{"use strict";t.d(Ie,{EA:()=>_,Vr:()=>h});var m=t(7295),B=t(72),u=t(4314);class I{constructor(i,c,b,l,a,w){this._richEditBracketBrand=void 0,this.languageId=i,this.index=c,this.open=b,this.close=l,this.forwardRegex=a,this.reversedRegex=w,this._openSet=I._toSet(this.open),this._closeSet=I._toSet(this.close)}isOpen(i){return this._openSet.has(i)}isClose(i){return this._closeSet.has(i)}static _toSet(i){let c=new Set;for(let b of i)c.add(b);return c}}class _{constructor(i,c){this._richEditBracketsBrand=void 0;let b=function(l){let a=l.length;l=l.map(k=>[k[0].toLowerCase(),k[1].toLowerCase()]);let w=[];for(let k=0;k<a;k++)w[k]=k;let E=(k,R)=>{let[O,$]=k,[N,T]=R;return O===N||O===T||$===N||$===T},D=(k,R)=>{let O=Math.min(k,R),$=Math.max(k,R);for(let N=0;N<a;N++)w[N]===$&&(w[N]=O)};for(let k=0;k<a;k++){let R=l[k];for(let O=k+1;O<a;O++)E(R,l[O])&&D(w[k],w[O])}let L=[];for(let k=0;k<a;k++){let R=[],O=[];for(let $=0;$<a;$++)if(w[$]===k){let[N,T]=l[$];R.push(N),O.push(T)}R.length>0&&L.push({open:R,close:O})}return L}(c);this.brackets=b.map((l,a)=>new I(i,a,l.open,l.close,function(w,E,D,L){let k=[];k=k.concat(w),k=k.concat(E);for(let R=0,O=k.length;R<O;R++)A(k[R],D,L,k);return k=v(k),k.sort(x),k.reverse(),d(k)}(l.open,l.close,b,a),function(w,E,D,L){let k=[];k=k.concat(w),k=k.concat(E);for(let R=0,O=k.length;R<O;R++)A(k[R],D,L,k);return k=v(k),k.sort(x),k.reverse(),d(k.map(o))}(l.open,l.close,b,a))),this.forwardRegex=function(l){let a=[];for(let w of l){for(let E of w.open)a.push(E);for(let E of w.close)a.push(E)}return a=v(a),d(a)}(this.brackets),this.reversedRegex=function(l){let a=[];for(let w of l){for(let E of w.open)a.push(E);for(let E of w.close)a.push(E)}return a=v(a),d(a.map(o))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let l of this.brackets){for(let a of l.open)this.textIsBracket[a]=l,this.textIsOpenBracket[a]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,a.length);for(let a of l.close)this.textIsBracket[a]=l,this.textIsOpenBracket[a]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,a.length)}}}function A(r,i,c,b){for(let l=0,a=i.length;l<a;l++){if(l===c)continue;let w=i[l];for(let E of w.open)E.indexOf(r)>=0&&b.push(E);for(let E of w.close)E.indexOf(r)>=0&&b.push(E)}}function x(r,i){return r.length-i.length}function v(r){if(r.length<=1)return r;let i=[],c=new Set;for(let b of r)c.has(b)||(i.push(b),c.add(b));return i}function f(r){let i=/^[\w ]+$/.test(r);return r=m.ec(r),i?`\\b${r}\\b`:r}function d(r){let i=`(${r.map(f).join(")|(")})`;return m.GF(i,!0)}let o=function(){let r=null,i=null;return function(c){return r!==c&&(r=c,i=function(b){let l=new Uint16Array(b.length),a=0;for(let w=b.length-1;w>=0;w--)l[a++]=b.charCodeAt(w);return B.oe().decode(l)}(r)),i}}();class h{static _findPrevBracketInText(i,c,b,l){let a=b.match(i);if(!a)return null;let w=b.length-(a.index||0),E=a[0].length,D=l+w;return new u.e(c,D-E+1,c,D+1)}static findPrevBracketInRange(i,c,b,l,a){let w=o(b).substring(b.length-a,b.length-l);return this._findPrevBracketInText(i,c,w,l)}static findNextBracketInText(i,c,b,l){let a=b.match(i);if(!a)return null;let w=a.index||0,E=a[0].length;if(E===0)return null;let D=l+w;return new u.e(c,D+1,c,D+1+E)}static findNextBracketInRange(i,c,b,l,a){let w=b.substring(l,a);return this.findNextBracketInText(i,c,w,l)}}},2963:(ut,Ie,t)=>{"use strict";t.d(Ie,{C2:()=>x,Fq:()=>v});var m=t(7295),B=t(7378),u=t(6887),I=t(276),_=function(d,o,h,r){return new(h||(h=Promise))(function(i,c){function b(w){try{a(r.next(w))}catch(E){c(E)}}function l(w){try{a(r.throw(w))}catch(E){c(E)}}function a(w){var E;w.done?i(w.value):(E=w.value,E instanceof h?E:new h(function(D){D(E)})).then(b,l)}a((r=r.apply(d,o||[])).next())})};let A={getInitialState:()=>I.TJ,tokenizeEncoded:(d,o,h)=>(0,I.Dy)(0,h)};function x(d,o,h){return _(this,void 0,void 0,function*(){if(!h)return f(o,d.languageIdCodec,A);let r=yield u.RW.getOrCreate(h);return f(o,d.languageIdCodec,r||A)})}function v(d,o,h,r,i,c,b){let l="<div>",a=r,w=0,E=!0;for(let D=0,L=o.getCount();D<L;D++){let k=o.getEndOffset(D);if(k<=r)continue;let R="";for(;a<k&&a<i;a++){let O=d.charCodeAt(a);switch(O){case 9:{let $=c-(a+w)%c;for(w+=$-1;$>0;)b&&E?(R+="&#160;",E=!1):(R+=" ",E=!0),$--;break}case 60:R+="&lt;",E=!1;break;case 62:R+="&gt;",E=!1;break;case 38:R+="&amp;",E=!1;break;case 0:R+="&#00;",E=!1;break;case 65279:case 8232:case 8233:case 133:R+="\uFFFD",E=!1;break;case 13:R+="&#8203",E=!1;break;case 32:b&&E?(R+="&#160;",E=!1):(R+=" ",E=!0);break;default:R+=String.fromCharCode(O),E=!1}}if(l+=`<span style="${o.getInlineStyle(D,h)}">${R}</span>`,k>i||a>=i)break}return l+="</div>",l}function f(d,o,h){let r='<div class="monaco-tokenized-source">',i=m.uq(d),c=h.getInitialState();for(let b=0,l=i.length;b<l;b++){let a=i[b];b>0&&(r+="<br/>");let w=h.tokenizeEncoded(a,!0,c);B.A.convertToEndOffset(w.tokens,a.length);let E=new B.A(w.tokens,a,o).inflate(),D=0;for(let L=0,k=E.getCount();L<k;L++){let R=E.getClassName(L),O=E.getEndOffset(L);r+=`<span class="${R}">${m.YU(a.substring(D,O))}</span>`,D=O}c=w.endState}return r+="</div>",r}},4973:(ut,Ie,t)=>{"use strict";t.d(Ie,{F5:()=>u,Hf:()=>v,Qi:()=>f,RM:()=>I,Tx:()=>d,U:()=>B,dJ:()=>A,je:()=>o,pt:()=>h,sh:()=>m,tk:()=>x});var m,B,u,I,_=t(6248);(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(m||(m={})),function(r){r[r.Left=1]="Left",r[r.Right=2]="Right"}(B||(B={})),function(r){r[r.Inline=1]="Inline",r[r.Gutter=2]="Gutter"}(u||(u={})),function(r){r[r.Both=0]="Both",r[r.Right=1]="Right",r[r.Left=2]="Left",r[r.None=3]="None"}(I||(I={}));class A{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(i){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|i.tabSize),i.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|i.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=!!i.insertSpaces,this.defaultEOL=0|i.defaultEOL,this.trimAutoWhitespace=!!i.trimAutoWhitespace,this.bracketPairColorizationOptions=i.bracketPairColorizationOptions}equals(i){return this.tabSize===i.tabSize&&this._indentSizeIsTabSize===i._indentSizeIsTabSize&&this.indentSize===i.indentSize&&this.insertSpaces===i.insertSpaces&&this.defaultEOL===i.defaultEOL&&this.trimAutoWhitespace===i.trimAutoWhitespace&&(0,_.fS)(this.bracketPairColorizationOptions,i.bracketPairColorizationOptions)}createChangeEvent(i){return{tabSize:this.tabSize!==i.tabSize,indentSize:this.indentSize!==i.indentSize,insertSpaces:this.insertSpaces!==i.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==i.trimAutoWhitespace}}}class x{constructor(i,c){this._findMatchBrand=void 0,this.range=i,this.matches=c}}function v(r){return r&&typeof r.read=="function"}class f{constructor(i,c,b,l,a,w){this.identifier=i,this.range=c,this.text=b,this.forceMoveMarkers=l,this.isAutoWhitespaceEdit=a,this._isTracked=w}}class d{constructor(i,c,b){this.regex=i,this.wordSeparators=c,this.simpleSearch=b}}class o{constructor(i,c,b){this.reverseEdits=i,this.changes=c,this.trimAutoWhitespaceLineNumbers=b}}function h(r){return!r.isTooLargeForSyncing()&&!r.isForSimpleWidget}},1720:(ut,Ie,t)=>{"use strict";t.d(Ie,{BH:()=>i,Dm:()=>b,Kd:()=>A,Y0:()=>x,n2:()=>c});var m=t(7301),B=t(7988),u=t(5035),I=t(1761);class _{get length(){return this._length}constructor(a){this._length=a}}class A extends _{static create(a,w,E){let D=a.length;return w&&(D=(0,u.Ii)(D,w.length)),E&&(D=(0,u.Ii)(D,E.length)),new A(D,a,w,E,w?w.missingOpeningBracketIds:I.tS.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(a){switch(a){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let a=[];return a.push(this.openingBracket),this.child&&a.push(this.child),this.closingBracket&&a.push(this.closingBracket),a}constructor(a,w,E,D,L){super(a),this.openingBracket=w,this.child=E,this.closingBracket=D,this.missingOpeningBracketIds=L}canBeReused(a){return this.closingBracket!==null&&!a.intersects(this.missingOpeningBracketIds)}deepClone(){return new A(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(a,w){return this.child?this.child.computeMinIndentation((0,u.Ii)(a,this.openingBracket.length),w):Number.MAX_SAFE_INTEGER}}class x extends _{static create23(a,w,E,D=!1){let L=a.length,k=a.missingOpeningBracketIds;if(a.listHeight!==w.listHeight)throw new Error("Invalid list heights");if(L=(0,u.Ii)(L,w.length),k=k.merge(w.missingOpeningBracketIds),E){if(a.listHeight!==E.listHeight)throw new Error("Invalid list heights");L=(0,u.Ii)(L,E.length),k=k.merge(E.missingOpeningBracketIds)}return D?new f(L,a.listHeight+1,a,w,E,k):new v(L,a.listHeight+1,a,w,E,k)}static getEmpty(){return new o(u.xl,0,[],I.tS.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(a,w,E){super(a),this.listHeight=w,this._missingOpeningBracketIds=E,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let a=this.childrenLength;if(a===0)return;let w=this.getChild(a-1),E=w.kind===4?w.toMutable():w;return w!==E&&this.setChild(a-1,E),E}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let a=this.getChild(0),w=a.kind===4?a.toMutable():a;return a!==w&&this.setChild(0,w),w}canBeReused(a){if(a.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let w=this;for(;w.kind===4;){let E=w.childrenLength;if(E===0)throw new m.he;w=w.getChild(E-1)}return w.canBeReused(a)}handleChildrenChanged(){this.throwIfImmutable();let a=this.childrenLength,w=this.getChild(0).length,E=this.getChild(0).missingOpeningBracketIds;for(let D=1;D<a;D++){let L=this.getChild(D);w=(0,u.Ii)(w,L.length),E=E.merge(L.missingOpeningBracketIds)}this._length=w,this._missingOpeningBracketIds=E,this.cachedMinIndentation=-1}computeMinIndentation(a,w){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let E=Number.MAX_SAFE_INTEGER,D=a;for(let L=0;L<this.childrenLength;L++){let k=this.getChild(L);k&&(E=Math.min(E,k.computeMinIndentation(D,w)),D=(0,u.Ii)(D,k.length))}return this.cachedMinIndentation=E,E}}class v extends x{get childrenLength(){return this._item3!==null?3:2}getChild(a){switch(a){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(a,w){switch(a){case 0:return void(this._item1=w);case 1:return void(this._item2=w);case 2:return void(this._item3=w)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(a,w,E,D,L,k){super(a,w,k),this._item1=E,this._item2=D,this._item3=L}deepClone(){return new v(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(a){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=a,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let a=this._item3;return this._item3=null,this.handleChildrenChanged(),a}prependChildOfSameHeight(a){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=a,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let a=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),a}toMutable(){return this}}class f extends v{toMutable(){return new v(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class d extends x{get childrenLength(){return this._children.length}getChild(a){return this._children[a]}setChild(a,w){this._children[a]=w}get children(){return this._children}constructor(a,w,E,D){super(a,w,D),this._children=E}deepClone(){let a=new Array(this._children.length);for(let w=0;w<this._children.length;w++)a[w]=this._children[w].deepClone();return new d(this.length,this.listHeight,a,this.missingOpeningBracketIds)}appendChildOfSameHeight(a){this.throwIfImmutable(),this._children.push(a),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let a=this._children.pop();return this.handleChildrenChanged(),a}prependChildOfSameHeight(a){this.throwIfImmutable(),this._children.unshift(a),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let a=this._children.shift();return this.handleChildrenChanged(),a}toMutable(){return this}}class o extends d{toMutable(){return new d(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}let h=[];class r extends _{get listHeight(){return 0}get childrenLength(){return 0}getChild(a){return null}get children(){return h}deepClone(){return this}}class i extends r{get kind(){return 0}get missingOpeningBracketIds(){return I.tS.getEmpty()}canBeReused(a){return!0}computeMinIndentation(a,w){let E=(0,u.Hw)(a),D=(E.columnCount===0?E.lineCount:E.lineCount+1)+1,L=(0,u.W9)((0,u.Ii)(a,this.length))+1,k=Number.MAX_SAFE_INTEGER;for(let R=D;R<=L;R++){let O=w.getLineFirstNonWhitespaceColumn(R),$=w.getLineContent(R);if(O===0)continue;let N=B.i.visibleColumnFromColumn($,O,w.getOptions().tabSize);k=Math.min(k,N)}return k}}class c extends r{static create(a,w,E){return new c(a,w,E)}get kind(){return 1}get missingOpeningBracketIds(){return I.tS.getEmpty()}constructor(a,w,E){super(a),this.bracketInfo=w,this.bracketIds=E}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(a){return!1}computeMinIndentation(a,w){return Number.MAX_SAFE_INTEGER}}class b extends r{get kind(){return 3}constructor(a,w){super(w),this.missingOpeningBracketIds=a}canBeReused(a){return!a.intersects(this.missingOpeningBracketIds)}computeMinIndentation(a,w){return Number.MAX_SAFE_INTEGER}}},2442:(ut,Ie,t)=>{"use strict";t.d(Ie,{Q:()=>B,Y:()=>u});var m=t(5035);class B{constructor(A,x,v){this.startOffset=A,this.endOffset=x,this.newLength=v}toString(){return`[${(0,m.Hw)(this.startOffset)}...${(0,m.Hw)(this.endOffset)}) -> ${(0,m.Hw)(this.newLength)}`}}class u{constructor(A){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=A.map(x=>I.from(x))}getOffsetBeforeChange(A){return this.adjustNextEdit(A),this.translateCurToOld(A)}getDistanceToNextChange(A){this.adjustNextEdit(A);let x=this.edits[this.nextEditIdx],v=x?this.translateOldToCur(x.offsetObj):null;return v===null?null:(0,m.BE)(A,v)}translateOldToCur(A){return A.lineCount===this.deltaLineIdxInOld?(0,m.Hg)(A.lineCount+this.deltaOldToNewLineCount,A.columnCount+this.deltaOldToNewColumnCount):(0,m.Hg)(A.lineCount+this.deltaOldToNewLineCount,A.columnCount)}translateCurToOld(A){let x=(0,m.Hw)(A);return x.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,m.Hg)(x.lineCount-this.deltaOldToNewLineCount,x.columnCount-this.deltaOldToNewColumnCount):(0,m.Hg)(x.lineCount-this.deltaOldToNewLineCount,x.columnCount)}adjustNextEdit(A){for(;this.nextEditIdx<this.edits.length;){let x=this.edits[this.nextEditIdx],v=this.translateOldToCur(x.endOffsetAfterObj);if(!(0,m.By)(v,A))break;{this.nextEditIdx++;let f=(0,m.Hw)(v),d=(0,m.Hw)(this.translateOldToCur(x.endOffsetBeforeObj)),o=f.lineCount-d.lineCount;this.deltaOldToNewLineCount+=o;let h=this.deltaLineIdxInOld===x.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,r=f.columnCount-d.columnCount;this.deltaOldToNewColumnCount=h+r,this.deltaLineIdxInOld=x.endOffsetBeforeObj.lineCount}}}}class I{static from(A){return new I(A.startOffset,A.endOffset,A.newLength)}constructor(A,x,v){this.endOffsetBeforeObj=(0,m.Hw)(x),this.endOffsetAfterObj=(0,m.Hw)((0,m.Ii)(A,v)),this.offsetObj=(0,m.Hw)(A)}}},5382:(ut,Ie,t)=>{"use strict";t.d(Ie,{Z:()=>x});var m=t(7295),B=t(1720),u=t(5035),I=t(1761),_=t(6735);class A{static createFromLanguage(f,d){function o(r){return d.getKey(`${r.languageId}:::${r.bracketText}`)}let h=new Map;for(let r of f.bracketsNew.openingBrackets){let i=(0,u.Hg)(0,r.bracketText.length),c=o(r),b=I.tS.getEmpty().add(c,I.Qw);h.set(r.bracketText,new _.WU(i,1,c,b,B.n2.create(i,r,b)))}for(let r of f.bracketsNew.closingBrackets){let i=(0,u.Hg)(0,r.bracketText.length),c=I.tS.getEmpty(),b=r.getOpeningBrackets();for(let l of b)c=c.add(o(l),I.Qw);h.set(r.bracketText,new _.WU(i,2,o(b[0]),c,B.n2.create(i,r,c)))}return new A(h)}constructor(f){this.map=f,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{let f=[...this.map.keys()];return f.sort(),f.reverse(),f.map(d=>function(o){let h=(0,m.ec)(o);return/^[\w ]+/.test(o)&&(h=`\\b${h}`),/[\w ]+$/.test(o)&&(h=`${h}\\b`),h}(d)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let f=this.getRegExpStr();this._regExpGlobal=f?new RegExp(f,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(f){return this.map.get(f.toLowerCase())}findClosingTokenText(f){for(let[d,o]of this.map)if(o.kind===2&&o.bracketIds.intersects(f))return d}get isEmpty(){return this.map.size===0}}class x{constructor(f,d){this.denseKeyProvider=f,this.getLanguageConfiguration=d,this.languageIdToBracketTokens=new Map}didLanguageChange(f){return this.languageIdToBracketTokens.has(f)}getSingleLanguageBracketTokens(f){let d=this.languageIdToBracketTokens.get(f);return d||(d=A.createFromLanguage(this.getLanguageConfiguration(f),this.denseKeyProvider),this.languageIdToBracketTokens.set(f,d)),d}}},5035:(ut,Ie,t)=>{"use strict";t.d(Ie,{BE:()=>c,By:()=>l,F_:()=>o,Hg:()=>v,Hw:()=>f,Ii:()=>h,PZ:()=>w,Qw:()=>E,VR:()=>b,W9:()=>d,Zq:()=>a,av:()=>I,oR:()=>D,rM:()=>i,tQ:()=>r,xd:()=>A,xl:()=>_});var m=t(7295),B=t(4314);class u{constructor(k,R){this.lineCount=k,this.columnCount=R}toString(){return`${this.lineCount},${this.columnCount}`}}function I(L,k,R,O){return L!==R?v(R-L,O):v(0,O-k)}u.zero=new u(0,0);let _=0;function A(L){return L===0}let x=Math.pow(2,26);function v(L,k){return L*x+k}function f(L){let k=L,R=Math.floor(k/x);return new u(R,k-R*x)}function d(L){return Math.floor(L/x)}function o(L){return L}function h(L,k){let R=L+k;return k>=x&&(R-=L%x),R}function r(L,k){return L.reduce((R,O)=>h(R,k(O)),_)}function i(L,k){return L===k}function c(L,k){let R=L,O=k;if(O-R<=0)return _;let $=Math.floor(R/x),N=Math.floor(O/x),T=O-N*x;return $===N?v(0,T-(R-$*x)):v(N-$,T)}function b(L,k){return L<k}function l(L,k){return L<=k}function a(L,k){return L>=k}function w(L){return v(L.lineNumber-1,L.column-1)}function E(L,k){let R=L,O=Math.floor(R/x),$=R-O*x,N=k,T=Math.floor(N/x),C=N-T*x;return new B.e(O+1,$+1,T+1,C+1)}function D(L){let k=(0,m.uq)(L);return v(k.length-1,k[k.length-1].length)}},3883:(ut,Ie,t)=>{"use strict";t.d(Ie,{w:()=>o});var m=t(1720),B=t(2442),u=t(1761),I=t(5035);function _(r,i=!1){if(r.length===0)return null;if(r.length===1)return r[0];let c=r.length;for(;c>3;){let b=c>>1;for(let l=0;l<b;l++){let a=l<<1;r[l]=m.Y0.create23(r[a],r[a+1],a+3===c?r[a+2]:null,i)}c=b}return m.Y0.create23(r[0],r[1],c>=3?r[2]:null,i)}function A(r,i){return Math.abs(r.listHeight-i.listHeight)}function x(r,i){return r.listHeight===i.listHeight?m.Y0.create23(r,i,null,!1):r.listHeight>i.listHeight?function(c,b){let l=c=c.toMutable(),a=[],w;for(;;){if(b.listHeight===l.listHeight){w=b;break}if(l.kind!==4)throw new Error("unexpected");a.push(l),l=l.makeLastElementMutable()}for(let E=a.length-1;E>=0;E--){let D=a[E];w?D.childrenLength>=3?w=m.Y0.create23(D.unappendChild(),w,null,!1):(D.appendChildOfSameHeight(w),w=void 0):D.handleChildrenChanged()}return w?m.Y0.create23(c,w,null,!1):c}(r,i):function(c,b){let l=c=c.toMutable(),a=[];for(;b.listHeight!==l.listHeight;){if(l.kind!==4)throw new Error("unexpected");a.push(l),l=l.makeFirstElementMutable()}let w=b;for(let E=a.length-1;E>=0;E--){let D=a[E];w?D.childrenLength>=3?w=m.Y0.create23(w,D.unprependChild(),null,!1):(D.prependChildOfSameHeight(w),w=void 0):D.handleChildrenChanged()}return w?m.Y0.create23(w,c,null,!1):c}(i,r)}class v{constructor(i){this.lastOffset=I.xl,this.nextNodes=[i],this.offsets=[I.xl],this.idxs=[]}readLongestNodeAt(i,c){if((0,I.VR)(i,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=i;;){let b=d(this.nextNodes);if(!b)return;let l=d(this.offsets);if((0,I.VR)(i,l))return;if((0,I.VR)(l,i))if((0,I.Ii)(l,b.length)<=i)this.nextNodeAfterCurrent();else{let a=f(b);a!==-1?(this.nextNodes.push(b.getChild(a)),this.offsets.push(l),this.idxs.push(a)):this.nextNodeAfterCurrent()}else{if(c(b))return this.nextNodeAfterCurrent(),b;{let a=f(b);if(a===-1)return void this.nextNodeAfterCurrent();this.nextNodes.push(b.getChild(a)),this.offsets.push(l),this.idxs.push(a)}}}}nextNodeAfterCurrent(){for(;;){let i=d(this.offsets),c=d(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let b=d(this.nextNodes),l=f(b,this.idxs[this.idxs.length-1]);if(l!==-1){this.nextNodes.push(b.getChild(l)),this.offsets.push((0,I.Ii)(i,c.length)),this.idxs[this.idxs.length-1]=l;break}this.idxs.pop()}}}function f(r,i=-1){for(;;){if(++i>=r.childrenLength)return-1;if(r.getChild(i))return i}}function d(r){return r.length>0?r[r.length-1]:void 0}function o(r,i,c,b){return new h(r,i,c,b).parseDocument()}class h{constructor(i,c,b,l){if(this.tokenizer=i,this.createImmutableLists=l,this._itemsConstructed=0,this._itemsFromCache=0,b&&l)throw new Error("Not supported");this.oldNodeReader=b?new v(b):void 0,this.positionMapper=new B.Y(c)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let i=this.parseList(u.tS.getEmpty());return i||(i=m.Y0.getEmpty()),i}parseList(i){let c=[];for(;;){let l=this.tryReadChildFromCache(i);if(!l){let a=this.tokenizer.peek();if(!a||a.kind===2&&a.bracketIds.intersects(i))break;l=this.parseChild(i)}l.kind===4&&l.childrenLength===0||c.push(l)}return this.oldNodeReader?function(l){if(l.length===0)return null;if(l.length===1)return l[0];let a=0;function w(){if(a>=l.length)return null;let L=a,k=l[L].listHeight;for(a++;a<l.length&&l[a].listHeight===k;)a++;return a-L>=2?_(L===0&&a===l.length?l:l.slice(L,a),!1):l[L]}let E=w(),D=w();if(!D)return E;for(let L=w();L;L=w())A(E,D)<=A(D,L)?(E=x(E,D),D=L):D=x(D,L);return x(E,D)}(c):_(c,this.createImmutableLists)}tryReadChildFromCache(i){if(this.oldNodeReader){let c=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(c===null||!(0,I.xd)(c)){let b=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),l=>!(c!==null&&!(0,I.VR)(l.length,c))&&l.canBeReused(i));if(b)return this._itemsFromCache++,this.tokenizer.skip(b.length),b}}}parseChild(i){this._itemsConstructed++;let c=this.tokenizer.read();switch(c.kind){case 2:return new m.Dm(c.bracketIds,c.length);case 0:return c.astNode;case 1:{let b=i.merge(c.bracketIds),l=this.parseList(b),a=this.tokenizer.peek();return a&&a.kind===2&&(a.bracketId===c.bracketId||a.bracketIds.intersects(c.bracketIds))?(this.tokenizer.read(),m.Kd.create(c.astNode,l,a.astNode)):m.Kd.create(c.astNode,l,null)}default:throw new Error("unexpected")}}}},1761:(ut,Ie,t)=>{"use strict";t.d(Ie,{FE:()=>I,Qw:()=>u,tS:()=>B});let m=[];class B{static create(A,x){if(A<=128&&x.length===0){let v=B.cache[A];return v||(v=new B(A,x),B.cache[A]=v),v}return new B(A,x)}static getEmpty(){return this.empty}constructor(A,x){this.items=A,this.additionalItems=x}add(A,x){let v=x.getKey(A),f=v>>5;if(f===0){let o=1<<v|this.items;return o===this.items?this:B.create(o,this.additionalItems)}f--;let d=this.additionalItems.slice(0);for(;d.length<f;)d.push(0);return d[f]|=1<<(31&v),B.create(this.items,d)}merge(A){let x=this.items|A.items;if(this.additionalItems===m&&A.additionalItems===m)return x===this.items?this:x===A.items?A:B.create(x,m);let v=[];for(let f=0;f<Math.max(this.additionalItems.length,A.additionalItems.length);f++){let d=this.additionalItems[f]||0,o=A.additionalItems[f]||0;v.push(d|o)}return B.create(x,v)}intersects(A){if(this.items&A.items)return!0;for(let x=0;x<Math.min(this.additionalItems.length,A.additionalItems.length);x++)if(this.additionalItems[x]&A.additionalItems[x])return!0;return!1}}B.cache=new Array(129),B.empty=B.create(0,m);let u={getKey:_=>_};class I{constructor(){this.items=new Map}getKey(A){let x=this.items.get(A);return x===void 0&&(x=this.items.size,this.items.set(A,x)),x}}},6735:(ut,Ie,t)=>{"use strict";t.d(Ie,{WU:()=>A,g:()=>f,xH:()=>x});var m=t(7301),B=t(5797),u=t(1720),I=t(5035),_=t(1761);class A{constructor(o,h,r,i,c){this.length=o,this.kind=h,this.bracketId=r,this.bracketIds=i,this.astNode=c}}class x{constructor(o,h){this.textModel=o,this.bracketTokens=h,this.reader=new v(this.textModel,this.bracketTokens),this._offset=I.xl,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=o.getLineCount(),this.textBufferLastLineLength=o.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,I.Hg)(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(o){this.didPeek=!1,this._offset=(0,I.Ii)(this._offset,o);let h=(0,I.Hw)(this._offset);this.reader.setPosition(h.lineCount,h.columnCount)}read(){let o;return this.peeked?(this.didPeek=!1,o=this.peeked):o=this.reader.read(),o&&(this._offset=(0,I.Ii)(this._offset,o.length)),o}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class v{constructor(o,h){this.textModel=o,this.bracketTokens=h,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=o.getLineCount(),this.textBufferLastLineLength=o.getLineLength(this.textBufferLineCount)}setPosition(o,h){o===this.lineIdx?(this.lineCharOffset=h,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=o,this.lineCharOffset=h,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){let c=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,I.F_)(c.length),c}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let o=this.lineIdx,h=this.lineCharOffset,r=0;for(;;){let c=this.lineTokens,b=c.getCount(),l=null;if(this.lineTokenOffset<b){let a=c.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<b&&a===c.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let w=B.N.getTokenType(a)===0,E=B.N.containsBalancedBrackets(a),D=c.getEndOffset(this.lineTokenOffset);if(E&&w&&this.lineCharOffset<D){let L=c.getLanguageId(this.lineTokenOffset),k=this.line.substring(this.lineCharOffset,D),R=this.bracketTokens.getSingleLanguageBracketTokens(L),O=R.regExpGlobal;if(O){O.lastIndex=0;let $=O.exec(k);$&&(l=R.getToken($[0]),l&&(this.lineCharOffset+=$.index))}}if(r+=D-this.lineCharOffset,l){if(o!==this.lineIdx||h!==this.lineCharOffset){this.peekedToken=l;break}return this.lineCharOffset+=(0,I.F_)(l.length),l}this.lineTokenOffset++,this.lineCharOffset=D}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,r+=33,r>1e3))break;if(r>1500)break}let i=(0,I.av)(o,h,this.lineIdx,this.lineCharOffset);return new A(i,0,-1,_.tS.getEmpty(),new u.BH(i))}}class f{constructor(o,h){this.text=o,this._offset=I.xl,this.idx=0;let r=h.getRegExpStr(),i=r?new RegExp(r+`|
`,"gi"):null,c=[],b,l=0,a=0,w=0,E=0,D=[];for(let R=0;R<60;R++)D.push(new A((0,I.Hg)(0,R),0,-1,_.tS.getEmpty(),new u.BH((0,I.Hg)(0,R))));let L=[];for(let R=0;R<60;R++)L.push(new A((0,I.Hg)(1,R),0,-1,_.tS.getEmpty(),new u.BH((0,I.Hg)(1,R))));if(i)for(i.lastIndex=0;(b=i.exec(o))!==null;){let R=b.index,O=b[0];if(O===`
`)l++,a=R+1;else{if(w!==R){let $;if(E===l){let N=R-w;if(N<D.length)$=D[N];else{let T=(0,I.Hg)(0,N);$=new A(T,0,-1,_.tS.getEmpty(),new u.BH(T))}}else{let N=l-E,T=R-a;if(N===1&&T<L.length)$=L[T];else{let C=(0,I.Hg)(N,T);$=new A(C,0,-1,_.tS.getEmpty(),new u.BH(C))}}c.push($)}c.push(h.getToken(O)),w=R+O.length,E=l}}let k=o.length;if(w!==k){let R=E===l?(0,I.Hg)(0,k-w):(0,I.Hg)(l-E,k-a);c.push(new A(R,0,-1,_.tS.getEmpty(),new u.BH(R)))}this.length=(0,I.Hg)(l,k-a),this.tokens=c}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(o){throw new m.B8}}},5215:(ut,Ie,t)=>{"use strict";t.d(Ie,{NL:()=>i,e9:()=>r});var m=t(3580),B=t(7301),u=t(3860),I=t(666),_=t(3033),A=t(3060),x=t(5935);function v(c){return c.toString()}class f{static create(b,l){let a=b.getAlternativeVersionId(),w=h(b);return new f(a,a,w,w,l,l,[])}constructor(b,l,a,w,E,D,L){this.beforeVersionId=b,this.afterVersionId=l,this.beforeEOL=a,this.afterEOL=w,this.beforeCursorState=E,this.afterCursorState=D,this.changes=L}append(b,l,a,w,E){l.length>0&&(this.changes=(0,_.b)(this.changes,l)),this.afterEOL=a,this.afterVersionId=w,this.afterCursorState=E}static _writeSelectionsSize(b){return 4+16*(b?b.length:0)}static _writeSelections(b,l,a){if(A.T4(b,l?l.length:0,a),a+=4,l)for(let w of l)A.T4(b,w.selectionStartLineNumber,a),a+=4,A.T4(b,w.selectionStartColumn,a),a+=4,A.T4(b,w.positionLineNumber,a),a+=4,A.T4(b,w.positionColumn,a),a+=4;return a}static _readSelections(b,l,a){let w=A.Ag(b,l);l+=4;for(let E=0;E<w;E++){let D=A.Ag(b,l);l+=4;let L=A.Ag(b,l);l+=4;let k=A.Ag(b,l);l+=4;let R=A.Ag(b,l);l+=4,a.push(new u.Y(D,L,k,R))}return l}serialize(){let b=10+f._writeSelectionsSize(this.beforeCursorState)+f._writeSelectionsSize(this.afterCursorState)+4;for(let w of this.changes)b+=w.writeSize();let l=new Uint8Array(b),a=0;A.T4(l,this.beforeVersionId,a),a+=4,A.T4(l,this.afterVersionId,a),a+=4,A.Cg(l,this.beforeEOL,a),a+=1,A.Cg(l,this.afterEOL,a),a+=1,a=f._writeSelections(l,this.beforeCursorState,a),a=f._writeSelections(l,this.afterCursorState,a),A.T4(l,this.changes.length,a),a+=4;for(let w of this.changes)a=w.write(l,a);return l.buffer}static deserialize(b){let l=new Uint8Array(b),a=0,w=A.Ag(l,a);a+=4;let E=A.Ag(l,a);a+=4;let D=A.Q$(l,a);a+=1;let L=A.Q$(l,a);a+=1;let k=[];a=f._readSelections(l,a,k);let R=[];a=f._readSelections(l,a,R);let O=A.Ag(l,a);a+=4;let $=[];for(let N=0;N<O;N++)a=_.q.read(l,a,$);return new f(w,E,D,L,k,R,$)}}class d{get type(){return 0}get resource(){return I.o.isUri(this.model)?this.model:this.model.uri}constructor(b,l,a,w){this.label=b,this.code=l,this.model=a,this._data=f.create(a,w)}toString(){return(this._data instanceof f?this._data:f.deserialize(this._data)).changes.map(b=>b.toString()).join(", ")}matchesResource(b){return(I.o.isUri(this.model)?this.model:this.model.uri).toString()===b.toString()}setModel(b){this.model=b}canAppend(b){return this.model===b&&this._data instanceof f}append(b,l,a,w,E){this._data instanceof f&&this._data.append(b,l,a,w,E)}close(){this._data instanceof f&&(this._data=this._data.serialize())}open(){this._data instanceof f||(this._data=f.deserialize(this._data))}undo(){if(I.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof f&&(this._data=this._data.serialize());let b=f.deserialize(this._data);this.model._applyUndo(b.changes,b.beforeEOL,b.beforeVersionId,b.beforeCursorState)}redo(){if(I.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof f&&(this._data=this._data.serialize());let b=f.deserialize(this._data);this.model._applyRedo(b.changes,b.afterEOL,b.afterVersionId,b.afterCursorState)}heapSize(){return this._data instanceof f&&(this._data=this._data.serialize()),this._data.byteLength+168}}class o{get resources(){return this._editStackElementsArr.map(b=>b.resource)}constructor(b,l,a){this.label=b,this.code=l,this.type=1,this._isOpen=!0,this._editStackElementsArr=a.slice(0),this._editStackElementsMap=new Map;for(let w of this._editStackElementsArr){let E=v(w.resource);this._editStackElementsMap.set(E,w)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(b){let l=v(b);return this._editStackElementsMap.has(l)}setModel(b){let l=v(I.o.isUri(b)?b:b.uri);this._editStackElementsMap.has(l)&&this._editStackElementsMap.get(l).setModel(b)}canAppend(b){if(!this._isOpen)return!1;let l=v(b.uri);return!!this._editStackElementsMap.has(l)&&this._editStackElementsMap.get(l).canAppend(b)}append(b,l,a,w,E){let D=v(b.uri);this._editStackElementsMap.get(D).append(b,l,a,w,E)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let b of this._editStackElementsArr)b.undo()}redo(){for(let b of this._editStackElementsArr)b.redo()}heapSize(b){let l=v(b);return this._editStackElementsMap.has(l)?this._editStackElementsMap.get(l).heapSize():0}split(){return this._editStackElementsArr}toString(){let b=[];for(let l of this._editStackElementsArr)b.push(`${(0,x.EZ)(l.resource)}: ${l}`);return`{${b.join(", ")}}`}}function h(c){return c.getEOL()===`
`?0:1}function r(c){return!!c&&(c instanceof d||c instanceof o)}class i{constructor(b,l){this._model=b,this._undoRedoService=l}pushStackElement(){let b=this._undoRedoService.getLastElement(this._model.uri);r(b)&&b.close()}popStackElement(){let b=this._undoRedoService.getLastElement(this._model.uri);r(b)&&b.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(b,l){let a=this._undoRedoService.getLastElement(this._model.uri);if(r(a)&&a.canAppend(this._model))return a;let w=new d(m.NC("edit","Typing"),"undoredo.textBufferEdit",this._model,b);return this._undoRedoService.pushElement(w,l),w}pushEOL(b){let l=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(b),l.append(this._model,[],h(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(b,l,a,w){let E=this._getOrCreateEditStackElement(b,w),D=this._model.applyEdits(l,!0),L=i._computeCursorState(a,D),k=D.map((R,O)=>({index:O,textChange:R.textChange}));return k.sort((R,O)=>R.textChange.oldPosition===O.textChange.oldPosition?R.index-O.index:R.textChange.oldPosition-O.textChange.oldPosition),E.append(this._model,k.map(R=>R.textChange),h(this._model),this._model.getAlternativeVersionId(),L),L}static _computeCursorState(b,l){try{return b?b(l):null}catch(a){return(0,B.dL)(a),null}}}},1516:(ut,Ie,t)=>{"use strict";t.d(Ie,{W:()=>f,l:()=>v});var m=t(9488),B=t(7295),u=t(7988),I=t(4314),_=t(4954),A=t(9616),x=t(5094);class v extends _.U{constructor(o,h){super(),this.textModel=o,this.languageConfigurationService=h}getLanguageConfiguration(o){return this.languageConfigurationService.getLanguageConfiguration(o)}_computeIndentLevel(o){return(0,A.q)(this.textModel.getLineContent(o+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(o,h,r){this.assertNotDisposed();let i=this.textModel.getLineCount();if(o<1||o>i)throw new Error("Illegal value for lineNumber");let c=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,b=!!(c&&c.offSide),l=-2,a=-1,w=-2,E=-1,D=F=>{if(l!==-1&&(l===-2||l>F-1)){l=-1,a=-1;for(let H=F-2;H>=0;H--){let z=this._computeIndentLevel(H);if(z>=0){l=H,a=z;break}}}if(w===-2){w=-1,E=-1;for(let H=F;H<i;H++){let z=this._computeIndentLevel(H);if(z>=0){w=H,E=z;break}}}},L=-2,k=-1,R=-2,O=-1,$=F=>{if(L===-2){L=-1,k=-1;for(let H=F-2;H>=0;H--){let z=this._computeIndentLevel(H);if(z>=0){L=H,k=z;break}}}if(R!==-1&&(R===-2||R<F-1)){R=-1,O=-1;for(let H=F;H<i;H++){let z=this._computeIndentLevel(H);if(z>=0){R=H,O=z;break}}}},N=0,T=!0,C=0,W=!0,K=0,j=0;for(let F=0;T||W;F++){let H=o-F,z=o+F;F>1&&(H<1||H<h)&&(T=!1),F>1&&(z>i||z>r)&&(W=!1),F>5e4&&(T=!1,W=!1);let J=-1;if(T&&H>=1){let fe=this._computeIndentLevel(H-1);fe>=0?(w=H-1,E=fe,J=Math.ceil(fe/this.textModel.getOptions().indentSize)):(D(H),J=this._getIndentLevelForWhitespaceLine(b,a,E))}let oe=-1;if(W&&z<=i){let fe=this._computeIndentLevel(z-1);fe>=0?(L=z-1,k=fe,oe=Math.ceil(fe/this.textModel.getOptions().indentSize)):($(z),oe=this._getIndentLevelForWhitespaceLine(b,k,O))}if(F!==0){if(F===1){if(z<=i&&oe>=0&&j+1===oe){T=!1,N=z,C=z,K=oe;continue}if(H>=1&&J>=0&&J-1===j){W=!1,N=H,C=H,K=J;continue}if(N=o,C=o,K=j,K===0)return{startLineNumber:N,endLineNumber:C,indent:K}}T&&(J>=K?N=H:T=!1),W&&(oe>=K?C=z:W=!1)}else j=J}return{startLineNumber:N,endLineNumber:C,indent:K}}getLinesBracketGuides(o,h,r,i){var c;let b=[];for(let D=o;D<=h;D++)b.push([]);let l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new I.e(o,1,h,this.textModel.getLineMaxColumn(h))).toArray(),a;if(r&&l.length>0){let D=(o<=r.lineNumber&&r.lineNumber<=h?l:this.textModel.bracketPairs.getBracketPairsInRange(I.e.fromPositions(r)).toArray()).filter(L=>I.e.strictContainsPosition(L.range,r));a=(c=(0,m.dF)(D,L=>!0))===null||c===void 0?void 0:c.range}let w=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,E=new f;for(let D of l){if(!D.closingBracketRange)continue;let L=a&&D.range.equalsRange(a);if(!L&&!i.includeInactive)continue;let k=E.getInlineClassName(D.nestingLevel,D.nestingLevelOfEqualBracketType,w)+(i.highlightActive&&L?" "+E.activeClassName:""),R=D.openingBracketRange.getStartPosition(),O=D.closingBracketRange.getStartPosition(),$=i.horizontalGuides===x.s6.Enabled||i.horizontalGuides===x.s6.EnabledForActive&&L;if(D.range.startLineNumber===D.range.endLineNumber){$&&b[D.range.startLineNumber-o].push(new x.UO(-1,D.openingBracketRange.getEndPosition().column,k,new x.vW(!1,O.column),-1,-1));continue}let N=this.getVisibleColumnFromPosition(O),T=this.getVisibleColumnFromPosition(D.openingBracketRange.getStartPosition()),C=Math.min(T,N,D.minVisibleColumnIndentation+1),W=!1;B.LC(this.textModel.getLineContent(D.closingBracketRange.startLineNumber))<D.closingBracketRange.startColumn-1&&(W=!0);let K=Math.max(R.lineNumber,o),j=Math.min(O.lineNumber,h),F=W?1:0;for(let H=K;H<j+F;H++)b[H-o].push(new x.UO(C,-1,k,null,H===R.lineNumber?R.column:-1,H===O.lineNumber?O.column:-1));$&&(R.lineNumber>=o&&T>C&&b[R.lineNumber-o].push(new x.UO(C,-1,k,new x.vW(!1,R.column),-1,-1)),O.lineNumber<=h&&N>C&&b[O.lineNumber-o].push(new x.UO(C,-1,k,new x.vW(!W,O.column),-1,-1)))}for(let D of b)D.sort((L,k)=>L.visibleColumn-k.visibleColumn);return b}getVisibleColumnFromPosition(o){return u.i.visibleColumnFromColumn(this.textModel.getLineContent(o.lineNumber),o.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(o,h){this.assertNotDisposed();let r=this.textModel.getLineCount();if(o<1||o>r)throw new Error("Illegal value for startLineNumber");if(h<1||h>r)throw new Error("Illegal value for endLineNumber");let i=this.textModel.getOptions(),c=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,b=!!(c&&c.offSide),l=new Array(h-o+1),a=-2,w=-1,E=-2,D=-1;for(let L=o;L<=h;L++){let k=L-o,R=this._computeIndentLevel(L-1);if(R>=0)a=L-1,w=R,l[k]=Math.ceil(R/i.indentSize);else{if(a===-2){a=-1,w=-1;for(let O=L-2;O>=0;O--){let $=this._computeIndentLevel(O);if($>=0){a=O,w=$;break}}}if(E!==-1&&(E===-2||E<L-1)){E=-1,D=-1;for(let O=L;O<r;O++){let $=this._computeIndentLevel(O);if($>=0){E=O,D=$;break}}}l[k]=this._getIndentLevelForWhitespaceLine(b,w,D)}}return l}_getIndentLevelForWhitespaceLine(o,h,r){let i=this.textModel.getOptions();return h===-1||r===-1?0:h<r?1+Math.floor(h/i.indentSize):h===r||o?Math.ceil(r/i.indentSize):1+Math.floor(r/i.indentSize)}}class f{constructor(){this.activeClassName="indent-active"}getInlineClassName(o,h,r){return this.getInlineClassNameOfLevel(r?h:o)}getInlineClassNameOfLevel(o){return"bracket-indent-guide lvl-"+o%30}}},310:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ck:()=>I,oQ:()=>u});var m=t(9488),B=t(5427);class u{constructor(x){this.values=x,this.prefixSum=new Uint32Array(x.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(x,v){x=(0,B.A)(x);let f=this.values,d=this.prefixSum,o=v.length;return o!==0&&(this.values=new Uint32Array(f.length+o),this.values.set(f.subarray(0,x),0),this.values.set(f.subarray(x),x+o),this.values.set(v,x),x-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=x-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(d.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(x,v){return x=(0,B.A)(x),v=(0,B.A)(v),this.values[x]!==v&&(this.values[x]=v,x-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=x-1),!0)}removeValues(x,v){x=(0,B.A)(x),v=(0,B.A)(v);let f=this.values,d=this.prefixSum;if(x>=f.length)return!1;let o=f.length-x;return v>=o&&(v=o),v!==0&&(this.values=new Uint32Array(f.length-v),this.values.set(f.subarray(0,x),0),this.values.set(f.subarray(x+v),x),this.prefixSum=new Uint32Array(this.values.length),x-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=x-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(d.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(x){return x<0?0:(x=(0,B.A)(x),this._getPrefixSum(x))}_getPrefixSum(x){if(x<=this.prefixSumValidIndex[0])return this.prefixSum[x];let v=this.prefixSumValidIndex[0]+1;v===0&&(this.prefixSum[0]=this.values[0],v++),x>=this.values.length&&(x=this.values.length-1);for(let f=v;f<=x;f++)this.prefixSum[f]=this.prefixSum[f-1]+this.values[f];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],x),this.prefixSum[x]}getIndexOf(x){x=Math.floor(x),this.getTotalSum();let v=0,f=this.values.length-1,d=0,o=0,h=0;for(;v<=f;)if(d=v+(f-v)/2|0,o=this.prefixSum[d],h=o-this.values[d],x<h)f=d-1;else{if(!(x>=o))break;v=d+1}return new _(d,x-h)}}class I{constructor(x){this._values=x,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(x){return this._ensureValid(),x===0?0:this._prefixSum[x-1]}getIndexOf(x){this._ensureValid();let v=this._indexBySum[x],f=v>0?this._prefixSum[v-1]:0;return new _(v,x-f)}removeValues(x,v){this._values.splice(x,v),this._invalidate(x)}insertValues(x,v){this._values=(0,m.Zv)(this._values,x,v),this._invalidate(x)}_invalidate(x){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,x-1)}_ensureValid(){if(!this._isValid){for(let x=this._validEndIndex+1,v=this._values.length;x<v;x++){let f=this._values[x],d=x>0?this._prefixSum[x-1]:0;this._prefixSum[x]=d+f;for(let o=0;o<f;o++)this._indexBySum[d+o]=x}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(x,v){this._values[x]!==v&&(this._values[x]=v,this._invalidate(x))}}class _{constructor(x,v){this.index=x,this.remainder=v,this._prefixSumIndexOfResultBrand=void 0,this.index=x,this.remainder=v}}},3654:(ut,Ie,t)=>{"use strict";t.d(Ie,{HS:()=>_n,qx:()=>dn,yO:()=>Ni});var m=t(9488),B=t(1264),u=t(7301),I=t(4669),_=t(5976),A=t(7295),x=t(666),v=t(3795),f=t(3158),d=t(187),o=t(4314),h=t(3860),r=t(2075),i=t(2042),c=t(1381),b=t(4973),l=t(9111),a=t(4302);class w{constructor(S,V,Y,we){this.range=S,this.nestingLevel=V,this.nestingLevelOfEqualBracketType=Y,this.isInvalid=we}}class E{constructor(S,V,Y,we,Ne,Oe){this.range=S,this.openingBracketRange=V,this.closingBracketRange=Y,this.nestingLevel=we,this.nestingLevelOfEqualBracketType=Ne,this.bracketPairNode=Oe}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class D extends E{constructor(S,V,Y,we,Ne,Oe,et){super(S,V,Y,we,Ne,Oe),this.minVisibleColumnIndentation=et}}var L=t(2442),k=t(5382),R=t(5035),O=t(3883),$=t(1761),N=t(6735);function T(Ke,S){if(Ke.length===0)return S;if(S.length===0)return Ke;let V=new m.H9(W(Ke)),Y=W(S);Y.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let we=V.dequeue();function Ne(lt){if(lt===void 0){let gt=V.takeWhile(Ft=>!0)||[];return we&&gt.unshift(we),gt}let _t=[];for(;we&&!(0,R.xd)(lt);){let[gt,Ft]=we.splitAt(lt);_t.push(gt),lt=(0,R.BE)(gt.lengthAfter,lt),we=Ft!=null?Ft:V.dequeue()}return(0,R.xd)(lt)||_t.push(new C(!1,lt,lt)),_t}let Oe=[];function et(lt,_t,gt){if(Oe.length>0&&(0,R.rM)(Oe[Oe.length-1].endOffset,lt)){let Ft=Oe[Oe.length-1];Oe[Oe.length-1]=new L.Q(Ft.startOffset,_t,(0,R.Ii)(Ft.newLength,gt))}else Oe.push({startOffset:lt,endOffset:_t,newLength:gt})}let at=R.xl;for(let lt of Y){let _t=Ne(lt.lengthBefore);if(lt.modified){let gt=(0,R.tQ)(_t,Zt=>Zt.lengthBefore),Ft=(0,R.Ii)(at,gt);et(at,Ft,lt.lengthAfter),at=Ft}else for(let gt of _t){let Ft=at;at=(0,R.Ii)(at,gt.lengthBefore),gt.modified&&et(Ft,at,gt.lengthAfter)}}return Oe}class C{constructor(S,V,Y){this.modified=S,this.lengthBefore=V,this.lengthAfter=Y}splitAt(S){let V=(0,R.BE)(S,this.lengthAfter);return(0,R.rM)(V,R.xl)?[this,void 0]:this.modified?[new C(this.modified,this.lengthBefore,S),new C(this.modified,R.xl,V)]:[new C(this.modified,S,S),new C(this.modified,V,V)]}toString(){return`${this.modified?"M":"U"}:${(0,R.Hw)(this.lengthBefore)} -> ${(0,R.Hw)(this.lengthAfter)}`}}function W(Ke){let S=[],V=R.xl;for(let Y of Ke){let we=(0,R.BE)(V,Y.startOffset);(0,R.xd)(we)||S.push(new C(!1,we,we));let Ne=(0,R.BE)(Y.startOffset,Y.endOffset);S.push(new C(!0,Ne,Y.newLength)),V=Y.endOffset}return S}class K extends _.JT{didLanguageChange(S){return this.brackets.didLanguageChange(S)}constructor(S,V){if(super(),this.textModel=S,this.getLanguageConfiguration=V,this.didChangeEmitter=new I.Q5,this.denseKeyProvider=new $.FE,this.brackets=new k.Z(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],S.tokenization.hasTokens)S.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let Y=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),we=new N.g(this.textModel.getValue(),Y);this.initialAstWithoutTokens=(0,O.w)(we,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let S=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,S||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:S}){let V=S.map(Y=>new L.Q((0,R.Hg)(Y.fromLineNumber-1,0),(0,R.Hg)(Y.toLineNumber,0),(0,R.Hg)(Y.toLineNumber-Y.fromLineNumber+1,0)));this.handleEdits(V,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(S){let V=S.changes.map(Y=>{let we=o.e.lift(Y.range);return new L.Q((0,R.PZ)(we.getStartPosition()),(0,R.PZ)(we.getEndPosition()),(0,R.oR)(Y.text))}).reverse();this.handleEdits(V,!1)}handleEdits(S,V){let Y=T(this.queuedTextEdits,S);this.queuedTextEdits=Y,this.initialAstWithoutTokens&&!V&&(this.queuedTextEditsForInitialAstWithoutTokens=T(this.queuedTextEditsForInitialAstWithoutTokens,S))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(S,V,Y){let we=V,Ne=new N.xH(this.textModel,this.brackets);return(0,O.w)(Ne,S,we,Y)}getBracketsInRange(S,V){this.flushQueue();let Y=(0,R.Hg)(S.startLineNumber-1,S.startColumn-1),we=(0,R.Hg)(S.endLineNumber-1,S.endColumn-1);return new m.W$(Ne=>{let Oe=this.initialAstWithoutTokens||this.astWithTokens;H(Oe,R.xl,Oe.length,Y,we,Ne,0,0,new Map,V)})}getBracketPairsInRange(S,V){this.flushQueue();let Y=(0,R.PZ)(S.getStartPosition()),we=(0,R.PZ)(S.getEndPosition());return new m.W$(Ne=>{let Oe=this.initialAstWithoutTokens||this.astWithTokens,et=new z(Ne,V,this.textModel);J(Oe,R.xl,Oe.length,Y,we,et,0,new Map)})}getFirstBracketAfter(S){this.flushQueue();let V=this.initialAstWithoutTokens||this.astWithTokens;return F(V,R.xl,V.length,(0,R.PZ)(S))}getFirstBracketBefore(S){this.flushQueue();let V=this.initialAstWithoutTokens||this.astWithTokens;return j(V,R.xl,V.length,(0,R.PZ)(S))}}function j(Ke,S,V,Y){if(Ke.kind===4||Ke.kind===2){let we=[];for(let Ne of Ke.children)V=(0,R.Ii)(S,Ne.length),we.push({nodeOffsetStart:S,nodeOffsetEnd:V}),S=V;for(let Ne=we.length-1;Ne>=0;Ne--){let{nodeOffsetStart:Oe,nodeOffsetEnd:et}=we[Ne];if((0,R.VR)(Oe,Y)){let at=j(Ke.children[Ne],Oe,et,Y);if(at)return at}}return null}if(Ke.kind===3)return null;if(Ke.kind===1){let we=(0,R.Qw)(S,V);return{bracketInfo:Ke.bracketInfo,range:we}}return null}function F(Ke,S,V,Y){if(Ke.kind===4||Ke.kind===2){for(let we of Ke.children){if(V=(0,R.Ii)(S,we.length),(0,R.VR)(Y,V)){let Ne=F(we,S,V,Y);if(Ne)return Ne}S=V}return null}if(Ke.kind===3)return null;if(Ke.kind===1){let we=(0,R.Qw)(S,V);return{bracketInfo:Ke.bracketInfo,range:we}}return null}function H(Ke,S,V,Y,we,Ne,Oe,et,at,lt,_t=!1){if(Oe>200)return!0;e:for(;;)switch(Ke.kind){case 4:{let gt=Ke.childrenLength;for(let Ft=0;Ft<gt;Ft++){let Zt=Ke.getChild(Ft);if(Zt){if(V=(0,R.Ii)(S,Zt.length),(0,R.By)(S,we)&&(0,R.Zq)(V,Y)){if((0,R.Zq)(V,we)){Ke=Zt;continue e}if(!H(Zt,S,V,Y,we,Ne,Oe,0,at,lt))return!1}S=V}}return!0}case 2:{let gt=!lt||!Ke.closingBracket||Ke.closingBracket.bracketInfo.closesColorized(Ke.openingBracket.bracketInfo),Ft=0;if(at){let ii=at.get(Ke.openingBracket.text);ii===void 0&&(ii=0),Ft=ii,gt&&(ii++,at.set(Ke.openingBracket.text,ii))}let Zt=Ke.childrenLength;for(let ii=0;ii<Zt;ii++){let hi=Ke.getChild(ii);if(hi){if(V=(0,R.Ii)(S,hi.length),(0,R.By)(S,we)&&(0,R.Zq)(V,Y)){if((0,R.Zq)(V,we)&&hi.kind!==1){Ke=hi,gt?(Oe++,et=Ft+1):et=Ft;continue e}if((gt||hi.kind!==1||!Ke.closingBracket)&&!H(hi,S,V,Y,we,Ne,gt?Oe+1:Oe,gt?Ft+1:Ft,at,lt,!Ke.closingBracket))return!1}S=V}}return at==null||at.set(Ke.openingBracket.text,Ft),!0}case 3:{let gt=(0,R.Qw)(S,V);return Ne(new w(gt,Oe-1,0,!0))}case 1:{let gt=(0,R.Qw)(S,V);return Ne(new w(gt,Oe-1,et-1,_t))}case 0:return!0}}class z{constructor(S,V,Y){this.push=S,this.includeMinIndentation=V,this.textModel=Y}}function J(Ke,S,V,Y,we,Ne,Oe,et){var at;if(Oe>200)return!0;let lt=!0;if(Ke.kind===2){let _t=0;if(et){let Zt=et.get(Ke.openingBracket.text);Zt===void 0&&(Zt=0),_t=Zt,Zt++,et.set(Ke.openingBracket.text,Zt)}let gt=(0,R.Ii)(S,Ke.openingBracket.length),Ft=-1;if(Ne.includeMinIndentation&&(Ft=Ke.computeMinIndentation(S,Ne.textModel)),lt=Ne.push(new D((0,R.Qw)(S,V),(0,R.Qw)(S,gt),Ke.closingBracket?(0,R.Qw)((0,R.Ii)(gt,((at=Ke.child)===null||at===void 0?void 0:at.length)||R.xl),V):void 0,Oe,_t,Ke,Ft)),S=gt,lt&&Ke.child){let Zt=Ke.child;if(V=(0,R.Ii)(S,Zt.length),(0,R.By)(S,we)&&(0,R.Zq)(V,Y)&&(lt=J(Zt,S,V,Y,we,Ne,Oe+1,et),!lt))return!1}et==null||et.set(Ke.openingBracket.text,_t)}else{let _t=S;for(let gt of Ke.children){let Ft=_t;if(_t=(0,R.Ii)(_t,gt.length),(0,R.By)(Ft,we)&&(0,R.By)(Y,_t)&&(lt=J(gt,Ft,_t,Y,we,Ne,Oe,et),!lt))return!1}}return lt}class oe extends _.JT{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(S,V){super(),this.textModel=S,this.languageConfigurationService=V,this.bracketPairsTree=this._register(new _.XK),this.onDidChangeEmitter=new I.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(Y=>{var we;Y.languageId&&!(!((we=this.bracketPairsTree.value)===null||we===void 0)&&we.object.didLanguageChange(Y.languageId))||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(S){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(S){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(S){var V;(V=this.bracketPairsTree.value)===null||V===void 0||V.object.handleContentChanged(S)}handleDidChangeBackgroundTokenizationState(){var S;(S=this.bracketPairsTree.value)===null||S===void 0||S.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(S){var V;(V=this.bracketPairsTree.value)===null||V===void 0||V.object.handleDidChangeTokens(S)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let Y=new _.SL;this.bracketPairsTree.value=(S=Y.add(new K(this.textModel,we=>this.languageConfigurationService.getLanguageConfiguration(we))),V=Y,{object:S,dispose:()=>V==null?void 0:V.dispose()}),Y.add(this.bracketPairsTree.value.object.onDidChange(we=>this.onDidChangeEmitter.fire(we))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var S,V}getBracketPairsInRange(S){var V;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getBracketPairsInRange(S,!1))||m.W$.empty}getBracketPairsInRangeWithMinIndentation(S){var V;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getBracketPairsInRange(S,!0))||m.W$.empty}getBracketsInRange(S,V=!1){var Y;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((Y=this.bracketPairsTree.value)===null||Y===void 0?void 0:Y.object.getBracketsInRange(S,V))||m.W$.empty}findMatchingBracketUp(S,V,Y){let we=this.textModel.validatePosition(V),Ne=this.textModel.getLanguageIdAtPosition(we.lineNumber,we.column);if(this.canBuildAST){let Oe=this.languageConfigurationService.getLanguageConfiguration(Ne).bracketsNew.getClosingBracketInfo(S);if(!Oe)return null;let et=this.getBracketPairsInRange(o.e.fromPositions(V,V)).findLast(at=>Oe.closes(at.openingBracketInfo));return et?et.openingBracketRange:null}{let Oe=S.toLowerCase(),et=this.languageConfigurationService.getLanguageConfiguration(Ne).brackets;if(!et)return null;let at=et.textIsBracket[Oe];return at?p(this._findMatchingBracketUp(at,we,fe(Y))):null}}matchBracket(S,V){if(this.canBuildAST){let Y=this.getBracketPairsInRange(o.e.fromPositions(S,S)).filter(we=>we.closingBracketRange!==void 0&&(we.openingBracketRange.containsPosition(S)||we.closingBracketRange.containsPosition(S))).findLastMaxBy((0,m.tT)(we=>we.openingBracketRange.containsPosition(S)?we.openingBracketRange:we.closingBracketRange,o.e.compareRangesUsingStarts));return Y?[Y.openingBracketRange,Y.closingBracketRange]:null}{let Y=fe(V);return this._matchBracket(this.textModel.validatePosition(S),Y)}}_establishBracketSearchOffsets(S,V,Y,we){let Ne=V.getCount(),Oe=V.getLanguageId(we),et=Math.max(0,S.column-1-Y.maxBracketLength);for(let lt=we-1;lt>=0;lt--){let _t=V.getEndOffset(lt);if(_t<=et)break;if((0,l.Bu)(V.getStandardTokenType(lt))||V.getLanguageId(lt)!==Oe){et=_t;break}}let at=Math.min(V.getLineContent().length,S.column-1+Y.maxBracketLength);for(let lt=we+1;lt<Ne;lt++){let _t=V.getStartOffset(lt);if(_t>=at)break;if((0,l.Bu)(V.getStandardTokenType(lt))||V.getLanguageId(lt)!==Oe){at=_t;break}}return{searchStartOffset:et,searchEndOffset:at}}_matchBracket(S,V){let Y=S.lineNumber,we=this.textModel.tokenization.getLineTokens(Y),Ne=this.textModel.getLineContent(Y),Oe=we.findTokenIndexAtOffset(S.column-1);if(Oe<0)return null;let et=this.languageConfigurationService.getLanguageConfiguration(we.getLanguageId(Oe)).brackets;if(et&&!(0,l.Bu)(we.getStandardTokenType(Oe))){let{searchStartOffset:at,searchEndOffset:lt}=this._establishBracketSearchOffsets(S,we,et,Oe),_t=null;for(;;){let gt=a.Vr.findNextBracketInRange(et.forwardRegex,Y,Ne,at,lt);if(!gt)break;if(gt.startColumn<=S.column&&S.column<=gt.endColumn){let Ft=Ne.substring(gt.startColumn-1,gt.endColumn-1).toLowerCase(),Zt=this._matchFoundBracket(gt,et.textIsBracket[Ft],et.textIsOpenBracket[Ft],V);if(Zt){if(Zt instanceof q)return null;_t=Zt}}at=gt.endColumn-1}if(_t)return _t}if(Oe>0&&we.getStartOffset(Oe)===S.column-1){let at=Oe-1,lt=this.languageConfigurationService.getLanguageConfiguration(we.getLanguageId(at)).brackets;if(lt&&!(0,l.Bu)(we.getStandardTokenType(at))){let{searchStartOffset:_t,searchEndOffset:gt}=this._establishBracketSearchOffsets(S,we,lt,at),Ft=a.Vr.findPrevBracketInRange(lt.reversedRegex,Y,Ne,_t,gt);if(Ft&&Ft.startColumn<=S.column&&S.column<=Ft.endColumn){let Zt=Ne.substring(Ft.startColumn-1,Ft.endColumn-1).toLowerCase(),ii=this._matchFoundBracket(Ft,lt.textIsBracket[Zt],lt.textIsOpenBracket[Zt],V);if(ii)return ii instanceof q?null:ii}}}return null}_matchFoundBracket(S,V,Y,we){if(!V)return null;let Ne=Y?this._findMatchingBracketDown(V,S.getEndPosition(),we):this._findMatchingBracketUp(V,S.getStartPosition(),we);return Ne?Ne instanceof q?Ne:[S,Ne]:null}_findMatchingBracketUp(S,V,Y){let we=S.languageId,Ne=S.reversedRegex,Oe=-1,et=0,at=(lt,_t,gt,Ft)=>{for(;;){if(Y&&++et%100==0&&!Y())return q.INSTANCE;let Zt=a.Vr.findPrevBracketInRange(Ne,lt,_t,gt,Ft);if(!Zt)break;let ii=_t.substring(Zt.startColumn-1,Zt.endColumn-1).toLowerCase();if(S.isOpen(ii)?Oe++:S.isClose(ii)&&Oe--,Oe===0)return Zt;Ft=Zt.startColumn-1}return null};for(let lt=V.lineNumber;lt>=1;lt--){let _t=this.textModel.tokenization.getLineTokens(lt),gt=_t.getCount(),Ft=this.textModel.getLineContent(lt),Zt=gt-1,ii=Ft.length,hi=Ft.length;lt===V.lineNumber&&(Zt=_t.findTokenIndexAtOffset(V.column-1),ii=V.column-1,hi=V.column-1);let wi=!0;for(;Zt>=0;Zt--){let Ei=_t.getLanguageId(Zt)===we&&!(0,l.Bu)(_t.getStandardTokenType(Zt));if(Ei)wi?ii=_t.getStartOffset(Zt):(ii=_t.getStartOffset(Zt),hi=_t.getEndOffset(Zt));else if(wi&&ii!==hi){let xi=at(lt,Ft,ii,hi);if(xi)return xi}wi=Ei}if(wi&&ii!==hi){let Ei=at(lt,Ft,ii,hi);if(Ei)return Ei}}return null}_findMatchingBracketDown(S,V,Y){let we=S.languageId,Ne=S.forwardRegex,Oe=1,et=0,at=(_t,gt,Ft,Zt)=>{for(;;){if(Y&&++et%100==0&&!Y())return q.INSTANCE;let ii=a.Vr.findNextBracketInRange(Ne,_t,gt,Ft,Zt);if(!ii)break;let hi=gt.substring(ii.startColumn-1,ii.endColumn-1).toLowerCase();if(S.isOpen(hi)?Oe++:S.isClose(hi)&&Oe--,Oe===0)return ii;Ft=ii.endColumn-1}return null},lt=this.textModel.getLineCount();for(let _t=V.lineNumber;_t<=lt;_t++){let gt=this.textModel.tokenization.getLineTokens(_t),Ft=gt.getCount(),Zt=this.textModel.getLineContent(_t),ii=0,hi=0,wi=0;_t===V.lineNumber&&(ii=gt.findTokenIndexAtOffset(V.column-1),hi=V.column-1,wi=V.column-1);let Ei=!0;for(;ii<Ft;ii++){let xi=gt.getLanguageId(ii)===we&&!(0,l.Bu)(gt.getStandardTokenType(ii));if(xi)Ei||(hi=gt.getStartOffset(ii)),wi=gt.getEndOffset(ii);else if(Ei&&hi!==wi){let bi=at(_t,Zt,hi,wi);if(bi)return bi}Ei=xi}if(Ei&&hi!==wi){let xi=at(_t,Zt,hi,wi);if(xi)return xi}}return null}findPrevBracket(S){var V;let Y=this.textModel.validatePosition(S);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getFirstBracketBefore(Y))||null;let we=null,Ne=null,Oe=null;for(let et=Y.lineNumber;et>=1;et--){let at=this.textModel.tokenization.getLineTokens(et),lt=at.getCount(),_t=this.textModel.getLineContent(et),gt=lt-1,Ft=_t.length,Zt=_t.length;if(et===Y.lineNumber){gt=at.findTokenIndexAtOffset(Y.column-1),Ft=Y.column-1,Zt=Y.column-1;let hi=at.getLanguageId(gt);we!==hi&&(we=hi,Ne=this.languageConfigurationService.getLanguageConfiguration(we).brackets,Oe=this.languageConfigurationService.getLanguageConfiguration(we).bracketsNew)}let ii=!0;for(;gt>=0;gt--){let hi=at.getLanguageId(gt);if(we!==hi){if(Ne&&Oe&&ii&&Ft!==Zt){let Ei=a.Vr.findPrevBracketInRange(Ne.reversedRegex,et,_t,Ft,Zt);if(Ei)return this._toFoundBracket(Oe,Ei);ii=!1}we=hi,Ne=this.languageConfigurationService.getLanguageConfiguration(we).brackets,Oe=this.languageConfigurationService.getLanguageConfiguration(we).bracketsNew}let wi=!!Ne&&!(0,l.Bu)(at.getStandardTokenType(gt));if(wi)ii?Ft=at.getStartOffset(gt):(Ft=at.getStartOffset(gt),Zt=at.getEndOffset(gt));else if(Oe&&Ne&&ii&&Ft!==Zt){let Ei=a.Vr.findPrevBracketInRange(Ne.reversedRegex,et,_t,Ft,Zt);if(Ei)return this._toFoundBracket(Oe,Ei)}ii=wi}if(Oe&&Ne&&ii&&Ft!==Zt){let hi=a.Vr.findPrevBracketInRange(Ne.reversedRegex,et,_t,Ft,Zt);if(hi)return this._toFoundBracket(Oe,hi)}}return null}findNextBracket(S){var V;let Y=this.textModel.validatePosition(S);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((V=this.bracketPairsTree.value)===null||V===void 0?void 0:V.object.getFirstBracketAfter(Y))||null;let we=this.textModel.getLineCount(),Ne=null,Oe=null,et=null;for(let at=Y.lineNumber;at<=we;at++){let lt=this.textModel.tokenization.getLineTokens(at),_t=lt.getCount(),gt=this.textModel.getLineContent(at),Ft=0,Zt=0,ii=0;if(at===Y.lineNumber){Ft=lt.findTokenIndexAtOffset(Y.column-1),Zt=Y.column-1,ii=Y.column-1;let wi=lt.getLanguageId(Ft);Ne!==wi&&(Ne=wi,Oe=this.languageConfigurationService.getLanguageConfiguration(Ne).brackets,et=this.languageConfigurationService.getLanguageConfiguration(Ne).bracketsNew)}let hi=!0;for(;Ft<_t;Ft++){let wi=lt.getLanguageId(Ft);if(Ne!==wi){if(et&&Oe&&hi&&Zt!==ii){let xi=a.Vr.findNextBracketInRange(Oe.forwardRegex,at,gt,Zt,ii);if(xi)return this._toFoundBracket(et,xi);hi=!1}Ne=wi,Oe=this.languageConfigurationService.getLanguageConfiguration(Ne).brackets,et=this.languageConfigurationService.getLanguageConfiguration(Ne).bracketsNew}let Ei=!!Oe&&!(0,l.Bu)(lt.getStandardTokenType(Ft));if(Ei)hi||(Zt=lt.getStartOffset(Ft)),ii=lt.getEndOffset(Ft);else if(et&&Oe&&hi&&Zt!==ii){let xi=a.Vr.findNextBracketInRange(Oe.forwardRegex,at,gt,Zt,ii);if(xi)return this._toFoundBracket(et,xi)}hi=Ei}if(et&&Oe&&hi&&Zt!==ii){let wi=a.Vr.findNextBracketInRange(Oe.forwardRegex,at,gt,Zt,ii);if(wi)return this._toFoundBracket(et,wi)}}return null}findEnclosingBrackets(S,V){let Y=this.textModel.validatePosition(S);if(this.canBuildAST){let Zt=o.e.fromPositions(Y),ii=this.getBracketPairsInRange(o.e.fromPositions(Y,Y)).findLast(hi=>hi.closingBracketRange!==void 0&&hi.range.strictContainsRange(Zt));return ii?[ii.openingBracketRange,ii.closingBracketRange]:null}let we=fe(V),Ne=this.textModel.getLineCount(),Oe=new Map,et=[],at=(Zt,ii)=>{if(!Oe.has(Zt)){let hi=[];for(let wi=0,Ei=ii?ii.brackets.length:0;wi<Ei;wi++)hi[wi]=0;Oe.set(Zt,hi)}et=Oe.get(Zt)},lt=0,_t=(Zt,ii,hi,wi,Ei)=>{for(;;){if(we&&++lt%100==0&&!we())return q.INSTANCE;let xi=a.Vr.findNextBracketInRange(Zt.forwardRegex,ii,hi,wi,Ei);if(!xi)break;let bi=hi.substring(xi.startColumn-1,xi.endColumn-1).toLowerCase(),vn=Zt.textIsBracket[bi];if(vn&&(vn.isOpen(bi)?et[vn.index]++:vn.isClose(bi)&&et[vn.index]--,et[vn.index]===-1))return this._matchFoundBracket(xi,vn,!1,we);wi=xi.endColumn-1}return null},gt=null,Ft=null;for(let Zt=Y.lineNumber;Zt<=Ne;Zt++){let ii=this.textModel.tokenization.getLineTokens(Zt),hi=ii.getCount(),wi=this.textModel.getLineContent(Zt),Ei=0,xi=0,bi=0;if(Zt===Y.lineNumber){Ei=ii.findTokenIndexAtOffset(Y.column-1),xi=Y.column-1,bi=Y.column-1;let Pn=ii.getLanguageId(Ei);gt!==Pn&&(gt=Pn,Ft=this.languageConfigurationService.getLanguageConfiguration(gt).brackets,at(gt,Ft))}let vn=!0;for(;Ei<hi;Ei++){let Pn=ii.getLanguageId(Ei);if(gt!==Pn){if(Ft&&vn&&xi!==bi){let Qn=_t(Ft,Zt,wi,xi,bi);if(Qn)return p(Qn);vn=!1}gt=Pn,Ft=this.languageConfigurationService.getLanguageConfiguration(gt).brackets,at(gt,Ft)}let xn=!!Ft&&!(0,l.Bu)(ii.getStandardTokenType(Ei));if(xn)vn||(xi=ii.getStartOffset(Ei)),bi=ii.getEndOffset(Ei);else if(Ft&&vn&&xi!==bi){let Qn=_t(Ft,Zt,wi,xi,bi);if(Qn)return p(Qn)}vn=xn}if(Ft&&vn&&xi!==bi){let Pn=_t(Ft,Zt,wi,xi,bi);if(Pn)return p(Pn)}}return null}_toFoundBracket(S,V){if(!V)return null;let Y=this.textModel.getValueInRange(V);Y=Y.toLowerCase();let we=S.getBracketInfo(Y);return we?{range:V,bracketInfo:we}:null}}function fe(Ke){if(Ke===void 0)return()=>!0;{let S=Date.now();return()=>Date.now()-S<=Ke}}class q{constructor(){this._searchCanceledBrand=void 0}}function p(Ke){return Ke instanceof q?null:Ke}q.INSTANCE=new q;var re=t(8625),ne=t(7781);class ie extends _.JT{constructor(S){super(),this.textModel=S,this.colorProvider=new se,this.onDidChangeEmitter=new I.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=S.getOptions().bracketPairColorizationOptions,this._register(S.bracketPairs.onDidChange(V=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(S){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(S,V,Y,we){return we||V===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(S,!0).map(Ne=>({id:`bracket${Ne.range.toString()}-${Ne.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(Ne,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:Ne.range})).toArray():[]}getAllDecorations(S,V){return S===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new o.e(1,1,this.textModel.getLineCount(),1),S,V):[]}}class se{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(S,V){return S.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(V?S.nestingLevelOfEqualBracketType:S.nestingLevel)}getInlineClassNameOfLevel(S){return"bracket-highlighting-"+S%30}}(0,ne.Ic)((Ke,S)=>{let V=[re.zJ,re.Vs,re.CE,re.UP,re.r0,re.m1],Y=new se;S.addRule(`.monaco-editor .${Y.unexpectedClosingBracketClassName} { color: ${Ke.getColor(re.ts)}; }`);let we=V.map(Ne=>Ke.getColor(Ne)).filter(Ne=>!!Ne).filter(Ne=>!Ne.isTransparent());for(let Ne=0;Ne<30;Ne++){let Oe=we[Ne%we.length];S.addRule(`.monaco-editor .${Y.getInlineClassNameOfLevel(Ne)} { color: ${Oe}; }`)}});var ce=t(5215),be=t(1516);class de{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function U(Ke,S,V,Y,we){let Ne;for(we.spacesDiff=0,we.looksLikeAlignment=!1,Ne=0;Ne<S&&Ne<Y&&Ke.charCodeAt(Ne)===V.charCodeAt(Ne);Ne++);let Oe=0,et=0;for(let Ft=Ne;Ft<S;Ft++)Ke.charCodeAt(Ft)===32?Oe++:et++;let at=0,lt=0;for(let Ft=Ne;Ft<Y;Ft++)V.charCodeAt(Ft)===32?at++:lt++;if(Oe>0&&et>0||at>0&&lt>0)return;let _t=Math.abs(et-lt),gt=Math.abs(Oe-at);if(_t===0)return we.spacesDiff=gt,void(gt>0&&0<=at-1&&at-1<Ke.length&&at<V.length&&V.charCodeAt(at)!==32&&Ke.charCodeAt(at-1)===32&&Ke.charCodeAt(Ke.length-1)===44&&(we.looksLikeAlignment=!0));gt%_t!=0||(we.spacesDiff=gt/_t)}function ue(Ke,S,V){let Y=Math.min(Ke.getLineCount(),1e4),we=0,Ne=0,Oe="",et=0,at=[2,4,6,8,3,5,7],lt=[0,0,0,0,0,0,0,0,0],_t=new de;for(let Zt=1;Zt<=Y;Zt++){let ii=Ke.getLineLength(Zt),hi=Ke.getLineContent(Zt),wi=ii<=65536,Ei=!1,xi=0,bi=0,vn=0;for(let xn=0,Qn=ii;xn<Qn;xn++){let ko=wi?hi.charCodeAt(xn):Ke.getLineCharCode(Zt,xn);if(ko===9)vn++;else{if(ko!==32){Ei=!0,xi=xn;break}bi++}}if(!Ei||(vn>0?we++:bi>1&&Ne++,U(Oe,et,hi,xi,_t),_t.looksLikeAlignment&&(!V||S!==_t.spacesDiff)))continue;let Pn=_t.spacesDiff;Pn<=8&&lt[Pn]++,Oe=hi,et=xi}let gt=V;we!==Ne&&(gt=we<Ne);let Ft=S;if(gt){let Zt=gt?0:.1*Y;at.forEach(ii=>{let hi=lt[ii];hi>Zt&&(Zt=hi,Ft=ii)}),Ft===4&&lt[4]>0&&lt[2]>0&&lt[2]>=lt[4]/2&&(Ft=2)}return{insertSpaces:gt,tabSize:Ft}}function ve(Ke){return(1&Ke.metadata)>>>0}function X(Ke,S){Ke.metadata=254&Ke.metadata|S<<0}function ye(Ke){return(2&Ke.metadata)>>>1==1}function Ce(Ke,S){Ke.metadata=253&Ke.metadata|(S?1:0)<<1}function Ee(Ke){return(4&Ke.metadata)>>>2==1}function Ae(Ke,S){Ke.metadata=251&Ke.metadata|(S?1:0)<<2}function Fe(Ke){return(64&Ke.metadata)>>>6==1}function _e(Ke,S){Ke.metadata=191&Ke.metadata|(S?1:0)<<6}function te(Ke,S){Ke.metadata=231&Ke.metadata|S<<3}function Le(Ke,S){Ke.metadata=223&Ke.metadata|(S?1:0)<<5}class ke{constructor(S,V,Y){this.metadata=0,this.parent=this,this.left=this,this.right=this,X(this,1),this.start=V,this.end=Y,this.delta=0,this.maxEnd=Y,this.id=S,this.ownerId=0,this.options=null,Ae(this,!1),_e(this,!1),te(this,1),Le(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=V,this.cachedAbsoluteEnd=Y,this.range=null,Ce(this,!1)}reset(S,V,Y,we){this.start=V,this.end=Y,this.maxEnd=Y,this.cachedVersionId=S,this.cachedAbsoluteStart=V,this.cachedAbsoluteEnd=Y,this.range=we}setOptions(S){this.options=S;let V=this.options.className;Ae(this,V==="squiggly-error"||V==="squiggly-warning"||V==="squiggly-info"),_e(this,this.options.glyphMarginClassName!==null),te(this,this.options.stickiness),Le(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(S,V,Y){this.cachedVersionId!==Y&&(this.range=null),this.cachedVersionId=Y,this.cachedAbsoluteStart=S,this.cachedAbsoluteEnd=V}detach(){this.parent=null,this.left=null,this.right=null}}let le=new ke(null,0,0);le.parent=le,le.left=le,le.right=le,X(le,0);class ee{constructor(){this.root=le,this.requestNormalizeDelta=!1}intervalSearch(S,V,Y,we,Ne,Oe){return this.root===le?[]:function(et,at,lt,_t,gt,Ft,Zt){let ii=et.root,hi=0,wi=0,Ei=0,xi=0,bi=[],vn=0;for(;ii!==le;)if(ye(ii))Ce(ii.left,!1),Ce(ii.right,!1),ii===ii.parent.right&&(hi-=ii.parent.delta),ii=ii.parent;else{if(!ye(ii.left)){if(wi=hi+ii.maxEnd,wi<at){Ce(ii,!0);continue}if(ii.left!==le){ii=ii.left;continue}}if(Ei=hi+ii.start,Ei>lt)Ce(ii,!0);else{if(xi=hi+ii.end,xi>=at){ii.setCachedOffsets(Ei,xi,Ft);let Pn=!0;_t&&ii.ownerId&&ii.ownerId!==_t&&(Pn=!1),gt&&Ee(ii)&&(Pn=!1),Zt&&!Fe(ii)&&(Pn=!1),Pn&&(bi[vn++]=ii)}Ce(ii,!0),ii.right===le||ye(ii.right)||(hi+=ii.delta,ii=ii.right)}}return Ce(et.root,!1),bi}(this,S,V,Y,we,Ne,Oe)}search(S,V,Y,we){return this.root===le?[]:function(Ne,Oe,et,at,lt){let _t=Ne.root,gt=0,Ft=0,Zt=0,ii=[],hi=0;for(;_t!==le;){if(ye(_t)){Ce(_t.left,!1),Ce(_t.right,!1),_t===_t.parent.right&&(gt-=_t.parent.delta),_t=_t.parent;continue}if(_t.left!==le&&!ye(_t.left)){_t=_t.left;continue}Ft=gt+_t.start,Zt=gt+_t.end,_t.setCachedOffsets(Ft,Zt,at);let wi=!0;Oe&&_t.ownerId&&_t.ownerId!==Oe&&(wi=!1),et&&Ee(_t)&&(wi=!1),lt&&!Fe(_t)&&(wi=!1),wi&&(ii[hi++]=_t),Ce(_t,!0),_t.right===le||ye(_t.right)||(gt+=_t.delta,_t=_t.right)}return Ce(Ne.root,!1),ii}(this,S,V,Y,we)}collectNodesFromOwner(S){return function(V,Y){let we=V.root,Ne=[],Oe=0;for(;we!==le;)ye(we)?(Ce(we.left,!1),Ce(we.right,!1),we=we.parent):we.left===le||ye(we.left)?(we.ownerId===Y&&(Ne[Oe++]=we),Ce(we,!0),we.right===le||ye(we.right)||(we=we.right)):we=we.left;return Ce(V.root,!1),Ne}(this,S)}collectNodesPostOrder(){return function(S){let V=S.root,Y=[],we=0;for(;V!==le;)ye(V)?(Ce(V.left,!1),Ce(V.right,!1),V=V.parent):V.left===le||ye(V.left)?V.right===le||ye(V.right)?(Y[we++]=V,Ce(V,!0)):V=V.right:V=V.left;return Ce(S.root,!1),Y}(this)}insert(S){We(this,S),this._normalizeDeltaIfNecessary()}delete(S){Ve(this,S),this._normalizeDeltaIfNecessary()}resolveNode(S,V){let Y=S,we=0;for(;S!==this.root;)S===S.parent.right&&(we+=S.parent.delta),S=S.parent;let Ne=Y.start+we,Oe=Y.end+we;Y.setCachedOffsets(Ne,Oe,V)}acceptReplace(S,V,Y,we){let Ne=function(Oe,et,at){let lt=Oe.root,_t=0,gt=0,Ft=0,Zt=0,ii=[],hi=0;for(;lt!==le;)if(ye(lt))Ce(lt.left,!1),Ce(lt.right,!1),lt===lt.parent.right&&(_t-=lt.parent.delta),lt=lt.parent;else{if(!ye(lt.left)){if(gt=_t+lt.maxEnd,gt<et){Ce(lt,!0);continue}if(lt.left!==le){lt=lt.left;continue}}Ft=_t+lt.start,Ft>at?Ce(lt,!0):(Zt=_t+lt.end,Zt>=et&&(lt.setCachedOffsets(Ft,Zt,0),ii[hi++]=lt),Ce(lt,!0),lt.right===le||ye(lt.right)||(_t+=lt.delta,lt=lt.right))}return Ce(Oe.root,!1),ii}(this,S,S+V);for(let Oe=0,et=Ne.length;Oe<et;Oe++)Ve(this,Ne[Oe]);this._normalizeDeltaIfNecessary(),function(Oe,et,at,lt){let _t=Oe.root,gt=0,Ft=0,Zt=0,ii=lt-(at-et);for(;_t!==le;)if(ye(_t))Ce(_t.left,!1),Ce(_t.right,!1),_t===_t.parent.right&&(gt-=_t.parent.delta),ht(_t),_t=_t.parent;else{if(!ye(_t.left)){if(Ft=gt+_t.maxEnd,Ft<et){Ce(_t,!0);continue}if(_t.left!==le){_t=_t.left;continue}}Zt=gt+_t.start,Zt>at?(_t.start+=ii,_t.end+=ii,_t.delta+=ii,(_t.delta<-1073741824||_t.delta>1073741824)&&(Oe.requestNormalizeDelta=!0),Ce(_t,!0)):(Ce(_t,!0),_t.right===le||ye(_t.right)||(gt+=_t.delta,_t=_t.right))}Ce(Oe.root,!1)}(this,S,S+V,Y),this._normalizeDeltaIfNecessary();for(let Oe=0,et=Ne.length;Oe<et;Oe++){let at=Ne[Oe];at.start=at.cachedAbsoluteStart,at.end=at.cachedAbsoluteEnd,xe(at,S,S+V,Y,we),at.maxEnd=at.end,We(this,at)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(S){let V=S.root,Y=0;for(;V!==le;)V.left===le||ye(V.left)?V.right===le||ye(V.right)?(V.start=Y+V.start,V.end=Y+V.end,V.delta=0,ht(V),Ce(V,!0),Ce(V.left,!1),Ce(V.right,!1),V===V.parent.right&&(Y-=V.parent.delta),V=V.parent):(Y+=V.delta,V=V.right):V=V.left;Ce(S.root,!1)}(this))}}function me(Ke,S,V,Y){return Ke<V||!(Ke>V)&&Y!==1&&(Y===2||S)}function xe(Ke,S,V,Y,we){let Ne=function(wi){return(24&wi.metadata)>>>3}(Ke),Oe=Ne===0||Ne===2,et=Ne===1||Ne===2,at=V-S,lt=Y,_t=Math.min(at,lt),gt=Ke.start,Ft=!1,Zt=Ke.end,ii=!1;S<=gt&&Zt<=V&&function(wi){return(32&wi.metadata)>>>5==1}(Ke)&&(Ke.start=S,Ft=!0,Ke.end=S,ii=!0);{let wi=we?1:at>0?2:0;!Ft&&me(gt,Oe,S,wi)&&(Ft=!0),!ii&&me(Zt,et,S,wi)&&(ii=!0)}if(_t>0&&!we){let wi=at>lt?2:0;!Ft&&me(gt,Oe,S+_t,wi)&&(Ft=!0),!ii&&me(Zt,et,S+_t,wi)&&(ii=!0)}{let wi=we?1:0;!Ft&&me(gt,Oe,V,wi)&&(Ke.start=S+lt,Ft=!0),!ii&&me(Zt,et,V,wi)&&(Ke.end=S+lt,ii=!0)}let hi=lt-at;Ft||(Ke.start=Math.max(0,gt+hi)),ii||(Ke.end=Math.max(0,Zt+hi)),Ke.start>Ke.end&&(Ke.end=Ke.start)}function We(Ke,S){if(Ke.root===le)return S.parent=le,S.left=le,S.right=le,X(S,0),Ke.root=S,Ke.root;(function(Y,we){let Ne=0,Oe=Y.root,et=we.start,at=we.end;for(;;)if(lt=et,_t=at,gt=Oe.start+Ne,Ft=Oe.end+Ne,(lt===gt?_t-Ft:lt-gt)<0){if(Oe.left===le){we.start-=Ne,we.end-=Ne,we.maxEnd-=Ne,Oe.left=we;break}Oe=Oe.left}else{if(Oe.right===le){we.start-=Ne+Oe.delta,we.end-=Ne+Oe.delta,we.maxEnd-=Ne+Oe.delta,Oe.right=we;break}Ne+=Oe.delta,Oe=Oe.right}var lt,_t,gt,Ft;we.parent=Oe,we.left=le,we.right=le,X(we,1)})(Ke,S),xt(S.parent);let V=S;for(;V!==Ke.root&&ve(V.parent)===1;)if(V.parent===V.parent.parent.left){let Y=V.parent.parent.right;ve(Y)===1?(X(V.parent,0),X(Y,0),X(V.parent.parent,1),V=V.parent.parent):(V===V.parent.right&&(V=V.parent,tt(Ke,V)),X(V.parent,0),X(V.parent.parent,1),Qe(Ke,V.parent.parent))}else{let Y=V.parent.parent.left;ve(Y)===1?(X(V.parent,0),X(Y,0),X(V.parent.parent,1),V=V.parent.parent):(V===V.parent.left&&(V=V.parent,Qe(Ke,V)),X(V.parent,0),X(V.parent.parent,1),tt(Ke,V.parent.parent))}return X(Ke.root,0),S}function Ve(Ke,S){let V,Y;if(S.left===le?(V=S.right,Y=S,V.delta+=S.delta,(V.delta<-1073741824||V.delta>1073741824)&&(Ke.requestNormalizeDelta=!0),V.start+=S.delta,V.end+=S.delta):S.right===le?(V=S.left,Y=S):(Y=function(Oe){for(;Oe.left!==le;)Oe=Oe.left;return Oe}(S.right),V=Y.right,V.start+=Y.delta,V.end+=Y.delta,V.delta+=Y.delta,(V.delta<-1073741824||V.delta>1073741824)&&(Ke.requestNormalizeDelta=!0),Y.start+=S.delta,Y.end+=S.delta,Y.delta=S.delta,(Y.delta<-1073741824||Y.delta>1073741824)&&(Ke.requestNormalizeDelta=!0)),Y===Ke.root)return Ke.root=V,X(V,0),S.detach(),Ye(),ht(V),void(Ke.root.parent=le);let we=ve(Y)===1;if(Y===Y.parent.left?Y.parent.left=V:Y.parent.right=V,Y===S?V.parent=Y.parent:(Y.parent===S?V.parent=Y:V.parent=Y.parent,Y.left=S.left,Y.right=S.right,Y.parent=S.parent,X(Y,ve(S)),S===Ke.root?Ke.root=Y:S===S.parent.left?S.parent.left=Y:S.parent.right=Y,Y.left!==le&&(Y.left.parent=Y),Y.right!==le&&(Y.right.parent=Y)),S.detach(),we)return xt(V.parent),Y!==S&&(xt(Y),xt(Y.parent)),void Ye();let Ne;for(xt(V),xt(V.parent),Y!==S&&(xt(Y),xt(Y.parent));V!==Ke.root&&ve(V)===0;)V===V.parent.left?(Ne=V.parent.right,ve(Ne)===1&&(X(Ne,0),X(V.parent,1),tt(Ke,V.parent),Ne=V.parent.right),ve(Ne.left)===0&&ve(Ne.right)===0?(X(Ne,1),V=V.parent):(ve(Ne.right)===0&&(X(Ne.left,0),X(Ne,1),Qe(Ke,Ne),Ne=V.parent.right),X(Ne,ve(V.parent)),X(V.parent,0),X(Ne.right,0),tt(Ke,V.parent),V=Ke.root)):(Ne=V.parent.left,ve(Ne)===1&&(X(Ne,0),X(V.parent,1),Qe(Ke,V.parent),Ne=V.parent.left),ve(Ne.left)===0&&ve(Ne.right)===0?(X(Ne,1),V=V.parent):(ve(Ne.left)===0&&(X(Ne.right,0),X(Ne,1),tt(Ke,Ne),Ne=V.parent.left),X(Ne,ve(V.parent)),X(V.parent,0),X(Ne.left,0),Qe(Ke,V.parent),V=Ke.root));X(V,0),Ye()}function Ye(){le.parent=le,le.delta=0,le.start=0,le.end=0}function tt(Ke,S){let V=S.right;V.delta+=S.delta,(V.delta<-1073741824||V.delta>1073741824)&&(Ke.requestNormalizeDelta=!0),V.start+=S.delta,V.end+=S.delta,S.right=V.left,V.left!==le&&(V.left.parent=S),V.parent=S.parent,S.parent===le?Ke.root=V:S===S.parent.left?S.parent.left=V:S.parent.right=V,V.left=S,S.parent=V,ht(S),ht(V)}function Qe(Ke,S){let V=S.left;S.delta-=V.delta,(S.delta<-1073741824||S.delta>1073741824)&&(Ke.requestNormalizeDelta=!0),S.start-=V.delta,S.end-=V.delta,S.left=V.right,V.right!==le&&(V.right.parent=S),V.parent=S.parent,S.parent===le?Ke.root=V:S===S.parent.right?S.parent.right=V:S.parent.left=V,V.right=S,S.parent=V,ht(S),ht(V)}function bt(Ke){let S=Ke.end;if(Ke.left!==le){let V=Ke.left.maxEnd;V>S&&(S=V)}if(Ke.right!==le){let V=Ke.right.maxEnd+Ke.delta;V>S&&(S=V)}return S}function ht(Ke){Ke.maxEnd=bt(Ke)}function xt(Ke){for(;Ke!==le;){let S=bt(Ke);if(Ke.maxEnd===S)return;Ke.maxEnd=S,Ke=Ke.parent}}class Qt{constructor(S,V){this.piece=S,this.color=V,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==At)return mi(this.right);let S=this;for(;S.parent!==At&&S.parent.left!==S;)S=S.parent;return S.parent===At?At:S.parent}prev(){if(this.left!==At)return Lt(this.left);let S=this;for(;S.parent!==At&&S.parent.right!==S;)S=S.parent;return S.parent===At?At:S.parent}detach(){this.parent=null,this.left=null,this.right=null}}let At=new Qt(null,0);function mi(Ke){for(;Ke.left!==At;)Ke=Ke.left;return Ke}function Lt(Ke){for(;Ke.right!==At;)Ke=Ke.right;return Ke}function ct(Ke){return Ke===At?0:Ke.size_left+Ke.piece.length+ct(Ke.right)}function Kt(Ke){return Ke===At?0:Ke.lf_left+Ke.piece.lineFeedCnt+Kt(Ke.right)}function pi(){At.parent=At}function li(Ke,S){let V=S.right;V.size_left+=S.size_left+(S.piece?S.piece.length:0),V.lf_left+=S.lf_left+(S.piece?S.piece.lineFeedCnt:0),S.right=V.left,V.left!==At&&(V.left.parent=S),V.parent=S.parent,S.parent===At?Ke.root=V:S.parent.left===S?S.parent.left=V:S.parent.right=V,V.left=S,S.parent=V}function Wi(Ke,S){let V=S.left;S.left=V.right,V.right!==At&&(V.right.parent=S),V.parent=S.parent,S.size_left-=V.size_left+(V.piece?V.piece.length:0),S.lf_left-=V.lf_left+(V.piece?V.piece.lineFeedCnt:0),S.parent===At?Ke.root=V:S===S.parent.right?S.parent.right=V:S.parent.left=V,V.right=S,S.parent=V}function Vi(Ke,S){let V,Y;if(S.left===At?(Y=S,V=Y.right):S.right===At?(Y=S,V=Y.left):(Y=mi(S.right),V=Y.right),Y===Ke.root)return Ke.root=V,V.color=0,S.detach(),pi(),void(Ke.root.parent=At);let we=Y.color===1;if(Y===Y.parent.left?Y.parent.left=V:Y.parent.right=V,Y===S?(V.parent=Y.parent,rn(Ke,V)):(Y.parent===S?V.parent=Y:V.parent=Y.parent,rn(Ke,V),Y.left=S.left,Y.right=S.right,Y.parent=S.parent,Y.color=S.color,S===Ke.root?Ke.root=Y:S===S.parent.left?S.parent.left=Y:S.parent.right=Y,Y.left!==At&&(Y.left.parent=Y),Y.right!==At&&(Y.right.parent=Y),Y.size_left=S.size_left,Y.lf_left=S.lf_left,rn(Ke,Y)),S.detach(),V.parent.left===V){let Oe=ct(V),et=Kt(V);if(Oe!==V.parent.size_left||et!==V.parent.lf_left){let at=Oe-V.parent.size_left,lt=et-V.parent.lf_left;V.parent.size_left=Oe,V.parent.lf_left=et,en(Ke,V.parent,at,lt)}}if(rn(Ke,V.parent),we)return void pi();let Ne;for(;V!==Ke.root&&V.color===0;)V===V.parent.left?(Ne=V.parent.right,Ne.color===1&&(Ne.color=0,V.parent.color=1,li(Ke,V.parent),Ne=V.parent.right),Ne.left.color===0&&Ne.right.color===0?(Ne.color=1,V=V.parent):(Ne.right.color===0&&(Ne.left.color=0,Ne.color=1,Wi(Ke,Ne),Ne=V.parent.right),Ne.color=V.parent.color,V.parent.color=0,Ne.right.color=0,li(Ke,V.parent),V=Ke.root)):(Ne=V.parent.left,Ne.color===1&&(Ne.color=0,V.parent.color=1,Wi(Ke,V.parent),Ne=V.parent.left),Ne.left.color===0&&Ne.right.color===0?(Ne.color=1,V=V.parent):(Ne.left.color===0&&(Ne.right.color=0,Ne.color=1,li(Ke,Ne),Ne=V.parent.left),Ne.color=V.parent.color,V.parent.color=0,Ne.left.color=0,Wi(Ke,V.parent),V=Ke.root));V.color=0,pi()}function Xi(Ke,S){for(rn(Ke,S);S!==Ke.root&&S.parent.color===1;)if(S.parent===S.parent.parent.left){let V=S.parent.parent.right;V.color===1?(S.parent.color=0,V.color=0,S.parent.parent.color=1,S=S.parent.parent):(S===S.parent.right&&li(Ke,S=S.parent),S.parent.color=0,S.parent.parent.color=1,Wi(Ke,S.parent.parent))}else{let V=S.parent.parent.left;V.color===1?(S.parent.color=0,V.color=0,S.parent.parent.color=1,S=S.parent.parent):(S===S.parent.left&&Wi(Ke,S=S.parent),S.parent.color=0,S.parent.parent.color=1,li(Ke,S.parent.parent))}Ke.root.color=0}function en(Ke,S,V,Y){for(;S!==Ke.root&&S!==At;)S.parent.left===S&&(S.parent.size_left+=V,S.parent.lf_left+=Y),S=S.parent}function rn(Ke,S){let V=0,Y=0;if(S!==Ke.root){for(;S!==Ke.root&&S===S.parent.right;)S=S.parent;if(S!==Ke.root)for(V=ct((S=S.parent).left)-S.size_left,Y=Kt(S.left)-S.lf_left,S.size_left+=V,S.lf_left+=Y;S!==Ke.root&&(V!==0||Y!==0);)S.parent.left===S&&(S.parent.size_left+=V,S.parent.lf_left+=Y),S=S.parent}}At.parent=At,At.left=At,At.right=At,At.color=0;var tn=t(7277);let yn=65535;function sn(Ke){let S;return S=Ke[Ke.length-1]<65536?new Uint16Array(Ke.length):new Uint32Array(Ke.length),S.set(Ke,0),S}class ci{constructor(S,V,Y,we,Ne){this.lineStarts=S,this.cr=V,this.lf=Y,this.crlf=we,this.isBasicASCII=Ne}}function Xt(Ke,S=!0){let V=[0],Y=1;for(let we=0,Ne=Ke.length;we<Ne;we++){let Oe=Ke.charCodeAt(we);Oe===13?we+1<Ne&&Ke.charCodeAt(we+1)===10?(V[Y++]=we+2,we++):V[Y++]=we+1:Oe===10&&(V[Y++]=we+1)}return S?sn(V):V}class kt{constructor(S,V,Y,we,Ne){this.bufferIndex=S,this.start=V,this.end=Y,this.lineFeedCnt=we,this.length=Ne}}class It{constructor(S,V){this.buffer=S,this.lineStarts=V}}class ft{constructor(S,V){this._pieces=[],this._tree=S,this._BOM=V,this._index=0,S.root!==At&&S.iterate(S.root,Y=>(Y!==At&&this._pieces.push(Y.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Mt{constructor(S){this._limit=S,this._cache=[]}get(S){for(let V=this._cache.length-1;V>=0;V--){let Y=this._cache[V];if(Y.nodeStartOffset<=S&&Y.nodeStartOffset+Y.node.piece.length>=S)return Y}return null}get2(S){for(let V=this._cache.length-1;V>=0;V--){let Y=this._cache[V];if(Y.nodeStartLineNumber&&Y.nodeStartLineNumber<S&&Y.nodeStartLineNumber+Y.node.piece.lineFeedCnt>=S)return Y}return null}set(S){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(S)}validate(S){let V=!1,Y=this._cache;for(let we=0;we<Y.length;we++){let Ne=Y[we];(Ne.node.parent===null||Ne.nodeStartOffset>=S)&&(Y[we]=null,V=!0)}if(V){let we=[];for(let Ne of Y)Ne!==null&&we.push(Ne);this._cache=we}}}class jt{constructor(S,V,Y){this.create(S,V,Y)}create(S,V,Y){this._buffers=[new It("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=At,this._lineCnt=1,this._length=0,this._EOL=V,this._EOLLength=V.length,this._EOLNormalized=Y;let we=null;for(let Ne=0,Oe=S.length;Ne<Oe;Ne++)if(S[Ne].buffer.length>0){S[Ne].lineStarts||(S[Ne].lineStarts=Xt(S[Ne].buffer));let et=new kt(Ne+1,{line:0,column:0},{line:S[Ne].lineStarts.length-1,column:S[Ne].buffer.length-S[Ne].lineStarts[S[Ne].lineStarts.length-1]},S[Ne].lineStarts.length-1,S[Ne].buffer.length);this._buffers.push(S[Ne]),we=this.rbInsertRight(we,et)}this._searchCache=new Mt(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(S){let V=65535-Math.floor(21845),Y=2*V,we="",Ne=0,Oe=[];if(this.iterate(this.root,et=>{let at=this.getNodeContent(et),lt=at.length;if(Ne<=V||Ne+lt<Y)return we+=at,Ne+=lt,!0;let _t=we.replace(/\r\n|\r|\n/g,S);return Oe.push(new It(_t,Xt(_t))),we=at,Ne=lt,!0}),Ne>0){let et=we.replace(/\r\n|\r|\n/g,S);Oe.push(new It(et,Xt(et)))}this.create(Oe,S,!0)}getEOL(){return this._EOL}setEOL(S){this._EOL=S,this._EOLLength=this._EOL.length,this.normalizeEOL(S)}createSnapshot(S){return new ft(this,S)}getOffsetAt(S,V){let Y=0,we=this.root;for(;we!==At;)if(we.left!==At&&we.lf_left+1>=S)we=we.left;else{if(we.lf_left+we.piece.lineFeedCnt+1>=S)return Y+=we.size_left,Y+(this.getAccumulatedValue(we,S-we.lf_left-2)+V-1);S-=we.lf_left+we.piece.lineFeedCnt,Y+=we.size_left+we.piece.length,we=we.right}return Y}getPositionAt(S){S=Math.floor(S),S=Math.max(0,S);let V=this.root,Y=0,we=S;for(;V!==At;)if(V.size_left!==0&&V.size_left>=S)V=V.left;else{if(V.size_left+V.piece.length>=S){let Ne=this.getIndexOf(V,S-V.size_left);if(Y+=V.lf_left+Ne.index,Ne.index===0){let Oe=we-this.getOffsetAt(Y+1,1);return new d.L(Y+1,Oe+1)}return new d.L(Y+1,Ne.remainder+1)}if(S-=V.size_left+V.piece.length,Y+=V.lf_left+V.piece.lineFeedCnt,V.right===At){let Ne=we-S-this.getOffsetAt(Y+1,1);return new d.L(Y+1,Ne+1)}V=V.right}return new d.L(1,1)}getValueInRange(S,V){if(S.startLineNumber===S.endLineNumber&&S.startColumn===S.endColumn)return"";let Y=this.nodeAt2(S.startLineNumber,S.startColumn),we=this.nodeAt2(S.endLineNumber,S.endColumn),Ne=this.getValueInRange2(Y,we);return V?V===this._EOL&&this._EOLNormalized&&V===this.getEOL()&&this._EOLNormalized?Ne:Ne.replace(/\r\n|\r|\n/g,V):Ne}getValueInRange2(S,V){if(S.node===V.node){let et=S.node,at=this._buffers[et.piece.bufferIndex].buffer,lt=this.offsetInBuffer(et.piece.bufferIndex,et.piece.start);return at.substring(lt+S.remainder,lt+V.remainder)}let Y=S.node,we=this._buffers[Y.piece.bufferIndex].buffer,Ne=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start),Oe=we.substring(Ne+S.remainder,Ne+Y.piece.length);for(Y=Y.next();Y!==At;){let et=this._buffers[Y.piece.bufferIndex].buffer,at=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start);if(Y===V.node){Oe+=et.substring(at,at+V.remainder);break}Oe+=et.substr(at,Y.piece.length),Y=Y.next()}return Oe}getLinesContent(){let S=[],V=0,Y="",we=!1;return this.iterate(this.root,Ne=>{if(Ne===At)return!0;let Oe=Ne.piece,et=Oe.length;if(et===0)return!0;let at=this._buffers[Oe.bufferIndex].buffer,lt=this._buffers[Oe.bufferIndex].lineStarts,_t=Oe.start.line,gt=Oe.end.line,Ft=lt[_t]+Oe.start.column;if(we&&(at.charCodeAt(Ft)===10&&(Ft++,et--),S[V++]=Y,Y="",we=!1,et===0))return!0;if(_t===gt)return this._EOLNormalized||at.charCodeAt(Ft+et-1)!==13?Y+=at.substr(Ft,et):(we=!0,Y+=at.substr(Ft,et-1)),!0;Y+=this._EOLNormalized?at.substring(Ft,Math.max(Ft,lt[_t+1]-this._EOLLength)):at.substring(Ft,lt[_t+1]).replace(/(\r\n|\r|\n)$/,""),S[V++]=Y;for(let Zt=_t+1;Zt<gt;Zt++)Y=this._EOLNormalized?at.substring(lt[Zt],lt[Zt+1]-this._EOLLength):at.substring(lt[Zt],lt[Zt+1]).replace(/(\r\n|\r|\n)$/,""),S[V++]=Y;return this._EOLNormalized||at.charCodeAt(lt[gt]+Oe.end.column-1)!==13?Y=at.substr(lt[gt],Oe.end.column):(we=!0,Oe.end.column===0?V--:Y=at.substr(lt[gt],Oe.end.column-1)),!0}),we&&(S[V++]=Y,Y=""),S[V++]=Y,S}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(S){return this._lastVisitedLine.lineNumber===S||(this._lastVisitedLine.lineNumber=S,S===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(S):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(S,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(S).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(S){if(S.remainder===S.node.piece.length){let V=S.node.next();if(!V)return 0;let Y=this._buffers[V.piece.bufferIndex],we=this.offsetInBuffer(V.piece.bufferIndex,V.piece.start);return Y.buffer.charCodeAt(we)}{let V=this._buffers[S.node.piece.bufferIndex],Y=this.offsetInBuffer(S.node.piece.bufferIndex,S.node.piece.start)+S.remainder;return V.buffer.charCodeAt(Y)}}getLineCharCode(S,V){let Y=this.nodeAt2(S,V+1);return this._getCharCode(Y)}getLineLength(S){if(S===this.getLineCount()){let V=this.getOffsetAt(S,1);return this.getLength()-V}return this.getOffsetAt(S+1,1)-this.getOffsetAt(S,1)-this._EOLLength}findMatchesInNode(S,V,Y,we,Ne,Oe,et,at,lt,_t,gt){let Ft=this._buffers[S.piece.bufferIndex],Zt=this.offsetInBuffer(S.piece.bufferIndex,S.piece.start),ii=this.offsetInBuffer(S.piece.bufferIndex,Ne),hi=this.offsetInBuffer(S.piece.bufferIndex,Oe),wi,Ei={line:0,column:0},xi,bi;V._wordSeparators?(xi=Ft.buffer.substring(ii,hi),bi=vn=>vn+ii,V.reset(0)):(xi=Ft.buffer,bi=vn=>vn,V.reset(ii));do if(wi=V.next(xi),wi){if(bi(wi.index)>=hi)return _t;this.positionInBuffer(S,bi(wi.index)-Zt,Ei);let vn=this.getLineFeedCnt(S.piece.bufferIndex,Ne,Ei),Pn=Ei.line===Ne.line?Ei.column-Ne.column+we:Ei.column+1,xn=Pn+wi[0].length;if(gt[_t++]=(0,tn.iE)(new o.e(Y+vn,Pn,Y+vn,xn),wi,at),bi(wi.index)+wi[0].length>=hi||_t>=lt)return _t}while(wi);return _t}findMatchesLineByLine(S,V,Y,we){let Ne=[],Oe=0,et=new tn.sz(V.wordSeparators,V.regex),at=this.nodeAt2(S.startLineNumber,S.startColumn);if(at===null)return[];let lt=this.nodeAt2(S.endLineNumber,S.endColumn);if(lt===null)return[];let _t=this.positionInBuffer(at.node,at.remainder),gt=this.positionInBuffer(lt.node,lt.remainder);if(at.node===lt.node)return this.findMatchesInNode(at.node,et,S.startLineNumber,S.startColumn,_t,gt,V,Y,we,Oe,Ne),Ne;let Ft=S.startLineNumber,Zt=at.node;for(;Zt!==lt.node;){let hi=this.getLineFeedCnt(Zt.piece.bufferIndex,_t,Zt.piece.end);if(hi>=1){let Ei=this._buffers[Zt.piece.bufferIndex].lineStarts,xi=this.offsetInBuffer(Zt.piece.bufferIndex,Zt.piece.start),bi=Ei[_t.line+hi],vn=Ft===S.startLineNumber?S.startColumn:1;if(Oe=this.findMatchesInNode(Zt,et,Ft,vn,_t,this.positionInBuffer(Zt,bi-xi),V,Y,we,Oe,Ne),Oe>=we)return Ne;Ft+=hi}let wi=Ft===S.startLineNumber?S.startColumn-1:0;if(Ft===S.endLineNumber){let Ei=this.getLineContent(Ft).substring(wi,S.endColumn-1);return Oe=this._findMatchesInLine(V,et,Ei,S.endLineNumber,wi,Oe,Ne,Y,we),Ne}if(Oe=this._findMatchesInLine(V,et,this.getLineContent(Ft).substr(wi),Ft,wi,Oe,Ne,Y,we),Oe>=we)return Ne;Ft++,at=this.nodeAt2(Ft,1),Zt=at.node,_t=this.positionInBuffer(at.node,at.remainder)}if(Ft===S.endLineNumber){let hi=Ft===S.startLineNumber?S.startColumn-1:0,wi=this.getLineContent(Ft).substring(hi,S.endColumn-1);return Oe=this._findMatchesInLine(V,et,wi,S.endLineNumber,hi,Oe,Ne,Y,we),Ne}let ii=Ft===S.startLineNumber?S.startColumn:1;return Oe=this.findMatchesInNode(lt.node,et,Ft,ii,_t,gt,V,Y,we,Oe,Ne),Ne}_findMatchesInLine(S,V,Y,we,Ne,Oe,et,at,lt){let _t=S.wordSeparators;if(!at&&S.simpleSearch){let Ft=S.simpleSearch,Zt=Ft.length,ii=Y.length,hi=-Zt;for(;(hi=Y.indexOf(Ft,hi+Zt))!==-1;)if((!_t||(0,tn.cM)(_t,Y,ii,hi,Zt))&&(et[Oe++]=new b.tk(new o.e(we,hi+1+Ne,we,hi+1+Zt+Ne),null),Oe>=lt))return Oe;return Oe}let gt;V.reset(0);do if(gt=V.next(Y),gt&&(et[Oe++]=(0,tn.iE)(new o.e(we,gt.index+1+Ne,we,gt.index+1+gt[0].length+Ne),gt,at),Oe>=lt))return Oe;while(gt);return Oe}insert(S,V,Y=!1){if(this._EOLNormalized=this._EOLNormalized&&Y,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==At){let{node:we,remainder:Ne,nodeStartOffset:Oe}=this.nodeAt(S),et=we.piece,at=et.bufferIndex,lt=this.positionInBuffer(we,Ne);if(we.piece.bufferIndex===0&&et.end.line===this._lastChangeBufferPos.line&&et.end.column===this._lastChangeBufferPos.column&&Oe+et.length===S&&V.length<yn)return this.appendToNode(we,V),void this.computeBufferMetadata();if(Oe===S)this.insertContentToNodeLeft(V,we),this._searchCache.validate(S);else if(Oe+we.piece.length>S){let _t=[],gt=new kt(et.bufferIndex,lt,et.end,this.getLineFeedCnt(et.bufferIndex,lt,et.end),this.offsetInBuffer(at,et.end)-this.offsetInBuffer(at,lt));if(this.shouldCheckCRLF()&&this.endWithCR(V)&&this.nodeCharCodeAt(we,Ne)===10){let ii={line:gt.start.line+1,column:0};gt=new kt(gt.bufferIndex,ii,gt.end,this.getLineFeedCnt(gt.bufferIndex,ii,gt.end),gt.length-1),V+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(V))if(this.nodeCharCodeAt(we,Ne-1)===13){let ii=this.positionInBuffer(we,Ne-1);this.deleteNodeTail(we,ii),V="\r"+V,we.piece.length===0&&_t.push(we)}else this.deleteNodeTail(we,lt);else this.deleteNodeTail(we,lt);let Ft=this.createNewPieces(V);gt.length>0&&this.rbInsertRight(we,gt);let Zt=we;for(let ii=0;ii<Ft.length;ii++)Zt=this.rbInsertRight(Zt,Ft[ii]);this.deleteNodes(_t)}else this.insertContentToNodeRight(V,we)}else{let we=this.createNewPieces(V),Ne=this.rbInsertLeft(null,we[0]);for(let Oe=1;Oe<we.length;Oe++)Ne=this.rbInsertRight(Ne,we[Oe])}this.computeBufferMetadata()}delete(S,V){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",V<=0||this.root===At)return;let Y=this.nodeAt(S),we=this.nodeAt(S+V),Ne=Y.node,Oe=we.node;if(Ne===Oe){let gt=this.positionInBuffer(Ne,Y.remainder),Ft=this.positionInBuffer(Ne,we.remainder);if(Y.nodeStartOffset===S){if(V===Ne.piece.length){let Zt=Ne.next();return Vi(this,Ne),this.validateCRLFWithPrevNode(Zt),void this.computeBufferMetadata()}return this.deleteNodeHead(Ne,Ft),this._searchCache.validate(S),this.validateCRLFWithPrevNode(Ne),void this.computeBufferMetadata()}return Y.nodeStartOffset+Ne.piece.length===S+V?(this.deleteNodeTail(Ne,gt),this.validateCRLFWithNextNode(Ne),void this.computeBufferMetadata()):(this.shrinkNode(Ne,gt,Ft),void this.computeBufferMetadata())}let et=[],at=this.positionInBuffer(Ne,Y.remainder);this.deleteNodeTail(Ne,at),this._searchCache.validate(S),Ne.piece.length===0&&et.push(Ne);let lt=this.positionInBuffer(Oe,we.remainder);this.deleteNodeHead(Oe,lt),Oe.piece.length===0&&et.push(Oe);for(let gt=Ne.next();gt!==At&&gt!==Oe;gt=gt.next())et.push(gt);let _t=Ne.piece.length===0?Ne.prev():Ne;this.deleteNodes(et),this.validateCRLFWithNextNode(_t),this.computeBufferMetadata()}insertContentToNodeLeft(S,V){let Y=[];if(this.shouldCheckCRLF()&&this.endWithCR(S)&&this.startWithLF(V)){let Oe=V.piece,et={line:Oe.start.line+1,column:0},at=new kt(Oe.bufferIndex,et,Oe.end,this.getLineFeedCnt(Oe.bufferIndex,et,Oe.end),Oe.length-1);V.piece=at,S+=`
`,en(this,V,-1,-1),V.piece.length===0&&Y.push(V)}let we=this.createNewPieces(S),Ne=this.rbInsertLeft(V,we[we.length-1]);for(let Oe=we.length-2;Oe>=0;Oe--)Ne=this.rbInsertLeft(Ne,we[Oe]);this.validateCRLFWithPrevNode(Ne),this.deleteNodes(Y)}insertContentToNodeRight(S,V){this.adjustCarriageReturnFromNext(S,V)&&(S+=`
`);let Y=this.createNewPieces(S),we=this.rbInsertRight(V,Y[0]),Ne=we;for(let Oe=1;Oe<Y.length;Oe++)Ne=this.rbInsertRight(Ne,Y[Oe]);this.validateCRLFWithPrevNode(we)}positionInBuffer(S,V,Y){let we=S.piece,Ne=S.piece.bufferIndex,Oe=this._buffers[Ne].lineStarts,et=Oe[we.start.line]+we.start.column+V,at=we.start.line,lt=we.end.line,_t=0,gt=0,Ft=0;for(;at<=lt&&(_t=at+(lt-at)/2|0,Ft=Oe[_t],_t!==lt);)if(gt=Oe[_t+1],et<Ft)lt=_t-1;else{if(!(et>=gt))break;at=_t+1}return Y?(Y.line=_t,Y.column=et-Ft,null):{line:_t,column:et-Ft}}getLineFeedCnt(S,V,Y){if(Y.column===0)return Y.line-V.line;let we=this._buffers[S].lineStarts;if(Y.line===we.length-1)return Y.line-V.line;let Ne=we[Y.line+1],Oe=we[Y.line]+Y.column;if(Ne>Oe+1)return Y.line-V.line;let et=Oe-1;return this._buffers[S].buffer.charCodeAt(et)===13?Y.line-V.line+1:Y.line-V.line}offsetInBuffer(S,V){return this._buffers[S].lineStarts[V.line]+V.column}deleteNodes(S){for(let V=0;V<S.length;V++)Vi(this,S[V])}createNewPieces(S){if(S.length>yn){let lt=[];for(;S.length>yn;){let gt=S.charCodeAt(65534),Ft;gt===13||gt>=55296&&gt<=56319?(Ft=S.substring(0,65534),S=S.substring(65534)):(Ft=S.substring(0,yn),S=S.substring(yn));let Zt=Xt(Ft);lt.push(new kt(this._buffers.length,{line:0,column:0},{line:Zt.length-1,column:Ft.length-Zt[Zt.length-1]},Zt.length-1,Ft.length)),this._buffers.push(new It(Ft,Zt))}let _t=Xt(S);return lt.push(new kt(this._buffers.length,{line:0,column:0},{line:_t.length-1,column:S.length-_t[_t.length-1]},_t.length-1,S.length)),this._buffers.push(new It(S,_t)),lt}let V=this._buffers[0].buffer.length,Y=Xt(S,!1),we=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===V&&V!==0&&this.startWithLF(S)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},we=this._lastChangeBufferPos;for(let lt=0;lt<Y.length;lt++)Y[lt]+=V+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(Y.slice(1)),this._buffers[0].buffer+="_"+S,V+=1}else{if(V!==0)for(let lt=0;lt<Y.length;lt++)Y[lt]+=V;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(Y.slice(1)),this._buffers[0].buffer+=S}let Ne=this._buffers[0].buffer.length,Oe=this._buffers[0].lineStarts.length-1,et={line:Oe,column:Ne-this._buffers[0].lineStarts[Oe]},at=new kt(0,we,et,this.getLineFeedCnt(0,we,et),Ne-V);return this._lastChangeBufferPos=et,[at]}getLineRawContent(S,V=0){let Y=this.root,we="",Ne=this._searchCache.get2(S);if(Ne){Y=Ne.node;let Oe=this.getAccumulatedValue(Y,S-Ne.nodeStartLineNumber-1),et=this._buffers[Y.piece.bufferIndex].buffer,at=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start);if(Ne.nodeStartLineNumber+Y.piece.lineFeedCnt!==S){let lt=this.getAccumulatedValue(Y,S-Ne.nodeStartLineNumber);return et.substring(at+Oe,at+lt-V)}we=et.substring(at+Oe,at+Y.piece.length)}else{let Oe=0,et=S;for(;Y!==At;)if(Y.left!==At&&Y.lf_left>=S-1)Y=Y.left;else{if(Y.lf_left+Y.piece.lineFeedCnt>S-1){let at=this.getAccumulatedValue(Y,S-Y.lf_left-2),lt=this.getAccumulatedValue(Y,S-Y.lf_left-1),_t=this._buffers[Y.piece.bufferIndex].buffer,gt=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start);return Oe+=Y.size_left,this._searchCache.set({node:Y,nodeStartOffset:Oe,nodeStartLineNumber:et-(S-1-Y.lf_left)}),_t.substring(gt+at,gt+lt-V)}if(Y.lf_left+Y.piece.lineFeedCnt===S-1){let at=this.getAccumulatedValue(Y,S-Y.lf_left-2),lt=this._buffers[Y.piece.bufferIndex].buffer,_t=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start);we=lt.substring(_t+at,_t+Y.piece.length);break}S-=Y.lf_left+Y.piece.lineFeedCnt,Oe+=Y.size_left+Y.piece.length,Y=Y.right}}for(Y=Y.next();Y!==At;){let Oe=this._buffers[Y.piece.bufferIndex].buffer;if(Y.piece.lineFeedCnt>0){let et=this.getAccumulatedValue(Y,0),at=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start);return we+=Oe.substring(at,at+et-V),we}{let et=this.offsetInBuffer(Y.piece.bufferIndex,Y.piece.start);we+=Oe.substr(et,Y.piece.length)}Y=Y.next()}return we}computeBufferMetadata(){let S=this.root,V=1,Y=0;for(;S!==At;)V+=S.lf_left+S.piece.lineFeedCnt,Y+=S.size_left+S.piece.length,S=S.right;this._lineCnt=V,this._length=Y,this._searchCache.validate(this._length)}getIndexOf(S,V){let Y=S.piece,we=this.positionInBuffer(S,V),Ne=we.line-Y.start.line;if(this.offsetInBuffer(Y.bufferIndex,Y.end)-this.offsetInBuffer(Y.bufferIndex,Y.start)===V){let Oe=this.getLineFeedCnt(S.piece.bufferIndex,Y.start,we);if(Oe!==Ne)return{index:Oe,remainder:0}}return{index:Ne,remainder:we.column}}getAccumulatedValue(S,V){if(V<0)return 0;let Y=S.piece,we=this._buffers[Y.bufferIndex].lineStarts,Ne=Y.start.line+V+1;return Ne>Y.end.line?we[Y.end.line]+Y.end.column-we[Y.start.line]-Y.start.column:we[Ne]-we[Y.start.line]-Y.start.column}deleteNodeTail(S,V){let Y=S.piece,we=Y.lineFeedCnt,Ne=this.offsetInBuffer(Y.bufferIndex,Y.end),Oe=V,et=this.offsetInBuffer(Y.bufferIndex,Oe),at=this.getLineFeedCnt(Y.bufferIndex,Y.start,Oe),lt=at-we,_t=et-Ne,gt=Y.length+_t;S.piece=new kt(Y.bufferIndex,Y.start,Oe,at,gt),en(this,S,_t,lt)}deleteNodeHead(S,V){let Y=S.piece,we=Y.lineFeedCnt,Ne=this.offsetInBuffer(Y.bufferIndex,Y.start),Oe=V,et=this.getLineFeedCnt(Y.bufferIndex,Oe,Y.end),at=et-we,lt=Ne-this.offsetInBuffer(Y.bufferIndex,Oe),_t=Y.length+lt;S.piece=new kt(Y.bufferIndex,Oe,Y.end,et,_t),en(this,S,lt,at)}shrinkNode(S,V,Y){let we=S.piece,Ne=we.start,Oe=we.end,et=we.length,at=we.lineFeedCnt,lt=V,_t=this.getLineFeedCnt(we.bufferIndex,we.start,lt),gt=this.offsetInBuffer(we.bufferIndex,V)-this.offsetInBuffer(we.bufferIndex,Ne);S.piece=new kt(we.bufferIndex,we.start,lt,_t,gt),en(this,S,gt-et,_t-at);let Ft=new kt(we.bufferIndex,Y,Oe,this.getLineFeedCnt(we.bufferIndex,Y,Oe),this.offsetInBuffer(we.bufferIndex,Oe)-this.offsetInBuffer(we.bufferIndex,Y)),Zt=this.rbInsertRight(S,Ft);this.validateCRLFWithPrevNode(Zt)}appendToNode(S,V){this.adjustCarriageReturnFromNext(V,S)&&(V+=`
`);let Y=this.shouldCheckCRLF()&&this.startWithLF(V)&&this.endWithCR(S),we=this._buffers[0].buffer.length;this._buffers[0].buffer+=V;let Ne=Xt(V,!1);for(let Ft=0;Ft<Ne.length;Ft++)Ne[Ft]+=we;if(Y){let Ft=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:we-Ft}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(Ne.slice(1));let Oe=this._buffers[0].lineStarts.length-1,et={line:Oe,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[Oe]},at=S.piece.length+V.length,lt=S.piece.lineFeedCnt,_t=this.getLineFeedCnt(0,S.piece.start,et),gt=_t-lt;S.piece=new kt(S.piece.bufferIndex,S.piece.start,et,_t,at),this._lastChangeBufferPos=et,en(this,S,V.length,gt)}nodeAt(S){let V=this.root,Y=this._searchCache.get(S);if(Y)return{node:Y.node,nodeStartOffset:Y.nodeStartOffset,remainder:S-Y.nodeStartOffset};let we=0;for(;V!==At;)if(V.size_left>S)V=V.left;else{if(V.size_left+V.piece.length>=S){we+=V.size_left;let Ne={node:V,remainder:S-V.size_left,nodeStartOffset:we};return this._searchCache.set(Ne),Ne}S-=V.size_left+V.piece.length,we+=V.size_left+V.piece.length,V=V.right}return null}nodeAt2(S,V){let Y=this.root,we=0;for(;Y!==At;)if(Y.left!==At&&Y.lf_left>=S-1)Y=Y.left;else{if(Y.lf_left+Y.piece.lineFeedCnt>S-1){let Ne=this.getAccumulatedValue(Y,S-Y.lf_left-2),Oe=this.getAccumulatedValue(Y,S-Y.lf_left-1);return we+=Y.size_left,{node:Y,remainder:Math.min(Ne+V-1,Oe),nodeStartOffset:we}}if(Y.lf_left+Y.piece.lineFeedCnt===S-1){let Ne=this.getAccumulatedValue(Y,S-Y.lf_left-2);if(Ne+V-1<=Y.piece.length)return{node:Y,remainder:Ne+V-1,nodeStartOffset:we};V-=Y.piece.length-Ne;break}S-=Y.lf_left+Y.piece.lineFeedCnt,we+=Y.size_left+Y.piece.length,Y=Y.right}for(Y=Y.next();Y!==At;){if(Y.piece.lineFeedCnt>0){let Ne=this.getAccumulatedValue(Y,0),Oe=this.offsetOfNode(Y);return{node:Y,remainder:Math.min(V-1,Ne),nodeStartOffset:Oe}}if(Y.piece.length>=V-1)return{node:Y,remainder:V-1,nodeStartOffset:this.offsetOfNode(Y)};V-=Y.piece.length,Y=Y.next()}return null}nodeCharCodeAt(S,V){if(S.piece.lineFeedCnt<1)return-1;let Y=this._buffers[S.piece.bufferIndex],we=this.offsetInBuffer(S.piece.bufferIndex,S.piece.start)+V;return Y.buffer.charCodeAt(we)}offsetOfNode(S){if(!S)return 0;let V=S.size_left;for(;S!==this.root;)S.parent.right===S&&(V+=S.parent.size_left+S.parent.piece.length),S=S.parent;return V}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(S){if(typeof S=="string")return S.charCodeAt(0)===10;if(S===At||S.piece.lineFeedCnt===0)return!1;let V=S.piece,Y=this._buffers[V.bufferIndex].lineStarts,we=V.start.line,Ne=Y[we]+V.start.column;return we!==Y.length-1&&!(Y[we+1]>Ne+1)&&this._buffers[V.bufferIndex].buffer.charCodeAt(Ne)===10}endWithCR(S){return typeof S=="string"?S.charCodeAt(S.length-1)===13:S!==At&&S.piece.lineFeedCnt!==0&&this.nodeCharCodeAt(S,S.piece.length-1)===13}validateCRLFWithPrevNode(S){if(this.shouldCheckCRLF()&&this.startWithLF(S)){let V=S.prev();this.endWithCR(V)&&this.fixCRLF(V,S)}}validateCRLFWithNextNode(S){if(this.shouldCheckCRLF()&&this.endWithCR(S)){let V=S.next();this.startWithLF(V)&&this.fixCRLF(S,V)}}fixCRLF(S,V){let Y=[],we=this._buffers[S.piece.bufferIndex].lineStarts,Ne;Ne=S.piece.end.column===0?{line:S.piece.end.line-1,column:we[S.piece.end.line]-we[S.piece.end.line-1]-1}:{line:S.piece.end.line,column:S.piece.end.column-1};let Oe=S.piece.length-1,et=S.piece.lineFeedCnt-1;S.piece=new kt(S.piece.bufferIndex,S.piece.start,Ne,et,Oe),en(this,S,-1,-1),S.piece.length===0&&Y.push(S);let at={line:V.piece.start.line+1,column:0},lt=V.piece.length-1,_t=this.getLineFeedCnt(V.piece.bufferIndex,at,V.piece.end);V.piece=new kt(V.piece.bufferIndex,at,V.piece.end,_t,lt),en(this,V,-1,-1),V.piece.length===0&&Y.push(V);let gt=this.createNewPieces(`\r
`);this.rbInsertRight(S,gt[0]);for(let Ft=0;Ft<Y.length;Ft++)Vi(this,Y[Ft])}adjustCarriageReturnFromNext(S,V){if(this.shouldCheckCRLF()&&this.endWithCR(S)){let Y=V.next();if(this.startWithLF(Y)){if(S+=`
`,Y.piece.length===1)Vi(this,Y);else{let we=Y.piece,Ne={line:we.start.line+1,column:0},Oe=we.length-1,et=this.getLineFeedCnt(we.bufferIndex,Ne,we.end);Y.piece=new kt(we.bufferIndex,Ne,we.end,et,Oe),en(this,Y,-1,-1)}return!0}}return!1}iterate(S,V){if(S===At)return V(At);let Y=this.iterate(S.left,V);return Y&&V(S)&&this.iterate(S.right,V)}getNodeContent(S){if(S===At)return"";let V=this._buffers[S.piece.bufferIndex],Y=S.piece,we=this.offsetInBuffer(Y.bufferIndex,Y.start),Ne=this.offsetInBuffer(Y.bufferIndex,Y.end);return V.buffer.substring(we,Ne)}getPieceContent(S){let V=this._buffers[S.bufferIndex],Y=this.offsetInBuffer(S.bufferIndex,S.start),we=this.offsetInBuffer(S.bufferIndex,S.end);return V.buffer.substring(Y,we)}rbInsertRight(S,V){let Y=new Qt(V,1);if(Y.left=At,Y.right=At,Y.parent=At,Y.size_left=0,Y.lf_left=0,this.root===At)this.root=Y,Y.color=0;else if(S.right===At)S.right=Y,Y.parent=S;else{let we=mi(S.right);we.left=Y,Y.parent=we}return Xi(this,Y),Y}rbInsertLeft(S,V){let Y=new Qt(V,1);if(Y.left=At,Y.right=At,Y.parent=At,Y.size_left=0,Y.lf_left=0,this.root===At)this.root=Y,Y.color=0;else if(S.left===At)S.left=Y,Y.parent=S;else{let we=Lt(S.left);we.right=Y,Y.parent=we}return Xi(this,Y),Y}}var di=t(3033);class fi extends _.JT{constructor(S,V,Y,we,Ne,Oe,et){super(),this._onDidChangeContent=this._register(new I.Q5),this._BOM=V,this._mightContainNonBasicASCII=!Oe,this._mightContainRTL=we,this._mightContainUnusualLineTerminators=Ne,this._pieceTree=new jt(S,Y,et)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(S){return this._pieceTree.createSnapshot(S?this._BOM:"")}getOffsetAt(S,V){return this._pieceTree.getOffsetAt(S,V)}getPositionAt(S){return this._pieceTree.getPositionAt(S)}getRangeAt(S,V){let Y=S+V,we=this.getPositionAt(S),Ne=this.getPositionAt(Y);return new o.e(we.lineNumber,we.column,Ne.lineNumber,Ne.column)}getValueInRange(S,V=0){if(S.isEmpty())return"";let Y=this._getEndOfLine(V);return this._pieceTree.getValueInRange(S,Y)}getValueLengthInRange(S,V=0){if(S.isEmpty())return 0;if(S.startLineNumber===S.endLineNumber)return S.endColumn-S.startColumn;let Y=this.getOffsetAt(S.startLineNumber,S.startColumn),we=this.getOffsetAt(S.endLineNumber,S.endColumn),Ne=0,Oe=this._getEndOfLine(V),et=this.getEOL();return Oe.length!==et.length&&(Ne=(Oe.length-et.length)*(S.endLineNumber-S.startLineNumber)),we-Y+Ne}getCharacterCountInRange(S,V=0){if(this._mightContainNonBasicASCII){let Y=0,we=S.startLineNumber,Ne=S.endLineNumber;for(let Oe=we;Oe<=Ne;Oe++){let et=this.getLineContent(Oe),at=Oe===we?S.startColumn-1:0,lt=Oe===Ne?S.endColumn-1:et.length;for(let _t=at;_t<lt;_t++)A.ZG(et.charCodeAt(_t))?(Y+=1,_t+=1):Y+=1}return Y+=this._getEndOfLine(V).length*(Ne-we),Y}return this.getValueLengthInRange(S,V)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(S){return this._pieceTree.getLineContent(S)}getLineCharCode(S,V){return this._pieceTree.getLineCharCode(S,V)}getLineLength(S){return this._pieceTree.getLineLength(S)}getLineFirstNonWhitespaceColumn(S){let V=A.LC(this.getLineContent(S));return V===-1?0:V+1}getLineLastNonWhitespaceColumn(S){let V=A.ow(this.getLineContent(S));return V===-1?0:V+2}_getEndOfLine(S){switch(S){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(S){this._pieceTree.setEOL(S)}applyEdits(S,V,Y){let we=this._mightContainRTL,Ne=this._mightContainUnusualLineTerminators,Oe=this._mightContainNonBasicASCII,et=!0,at=[];for(let hi=0;hi<S.length;hi++){let wi=S[hi];et&&wi._isTracked&&(et=!1);let Ei=wi.range;if(wi.text){let xn=!0;Oe||(xn=!A.$i(wi.text),Oe=xn),!we&&xn&&(we=A.Ut(wi.text)),!Ne&&xn&&(Ne=A.ab(wi.text))}let xi="",bi=0,vn=0,Pn=0;if(wi.text){let xn;[bi,vn,Pn,xn]=(0,v.Q)(wi.text);let Qn=this.getEOL();xi=xn===0||xn===(Qn===`\r
`?2:1)?wi.text:wi.text.replace(/\r\n|\r|\n/g,Qn)}at[hi]={sortIndex:hi,identifier:wi.identifier||null,range:Ei,rangeOffset:this.getOffsetAt(Ei.startLineNumber,Ei.startColumn),rangeLength:this.getValueLengthInRange(Ei),text:xi,eolCount:bi,firstLineLength:vn,lastLineLength:Pn,forceMoveMarkers:!!wi.forceMoveMarkers,isAutoWhitespaceEdit:wi.isAutoWhitespaceEdit||!1}}at.sort(fi._sortOpsAscending);let lt=!1;for(let hi=0,wi=at.length-1;hi<wi;hi++){let Ei=at[hi].range.getEndPosition(),xi=at[hi+1].range.getStartPosition();if(xi.isBeforeOrEqual(Ei)){if(xi.isBefore(Ei))throw new Error("Overlapping ranges are not allowed!");lt=!0}}et&&(at=this._reduceOperations(at));let _t=Y||V?fi._getInverseEditRanges(at):[],gt=[];if(V)for(let hi=0;hi<at.length;hi++){let wi=at[hi],Ei=_t[hi];if(wi.isAutoWhitespaceEdit&&wi.range.isEmpty())for(let xi=Ei.startLineNumber;xi<=Ei.endLineNumber;xi++){let bi="";xi===Ei.startLineNumber&&(bi=this.getLineContent(wi.range.startLineNumber),A.LC(bi)!==-1)||gt.push({lineNumber:xi,oldContent:bi})}}let Ft=null;if(Y){let hi=0;Ft=[];for(let wi=0;wi<at.length;wi++){let Ei=at[wi],xi=_t[wi],bi=this.getValueInRange(Ei.range),vn=Ei.rangeOffset+hi;hi+=Ei.text.length-bi.length,Ft[wi]={sortIndex:Ei.sortIndex,identifier:Ei.identifier,range:xi,text:bi,textChange:new di.q(Ei.rangeOffset,bi,vn,Ei.text)}}lt||Ft.sort((wi,Ei)=>wi.sortIndex-Ei.sortIndex)}this._mightContainRTL=we,this._mightContainUnusualLineTerminators=Ne,this._mightContainNonBasicASCII=Oe;let Zt=this._doApplyEdits(at),ii=null;if(V&&gt.length>0){gt.sort((hi,wi)=>wi.lineNumber-hi.lineNumber),ii=[];for(let hi=0,wi=gt.length;hi<wi;hi++){let Ei=gt[hi].lineNumber;if(hi>0&&gt[hi-1].lineNumber===Ei)continue;let xi=gt[hi].oldContent,bi=this.getLineContent(Ei);bi.length!==0&&bi!==xi&&A.LC(bi)===-1&&ii.push(Ei)}}return this._onDidChangeContent.fire(),new b.je(Ft,Zt,ii)}_reduceOperations(S){return S.length<1e3?S:[this._toSingleEditOperation(S)]}_toSingleEditOperation(S){let V=!1,Y=S[0].range,we=S[S.length-1].range,Ne=new o.e(Y.startLineNumber,Y.startColumn,we.endLineNumber,we.endColumn),Oe=Y.startLineNumber,et=Y.startColumn,at=[];for(let Zt=0,ii=S.length;Zt<ii;Zt++){let hi=S[Zt],wi=hi.range;V=V||hi.forceMoveMarkers,at.push(this.getValueInRange(new o.e(Oe,et,wi.startLineNumber,wi.startColumn))),hi.text.length>0&&at.push(hi.text),Oe=wi.endLineNumber,et=wi.endColumn}let lt=at.join(""),[_t,gt,Ft]=(0,v.Q)(lt);return{sortIndex:0,identifier:S[0].identifier,range:Ne,rangeOffset:this.getOffsetAt(Ne.startLineNumber,Ne.startColumn),rangeLength:this.getValueLengthInRange(Ne,0),text:lt,eolCount:_t,firstLineLength:gt,lastLineLength:Ft,forceMoveMarkers:V,isAutoWhitespaceEdit:!1}}_doApplyEdits(S){S.sort(fi._sortOpsDescending);let V=[];for(let Y=0;Y<S.length;Y++){let we=S[Y],Ne=we.range.startLineNumber,Oe=we.range.startColumn,et=we.range.endLineNumber,at=we.range.endColumn;if(Ne===et&&Oe===at&&we.text.length===0)continue;we.text?(this._pieceTree.delete(we.rangeOffset,we.rangeLength),this._pieceTree.insert(we.rangeOffset,we.text,!0)):this._pieceTree.delete(we.rangeOffset,we.rangeLength);let lt=new o.e(Ne,Oe,et,at);V.push({range:lt,rangeLength:we.rangeLength,text:we.text,rangeOffset:we.rangeOffset,forceMoveMarkers:we.forceMoveMarkers})}return V}findMatchesLineByLine(S,V,Y,we){return this._pieceTree.findMatchesLineByLine(S,V,Y,we)}static _getInverseEditRanges(S){let V=[],Y=0,we=0,Ne=null;for(let Oe=0,et=S.length;Oe<et;Oe++){let at=S[Oe],lt,_t,gt;if(Ne?Ne.range.endLineNumber===at.range.startLineNumber?(lt=Y,_t=we+(at.range.startColumn-Ne.range.endColumn)):(lt=Y+(at.range.startLineNumber-Ne.range.endLineNumber),_t=at.range.startColumn):(lt=at.range.startLineNumber,_t=at.range.startColumn),at.text.length>0){let Ft=at.eolCount+1;gt=Ft===1?new o.e(lt,_t,lt,_t+at.firstLineLength):new o.e(lt,_t,lt+Ft-1,at.lastLineLength+1)}else gt=new o.e(lt,_t,lt,_t);Y=gt.endLineNumber,we=gt.endColumn,V.push(gt),Ne=at}return V}static _sortOpsAscending(S,V){let Y=o.e.compareRangesUsingEnds(S.range,V.range);return Y===0?S.sortIndex-V.sortIndex:Y}static _sortOpsDescending(S,V){let Y=o.e.compareRangesUsingEnds(S.range,V.range);return Y===0?V.sortIndex-S.sortIndex:-Y}}class Si{constructor(S,V,Y,we,Ne,Oe,et,at,lt){this._chunks=S,this._bom=V,this._cr=Y,this._lf=we,this._crlf=Ne,this._containsRTL=Oe,this._containsUnusualLineTerminators=et,this._isBasicASCII=at,this._normalizeEOL=lt}_getEOL(S){let V=this._cr+this._lf+this._crlf,Y=this._cr+this._crlf;return V===0?S===1?`
`:`\r
`:Y>V/2?`\r
`:`
`}create(S){let V=this._getEOL(S),Y=this._chunks;if(this._normalizeEOL&&(V===`\r
`&&(this._cr>0||this._lf>0)||V===`
`&&(this._cr>0||this._crlf>0)))for(let Ne=0,Oe=Y.length;Ne<Oe;Ne++){let et=Y[Ne].buffer.replace(/\r\n|\r|\n/g,V),at=Xt(et);Y[Ne]=new It(et,at)}let we=new fi(Y,this._bom,V,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:we,disposable:we}}}class Ri{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(S){if(S.length===0)return;this.chunks.length===0&&A.uS(S)&&(this.BOM=A.c1,S=S.substr(1));let V=S.charCodeAt(S.length-1);V===13||V>=55296&&V<=56319?(this._acceptChunk1(S.substr(0,S.length-1),!1),this._hasPreviousChar=!0,this._previousChar=V):(this._acceptChunk1(S,!1),this._hasPreviousChar=!1,this._previousChar=V)}_acceptChunk1(S,V){(V||S.length!==0)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+S):this._acceptChunk2(S))}_acceptChunk2(S){let V=function(Y,we){Y.length=0,Y[0]=0;let Ne=1,Oe=0,et=0,at=0,lt=!0;for(let gt=0,Ft=we.length;gt<Ft;gt++){let Zt=we.charCodeAt(gt);Zt===13?gt+1<Ft&&we.charCodeAt(gt+1)===10?(at++,Y[Ne++]=gt+2,gt++):(Oe++,Y[Ne++]=gt+1):Zt===10?(et++,Y[Ne++]=gt+1):lt&&Zt!==9&&(Zt<32||Zt>126)&&(lt=!1)}let _t=new ci(sn(Y),Oe,et,at,lt);return Y.length=0,_t}(this._tmpLineStarts,S);this.chunks.push(new It(S,V.lineStarts)),this.cr+=V.cr,this.lf+=V.lf,this.crlf+=V.crlf,V.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=A.Ut(S)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=A.ab(S)))}finish(S=!0){return this._finish(),new Si(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,S)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let S=this.chunks[this.chunks.length-1];S.buffer+=String.fromCharCode(this._previousChar);let V=Xt(S.buffer);S.lineStarts=V,this._previousChar===13&&this.cr++}}}var Wt=t(5393),Te=t(5463),Ze=t(270),rt=t(6887),yt=t(4954),Nt=t(1432),dt=t(4013),Re=t(9247),qe=t(276);class Ue{constructor(S){this._default=S,this._store=[]}get(S){return S<this._store.length?this._store[S]:this._default}set(S,V){for(;S>=this._store.length;)this._store[this._store.length]=this._default;this._store[S]=V}replace(S,V,Y){if(S>=this._store.length)return;if(V===0)return void this.insert(S,Y);if(Y===0)return void this.delete(S,V);let we=this._store.slice(0,S),Ne=this._store.slice(S+V),Oe=function(et,at){let lt=[];for(let _t=0;_t<et;_t++)lt[_t]=at;return lt}(Y,this._default);this._store=we.concat(Oe,Ne)}delete(S,V){V===0||S>=this._store.length||this._store.splice(S,V)}insert(S,V){if(V===0||S>=this._store.length)return;let Y=[];for(let we=0;we<V;we++)Y[we]=this._default;this._store=(0,m.Zv)(this._store,S,Y)}}class Pe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(S,V){this._startLineNumber=S,this._tokens=V}getLineTokens(S){return this._tokens[S-this._startLineNumber]}appendLineTokens(S){this._tokens.push(S)}}class Xe{constructor(){this._tokens=[]}add(S,V){if(this._tokens.length>0){let Y=this._tokens[this._tokens.length-1];if(Y.endLineNumber+1===S)return void Y.appendLineTokens(V)}this._tokens.push(new Pe(S,[V]))}finalize(){return this._tokens}}var $e=t(7378);class ot{constructor(S,V){this.tokenizationSupport=V,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new Ot(S)}getStartState(S){return S===1?this.initialState:this.store.getEndState(S-1)}}class Tt extends ot{constructor(S,V,Y,we){super(S,V),this._textModel=Y,this._languageIdCodec=we}updateTokensUntilLine(S,V){let Y=this._textModel.getLanguageId();for(;;){let we=this.store.getFirstInvalidEndStateLineNumber();if(!we||we>V)break;let Ne=this._textModel.getLineContent(we),Oe=this.getStartState(we),et=Jt(this._languageIdCodec,Y,this.tokenizationSupport,Ne,!0,Oe);S.add(we,et.tokens),this.store.setEndState(we,et.endState)}}getTokenTypeIfInsertingCharacter(S,V){let Y=this.getStartState(S.lineNumber);if(!Y)return 0;let we=this._textModel.getLanguageId(),Ne=this._textModel.getLineContent(S.lineNumber),Oe=Ne.substring(0,S.column-1)+V+Ne.substring(S.column-1),et=Jt(this._languageIdCodec,we,this.tokenizationSupport,Oe,!0,Y),at=new $e.A(et.tokens,Oe,this._languageIdCodec);if(at.getCount()===0)return 0;let lt=at.findTokenIndexAtOffset(S.column-1);return at.getStandardTokenType(lt)}tokenizeLineWithEdit(S,V,Y){let we=S.lineNumber,Ne=S.column,Oe=this.getStartState(we);if(!Oe)return null;let et=this._textModel.getLineContent(we),at=et.substring(0,Ne-1)+Y+et.substring(Ne-1+V),lt=this._textModel.getLanguageIdAtPosition(we,0),_t=Jt(this._languageIdCodec,lt,this.tokenizationSupport,at,!0,Oe);return new $e.A(_t.tokens,at,this._languageIdCodec)}isCheapToTokenize(S){let V=this.store.getFirstInvalidEndStateLineNumberOrMax();return S<V||S===V&&this._textModel.getLineLength(S)<2048}tokenizeHeuristically(S,V,Y){if(Y<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(V<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(S,Y),{heuristicTokens:!1};let we=this.guessStartState(V),Ne=this._textModel.getLanguageId();for(let Oe=V;Oe<=Y;Oe++){let et=this._textModel.getLineContent(Oe),at=Jt(this._languageIdCodec,Ne,this.tokenizationSupport,et,!0,we);S.add(Oe,at.tokens),we=at.endState}return{heuristicTokens:!0}}guessStartState(S){let V=this._textModel.getLineFirstNonWhitespaceColumn(S),Y=[],we=null;for(let et=S-1;V>1&&et>=1;et--){let at=this._textModel.getLineFirstNonWhitespaceColumn(et);if(at!==0&&at<V&&(Y.push(this._textModel.getLineContent(et)),V=at,we=this.getStartState(et),we))break}we||(we=this.tokenizationSupport.getInitialState()),Y.reverse();let Ne=this._textModel.getLanguageId(),Oe=we;for(let et of Y)Oe=Jt(this._languageIdCodec,Ne,this.tokenizationSupport,et,!1,Oe).endState;return Oe}}class Ot{constructor(S){this.lineCount=S,this.tokenizationStateStore=new ti,this._invalidEndStatesLineNumbers=new zt,this._invalidEndStatesLineNumbers.addRange(new Re.q(1,S+1))}getEndState(S){return this.tokenizationStateStore.getEndState(S)}setEndState(S,V){for(;;){let we=this._invalidEndStatesLineNumbers.min;if(!(we!==null&&we<=S))break;this._invalidEndStatesLineNumbers.removeMin()}let Y=this.tokenizationStateStore.setEndState(S,V);return Y&&S<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Re.q(S+1,S+2)),Y}acceptChange(S,V){this.lineCount+=V-S.length,this.tokenizationStateStore.acceptChange(S,V),this._invalidEndStatesLineNumbers.addRangeAndResize(new Re.q(S.startLineNumber,S.endLineNumberExclusive),V)}acceptChanges(S){for(let V of S){let[Y]=(0,v.Q)(V.text);this.acceptChange(new Te.z(V.range.startLineNumber,V.range.endLineNumber+1),Y+1)}}invalidateEndStateRange(S){this._invalidEndStatesLineNumbers.addRange(new Re.q(S.startLineNumber,S.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this._invalidEndStatesLineNumbers.min||Number.MAX_SAFE_INTEGER}isTokenizationComplete(){return this._invalidEndStatesLineNumbers.min===null}}class ti{constructor(){this._lineEndStates=new Ue(null)}getEndState(S){return this._lineEndStates.get(S)}setEndState(S,V){let Y=this._lineEndStates.get(S);return!(Y&&Y.equals(V)||(this._lineEndStates.set(S,V),0))}acceptChange(S,V){let Y=S.length;V>0&&Y>0&&(Y--,V--),this._lineEndStates.replace(S.startLineNumber,Y,V)}}class zt{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let S=this._ranges[0];return S.start+1===S.endExclusive?this._ranges.shift():this._ranges[0]=new Re.q(S.start+1,S.endExclusive),S.start}addRange(S){Re.q.addRange(S,this._ranges)}addRangeAndResize(S,V){let Y=0;for(;!(Y>=this._ranges.length||S.start<=this._ranges[Y].endExclusive);)Y++;let we=Y;for(;!(we>=this._ranges.length||S.endExclusive<this._ranges[we].start);)we++;let Ne=V-S.length;for(let Oe=we;Oe<this._ranges.length;Oe++)this._ranges[Oe]=this._ranges[Oe].delta(Ne);if(Y===we){let Oe=new Re.q(S.start,S.start+V);Oe.isEmpty||this._ranges.splice(Y,0,Oe)}else{let Oe=Math.min(S.start,this._ranges[Y].start),et=Math.max(S.endExclusive,this._ranges[we-1].endExclusive),at=new Re.q(Oe,et+Ne);at.isEmpty?this._ranges.splice(Y,we-Y):this._ranges.splice(Y,we-Y,at)}}toString(){return this._ranges.map(S=>S.toString()).join(" + ")}}function Jt(Ke,S,V,Y,we,Ne){let Oe=null;if(V)try{Oe=V.tokenizeEncoded(Y,we,Ne.clone())}catch(et){(0,u.dL)(et)}return Oe||(Oe=(0,qe.Dy)(Ke.encodeLanguageId(S),Ne)),$e.A.convertToEndOffset(Oe.tokens,Y.length),Oe}class Gt{constructor(S,V){this._tokenizerWithStateStore=S,this._backgroundTokenStore=V,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,(0,Wt.To)(S=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(S)}))}_backgroundTokenizeWithDeadline(S){let V=Date.now()+S.timeRemaining(),Y=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<V?(0,Nt.fn)(Y):this._beginBackgroundTokenization())};Y()}_backgroundTokenizeForAtLeast1ms(){let S=this._tokenizerWithStateStore._textModel.getLineCount(),V=new Xe,Y=dt.G.create(!1);do if(Y.elapsed()>1||this._tokenizeOneInvalidLine(V)>=S)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(V.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.isTokenizationComplete()}_tokenizeOneInvalidLine(S){if(!this._tokenizerWithStateStore||!this._hasLinesToTokenize())return this._tokenizerWithStateStore._textModel.getLineCount()+1;let V=this._tokenizerWithStateStore.store.getFirstInvalidEndStateLineNumber();return this._tokenizerWithStateStore.updateTokensUntilLine(S,V),V}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.isTokenizationComplete()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(S,V){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Te.z(S,V))}}let $t=new Uint32Array(0).buffer;class si{static deleteBeginning(S,V){return S===null||S===$t?S:si.delete(S,0,V)}static deleteEnding(S,V){if(S===null||S===$t)return S;let Y=ai(S),we=Y[Y.length-2];return si.delete(S,V,we)}static delete(S,V,Y){if(S===null||S===$t||V===Y)return S;let we=ai(S),Ne=we.length>>>1;if(V===0&&we[we.length-2]===Y)return $t;let Oe=$e.A.findIndexInTokensArray(we,V),et=Oe>0?we[Oe-1<<1]:0;if(Y<we[Oe<<1]){let Ft=Y-V;for(let Zt=Oe;Zt<Ne;Zt++)we[Zt<<1]-=Ft;return S}let at,lt;et!==V?(we[Oe<<1]=V,at=Oe+1<<1,lt=V):(at=Oe<<1,lt=et);let _t=Y-V;for(let Ft=Oe+1;Ft<Ne;Ft++){let Zt=we[Ft<<1]-_t;Zt>lt&&(we[at++]=Zt,we[at++]=we[1+(Ft<<1)],lt=Zt)}if(at===we.length)return S;let gt=new Uint32Array(at);return gt.set(we.subarray(0,at),0),gt.buffer}static append(S,V){if(V===$t)return S;if(S===$t)return V;if(S===null)return S;if(V===null)return null;let Y=ai(S),we=ai(V),Ne=we.length>>>1,Oe=new Uint32Array(Y.length+we.length);Oe.set(Y,0);let et=Y.length,at=Y[Y.length-2];for(let lt=0;lt<Ne;lt++)Oe[et++]=we[lt<<1]+at,Oe[et++]=we[1+(lt<<1)];return Oe.buffer}static insert(S,V,Y){if(S===null||S===$t)return S;let we=ai(S),Ne=we.length>>>1,Oe=$e.A.findIndexInTokensArray(we,V);Oe>0&&we[Oe-1<<1]===V&&Oe--;for(let et=Oe;et<Ne;et++)we[et<<1]+=Y;return S}}function ai(Ke){return Ke instanceof Uint32Array?Ke:new Uint32Array(Ke)}var _i=t(5797);class Li{constructor(S){this._lineTokens=[],this._len=0,this._languageIdCodec=S}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(S,V,Y){let we=null;if(V<this._len&&(we=this._lineTokens[V]),we!==null&&we!==$t)return new $e.A(ai(we),Y,this._languageIdCodec);let Ne=new Uint32Array(2);return Ne[0]=Y.length,Ne[1]=ri(this._languageIdCodec.encodeLanguageId(S)),new $e.A(Ne,Y,this._languageIdCodec)}static _massageTokens(S,V,Y){let we=Y?ai(Y):null;if(V===0){let Ne=!1;if(we&&we.length>1&&(Ne=_i.N.getLanguageId(we[1])!==S),!Ne)return $t}if(!we||we.length===0){let Ne=new Uint32Array(2);return Ne[0]=V,Ne[1]=ri(S),Ne.buffer}return we[we.length-2]=V,we.byteOffset===0&&we.byteLength===we.buffer.byteLength?we.buffer:we}_ensureLine(S){for(;S>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(S,V){V!==0&&(S+V>this._len&&(V=this._len-S),this._lineTokens.splice(S,V),this._len-=V)}_insertLines(S,V){if(V===0)return;let Y=[];for(let we=0;we<V;we++)Y[we]=null;this._lineTokens=m.Zv(this._lineTokens,S,Y),this._len+=V}setTokens(S,V,Y,we,Ne){let Oe=Li._massageTokens(this._languageIdCodec.encodeLanguageId(S),Y,we);this._ensureLine(V);let et=this._lineTokens[V];return this._lineTokens[V]=Oe,!!Ne&&!Li._equals(et,Oe)}static _equals(S,V){if(!S||!V)return!S&&!V;let Y=ai(S),we=ai(V);if(Y.length!==we.length)return!1;for(let Ne=0,Oe=Y.length;Ne<Oe;Ne++)if(Y[Ne]!==we[Ne])return!1;return!0}acceptEdit(S,V,Y){this._acceptDeleteRange(S),this._acceptInsertText(new d.L(S.startLineNumber,S.startColumn),V,Y)}_acceptDeleteRange(S){let V=S.startLineNumber-1;if(V>=this._len)return;if(S.startLineNumber===S.endLineNumber)return S.startColumn===S.endColumn?void 0:void(this._lineTokens[V]=si.delete(this._lineTokens[V],S.startColumn-1,S.endColumn-1));this._lineTokens[V]=si.deleteEnding(this._lineTokens[V],S.startColumn-1);let Y=S.endLineNumber-1,we=null;Y<this._len&&(we=si.deleteBeginning(this._lineTokens[Y],S.endColumn-1)),this._lineTokens[V]=si.append(this._lineTokens[V],we),this._deleteLines(S.startLineNumber,S.endLineNumber-S.startLineNumber)}_acceptInsertText(S,V,Y){if(V===0&&Y===0)return;let we=S.lineNumber-1;we>=this._len||(V!==0?(this._lineTokens[we]=si.deleteEnding(this._lineTokens[we],S.column-1),this._lineTokens[we]=si.insert(this._lineTokens[we],S.column-1,Y),this._insertLines(S.lineNumber,V)):this._lineTokens[we]=si.insert(this._lineTokens[we],S.column-1,Y))}setMultilineTokens(S,V){if(S.length===0)return{changes:[]};let Y=[];for(let we=0,Ne=S.length;we<Ne;we++){let Oe=S[we],et=0,at=0,lt=!1;for(let _t=Oe.startLineNumber;_t<=Oe.endLineNumber;_t++)lt?(this.setTokens(V.getLanguageId(),_t-1,V.getLineLength(_t),Oe.getLineTokens(_t),!1),at=_t):this.setTokens(V.getLanguageId(),_t-1,V.getLineLength(_t),Oe.getLineTokens(_t),!0)&&(lt=!0,et=_t,at=_t);lt&&Y.push({fromLineNumber:et,toLineNumber:at})}return{changes:Y}}}function ri(Ke){return(32768|Ke<<0|33554432|1024)>>>0}class qt{constructor(S){this._pieces=[],this._isComplete=!1,this._languageIdCodec=S}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(S,V){this._pieces=S||[],this._isComplete=V}setPartial(S,V){let Y=S;if(V.length>0){let Ne=V[0].getRange(),Oe=V[V.length-1].getRange();if(!Ne||!Oe)return S;Y=S.plusRange(Ne).plusRange(Oe)}let we=null;for(let Ne=0,Oe=this._pieces.length;Ne<Oe;Ne++){let et=this._pieces[Ne];if(et.endLineNumber<Y.startLineNumber)continue;if(et.startLineNumber>Y.endLineNumber){we=we||{index:Ne};break}if(et.removeTokens(Y),et.isEmpty()){this._pieces.splice(Ne,1),Ne--,Oe--;continue}if(et.endLineNumber<Y.startLineNumber)continue;if(et.startLineNumber>Y.endLineNumber){we=we||{index:Ne};continue}let[at,lt]=et.split(Y);at.isEmpty()?we=we||{index:Ne}:lt.isEmpty()||(this._pieces.splice(Ne,1,at,lt),Ne++,Oe++,we=we||{index:Ne})}return we=we||{index:this._pieces.length},V.length>0&&(this._pieces=m.Zv(this._pieces,we.index,V)),Y}isComplete(){return this._isComplete}addSparseTokens(S,V){if(V.getLineContent().length===0)return V;let Y=this._pieces;if(Y.length===0)return V;let we=Y[qt._findFirstPieceWithLine(Y,S)].getLineTokens(S);if(!we)return V;let Ne=V.getCount(),Oe=we.getCount(),et=0,at=[],lt=0,_t=0,gt=(Ft,Zt)=>{Ft!==_t&&(_t=Ft,at[lt++]=Ft,at[lt++]=Zt)};for(let Ft=0;Ft<Oe;Ft++){let Zt=we.getStartCharacter(Ft),ii=we.getEndCharacter(Ft),hi=we.getMetadata(Ft),wi=((1&hi?2048:0)|(2&hi?4096:0)|(4&hi?8192:0)|(8&hi?16384:0)|(16&hi?16744448:0)|(32&hi?4278190080:0))>>>0,Ei=~wi>>>0;for(;et<Ne&&V.getEndOffset(et)<=Zt;)gt(V.getEndOffset(et),V.getMetadata(et)),et++;for(et<Ne&&V.getStartOffset(et)<Zt&&gt(Zt,V.getMetadata(et));et<Ne&&V.getEndOffset(et)<ii;)gt(V.getEndOffset(et),V.getMetadata(et)&Ei|hi&wi),et++;if(et<Ne)gt(ii,V.getMetadata(et)&Ei|hi&wi),V.getEndOffset(et)===ii&&et++;else{let xi=Math.min(Math.max(0,et-1),Ne-1);gt(ii,V.getMetadata(xi)&Ei|hi&wi)}}for(;et<Ne;)gt(V.getEndOffset(et),V.getMetadata(et)),et++;return new $e.A(new Uint32Array(at),V.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(S,V){let Y=0,we=S.length-1;for(;Y<we;){let Ne=Y+Math.floor((we-Y)/2);if(S[Ne].endLineNumber<V)Y=Ne+1;else{if(!(S[Ne].startLineNumber>V)){for(;Ne>Y&&S[Ne-1].startLineNumber<=V&&V<=S[Ne-1].endLineNumber;)Ne--;return Ne}we=Ne-1}}return Y}acceptEdit(S,V,Y,we,Ne){for(let Oe of this._pieces)Oe.acceptEdit(S,V,Y,we,Ne)}}class je extends yt.U{constructor(S,V,Y,we,Ne,Oe){super(),this._languageService=S,this._languageConfigurationService=V,this._textModel=Y,this._bracketPairsTextModelPart=we,this._languageId=Ne,this._attachedViews=Oe,this._semanticTokens=new qt(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new I.Q5),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new I.Q5),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new I.Q5),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new mt(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(et=>{et.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(et=>{this._emitModelTokensChangedEvent(et)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(et=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(S){if(S.isFlush)this._semanticTokens.flush();else if(!S.isEolChange)for(let V of S.changes){let[Y,we,Ne]=(0,v.Q)(V.text);this._semanticTokens.acceptEdit(V.range,Y,we,Ne,V.text.length>0?V.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(S)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(S){this.validateLineNumber(S);let V=this.grammarTokens.getLineTokens(S);return this._semanticTokens.addSparseTokens(S,V)}_emitModelTokensChangedEvent(S){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(S),this._onDidChangeTokens.fire(S))}validateLineNumber(S){if(S<1||S>this._textModel.getLineCount())throw new u.he("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(S){this.validateLineNumber(S),this.grammarTokens.forceTokenization(S)}isCheapToTokenize(S){return this.validateLineNumber(S),this.grammarTokens.isCheapToTokenize(S)}tokenizeIfCheap(S){this.validateLineNumber(S),this.grammarTokens.tokenizeIfCheap(S)}getTokenTypeIfInsertingCharacter(S,V,Y){return this.grammarTokens.getTokenTypeIfInsertingCharacter(S,V,Y)}tokenizeLineWithEdit(S,V,Y){return this.grammarTokens.tokenizeLineWithEdit(S,V,Y)}setSemanticTokens(S,V){this._semanticTokens.set(S,V),this._emitModelTokensChangedEvent({semanticTokensApplied:S!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(S,V){if(this.hasCompleteSemanticTokens())return;let Y=this._textModel.validateRange(this._semanticTokens.setPartial(S,V));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:Y.startLineNumber,toLineNumber:Y.endLineNumber}]})}getWordAtPosition(S){this.assertNotDisposed();let V=this._textModel.validatePosition(S),Y=this._textModel.getLineContent(V.lineNumber),we=this.getLineTokens(V.lineNumber),Ne=we.findTokenIndexAtOffset(V.column-1),[Oe,et]=je._findLanguageBoundaries(we,Ne),at=(0,Ze.t2)(V.column,this.getLanguageConfiguration(we.getLanguageId(Ne)).getWordDefinition(),Y.substring(Oe,et),Oe);if(at&&at.startColumn<=S.column&&S.column<=at.endColumn)return at;if(Ne>0&&Oe===V.column-1){let[lt,_t]=je._findLanguageBoundaries(we,Ne-1),gt=(0,Ze.t2)(V.column,this.getLanguageConfiguration(we.getLanguageId(Ne-1)).getWordDefinition(),Y.substring(lt,_t),lt);if(gt&&gt.startColumn<=S.column&&S.column<=gt.endColumn)return gt}return null}getLanguageConfiguration(S){return this._languageConfigurationService.getLanguageConfiguration(S)}static _findLanguageBoundaries(S,V){let Y=S.getLanguageId(V),we=0;for(let Oe=V;Oe>=0&&S.getLanguageId(Oe)===Y;Oe--)we=S.getStartOffset(Oe);let Ne=S.getLineContent().length;for(let Oe=V,et=S.getCount();Oe<et&&S.getLanguageId(Oe)===Y;Oe++)Ne=S.getEndOffset(Oe);return[we,Ne]}getWordUntilPosition(S){let V=this.getWordAtPosition(S);return V?{word:V.word.substr(0,S.column-V.startColumn),startColumn:V.startColumn,endColumn:S.column}:{word:"",startColumn:S.column,endColumn:S.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(S,V){let Y=this._textModel.validatePosition(new d.L(S,V)),we=this.getLineTokens(Y.lineNumber);return we.getLanguageId(we.findTokenIndexAtOffset(Y.column-1))}setLanguageId(S,V="api"){if(this._languageId===S)return;let Y={oldLanguage:this._languageId,newLanguage:S,source:V};this._languageId=S,this._bracketPairsTextModelPart.handleDidChangeLanguage(Y),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(Y),this._onDidChangeLanguageConfiguration.fire({})}}class mt extends _.JT{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(S,V,Y,we){super(),this._languageIdCodec=S,this._textModel=V,this.getLanguageId=Y,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new _.XK),this._tokens=new Li(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new _.XK),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new I.Q5),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new I.Q5),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new _.b2),this._register(rt.RW.onDidChange(Ne=>{let Oe=this.getLanguageId();Ne.changedLanguages.indexOf(Oe)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(we.onDidChangeVisibleRanges(({view:Ne,state:Oe})=>{if(Oe){let et=this._attachedViewStates.get(Ne);et||(et=new wt(()=>this.refreshRanges(et.lineRanges)),this._attachedViewStates.set(Ne,et)),et.handleStateChange(Oe)}else this._attachedViewStates.deleteAndDispose(Ne)}))}resetTokenization(S=!0){var V;this._tokens.flush(),(V=this._debugBackgroundTokens)===null||V===void 0||V.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Ot(this._textModel.getLineCount())),S&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let[Y,we]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let Ne=rt.RW.get(this.getLanguageId());if(!Ne)return[null,null];let Oe;try{Oe=Ne.getInitialState()}catch(et){return(0,u.dL)(et),[null,null]}return[Ne,Oe]})();if(this._tokenizer=Y&&we?new Tt(this._textModel.getLineCount(),Y,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let Ne={setTokens:Oe=>{this.setTokens(Oe)},backgroundTokenizationFinished:()=>{this._backgroundTokenizationState!==2&&(this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire())},setEndState:(Oe,et)=>{var at,lt,_t;if(!et)throw new u.he;let gt=(lt=(at=this._tokenizer)===null||at===void 0?void 0:at.store.getFirstInvalidEndStateLineNumber())!==null&&lt!==void 0?lt:void 0;gt!==void 0&&Oe>=gt&&((_t=this._tokenizer)===null||_t===void 0||_t.store.setEndState(Oe,et))}};Y&&Y.createBackgroundTokenizer&&!Y.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=Y.createBackgroundTokenizer(this._textModel,Ne)),this._backgroundTokenizer.value||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Gt(this._tokenizer,Ne),this._defaultBackgroundTokenizer.handleChanges()),Y!=null&&Y.backgroundTokenizerShouldOnlyVerifyTokens&&Y.createBackgroundTokenizer?(this._debugBackgroundTokens=new Li(this._languageIdCodec),this._debugBackgroundStates=new Ot(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=Y.createBackgroundTokenizer(this._textModel,{setTokens:Oe=>{var et;(et=this._debugBackgroundTokens)===null||et===void 0||et.setMultilineTokens(Oe,this._textModel)},backgroundTokenizationFinished(){},setEndState:(Oe,et)=>{var at;(at=this._debugBackgroundStates)===null||at===void 0||at.setEndState(Oe,et)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var S;(S=this._defaultBackgroundTokenizer)===null||S===void 0||S.handleChanges()}handleDidChangeContent(S){var V,Y,we;if(S.isFlush)this.resetTokenization(!1);else if(!S.isEolChange){for(let Ne of S.changes){let[Oe,et]=(0,v.Q)(Ne.text);this._tokens.acceptEdit(Ne.range,Oe,et),(V=this._debugBackgroundTokens)===null||V===void 0||V.acceptEdit(Ne.range,Oe,et)}(Y=this._debugBackgroundStates)===null||Y===void 0||Y.acceptChanges(S.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(S.changes),(we=this._defaultBackgroundTokenizer)===null||we===void 0||we.handleChanges()}}setTokens(S){let{changes:V}=this._tokens.setMultilineTokens(S,this._textModel);return V.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:V}),{changes:V}}refreshAllVisibleLineTokens(){let S=Te.z.joinMany([...this._attachedViewStates].map(([V,Y])=>Y.lineRanges));this.refreshRanges(S)}refreshRanges(S){for(let V of S)this.refreshRange(V.startLineNumber,V.endLineNumberExclusive-1)}refreshRange(S,V){var Y,we;if(!this._tokenizer)return;S=Math.max(1,S),V=Math.min(this._textModel.getLineCount(),V);let Ne=new Xe,{heuristicTokens:Oe}=this._tokenizer.tokenizeHeuristically(Ne,S,V),et=this.setTokens(Ne.finalize());if(Oe)for(let at of et.changes)(Y=this._backgroundTokenizer.value)===null||Y===void 0||Y.requestTokens(at.fromLineNumber,at.toLineNumber+1);(we=this._defaultBackgroundTokenizer)===null||we===void 0||we.checkFinished()}forceTokenization(S){var V,Y;let we=new Xe;(V=this._tokenizer)===null||V===void 0||V.updateTokensUntilLine(we,S),this.setTokens(we.finalize()),(Y=this._defaultBackgroundTokenizer)===null||Y===void 0||Y.checkFinished()}isCheapToTokenize(S){return!this._tokenizer||this._tokenizer.isCheapToTokenize(S)}tokenizeIfCheap(S){this.isCheapToTokenize(S)&&this.forceTokenization(S)}getLineTokens(S){var V;let Y=this._textModel.getLineContent(S),we=this._tokens.getTokens(this._textModel.getLanguageId(),S-1,Y);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>S&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>S){let Ne=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),S-1,Y);!we.equals(Ne)&&(!((V=this._debugBackgroundTokenizer.value)===null||V===void 0)&&V.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(S)}return we}getTokenTypeIfInsertingCharacter(S,V,Y){if(!this._tokenizer)return 0;let we=this._textModel.validatePosition(new d.L(S,V));return this.forceTokenization(we.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(we,Y)}tokenizeLineWithEdit(S,V,Y){if(!this._tokenizer)return null;let we=this._textModel.validatePosition(S);return this.forceTokenization(we.lineNumber),this._tokenizer.tokenizeLineWithEdit(we,V,Y)}get hasTokens(){return this._tokens.hasTokens}}class wt extends _.JT{get lineRanges(){return this._lineRanges}constructor(S){super(),this._refreshTokens=S,this.runner=this._register(new Wt.pY(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){(0,m.fS)(this._computedLineRanges,this._lineRanges)||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(S){this._lineRanges=S.visibleLineRanges,S.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}var Rt=t(4706),oi=t(4862),ei=function(Ke,S){return function(V,Y){S(V,Y,Ke)}};function yi(Ke,S){let V;return V=typeof Ke=="string"?function(Y){let we=new Ri;return we.acceptChunk(Y),we.finish()}(Ke):b.Hf(Ke)?function(Y){let we=new Ri,Ne;for(;typeof(Ne=Y.read())=="string";)we.acceptChunk(Ne);return we.finish()}(Ke):Ke,V.create(S)}let ki=0;class Ti{constructor(S){this._source=S,this._eos=!1}read(){if(this._eos)return null;let S=[],V=0,Y=0;for(;;){let we=this._source.read();if(we===null)return this._eos=!0,V===0?null:S.join("");if(we.length>0&&(S[V++]=we,Y+=we.length),Y>=65536)return S.join("")}}}let Pi=()=>{throw new Error("Invalid change accessor")},Ni=class Er extends _.JT{static resolveOptions(S,V){if(V.detectIndentation){let Y=ue(S,V.tabSize,V.insertSpaces);return new b.dJ({tabSize:Y.tabSize,indentSize:"tabSize",insertSpaces:Y.insertSpaces,trimAutoWhitespace:V.trimAutoWhitespace,defaultEOL:V.defaultEOL,bracketPairColorizationOptions:V.bracketPairColorizationOptions})}return new b.dJ(V)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(S){return this._eventEmitter.slowEvent(V=>S(V.contentChangedEvent))}onDidChangeContentOrInjectedText(S){return(0,_.F8)(this._eventEmitter.fastEvent(V=>S(V)),this._onDidChangeInjectedText.event(V=>S(V)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(S,V,Y,we=null,Ne,Oe,et){super(),this._undoRedoService=Ne,this._languageService=Oe,this._languageConfigurationService=et,this._onWillDispose=this._register(new I.Q5),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new he(Zt=>this.handleBeforeFireDecorationsChangedEvent(Zt))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new I.Q5),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new I.Q5),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new I.Q5),this._eventEmitter=this._register(new Me),this._languageSelectionListener=this._register(new _.XK),this._deltaDecorationCallCnt=0,this._attachedViews=new nt,ki++,this.id="$model"+ki,this.isForSimpleWidget=Y.isForSimpleWidget,this._associatedResource=we==null?x.o.parse("inmemory://model/"+ki):we,this._attachedEditorCount=0;let{textBuffer:at,disposable:lt}=yi(S,Y.defaultEOL);this._buffer=at,this._bufferDisposable=lt,this._options=Er.resolveOptions(this._buffer,Y);let _t=typeof V=="string"?V:V.languageId;typeof V!="string"&&(this._languageSelectionListener.value=V.onDidChange(()=>this._setLanguage(V.languageId))),this._bracketPairs=this._register(new oe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new be.l(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ie(this)),this._tokenizationTextModelPart=new je(this._languageService,this._languageConfigurationService,this,this._bracketPairs,_t,this._attachedViews);let gt=this._buffer.getLineCount(),Ft=this._buffer.getValueLengthInRange(new o.e(1,1,gt,this._buffer.getLineLength(gt)+1),0);Y.largeFileOptimizations?this._isTooLargeForTokenization=Ft>Er.LARGE_FILE_SIZE_THRESHOLD||gt>Er.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=Ft>Er._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=A.PJ(ki),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Yt,this._commandManager=new ce.NL(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(_t)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let S=new fi([],"",`
`,!1,!1,!0,!0);S.dispose(),this._buffer=S,this._bufferDisposable=_.JT.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(S,V){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(V),this._bracketPairs.handleDidChangeContent(V),this._eventEmitter.fire(new Rt.fV(S,V)))}setValue(S){if(this._assertNotDisposed(),S==null)throw(0,u.b1)();let{textBuffer:V,disposable:Y}=yi(S,this._options.defaultEOL);this._setValueFromTextBuffer(V,Y)}_createContentChanged2(S,V,Y,we,Ne,Oe,et,at){return{changes:[{range:S,rangeOffset:V,rangeLength:Y,text:we}],eol:this._buffer.getEOL(),isEolChange:at,versionId:this.getVersionId(),isUndoing:Ne,isRedoing:Oe,isFlush:et}}_setValueFromTextBuffer(S,V){this._assertNotDisposed();let Y=this.getFullModelRange(),we=this.getValueLengthInRange(Y),Ne=this.getLineCount(),Oe=this.getLineMaxColumn(Ne);this._buffer=S,this._bufferDisposable.dispose(),this._bufferDisposable=V,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Yt,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Rt.dQ([new Rt.Jx],this._versionId,!1,!1),this._createContentChanged2(new o.e(1,1,Ne,Oe),0,we,this.getValue(),!1,!1,!0,!1))}setEOL(S){this._assertNotDisposed();let V=S===1?`\r
`:`
`;if(this._buffer.getEOL()===V)return;let Y=this.getFullModelRange(),we=this.getValueLengthInRange(Y),Ne=this.getLineCount(),Oe=this.getLineMaxColumn(Ne);this._onBeforeEOLChange(),this._buffer.setEOL(V),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Rt.dQ([new Rt.CZ],this._versionId,!1,!1),this._createContentChanged2(new o.e(1,1,Ne,Oe),0,we,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let S=this.getVersionId(),V=this._decorationsTree.collectNodesPostOrder();for(let Y=0,we=V.length;Y<we;Y++){let Ne=V[Y],Oe=Ne.range,et=Ne.cachedAbsoluteStart-Ne.start,at=this._buffer.getOffsetAt(Oe.startLineNumber,Oe.startColumn),lt=this._buffer.getOffsetAt(Oe.endLineNumber,Oe.endColumn);Ne.cachedAbsoluteStart=at,Ne.cachedAbsoluteEnd=lt,Ne.cachedVersionId=S,Ne.start=at-et,Ne.end=lt-et,ht(Ne)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(S){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(S)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let S=0,V=0,Y=this._buffer.getLineCount();for(let we=1;we<=Y;we++){let Ne=this._buffer.getLineLength(we);Ne>=1e4?V+=Ne:S+=Ne}return V>S}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(S){this._assertNotDisposed();let V=S.tabSize!==void 0?S.tabSize:this._options.tabSize,Y=S.indentSize!==void 0?S.indentSize:this._options.originalIndentSize,we=S.insertSpaces!==void 0?S.insertSpaces:this._options.insertSpaces,Ne=S.trimAutoWhitespace!==void 0?S.trimAutoWhitespace:this._options.trimAutoWhitespace,Oe=S.bracketColorizationOptions!==void 0?S.bracketColorizationOptions:this._options.bracketPairColorizationOptions,et=new b.dJ({tabSize:V,indentSize:Y,insertSpaces:we,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:Ne,bracketPairColorizationOptions:Oe});if(this._options.equals(et))return;let at=this._options.createChangeEvent(et);this._options=et,this._bracketPairs.handleDidChangeOptions(at),this._decorationProvider.handleDidChangeOptions(at),this._onDidChangeOptions.fire(at)}detectIndentation(S,V){this._assertNotDisposed();let Y=ue(this._buffer,V,S);this.updateOptions({insertSpaces:Y.insertSpaces,tabSize:Y.tabSize,indentSize:Y.tabSize})}normalizeIndentation(S){return this._assertNotDisposed(),(0,f.x)(S,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(S=null){let V=this.findMatches(A.Qe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(S,V.map(Y=>({range:Y.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(S){this._assertNotDisposed();let V=this._validatePosition(S.lineNumber,S.column,0);return this._buffer.getOffsetAt(V.lineNumber,V.column)}getPositionAt(S){this._assertNotDisposed();let V=Math.min(this._buffer.getLength(),Math.max(0,S));return this._buffer.getPositionAt(V)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(S){this._versionId=S}_overwriteAlternativeVersionId(S){this._alternativeVersionId=S}_overwriteInitialUndoRedoSnapshot(S){this._initialUndoRedoSnapshot=S}getValue(S,V=!1){this._assertNotDisposed();let Y=this.getFullModelRange(),we=this.getValueInRange(Y,S);return V?this._buffer.getBOM()+we:we}createSnapshot(S=!1){return new Ti(this._buffer.createSnapshot(S))}getValueLength(S,V=!1){this._assertNotDisposed();let Y=this.getFullModelRange(),we=this.getValueLengthInRange(Y,S);return V?this._buffer.getBOM().length+we:we}getValueInRange(S,V=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(S),V)}getValueLengthInRange(S,V=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(S),V)}getCharacterCountInRange(S,V=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(S),V)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(S){if(this._assertNotDisposed(),S<1||S>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(S)}getLineLength(S){if(this._assertNotDisposed(),S<1||S>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(S)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(S){return this._assertNotDisposed(),1}getLineMaxColumn(S){if(this._assertNotDisposed(),S<1||S>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(S)+1}getLineFirstNonWhitespaceColumn(S){if(this._assertNotDisposed(),S<1||S>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(S)}getLineLastNonWhitespaceColumn(S){if(this._assertNotDisposed(),S<1||S>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(S)}_validateRangeRelaxedNoAllocations(S){let V=this._buffer.getLineCount(),Y=S.startLineNumber,we=S.startColumn,Ne=Math.floor(typeof Y!="number"||isNaN(Y)?1:Y),Oe=Math.floor(typeof we!="number"||isNaN(we)?1:we);if(Ne<1)Ne=1,Oe=1;else if(Ne>V)Ne=V,Oe=this.getLineMaxColumn(Ne);else if(Oe<=1)Oe=1;else{let gt=this.getLineMaxColumn(Ne);Oe>=gt&&(Oe=gt)}let et=S.endLineNumber,at=S.endColumn,lt=Math.floor(typeof et!="number"||isNaN(et)?1:et),_t=Math.floor(typeof at!="number"||isNaN(at)?1:at);if(lt<1)lt=1,_t=1;else if(lt>V)lt=V,_t=this.getLineMaxColumn(lt);else if(_t<=1)_t=1;else{let gt=this.getLineMaxColumn(lt);_t>=gt&&(_t=gt)}return Y===Ne&&we===Oe&&et===lt&&at===_t&&S instanceof o.e&&!(S instanceof h.Y)?S:new o.e(Ne,Oe,lt,_t)}_isValidPosition(S,V,Y){if(typeof S!="number"||typeof V!="number"||isNaN(S)||isNaN(V)||S<1||V<1||(0|S)!==S||(0|V)!==V||S>this._buffer.getLineCount())return!1;if(V===1)return!0;if(V>this.getLineMaxColumn(S))return!1;if(Y===1){let we=this._buffer.getLineCharCode(S,V-2);if(A.ZG(we))return!1}return!0}_validatePosition(S,V,Y){let we=Math.floor(typeof S!="number"||isNaN(S)?1:S),Ne=Math.floor(typeof V!="number"||isNaN(V)?1:V),Oe=this._buffer.getLineCount();if(we<1)return new d.L(1,1);if(we>Oe)return new d.L(Oe,this.getLineMaxColumn(Oe));if(Ne<=1)return new d.L(we,1);let et=this.getLineMaxColumn(we);if(Ne>=et)return new d.L(we,et);if(Y===1){let at=this._buffer.getLineCharCode(we,Ne-2);if(A.ZG(at))return new d.L(we,Ne-1)}return new d.L(we,Ne)}validatePosition(S){return this._assertNotDisposed(),S instanceof d.L&&this._isValidPosition(S.lineNumber,S.column,1)?S:this._validatePosition(S.lineNumber,S.column,1)}_isValidRange(S,V){let Y=S.startLineNumber,we=S.startColumn,Ne=S.endLineNumber,Oe=S.endColumn;if(!this._isValidPosition(Y,we,0)||!this._isValidPosition(Ne,Oe,0))return!1;if(V===1){let et=we>1?this._buffer.getLineCharCode(Y,we-2):0,at=Oe>1&&Oe<=this._buffer.getLineLength(Ne)?this._buffer.getLineCharCode(Ne,Oe-2):0,lt=A.ZG(et),_t=A.ZG(at);return!lt&&!_t}return!0}validateRange(S){if(this._assertNotDisposed(),S instanceof o.e&&!(S instanceof h.Y)&&this._isValidRange(S,1))return S;let V=this._validatePosition(S.startLineNumber,S.startColumn,0),Y=this._validatePosition(S.endLineNumber,S.endColumn,0),we=V.lineNumber,Ne=V.column,Oe=Y.lineNumber,et=Y.column;{let at=Ne>1?this._buffer.getLineCharCode(we,Ne-2):0,lt=et>1&&et<=this._buffer.getLineLength(Oe)?this._buffer.getLineCharCode(Oe,et-2):0,_t=A.ZG(at),gt=A.ZG(lt);return _t||gt?we===Oe&&Ne===et?new o.e(we,Ne-1,Oe,et-1):_t&&gt?new o.e(we,Ne-1,Oe,et+1):_t?new o.e(we,Ne-1,Oe,et):new o.e(we,Ne,Oe,et+1):new o.e(we,Ne,Oe,et)}}modifyPosition(S,V){this._assertNotDisposed();let Y=this.getOffsetAt(S)+V;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,Y)))}getFullModelRange(){this._assertNotDisposed();let S=this.getLineCount();return new o.e(1,1,S,this.getLineMaxColumn(S))}findMatchesLineByLine(S,V,Y,we){return this._buffer.findMatchesLineByLine(S,V,Y,we)}findMatches(S,V,Y,we,Ne,Oe,et=999){this._assertNotDisposed();let at=null;V!==null&&(Array.isArray(V)||(V=[V]),V.every(gt=>o.e.isIRange(gt))&&(at=V.map(gt=>this.validateRange(gt)))),at===null&&(at=[this.getFullModelRange()]),at=at.sort((gt,Ft)=>gt.startLineNumber-Ft.startLineNumber||gt.startColumn-Ft.startColumn);let lt=[],_t;if(lt.push(at.reduce((gt,Ft)=>o.e.areIntersecting(gt,Ft)?gt.plusRange(Ft):(lt.push(gt),Ft))),!Y&&S.indexOf(`
`)<0){let gt=new tn.bc(S,Y,we,Ne).parseSearchRequest();if(!gt)return[];_t=Ft=>this.findMatchesLineByLine(Ft,gt,Oe,et)}else _t=gt=>tn.pM.findMatches(this,new tn.bc(S,Y,we,Ne),gt,Oe,et);return lt.map(_t).reduce((gt,Ft)=>gt.concat(Ft),[])}findNextMatch(S,V,Y,we,Ne,Oe){this._assertNotDisposed();let et=this.validatePosition(V);if(!Y&&S.indexOf(`
`)<0){let at=new tn.bc(S,Y,we,Ne).parseSearchRequest();if(!at)return null;let lt=this.getLineCount(),_t=new o.e(et.lineNumber,et.column,lt,this.getLineMaxColumn(lt)),gt=this.findMatchesLineByLine(_t,at,Oe,1);return tn.pM.findNextMatch(this,new tn.bc(S,Y,we,Ne),et,Oe),gt.length>0?gt[0]:(_t=new o.e(1,1,et.lineNumber,this.getLineMaxColumn(et.lineNumber)),gt=this.findMatchesLineByLine(_t,at,Oe,1),gt.length>0?gt[0]:null)}return tn.pM.findNextMatch(this,new tn.bc(S,Y,we,Ne),et,Oe)}findPreviousMatch(S,V,Y,we,Ne,Oe){this._assertNotDisposed();let et=this.validatePosition(V);return tn.pM.findPreviousMatch(this,new tn.bc(S,Y,we,Ne),et,Oe)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(S){if((this.getEOL()===`
`?0:1)!==S)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(S)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(S){return S instanceof b.Qi?S:new b.Qi(S.identifier||null,this.validateRange(S.range),S.text,S.forceMoveMarkers||!1,S.isAutoWhitespaceEdit||!1,S._isTracked||!1)}_validateEditOperations(S){let V=[];for(let Y=0,we=S.length;Y<we;Y++)V[Y]=this._validateEditOperation(S[Y]);return V}pushEditOperations(S,V,Y,we){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(S,this._validateEditOperations(V),Y,we)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(S,V,Y,we){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let Ne=V.map(et=>({range:this.validateRange(et.range),text:et.text})),Oe=!0;if(S)for(let et=0,at=S.length;et<at;et++){let lt=S[et],_t=!1;for(let gt=0,Ft=Ne.length;gt<Ft;gt++){let Zt=Ne[gt].range,ii=Zt.startLineNumber>lt.endLineNumber,hi=lt.startLineNumber>Zt.endLineNumber;if(!ii&&!hi){_t=!0;break}}if(!_t){Oe=!1;break}}if(Oe)for(let et=0,at=this._trimAutoWhitespaceLines.length;et<at;et++){let lt=this._trimAutoWhitespaceLines[et],_t=this.getLineMaxColumn(lt),gt=!0;for(let Ft=0,Zt=Ne.length;Ft<Zt;Ft++){let ii=Ne[Ft].range,hi=Ne[Ft].text;if(!(lt<ii.startLineNumber||lt>ii.endLineNumber||lt===ii.startLineNumber&&ii.startColumn===_t&&ii.isEmpty()&&hi&&hi.length>0&&hi.charAt(0)===`
`||lt===ii.startLineNumber&&ii.startColumn===1&&ii.isEmpty()&&hi&&hi.length>0&&hi.charAt(hi.length-1)===`
`)){gt=!1;break}}if(gt){let Ft=new o.e(lt,1,lt,_t);V.push(new b.Qi(null,Ft,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(S,V,Y,we)}_applyUndo(S,V,Y,we){let Ne=S.map(Oe=>{let et=this.getPositionAt(Oe.newPosition),at=this.getPositionAt(Oe.newEnd);return{range:new o.e(et.lineNumber,et.column,at.lineNumber,at.column),text:Oe.oldText}});this._applyUndoRedoEdits(Ne,V,!0,!1,Y,we)}_applyRedo(S,V,Y,we){let Ne=S.map(Oe=>{let et=this.getPositionAt(Oe.oldPosition),at=this.getPositionAt(Oe.oldEnd);return{range:new o.e(et.lineNumber,et.column,at.lineNumber,at.column),text:Oe.newText}});this._applyUndoRedoEdits(Ne,V,!1,!0,Y,we)}_applyUndoRedoEdits(S,V,Y,we,Ne,Oe){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=Y,this._isRedoing=we,this.applyEdits(S,!1),this.setEOL(V),this._overwriteAlternativeVersionId(Ne)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(Oe),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(S,V=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let Y=this._validateEditOperations(S);return this._doApplyEdits(Y,V)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(S,V){let Y=this._buffer.getLineCount(),we=this._buffer.applyEdits(S,this._options.trimAutoWhitespace,V),Ne=this._buffer.getLineCount(),Oe=we.changes;if(this._trimAutoWhitespaceLines=we.trimAutoWhitespaceLineNumbers,Oe.length!==0){for(let lt=0,_t=Oe.length;lt<_t;lt++){let gt=Oe[lt];this._decorationsTree.acceptReplace(gt.rangeOffset,gt.rangeLength,gt.text.length,gt.forceMoveMarkers)}let et=[];this._increaseVersionId();let at=Y;for(let lt=0,_t=Oe.length;lt<_t;lt++){let gt=Oe[lt],[Ft]=(0,v.Q)(gt.text);this._onDidChangeDecorations.fire();let Zt=gt.range.startLineNumber,ii=gt.range.endLineNumber,hi=ii-Zt,wi=Ft,Ei=Math.min(hi,wi),xi=wi-hi,bi=Ne-at-xi+Zt,vn=bi,Pn=bi+wi,xn=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new d.L(vn,1)),this.getOffsetAt(new d.L(Pn,this.getLineMaxColumn(Pn))),0),Qn=Rt.gk.fromDecorations(xn),ko=new m.H9(Qn);for(let go=Ei;go>=0;go--){let ji=Zt+go,Tn=bi+go;ko.takeFromEndWhile(Fn=>Fn.lineNumber>Tn);let bn=ko.takeFromEndWhile(Fn=>Fn.lineNumber===Tn);et.push(new Rt.rU(ji,this.getLineContent(Tn),bn))}if(Ei<hi){let go=Zt+Ei;et.push(new Rt.lN(go+1,ii))}if(Ei<wi){let go=new m.H9(Qn),ji=Zt+Ei,Tn=wi-Ei,bn=Ne-at-Tn+ji+1,Fn=[],Xn=[];for(let ho=0;ho<Tn;ho++){let _o=bn+ho;Xn[ho]=this.getLineContent(_o),go.takeWhile(eo=>eo.lineNumber<_o),Fn[ho]=go.takeWhile(eo=>eo.lineNumber===_o)}et.push(new Rt.Tx(ji+1,Zt+wi,Xn,Fn))}at+=xi}this._emitContentChangedEvent(new Rt.dQ(et,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:Oe,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return we.reverseEdits===null?void 0:we.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(S){if(S===null||S.size===0)return;let V=Array.from(S).map(Y=>new Rt.rU(Y,this.getLineContent(Y),this._getInjectedTextInLine(Y)));this._onDidChangeInjectedText.fire(new Rt.D8(V))}changeDecorations(S,V=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(V,S)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(S,V){let Y={addDecoration:(Ne,Oe)=>this._deltaDecorationsImpl(S,[],[{range:Ne,options:Oe}])[0],changeDecoration:(Ne,Oe)=>{this._changeDecorationImpl(Ne,Oe)},changeDecorationOptions:(Ne,Oe)=>{this._changeDecorationOptionsImpl(Ne,St(Oe))},removeDecoration:Ne=>{this._deltaDecorationsImpl(S,[Ne],[])},deltaDecorations:(Ne,Oe)=>Ne.length===0&&Oe.length===0?[]:this._deltaDecorationsImpl(S,Ne,Oe)},we=null;try{we=V(Y)}catch(Ne){(0,u.dL)(Ne)}return Y.addDecoration=Pi,Y.changeDecoration=Pi,Y.changeDecorationOptions=Pi,Y.removeDecoration=Pi,Y.deltaDecorations=Pi,we}deltaDecorations(S,V,Y=0){if(this._assertNotDisposed(),S||(S=[]),S.length===0&&V.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),(0,u.dL)(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(Y,S,V)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(S){return this.getDecorationRange(S)}_setTrackedRange(S,V,Y){let we=S?this._decorations[S]:null;if(!we)return V?this._deltaDecorationsImpl(0,[],[{range:V,options:wn[Y]}],!0)[0]:null;if(!V)return this._decorationsTree.delete(we),delete this._decorations[we.id],null;let Ne=this._validateRangeRelaxedNoAllocations(V),Oe=this._buffer.getOffsetAt(Ne.startLineNumber,Ne.startColumn),et=this._buffer.getOffsetAt(Ne.endLineNumber,Ne.endColumn);return this._decorationsTree.delete(we),we.reset(this.getVersionId(),Oe,et,Ne),we.setOptions(wn[Y]),this._decorationsTree.insert(we),we.id}removeAllDecorationsWithOwnerId(S){if(this._isDisposed)return;let V=this._decorationsTree.collectNodesFromOwner(S);for(let Y=0,we=V.length;Y<we;Y++){let Ne=V[Y];this._decorationsTree.delete(Ne),delete this._decorations[Ne.id]}}getDecorationOptions(S){let V=this._decorations[S];return V?V.options:null}getDecorationRange(S){let V=this._decorations[S];return V?this._decorationsTree.getNodeRange(this,V):null}getLineDecorations(S,V=0,Y=!1){return S<1||S>this.getLineCount()?[]:this.getLinesDecorations(S,S,V,Y)}getLinesDecorations(S,V,Y=0,we=!1,Ne=!1){let Oe=this.getLineCount(),et=Math.min(Oe,Math.max(1,S)),at=Math.min(Oe,Math.max(1,V)),lt=this.getLineMaxColumn(at),_t=new o.e(et,1,at,lt),gt=this._getDecorationsInRange(_t,Y,we,Ne);return(0,m.vA)(gt,this._decorationProvider.getDecorationsInRange(_t,Y,we)),gt}getDecorationsInRange(S,V=0,Y=!1,we=!1,Ne=!1){let Oe=this.validateRange(S),et=this._getDecorationsInRange(Oe,V,Y,Ne);return(0,m.vA)(et,this._decorationProvider.getDecorationsInRange(Oe,V,Y,we)),et}getOverviewRulerDecorations(S=0,V=!1){return this._decorationsTree.getAll(this,S,V,!0,!1)}getInjectedTextDecorations(S=0){return this._decorationsTree.getAllInjectedText(this,S)}_getInjectedTextInLine(S){let V=this._buffer.getOffsetAt(S,1),Y=V+this._buffer.getLineLength(S),we=this._decorationsTree.getInjectedTextInInterval(this,V,Y,0);return Rt.gk.fromDecorations(we).filter(Ne=>Ne.lineNumber===S)}getAllDecorations(S=0,V=!1){let Y=this._decorationsTree.getAll(this,S,V,!1,!1);return Y=Y.concat(this._decorationProvider.getAllDecorations(S,V)),Y}getAllMarginDecorations(S=0){return this._decorationsTree.getAll(this,S,!1,!1,!0)}_getDecorationsInRange(S,V,Y,we){let Ne=this._buffer.getOffsetAt(S.startLineNumber,S.startColumn),Oe=this._buffer.getOffsetAt(S.endLineNumber,S.endColumn);return this._decorationsTree.getAllInInterval(this,Ne,Oe,V,Y,we)}getRangeAt(S,V){return this._buffer.getRangeAt(S,V-S)}_changeDecorationImpl(S,V){let Y=this._decorations[S];if(!Y)return;if(Y.options.after){let et=this.getDecorationRange(S);this._onDidChangeDecorations.recordLineAffectedByInjectedText(et.endLineNumber)}if(Y.options.before){let et=this.getDecorationRange(S);this._onDidChangeDecorations.recordLineAffectedByInjectedText(et.startLineNumber)}let we=this._validateRangeRelaxedNoAllocations(V),Ne=this._buffer.getOffsetAt(we.startLineNumber,we.startColumn),Oe=this._buffer.getOffsetAt(we.endLineNumber,we.endColumn);this._decorationsTree.delete(Y),Y.reset(this.getVersionId(),Ne,Oe,we),this._decorationsTree.insert(Y),this._onDidChangeDecorations.checkAffectedAndFire(Y.options),Y.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(we.endLineNumber),Y.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(we.startLineNumber)}_changeDecorationOptionsImpl(S,V){let Y=this._decorations[S];if(!Y)return;let we=!(!Y.options.overviewRuler||!Y.options.overviewRuler.color),Ne=!(!V.overviewRuler||!V.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(Y.options),this._onDidChangeDecorations.checkAffectedAndFire(V),Y.options.after||V.after){let Oe=this._decorationsTree.getNodeRange(this,Y);this._onDidChangeDecorations.recordLineAffectedByInjectedText(Oe.endLineNumber)}if(Y.options.before||V.before){let Oe=this._decorationsTree.getNodeRange(this,Y);this._onDidChangeDecorations.recordLineAffectedByInjectedText(Oe.startLineNumber)}we!==Ne?(this._decorationsTree.delete(Y),Y.setOptions(V),this._decorationsTree.insert(Y)):Y.setOptions(V)}_deltaDecorationsImpl(S,V,Y,we=!1){let Ne=this.getVersionId(),Oe=V.length,et=0,at=Y.length,lt=0;this._onDidChangeDecorations.beginDeferredEmit();try{let _t=new Array(at);for(;et<Oe||lt<at;){let gt=null;if(et<Oe){do gt=this._decorations[V[et++]];while(!gt&&et<Oe);if(gt){if(gt.options.after){let Ft=this._decorationsTree.getNodeRange(this,gt);this._onDidChangeDecorations.recordLineAffectedByInjectedText(Ft.endLineNumber)}if(gt.options.before){let Ft=this._decorationsTree.getNodeRange(this,gt);this._onDidChangeDecorations.recordLineAffectedByInjectedText(Ft.startLineNumber)}this._decorationsTree.delete(gt),we||this._onDidChangeDecorations.checkAffectedAndFire(gt.options)}}if(lt<at){if(!gt){let Ei=++this._lastDecorationId,xi=`${this._instanceId};${Ei}`;gt=new ke(xi,0,0),this._decorations[xi]=gt}let Ft=Y[lt],Zt=this._validateRangeRelaxedNoAllocations(Ft.range),ii=St(Ft.options),hi=this._buffer.getOffsetAt(Zt.startLineNumber,Zt.startColumn),wi=this._buffer.getOffsetAt(Zt.endLineNumber,Zt.endColumn);gt.ownerId=S,gt.reset(Ne,hi,wi,Zt),gt.setOptions(ii),gt.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(Zt.endLineNumber),gt.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(Zt.startLineNumber),we||this._onDidChangeDecorations.checkAffectedAndFire(ii),this._decorationsTree.insert(gt),_t[lt]=gt.id,lt++}else gt&&delete this._decorations[gt.id]}return _t}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(S,V){typeof S=="string"?(this._languageSelectionListener.clear(),this._setLanguage(S,V)):(this._languageSelectionListener.value=S.onDidChange(()=>this._setLanguage(S.languageId,V)),this._setLanguage(S.languageId,V))}_setLanguage(S,V){this.tokenization.setLanguageId(S,V),this._languageService.requestRichLanguageFeatures(S)}getLanguageIdAtPosition(S,V){return this.tokenization.getLanguageIdAtPosition(S,V)}getWordAtPosition(S){return this._tokenizationTextModelPart.getWordAtPosition(S)}getWordUntilPosition(S){return this._tokenizationTextModelPart.getWordUntilPosition(S)}normalizePosition(S,V){return S}getLineIndentColumn(S){return function(V){let Y=0;for(let we of V){if(we!==" "&&we!=="	")break;Y++}return Y}(this.getLineContent(S))+1}};function gn(Ke){return!(!Ke.options.overviewRuler||!Ke.options.overviewRuler.color)}function Dn(Ke){return!!Ke.options.after||!!Ke.options.before}Ni._MODEL_SYNC_LIMIT=52428800,Ni.LARGE_FILE_SIZE_THRESHOLD=20971520,Ni.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,Ni.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:r.D.tabSize,indentSize:r.D.indentSize,insertSpaces:r.D.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:r.D.trimAutoWhitespace,largeFileOptimizations:r.D.largeFileOptimizations,bracketPairColorizationOptions:r.D.bracketPairColorizationOptions},Ni=function(Ke,S,V,Y){var we,Ne=arguments.length,Oe=Ne<3?S:Y===null?Y=Object.getOwnPropertyDescriptor(S,V):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Oe=Reflect.decorate(Ke,S,V,Y);else for(var et=Ke.length-1;et>=0;et--)(we=Ke[et])&&(Oe=(Ne<3?we(Oe):Ne>3?we(S,V,Oe):we(S,V))||Oe);return Ne>3&&Oe&&Object.defineProperty(S,V,Oe),Oe}([ei(4,oi.tJ),ei(5,i.O),ei(6,c.c_)],Ni);class Yt{constructor(){this._decorationsTree0=new ee,this._decorationsTree1=new ee,this._injectedTextDecorationsTree=new ee}ensureAllNodesHaveRanges(S){this.getAll(S,0,!1,!1,!1)}_ensureNodesHaveRanges(S,V){for(let Y of V)Y.range===null&&(Y.range=S.getRangeAt(Y.cachedAbsoluteStart,Y.cachedAbsoluteEnd));return V}getAllInInterval(S,V,Y,we,Ne,Oe){let et=S.getVersionId(),at=this._intervalSearch(V,Y,we,Ne,et,Oe);return this._ensureNodesHaveRanges(S,at)}_intervalSearch(S,V,Y,we,Ne,Oe){let et=this._decorationsTree0.intervalSearch(S,V,Y,we,Ne,Oe),at=this._decorationsTree1.intervalSearch(S,V,Y,we,Ne,Oe),lt=this._injectedTextDecorationsTree.intervalSearch(S,V,Y,we,Ne,Oe);return et.concat(at).concat(lt)}getInjectedTextInInterval(S,V,Y,we){let Ne=S.getVersionId(),Oe=this._injectedTextDecorationsTree.intervalSearch(V,Y,we,!1,Ne,!1);return this._ensureNodesHaveRanges(S,Oe).filter(et=>et.options.showIfCollapsed||!et.range.isEmpty())}getAllInjectedText(S,V){let Y=S.getVersionId(),we=this._injectedTextDecorationsTree.search(V,!1,Y,!1);return this._ensureNodesHaveRanges(S,we).filter(Ne=>Ne.options.showIfCollapsed||!Ne.range.isEmpty())}getAll(S,V,Y,we,Ne){let Oe=S.getVersionId(),et=this._search(V,Y,we,Oe,Ne);return this._ensureNodesHaveRanges(S,et)}_search(S,V,Y,we,Ne){if(Y)return this._decorationsTree1.search(S,V,we,Ne);{let Oe=this._decorationsTree0.search(S,V,we,Ne),et=this._decorationsTree1.search(S,V,we,Ne),at=this._injectedTextDecorationsTree.search(S,V,we,Ne);return Oe.concat(et).concat(at)}}collectNodesFromOwner(S){let V=this._decorationsTree0.collectNodesFromOwner(S),Y=this._decorationsTree1.collectNodesFromOwner(S),we=this._injectedTextDecorationsTree.collectNodesFromOwner(S);return V.concat(Y).concat(we)}collectNodesPostOrder(){let S=this._decorationsTree0.collectNodesPostOrder(),V=this._decorationsTree1.collectNodesPostOrder(),Y=this._injectedTextDecorationsTree.collectNodesPostOrder();return S.concat(V).concat(Y)}insert(S){Dn(S)?this._injectedTextDecorationsTree.insert(S):gn(S)?this._decorationsTree1.insert(S):this._decorationsTree0.insert(S)}delete(S){Dn(S)?this._injectedTextDecorationsTree.delete(S):gn(S)?this._decorationsTree1.delete(S):this._decorationsTree0.delete(S)}getNodeRange(S,V){let Y=S.getVersionId();return V.cachedVersionId!==Y&&this._resolveNode(V,Y),V.range===null&&(V.range=S.getRangeAt(V.cachedAbsoluteStart,V.cachedAbsoluteEnd)),V.range}_resolveNode(S,V){Dn(S)?this._injectedTextDecorationsTree.resolveNode(S,V):gn(S)?this._decorationsTree1.resolveNode(S,V):this._decorationsTree0.resolveNode(S,V)}acceptReplace(S,V,Y,we){this._decorationsTree0.acceptReplace(S,V,Y,we),this._decorationsTree1.acceptReplace(S,V,Y,we),this._injectedTextDecorationsTree.acceptReplace(S,V,Y,we)}}function Ai(Ke){return Ke.replace(/[^a-z0-9\-_]/gi," ")}class zi{constructor(S){this.color=S.color||"",this.darkColor=S.darkColor||""}}class un extends zi{constructor(S){super(S),this._resolvedColor=null,this.position=typeof S.position=="number"?S.position:b.sh.Center}getColor(S){return this._resolvedColor||(S.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,S):this._resolvedColor=this._resolveColor(this.color,S)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(S,V){if(typeof S=="string")return S;let Y=S?V.getColor(S.id):null;return Y?Y.toString():""}}class Ln{constructor(S){var V;this.position=(V=S==null?void 0:S.position)!==null&&V!==void 0?V:b.U.Left}}class pn extends zi{constructor(S){super(S),this.position=S.position}getColor(S){return this._resolvedColor||(S.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,S):this._resolvedColor=this._resolveColor(this.color,S)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(S,V){return typeof S=="string"?B.Il.fromHex(S):V.getColor(S.id)}}class _n{static from(S){return S instanceof _n?S:new _n(S)}constructor(S){this.content=S.content||"",this.inlineClassName=S.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=S.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=S.attachedData||null,this.cursorStops=S.cursorStops||null}}class dn{static register(S){return new dn(S)}static createDynamic(S){return new dn(S)}constructor(S){var V,Y,we,Ne,Oe;this.description=S.description,this.blockClassName=S.blockClassName?Ai(S.blockClassName):null,this.blockDoesNotCollapse=(V=S.blockDoesNotCollapse)!==null&&V!==void 0?V:null,this.blockIsAfterEnd=(Y=S.blockIsAfterEnd)!==null&&Y!==void 0?Y:null,this.blockPadding=(we=S.blockPadding)!==null&&we!==void 0?we:null,this.stickiness=S.stickiness||0,this.zIndex=S.zIndex||0,this.className=S.className?Ai(S.className):null,this.hoverMessage=S.hoverMessage||null,this.glyphMarginHoverMessage=S.glyphMarginHoverMessage||null,this.isWholeLine=S.isWholeLine||!1,this.showIfCollapsed=S.showIfCollapsed||!1,this.collapseOnReplaceEdit=S.collapseOnReplaceEdit||!1,this.overviewRuler=S.overviewRuler?new un(S.overviewRuler):null,this.minimap=S.minimap?new pn(S.minimap):null,this.glyphMargin=S.glyphMarginClassName?new Ln(S.glyphMargin):null,this.glyphMarginClassName=S.glyphMarginClassName?Ai(S.glyphMarginClassName):null,this.linesDecorationsClassName=S.linesDecorationsClassName?Ai(S.linesDecorationsClassName):null,this.firstLineDecorationClassName=S.firstLineDecorationClassName?Ai(S.firstLineDecorationClassName):null,this.marginClassName=S.marginClassName?Ai(S.marginClassName):null,this.inlineClassName=S.inlineClassName?Ai(S.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=S.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=S.beforeContentClassName?Ai(S.beforeContentClassName):null,this.afterContentClassName=S.afterContentClassName?Ai(S.afterContentClassName):null,this.after=S.after?_n.from(S.after):null,this.before=S.before?_n.from(S.before):null,this.hideInCommentTokens=(Ne=S.hideInCommentTokens)!==null&&Ne!==void 0&&Ne,this.hideInStringTokens=(Oe=S.hideInStringTokens)!==null&&Oe!==void 0&&Oe}}dn.EMPTY=dn.register({description:"empty"});let wn=[dn.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),dn.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),dn.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),dn.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function St(Ke){return Ke instanceof dn?Ke:dn.createDynamic(Ke)}class he extends _.JT{constructor(S){super(),this.handleBeforeFire=S,this._actual=this._register(new I.Q5),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var S;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(S=this._affectedInjectedTextLines)===null||S===void 0||S.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(S){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(S)}checkAffectedAndFire(S){this._affectsMinimap||(this._affectsMinimap=!(!S.minimap||!S.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!(!S.overviewRuler||!S.overviewRuler.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!S.glyphMarginClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let S={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(S)}}class Me extends _.JT{constructor(){super(),this._fastEmitter=this._register(new I.Q5),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new I.Q5),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(S=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=S;let V=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(V),this._slowEmitter.fire(V)}}fire(S){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(S):this._deferredEvent=S:(this._fastEmitter.fire(S),this._slowEmitter.fire(S))}}class nt{constructor(){this._onDidChangeVisibleRanges=new I.Q5,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){let S=new pt(V=>{this._onDidChangeVisibleRanges.fire({view:S,state:V})});return this._views.add(S),S}detachView(S){this._views.delete(S),this._onDidChangeVisibleRanges.fire({view:S,state:void 0})}}class pt{constructor(S){this.handleStateChange=S}setVisibleLines(S,V){let Y=S.map(we=>new Te.z(we.startLineNumber,we.endLineNumber+1));this.handleStateChange({visibleLineRanges:Y,stabilized:V})}}},4954:(ut,Ie,t)=>{"use strict";t.d(Ie,{U:()=>B});var m=t(5976);class B extends m.JT{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}},7277:(ut,Ie,t)=>{"use strict";t.d(Ie,{bc:()=>A,cM:()=>d,iE:()=>x,pM:()=>f,sz:()=>o});var m=t(7295),B=t(4929),u=t(187),I=t(4314),_=t(4973);class A{constructor(r,i,c,b){this.searchString=r,this.isRegex=i,this.matchCase=c,this.wordSeparators=b}parseSearchRequest(){if(this.searchString==="")return null;let r;r=this.isRegex?function(b){if(!b||b.length===0)return!1;for(let l=0,a=b.length;l<a;l++){let w=b.charCodeAt(l);if(w===10)return!0;if(w===92){if(l++,l>=a)break;let E=b.charCodeAt(l);if(E===110||E===114||E===87)return!0}}return!1}(this.searchString):this.searchString.indexOf(`
`)>=0;let i=null;try{i=m.GF(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:r,global:!0,unicode:!0})}catch(b){return null}if(!i)return null;let c=!this.isRegex&&!r;return c&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(c=this.matchCase),new _.Tx(i,this.wordSeparators?(0,B.u)(this.wordSeparators):null,c?this.searchString:null)}}function x(h,r,i){if(!i)return new _.tk(h,null);let c=[];for(let b=0,l=r.length;b<l;b++)c[b]=r[b];return new _.tk(h,c)}class v{constructor(r){let i=[],c=0;for(let b=0,l=r.length;b<l;b++)r.charCodeAt(b)===10&&(i[c++]=b);this._lineFeedsOffsets=i}findLineFeedCountBeforeOffset(r){let i=this._lineFeedsOffsets,c=0,b=i.length-1;if(b===-1||r<=i[0])return 0;for(;c<b;){let l=c+((b-c)/2>>0);i[l]>=r?b=l-1:i[l+1]>=r?(c=l,b=l):c=l+1}return c+1}}class f{static findMatches(r,i,c,b,l){let a=i.parseSearchRequest();return a?a.regex.multiline?this._doFindMatchesMultiline(r,c,new o(a.wordSeparators,a.regex),b,l):this._doFindMatchesLineByLine(r,c,a,b,l):[]}static _getMultilineMatchRange(r,i,c,b,l,a){let w,E,D=0;if(b?(D=b.findLineFeedCountBeforeOffset(l),w=i+l+D):w=i+l,b){let R=b.findLineFeedCountBeforeOffset(l+a.length)-D;E=w+a.length+R}else E=w+a.length;let L=r.getPositionAt(w),k=r.getPositionAt(E);return new I.e(L.lineNumber,L.column,k.lineNumber,k.column)}static _doFindMatchesMultiline(r,i,c,b,l){let a=r.getOffsetAt(i.getStartPosition()),w=r.getValueInRange(i,1),E=r.getEOL()===`\r
`?new v(w):null,D=[],L,k=0;for(c.reset(0);L=c.next(w);)if(D[k++]=x(this._getMultilineMatchRange(r,a,w,E,L.index,L[0]),L,b),k>=l)return D;return D}static _doFindMatchesLineByLine(r,i,c,b,l){let a=[],w=0;if(i.startLineNumber===i.endLineNumber){let D=r.getLineContent(i.startLineNumber).substring(i.startColumn-1,i.endColumn-1);return w=this._findMatchesInLine(c,D,i.startLineNumber,i.startColumn-1,w,a,b,l),a}let E=r.getLineContent(i.startLineNumber).substring(i.startColumn-1);w=this._findMatchesInLine(c,E,i.startLineNumber,i.startColumn-1,w,a,b,l);for(let D=i.startLineNumber+1;D<i.endLineNumber&&w<l;D++)w=this._findMatchesInLine(c,r.getLineContent(D),D,0,w,a,b,l);if(w<l){let D=r.getLineContent(i.endLineNumber).substring(0,i.endColumn-1);w=this._findMatchesInLine(c,D,i.endLineNumber,0,w,a,b,l)}return a}static _findMatchesInLine(r,i,c,b,l,a,w,E){let D=r.wordSeparators;if(!w&&r.simpleSearch){let R=r.simpleSearch,O=R.length,$=i.length,N=-O;for(;(N=i.indexOf(R,N+O))!==-1;)if((!D||d(D,i,$,N,O))&&(a[l++]=new _.tk(new I.e(c,N+1+b,c,N+1+O+b),null),l>=E))return l;return l}let L=new o(r.wordSeparators,r.regex),k;L.reset(0);do if(k=L.next(i),k&&(a[l++]=x(new I.e(c,k.index+1+b,c,k.index+1+k[0].length+b),k,w),l>=E))return l;while(k);return l}static findNextMatch(r,i,c,b){let l=i.parseSearchRequest();if(!l)return null;let a=new o(l.wordSeparators,l.regex);return l.regex.multiline?this._doFindNextMatchMultiline(r,c,a,b):this._doFindNextMatchLineByLine(r,c,a,b)}static _doFindNextMatchMultiline(r,i,c,b){let l=new u.L(i.lineNumber,1),a=r.getOffsetAt(l),w=r.getLineCount(),E=r.getValueInRange(new I.e(l.lineNumber,l.column,w,r.getLineMaxColumn(w)),1),D=r.getEOL()===`\r
`?new v(E):null;c.reset(i.column-1);let L=c.next(E);return L?x(this._getMultilineMatchRange(r,a,E,D,L.index,L[0]),L,b):i.lineNumber!==1||i.column!==1?this._doFindNextMatchMultiline(r,new u.L(1,1),c,b):null}static _doFindNextMatchLineByLine(r,i,c,b){let l=r.getLineCount(),a=i.lineNumber,w=r.getLineContent(a),E=this._findFirstMatchInLine(c,w,a,i.column,b);if(E)return E;for(let D=1;D<=l;D++){let L=(a+D-1)%l,k=r.getLineContent(L+1),R=this._findFirstMatchInLine(c,k,L+1,1,b);if(R)return R}return null}static _findFirstMatchInLine(r,i,c,b,l){r.reset(b-1);let a=r.next(i);return a?x(new I.e(c,a.index+1,c,a.index+1+a[0].length),a,l):null}static findPreviousMatch(r,i,c,b){let l=i.parseSearchRequest();if(!l)return null;let a=new o(l.wordSeparators,l.regex);return l.regex.multiline?this._doFindPreviousMatchMultiline(r,c,a,b):this._doFindPreviousMatchLineByLine(r,c,a,b)}static _doFindPreviousMatchMultiline(r,i,c,b){let l=this._doFindMatchesMultiline(r,new I.e(1,1,i.lineNumber,i.column),c,b,9990);if(l.length>0)return l[l.length-1];let a=r.getLineCount();return i.lineNumber!==a||i.column!==r.getLineMaxColumn(a)?this._doFindPreviousMatchMultiline(r,new u.L(a,r.getLineMaxColumn(a)),c,b):null}static _doFindPreviousMatchLineByLine(r,i,c,b){let l=r.getLineCount(),a=i.lineNumber,w=r.getLineContent(a).substring(0,i.column-1),E=this._findLastMatchInLine(c,w,a,b);if(E)return E;for(let D=1;D<=l;D++){let L=(l+a-D-1)%l,k=r.getLineContent(L+1),R=this._findLastMatchInLine(c,k,L+1,b);if(R)return R}return null}static _findLastMatchInLine(r,i,c,b){let l,a=null;for(r.reset(0);l=r.next(i);)a=x(new I.e(c,l.index+1,c,l.index+1+l[0].length),l,b);return a}}function d(h,r,i,c,b){return function(l,a,w,E,D){if(E===0)return!0;let L=a.charCodeAt(E-1);if(l.get(L)!==0||L===13||L===10)return!0;if(D>0){let k=a.charCodeAt(E);if(l.get(k)!==0)return!0}return!1}(h,r,0,c,b)&&function(l,a,w,E,D){if(E+D===w)return!0;let L=a.charCodeAt(E+D);if(l.get(L)!==0||L===13||L===10)return!0;if(D>0){let k=a.charCodeAt(E+D-1);if(l.get(k)!==0)return!0}return!1}(h,r,i,c,b)}class o{constructor(r,i){this._wordSeparators=r,this._searchRegex=i,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(r){this._searchRegex.lastIndex=r,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(r){let i=r.length,c;do{if(this._prevMatchStartIndex+this._prevMatchLength===i||(c=this._searchRegex.exec(r),!c))return null;let b=c.index,l=c[0].length;if(b===this._prevMatchStartIndex&&l===this._prevMatchLength){if(l===0){m.ZH(r,i,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=b,this._prevMatchLength=l,!this._wordSeparators||d(this._wordSeparators,r,i,b,l))return c}while(c);return null}}},9616:(ut,Ie,t)=>{"use strict";function m(B,u){let I=0,_=0,A=B.length;for(;_<A;){let x=B.charCodeAt(_);if(x===32)I++;else{if(x!==9)break;I=I-I%u+u}_++}return _===A?-1:I}t.d(Ie,{q:()=>m})},927:(ut,Ie,t)=>{"use strict";t.d(Ie,{O:()=>o});var m=t(1050),B=t(4669),u=t(2258),I=t(666),_=t(187),A=t(4314),x=t(3860),v=t(6887),f=t(902);class d{static chord(r,i){return(0,u.gx)(r,i)}}function o(){return{editor:void 0,languages:void 0,CancellationTokenSource:m.A,Emitter:B.Q5,KeyCode:f.VD,KeyMod:d,Position:_.L,Range:A.e,Selection:x.Y,SelectionDirection:f.a$,MarkerSeverity:f.ZL,MarkerTag:f.eB,Uri:I.o,Token:v.WU}}d.CtrlCmd=2048,d.Shift=1024,d.Alt=512,d.WinCtrl=256},4319:(ut,Ie,t)=>{"use strict";t.d(Ie,{p:()=>m});let m=(0,t(2065).yh)("editorWorkerService")},8191:(ut,Ie,t)=>{"use strict";t.d(Ie,{A:()=>v});var m=t(9954),B=t(3702),u=t(9870),I=t(5026),_=t(2065),A=t(3557),x=t(988);let v=(0,_.yh)("ILanguageFeatureDebounceService");var f;(function(i){let c=new WeakMap,b=0;i.of=function(l){let a=c.get(l);return a===void 0&&(a=++b,c.set(l,a)),a}})(f||(f={}));class d{constructor(c,b,l,a,w,E){this._logService=c,this._name=b,this._registry=l,this._default=a,this._min=w,this._max=E,this._cache=new B.z6(50,.7)}_key(c){return c.id+this._registry.all(c).reduce((b,l)=>(0,m.SP)(f.of(l),b),0)}get(c){let b=this._key(c),l=this._cache.get(b);return l?(0,u.uZ)(l.value,this._min,this._max):this.default()}update(c,b){let l=this._key(c),a=this._cache.get(l);a||(a=new u.N(6),this._cache.set(l,a));let w=(0,u.uZ)(a.update(b),this._min,this._max);return(0,x.xn)(c.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${c.uri.toString()} is ${w}ms`),w}_overall(){let c=new u.nM;for(let[,b]of this._cache)c.update(b.value);return c.value}default(){let c=0|this._overall()||this._default;return(0,u.uZ)(c,this._min,this._max)}}let o=class{constructor(i){this._logService=i,this._data=new Map}for(i,c,b){var l,a,w;let E=(l=b==null?void 0:b.min)!==null&&l!==void 0?l:50,D=(a=b==null?void 0:b.max)!==null&&a!==void 0?a:Math.pow(E,2),L=(w=b==null?void 0:b.key)!==null&&w!==void 0?w:void 0,k=`${f.of(i)},${E}${L?","+L:""}`,R=this._data.get(k);return R||(R=new d(this._logService,c,i,0|this._overallAverage()||1.5*E,E,D),this._data.set(k,R)),R}_overallAverage(){let i=new u.nM;for(let c of this._data.values())i.update(c.default());return i.value}};var h,r;o=function(i,c,b,l){var a,w=arguments.length,E=w<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,b):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(i,c,b,l);else for(var D=i.length-1;D>=0;D--)(a=i[D])&&(E=(w<3?a(E):w>3?a(c,b,E):a(c,b))||E);return w>3&&E&&Object.defineProperty(c,b,E),E}([(h=0,r=A.VZ,function(i,c){r(i,c,h)})],o),(0,I.z)(v,o,1)},1922:(ut,Ie,t)=>{"use strict";t.d(Ie,{p:()=>m});let m=(0,t(2065).yh)("ILanguageFeaturesService")},6357:(ut,Ie,t)=>{"use strict";t.d(Ie,{i:()=>m});let m=(0,t(2065).yh)("markerDecorationsService")},3733:(ut,Ie,t)=>{"use strict";t.d(Ie,{q:()=>m});let m=(0,t(2065).yh)("modelService")},8216:(ut,Ie,t)=>{"use strict";t.d(Ie,{S:()=>m});let m=(0,t(2065).yh)("textModelService")},8802:(ut,Ie,t)=>{"use strict";t.d(Ie,{$:()=>h,h:()=>r});var m=t(5797),B=t(7781),u=t(3557),I=t(187),_=t(4314),A=t(3795);class x{static create(l,a){return new x(l,new v(a))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(l,a){this._startLineNumber=l,this._tokens=a,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(l){return this._startLineNumber<=l&&l<=this._endLineNumber?this._tokens.getLineTokens(l-this._startLineNumber):null}getRange(){let l=this._tokens.getRange();return l&&new _.e(this._startLineNumber+l.startLineNumber,l.startColumn,this._startLineNumber+l.endLineNumber,l.endColumn)}removeTokens(l){let a=l.startLineNumber-this._startLineNumber,w=l.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(a,l.startColumn-1,w,l.endColumn-1),this._updateEndLineNumber()}split(l){let a=l.startLineNumber-this._startLineNumber,w=l.endLineNumber-this._startLineNumber,[E,D,L]=this._tokens.split(a,l.startColumn-1,w,l.endColumn-1);return[new x(this._startLineNumber,E),new x(this._startLineNumber+L,D)]}applyEdit(l,a){let[w,E,D]=(0,A.Q)(a);this.acceptEdit(l,w,E,D,a.length>0?a.charCodeAt(0):0)}acceptEdit(l,a,w,E,D){this._acceptDeleteRange(l),this._acceptInsertText(new I.L(l.startLineNumber,l.startColumn),a,w,E,D),this._updateEndLineNumber()}_acceptDeleteRange(l){if(l.startLineNumber===l.endLineNumber&&l.startColumn===l.endColumn)return;let a=l.startLineNumber-this._startLineNumber,w=l.endLineNumber-this._startLineNumber;if(w<0){let D=w-a;return void(this._startLineNumber-=D)}let E=this._tokens.getMaxDeltaLine();if(!(a>=E+1)){if(a<0&&w>=E+1)return this._startLineNumber=0,void this._tokens.clear();if(a<0){let D=-a;this._startLineNumber-=D,this._tokens.acceptDeleteRange(l.startColumn-1,0,0,w,l.endColumn-1)}else this._tokens.acceptDeleteRange(0,a,l.startColumn-1,w,l.endColumn-1)}}_acceptInsertText(l,a,w,E,D){if(a===0&&w===0)return;let L=l.lineNumber-this._startLineNumber;L<0?this._startLineNumber+=a:L>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(L,l.column-1,a,w,E,D)}}class v{constructor(l){this._tokens=l,this._tokenCount=l.length/4}toString(l){let a=[];for(let w=0;w<this._tokenCount;w++)a.push(`(${this._getDeltaLine(w)+l},${this._getStartCharacter(w)}-${this._getEndCharacter(w)})`);return`[${a.join(",")}]`}getMaxDeltaLine(){let l=this._getTokenCount();return l===0?-1:this._getDeltaLine(l-1)}getRange(){let l=this._getTokenCount();if(l===0)return null;let a=this._getStartCharacter(0),w=this._getDeltaLine(l-1),E=this._getEndCharacter(l-1);return new _.e(0,a+1,w,E+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(l){return this._tokens[4*l]}_getStartCharacter(l){return this._tokens[4*l+1]}_getEndCharacter(l){return this._tokens[4*l+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(l){let a=0,w=this._getTokenCount()-1;for(;a<w;){let E=a+Math.floor((w-a)/2),D=this._getDeltaLine(E);if(D<l)a=E+1;else{if(!(D>l)){let L=E;for(;L>a&&this._getDeltaLine(L-1)===l;)L--;let k=E;for(;k<w&&this._getDeltaLine(k+1)===l;)k++;return new f(this._tokens.subarray(4*L,4*k+4))}w=E-1}}return this._getDeltaLine(a)===l?new f(this._tokens.subarray(4*a,4*a+4)):null}clear(){this._tokenCount=0}removeTokens(l,a,w,E){let D=this._tokens,L=this._tokenCount,k=0,R=!1,O=0;for(let $=0;$<L;$++){let N=4*$,T=D[N],C=D[N+1],W=D[N+2],K=D[N+3];if((T>l||T===l&&W>=a)&&(T<w||T===w&&C<=E))R=!0;else{if(k===0&&(O=T),R){let j=4*k;D[j]=T-O,D[j+1]=C,D[j+2]=W,D[j+3]=K}k++}}return this._tokenCount=k,O}split(l,a,w,E){let D=this._tokens,L=this._tokenCount,k=[],R=[],O=k,$=0,N=0;for(let T=0;T<L;T++){let C=4*T,W=D[C],K=D[C+1],j=D[C+2],F=D[C+3];if(W>l||W===l&&j>=a){if(W<w||W===w&&K<=E)continue;O!==R&&(O=R,$=0,N=W)}O[$++]=W-N,O[$++]=K,O[$++]=j,O[$++]=F}return[new v(new Uint32Array(k)),new v(new Uint32Array(R)),N]}acceptDeleteRange(l,a,w,E,D){let L=this._tokens,k=this._tokenCount,R=E-a,O=0,$=!1;for(let N=0;N<k;N++){let T=4*N,C=L[T],W=L[T+1],K=L[T+2],j=L[T+3];if(C<a||C===a&&K<=w){O++;continue}if(C===a&&W<w)C===E&&K>D?K-=D-w:K=w;else if(C===a&&W===w){if(!(C===E&&K>D)){$=!0;continue}K-=D-w}else if(C<E||C===E&&W<D){if(!(C===E&&K>D)){$=!0;continue}C=a,W=w,K=W+(K-D)}else if(C>E){if(R===0&&!$){O=k;break}C-=R}else{if(!(C===E&&W>=D))throw new Error("Not possible!");l&&C===0&&(W+=l,K+=l),C-=R,W-=D-w,K-=D-w}let F=4*O;L[F]=C,L[F+1]=W,L[F+2]=K,L[F+3]=j,O++}this._tokenCount=O}acceptInsertText(l,a,w,E,D,L){let k=w===0&&E===1&&(L>=48&&L<=57||L>=65&&L<=90||L>=97&&L<=122),R=this._tokens,O=this._tokenCount;for(let $=0;$<O;$++){let N=4*$,T=R[N],C=R[N+1],W=R[N+2];if(!(T<l||T===l&&W<a)){if(T===l&&W===a){if(!k)continue;W+=1}else if(T===l&&C<a&&a<W)w===0?W+=E:W=a;else{if(T===l&&C===a&&k)continue;if(T===l)if(T+=w,w===0)C+=E,W+=E;else{let K=W-C;C=D+(C-a),W=C+K}else T+=w}R[N]=T,R[N+1]=C,R[N+2]=W}}}}class f{constructor(l){this._tokens=l}getCount(){return this._tokens.length/4}getStartCharacter(l){return this._tokens[4*l+1]}getEndCharacter(l){return this._tokens[4*l+2]}getMetadata(l){return this._tokens[4*l+3]}}var d=t(2042),o=function(b,l){return function(a,w){l(a,w,b)}};let h=class{constructor(b,l,a,w){this._legend=b,this._themeService=l,this._languageService=a,this._logService=w,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new c}getMetadata(b,l,a){let w=this._languageService.languageIdCodec.encodeLanguageId(a),E=this._hashTable.get(b,l,w),D;if(E)D=E.metadata,this._logService.getLevel()===u.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${b} / ${l}: foreground ${m.N.getForeground(D)}, fontStyle ${m.N.getFontStyle(D).toString(2)}`);else{let L=this._legend.tokenTypes[b],k=[];if(L){let R=l;for(let $=0;R>0&&$<this._legend.tokenModifiers.length;$++)1&R&&k.push(this._legend.tokenModifiers[$]),R>>=1;R>0&&this._logService.getLevel()===u.in.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${l.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),k.push("not-in-legend"));let O=this._themeService.getColorTheme().getTokenStyleMetadata(L,k,a);O===void 0?D=2147483647:(D=0,O.italic!==void 0&&(D|=1|(O.italic?1:0)<<11),O.bold!==void 0&&(D|=2|(O.bold?2:0)<<11),O.underline!==void 0&&(D|=4|(O.underline?4:0)<<11),O.strikethrough!==void 0&&(D|=8|(O.strikethrough?8:0)<<11),O.foreground&&(D|=16|O.foreground<<15),D===0&&(D=2147483647))}else this._logService.getLevel()===u.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${b} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),D=2147483647,L="not-in-legend";this._hashTable.add(b,l,w,D),this._logService.getLevel()===u.in.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${b} (${L}) / ${l} (${k.join(" ")}): foreground ${m.N.getForeground(D)}, fontStyle ${m.N.getFontStyle(D).toString(2)}`)}return D}warnOverlappingSemanticTokens(b,l){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${b}, column ${l}`))}warnInvalidLengthSemanticTokens(b,l){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${b}, column ${l}`))}warnInvalidEditStart(b,l,a,w,E){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${b}, resultId: ${l}) at edit #${a}: The provided start offset ${w} is outside the previous data (length ${E}).`))}};function r(b,l,a){let w=b.data,E=b.data.length/5|0,D=Math.max(Math.ceil(E/1024),400),L=[],k=0,R=1,O=0;for(;k<E;){let $=k,N=Math.min($+D,E);if(N<E){let H=N;for(;H-1>$&&w[5*H]===0;)H--;if(H-1===$){let z=N;for(;z+1<E&&w[5*z]===0;)z++;N=z}else N=H}let T=new Uint32Array(4*(N-$)),C=0,W=0,K=0,j=0;for(;k<N;){let H=5*k,z=w[H],J=w[H+1],oe=R+z|0,fe=z===0?O+J|0:J,q=fe+w[H+2]|0,p=w[H+3],re=w[H+4];if(q<=fe)l.warnInvalidLengthSemanticTokens(oe,fe+1);else if(K===oe&&j>fe)l.warnOverlappingSemanticTokens(oe,fe+1);else{let ne=l.getMetadata(p,re,a);ne!==2147483647&&(W===0&&(W=oe),T[C]=oe-W,T[C+1]=fe,T[C+2]=q,T[C+3]=ne,C+=4,K=oe,j=q)}R=oe,O=fe,k++}C!==T.length&&(T=T.subarray(0,C));let F=x.create(W,T);L.push(F)}return L}h=function(b,l,a,w){var E,D=arguments.length,L=D<3?l:w===null?w=Object.getOwnPropertyDescriptor(l,a):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,l,a,w);else for(var k=b.length-1;k>=0;k--)(E=b[k])&&(L=(D<3?E(L):D>3?E(l,a,L):E(l,a))||L);return D>3&&L&&Object.defineProperty(l,a,L),L}([o(1,B.XE),o(2,d.O),o(3,u.VZ)],h);class i{constructor(l,a,w,E){this.tokenTypeIndex=l,this.tokenModifierSet=a,this.languageId=w,this.metadata=E,this.next=null}}class c{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=c._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<c._SIZES.length?.6666666666666666*this._currentLength:0),this._elements=[],c._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(l,a){for(let w=0;w<a;w++)l[w]=null}_hash2(l,a){return(l<<5)-l+a|0}_hashFunc(l,a,w){return this._hash2(this._hash2(l,a),w)%this._currentLength}get(l,a,w){let E=this._hashFunc(l,a,w),D=this._elements[E];for(;D;){if(D.tokenTypeIndex===l&&D.tokenModifierSet===a&&D.languageId===w)return D;D=D.next}return null}add(l,a,w,E){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){let D=this._elements;this._currentLengthIndex++,this._currentLength=c._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<c._SIZES.length?.6666666666666666*this._currentLength:0),this._elements=[],c._nullOutEntries(this._elements,this._currentLength);for(let L of D){let k=L;for(;k;){let R=k.next;k.next=null,this._add(k),k=R}}}this._add(new i(l,a,w,E))}_add(l){let a=this._hashFunc(l.tokenTypeIndex,l.tokenModifierSet,l.languageId);l.next=this._elements[a],this._elements[a]=l}}c._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]},3343:(ut,Ie,t)=>{"use strict";t.d(Ie,{s:()=>m});let m=(0,t(2065).yh)("semanticTokensStylingService")},1765:(ut,Ie,t)=>{"use strict";t.d(Ie,{V:()=>B,y:()=>u});var m=t(2065);let B=(0,m.yh)("textResourceConfigurationService"),u=(0,m.yh)("textResourcePropertiesService")},1446:(ut,Ie,t)=>{"use strict";t.d(Ie,{a:()=>A});var m=t(4314),B=t(7277),u=t(7295),I=t(5146),_=t(270);class A{static computeUnicodeHighlights(d,o,h){let r=h?h.startLineNumber:1,i=h?h.endLineNumber:d.getLineCount(),c=new x(o),b=c.getCandidateCodePoints(),l;var a;l=b==="allNonBasicAscii"?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp((a=Array.from(b),`[${u.ec(a.map($=>String.fromCodePoint($)).join(""))}]`),"g");let w=new B.sz(null,l),E=[],D,L=!1,k=0,R=0,O=0;e:for(let $=r,N=i;$<=N;$++){let T=d.getLineContent($),C=T.length;w.reset(0);do if(D=w.next(T),D){let W=D.index,K=D.index+D[0].length;if(W>0){let z=T.charCodeAt(W-1);u.ZG(z)&&W--}if(K+1<C){let z=T.charCodeAt(K-1);u.ZG(z)&&K++}let j=T.substring(W,K),F=(0,_.t2)(W+1,_.Af,T,0);F&&F.endColumn<=W+1&&(F=null);let H=c.shouldHighlightNonBasicASCII(j,F?F.word:null);if(H!==0){H===3?k++:H===2?R++:H===1?O++:(0,I.vE)(H);let z=1e3;if(E.length>=z){L=!0;break e}E.push(new m.e($,W+1,$,K+1))}}while(D)}return{ranges:E,hasMore:L,ambiguousCharacterCount:k,invisibleCharacterCount:R,nonBasicAsciiCharacterCount:O}}static computeUnicodeHighlightReason(d,o){let h=new x(o);switch(h.shouldHighlightNonBasicASCII(d,null)){case 0:return null;case 2:return{kind:1};case 3:{let r=d.codePointAt(0),i=h.ambiguousCharacters.getPrimaryConfusable(r),c=u.ZK.getLocales().filter(b=>!u.ZK.getInstance(new Set([...o.allowedLocales,b])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(i),notAmbiguousInLocales:c}}case 1:return{kind:2}}}}class x{constructor(d){this.options=d,this.allowedCodePoints=new Set(d.allowedCodePoints),this.ambiguousCharacters=u.ZK.getInstance(new Set(d.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";let d=new Set;if(this.options.invisibleCharacters)for(let o of u.vU.codePoints)v(String.fromCodePoint(o))||d.add(o);if(this.options.ambiguousCharacters)for(let o of this.ambiguousCharacters.getConfusableCodePoints())d.add(o);for(let o of this.allowedCodePoints)d.delete(o);return d}shouldHighlightNonBasicASCII(d,o){let h=d.codePointAt(0);if(this.allowedCodePoints.has(h))return 0;if(this.options.nonBasicASCII)return 1;let r=!1,i=!1;if(o)for(let c of o){let b=c.codePointAt(0),l=u.$i(c);r=r||l,l||this.ambiguousCharacters.isAmbiguous(b)||u.vU.isInvisibleCharacter(b)||(i=!0)}return!r&&i?0:this.options.invisibleCharacters&&!v(d)&&u.vU.isInvisibleCharacter(h)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(h)?3:0}}function v(f){return f===" "||f===`
`||f==="	"}},902:(ut,Ie,t)=>{"use strict";var m,B,u,I,_,A,x,v,f,d,o,h,r,i,c,b,l,a,w,E,D,L,k,R,O,$,N,T,C,W,K,j,F,H,z,J,oe,fe,q;t.d(Ie,{E$:()=>O,F5:()=>k,Ij:()=>A,In:()=>J,Lu:()=>T,MG:()=>R,MY:()=>d,OI:()=>fe,RM:()=>l,U:()=>c,VD:()=>E,Vi:()=>v,WW:()=>F,ZL:()=>D,_x:()=>f,a$:()=>j,a7:()=>u,ao:()=>m,bw:()=>w,cR:()=>H,cm:()=>I,d2:()=>oe,eB:()=>L,g4:()=>W,g_:()=>K,gl:()=>a,gm:()=>r,jl:()=>i,np:()=>B,py:()=>N,r3:()=>x,r4:()=>z,rf:()=>o,sh:()=>$,up:()=>q,vQ:()=>C,wT:()=>h,wU:()=>b,we:()=>_}),function(p){p[p.Unknown=0]="Unknown",p[p.Disabled=1]="Disabled",p[p.Enabled=2]="Enabled"}(m||(m={})),function(p){p[p.Invoke=1]="Invoke",p[p.Auto=2]="Auto"}(B||(B={})),function(p){p[p.None=0]="None",p[p.KeepWhitespace=1]="KeepWhitespace",p[p.InsertAsSnippet=4]="InsertAsSnippet"}(u||(u={})),function(p){p[p.Method=0]="Method",p[p.Function=1]="Function",p[p.Constructor=2]="Constructor",p[p.Field=3]="Field",p[p.Variable=4]="Variable",p[p.Class=5]="Class",p[p.Struct=6]="Struct",p[p.Interface=7]="Interface",p[p.Module=8]="Module",p[p.Property=9]="Property",p[p.Event=10]="Event",p[p.Operator=11]="Operator",p[p.Unit=12]="Unit",p[p.Value=13]="Value",p[p.Constant=14]="Constant",p[p.Enum=15]="Enum",p[p.EnumMember=16]="EnumMember",p[p.Keyword=17]="Keyword",p[p.Text=18]="Text",p[p.Color=19]="Color",p[p.File=20]="File",p[p.Reference=21]="Reference",p[p.Customcolor=22]="Customcolor",p[p.Folder=23]="Folder",p[p.TypeParameter=24]="TypeParameter",p[p.User=25]="User",p[p.Issue=26]="Issue",p[p.Snippet=27]="Snippet"}(I||(I={})),function(p){p[p.Deprecated=1]="Deprecated"}(_||(_={})),function(p){p[p.Invoke=0]="Invoke",p[p.TriggerCharacter=1]="TriggerCharacter",p[p.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(A||(A={})),function(p){p[p.EXACT=0]="EXACT",p[p.ABOVE=1]="ABOVE",p[p.BELOW=2]="BELOW"}(x||(x={})),function(p){p[p.NotSet=0]="NotSet",p[p.ContentFlush=1]="ContentFlush",p[p.RecoverFromMarkers=2]="RecoverFromMarkers",p[p.Explicit=3]="Explicit",p[p.Paste=4]="Paste",p[p.Undo=5]="Undo",p[p.Redo=6]="Redo"}(v||(v={})),function(p){p[p.LF=1]="LF",p[p.CRLF=2]="CRLF"}(f||(f={})),function(p){p[p.Text=0]="Text",p[p.Read=1]="Read",p[p.Write=2]="Write"}(d||(d={})),function(p){p[p.None=0]="None",p[p.Keep=1]="Keep",p[p.Brackets=2]="Brackets",p[p.Advanced=3]="Advanced",p[p.Full=4]="Full"}(o||(o={})),function(p){p[p.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",p[p.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",p[p.accessibilitySupport=2]="accessibilitySupport",p[p.accessibilityPageSize=3]="accessibilityPageSize",p[p.ariaLabel=4]="ariaLabel",p[p.autoClosingBrackets=5]="autoClosingBrackets",p[p.screenReaderAnnounceInlineSuggestion=6]="screenReaderAnnounceInlineSuggestion",p[p.autoClosingDelete=7]="autoClosingDelete",p[p.autoClosingOvertype=8]="autoClosingOvertype",p[p.autoClosingQuotes=9]="autoClosingQuotes",p[p.autoIndent=10]="autoIndent",p[p.automaticLayout=11]="automaticLayout",p[p.autoSurround=12]="autoSurround",p[p.bracketPairColorization=13]="bracketPairColorization",p[p.guides=14]="guides",p[p.codeLens=15]="codeLens",p[p.codeLensFontFamily=16]="codeLensFontFamily",p[p.codeLensFontSize=17]="codeLensFontSize",p[p.colorDecorators=18]="colorDecorators",p[p.colorDecoratorsLimit=19]="colorDecoratorsLimit",p[p.columnSelection=20]="columnSelection",p[p.comments=21]="comments",p[p.contextmenu=22]="contextmenu",p[p.copyWithSyntaxHighlighting=23]="copyWithSyntaxHighlighting",p[p.cursorBlinking=24]="cursorBlinking",p[p.cursorSmoothCaretAnimation=25]="cursorSmoothCaretAnimation",p[p.cursorStyle=26]="cursorStyle",p[p.cursorSurroundingLines=27]="cursorSurroundingLines",p[p.cursorSurroundingLinesStyle=28]="cursorSurroundingLinesStyle",p[p.cursorWidth=29]="cursorWidth",p[p.disableLayerHinting=30]="disableLayerHinting",p[p.disableMonospaceOptimizations=31]="disableMonospaceOptimizations",p[p.domReadOnly=32]="domReadOnly",p[p.dragAndDrop=33]="dragAndDrop",p[p.dropIntoEditor=34]="dropIntoEditor",p[p.emptySelectionClipboard=35]="emptySelectionClipboard",p[p.experimentalWhitespaceRendering=36]="experimentalWhitespaceRendering",p[p.extraEditorClassName=37]="extraEditorClassName",p[p.fastScrollSensitivity=38]="fastScrollSensitivity",p[p.find=39]="find",p[p.fixedOverflowWidgets=40]="fixedOverflowWidgets",p[p.folding=41]="folding",p[p.foldingStrategy=42]="foldingStrategy",p[p.foldingHighlight=43]="foldingHighlight",p[p.foldingImportsByDefault=44]="foldingImportsByDefault",p[p.foldingMaximumRegions=45]="foldingMaximumRegions",p[p.unfoldOnClickAfterEndOfLine=46]="unfoldOnClickAfterEndOfLine",p[p.fontFamily=47]="fontFamily",p[p.fontInfo=48]="fontInfo",p[p.fontLigatures=49]="fontLigatures",p[p.fontSize=50]="fontSize",p[p.fontWeight=51]="fontWeight",p[p.fontVariations=52]="fontVariations",p[p.formatOnPaste=53]="formatOnPaste",p[p.formatOnType=54]="formatOnType",p[p.glyphMargin=55]="glyphMargin",p[p.gotoLocation=56]="gotoLocation",p[p.hideCursorInOverviewRuler=57]="hideCursorInOverviewRuler",p[p.hover=58]="hover",p[p.inDiffEditor=59]="inDiffEditor",p[p.inlineSuggest=60]="inlineSuggest",p[p.letterSpacing=61]="letterSpacing",p[p.lightbulb=62]="lightbulb",p[p.lineDecorationsWidth=63]="lineDecorationsWidth",p[p.lineHeight=64]="lineHeight",p[p.lineNumbers=65]="lineNumbers",p[p.lineNumbersMinChars=66]="lineNumbersMinChars",p[p.linkedEditing=67]="linkedEditing",p[p.links=68]="links",p[p.matchBrackets=69]="matchBrackets",p[p.minimap=70]="minimap",p[p.mouseStyle=71]="mouseStyle",p[p.mouseWheelScrollSensitivity=72]="mouseWheelScrollSensitivity",p[p.mouseWheelZoom=73]="mouseWheelZoom",p[p.multiCursorMergeOverlapping=74]="multiCursorMergeOverlapping",p[p.multiCursorModifier=75]="multiCursorModifier",p[p.multiCursorPaste=76]="multiCursorPaste",p[p.multiCursorLimit=77]="multiCursorLimit",p[p.occurrencesHighlight=78]="occurrencesHighlight",p[p.overviewRulerBorder=79]="overviewRulerBorder",p[p.overviewRulerLanes=80]="overviewRulerLanes",p[p.padding=81]="padding",p[p.parameterHints=82]="parameterHints",p[p.peekWidgetDefaultFocus=83]="peekWidgetDefaultFocus",p[p.definitionLinkOpensInPeek=84]="definitionLinkOpensInPeek",p[p.quickSuggestions=85]="quickSuggestions",p[p.quickSuggestionsDelay=86]="quickSuggestionsDelay",p[p.readOnly=87]="readOnly",p[p.renameOnType=88]="renameOnType",p[p.renderControlCharacters=89]="renderControlCharacters",p[p.renderFinalNewline=90]="renderFinalNewline",p[p.renderLineHighlight=91]="renderLineHighlight",p[p.renderLineHighlightOnlyWhenFocus=92]="renderLineHighlightOnlyWhenFocus",p[p.renderValidationDecorations=93]="renderValidationDecorations",p[p.renderWhitespace=94]="renderWhitespace",p[p.revealHorizontalRightPadding=95]="revealHorizontalRightPadding",p[p.roundedSelection=96]="roundedSelection",p[p.rulers=97]="rulers",p[p.scrollbar=98]="scrollbar",p[p.scrollBeyondLastColumn=99]="scrollBeyondLastColumn",p[p.scrollBeyondLastLine=100]="scrollBeyondLastLine",p[p.scrollPredominantAxis=101]="scrollPredominantAxis",p[p.selectionClipboard=102]="selectionClipboard",p[p.selectionHighlight=103]="selectionHighlight",p[p.selectOnLineNumbers=104]="selectOnLineNumbers",p[p.showFoldingControls=105]="showFoldingControls",p[p.showUnused=106]="showUnused",p[p.snippetSuggestions=107]="snippetSuggestions",p[p.smartSelect=108]="smartSelect",p[p.smoothScrolling=109]="smoothScrolling",p[p.stickyScroll=110]="stickyScroll",p[p.stickyTabStops=111]="stickyTabStops",p[p.stopRenderingLineAfter=112]="stopRenderingLineAfter",p[p.suggest=113]="suggest",p[p.suggestFontSize=114]="suggestFontSize",p[p.suggestLineHeight=115]="suggestLineHeight",p[p.suggestOnTriggerCharacters=116]="suggestOnTriggerCharacters",p[p.suggestSelection=117]="suggestSelection",p[p.tabCompletion=118]="tabCompletion",p[p.tabIndex=119]="tabIndex",p[p.unicodeHighlighting=120]="unicodeHighlighting",p[p.unusualLineTerminators=121]="unusualLineTerminators",p[p.useShadowDOM=122]="useShadowDOM",p[p.useTabStops=123]="useTabStops",p[p.wordBreak=124]="wordBreak",p[p.wordSeparators=125]="wordSeparators",p[p.wordWrap=126]="wordWrap",p[p.wordWrapBreakAfterCharacters=127]="wordWrapBreakAfterCharacters",p[p.wordWrapBreakBeforeCharacters=128]="wordWrapBreakBeforeCharacters",p[p.wordWrapColumn=129]="wordWrapColumn",p[p.wordWrapOverride1=130]="wordWrapOverride1",p[p.wordWrapOverride2=131]="wordWrapOverride2",p[p.wrappingIndent=132]="wrappingIndent",p[p.wrappingStrategy=133]="wrappingStrategy",p[p.showDeprecated=134]="showDeprecated",p[p.inlayHints=135]="inlayHints",p[p.editorClassName=136]="editorClassName",p[p.pixelRatio=137]="pixelRatio",p[p.tabFocusMode=138]="tabFocusMode",p[p.layoutInfo=139]="layoutInfo",p[p.wrappingInfo=140]="wrappingInfo",p[p.defaultColorDecorators=141]="defaultColorDecorators"}(h||(h={})),function(p){p[p.TextDefined=0]="TextDefined",p[p.LF=1]="LF",p[p.CRLF=2]="CRLF"}(r||(r={})),function(p){p[p.LF=0]="LF",p[p.CRLF=1]="CRLF"}(i||(i={})),function(p){p[p.Left=1]="Left",p[p.Right=2]="Right"}(c||(c={})),function(p){p[p.None=0]="None",p[p.Indent=1]="Indent",p[p.IndentOutdent=2]="IndentOutdent",p[p.Outdent=3]="Outdent"}(b||(b={})),function(p){p[p.Both=0]="Both",p[p.Right=1]="Right",p[p.Left=2]="Left",p[p.None=3]="None"}(l||(l={})),function(p){p[p.Type=1]="Type",p[p.Parameter=2]="Parameter"}(a||(a={})),function(p){p[p.Automatic=0]="Automatic",p[p.Explicit=1]="Explicit"}(w||(w={})),function(p){p[p.DependsOnKbLayout=-1]="DependsOnKbLayout",p[p.Unknown=0]="Unknown",p[p.Backspace=1]="Backspace",p[p.Tab=2]="Tab",p[p.Enter=3]="Enter",p[p.Shift=4]="Shift",p[p.Ctrl=5]="Ctrl",p[p.Alt=6]="Alt",p[p.PauseBreak=7]="PauseBreak",p[p.CapsLock=8]="CapsLock",p[p.Escape=9]="Escape",p[p.Space=10]="Space",p[p.PageUp=11]="PageUp",p[p.PageDown=12]="PageDown",p[p.End=13]="End",p[p.Home=14]="Home",p[p.LeftArrow=15]="LeftArrow",p[p.UpArrow=16]="UpArrow",p[p.RightArrow=17]="RightArrow",p[p.DownArrow=18]="DownArrow",p[p.Insert=19]="Insert",p[p.Delete=20]="Delete",p[p.Digit0=21]="Digit0",p[p.Digit1=22]="Digit1",p[p.Digit2=23]="Digit2",p[p.Digit3=24]="Digit3",p[p.Digit4=25]="Digit4",p[p.Digit5=26]="Digit5",p[p.Digit6=27]="Digit6",p[p.Digit7=28]="Digit7",p[p.Digit8=29]="Digit8",p[p.Digit9=30]="Digit9",p[p.KeyA=31]="KeyA",p[p.KeyB=32]="KeyB",p[p.KeyC=33]="KeyC",p[p.KeyD=34]="KeyD",p[p.KeyE=35]="KeyE",p[p.KeyF=36]="KeyF",p[p.KeyG=37]="KeyG",p[p.KeyH=38]="KeyH",p[p.KeyI=39]="KeyI",p[p.KeyJ=40]="KeyJ",p[p.KeyK=41]="KeyK",p[p.KeyL=42]="KeyL",p[p.KeyM=43]="KeyM",p[p.KeyN=44]="KeyN",p[p.KeyO=45]="KeyO",p[p.KeyP=46]="KeyP",p[p.KeyQ=47]="KeyQ",p[p.KeyR=48]="KeyR",p[p.KeyS=49]="KeyS",p[p.KeyT=50]="KeyT",p[p.KeyU=51]="KeyU",p[p.KeyV=52]="KeyV",p[p.KeyW=53]="KeyW",p[p.KeyX=54]="KeyX",p[p.KeyY=55]="KeyY",p[p.KeyZ=56]="KeyZ",p[p.Meta=57]="Meta",p[p.ContextMenu=58]="ContextMenu",p[p.F1=59]="F1",p[p.F2=60]="F2",p[p.F3=61]="F3",p[p.F4=62]="F4",p[p.F5=63]="F5",p[p.F6=64]="F6",p[p.F7=65]="F7",p[p.F8=66]="F8",p[p.F9=67]="F9",p[p.F10=68]="F10",p[p.F11=69]="F11",p[p.F12=70]="F12",p[p.F13=71]="F13",p[p.F14=72]="F14",p[p.F15=73]="F15",p[p.F16=74]="F16",p[p.F17=75]="F17",p[p.F18=76]="F18",p[p.F19=77]="F19",p[p.F20=78]="F20",p[p.F21=79]="F21",p[p.F22=80]="F22",p[p.F23=81]="F23",p[p.F24=82]="F24",p[p.NumLock=83]="NumLock",p[p.ScrollLock=84]="ScrollLock",p[p.Semicolon=85]="Semicolon",p[p.Equal=86]="Equal",p[p.Comma=87]="Comma",p[p.Minus=88]="Minus",p[p.Period=89]="Period",p[p.Slash=90]="Slash",p[p.Backquote=91]="Backquote",p[p.BracketLeft=92]="BracketLeft",p[p.Backslash=93]="Backslash",p[p.BracketRight=94]="BracketRight",p[p.Quote=95]="Quote",p[p.OEM_8=96]="OEM_8",p[p.IntlBackslash=97]="IntlBackslash",p[p.Numpad0=98]="Numpad0",p[p.Numpad1=99]="Numpad1",p[p.Numpad2=100]="Numpad2",p[p.Numpad3=101]="Numpad3",p[p.Numpad4=102]="Numpad4",p[p.Numpad5=103]="Numpad5",p[p.Numpad6=104]="Numpad6",p[p.Numpad7=105]="Numpad7",p[p.Numpad8=106]="Numpad8",p[p.Numpad9=107]="Numpad9",p[p.NumpadMultiply=108]="NumpadMultiply",p[p.NumpadAdd=109]="NumpadAdd",p[p.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",p[p.NumpadSubtract=111]="NumpadSubtract",p[p.NumpadDecimal=112]="NumpadDecimal",p[p.NumpadDivide=113]="NumpadDivide",p[p.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",p[p.ABNT_C1=115]="ABNT_C1",p[p.ABNT_C2=116]="ABNT_C2",p[p.AudioVolumeMute=117]="AudioVolumeMute",p[p.AudioVolumeUp=118]="AudioVolumeUp",p[p.AudioVolumeDown=119]="AudioVolumeDown",p[p.BrowserSearch=120]="BrowserSearch",p[p.BrowserHome=121]="BrowserHome",p[p.BrowserBack=122]="BrowserBack",p[p.BrowserForward=123]="BrowserForward",p[p.MediaTrackNext=124]="MediaTrackNext",p[p.MediaTrackPrevious=125]="MediaTrackPrevious",p[p.MediaStop=126]="MediaStop",p[p.MediaPlayPause=127]="MediaPlayPause",p[p.LaunchMediaPlayer=128]="LaunchMediaPlayer",p[p.LaunchMail=129]="LaunchMail",p[p.LaunchApp2=130]="LaunchApp2",p[p.Clear=131]="Clear",p[p.MAX_VALUE=132]="MAX_VALUE"}(E||(E={})),function(p){p[p.Hint=1]="Hint",p[p.Info=2]="Info",p[p.Warning=4]="Warning",p[p.Error=8]="Error"}(D||(D={})),function(p){p[p.Unnecessary=1]="Unnecessary",p[p.Deprecated=2]="Deprecated"}(L||(L={})),function(p){p[p.Inline=1]="Inline",p[p.Gutter=2]="Gutter"}(k||(k={})),function(p){p[p.UNKNOWN=0]="UNKNOWN",p[p.TEXTAREA=1]="TEXTAREA",p[p.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",p[p.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",p[p.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",p[p.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",p[p.CONTENT_TEXT=6]="CONTENT_TEXT",p[p.CONTENT_EMPTY=7]="CONTENT_EMPTY",p[p.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",p[p.CONTENT_WIDGET=9]="CONTENT_WIDGET",p[p.OVERVIEW_RULER=10]="OVERVIEW_RULER",p[p.SCROLLBAR=11]="SCROLLBAR",p[p.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",p[p.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(R||(R={})),function(p){p[p.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",p[p.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",p[p.TOP_CENTER=2]="TOP_CENTER"}(O||(O={})),function(p){p[p.Left=1]="Left",p[p.Center=2]="Center",p[p.Right=4]="Right",p[p.Full=7]="Full"}($||($={})),function(p){p[p.Left=0]="Left",p[p.Right=1]="Right",p[p.None=2]="None",p[p.LeftOfInjectedText=3]="LeftOfInjectedText",p[p.RightOfInjectedText=4]="RightOfInjectedText"}(N||(N={})),function(p){p[p.Off=0]="Off",p[p.On=1]="On",p[p.Relative=2]="Relative",p[p.Interval=3]="Interval",p[p.Custom=4]="Custom"}(T||(T={})),function(p){p[p.None=0]="None",p[p.Text=1]="Text",p[p.Blocks=2]="Blocks"}(C||(C={})),function(p){p[p.Smooth=0]="Smooth",p[p.Immediate=1]="Immediate"}(W||(W={})),function(p){p[p.Auto=1]="Auto",p[p.Hidden=2]="Hidden",p[p.Visible=3]="Visible"}(K||(K={})),function(p){p[p.LTR=0]="LTR",p[p.RTL=1]="RTL"}(j||(j={})),function(p){p[p.Invoke=1]="Invoke",p[p.TriggerCharacter=2]="TriggerCharacter",p[p.ContentChange=3]="ContentChange"}(F||(F={})),function(p){p[p.File=0]="File",p[p.Module=1]="Module",p[p.Namespace=2]="Namespace",p[p.Package=3]="Package",p[p.Class=4]="Class",p[p.Method=5]="Method",p[p.Property=6]="Property",p[p.Field=7]="Field",p[p.Constructor=8]="Constructor",p[p.Enum=9]="Enum",p[p.Interface=10]="Interface",p[p.Function=11]="Function",p[p.Variable=12]="Variable",p[p.Constant=13]="Constant",p[p.String=14]="String",p[p.Number=15]="Number",p[p.Boolean=16]="Boolean",p[p.Array=17]="Array",p[p.Object=18]="Object",p[p.Key=19]="Key",p[p.Null=20]="Null",p[p.EnumMember=21]="EnumMember",p[p.Struct=22]="Struct",p[p.Event=23]="Event",p[p.Operator=24]="Operator",p[p.TypeParameter=25]="TypeParameter"}(H||(H={})),function(p){p[p.Deprecated=1]="Deprecated"}(z||(z={})),function(p){p[p.Hidden=0]="Hidden",p[p.Blink=1]="Blink",p[p.Smooth=2]="Smooth",p[p.Phase=3]="Phase",p[p.Expand=4]="Expand",p[p.Solid=5]="Solid"}(J||(J={})),function(p){p[p.Line=1]="Line",p[p.Block=2]="Block",p[p.Underline=3]="Underline",p[p.LineThin=4]="LineThin",p[p.BlockOutline=5]="BlockOutline",p[p.UnderlineThin=6]="UnderlineThin"}(oe||(oe={})),function(p){p[p.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",p[p.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",p[p.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",p[p.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(fe||(fe={})),function(p){p[p.None=0]="None",p[p.Same=1]="Same",p[p.Indent=2]="Indent",p[p.DeepIndent=3]="DeepIndent"}(q||(q={}))},913:(ut,Ie,t)=>{"use strict";t.d(Ie,{B8:()=>x,Oe:()=>m,UX:()=>_,aq:()=>A,iN:()=>f,ld:()=>I,qq:()=>u,ug:()=>B,xi:()=>v});var m,B,u,I,_,A,x,v,f,d=t(3580);(function(o){o.noSelection=d.NC("noSelection","No selection"),o.singleSelectionRange=d.NC("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),o.singleSelection=d.NC("singleSelection","Line {0}, Column {1}"),o.multiSelectionRange=d.NC("multiSelectionRange","{0} selections ({1} characters selected)"),o.multiSelection=d.NC("multiSelection","{0} selections"),o.emergencyConfOn=d.NC("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),o.openingDocs=d.NC("openingDocs","Now opening the Editor Accessibility documentation page."),o.readonlyDiffEditor=d.NC("readonlyDiffEditor"," in a read-only pane of a diff editor."),o.editableDiffEditor=d.NC("editableDiffEditor"," in a pane of a diff editor."),o.readonlyEditor=d.NC("readonlyEditor"," in a read-only code editor"),o.editableEditor=d.NC("editableEditor"," in a code editor"),o.changeConfigToOnMac=d.NC("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),o.changeConfigToOnWinLinux=d.NC("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),o.auto_on=d.NC("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),o.auto_off=d.NC("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),o.tabFocusModeOnMsg=d.NC("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),o.tabFocusModeOnMsgNoKb=d.NC("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),o.tabFocusModeOffMsg=d.NC("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),o.tabFocusModeOffMsgNoKb=d.NC("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),o.openDocMac=d.NC("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),o.openDocWinLinux=d.NC("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),o.outroMsg=d.NC("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),o.showAccessibilityHelpAction=d.NC("showAccessibilityHelpAction","Show Accessibility Help"),o.accessibilityHelpTitle=d.NC("accessibilityHelpTitle","Accessibility Help")})(m||(m={})),function(o){o.inspectTokensAction=d.NC("inspectTokens","Developer: Inspect Tokens")}(B||(B={})),function(o){o.gotoLineActionLabel=d.NC("gotoLineActionLabel","Go to Line/Column...")}(u||(u={})),function(o){o.helpQuickAccessActionLabel=d.NC("helpQuickAccess","Show all Quick Access Providers")}(I||(I={})),function(o){o.quickCommandActionLabel=d.NC("quickCommandActionLabel","Command Palette"),o.quickCommandHelp=d.NC("quickCommandActionHelp","Show And Run Commands")}(_||(_={})),function(o){o.quickOutlineActionLabel=d.NC("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=d.NC("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")}(A||(A={})),function(o){o.editorViewAccessibleLabel=d.NC("editorViewAccessibleLabel","Editor content"),o.accessibilityHelpMessage=d.NC("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")}(x||(x={})),function(o){o.toggleHighContrast=d.NC("toggleHighContrast","Toggle High Contrast Theme")}(v||(v={})),function(o){o.bulkEditServiceSummary=d.NC("bulkEditServiceSummary","Made {0} edits in {1} files")}(f||(f={}))},4706:(ut,Ie,t)=>{"use strict";t.d(Ie,{CZ:()=>A,D8:()=>v,Jx:()=>m,Tx:()=>_,dQ:()=>x,fV:()=>f,gk:()=>B,lN:()=>I,rU:()=>u});class m{constructor(){this.changeType=1}}class B{static applyInjectedText(o,h){if(!h||h.length===0)return o;let r="",i=0;for(let c of h)r+=o.substring(i,c.column-1),i=c.column-1,r+=c.options.content;return r+=o.substring(i),r}static fromDecorations(o){let h=[];for(let r of o)r.options.before&&r.options.before.content.length>0&&h.push(new B(r.ownerId,r.range.startLineNumber,r.range.startColumn,r.options.before,0)),r.options.after&&r.options.after.content.length>0&&h.push(new B(r.ownerId,r.range.endLineNumber,r.range.endColumn,r.options.after,1));return h.sort((r,i)=>r.lineNumber===i.lineNumber?r.column===i.column?r.order-i.order:r.column-i.column:r.lineNumber-i.lineNumber),h}constructor(o,h,r,i,c){this.ownerId=o,this.lineNumber=h,this.column=r,this.options=i,this.order=c}}class u{constructor(o,h,r){this.changeType=2,this.lineNumber=o,this.detail=h,this.injectedText=r}}class I{constructor(o,h){this.changeType=3,this.fromLineNumber=o,this.toLineNumber=h}}class _{constructor(o,h,r,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=o,this.toLineNumber=h,this.detail=r}}class A{constructor(){this.changeType=5}}class x{constructor(o,h,r,i){this.changes=o,this.versionId=h,this.isUndoing=r,this.isRedoing=i,this.resultingSelection=null}containsEvent(o){for(let h=0,r=this.changes.length;h<r;h++)if(this.changes[h].changeType===o)return!0;return!1}static merge(o,h){let r=[].concat(o.changes).concat(h.changes),i=h.versionId,c=o.isUndoing||h.isUndoing,b=o.isRedoing||h.isRedoing;return new x(r,i,c,b)}}class v{constructor(o){this.changes=o}}class f{constructor(o,h){this.rawContentChangedEvent=o,this.contentChangedEvent=h}merge(o){let h=x.merge(this.rawContentChangedEvent,o.rawContentChangedEvent),r=f._mergeChangeEvents(this.contentChangedEvent,o.contentChangedEvent);return new f(h,r)}static _mergeChangeEvents(o,h){let r=[].concat(o.changes).concat(h.changes),i=h.eol,c=h.versionId,b=o.isUndoing||h.isUndoing,l=o.isRedoing||h.isRedoing,a=o.isFlush||h.isFlush;return{changes:r,eol:i,isEolChange:o.isEolChange&&h.isEolChange,versionId:c,isUndoing:b,isRedoing:l,isFlush:a}}}},5094:(ut,Ie,t)=>{"use strict";var m;t.d(Ie,{UO:()=>B,s6:()=>m,vW:()=>u}),function(I){I[I.Disabled=0]="Disabled",I[I.EnabledForActive=1]="EnabledForActive",I[I.Enabled=2]="Enabled"}(m||(m={}));class B{constructor(_,A,x,v,f,d){if(this.visibleColumn=_,this.column=A,this.className=x,this.horizontalLine=v,this.forWrappedLinesAfterColumn=f,this.forWrappedLinesBeforeOrAtColumn=d,_!==-1==(A!==-1))throw new Error}}class u{constructor(_,A){this.top=_,this.endColumn=A}}},7378:(ut,Ie,t)=>{"use strict";t.d(Ie,{A:()=>B});var m=t(5797);class B{static createEmpty(_,A){let x=B.defaultTokenMetadata,v=new Uint32Array(2);return v[0]=_.length,v[1]=x,new B(v,_,A)}constructor(_,A,x){this._lineTokensBrand=void 0,this._tokens=_,this._tokensCount=this._tokens.length>>>1,this._text=A,this._languageIdCodec=x}equals(_){return _ instanceof B&&this.slicedEquals(_,0,this._tokensCount)}slicedEquals(_,A,x){if(this._text!==_._text||this._tokensCount!==_._tokensCount)return!1;let v=A<<1,f=v+(x<<1);for(let d=v;d<f;d++)if(this._tokens[d]!==_._tokens[d])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(_){return _>0?this._tokens[_-1<<1]:0}getMetadata(_){return this._tokens[1+(_<<1)]}getLanguageId(_){let A=this._tokens[1+(_<<1)],x=m.N.getLanguageId(A);return this._languageIdCodec.decodeLanguageId(x)}getStandardTokenType(_){let A=this._tokens[1+(_<<1)];return m.N.getTokenType(A)}getForeground(_){let A=this._tokens[1+(_<<1)];return m.N.getForeground(A)}getClassName(_){let A=this._tokens[1+(_<<1)];return m.N.getClassNameFromMetadata(A)}getInlineStyle(_,A){let x=this._tokens[1+(_<<1)];return m.N.getInlineStyleFromMetadata(x,A)}getPresentation(_){let A=this._tokens[1+(_<<1)];return m.N.getPresentationFromMetadata(A)}getEndOffset(_){return this._tokens[_<<1]}findTokenIndexAtOffset(_){return B.findIndexInTokensArray(this._tokens,_)}inflate(){return this}sliceAndInflate(_,A,x){return new u(this,_,A,x)}static convertToEndOffset(_,A){let x=(_.length>>>1)-1;for(let v=0;v<x;v++)_[v<<1]=_[v+1<<1];_[x<<1]=A}static findIndexInTokensArray(_,A){if(_.length<=2)return 0;let x=0,v=(_.length>>>1)-1;for(;x<v;){let f=x+Math.floor((v-x)/2),d=_[f<<1];if(d===A)return f+1;d<A?x=f+1:d>A&&(v=f)}return x}withInserted(_){if(_.length===0)return this;let A=0,x=0,v="",f=new Array,d=0;for(;;){let o=A<this._tokensCount?this._tokens[A<<1]:-1,h=x<_.length?_[x]:null;if(o!==-1&&(h===null||o<=h.offset)){v+=this._text.substring(d,o);let r=this._tokens[1+(A<<1)];f.push(v.length,r),A++,d=o}else{if(!h)break;if(h.offset>d){v+=this._text.substring(d,h.offset);let r=this._tokens[1+(A<<1)];f.push(v.length,r),d=h.offset}v+=h.text,f.push(v.length,h.tokenMetadata),x++}}return new B(new Uint32Array(f),v,this._languageIdCodec)}}B.defaultTokenMetadata=33587200;class u{constructor(_,A,x,v){this._source=_,this._startOffset=A,this._endOffset=x,this._deltaOffset=v,this._firstTokenIndex=_.findTokenIndexAtOffset(A),this._tokensCount=0;for(let f=this._firstTokenIndex,d=_.getCount();f<d&&!(_.getStartOffset(f)>=x);f++)this._tokensCount++}getMetadata(_){return this._source.getMetadata(this._firstTokenIndex+_)}getLanguageId(_){return this._source.getLanguageId(this._firstTokenIndex+_)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(_){return _ instanceof u&&this._startOffset===_._startOffset&&this._endOffset===_._endOffset&&this._deltaOffset===_._deltaOffset&&this._source.slicedEquals(_._source,this._firstTokenIndex,this._tokensCount)}getCount(){return this._tokensCount}getForeground(_){return this._source.getForeground(this._firstTokenIndex+_)}getEndOffset(_){let A=this._source.getEndOffset(this._firstTokenIndex+_);return Math.min(this._endOffset,A)-this._startOffset+this._deltaOffset}getClassName(_){return this._source.getClassName(this._firstTokenIndex+_)}getInlineStyle(_,A){return this._source.getInlineStyle(this._firstTokenIndex+_,A)}getPresentation(_){return this._source.getPresentation(this._firstTokenIndex+_)}findTokenIndexAtOffset(_){return this._source.findTokenIndexAtOffset(_+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}},2550:(ut,Ie,t)=>{"use strict";t.d(Ie,{Kp:()=>B,k:()=>_});var m=t(7295);class B{constructor(x,v,f,d){this.startColumn=x,this.endColumn=v,this.className=f,this.type=d,this._lineDecorationBrand=void 0}static _equals(x,v){return x.startColumn===v.startColumn&&x.endColumn===v.endColumn&&x.className===v.className&&x.type===v.type}static equalsArr(x,v){let f=x.length;if(f!==v.length)return!1;for(let d=0;d<f;d++)if(!B._equals(x[d],v[d]))return!1;return!0}static extractWrapped(x,v,f){if(x.length===0)return x;let d=v+1,o=f+1,h=f-v,r=[],i=0;for(let c of x)c.endColumn<=d||c.startColumn>=o||(r[i++]=new B(Math.max(1,c.startColumn-d+1),Math.min(h+1,c.endColumn-d+1),c.className,c.type));return r}static filter(x,v,f,d){if(x.length===0)return[];let o=[],h=0;for(let r=0,i=x.length;r<i;r++){let c=x[r],b=c.range;if(b.endLineNumber<v||b.startLineNumber>v||b.isEmpty()&&(c.type===0||c.type===3))continue;let l=b.startLineNumber===v?b.startColumn:f,a=b.endLineNumber===v?b.endColumn:d;o[h++]=new B(l,a,c.inlineClassName,c.type)}return o}static _typeCompare(x,v){let f=[2,0,1,3];return f[x]-f[v]}static compare(x,v){if(x.startColumn!==v.startColumn)return x.startColumn-v.startColumn;if(x.endColumn!==v.endColumn)return x.endColumn-v.endColumn;let f=B._typeCompare(x.type,v.type);return f!==0?f:x.className!==v.className?x.className<v.className?-1:1:0}}class u{constructor(x,v,f,d){this.startOffset=x,this.endOffset=v,this.className=f,this.metadata=d}}class I{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(x){let v=0;for(let f=0,d=x.length;f<d;f++)v|=x[f];return v}consumeLowerThan(x,v,f){for(;this.count>0&&this.stopOffsets[0]<x;){let d=0;for(;d+1<this.count&&this.stopOffsets[d]===this.stopOffsets[d+1];)d++;f.push(new u(v,this.stopOffsets[d],this.classNames.join(" "),I._metadata(this.metadata))),v=this.stopOffsets[d]+1,this.stopOffsets.splice(0,d+1),this.classNames.splice(0,d+1),this.metadata.splice(0,d+1),this.count-=d+1}return this.count>0&&v<x&&(f.push(new u(v,x-1,this.classNames.join(" "),I._metadata(this.metadata))),v=x),v}insert(x,v,f){if(this.count===0||this.stopOffsets[this.count-1]<=x)this.stopOffsets.push(x),this.classNames.push(v),this.metadata.push(f);else for(let d=0;d<this.count;d++)if(this.stopOffsets[d]>=x){this.stopOffsets.splice(d,0,x),this.classNames.splice(d,0,v),this.metadata.splice(d,0,f);break}this.count++}}class _{static normalize(x,v){if(v.length===0)return[];let f=[],d=new I,o=0;for(let h=0,r=v.length;h<r;h++){let i=v[h],c=i.startColumn,b=i.endColumn,l=i.className,a=i.type===1?2:i.type===2?4:0;if(c>1){let D=x.charCodeAt(c-2);m.ZG(D)&&c--}if(b>1){let D=x.charCodeAt(b-2);m.ZG(D)&&b--}let w=c-1,E=b-2;o=d.consumeLowerThan(w,o,f),d.count===0&&(o=w),d.insert(E,l,a)}return d.consumeLowerThan(1073741824,o,f),f}}},1557:(ut,Ie,t)=>{"use strict";t.d(Ie,{Nd:()=>v,zG:()=>A,IJ:()=>x,d1:()=>o,tF:()=>r});var m=t(3580),B=t(7295),u=t(72),I=t(2550);class _{constructor(l,a,w,E){this.endIndex=l,this.type=a,this.metadata=w,this.containsRTL=E,this._linePartBrand=void 0}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class A{constructor(l,a){this.startOffset=l,this.endOffset=a}equals(l){return this.startOffset===l.startOffset&&this.endOffset===l.endOffset}}class x{constructor(l,a,w,E,D,L,k,R,O,$,N,T,C,W,K,j,F,H,z){this.useMonospaceOptimizations=l,this.canUseHalfwidthRightwardsArrow=a,this.lineContent=w,this.continuesWithWrappedLine=E,this.isBasicASCII=D,this.containsRTL=L,this.fauxIndentLength=k,this.lineTokens=R,this.lineDecorations=O.sort(I.Kp.compare),this.tabSize=$,this.startVisibleColumn=N,this.spaceWidth=T,this.stopRenderingLineAfter=K,this.renderWhitespace=j==="all"?4:j==="boundary"?1:j==="selection"?2:j==="trailing"?3:0,this.renderControlCharacters=F,this.fontLigatures=H,this.selectionsOnLine=z&&z.sort((J,oe)=>J.startOffset<oe.startOffset?-1:1),Math.abs(W-T)<Math.abs(C-T)?(this.renderSpaceWidth=W,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=C,this.renderSpaceCharCode=183)}sameSelection(l){if(this.selectionsOnLine===null)return l===null;if(l===null||l.length!==this.selectionsOnLine.length)return!1;for(let a=0;a<this.selectionsOnLine.length;a++)if(!this.selectionsOnLine[a].equals(l[a]))return!1;return!0}equals(l){return this.useMonospaceOptimizations===l.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===l.canUseHalfwidthRightwardsArrow&&this.lineContent===l.lineContent&&this.continuesWithWrappedLine===l.continuesWithWrappedLine&&this.isBasicASCII===l.isBasicASCII&&this.containsRTL===l.containsRTL&&this.fauxIndentLength===l.fauxIndentLength&&this.tabSize===l.tabSize&&this.startVisibleColumn===l.startVisibleColumn&&this.spaceWidth===l.spaceWidth&&this.renderSpaceWidth===l.renderSpaceWidth&&this.renderSpaceCharCode===l.renderSpaceCharCode&&this.stopRenderingLineAfter===l.stopRenderingLineAfter&&this.renderWhitespace===l.renderWhitespace&&this.renderControlCharacters===l.renderControlCharacters&&this.fontLigatures===l.fontLigatures&&I.Kp.equalsArr(this.lineDecorations,l.lineDecorations)&&this.lineTokens.equals(l.lineTokens)&&this.sameSelection(l.selectionsOnLine)}}class v{constructor(l,a){this.partIndex=l,this.charIndex=a}}class f{static getPartIndex(l){return(4294901760&l)>>>16}static getCharIndex(l){return(65535&l)>>>0}constructor(l,a){this.length=l,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(l,a,w,E){let D=(a<<16|w<<0)>>>0;this._data[l-1]=D,this._horizontalOffset[l-1]=E}getHorizontalOffset(l){return this._horizontalOffset.length===0?0:this._horizontalOffset[l-1]}charOffsetToPartData(l){return this.length===0?0:l<0?this._data[0]:l>=this.length?this._data[this.length-1]:this._data[l]}getDomPosition(l){let a=this.charOffsetToPartData(l-1),w=f.getPartIndex(a),E=f.getCharIndex(a);return new v(w,E)}getColumn(l,a){return this.partDataToCharOffset(l.partIndex,a,l.charIndex)+1}partDataToCharOffset(l,a,w){if(this.length===0)return 0;let E=(l<<16|w<<0)>>>0,D=0,L=this.length-1;for(;D+1<L;){let T=D+L>>>1,C=this._data[T];if(C===E)return T;C>E?L=T:D=T}if(D===L)return D;let k=this._data[D],R=this._data[L];if(k===E)return D;if(R===E)return L;let O=f.getPartIndex(k),$=f.getCharIndex(k),N;return N=O!==f.getPartIndex(R)?a:f.getCharIndex(R),w-$<=N-w?D:L}}class d{constructor(l,a,w){this._renderLineOutputBrand=void 0,this.characterMapping=l,this.containsRTL=a,this.containsForeignElements=w}}function o(b,l){if(b.lineContent.length===0){if(b.lineDecorations.length>0){l.appendString("<span>");let a=0,w=0,E=0;for(let L of b.lineDecorations)L.type!==1&&L.type!==2||(l.appendString('<span class="'),l.appendString(L.className),l.appendString('"></span>'),L.type===1&&(E|=1,a++),L.type===2&&(E|=2,w++));l.appendString("</span>");let D=new f(1,a+w);return D.setColumnInfo(1,a,0,0),new d(D,!1,E)}return l.appendString("<span><span></span></span>"),new d(new f(0,0),!1,0)}return function(a,w){let E=a.fontIsMonospace,D=a.canUseHalfwidthRightwardsArrow,L=a.containsForeignElements,k=a.lineContent,R=a.len,O=a.isOverflowing,$=a.overflowingCharCount,N=a.parts,T=a.fauxIndentLength,C=a.tabSize,W=a.startVisibleColumn,K=a.containsRTL,j=a.spaceWidth,F=a.renderSpaceCharCode,H=a.renderWhitespace,z=a.renderControlCharacters,J=new f(R+1,N.length),oe=!1,fe=0,q=W,p=0,re=0,ne=0;K?w.appendString('<span dir="ltr">'):w.appendString("<span>");for(let ie=0,se=N.length;ie<se;ie++){let ce=N[ie],be=ce.endIndex,de=ce.type,U=ce.containsRTL,ue=H!==0&&ce.isWhitespace(),ve=ue&&!E&&(de==="mtkw"||!L),X=fe===be&&ce.isPseudoAfter();if(p=0,w.appendString("<span "),U&&w.appendString('style="unicode-bidi:isolate" '),w.appendString('class="'),w.appendString(ve?"mtkz":de),w.appendASCIICharCode(34),ue){let ye=0;{let Ce=fe,Ee=q;for(;Ce<be;Ce++){let Ae=0|(k.charCodeAt(Ce)===9?C-Ee%C:1);ye+=Ae,Ce>=T&&(Ee+=Ae)}}for(ve&&(w.appendString(' style="width:'),w.appendString(String(j*ye)),w.appendString('px"')),w.appendASCIICharCode(62);fe<be;fe++){let Ce,Ee;if(J.setColumnInfo(fe+1,ie-ne,p,re),ne=0,k.charCodeAt(fe)===9){Ce=C-q%C|0,Ee=Ce,!D||Ee>1?w.appendCharCode(8594):w.appendCharCode(65515);for(let Ae=2;Ae<=Ee;Ae++)w.appendCharCode(160)}else Ce=2,Ee=1,w.appendCharCode(F),w.appendCharCode(8204);p+=Ce,re+=Ee,fe>=T&&(q+=Ee)}}else for(w.appendASCIICharCode(62);fe<be;fe++){J.setColumnInfo(fe+1,ie-ne,p,re),ne=0;let ye=k.charCodeAt(fe),Ce=1,Ee=1;switch(ye){case 9:Ce=C-q%C,Ee=Ce;for(let Ae=1;Ae<=Ce;Ae++)w.appendCharCode(160);break;case 32:w.appendCharCode(160);break;case 60:w.appendString("&lt;");break;case 62:w.appendString("&gt;");break;case 38:w.appendString("&amp;");break;case 0:z?w.appendCharCode(9216):w.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:w.appendCharCode(65533);break;default:B.K7(ye)&&Ee++,z&&ye<32?w.appendCharCode(9216+ye):z&&ye===127?w.appendCharCode(9249):z&&c(ye)?(w.appendString("[U+"),w.appendString(ye.toString(16).toUpperCase().padStart(4,"0")),w.appendString("]"),Ce=8,Ee=Ce):w.appendCharCode(ye)}p+=Ce,re+=Ee,fe>=T&&(q+=Ee)}X?ne++:ne=0,fe>=R&&!oe&&ce.isPseudoAfter()&&(oe=!0,J.setColumnInfo(fe+1,ie,p,re)),w.appendString("</span>")}return oe||J.setColumnInfo(R+1,N.length-1,p,re),O&&(w.appendString('<span class="mtkoverflow">'),w.appendString(m.NC("showMore","Show more ({0})",function(ie){return ie<1024?m.NC("overflow.chars","{0} chars",ie):ie<1048576?`${(ie/1024).toFixed(1)} KB`:`${(ie/1024/1024).toFixed(1)} MB`}($))),w.appendString("</span>")),w.appendString("</span>"),new d(J,K,L)}(function(a){let w=a.lineContent,E,D,L;a.stopRenderingLineAfter!==-1&&a.stopRenderingLineAfter<w.length?(E=!0,D=w.length-a.stopRenderingLineAfter,L=a.stopRenderingLineAfter):(E=!1,D=0,L=w.length);let k=function(O,$,N,T,C){let W=[],K=0;T>0&&(W[K++]=new _(T,"",0,!1));let j=T;for(let F=0,H=N.getCount();F<H;F++){let z=N.getEndOffset(F);if(z<=T)continue;let J=N.getClassName(F);if(z>=C){let fe=!!$&&B.Ut(O.substring(j,C));W[K++]=new _(C,J,0,fe);break}let oe=!!$&&B.Ut(O.substring(j,z));W[K++]=new _(z,J,0,oe),j=z}return W}(w,a.containsRTL,a.lineTokens,a.fauxIndentLength,L);a.renderControlCharacters&&!a.isBasicASCII&&(k=function(O,$){let N=[],T=new _(0,"",0,!1),C=0;for(let W of $){let K=W.endIndex;for(;C<K;C++)c(O.charCodeAt(C))&&(C>T.endIndex&&(T=new _(C,W.type,W.metadata,W.containsRTL),N.push(T)),T=new _(C+1,"mtkcontrol",W.metadata,!1),N.push(T));C>T.endIndex&&(T=new _(K,W.type,W.metadata,W.containsRTL),N.push(T))}return N}(w,k)),(a.renderWhitespace===4||a.renderWhitespace===1||a.renderWhitespace===2&&a.selectionsOnLine||a.renderWhitespace===3&&!a.continuesWithWrappedLine)&&(k=function(O,$,N,T){let C=O.continuesWithWrappedLine,W=O.fauxIndentLength,K=O.tabSize,j=O.startVisibleColumn,F=O.useMonospaceOptimizations,H=O.selectionsOnLine,z=O.renderWhitespace===1,J=O.renderWhitespace===3,oe=O.renderSpaceWidth!==O.spaceWidth,fe=[],q=0,p=0,re=T[p].type,ne=T[p].containsRTL,ie=T[p].endIndex,se=T.length,ce,be=!1,de=B.LC($);de===-1?(be=!0,de=N,ce=N):ce=B.ow($);let U=!1,ue=0,ve=H&&H[ue],X=j%K;for(let Ce=W;Ce<N;Ce++){let Ee=$.charCodeAt(Ce),Ae;if(ve&&Ce>=ve.endOffset&&(ue++,ve=H&&H[ue]),Ce<de||Ce>ce)Ae=!0;else if(Ee===9)Ae=!0;else if(Ee===32)if(z)if(U)Ae=!0;else{let Fe=Ce+1<N?$.charCodeAt(Ce+1):0;Ae=Fe===32||Fe===9}else Ae=!0;else Ae=!1;if(Ae&&H&&(Ae=!!ve&&ve.startOffset<=Ce&&ve.endOffset>Ce),Ae&&J&&(Ae=be||Ce>ce),Ae&&ne&&Ce>=de&&Ce<=ce&&(Ae=!1),U){if(!Ae||!F&&X>=K){if(oe)for(let Fe=(q>0?fe[q-1].endIndex:W)+1;Fe<=Ce;Fe++)fe[q++]=new _(Fe,"mtkw",1,!1);else fe[q++]=new _(Ce,"mtkw",1,!1);X%=K}}else(Ce===ie||Ae&&Ce>W)&&(fe[q++]=new _(Ce,re,0,ne),X%=K);for(Ee===9?X=K:B.K7(Ee)?X+=2:X++,U=Ae;Ce===ie&&(p++,p<se);)re=T[p].type,ne=T[p].containsRTL,ie=T[p].endIndex}let ye=!1;if(U)if(C&&z){let Ce=N>0?$.charCodeAt(N-1):0,Ee=N>1?$.charCodeAt(N-2):0;Ce===32&&Ee!==32&&Ee!==9||(ye=!0)}else ye=!0;if(ye)if(oe)for(let Ce=(q>0?fe[q-1].endIndex:W)+1;Ce<=N;Ce++)fe[q++]=new _(Ce,"mtkw",1,!1);else fe[q++]=new _(N,"mtkw",1,!1);else fe[q++]=new _(N,re,0,ne);return fe}(a,w,L,k));let R=0;if(a.lineDecorations.length>0){for(let O=0,$=a.lineDecorations.length;O<$;O++){let N=a.lineDecorations[O];N.type===3||N.type===1?R|=1:N.type===2&&(R|=2)}k=function(O,$,N,T){T.sort(I.Kp.compare);let C=I.k.normalize(O,T),W=C.length,K=0,j=[],F=0,H=0;for(let J=0,oe=N.length;J<oe;J++){let fe=N[J],q=fe.endIndex,p=fe.type,re=fe.metadata,ne=fe.containsRTL;for(;K<W&&C[K].startOffset<q;){let ie=C[K];if(ie.startOffset>H&&(H=ie.startOffset,j[F++]=new _(H,p,re,ne)),!(ie.endOffset+1<=q)){H=q,j[F++]=new _(H,p+" "+ie.className,re|ie.metadata,ne);break}H=ie.endOffset+1,j[F++]=new _(H,p+" "+ie.className,re|ie.metadata,ne),K++}q>H&&(H=q,j[F++]=new _(H,p,re,ne))}let z=N[N.length-1].endIndex;if(K<W&&C[K].startOffset===z)for(;K<W&&C[K].startOffset===z;){let J=C[K];j[F++]=new _(H,J.className,J.metadata,!1),K++}return j}(w,0,k,a.lineDecorations)}return a.containsRTL||(k=function(O,$,N){let T=0,C=[],W=0;if(N)for(let K=0,j=$.length;K<j;K++){let F=$[K],H=F.endIndex;if(T+50<H){let z=F.type,J=F.metadata,oe=F.containsRTL,fe=-1,q=T;for(let p=T;p<H;p++)O.charCodeAt(p)===32&&(fe=p),fe!==-1&&p-q>=50&&(C[W++]=new _(fe+1,z,J,oe),q=fe+1,fe=-1);q!==H&&(C[W++]=new _(H,z,J,oe))}else C[W++]=F;T=H}else for(let K=0,j=$.length;K<j;K++){let F=$[K],H=F.endIndex,z=H-T;if(z>50){let J=F.type,oe=F.metadata,fe=F.containsRTL,q=Math.ceil(z/50);for(let p=1;p<q;p++){let re=T+50*p;C[W++]=new _(re,J,oe,fe)}C[W++]=new _(H,J,oe,fe)}else C[W++]=F;T=H}return C}(w,k,!a.isBasicASCII||a.fontLigatures)),new i(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,w,L,E,D,k,R,a.fauxIndentLength,a.tabSize,a.startVisibleColumn,a.containsRTL,a.spaceWidth,a.renderSpaceCharCode,a.renderWhitespace,a.renderControlCharacters)}(b),l)}class h{constructor(l,a,w,E){this.characterMapping=l,this.html=a,this.containsRTL=w,this.containsForeignElements=E}}function r(b){let l=new u.HT(1e4),a=o(b,l);return new h(a.characterMapping,l.build(),a.containsRTL,a.containsForeignElements)}class i{constructor(l,a,w,E,D,L,k,R,O,$,N,T,C,W,K,j){this.fontIsMonospace=l,this.canUseHalfwidthRightwardsArrow=a,this.lineContent=w,this.len=E,this.isOverflowing=D,this.overflowingCharCount=L,this.parts=k,this.containsForeignElements=R,this.fauxIndentLength=O,this.tabSize=$,this.startVisibleColumn=N,this.containsRTL=T,this.spaceWidth=C,this.renderSpaceCharCode=W,this.renderWhitespace=K,this.renderControlCharacters=j}}function c(b){return b<32?b!==9:b===127||b>=8234&&b<=8238||b>=8294&&b<=8297||b>=8206&&b<=8207||b===1564}},1118:(ut,Ie,t)=>{"use strict";t.d(Ie,{$l:()=>f,$t:()=>x,IP:()=>_,SQ:()=>d,Wx:()=>v,l_:()=>u,ud:()=>I,wA:()=>A});var m=t(7295),B=t(4314);class u{constructor(h,r,i,c){this._viewportBrand=void 0,this.top=0|h,this.left=0|r,this.width=0|i,this.height=0|c}}class I{constructor(h,r){this.tabSize=h,this.data=r}}class _{constructor(h,r,i,c,b,l,a){this._viewLineDataBrand=void 0,this.content=h,this.continuesWithWrappedLine=r,this.minColumn=i,this.maxColumn=c,this.startVisibleColumn=b,this.tokens=l,this.inlineDecorations=a}}class A{constructor(h,r,i,c,b,l,a,w,E,D){this.minColumn=h,this.maxColumn=r,this.content=i,this.continuesWithWrappedLine=c,this.isBasicASCII=A.isBasicASCII(i,l),this.containsRTL=A.containsRTL(i,this.isBasicASCII,b),this.tokens=a,this.inlineDecorations=w,this.tabSize=E,this.startVisibleColumn=D}static isBasicASCII(h,r){return!r||m.$i(h)}static containsRTL(h,r,i){return!(r||!i)&&m.Ut(h)}}class x{constructor(h,r,i){this.range=h,this.inlineClassName=r,this.type=i}}class v{constructor(h,r,i,c){this.startOffset=h,this.endOffset=r,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=c}toInlineDecoration(h){return new x(new B.e(h,this.startOffset+1,h,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class f{constructor(h,r){this._viewModelDecorationBrand=void 0,this.range=h,this.options=r}}class d{constructor(h,r,i){this.color=h,this.zIndex=r,this.data=i}static cmp(h,r){return h.zIndex===r.zIndex?h.color<r.color?-1:h.color>r.color?1:0:h.zIndex-r.zIndex}}},665:(ut,Ie,t)=>{"use strict";t.d(Ie,{EY:()=>B,Tj:()=>u});class m{constructor(_,A,x){this._colorZoneBrand=void 0,this.from=0|_,this.to=0|A,this.colorId=0|x}static compare(_,A){return _.colorId===A.colorId?_.from===A.from?_.to-A.to:_.from-A.from:_.colorId-A.colorId}}class B{constructor(_,A,x,v){this._overviewRulerZoneBrand=void 0,this.startLineNumber=_,this.endLineNumber=A,this.heightInLines=x,this.color=v,this._colorZone=null}static compare(_,A){return _.color===A.color?_.startLineNumber===A.startLineNumber?_.heightInLines===A.heightInLines?_.endLineNumber-A.endLineNumber:_.heightInLines-A.heightInLines:_.startLineNumber-A.startLineNumber:_.color<A.color?-1:1}setColorZone(_){this._colorZone=_}getColorZones(){return this._colorZone}}class u{constructor(_){this._getVerticalOffsetForLine=_,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(_){this._zones=_,this._zones.sort(B.compare)}setLineHeight(_){return this._lineHeight!==_&&(this._lineHeight=_,this._colorZonesInvalid=!0,!0)}setPixelRatio(_){this._pixelRatio=_,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(_){return this._domWidth!==_&&(this._domWidth=_,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(_){return this._domHeight!==_&&(this._domHeight=_,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(_){return this._outerHeight!==_&&(this._outerHeight=_,this._colorZonesInvalid=!0,!0)}resolveColorZones(){let _=this._colorZonesInvalid,A=Math.floor(this._lineHeight),x=Math.floor(this.getCanvasHeight()),v=x/Math.floor(this._outerHeight),f=Math.floor(4*this._pixelRatio/2),d=[];for(let o=0,h=this._zones.length;o<h;o++){let r=this._zones[o];if(!_){let k=r.getColorZones();if(k){d.push(k);continue}}let i=this._getVerticalOffsetForLine(r.startLineNumber),c=r.heightInLines===0?this._getVerticalOffsetForLine(r.endLineNumber)+A:i+r.heightInLines*A,b=Math.floor(v*i),l=Math.floor(v*c),a=Math.floor((b+l)/2),w=l-a;w<f&&(w=f),a-w<0&&(a=w),a+w>x&&(a=x-w);let E=r.color,D=this._color2Id[E];D||(D=++this._lastAssignedId,this._color2Id[E]=D,this._id2Color[D]=E);let L=new m(a-w,a+w,D);r.setColorZone(L),d.push(L)}return this._colorZonesInvalid=!1,d.sort(m.compare),d}}},168:(ut,Ie,t)=>{"use strict";t.d(Ie,{$t:()=>x,CU:()=>_,Fd:()=>A,zg:()=>v});var m=t(187),B=t(4314),u=t(1118),I=t(4141);class _{constructor(o,h,r,i,c){this.editorId=o,this.model=h,this.configuration=r,this._linesCollection=i,this._coordinatesConverter=c,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(o){let h=o.id,r=this._decorationsCache[h];if(!r){let i=o.range,c=o.options,b;if(c.isWholeLine){let l=this._coordinatesConverter.convertModelPositionToViewPosition(new m.L(i.startLineNumber,1),0),a=this._coordinatesConverter.convertModelPositionToViewPosition(new m.L(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);b=new B.e(l.lineNumber,l.column,a.lineNumber,a.column)}else b=this._coordinatesConverter.convertModelRangeToViewRange(i,1);r=new u.$l(b,c),this._decorationsCache[h]=r}return r}getMinimapDecorationsInRange(o){return this._getDecorationsInRange(o,!0,!1).decorations}getDecorationsViewportData(o){let h=this._cachedModelDecorationsResolver!==null;return h=h&&o.equalsRange(this._cachedModelDecorationsResolverViewRange),h||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(o,!1,!1),this._cachedModelDecorationsResolverViewRange=o),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(o,h=!1,r=!1){let i=new B.e(o,this._linesCollection.getViewLineMinColumn(o),o,this._linesCollection.getViewLineMaxColumn(o));return this._getDecorationsInRange(i,h,r).inlineDecorations[0]}_getDecorationsInRange(o,h,r){let i=this._linesCollection.getDecorationsInRange(o,this.editorId,(0,I.$J)(this.configuration.options),h,r),c=o.startLineNumber,b=o.endLineNumber,l=[],a=0,w=[];for(let E=c;E<=b;E++)w[E-c]=[];for(let E=0,D=i.length;E<D;E++){let L=i[E],k=L.options;if(!A(this.model,L))continue;let R=this._getOrCreateViewModelDecoration(L),O=R.range;if(l[a++]=R,k.inlineClassName){let $=new u.$t(O,k.inlineClassName,k.inlineClassNameAffectsLetterSpacing?3:0),N=Math.max(c,O.startLineNumber),T=Math.min(b,O.endLineNumber);for(let C=N;C<=T;C++)w[C-c].push($)}if(k.beforeContentClassName&&c<=O.startLineNumber&&O.startLineNumber<=b){let $=new u.$t(new B.e(O.startLineNumber,O.startColumn,O.startLineNumber,O.startColumn),k.beforeContentClassName,1);w[O.startLineNumber-c].push($)}if(k.afterContentClassName&&c<=O.endLineNumber&&O.endLineNumber<=b){let $=new u.$t(new B.e(O.endLineNumber,O.endColumn,O.endLineNumber,O.endColumn),k.afterContentClassName,2);w[O.endLineNumber-c].push($)}}return{decorations:l,inlineDecorations:w}}}function A(d,o){return!(o.options.hideInCommentTokens&&x(d,o)||o.options.hideInStringTokens&&v(d,o))}function x(d,o){return f(d,o.range,h=>h===1)}function v(d,o){return f(d,o.range,h=>h===2)}function f(d,o,h){for(let r=o.startLineNumber;r<=o.endLineNumber;r++){let i=d.tokenization.getLineTokens(r),c=r===o.startLineNumber,b=r===o.endLineNumber,l=c?i.findTokenIndexAtOffset(o.startColumn-1):0;for(;l<i.getCount()&&!(b&&i.getStartOffset(l)>o.endColumn-1);){if(!h(i.getStandardTokenType(l)))return!1;l++}}return!0}},236:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{SelectionAnchorSet:()=>d});var m=t(5152),B=t(9365),u=t(2258),I=t(6830),_=t(3860),A=t(9102),x=t(3580),v=t(3983),f=function(a,w,E,D){return new(E||(E=Promise))(function(L,k){function R(N){try{$(D.next(N))}catch(T){k(T)}}function O(N){try{$(D.throw(N))}catch(T){k(T)}}function $(N){var T;N.done?L(N.value):(T=N.value,T instanceof E?T:new E(function(C){C(T)})).then(R,O)}$((D=D.apply(a,w||[])).next())})};let d=new v.uy("selectionAnchorSet",!1),o=class Ol{static get(w){return w.getContribution(Ol.ID)}constructor(w,E){this.editor=w,this.selectionAnchorSetContextKey=d.bindTo(E),this.modelChangeListener=w.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){let w=this.editor.getPosition();this.editor.changeDecorations(E=>{this.decorationId&&E.removeDecoration(this.decorationId),this.decorationId=E.addDecoration(_.Y.fromPositions(w,w),{description:"selection-anchor",stickiness:1,hoverMessage:new B.W5().appendText((0,x.NC)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,m.Z9)((0,x.NC)("anchorSet","Anchor set at {0}:{1}",w.lineNumber,w.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){let w=this.editor.getModel().getDecorationRange(this.decorationId);w&&this.editor.setPosition(w.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){let w=this.editor.getModel().getDecorationRange(this.decorationId);if(w){let E=this.editor.getPosition();this.editor.setSelection(_.Y.fromPositions(w.getStartPosition(),E)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){let w=this.decorationId;this.editor.changeDecorations(E=>{E.removeDecoration(w),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};var h,r;o.ID="editor.contrib.selectionAnchorController",o=function(a,w,E,D){var L,k=arguments.length,R=k<3?w:D===null?D=Object.getOwnPropertyDescriptor(w,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,w,E,D);else for(var O=a.length-1;O>=0;O--)(L=a[O])&&(R=(k<3?L(R):k>3?L(w,E,R):L(w,E))||R);return k>3&&R&&Object.defineProperty(w,E,R),R}([(h=1,r=v.i6,function(a,w){r(a,w,h)})],o);class i extends I.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,x.NC)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:A.u.editorTextFocus,primary:(0,u.gx)(2089,2080),weight:100}})}run(w,E){var D;return f(this,void 0,void 0,function*(){(D=o.get(E))===null||D===void 0||D.setSelectionAnchor()})}}class c extends I.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,x.NC)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:d})}run(w,E){var D;return f(this,void 0,void 0,function*(){(D=o.get(E))===null||D===void 0||D.goToSelectionAnchor()})}}class b extends I.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,x.NC)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:d,kbOpts:{kbExpr:A.u.editorTextFocus,primary:(0,u.gx)(2089,2089),weight:100}})}run(w,E){var D;return f(this,void 0,void 0,function*(){(D=o.get(E))===null||D===void 0||D.selectFromAnchorToCursor()})}}class l extends I.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,x.NC)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:d,kbOpts:{kbExpr:A.u.editorTextFocus,primary:9,weight:100}})}run(w,E){var D;return f(this,void 0,void 0,function*(){(D=o.get(E))===null||D===void 0||D.cancelSelectionAnchor()})}}(0,I._K)(o.ID,o,4),(0,I.Qr)(i),(0,I.Qr)(c),(0,I.Qr)(b),(0,I.Qr)(l)},1387:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{BracketMatchingController:()=>w});var m=t(5393),B=t(5976),u=t(6830),I=t(187),_=t(4314),A=t(3860),x=t(9102),v=t(4973),f=t(3654),d=t(3580),o=t(4144),h=t(3910),r=t(7781);let i=(0,h.P6G)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},d.NC("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class c extends u.R6{constructor(){super({id:"editor.action.jumpToBracket",label:d.NC("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:x.u.editorTextFocus,primary:3165,weight:100}})}run(D,L){var k;(k=w.get(L))===null||k===void 0||k.jumpToBracket()}}class b extends u.R6{constructor(){super({id:"editor.action.selectToBracket",label:d.NC("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(D,L,k){var R;let O=!0;k&&k.selectBrackets===!1&&(O=!1),(R=w.get(L))===null||R===void 0||R.selectToBracket(O)}}class l extends u.R6{constructor(){super({id:"editor.action.removeBrackets",label:d.NC("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:x.u.editorTextFocus,primary:2561,weight:100}})}run(D,L){var k;(k=w.get(L))===null||k===void 0||k.removeBrackets(this.id)}}class a{constructor(D,L,k){this.position=D,this.brackets=L,this.options=k}}class w extends B.JT{static get(D){return D.getContribution(w.ID)}constructor(D){super(),this._editor=D,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new m.pY(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(69),this._updateBracketsSoon.schedule(),this._register(D.onDidChangeCursorPosition(L=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(D.onDidChangeModelContent(L=>{this._updateBracketsSoon.schedule()})),this._register(D.onDidChangeModel(L=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(D.onDidChangeModelLanguageConfiguration(L=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(D.onDidChangeConfiguration(L=>{L.hasChanged(69)&&(this._matchBrackets=this._editor.getOption(69),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(D.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(D.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;let D=this._editor.getModel(),L=this._editor.getSelections().map(k=>{let R=k.getStartPosition(),O=D.bracketPairs.matchBracket(R),$=null;if(O)O[0].containsPosition(R)&&!O[1].containsPosition(R)?$=O[1].getStartPosition():O[1].containsPosition(R)&&($=O[0].getStartPosition());else{let N=D.bracketPairs.findEnclosingBrackets(R);if(N)$=N[1].getStartPosition();else{let T=D.bracketPairs.findNextBracket(R);T&&T.range&&($=T.range.getStartPosition())}}return $?new A.Y($.lineNumber,$.column,$.lineNumber,$.column):new A.Y(R.lineNumber,R.column,R.lineNumber,R.column)});this._editor.setSelections(L),this._editor.revealRange(L[0])}selectToBracket(D){if(!this._editor.hasModel())return;let L=this._editor.getModel(),k=[];this._editor.getSelections().forEach(R=>{let O=R.getStartPosition(),$=L.bracketPairs.matchBracket(O);if(!$&&($=L.bracketPairs.findEnclosingBrackets(O),!$)){let C=L.bracketPairs.findNextBracket(O);C&&C.range&&($=L.bracketPairs.matchBracket(C.range.getStartPosition()))}let N=null,T=null;if($){$.sort(_.e.compareRangesUsingStarts);let[C,W]=$;if(N=D?C.getStartPosition():C.getEndPosition(),T=D?W.getEndPosition():W.getStartPosition(),W.containsPosition(O)){let K=N;N=T,T=K}}N&&T&&k.push(new A.Y(N.lineNumber,N.column,T.lineNumber,T.column))}),k.length>0&&(this._editor.setSelections(k),this._editor.revealRange(k[0]))}removeBrackets(D){if(!this._editor.hasModel())return;let L=this._editor.getModel();this._editor.getSelections().forEach(k=>{let R=k.getPosition(),O=L.bracketPairs.matchBracket(R);O||(O=L.bracketPairs.findEnclosingBrackets(R)),O&&(this._editor.pushUndoStop(),this._editor.executeEdits(D,[{range:O[0],text:""},{range:O[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let D=[],L=0;for(let k of this._lastBracketsData){let R=k.brackets;R&&(D[L++]={range:R[0],options:k.options},D[L++]={range:R[1],options:k.options})}this._decorations.set(D)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);let D=this._editor.getSelections();if(D.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);let L=this._editor.getModel(),k=L.getVersionId(),R=[];this._lastVersionId===k&&(R=this._lastBracketsData);let O=[],$=0;for(let K=0,j=D.length;K<j;K++){let F=D[K];F.isEmpty()&&(O[$++]=F.getStartPosition())}O.length>1&&O.sort(I.L.compare);let N=[],T=0,C=0,W=R.length;for(let K=0,j=O.length;K<j;K++){let F=O[K];for(;C<W&&R[C].position.isBefore(F);)C++;if(C<W&&R[C].position.equals(F))N[T++]=R[C];else{let H=L.bracketPairs.matchBracket(F,20),z=w._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;H||this._matchBrackets!=="always"||(H=L.bracketPairs.findEnclosingBrackets(F,20),z=w._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),N[T++]=new a(F,H,z)}}this._lastBracketsData=N,this._lastVersionId=k}}w.ID="editor.contrib.bracketMatchingController",w._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=f.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,r.EN)(i),position:v.sh.Center}}),w._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=f.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,u._K)(w.ID,w,1),(0,u.Qr)(b),(0,u.Qr)(c),(0,u.Qr)(l),o.BH.appendMenuItem(o.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:d.NC({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},4367:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(9102),u=t(4314),I=t(3860);class _{constructor(f,d){this._selection=f,this._isMovingLeft=d}getEditOperations(f,d){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;let o=this._selection.startLineNumber,h=this._selection.startColumn,r=this._selection.endColumn;if((!this._isMovingLeft||h!==1)&&(this._isMovingLeft||r!==f.getLineMaxColumn(o)))if(this._isMovingLeft){let i=new u.e(o,h-1,o,h),c=f.getValueInRange(i);d.addEditOperation(i,null),d.addEditOperation(new u.e(o,r,o,r),c)}else{let i=new u.e(o,r,o,r+1),c=f.getValueInRange(i);d.addEditOperation(i,null),d.addEditOperation(new u.e(o,h,o,h),c)}}computeCursorState(f,d){return this._isMovingLeft?new I.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new I.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var A=t(3580);class x extends m.R6{constructor(f,d){super(d),this.left=f}run(f,d){if(!d.hasModel())return;let o=[],h=d.getSelections();for(let r of h)o.push(new _(r,this.left));d.pushUndoStop(),d.executeCommands(this.id,o),d.pushUndoStop()}}(0,m.Qr)(class extends x{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:A.NC("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:B.u.writable})}}),(0,m.Qr)(class extends x{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:A.NC("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:B.u.writable})}})},2102:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(1329),u=t(839),I=t(4314),_=t(9102),A=t(3580);class x extends m.R6{constructor(){super({id:"editor.action.transposeLetters",label:A.NC("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:_.u.writable,kbOpts:{kbExpr:_.u.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(f,d){if(!d.hasModel())return;let o=d.getModel(),h=[],r=d.getSelections();for(let i of r){if(!i.isEmpty())continue;let c=i.startLineNumber,b=i.startColumn,l=o.getLineMaxColumn(c);if(c===1&&(b===1||b===2&&l===2))continue;let a=b===l?i.getPosition():u.o.rightPosition(o,i.getPosition().lineNumber,i.getPosition().column),w=u.o.leftPosition(o,a),E=u.o.leftPosition(o,w),D=o.getValueInRange(I.e.fromPositions(E,w)),L=o.getValueInRange(I.e.fromPositions(w,a)),k=I.e.fromPositions(E,a);h.push(new B.T4(k,L+D))}h.length>0&&(d.pushUndoStop(),d.executeCommands(this.id,h),d.pushUndoStop())}}(0,m.Qr)(x)},5833:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CopyAction:()=>l,CutAction:()=>b,PasteAction:()=>a});var m=t(6268),B=t(1432),u=t(5715),I=t(6830),_=t(1640),A=t(9102),x=t(3580),v=t(4144),f=t(4972),d=t(3983);let o="9_cutcopypaste",h=B.tY||document.queryCommandSupported("cut"),r=B.tY||document.queryCommandSupported("copy"),i=navigator.clipboard!==void 0&&!m.isFirefox||document.queryCommandSupported("paste");function c(D){return D.register(),D}let b=h?c(new I.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:B.tY?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"2_ccp",title:x.NC({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:v.eH.EditorContext,group:o,title:x.NC("actions.clipboard.cutLabel","Cut"),when:A.u.writable,order:1},{menuId:v.eH.CommandPalette,group:"",title:x.NC("actions.clipboard.cutLabel","Cut"),order:1},{menuId:v.eH.SimpleEditorContext,group:o,title:x.NC("actions.clipboard.cutLabel","Cut"),when:A.u.writable,order:1}]})):void 0,l=r?c(new I.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:B.tY?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"2_ccp",title:x.NC({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:v.eH.EditorContext,group:o,title:x.NC("actions.clipboard.copyLabel","Copy"),order:2},{menuId:v.eH.CommandPalette,group:"",title:x.NC("actions.clipboard.copyLabel","Copy"),order:1},{menuId:v.eH.SimpleEditorContext,group:o,title:x.NC("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;v.BH.appendMenuItem(v.eH.MenubarEditMenu,{submenu:v.eH.MenubarCopy,title:{value:x.NC("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),v.BH.appendMenuItem(v.eH.EditorContext,{submenu:v.eH.EditorContextCopy,title:{value:x.NC("copy as","Copy As"),original:"Copy As"},group:o,order:3}),v.BH.appendMenuItem(v.eH.EditorContext,{submenu:v.eH.EditorContextShare,title:{value:x.NC("share","Share"),original:"Share"},group:"11_share",order:-1,when:d.Ao.and(d.Ao.notEquals("resourceScheme","output"),A.u.editorTextFocus)}),v.BH.appendMenuItem(v.eH.EditorTitleContext,{submenu:v.eH.EditorTitleContextShare,title:{value:x.NC("share","Share"),original:"Share"},group:"11_share",order:-1}),v.BH.appendMenuItem(v.eH.ExplorerContext,{submenu:v.eH.ExplorerContextShare,title:{value:x.NC("share","Share"),original:"Share"},group:"11_share",order:-1});let a=i?c(new I.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:B.tY?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:v.eH.MenubarEditMenu,group:"2_ccp",title:x.NC({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:v.eH.EditorContext,group:o,title:x.NC("actions.clipboard.pasteLabel","Paste"),when:A.u.writable,order:4},{menuId:v.eH.CommandPalette,group:"",title:x.NC("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:v.eH.SimpleEditorContext,group:o,title:x.NC("actions.clipboard.pasteLabel","Paste"),when:A.u.writable,order:4}]})):void 0;class w extends I.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:x.NC("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:A.u.textInputFocus,primary:0,weight:100}})}run(L,k){k.hasModel()&&(!k.getOption(35)&&k.getSelection().isEmpty()||(u.RA.forceCopyWithSyntaxHighlighting=!0,k.focus(),document.execCommand("copy"),u.RA.forceCopyWithSyntaxHighlighting=!1))}}function E(D,L){D&&(D.addImplementation(1e4,"code-editor",(k,R)=>{let O=k.get(_.$).getFocusedCodeEditor();if(O&&O.hasTextFocus()){let $=O.getOption(35),N=O.getSelection();return N&&N.isEmpty()&&!$||document.execCommand(L),!0}return!1}),D.addImplementation(0,"generic-dom",(k,R)=>(document.execCommand(L),!0)))}E(b,"cut"),E(l,"copy"),a&&(a.addImplementation(1e4,"code-editor",(D,L)=>{let k=D.get(_.$),R=D.get(f.p),O=k.getFocusedCodeEditor();return!(!O||!O.hasTextFocus())&&(!(!document.execCommand("paste")&&B.$L)||($=void 0,N=void 0,C=function*(){let W=yield R.readText();if(W!==""){let K=u.Nl.INSTANCE.get(W),j=!1,F=null,H=null;K&&(j=O.getOption(35)&&!!K.isFromEmptySelection,F=K.multicursorText!==void 0?K.multicursorText:null,H=K.mode),O.trigger("keyboard","paste",{text:W,pasteOnNewLine:j,multicursorText:F,mode:H})}},new((T=void 0)||(T=Promise))(function(W,K){function j(z){try{H(C.next(z))}catch(J){K(J)}}function F(z){try{H(C.throw(z))}catch(J){K(J)}}function H(z){var J;z.done?W(z.value):(J=z.value,J instanceof T?J:new T(function(oe){oe(J)})).then(j,F)}H((C=C.apply($,N||[])).next())})));var $,N,T,C}),a.addImplementation(0,"generic-dom",(D,L)=>(document.execCommand("paste"),!0))),r&&(0,I.Qr)(w)},5396:(ut,Ie,t)=>{"use strict";t.d(Ie,{Bb:()=>L,LR:()=>K,MN:()=>k,RB:()=>w,TM:()=>O,UX:()=>W,aI:()=>T,cz:()=>E,pZ:()=>D,uH:()=>R});var m=t(9488),B=t(1050),u=t(7301),I=t(5976),_=t(666),A=t(6007),x=t(4314),v=t(3860),f=t(1922),d=t(3733),o=t(6467),h=t(3580),r=t(4565),i=t(9422),c=t(535),b=t(829),l=t(7997),a=function(j,F,H,z){return new(H||(H=Promise))(function(J,oe){function fe(re){try{p(z.next(re))}catch(ne){oe(ne)}}function q(re){try{p(z.throw(re))}catch(ne){oe(ne)}}function p(re){var ne;re.done?J(re.value):(ne=re.value,ne instanceof H?ne:new H(function(ie){ie(ne)})).then(fe,q)}p((z=z.apply(j,F||[])).next())})};let w="editor.action.codeAction",E="editor.action.quickFix",D="editor.action.autoFix",L="editor.action.refactor",k="editor.action.sourceAction",R="editor.action.organizeImports",O="editor.action.fixAll";class $ extends I.JT{static codeActionsPreferredComparator(F,H){return F.isPreferred&&!H.isPreferred?-1:!F.isPreferred&&H.isPreferred?1:0}static codeActionsComparator({action:F},{action:H}){return(0,m.Of)(F.diagnostics)?(0,m.Of)(H.diagnostics)?$.codeActionsPreferredComparator(F,H):-1:(0,m.Of)(H.diagnostics)?1:$.codeActionsPreferredComparator(F,H)}constructor(F,H,z){super(),this.documentation=H,this._register(z),this.allActions=[...F].sort($.codeActionsComparator),this.validActions=this.allActions.filter(({action:J})=>!J.disabled)}get hasAutoFix(){return this.validActions.some(({action:F})=>!!F.kind&&l.yN.QuickFix.contains(new l.yN(F.kind))&&!!F.isPreferred)}}let N={actions:[],documentation:void 0};function T(j,F,H,z,J,oe){var fe;return a(this,void 0,void 0,function*(){let q=z.filter||{},p={only:(fe=q.include)===null||fe===void 0?void 0:fe.value,trigger:z.type},re=new o.YQ(F,oe),ne=function(be,de,U){return be.all(de).filter(ue=>!ue.providedCodeActionKinds||ue.providedCodeActionKinds.some(ve=>(0,l.EU)(U,new l.yN(ve))))}(j,F,q),ie=new I.SL,se=ne.map(be=>a(this,void 0,void 0,function*(){try{J.report(be);let de=yield be.provideCodeActions(F,H,p,re.token);if(de&&ie.add(de),re.token.isCancellationRequested)return N;let U=((de==null?void 0:de.actions)||[]).filter(ve=>ve&&(0,l.Yl)(q,ve)),ue=function(ve,X,ye){if(!ve.documentation)return;let Ce=ve.documentation.map(Ee=>({kind:new l.yN(Ee.kind),command:Ee.command}));if(ye){let Ee;for(let Ae of Ce)Ae.kind.contains(ye)&&(Ee?Ee.kind.contains(Ae.kind)&&(Ee=Ae):Ee=Ae);if(Ee)return Ee==null?void 0:Ee.command}for(let Ee of X)if(Ee.kind){for(let Ae of Ce)if(Ae.kind.contains(new l.yN(Ee.kind)))return Ae.command}}(be,U,q.include);return{actions:U.map(ve=>new l.bA(ve,be)),documentation:ue}}catch(de){if((0,u.n2)(de))throw de;return(0,u.Cp)(de),N}})),ce=j.onDidChange(()=>{let be=j.all(F);(0,m.fS)(be,ne)||re.cancel()});try{let be=yield Promise.all(se),de=be.map(ue=>ue.actions).flat(),U=[...(0,m.kX)(be.map(ue=>ue.documentation)),...C(j,F,z,de)];return new $(de,U,ie)}finally{ce.dispose(),re.dispose()}})}function*C(j,F,H,z){var J,oe,fe;if(F&&z.length)for(let q of j.all(F))q._getAdditionalMenuItems&&(yield*(J=q._getAdditionalMenuItems)===null||J===void 0?void 0:J.call(q,{trigger:H.type,only:(fe=(oe=H.filter)===null||oe===void 0?void 0:oe.include)===null||fe===void 0?void 0:fe.value},z.map(p=>p.action)))}var W;function K(j,F,H,z,J=B.T.None){var oe;return a(this,void 0,void 0,function*(){let fe=j.get(A.vu),q=j.get(r.H),p=j.get(b.b),re=j.get(i.lT);if(p.publicLog2("codeAction.applyCodeAction",{codeActionTitle:F.action.title,codeActionKind:F.action.kind,codeActionIsPreferred:!!F.action.isPreferred,reason:H}),yield F.resolve(J),!J.isCancellationRequested){if(!((oe=F.action.edit)===null||oe===void 0)&&oe.edits.length&&!(yield fe.apply(F.action.edit,{editor:z==null?void 0:z.editor,label:F.action.title,quotableLabel:F.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:H!==W.OnSave,showPreview:z==null?void 0:z.preview})).isApplied)return;if(F.action.command)try{yield q.executeCommand(F.action.command.id,...F.action.command.arguments||[])}catch(ne){let ie=function(se){return typeof se=="string"?se:se instanceof Error&&typeof se.message=="string"?se.message:void 0}(ne);re.error(typeof ie=="string"?ie:h.NC("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}})}(function(j){j.OnSave="onSave",j.FromProblemsView="fromProblemsView",j.FromCodeActions="fromCodeActions"})(W||(W={})),r.P.registerCommand("_executeCodeActionProvider",function(j,F,H,z,J){return a(this,void 0,void 0,function*(){if(!(F instanceof _.o))throw(0,u.b1)();let{codeActionProvider:oe}=j.get(f.p),fe=j.get(d.q).getModel(F);if(!fe)throw(0,u.b1)();let q=v.Y.isISelection(H)?v.Y.liftSelection(H):x.e.isIRange(H)?fe.validateRange(H):void 0;if(!q)throw(0,u.b1)();let p=typeof z=="string"?new l.yN(z):void 0,re=yield T(oe,fe,q,{type:1,triggerAction:l.aQ.Default,filter:{includeSourceActions:!0,include:p}},c.Ex.None,B.T.None),ne=[],ie=Math.min(re.validActions.length,typeof J=="number"?J:0);for(let se=0;se<ie;se++)ne.push(re.validActions[se].resolve(B.T.None));try{return yield Promise.all(ne),re.validActions.map(se=>se.action)}finally{setTimeout(()=>re.dispose(),100)}})})},1925:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(800),u=t(7295),I=t(9102),_=t(5396),A=t(3580),x=t(3983),v=t(7997),f=t(792),d=t(7016);function o(R){return x.Ao.regex(d.fj.keys()[0],new RegExp("(\\s|^)"+(0,u.ec)(R.value)+"\\b"))}let h={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:A.NC("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:A.NC("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[A.NC("args.schema.apply.first","Always apply the first returned code action."),A.NC("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),A.NC("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:A.NC("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function r(R,O,$,N,T=v.aQ.Default){if(R.hasModel()){let C=f.G.get(R);C==null||C.manualTriggerAtCurrentPosition(O,T,$,N)}}class i extends m.R6{constructor(){super({id:_.cz,label:A.NC("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:x.Ao.and(I.u.writable,I.u.hasCodeActionsProvider),kbOpts:{kbExpr:I.u.textInputFocus,primary:2137,weight:100}})}run(O,$){return r($,A.NC("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,v.aQ.QuickFix)}}class c extends m._l{constructor(){super({id:_.RB,precondition:x.Ao.and(I.u.writable,I.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:h}]}})}runEditorCommand(O,$,N){let T=v.wZ.fromUser(N,{kind:v.yN.Empty,apply:"ifSingle"});return r($,typeof(N==null?void 0:N.kind)=="string"?T.preferred?A.NC("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",N.kind):A.NC("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",N.kind):T.preferred?A.NC("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):A.NC("editor.action.codeAction.noneMessage","No code actions available"),{include:T.kind,includeSourceActions:!0,onlyIncludePreferredActions:T.preferred},T.apply)}}class b extends m.R6{constructor(){super({id:_.Bb,label:A.NC("refactor.label","Refactor..."),alias:"Refactor...",precondition:x.Ao.and(I.u.writable,I.u.hasCodeActionsProvider),kbOpts:{kbExpr:I.u.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:x.Ao.and(I.u.writable,o(v.yN.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:h}]}})}run(O,$,N){let T=v.wZ.fromUser(N,{kind:v.yN.Refactor,apply:"never"});return r($,typeof(N==null?void 0:N.kind)=="string"?T.preferred?A.NC("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",N.kind):A.NC("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",N.kind):T.preferred?A.NC("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):A.NC("editor.action.refactor.noneMessage","No refactorings available"),{include:v.yN.Refactor.contains(T.kind)?T.kind:v.yN.None,onlyIncludePreferredActions:T.preferred},T.apply,v.aQ.Refactor)}}class l extends m.R6{constructor(){super({id:_.MN,label:A.NC("source.label","Source Action..."),alias:"Source Action...",precondition:x.Ao.and(I.u.writable,I.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:x.Ao.and(I.u.writable,o(v.yN.Source))},description:{description:"Source Action...",args:[{name:"args",schema:h}]}})}run(O,$,N){let T=v.wZ.fromUser(N,{kind:v.yN.Source,apply:"never"});return r($,typeof(N==null?void 0:N.kind)=="string"?T.preferred?A.NC("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",N.kind):A.NC("editor.action.source.noneMessage.kind","No source actions for '{0}' available",N.kind):T.preferred?A.NC("editor.action.source.noneMessage.preferred","No preferred source actions available"):A.NC("editor.action.source.noneMessage","No source actions available"),{include:v.yN.Source.contains(T.kind)?T.kind:v.yN.None,includeSourceActions:!0,onlyIncludePreferredActions:T.preferred},T.apply,v.aQ.SourceAction)}}class a extends m.R6{constructor(){super({id:_.uH,label:A.NC("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:x.Ao.and(I.u.writable,o(v.yN.SourceOrganizeImports)),kbOpts:{kbExpr:I.u.textInputFocus,primary:1581,weight:100}})}run(O,$){return r($,A.NC("editor.action.organize.noneMessage","No organize imports action available"),{include:v.yN.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",v.aQ.OrganizeImports)}}class w extends m.R6{constructor(){super({id:_.TM,label:A.NC("fixAll.label","Fix All"),alias:"Fix All",precondition:x.Ao.and(I.u.writable,o(v.yN.SourceFixAll))})}run(O,$){return r($,A.NC("fixAll.noneMessage","No fix all action available"),{include:v.yN.SourceFixAll,includeSourceActions:!0},"ifSingle",v.aQ.FixAll)}}class E extends m.R6{constructor(){super({id:_.pZ,label:A.NC("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:x.Ao.and(I.u.writable,o(v.yN.QuickFix)),kbOpts:{kbExpr:I.u.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(O,$){return r($,A.NC("editor.action.autoFix.noneMessage","No auto fixes available"),{include:v.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",v.aQ.AutoFix)}}var D=t(6490),L=t(3193),k=t(9872);(0,m._K)(f.G.ID,f.G,3),(0,m._K)(D.f.ID,D.f,4),(0,m.Qr)(i),(0,m.Qr)(b),(0,m.Qr)(l),(0,m.Qr)(a),(0,m.Qr)(E),(0,m.Qr)(w),(0,m.fK)(new c),k.B.as(L.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},B.wk),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:A.NC("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}))},792:(ut,Ie,t)=>{"use strict";t.d(Ie,{G:()=>Fe});var m=t(9579),B=t(5976),u=t(1922),I=t(5396),_=t(5321),A=t(7301),x=t(187),v=t(7997),f=t(1847);let d=class Pl{constructor(te){this.keybindingService=te}getResolver(){let te=new m.o(()=>this.keybindingService.getKeybindings().filter(Le=>Pl.codeActionCommands.indexOf(Le.command)>=0).filter(Le=>Le.resolvedKeybinding).map(Le=>{let ke=Le.commandArgs;return Le.command===I.uH?ke={kind:v.yN.SourceOrganizeImports.value}:Le.command===I.TM&&(ke={kind:v.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:Le.resolvedKeybinding},v.wZ.fromUser(ke,{kind:v.yN.None,apply:"never"}))}));return Le=>{if(Le.kind){let ke=this.bestKeybindingForCodeAction(Le,te.value);return ke==null?void 0:ke.resolvedKeybinding}}}bestKeybindingForCodeAction(te,Le){if(!te.kind)return;let ke=new v.yN(te.kind);return Le.filter(le=>le.kind.contains(ke)).filter(le=>!le.preferred||te.isPreferred).reduceRight((le,ee)=>le?le.kind.contains(ee.kind)?ee:le:ee,void 0)}};var o,h;d.codeActionCommands=[I.Bb,I.RB,I.MN,I.uH,I.TM],d=function(_e,te,Le,ke){var le,ee=arguments.length,me=ee<3?te:ke===null?ke=Object.getOwnPropertyDescriptor(te,Le):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(_e,te,Le,ke);else for(var xe=_e.length-1;xe>=0;xe--)(le=_e[xe])&&(me=(ee<3?le(me):ee>3?le(te,Le,me):le(te,Le))||me);return ee>3&&me&&Object.defineProperty(te,Le,me),me}([(o=0,h=f.d,function(_e,te){h(_e,te,o)})],d);var r=t(3046),i=(t(1713),t(3580));let c=Object.freeze({kind:v.yN.Empty,title:(0,i.NC)("codeAction.widget.id.more","More Actions...")}),b=Object.freeze([{kind:v.yN.QuickFix,title:(0,i.NC)("codeAction.widget.id.quickfix","Quick Fix...")},{kind:v.yN.RefactorExtract,title:(0,i.NC)("codeAction.widget.id.extract","Extract..."),icon:r.l.wrench},{kind:v.yN.RefactorInline,title:(0,i.NC)("codeAction.widget.id.inline","Inline..."),icon:r.l.wrench},{kind:v.yN.RefactorRewrite,title:(0,i.NC)("codeAction.widget.id.convert","Rewrite..."),icon:r.l.wrench},{kind:v.yN.RefactorMove,title:(0,i.NC)("codeAction.widget.id.move","Move..."),icon:r.l.wrench},{kind:v.yN.SurroundWith,title:(0,i.NC)("codeAction.widget.id.surround","Surround With..."),icon:r.l.symbolSnippet},{kind:v.yN.Source,title:(0,i.NC)("codeAction.widget.id.source","Source Action..."),icon:r.l.symbolFile},c]);var l=t(7753),a=t(317),w=t(5496),E=t(3799),D=t(1432),L=t(5670),k=t(5606),R=t(6253),O=t(3910),$=function(_e,te,Le,ke){var le,ee=arguments.length,me=ee<3?te:ke===null?ke=Object.getOwnPropertyDescriptor(te,Le):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(_e,te,Le,ke);else for(var xe=_e.length-1;xe>=0;xe--)(le=_e[xe])&&(me=(ee<3?le(me):ee>3?le(te,Le,me):le(te,Le))||me);return ee>3&&me&&Object.defineProperty(te,Le,me),me},N=function(_e,te){return function(Le,ke){te(Le,ke,_e)}};let T="acceptSelectedCodeAction",C="previewSelectedCodeAction";class W{get templateId(){return"header"}renderTemplate(te){te.classList.add("group-header");let Le=document.createElement("span");return te.append(Le),{container:te,text:Le}}renderElement(te,Le,ke){var le,ee;ke.text.textContent=(ee=(le=te.group)===null||le===void 0?void 0:le.title)!==null&&ee!==void 0?ee:""}disposeTemplate(te){}}let K=class{get templateId(){return"action"}constructor(_e,te){this._supportsPreview=_e,this._keybindingService=te}renderTemplate(_e){_e.classList.add(this.templateId);let te=document.createElement("div");te.className="icon",_e.append(te);let Le=document.createElement("span");return Le.className="title",_e.append(Le),{container:_e,icon:te,text:Le,keybinding:new w.e(_e,D.OS)}}renderElement(_e,te,Le){var ke,le,ee;if(!((ke=_e.group)===null||ke===void 0)&&ke.icon?(Le.icon.className=L.k.asClassName(_e.group.icon),_e.group.icon.color&&(Le.icon.style.color=(0,O.n_1)(_e.group.icon.color.id))):(Le.icon.className=L.k.asClassName(r.l.lightBulb),Le.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!_e.item||!_e.label)return;Le.text.textContent=z(_e.label),Le.keybinding.set(_e.keybinding),_.iJ(!!_e.keybinding,Le.keybinding.element);let me=(le=this._keybindingService.lookupKeybinding(T))===null||le===void 0?void 0:le.getLabel(),xe=(ee=this._keybindingService.lookupKeybinding(C))===null||ee===void 0?void 0:ee.getLabel();Le.container.classList.toggle("option-disabled",_e.disabled),_e.disabled?Le.container.title=_e.label:me&&xe?this._supportsPreview?Le.container.title=(0,i.NC)({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to apply, Shift+F2 to preview"']},"{0} to apply, {1} to preview",me,xe):Le.container.title=(0,i.NC)({key:"label",comment:['placeholder is a keybinding, e.g "F2 to apply"']},"{0} to apply",me):Le.container.title=""}disposeTemplate(_e){}};K=$([N(1,f.d)],K);class j extends UIEvent{constructor(){super("acceptSelectedAction")}}class F extends UIEvent{constructor(){super("previewSelectedAction")}}let H=class extends B.JT{constructor(_e,te,Le,ke,le,ee){super(),this._delegate=ke,this._contextViewService=le,this._keybindingService=ee,this._actionLineHeight=24,this._headerLineHeight=26,this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");let me={getHeight:xe=>xe.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:xe=>xe.kind};this._list=this._register(new E.aV(_e,this.domNode,me,[new K(te,this._keybindingService),new W],{keyboardSupport:!1,accessibilityProvider:{getAriaLabel:xe=>{if(xe.kind==="action"){let We=xe.label?z(xe==null?void 0:xe.label):"";return xe.disabled&&(We=(0,i.NC)({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",We,xe.disabled)),We}return null},getWidgetAriaLabel:()=>(0,i.NC)({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:xe=>xe.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(R.O2),this._register(this._list.onMouseClick(xe=>this.onListClick(xe))),this._register(this._list.onMouseOver(xe=>this.onListHover(xe))),this._register(this._list.onDidChangeFocus(()=>this._list.domFocus())),this._register(this._list.onDidChangeSelection(xe=>this.onListSelection(xe))),this._allMenuItems=Le,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(_e){return!_e.disabled&&_e.kind==="action"}hide(_e){this._delegate.onHide(_e),this._contextViewService.hideContextView()}layout(_e){let te=this._allMenuItems.filter(me=>me.kind==="header").length,Le=this._allMenuItems.length*this._actionLineHeight+te*this._headerLineHeight-te*this._actionLineHeight;this._list.layout(Le);let ke=this._allMenuItems.map((me,xe)=>{let We=document.getElementById(this._list.getElementID(xe));if(We){We.style.width="auto";let Ve=We.getBoundingClientRect().width;return We.style.width="",Ve}return 0}),le=Math.max(...ke,_e),ee=Math.min(Le,.7*document.body.clientHeight);return this._list.layout(ee,le),this.domNode.style.height=`${ee}px`,this._list.domFocus(),le}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(_e){let te=this._list.getFocus();if(te.length===0)return;let Le=te[0],ke=this._list.element(Le);if(!this.focusCondition(ke))return;let le=_e?new F:new j;this._list.setSelection([Le],le)}onListSelection(_e){if(!_e.elements.length)return;let te=_e.elements[0];te.item&&this.focusCondition(te)?this._delegate.onSelect(te.item,_e.browserEvent instanceof F):this._list.setSelection([])}onListHover(_e){this._list.setFocus(typeof _e.index=="number"?[_e.index]:[])}onListClick(_e){_e.element&&this.focusCondition(_e.element)&&this._list.setFocus([])}};function z(_e){return _e.replace(/\r\n|\r|\n/g," ")}H=$([N(4,k.u),N(5,f.d)],H);var J=t(4144),oe=t(3983),fe=t(5026),q=t(2065),p=function(_e,te){return function(Le,ke){te(Le,ke,_e)}};let re={Visible:new oe.uy("codeActionMenuVisible",!1,(0,i.NC)("codeActionMenuVisible","Whether the action widget list is visible"))},ne=(0,q.yh)("actionWidgetService"),ie=class extends B.JT{get isVisible(){return re.Visible.getValue(this._contextKeyService)||!1}constructor(_e,te,Le){super(),this._contextViewService=_e,this._contextKeyService=te,this._instantiationService=Le,this._list=this._register(new B.XK)}show(_e,te,Le,ke,le,ee,me){let xe=re.Visible.bindTo(this._contextKeyService),We=this._instantiationService.createInstance(H,_e,te,Le,ke);this._contextViewService.showContextView({getAnchor:()=>le,render:Ve=>(xe.set(!0),this._renderWidget(Ve,We,me!=null?me:[])),onHide:Ve=>{xe.reset(),this._onWidgetClosed(Ve)}},ee,!1)}acceptSelected(_e){var te;(te=this._list.value)===null||te===void 0||te.acceptSelected(_e)}focusPrevious(){var _e,te;(te=(_e=this._list)===null||_e===void 0?void 0:_e.value)===null||te===void 0||te.focusPrevious()}focusNext(){var _e,te;(te=(_e=this._list)===null||_e===void 0?void 0:_e.value)===null||te===void 0||te.focusNext()}hide(){var _e;(_e=this._list.value)===null||_e===void 0||_e.hide(),this._list.clear()}_renderWidget(_e,te,Le){var ke;let le=document.createElement("div");if(le.classList.add("action-widget"),_e.appendChild(le),this._list.value=te,!this._list.value)throw new Error("List has no value");le.appendChild(this._list.value.domNode);let ee=new B.SL,me=document.createElement("div"),xe=_e.appendChild(me);xe.classList.add("context-view-block"),ee.add(_.nm(xe,_.tw.MOUSE_DOWN,bt=>bt.stopPropagation()));let We=document.createElement("div"),Ve=_e.appendChild(We);Ve.classList.add("context-view-pointerBlock"),ee.add(_.nm(Ve,_.tw.POINTER_MOVE,()=>Ve.remove())),ee.add(_.nm(Ve,_.tw.MOUSE_DOWN,()=>Ve.remove()));let Ye=0;if(Le.length){let bt=this._createActionBar(".action-widget-action-bar",Le);bt&&(le.appendChild(bt.getContainer().parentElement),ee.add(bt),Ye=bt.getContainer().offsetWidth)}let tt=(ke=this._list.value)===null||ke===void 0?void 0:ke.layout(Ye);le.style.width=`${tt}px`;let Qe=ee.add(_.go(_e));return ee.add(Qe.onDidBlur(()=>this.hide())),ee}_createActionBar(_e,te){if(!te.length)return;let Le=_.$(_e),ke=new a.o(Le);return ke.push(te,{icon:!1,label:!0}),ke}_onWidgetClosed(_e){var te;(te=this._list.value)===null||te===void 0||te.hide(_e)}};ie=function(_e,te,Le,ke){var le,ee=arguments.length,me=ee<3?te:ke===null?ke=Object.getOwnPropertyDescriptor(te,Le):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(_e,te,Le,ke);else for(var xe=_e.length-1;xe>=0;xe--)(le=_e[xe])&&(me=(ee<3?le(me):ee>3?le(te,Le,me):le(te,Le))||me);return ee>3&&me&&Object.defineProperty(te,Le,me),me}([p(0,k.u),p(1,oe.i6),p(2,q.TG)],ie),(0,fe.z)(ne,ie,1);let se=1100;(0,J.r1)(class extends J.Ke{constructor(){super({id:"hideCodeActionWidget",title:{value:(0,i.NC)("hideCodeActionWidget.title","Hide action widget"),original:"Hide action widget"},precondition:re.Visible,keybinding:{weight:se,primary:9,secondary:[1033]}})}run(_e){_e.get(ne).hide()}}),(0,J.r1)(class extends J.Ke{constructor(){super({id:"selectPrevCodeAction",title:{value:(0,i.NC)("selectPrevCodeAction.title","Select previous action"),original:"Select previous action"},precondition:re.Visible,keybinding:{weight:se,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(_e){let te=_e.get(ne);te instanceof ie&&te.focusPrevious()}}),(0,J.r1)(class extends J.Ke{constructor(){super({id:"selectNextCodeAction",title:{value:(0,i.NC)("selectNextCodeAction.title","Select next action"),original:"Select next action"},precondition:re.Visible,keybinding:{weight:se,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(_e){let te=_e.get(ne);te instanceof ie&&te.focusNext()}}),(0,J.r1)(class extends J.Ke{constructor(){super({id:T,title:{value:(0,i.NC)("acceptSelected.title","Accept selected action"),original:"Accept selected action"},precondition:re.Visible,keybinding:{weight:se,primary:3,secondary:[2137]}})}run(_e){let te=_e.get(ne);te instanceof ie&&te.acceptSelected()}}),(0,J.r1)(class extends J.Ke{constructor(){super({id:C,title:{value:(0,i.NC)("previewSelected.title","Preview selected action"),original:"Preview selected action"},precondition:re.Visible,keybinding:{weight:se,primary:2051}})}run(_e){let te=_e.get(ne);te instanceof ie&&te.acceptSelected(!0)}});var ce,be=t(4565),de=t(3108),U=t(6490),ue=function(_e,te){return function(Le,ke){te(Le,ke,_e)}},ve=function(_e,te,Le,ke){return new(Le||(Le=Promise))(function(le,ee){function me(Ve){try{We(ke.next(Ve))}catch(Ye){ee(Ye)}}function xe(Ve){try{We(ke.throw(Ve))}catch(Ye){ee(Ye)}}function We(Ve){var Ye;Ve.done?le(Ve.value):(Ye=Ve.value,Ye instanceof Le?Ye:new Le(function(tt){tt(Ye)})).then(me,xe)}We((ke=ke.apply(_e,te||[])).next())})};let X=class extends B.JT{constructor(_e,te,Le,ke,le,ee){super(),this._editor=_e,this.delegate=te,this._configurationService=ke,this._actionWidgetService=le,this._commandService=ee,this._activeCodeActions=this._register(new B.XK),ce.set(this,!1),this._showDisabled=!1,this._lightBulbWidget=new m.o(()=>{let me=this._editor.getContribution(U.f.ID);return me&&this._register(me.onClick(xe=>this.showCodeActionList(xe.actions,xe,{includeDisabledActions:!1,fromLightbulb:!0}))),me}),this._resolver=Le.createInstance(d),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){(function(_e,te,Le,ke,le){if(ke==="m")throw new TypeError("Private method is not writable");if(ke==="a"&&!le)throw new TypeError("Private accessor was defined without a setter");if(typeof te=="function"?_e!==te||!le:!te.has(_e))throw new TypeError("Cannot write private member to an object whose class did not declare it");ke==="a"?le.call(_e,Le):le?le.value=Le:te.set(_e,Le)})(this,ce,!0,"f"),super.dispose()}update(_e){var te,Le,ke,le,ee,me,xe;return ve(this,void 0,void 0,function*(){if(_e.type!==1)return void((te=this._lightBulbWidget.rawValue)===null||te===void 0||te.hide());let We;try{We=yield _e.actions}catch(Ve){return void(0,A.dL)(Ve)}if(!function(Ve,Ye,tt,Qe){if(tt==="a"&&!Qe)throw new TypeError("Private accessor was defined without a getter");if(typeof Ye=="function"?Ve!==Ye||!Qe:!Ye.has(Ve))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?Qe:tt==="a"?Qe.call(Ve):Qe?Qe.value:Ye.get(Ve)}(this,ce,"f"))if((Le=this._lightBulbWidget.value)===null||Le===void 0||Le.update(We,_e.trigger,_e.position),_e.trigger.type===1){if(!((ke=_e.trigger.filter)===null||ke===void 0)&&ke.include){let Ye=this.tryGetValidActionToApply(_e.trigger,We);if(Ye){try{(le=this._lightBulbWidget.value)===null||le===void 0||le.hide(),yield this.delegate.applyCodeAction(Ye,!1,!1)}finally{We.dispose()}return}if(_e.trigger.context){let tt=this.getInvalidActionThatWouldHaveBeenApplied(_e.trigger,We);if(tt&&tt.action.disabled)return(ee=l.O.get(this._editor))===null||ee===void 0||ee.showMessage(tt.action.disabled,_e.trigger.context.position),void We.dispose()}}let Ve=!!(!((me=_e.trigger.filter)===null||me===void 0)&&me.include);if(_e.trigger.context&&(!We.allActions.length||!Ve&&!We.validActions.length))return(xe=l.O.get(this._editor))===null||xe===void 0||xe.showMessage(_e.trigger.context.notAvailableMessage,_e.trigger.context.position),this._activeCodeActions.value=We,void We.dispose();this._activeCodeActions.value=We,this.showCodeActionList(We,this.toCoords(_e.position),{includeDisabledActions:Ve,fromLightbulb:!1})}else this._actionWidgetService.isVisible?We.dispose():this._activeCodeActions.value=We})}getInvalidActionThatWouldHaveBeenApplied(_e,te){if(te.allActions.length)return _e.autoApply==="first"&&te.validActions.length===0||_e.autoApply==="ifSingle"&&te.allActions.length===1?te.allActions.find(({action:Le})=>Le.disabled):void 0}tryGetValidActionToApply(_e,te){if(te.validActions.length)return _e.autoApply==="first"&&te.validActions.length>0||_e.autoApply==="ifSingle"&&te.validActions.length===1?te.validActions[0]:void 0}showCodeActionList(_e,te,Le){return ve(this,void 0,void 0,function*(){let ke=this._editor.getDomNode();if(!ke)return;let le=Le.includeDisabledActions&&(this._showDisabled||_e.validActions.length===0)?_e.allActions:_e.validActions;if(!le.length)return;let ee=x.L.isIPosition(te)?this.toCoords(te):te,me={onSelect:(xe,We)=>ve(this,void 0,void 0,function*(){this.delegate.applyCodeAction(xe,!0,!!We),this._actionWidgetService.hide()}),onHide:()=>{var xe;(xe=this._editor)===null||xe===void 0||xe.focus()}};this._actionWidgetService.show("codeActionWidget",!0,function(xe,We,Ve){if(!We)return xe.map(Qe=>({kind:"action",item:Qe,group:c,disabled:!!Qe.action.disabled,label:Qe.action.disabled||Qe.action.title}));let Ye=b.map(Qe=>({group:Qe,actions:[]}));for(let Qe of xe){let bt=Qe.action.kind?new v.yN(Qe.action.kind):v.yN.None;for(let ht of Ye)if(ht.group.kind.contains(bt)){ht.actions.push(Qe);break}}let tt=[];for(let Qe of Ye)if(Qe.actions.length){tt.push({kind:"header",group:Qe.group});for(let bt of Qe.actions)tt.push({kind:"action",item:bt,group:Qe.group,label:bt.action.title,disabled:!!bt.action.disabled,keybinding:Ve(bt.action)})}return tt}(le,this._shouldShowHeaders(),this._resolver.getResolver()),me,ee,ke,this._getActionBarActions(_e,te,Le))})}toCoords(_e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(_e,1),this._editor.render();let te=this._editor.getScrolledVisiblePosition(_e),Le=(0,_.i)(this._editor.getDomNode());return{x:Le.left+te.left,y:Le.top+te.top+te.height}}_shouldShowHeaders(){var _e;let te=(_e=this._editor)===null||_e===void 0?void 0:_e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:te==null?void 0:te.uri})}_getActionBarActions(_e,te,Le){if(Le.fromLightbulb)return[];let ke=_e.documentation.map(le=>{var ee;return{id:le.id,label:le.title,tooltip:(ee=le.tooltip)!==null&&ee!==void 0?ee:"",class:void 0,enabled:!0,run:()=>{var me;return this._commandService.executeCommand(le.id,...(me=le.arguments)!==null&&me!==void 0?me:[])}}});return Le.includeDisabledActions&&_e.validActions.length>0&&_e.allActions.length!==_e.validActions.length&&ke.push(this._showDisabled?{id:"hideMoreActions",label:(0,i.NC)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(_e,te,Le))}:{id:"showMoreActions",label:(0,i.NC)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(_e,te,Le))}),ke}};ce=new WeakMap,X=function(_e,te,Le,ke){var le,ee=arguments.length,me=ee<3?te:ke===null?ke=Object.getOwnPropertyDescriptor(te,Le):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(_e,te,Le,ke);else for(var xe=_e.length-1;xe>=0;xe--)(le=_e[xe])&&(me=(ee<3?le(me):ee>3?le(te,Le,me):le(te,Le))||me);return ee>3&&me&&Object.defineProperty(te,Le,me),me}([ue(2,q.TG),ue(3,de.Ui),ue(4,ne),ue(5,be.H)],X);var ye=t(8674),Ce=t(535),Ee=t(7016),Ae=function(_e,te){return function(Le,ke){te(Le,ke,_e)}};let Fe=class Fl extends B.JT{static get(te){return te.getContribution(Fl.ID)}constructor(te,Le,ke,le,ee,me){super(),this._instantiationService=ee,this._editor=te,this._model=this._register(new Ee.Jt(this._editor,me.codeActionProvider,Le,ke,le)),this._register(this._model.onDidChangeState(xe=>this._ui.value.update(xe))),this._ui=new m.o(()=>this._register(ee.createInstance(X,te,{applyCodeAction:(xe,We,Ve)=>{return Ye=this,tt=void 0,bt=function*(){try{yield this._applyCodeAction(xe,Ve)}finally{We&&this._trigger({type:2,triggerAction:v.aQ.QuickFix,filter:{}})}},new((Qe=void 0)||(Qe=Promise))(function(ht,xt){function Qt(Lt){try{mi(bt.next(Lt))}catch(ct){xt(ct)}}function At(Lt){try{mi(bt.throw(Lt))}catch(ct){xt(ct)}}function mi(Lt){var ct;Lt.done?ht(Lt.value):(ct=Lt.value,ct instanceof Qe?ct:new Qe(function(Kt){Kt(ct)})).then(Qt,At)}mi((bt=bt.apply(Ye,tt||[])).next())});var Ye,tt,Qe,bt}})))}showCodeActions(te,Le,ke){return this._ui.value.showCodeActionList(Le,ke,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(te,Le,ke,le){var ee;if(!this._editor.hasModel())return;(ee=l.O.get(this._editor))===null||ee===void 0||ee.closeMessage();let me=this._editor.getPosition();this._trigger({type:1,triggerAction:Le,filter:ke,autoApply:le,context:{notAvailableMessage:te,position:me}})}_trigger(te){return this._model.trigger(te)}_applyCodeAction(te,Le){return this._instantiationService.invokeFunction(I.LR,te,I.UX.FromCodeActions,{preview:Le,editor:this._editor})}};Fe.ID="editor.contrib.codeActionController",Fe=function(_e,te,Le,ke){var le,ee=arguments.length,me=ee<3?te:ke===null?ke=Object.getOwnPropertyDescriptor(te,Le):ke;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")me=Reflect.decorate(_e,te,Le,ke);else for(var xe=_e.length-1;xe>=0;xe--)(le=_e[xe])&&(me=(ee<3?le(me):ee>3?le(te,Le,me):le(te,Le))||me);return ee>3&&me&&Object.defineProperty(te,Le,me),me}([Ae(1,ye.lT),Ae(2,oe.i6),Ae(3,Ce.ek),Ae(4,q.TG),Ae(5,u.p)],Fe)},7016:(ut,Ie,t)=>{"use strict";t.d(Ie,{Jt:()=>b,fj:()=>h});var m,B=t(5393),u=t(7301),I=t(4669),_=t(5976),A=t(5935),x=t(3983),v=t(535),f=t(7997),d=t(5396),o=function(l,a,w,E){if(w==="a"&&!E)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?l!==a||!E:!a.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return w==="m"?E:w==="a"?E.call(l):E?E.value:a.get(l)};let h=new x.uy("supportedCodeAction","");class r extends _.JT{constructor(a,w,E,D=250){super(),this._editor=a,this._markerService=w,this._signalChange=E,this._delay=D,this._autoTriggerTimer=this._register(new B._F),this._register(this._markerService.onMarkerChanged(L=>this._onMarkerChanges(L))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(a){let w=this._getRangeOfSelectionUnlessWhitespaceEnclosed(a);this._signalChange(w?{trigger:a,selection:w}:void 0)}_onMarkerChanges(a){let w=this._editor.getModel();w&&a.some(E=>(0,A.Xy)(E,w.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:f.aQ.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(a){if(!this._editor.hasModel())return;let w=this._editor.getModel(),E=this._editor.getSelection();if(E.isEmpty()&&a.type===2){let{lineNumber:D,column:L}=E.getPosition(),k=w.getLineContent(D);if(k.length===0)return;if(L===1){if(/\s/.test(k[0]))return}else if(L===w.getLineMaxColumn(D)){if(/\s/.test(k[k.length-1]))return}else if(/\s/.test(k[L-2])&&/\s/.test(k[L-1]))return}return E}}var i;(function(l){l.Empty={type:0},l.Triggered=class{constructor(a,w,E){this.trigger=a,this.position=w,this._cancellablePromise=E,this.type=1,this.actions=E.catch(D=>{if((0,u.n2)(D))return c;throw D})}cancel(){this._cancellablePromise.cancel()}}})(i||(i={}));let c=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1});class b extends _.JT{constructor(a,w,E,D,L){super(),this._editor=a,this._registry=w,this._markerService=E,this._progressService=L,this._codeActionOracle=this._register(new _.XK),this._state=i.Empty,this._onDidChangeState=this._register(new I.Q5),this.onDidChangeState=this._onDidChangeState.event,m.set(this,!1),this._supportedCodeActions=h.bindTo(D),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){o(this,m,"f")||(function(a,w,E,D,L){if(D==="m")throw new TypeError("Private method is not writable");if(D==="a"&&!L)throw new TypeError("Private accessor was defined without a setter");if(typeof w=="function"?a!==w||!L:!w.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");D==="a"?L.call(a,E):L?L.value=E:w.set(a,E)}(this,m,!0,"f"),super.dispose(),this.setState(i.Empty,!0))}_update(){if(o(this,m,"f"))return;this._codeActionOracle.value=void 0,this.setState(i.Empty);let a=this._editor.getModel();if(a&&this._registry.has(a)&&!this._editor.getOption(87)){let w=this._registry.all(a).flatMap(E=>{var D;return(D=E.providedCodeActionKinds)!==null&&D!==void 0?D:[]});this._supportedCodeActions.set(w.join(" ")),this._codeActionOracle.value=new r(this._editor,this._markerService,E=>{var D;if(!E)return void this.setState(i.Empty);let L=(0,B.PG)(k=>(0,d.aI)(this._registry,a,E.selection,E.trigger,v.Ex.None,k));E.trigger.type===1&&((D=this._progressService)===null||D===void 0||D.showWhile(L,250)),this.setState(new i.Triggered(E.trigger,E.selection.getStartPosition(),L))},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:f.aQ.Default})}else this._supportedCodeActions.reset()}trigger(a){var w;(w=this._codeActionOracle.value)===null||w===void 0||w.trigger(a)}setState(a,w){a!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=a,w||o(this,m,"f")||this._onDidChangeState.fire(a))}}m=new WeakMap},6490:(ut,Ie,t)=>{"use strict";t.d(Ie,{f:()=>r});var m,B=t(5321),u=t(553),I=t(3046),_=t(4669),A=t(5976),x=t(5670),v=t(8401),f=t(9616),d=t(5396),o=t(3580),h=t(1847);(function(b){b.Hidden={type:0},b.Showing=class{constructor(l,a,w,E){this.actions=l,this.trigger=a,this.editorPosition=w,this.widgetPosition=E,this.type=1}}})(m||(m={}));let r=class Bl extends A.JT{constructor(l,a){super(),this._editor=l,this._onClick=this._register(new _.Q5),this.onClick=this._onClick.event,this._state=m.Hidden,this._domNode=B.$("div.lightBulbWidget"),this._register(u.o.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(w=>{let E=this._editor.getModel();(this.state.type!==1||!E||this.state.editorPosition.lineNumber>=E.getLineCount())&&this.hide()})),this._register(B.GQ(this._domNode,w=>{if(this.state.type!==1)return;this._editor.focus(),w.preventDefault();let{top:E,height:D}=B.i(this._domNode),L=this._editor.getOption(64),k=Math.floor(L/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(k+=L),this._onClick.fire({x:w.posx,y:E+D+k,actions:this.state.actions,trigger:this.state.trigger})})),this._register(B.nm(this._domNode,"mouseenter",w=>{(1&w.buttons)==1&&this.hide()})),this._register(this._editor.onDidChangeConfiguration(w=>{w.hasChanged(62)&&!this._editor.getOption(62).enabled&&this.hide()})),this._register(_.ju.runAndSubscribe(a.onDidUpdateKeybindings,()=>{var w,E;this._preferredKbLabel=(0,v.f6)((w=a.lookupKeybinding(d.pZ))===null||w===void 0?void 0:w.getLabel()),this._quickFixKbLabel=(0,v.f6)((E=a.lookupKeybinding(d.cz))===null||E===void 0?void 0:E.getLabel()),this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(l,a,w){if(l.validActions.length<=0)return this.hide();let E=this._editor.getOptions();if(!E.get(62).enabled)return this.hide();let D=this._editor.getModel();if(!D)return this.hide();let{lineNumber:L,column:k}=D.validatePosition(w),R=D.getOptions().tabSize,O=E.get(48),$=D.getLineContent(L),N=(0,f.q)($,R),T=W=>W>2&&this._editor.getTopForLineNumber(W)===this._editor.getTopForLineNumber(W-1),C=L;if(!(O.spaceWidth*N>22))if(L>1&&!T(L-1))C-=1;else if(T(L+1)){if(k*O.spaceWidth<22)return this.hide()}else C+=1;this.state=new m.Showing(l,a,w,{position:{lineNumber:C,column:1},preference:Bl._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==m.Hidden&&(this.state=m.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(l){this._state=l,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){this.state.type===1&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...x.k.asClassNameArray(I.l.lightBulb)),this._domNode.classList.add(...x.k.asClassNameArray(I.l.lightbulbAutofix)),this._preferredKbLabel)?this.title=o.NC("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):(this._domNode.classList.remove(...x.k.asClassNameArray(I.l.lightbulbAutofix)),this._domNode.classList.add(...x.k.asClassNameArray(I.l.lightBulb)),this._quickFixKbLabel?this.title=o.NC("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=o.NC("codeAction","Show Code Actions"))}set title(l){this._domNode.title=l}};var i,c;r.ID="editor.contrib.lightbulbWidget",r._posPref=[0],r=function(b,l,a,w){var E,D=arguments.length,L=D<3?l:w===null?w=Object.getOwnPropertyDescriptor(l,a):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(b,l,a,w);else for(var k=b.length-1;k>=0;k--)(E=b[k])&&(L=(D<3?E(L):D>3?E(l,a,L):E(l,a))||L);return D>3&&L&&Object.defineProperty(l,a,L),L}([(i=1,c=h.d,function(b,l){c(b,l,i)})],r)},7997:(ut,Ie,t)=>{"use strict";t.d(Ie,{EU:()=>I,Yl:()=>_,aQ:()=>m,bA:()=>v,wZ:()=>x,yN:()=>u});var m,B=t(7301);class u{constructor(d){this.value=d}equals(d){return this.value===d.value}contains(d){return this.equals(d)||this.value===""||d.value.startsWith(this.value+u.sep)}intersects(d){return this.contains(d)||d.contains(this)}append(d){return new u(this.value+u.sep+d)}}function I(f,d){return!(f.include&&!f.include.intersects(d)||f.excludes&&f.excludes.some(o=>A(d,o,f.include))||!f.includeSourceActions&&u.Source.contains(d))}function _(f,d){let o=d.kind?new u(d.kind):void 0;return!(!(!f.include||o&&f.include.contains(o))||f.excludes&&o&&f.excludes.some(h=>A(o,h,f.include))||!f.includeSourceActions&&o&&u.Source.contains(o)||f.onlyIncludePreferredActions&&!d.isPreferred)}function A(f,d,o){return!(!d.contains(f)||o&&d.contains(o))}u.sep=".",u.None=new u("@@none@@"),u.Empty=new u(""),u.QuickFix=new u("quickfix"),u.Refactor=new u("refactor"),u.RefactorExtract=u.Refactor.append("extract"),u.RefactorInline=u.Refactor.append("inline"),u.RefactorMove=u.Refactor.append("move"),u.RefactorRewrite=u.Refactor.append("rewrite"),u.Source=new u("source"),u.SourceOrganizeImports=u.Source.append("organizeImports"),u.SourceFixAll=u.Source.append("fixAll"),u.SurroundWith=u.Refactor.append("surround"),function(f){f.Refactor="refactor",f.RefactorPreview="refactor preview",f.Lightbulb="lightbulb",f.Default="other (default)",f.SourceAction="source action",f.QuickFix="quick fix action",f.FixAll="fix all",f.OrganizeImports="organize imports",f.AutoFix="auto fix",f.QuickFixHover="quick fix hover window",f.OnSave="save participants",f.ProblemsView="problems view"}(m||(m={}));class x{static fromUser(d,o){return d&&typeof d=="object"?new x(x.getKindFromUser(d,o.kind),x.getApplyFromUser(d,o.apply),x.getPreferredUser(d)):new x(o.kind,o.apply,!1)}static getApplyFromUser(d,o){switch(typeof d.apply=="string"?d.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return o}}static getKindFromUser(d,o){return typeof d.kind=="string"?new u(d.kind):o}static getPreferredUser(d){return typeof d.preferred=="boolean"&&d.preferred}constructor(d,o,h){this.kind=d,this.apply=o,this.preferred=h}}class v{constructor(d,o){this.action=d,this.provider=o}resolve(d){var o,h,r,i,c;return h=this,r=void 0,c=function*(){if(!((o=this.provider)===null||o===void 0)&&o.resolveCodeAction&&!this.action.edit){let b;try{b=yield this.provider.resolveCodeAction(this.action,d)}catch(l){(0,B.Cp)(l)}b&&(this.action.edit=b.edit)}return this},new((i=void 0)||(i=Promise))(function(b,l){function a(D){try{E(c.next(D))}catch(L){l(L)}}function w(D){try{E(c.throw(D))}catch(L){l(L)}}function E(D){var L;D.done?b(D.value):(L=D.value,L instanceof i?L:new i(function(k){k(L)})).then(a,w)}E((c=c.apply(h,r||[])).next())})}}},5729:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CodeLensContribution:()=>re});var m=t(5393),B=t(7301),u=t(5976),I=t(3407),_=t(6830),A=t(4141),x=t(9102),v=t(1050),f=t(8401),d=t(666),o=t(3733),h=t(4565),r=t(1922),i=function(ne,ie,se,ce){return new(se||(se=Promise))(function(be,de){function U(X){try{ve(ce.next(X))}catch(ye){de(ye)}}function ue(X){try{ve(ce.throw(X))}catch(ye){de(ye)}}function ve(X){var ye;X.done?be(X.value):(ye=X.value,ye instanceof se?ye:new se(function(Ce){Ce(ye)})).then(U,ue)}ve((ce=ce.apply(ne,ie||[])).next())})};class c{constructor(){this.lenses=[],this._disposables=new u.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(ie,se){this._disposables.add(ie);for(let ce of ie.lenses)this.lenses.push({symbol:ce,provider:se})}}function b(ne,ie,se){return i(this,void 0,void 0,function*(){let ce=ne.ordered(ie),be=new Map,de=new c,U=ce.map((ue,ve)=>i(this,void 0,void 0,function*(){be.set(ue,ve);try{let X=yield Promise.resolve(ue.provideCodeLenses(ie,se));X&&de.add(X,ue)}catch(X){(0,B.Cp)(X)}}));return yield Promise.all(U),de.lenses=de.lenses.sort((ue,ve)=>ue.symbol.range.startLineNumber<ve.symbol.range.startLineNumber?-1:ue.symbol.range.startLineNumber>ve.symbol.range.startLineNumber?1:be.get(ue.provider)<be.get(ve.provider)?-1:be.get(ue.provider)>be.get(ve.provider)?1:ue.symbol.range.startColumn<ve.symbol.range.startColumn?-1:ue.symbol.range.startColumn>ve.symbol.range.startColumn?1:0),de})}h.P.registerCommand("_executeCodeLensProvider",function(ne,...ie){let[se,ce]=ie;(0,f.p_)(d.o.isUri(se)),(0,f.p_)(typeof ce=="number"||!ce);let{codeLensProvider:be}=ne.get(r.p),de=ne.get(o.q).getModel(se);if(!de)throw(0,B.b1)();let U=[],ue=new u.SL;return b(be,de,v.T.None).then(ve=>{ue.add(ve);let X=[];for(let ye of ve.lenses)ce==null||ye.symbol.command?U.push(ye.symbol):ce-- >0&&ye.provider.resolveCodeLens&&X.push(Promise.resolve(ye.provider.resolveCodeLens(de,ye.symbol,v.T.None)).then(Ce=>U.push(Ce||ye.symbol)));return Promise.all(X)}).then(()=>U).finally(()=>{setTimeout(()=>ue.dispose(),100)})});var l=t(8289),a=t(3702),w=t(4314),E=t(5026),D=t(2065),L=t(6904);let k=(0,D.yh)("ICodeLensCache");class R{constructor(ie,se){this.lineCount=ie,this.data=se}}let O=class{constructor(ne){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new a.z6(20,.75),(0,m.To)(()=>ne.remove("codelens/cache",1));let ie="codelens/cache2",se=ne.get(ie,1,"{}");this._deserialize(se),(0,l.I)(ne.onWillSaveState)(ce=>{ce.reason===L.fk.SHUTDOWN&&ne.store(ie,this._serialize(),1,1)})}put(ne,ie){let se=ie.lenses.map(de=>{var U;return{range:de.symbol.range,command:de.symbol.command&&{id:"",title:(U=de.symbol.command)===null||U===void 0?void 0:U.title}}}),ce=new c;ce.add({lenses:se,dispose:()=>{}},this._fakeProvider);let be=new R(ne.getLineCount(),ce);this._cache.set(ne.uri.toString(),be)}get(ne){let ie=this._cache.get(ne.uri.toString());return ie&&ie.lineCount===ne.getLineCount()?ie.data:void 0}delete(ne){this._cache.delete(ne.uri.toString())}_serialize(){let ne=Object.create(null);for(let[ie,se]of this._cache){let ce=new Set;for(let be of se.data.lenses)ce.add(be.symbol.range.startLineNumber);ne[ie]={lineCount:se.lineCount,lines:[...ce.values()]}}return JSON.stringify(ne)}_deserialize(ne){try{let ie=JSON.parse(ne);for(let se in ie){let ce=ie[se],be=[];for(let U of ce.lines)be.push({range:new w.e(U,1,U,11)});let de=new c;de.add({lenses:be,dispose(){}},this._fakeProvider),this._cache.set(se,new R(ce.lineCount,de))}}catch(ie){}}};var $,N;O=function(ne,ie,se,ce){var be,de=arguments.length,U=de<3?ie:ce===null?ce=Object.getOwnPropertyDescriptor(ie,se):ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(ne,ie,se,ce);else for(var ue=ne.length-1;ue>=0;ue--)(be=ne[ue])&&(U=(de<3?be(U):de>3?be(ie,se,U):be(ie,se))||U);return de>3&&U&&Object.defineProperty(ie,se,U),U}([($=0,N=L.Uy,function(ne,ie){N(ne,ie,$)})],O),(0,E.z)(k,O,1);var T=t(5321),C=t(6811),W=t(3654);class K{constructor(ie,se,ce){this.afterColumn=1073741824,this.afterLineNumber=ie,this.heightInPx=se,this._onHeight=ce,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(ie){this._lastHeight===void 0?this._lastHeight=ie:this._lastHeight!==ie&&(this._lastHeight=ie,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class j{constructor(ie,se){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=ie,this._id="codelens.widget-"+j._idPool++,this.updatePosition(se),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(ie,se){this._commands.clear();let ce=[],be=!1;for(let de=0;de<ie.length;de++){let U=ie[de];if(U&&(be=!0,U.command)){let ue=(0,C.T)(U.command.title.trim());U.command.id?(ce.push(T.$("a",{id:String(de),title:U.command.tooltip,role:"button"},...ue)),this._commands.set(String(de),U.command)):ce.push(T.$("span",{title:U.command.tooltip},...ue)),de+1<ie.length&&ce.push(T.$("span",void 0,"\xA0|\xA0"))}}be?(T.mc(this._domNode,...ce),this._isEmpty&&se&&this._domNode.classList.add("fadein"),this._isEmpty=!1):T.mc(this._domNode,T.$("span",void 0,"no commands"))}getCommand(ie){return ie.parentElement===this._domNode?this._commands.get(ie.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(ie){let se=this._editor.getModel().getLineFirstNonWhitespaceColumn(ie);this._widgetPosition={position:{lineNumber:ie,column:se},preference:[1]}}getPosition(){return this._widgetPosition||null}}j._idPool=0;class F{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(ie,se){this._addDecorations.push(ie),this._addDecorationsCallbacks.push(se)}removeDecoration(ie){this._removeDecorations.push(ie)}commit(ie){let se=ie.deltaDecorations(this._removeDecorations,this._addDecorations);for(let ce=0,be=se.length;ce<be;ce++)this._addDecorationsCallbacks[ce](se[ce])}}let H=W.qx.register({collapseOnReplaceEdit:!0,description:"codelens"});class z{constructor(ie,se,ce,be,de,U){let ue;this._isDisposed=!1,this._editor=se,this._data=ie,this._decorationIds=[];let ve=[];this._data.forEach((X,ye)=>{X.symbol.command&&ve.push(X.symbol),ce.addDecoration({range:X.symbol.range,options:H},Ce=>this._decorationIds[ye]=Ce),ue=ue?w.e.plusRange(ue,X.symbol.range):w.e.lift(X.symbol.range)}),this._viewZone=new K(ue.startLineNumber-1,de,U),this._viewZoneId=be.addZone(this._viewZone),ve.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(ve,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new j(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(ie,se){this._decorationIds.forEach(ie.removeDecoration,ie),this._decorationIds=[],se==null||se.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((ie,se)=>{let ce=this._editor.getModel().getDecorationRange(ie),be=this._data[se].symbol;return!(!ce||w.e.isEmpty(be.range)!==ce.isEmpty())})}updateCodeLensSymbols(ie,se){this._decorationIds.forEach(se.removeDecoration,se),this._decorationIds=[],this._data=ie,this._data.forEach((ce,be)=>{se.addDecoration({range:ce.symbol.range,options:H},de=>this._decorationIds[be]=de)})}updateHeight(ie,se){this._viewZone.heightInPx=ie,se.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(ie){if(!this._viewZone.isVisible())return null;for(let se=0;se<this._decorationIds.length;se++){let ce=ie.getDecorationRange(this._decorationIds[se]);ce&&(this._data[se].symbol.range=ce)}return this._data}updateCommands(ie){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(ie,!0);for(let se=0;se<this._data.length;se++){let ce=ie[se];if(ce){let{symbol:be}=this._data[se];be.command=ce.command||be.command}}}getCommand(ie){var se;return(se=this._contentWidget)===null||se===void 0?void 0:se.getCommand(ie)}getLineNumber(){let ie=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return ie?ie.startLineNumber:-1}update(ie){if(this.isValid()){let se=this._editor.getModel().getDecorationRange(this._decorationIds[0]);se&&(this._viewZone.afterLineNumber=se.startLineNumber-1,ie.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(se.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var J=t(3580),oe=t(9422),fe=t(1157),q=t(8191),p=function(ne,ie){return function(se,ce){ie(se,ce,ne)}};let re=class{constructor(ne,ie,se,ce,be,de){this._editor=ne,this._languageFeaturesService=ie,this._commandService=ce,this._notificationService=be,this._codeLensCache=de,this._disposables=new u.SL,this._localToDispose=new u.SL,this._lenses=[],this._oldCodeLensModels=new u.SL,this._provideCodeLensDebounce=se.for(ie.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=se.for(ie.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new m.pY(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(U=>{(U.hasChanged(48)||U.hasChanged(17)||U.hasChanged(16))&&this._updateLensStyle(),U.hasChanged(15)&&this._onModelChange()})),this._disposables.add(ie.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var ne;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(ne=this._currentCodeLensModel)===null||ne===void 0||ne.dispose()}_getLayoutInfo(){let ne=Math.max(1.3,this._editor.getOption(64)/this._editor.getOption(50)),ie=this._editor.getOption(17);return(!ie||ie<5)&&(ie=.9*this._editor.getOption(50)|0),{fontSize:ie,codeLensHeight:ie*ne|0}}_updateLensStyle(){let{codeLensHeight:ne,fontSize:ie}=this._getLayoutInfo(),se=this._editor.getOption(16),ce=this._editor.getOption(48),{style:be}=this._editor.getContainerDomNode();be.setProperty("--vscode-editorCodeLens-lineHeight",`${ne}px`),be.setProperty("--vscode-editorCodeLens-fontSize",`${ie}px`),be.setProperty("--vscode-editorCodeLens-fontFeatureSettings",ce.fontFeatureSettings),se&&(be.setProperty("--vscode-editorCodeLens-fontFamily",se),be.setProperty("--vscode-editorCodeLens-fontFamilyDefault",A.hL.fontFamily)),this._editor.changeViewZones(de=>{for(let U of this._lenses)U.updateHeight(ne,de)})}_localDispose(){var ne,ie,se;(ne=this._getCodeLensModelPromise)===null||ne===void 0||ne.cancel(),this._getCodeLensModelPromise=void 0,(ie=this._resolveCodeLensesPromise)===null||ie===void 0||ie.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(se=this._currentCodeLensModel)===null||se===void 0||se.dispose()}_onModelChange(){this._localDispose();let ne=this._editor.getModel();if(!ne||!this._editor.getOption(15))return;let ie=this._codeLensCache.get(ne);if(ie&&this._renderCodeLensSymbols(ie),!this._languageFeaturesService.codeLensProvider.has(ne))return void(ie&&this._localToDispose.add((0,m.Vg)(()=>{let ce=this._codeLensCache.get(ne);ie===ce&&(this._codeLensCache.delete(ne),this._onModelChange())},3e4)));for(let ce of this._languageFeaturesService.codeLensProvider.all(ne))if(typeof ce.onDidChange=="function"){let be=ce.onDidChange(()=>se.schedule());this._localToDispose.add(be)}let se=new m.pY(()=>{var ce;let be=Date.now();(ce=this._getCodeLensModelPromise)===null||ce===void 0||ce.cancel(),this._getCodeLensModelPromise=(0,m.PG)(de=>b(this._languageFeaturesService.codeLensProvider,ne,de)),this._getCodeLensModelPromise.then(de=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=de,this._codeLensCache.put(ne,de);let U=this._provideCodeLensDebounce.update(ne,Date.now()-be);se.delay=U,this._renderCodeLensSymbols(de),this._resolveCodeLensesInViewportSoon()},B.dL)},this._provideCodeLensDebounce.get(ne));this._localToDispose.add(se),this._localToDispose.add((0,u.OF)(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var ce;this._editor.changeDecorations(be=>{this._editor.changeViewZones(de=>{let U=[],ue=-1;this._lenses.forEach(X=>{X.isValid()&&ue!==X.getLineNumber()?(X.update(de),ue=X.getLineNumber()):U.push(X)});let ve=new F;U.forEach(X=>{X.dispose(ve,de),this._lenses.splice(this._lenses.indexOf(X),1)}),ve.commit(be)})}),se.schedule(),this._resolveCodeLensesScheduler.cancel(),(ce=this._resolveCodeLensesPromise)===null||ce===void 0||ce.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{se.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(ce=>{ce.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add((0,u.OF)(()=>{if(this._editor.getModel()){let ce=I.Z.capture(this._editor);this._editor.changeDecorations(be=>{this._editor.changeViewZones(de=>{this._disposeAllLenses(be,de)})}),ce.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(ce=>{if(ce.target.type!==9)return;let be=ce.target.element;if((be==null?void 0:be.tagName)==="SPAN"&&(be=be.parentElement),(be==null?void 0:be.tagName)==="A")for(let de of this._lenses){let U=de.getCommand(be);if(U){this._commandService.executeCommand(U.id,...U.arguments||[]).catch(ue=>this._notificationService.error(ue));break}}})),se.schedule()}_disposeAllLenses(ne,ie){let se=new F;for(let ce of this._lenses)ce.dispose(se,ie);ne&&se.commit(ne),this._lenses.length=0}_renderCodeLensSymbols(ne){if(!this._editor.hasModel())return;let ie=this._editor.getModel().getLineCount(),se=[],ce;for(let U of ne.lenses){let ue=U.symbol.range.startLineNumber;ue<1||ue>ie||(ce&&ce[ce.length-1].symbol.range.startLineNumber===ue?ce.push(U):(ce=[U],se.push(ce)))}if(!se.length&&!this._lenses.length)return;let be=I.Z.capture(this._editor),de=this._getLayoutInfo();this._editor.changeDecorations(U=>{this._editor.changeViewZones(ue=>{let ve=new F,X=0,ye=0;for(;ye<se.length&&X<this._lenses.length;){let Ce=se[ye][0].symbol.range.startLineNumber,Ee=this._lenses[X].getLineNumber();Ee<Ce?(this._lenses[X].dispose(ve,ue),this._lenses.splice(X,1)):Ee===Ce?(this._lenses[X].updateCodeLensSymbols(se[ye],ve),ye++,X++):(this._lenses.splice(X,0,new z(se[ye],this._editor,ve,ue,de.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),X++,ye++)}for(;X<this._lenses.length;)this._lenses[X].dispose(ve,ue),this._lenses.splice(X,1);for(;ye<se.length;)this._lenses.push(new z(se[ye],this._editor,ve,ue,de.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),ye++;ve.commit(U)})}),be.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var ne;(ne=this._resolveCodeLensesPromise)===null||ne===void 0||ne.cancel(),this._resolveCodeLensesPromise=void 0;let ie=this._editor.getModel();if(!ie)return;let se=[],ce=[];if(this._lenses.forEach(U=>{let ue=U.computeIfNecessary(ie);ue&&(se.push(ue),ce.push(U))}),se.length===0)return;let be=Date.now(),de=(0,m.PG)(U=>{let ue=se.map((ve,X)=>{let ye=new Array(ve.length),Ce=ve.map((Ee,Ae)=>Ee.symbol.command||typeof Ee.provider.resolveCodeLens!="function"?(ye[Ae]=Ee.symbol,Promise.resolve(void 0)):Promise.resolve(Ee.provider.resolveCodeLens(ie,Ee.symbol,U)).then(Fe=>{ye[Ae]=Fe},B.Cp));return Promise.all(Ce).then(()=>{U.isCancellationRequested||ce[X].isDisposed()||ce[X].updateCommands(ye)})});return Promise.all(ue)});this._resolveCodeLensesPromise=de,this._resolveCodeLensesPromise.then(()=>{let U=this._resolveCodeLensesDebounce.update(ie,Date.now()-be);this._resolveCodeLensesScheduler.delay=U,this._currentCodeLensModel&&this._codeLensCache.put(ie,this._currentCodeLensModel),this._oldCodeLensModels.clear(),de===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},U=>{(0,B.dL)(U),de===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}};re.ID="css.editor.codeLens",re=function(ne,ie,se,ce){var be,de=arguments.length,U=de<3?ie:ce===null?ce=Object.getOwnPropertyDescriptor(ie,se):ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(ne,ie,se,ce);else for(var ue=ne.length-1;ue>=0;ue--)(be=ne[ue])&&(U=(de<3?be(U):de>3?be(ie,se,U):be(ie,se))||U);return de>3&&U&&Object.defineProperty(ie,se,U),U}([p(1,r.p),p(2,q.A),p(3,h.H),p(4,oe.lT),p(5,k)],re),(0,_._K)(re.ID,re,1),(0,_.Qr)(class extends _.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:x.u.hasCodeLensProvider,label:(0,J.NC)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(ne,ie){return se=this,ce=void 0,de=function*(){if(!ie.hasModel())return;let U=ne.get(fe.eJ),ue=ne.get(h.H),ve=ne.get(oe.lT),X=ie.getSelection().positionLineNumber,ye=ie.getContribution(re.ID);if(!ye)return;let Ce=ye.getModel();if(!Ce)return;let Ee=[];for(let Fe of Ce.lenses)Fe.symbol.command&&Fe.symbol.range.startLineNumber===X&&Ee.push({label:Fe.symbol.command.title,command:Fe.symbol.command});if(Ee.length===0)return;let Ae=yield U.pick(Ee,{canPickMany:!1});if(Ae){if(Ce.isDisposed)return yield ue.executeCommand(this.id);try{yield ue.executeCommand(Ae.command.id,...Ae.command.arguments||[])}catch(Fe){ve.error(Fe)}}},new((be=void 0)||(be=Promise))(function(U,ue){function ve(Ce){try{ye(de.next(Ce))}catch(Ee){ue(Ee)}}function X(Ce){try{ye(de.throw(Ce))}catch(Ee){ue(Ee)}}function ye(Ce){var Ee;Ce.done?U(Ce.value):(Ee=Ce.value,Ee instanceof be?Ee:new be(function(Ae){Ae(Ee)})).then(ve,X)}ye((de=de.apply(se,ce||[])).next())});var se,ce,be,de}})},2640:(ut,Ie,t)=>{"use strict";t.d(Ie,{E:()=>o,R:()=>h});var m=t(1050),B=t(7301),u=t(666),I=t(4314),_=t(3733),A=t(4565),x=t(1922),v=t(5418),f=t(3108),d=function(a,w,E,D){return new(E||(E=Promise))(function(L,k){function R(N){try{$(D.next(N))}catch(T){k(T)}}function O(N){try{$(D.throw(N))}catch(T){k(T)}}function $(N){var T;N.done?L(N.value):(T=N.value,T instanceof E?T:new E(function(C){C(T)})).then(R,O)}$((D=D.apply(a,w||[])).next())})};function o(a,w,E,D=!0){return d(this,void 0,void 0,function*(){return b(new r,a,w,E,D)})}function h(a,w,E,D){return Promise.resolve(E.provideColorPresentations(a,w,D))}class r{constructor(){}compute(w,E,D,L){return d(this,void 0,void 0,function*(){let k=yield w.provideDocumentColors(E,D);if(Array.isArray(k))for(let R of k)L.push({colorInfo:R,provider:w});return Array.isArray(k)})}}class i{constructor(){}compute(w,E,D,L){return d(this,void 0,void 0,function*(){let k=yield w.provideDocumentColors(E,D);if(Array.isArray(k))for(let R of k)L.push({range:R.range,color:[R.color.red,R.color.green,R.color.blue,R.color.alpha]});return Array.isArray(k)})}}class c{constructor(w){this.colorInfo=w}compute(w,E,D,L){return d(this,void 0,void 0,function*(){let k=yield w.provideColorPresentations(E,this.colorInfo,m.T.None);return Array.isArray(k)&&L.push(...k),Array.isArray(k)})}}function b(a,w,E,D,L){return d(this,void 0,void 0,function*(){let k,R=!1,O=[],$=w.ordered(E);for(let N=$.length-1;N>=0;N--){let T=$[N];if(T instanceof v.G)k=T;else try{R||(R=yield a.compute(T,E,D,O))}catch(C){(0,B.Cp)(C)}}return R?O:k&&L?(yield a.compute(k,E,D,O),O):[]})}function l(a,w){let{colorProvider:E}=a.get(x.p),D=a.get(_.q).getModel(w);if(!D)throw(0,B.b1)();return{model:D,colorProviderRegistry:E,isDefaultColorDecoratorsEnabled:a.get(f.Ui).getValue("editor.defaultColorDecorators",{resource:w})}}A.P.registerCommand("_executeDocumentColorProvider",function(a,...w){let[E]=w;if(!(E instanceof u.o))throw(0,B.b1)();let{model:D,colorProviderRegistry:L,isDefaultColorDecoratorsEnabled:k}=l(a,E);return b(new i,L,D,m.T.None,k)}),A.P.registerCommand("_executeColorPresentationProvider",function(a,...w){let[E,D]=w,{uri:L,range:k}=D;if(!(L instanceof u.o&&Array.isArray(E)&&E.length===4&&I.e.isIRange(k)))throw(0,B.b1)();let{model:R,colorProviderRegistry:O,isDefaultColorDecoratorsEnabled:$}=l(a,L),[N,T,C,W]=E;return b(new c({range:k,color:{red:N,green:T,blue:C,alpha:W}}),O,R,m.T.None,$)})},6838:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ColorContribution:()=>v});var m=t(5976),B=t(6830),u=t(4314),I=t(9431),_=t(5766),A=t(9817),x=t(6520);class v extends m.JT{constructor(d){super(),this._editor=d,this._register(d.onMouseDown(o=>this.onMouseDown(o)))}dispose(){super.dispose()}onMouseDown(d){let o=d.target;if(o.type!==6||!o.detail.injectedText||o.detail.injectedText.options.attachedData!==I.Ak||!o.range)return;let h=this._editor.getContribution(A.ModesHoverController.ID);if(h&&!h.isColorPickerVisible()){let r=new u.e(o.range.startLineNumber,o.range.startColumn+1,o.range.endLineNumber,o.range.endColumn+1);h.showContentHover(r,1,0,!1)}}}v.ID="editor.contrib.colorContribution",(0,B._K)(v.ID,v,2),x.Ae.register(_.nh)},9431:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ak:()=>a,if:()=>w});var m=t(5393),B=t(1264),u=t(7301),I=t(4669),_=t(5976),A=t(4013),x=t(7295),v=t(9994),f=t(6830),d=t(4314),o=t(3654),h=t(8191),r=t(1922),i=t(2640),c=t(3108),b=function(D,L){return function(k,R){L(k,R,D)}},l=function(D,L,k,R){return new(k||(k=Promise))(function(O,$){function N(W){try{C(R.next(W))}catch(K){$(K)}}function T(W){try{C(R.throw(W))}catch(K){$(K)}}function C(W){var K;W.done?O(W.value):(K=W.value,K instanceof k?K:new k(function(j){j(K)})).then(N,T)}C((R=R.apply(D,L||[])).next())})};let a=Object.create({}),w=class Wl extends _.JT{constructor(L,k,R,O){super(),this._editor=L,this._configurationService=k,this._languageFeaturesService=R,this._localToDispose=this._register(new _.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new v.t7(this._editor),this._decoratorLimitReporter=new E,this._colorDecorationClassRefs=this._register(new _.SL),this._debounceInformation=O.for(R.colorProvider,"Document Colors",{min:Wl.RECOMPUTE_TIME}),this._register(L.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(L.onDidChangeModelLanguage(()=>this.updateColors())),this._register(R.colorProvider.onDidChange(()=>this.updateColors())),this._register(L.onDidChangeConfiguration($=>{let N=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(141);let T=N!==this._isColorDecoratorsEnabled||$.hasChanged(19),C=$.hasChanged(141);(T||C)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(141),this.updateColors()}isEnabled(){let L=this._editor.getModel();if(!L)return!1;let k=L.getLanguageId(),R=this._configurationService.getValue(k);if(R&&typeof R=="object"){let O=R.colorDecorators;if(O&&O.enable!==void 0&&!O.enable)return O.enable}return this._editor.getOption(18)}static get(L){return L.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;let L=this._editor.getModel();L&&this._languageFeaturesService.colorProvider.has(L)&&(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new m._F,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(L)))})),this.beginCompute())}beginCompute(){return l(this,void 0,void 0,function*(){this._computePromise=(0,m.PG)(L=>l(this,void 0,void 0,function*(){let k=this._editor.getModel();if(!k)return[];let R=new A.G(!1),O=yield(0,i.E)(this._languageFeaturesService.colorProvider,k,L,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(k,R.elapsed()),O}));try{let L=yield this._computePromise;this.updateDecorations(L),this.updateColorDecorators(L),this._computePromise=null}catch(L){(0,u.dL)(L)}})}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(L){let k=L.map(R=>({range:{startLineNumber:R.colorInfo.range.startLineNumber,startColumn:R.colorInfo.range.startColumn,endLineNumber:R.colorInfo.range.endLineNumber,endColumn:R.colorInfo.range.endColumn},options:o.qx.EMPTY}));this._editor.changeDecorations(R=>{this._decorationsIds=R.deltaDecorations(this._decorationsIds,k),this._colorDatas=new Map,this._decorationsIds.forEach((O,$)=>this._colorDatas.set(O,L[$]))})}updateColorDecorators(L){this._colorDecorationClassRefs.clear();let k=[],R=this._editor.getOption(19);for(let $=0;$<L.length&&k.length<R;$++){let{red:N,green:T,blue:C,alpha:W}=L[$].colorInfo.color,K=new B.VS(Math.round(255*N),Math.round(255*T),Math.round(255*C),W),j=`rgba(${K.r}, ${K.g}, ${K.b}, ${K.a})`,F=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:j}));k.push({range:{startLineNumber:L[$].colorInfo.range.startLineNumber,startColumn:L[$].colorInfo.range.startColumn,endLineNumber:L[$].colorInfo.range.endLineNumber,endColumn:L[$].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:x.B4,inlineClassName:`${F.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:a}}})}let O=R<L.length&&R;this._decoratorLimitReporter.update(L.length,O),this._colorDecoratorIds.set(k)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(L){let k=this._editor.getModel();if(!k)return null;let R=k.getDecorationsInRange(d.e.fromPositions(L,L)).filter(O=>this._colorDatas.has(O.id));return R.length===0?null:this._colorDatas.get(R[0].id)}isColorDecoration(L){return this._colorDecoratorIds.has(L)}};w.ID="editor.contrib.colorDetector",w.RECOMPUTE_TIME=1e3,w=function(D,L,k,R){var O,$=arguments.length,N=$<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,k):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(D,L,k,R);else for(var T=D.length-1;T>=0;T--)(O=D[T])&&(N=($<3?O(N):$>3?O(L,k,N):O(L,k))||N);return $>3&&N&&Object.defineProperty(L,k,N),N}([b(1,c.Ui),b(2,r.p),b(3,h.A)],w);class E{constructor(){this._onDidChange=new I.Q5,this._computed=0,this._limited=!1}update(L,k){L===this._computed&&k===this._limited||(this._computed=L,this._limited=k,this._onDidChange.fire())}}(0,f._K)(w.ID,w,1)},5766:(ut,Ie,t)=>{"use strict";t.d(Ie,{nh:()=>H,PQ:()=>J});var m=t(5393),B=t(1050),u=t(1264),I=t(5976),_=t(4314),A=t(2640),x=t(9431),v=t(4669);class f{get color(){return this._color}set color(ne){this._color.equals(ne)||(this._color=ne,this._onDidChangeColor.fire(ne))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(ne){this._colorPresentations=ne,this.presentationIndex>ne.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(ne,ie,se){this.presentationIndex=se,this._onColorFlushed=new v.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new v.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new v.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=ne,this._color=ne,this._colorPresentations=ie}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(ne,ie){let se=-1;for(let ce=0;ce<this.colorPresentations.length;ce++)if(ie.toLowerCase()===this.colorPresentations[ce].label){se=ce;break}if(se===-1){let ce=ie.split("(")[0].toLowerCase();for(let be=0;be<this.colorPresentations.length;be++)if(this.colorPresentations[be].label.toLowerCase().startsWith(ce)){se=be;break}}se!==-1&&se!==this.presentationIndex&&(this.presentationIndex=se,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var d=t(6268),o=t(5321),h=t(3911),r=t(3794),i=t(3046),c=t(5670),b=t(3580),l=t(3910),a=t(9554);let w=o.$;class E extends I.JT{constructor(ne,ie,se,ce=!1){super(),this.model=ie,this.showingStandaloneColorPicker=ce,this._closeButton=null,this._domNode=w(".colorpicker-header"),o.R3(ne,this._domNode),this._pickedColorNode=o.R3(this._domNode,w(".picked-color"));let be=(0,b.NC)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",be),this._originalColorNode=o.R3(this._domNode,w(".original-color")),this._originalColorNode.style.backgroundColor=u.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=se.getColorTheme().getColor(l.yJx)||u.Il.white,this._register(se.onDidColorThemeChange(de=>{this.backgroundColor=de.getColor(l.yJx)||u.Il.white})),this._register(o.nm(this._pickedColorNode,o.tw.CLICK,()=>this.model.selectNextColorPresentation())),this._register(o.nm(this._originalColorNode,o.tw.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(ie.onDidChangeColor(this.onDidChangeColor,this)),this._register(ie.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=u.Il.Format.CSS.format(ie.color)||"",this._pickedColorNode.classList.toggle("light",ie.color.rgba.a<.5?this.backgroundColor.isLighter():ie.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new D(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(ne){this._pickedColorNode.style.backgroundColor=u.Il.Format.CSS.format(ne)||"",this._pickedColorNode.classList.toggle("light",ne.rgba.a<.5?this.backgroundColor.isLighter():ne.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this._pickedColorNode.prepend(w(".codicon.codicon-color-mode"))}}class D extends I.JT{constructor(ne){super(),this._onClicked=this._register(new v.Q5),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),o.R3(ne,this._button);let ie=document.createElement("div");ie.classList.add("close-button-inner-div"),o.R3(this._button,ie),o.R3(ie,w(".button"+c.k.asCSSSelector((0,a.q5)("color-picker-close",i.l.close,(0,b.NC)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._button.onclick=()=>{this._onClicked.fire()}}}class L extends I.JT{constructor(ne,ie,se,ce=!1){super(),this.model=ie,this.pixelRatio=se,this._insertButton=null,this._domNode=w(".colorpicker-body"),o.R3(ne,this._domNode),this._saturationBox=new k(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new O(this._domNode,this.model,ce),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new $(this._domNode,this.model,ce),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),ce&&(this._insertButton=this._register(new N(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:ne,v:ie}){let se=this.model.color.hsva;this.model.color=new u.Il(new u.tx(se.h,ne,ie,se.a))}onDidOpacityChange(ne){let ie=this.model.color.hsva;this.model.color=new u.Il(new u.tx(ie.h,ie.s,ie.v,ne))}onDidHueChange(ne){let ie=this.model.color.hsva,se=360*(1-ne);this.model.color=new u.Il(new u.tx(se===360?0:se,ie.s,ie.v,ie.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class k extends I.JT{constructor(ne,ie,se){super(),this.model=ie,this.pixelRatio=se,this._onDidChange=new v.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new v.Q5,this.onColorFlushed=this._onColorFlushed.event,this._domNode=w(".saturation-wrap"),o.R3(ne,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",o.R3(this._domNode,this._canvas),this.selection=w(".saturation-selection"),o.R3(this._domNode,this.selection),this.layout(),this._register(o.nm(this._domNode,o.tw.POINTER_DOWN,ce=>this.onPointerDown(ce))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(ne){if(!(ne.target&&ne.target instanceof Element))return;this.monitor=this._register(new h.C);let ie=o.i(this._domNode);ne.target!==this.selection&&this.onDidChangePosition(ne.offsetX,ne.offsetY),this.monitor.startMonitoring(ne.target,ne.pointerId,ne.buttons,ce=>this.onDidChangePosition(ce.pageX-ie.left,ce.pageY-ie.top),()=>null);let se=o.nm(document,o.tw.POINTER_UP,()=>{this._onColorFlushed.fire(),se.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(ne,ie){let se=Math.max(0,Math.min(1,ne/this.width)),ce=Math.max(0,Math.min(1,1-ie/this.height));this.paintSelection(se,ce),this._onDidChange.fire({s:se,v:ce})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();let ne=this.model.color.hsva;this.paintSelection(ne.s,ne.v)}paint(){let ne=this.model.color.hsva,ie=new u.Il(new u.tx(ne.h,1,1,1)),se=this._canvas.getContext("2d"),ce=se.createLinearGradient(0,0,this._canvas.width,0);ce.addColorStop(0,"rgba(255, 255, 255, 1)"),ce.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),ce.addColorStop(1,"rgba(255, 255, 255, 0)");let be=se.createLinearGradient(0,0,0,this._canvas.height);be.addColorStop(0,"rgba(0, 0, 0, 0)"),be.addColorStop(1,"rgba(0, 0, 0, 1)"),se.rect(0,0,this._canvas.width,this._canvas.height),se.fillStyle=u.Il.Format.CSS.format(ie),se.fill(),se.fillStyle=ce,se.fill(),se.fillStyle=be,se.fill()}paintSelection(ne,ie){this.selection.style.left=ne*this.width+"px",this.selection.style.top=this.height-ie*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class R extends I.JT{constructor(ne,ie,se=!1){super(),this.model=ie,this._onDidChange=new v.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new v.Q5,this.onColorFlushed=this._onColorFlushed.event,se?(this.domNode=o.R3(ne,w(".standalone-strip")),this.overlay=o.R3(this.domNode,w(".standalone-overlay"))):(this.domNode=o.R3(ne,w(".strip")),this.overlay=o.R3(this.domNode,w(".overlay"))),this.slider=o.R3(this.domNode,w(".slider")),this.slider.style.top="0px",this._register(o.nm(this.domNode,o.tw.POINTER_DOWN,ce=>this.onPointerDown(ce))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;let ne=this.getValue(this.model.color);this.updateSliderPosition(ne)}onPointerDown(ne){if(!(ne.target&&ne.target instanceof Element))return;let ie=this._register(new h.C),se=o.i(this.domNode);this.domNode.classList.add("grabbing"),ne.target!==this.slider&&this.onDidChangeTop(ne.offsetY),ie.startMonitoring(ne.target,ne.pointerId,ne.buttons,be=>this.onDidChangeTop(be.pageY-se.top),()=>null);let ce=o.nm(document,o.tw.POINTER_UP,()=>{this._onColorFlushed.fire(),ce.dispose(),ie.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(ne){let ie=Math.max(0,Math.min(1,1-ne/this.height));this.updateSliderPosition(ie),this._onDidChange.fire(ie)}updateSliderPosition(ne){this.slider.style.top=(1-ne)*this.height+"px"}}class O extends R{constructor(ne,ie,se=!1){super(ne,ie,se),this.domNode.classList.add("opacity-strip"),this._register(ie.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(ne){let{r:ie,g:se,b:ce}=ne.rgba,be=new u.Il(new u.VS(ie,se,ce,1)),de=new u.Il(new u.VS(ie,se,ce,0));this.overlay.style.background=`linear-gradient(to bottom, ${be} 0%, ${de} 100%)`}getValue(ne){return ne.hsva.a}}class $ extends R{constructor(ne,ie,se=!1){super(ne,ie,se),this.domNode.classList.add("hue-strip")}getValue(ne){return 1-ne.hsva.h/360}}class N extends I.JT{constructor(ne){super(),this._onClicked=this._register(new v.Q5),this.onClicked=this._onClicked.event,this._button=o.R3(ne,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._button.onclick=ie=>{this._onClicked.fire()}}get button(){return this._button}}class T extends r.${constructor(ne,ie,se,ce,be=!1){super(),this.model=ie,this.pixelRatio=se,this._register(d.PixelRatio.onDidChange(()=>this.layout()));let de=w(".colorpicker-widget");ne.appendChild(de),this.header=this._register(new E(de,this.model,ce,be)),this.body=this._register(new L(de,this.model,this.pixelRatio,be))}layout(){this.body.layout()}}var C=t(7781),W=function(re,ne,ie,se){var ce,be=arguments.length,de=be<3?ne:se===null?se=Object.getOwnPropertyDescriptor(ne,ie):se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")de=Reflect.decorate(re,ne,ie,se);else for(var U=re.length-1;U>=0;U--)(ce=re[U])&&(de=(be<3?ce(de):be>3?ce(ne,ie,de):ce(ne,ie))||de);return be>3&&de&&Object.defineProperty(ne,ie,de),de},K=function(re,ne){return function(ie,se){ne(ie,se,re)}},j=function(re,ne,ie,se){return new(ie||(ie=Promise))(function(ce,be){function de(ve){try{ue(se.next(ve))}catch(X){be(X)}}function U(ve){try{ue(se.throw(ve))}catch(X){be(X)}}function ue(ve){var X;ve.done?ce(ve.value):(X=ve.value,X instanceof ie?X:new ie(function(ye){ye(X)})).then(de,U)}ue((se=se.apply(re,ne||[])).next())})};class F{constructor(ne,ie,se,ce){this.owner=ne,this.range=ie,this.model=se,this.provider=ce,this.forceShowAtRange=!0}isValidForHoverAnchor(ne){return ne.type===1&&this.range.startColumn<=ne.range.startColumn&&this.range.endColumn>=ne.range.endColumn}}let H=class{constructor(re,ne){this._editor=re,this._themeService=ne,this.hoverOrdinal=2}computeSync(re,ne){return[]}computeAsync(re,ne,ie){return m.Aq.fromPromise(this._computeAsync(re,ne,ie))}_computeAsync(re,ne,ie){return j(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];let se=x.if.get(this._editor);if(!se)return[];for(let ce of ne){if(!se.isColorDecoration(ce))continue;let be=se.getColorData(ce.range.getStartPosition());if(be)return[yield oe(this,this._editor.getModel(),be.colorInfo,be.provider)]}return[]})}renderHoverParts(re,ne){return fe(this,this._editor,this._themeService,ne,re)}};H=W([K(1,C.XE)],H);class z{constructor(ne,ie,se,ce){this.owner=ne,this.range=ie,this.model=se,this.provider=ce}}let J=class{constructor(re,ne){this._editor=re,this._themeService=ne,this._color=null}createColorHover(re,ne,ie){return j(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!x.if.get(this._editor))return null;let se=yield(0,A.E)(ie,this._editor.getModel(),B.T.None),ce=null,be=null;for(let ve of se){let X=ve.colorInfo;_.e.containsRange(X.range,re.range)&&(ce=X,be=ve.provider)}let de=ce!=null?ce:re,U=be!=null?be:ne,ue=!!ce;return{colorHover:yield oe(this,this._editor.getModel(),de,U),foundInEditor:ue}})}updateEditorModel(re){return j(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;let ne=re.model,ie=new _.e(re.range.startLineNumber,re.range.startColumn,re.range.endLineNumber,re.range.endColumn);this._color&&(yield p(this._editor.getModel(),ne,this._color,ie,re),ie=q(this._editor,ie,ne))})}renderHoverParts(re,ne){return fe(this,this._editor,this._themeService,ne,re)}set color(re){this._color=re}get color(){return this._color}};function oe(re,ne,ie,se){return j(this,void 0,void 0,function*(){let ce=ne.getValueInRange(ie.range),{red:be,green:de,blue:U,alpha:ue}=ie.color,ve=new u.VS(Math.round(255*be),Math.round(255*de),Math.round(255*U),ue),X=new u.Il(ve),ye=yield(0,A.R)(ne,ie,se,B.T.None),Ce=new f(X,[],0);return Ce.colorPresentations=ye||[],Ce.guessColorPresentation(X,ce),re instanceof H?new F(re,_.e.lift(ie.range),Ce,se):new z(re,_.e.lift(ie.range),Ce,se)})}function fe(re,ne,ie,se,ce){if(se.length===0||!ne.hasModel())return I.JT.None;let be=new I.SL,de=se[0],U=ne.getModel(),ue=de.model,ve=be.add(new T(ce.fragment,ue,ne.getOption(137),ie,re instanceof J));ce.setColorPicker(ve);let X=new _.e(de.range.startLineNumber,de.range.startColumn,de.range.endLineNumber,de.range.endColumn);if(re instanceof J){let ye=se[0].model.color;re.color=ye,p(U,ue,ye,X,de),be.add(ue.onColorFlushed(Ce=>{re.color=Ce}))}else be.add(ue.onColorFlushed(ye=>j(this,void 0,void 0,function*(){yield p(U,ue,ye,X,de),X=q(ne,X,ue,ce)})));return be.add(ue.onDidChangeColor(ye=>{p(U,ue,ye,X,de)})),be}function q(re,ne,ie,se){let ce,be;if(ie.presentation.textEdit){ce=[ie.presentation.textEdit],be=new _.e(ie.presentation.textEdit.range.startLineNumber,ie.presentation.textEdit.range.startColumn,ie.presentation.textEdit.range.endLineNumber,ie.presentation.textEdit.range.endColumn);let de=re.getModel()._setTrackedRange(null,be,3);re.pushUndoStop(),re.executeEdits("colorpicker",ce),be=re.getModel()._getTrackedRange(de)||be}else ce=[{range:ne,text:ie.presentation.label,forceMoveMarkers:!1}],be=ne.setEndPosition(ne.endLineNumber,ne.startColumn+ie.presentation.label.length),re.pushUndoStop(),re.executeEdits("colorpicker",ce);return ie.presentation.additionalTextEdits&&(ce=[...ie.presentation.additionalTextEdits],re.executeEdits("colorpicker",ce),se&&se.hide()),re.pushUndoStop(),be}function p(re,ne,ie,se,ce){return j(this,void 0,void 0,function*(){let be=yield(0,A.R)(re,{range:se,color:{red:ie.rgba.r/255,green:ie.rgba.g/255,blue:ie.rgba.b/255,alpha:ie.rgba.a}},ce.provider,B.T.None);ne.colorPresentations=be||[]})}J=W([K(1,C.XE)],J)},5418:(ut,Ie,t)=>{"use strict";t.d(Ie,{G:()=>f});var m=t(1264),B=t(2573),u=t(3733),I=t(1381),_=t(5976),A=t(1922),x=t(637),v=function(o,h){return function(r,i){h(r,i,o)}};class f{constructor(h,r){this._editorWorkerClient=new B.Q8(h,!1,"editorWorkerService",r)}provideDocumentColors(h,r){return i=this,c=void 0,l=function*(){return this._editorWorkerClient.computeDefaultDocumentColors(h.uri)},new((b=void 0)||(b=Promise))(function(a,w){function E(k){try{L(l.next(k))}catch(R){w(R)}}function D(k){try{L(l.throw(k))}catch(R){w(R)}}function L(k){var R;k.done?a(k.value):(R=k.value,R instanceof b?R:new b(function(O){O(R)})).then(E,D)}L((l=l.apply(i,c||[])).next())});var i,c,b,l}provideColorPresentations(h,r,i){let c=r.range,b=r.color,l=b.alpha,a=new m.Il(new m.VS(Math.round(255*b.red),Math.round(255*b.green),Math.round(255*b.blue),l)),w=l?m.Il.Format.CSS.formatRGB(a):m.Il.Format.CSS.formatRGBA(a),E=l?m.Il.Format.CSS.formatHSL(a):m.Il.Format.CSS.formatHSLA(a),D=l?m.Il.Format.CSS.formatHex(a):m.Il.Format.CSS.formatHexA(a),L=[];return L.push({label:w,textEdit:{range:c,text:w}}),L.push({label:E,textEdit:{range:c,text:E}}),L.push({label:D,textEdit:{range:c,text:D}}),L}}let d=class extends _.JT{constructor(o,h,r){super(),this._register(r.colorProvider.register("*",new f(o,h)))}};d=function(o,h,r,i){var c,b=arguments.length,l=b<3?h:i===null?i=Object.getOwnPropertyDescriptor(h,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(o,h,r,i);else for(var a=o.length-1;a>=0;a--)(c=o[a])&&(l=(b<3?c(l):b>3?c(h,r,l):c(h,r))||l);return b>3&&l&&Object.defineProperty(h,r,l),l}([v(0,u.q),v(1,I.c_),v(2,A.p)],d),(0,x.y)(d)},2719:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ShowOrFocusStandaloneColorPicker:()=>k});var m=t(6830),B=t(3580),u=t(5976),I=t(5766),_=t(2065),A=t(7286),x=t(1847),v=t(4669),f=t(1922),d=t(9102),o=t(3983),h=t(3733),r=t(1381),i=t(5418),c=t(5321),b=function($,N,T,C){var W,K=arguments.length,j=K<3?N:C===null?C=Object.getOwnPropertyDescriptor(N,T):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate($,N,T,C);else for(var F=$.length-1;F>=0;F--)(W=$[F])&&(j=(K<3?W(j):K>3?W(N,T,j):W(N,T))||j);return K>3&&j&&Object.defineProperty(N,T,j),j},l=function($,N){return function(T,C){N(T,C,$)}},a=function($,N,T,C){return new(T||(T=Promise))(function(W,K){function j(z){try{H(C.next(z))}catch(J){K(J)}}function F(z){try{H(C.throw(z))}catch(J){K(J)}}function H(z){var J;z.done?W(z.value):(J=z.value,J instanceof T?J:new T(function(oe){oe(J)})).then(j,F)}H((C=C.apply($,N||[])).next())})};let w=class Vl extends u.JT{constructor(N,T,C,W,K,j,F){super(),this._editor=N,this._modelService=C,this._keybindingService=W,this._instantiationService=K,this._languageFeatureService=j,this._languageConfigurationService=F,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=d.u.standaloneColorPickerVisible.bindTo(T),this._standaloneColorPickerFocused=d.u.standaloneColorPickerFocused.bindTo(T)}showOrFocus(){var N;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(N=this._standaloneColorPickerWidget)===null||N===void 0||N.focus():this._standaloneColorPickerWidget=new E(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var N;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(N=this._standaloneColorPickerWidget)===null||N===void 0||N.hide(),this._editor.focus()}insertColor(){var N;(N=this._standaloneColorPickerWidget)===null||N===void 0||N.updateEditor(),this.hide()}static get(N){return N.getContribution(Vl.ID)}};w.ID="editor.contrib.standaloneColorPickerController",w=b([l(1,o.i6),l(2,h.q),l(3,x.d),l(4,_.TG),l(5,f.p),l(6,r.c_)],w),(0,m._K)(w.ID,w,1);let E=class Hl extends u.JT{constructor(N,T,C,W,K,j,F,H){var z;super(),this._editor=N,this._standaloneColorPickerVisible=T,this._standaloneColorPickerFocused=C,this._modelService=K,this._keybindingService=j,this._languageFeaturesService=F,this._languageConfigurationService=H,this.body=document.createElement("div"),this._position=void 0,this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new v.Q5),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=W.createInstance(I.PQ,this._editor),this._position=(z=this._editor._getViewModel())===null||z===void 0?void 0:z.getPrimaryCursorState().viewState.position;let J=this._editor.getSelection(),oe=J?{startLineNumber:J.startLineNumber,startColumn:J.startColumn,endLineNumber:J.endLineNumber,endColumn:J.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},fe=this._register(c.go(this.body));this._register(fe.onDidBlur(q=>{this.hide()})),this._register(fe.onDidFocus(q=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(q=>{var p;let re=(p=q.target.element)===null||p===void 0?void 0:p.classList;re&&re.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(q=>{this._render(q.value,q.foundInEditor)})),this._start(oe),this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return Hl.ID}getDomNode(){return this.body}getPosition(){if(!this._position)return null;let N=this._editor.getOption(58).above;return{position:this._position,secondaryPosition:this._position,preference:N?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this.body.focus()}_start(N){return a(this,void 0,void 0,function*(){let T=yield this._computeAsync(N);T&&this._onResult.fire(new D(T.result,T.foundInEditor))})}_computeAsync(N){return a(this,void 0,void 0,function*(){if(!this._editor.hasModel())return null;let T={range:N,color:{red:0,green:0,blue:0,alpha:1}},C=yield this._standaloneColorPickerParticipant.createColorHover(T,new i.G(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return C?{result:C.colorHover,foundInEditor:C.foundInEditor}:null})}_render(N,T){let C=document.createDocumentFragment(),W,K={fragment:C,statusBar:this._register(new A.mR(this._keybindingService)),setColorPicker:fe=>W=fe,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=N,this._register(this._standaloneColorPickerParticipant.renderHoverParts(K,[N])),W===void 0)return;this.body.classList.add("standalone-colorpicker-body"),this.body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this.body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this.body.tabIndex=0,this.body.appendChild(C),W.layout();let j=W.body,F=j.saturationBox.domNode.clientWidth,H=j.domNode.clientWidth-F-22-8,z=W.body.enterButton;z==null||z.onClicked(()=>{this.updateEditor(),this.hide()});let J=W.header;J.pickedColorNode.style.width=F+8+"px",J.originalColorNode.style.width=H+"px";let oe=W.header.closeButton;oe==null||oe.onClicked(()=>{this.hide()}),T&&(z&&(z.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(N.range)),this._editor.layoutContentWidget(this)}};E.ID="editor.contrib.standaloneColorPickerWidget",E=b([l(3,_.TG),l(4,h.q),l(5,x.d),l(6,f.p),l(7,r.c_)],E);class D{constructor(N,T){this.value=N,this.foundInEditor=T}}var L=t(4144);class k extends m.x1{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:(0,B.NC)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,B.NC)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:L.eH.CommandPalette}]})}runEditorCommand(N,T){var C;(C=w.get(T))===null||C===void 0||C.showOrFocus()}}class R extends m.R6{constructor(){super({id:"editor.action.hideColorPicker",label:(0,B.NC)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:d.u.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(N,T){var C;(C=w.get(T))===null||C===void 0||C.hide()}}class O extends m.R6{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,B.NC)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:d.u.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(N,T){var C;(C=w.get(T))===null||C===void 0||C.insertColor()}}(0,m.Qr)(R),(0,m.Qr)(O),(0,L.r1)(k)},3365:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(2258),B=t(6830),u=t(4314),I=t(9102),_=t(1381),A=t(9386),x=t(187),v=t(3860);class f{constructor(l,a,w){this.languageConfigurationService=w,this._selection=l,this._insertSpace=a,this._usedEndToken=null}static _haystackHasNeedleAtOffset(l,a,w){if(w<0)return!1;let E=a.length;if(w+E>l.length)return!1;for(let D=0;D<E;D++){let L=l.charCodeAt(w+D),k=a.charCodeAt(D);if(L!==k&&!(L>=65&&L<=90&&L+32===k||k>=65&&k<=90&&k+32===L))return!1}return!0}_createOperationsForBlockComment(l,a,w,E,D,L){let k=l.startLineNumber,R=l.startColumn,O=l.endLineNumber,$=l.endColumn,N=D.getLineContent(k),T=D.getLineContent(O),C,W=N.lastIndexOf(a,R-1+a.length),K=T.indexOf(w,$-1-w.length);if(W!==-1&&K!==-1)if(k===O)N.substring(W+a.length,K).indexOf(w)>=0&&(W=-1,K=-1);else{let j=N.substring(W+a.length),F=T.substring(0,K);(j.indexOf(w)>=0||F.indexOf(w)>=0)&&(W=-1,K=-1)}W!==-1&&K!==-1?(E&&W+a.length<N.length&&N.charCodeAt(W+a.length)===32&&(a+=" "),E&&K>0&&T.charCodeAt(K-1)===32&&(w=" "+w,K-=1),C=f._createRemoveBlockCommentOperations(new u.e(k,W+a.length+1,O,K+1),a,w)):(C=f._createAddBlockCommentOperations(l,a,w,this._insertSpace),this._usedEndToken=C.length===1?w:null);for(let j of C)L.addTrackedEditOperation(j.range,j.text)}static _createRemoveBlockCommentOperations(l,a,w){let E=[];return u.e.isEmpty(l)?E.push(A.h.delete(new u.e(l.startLineNumber,l.startColumn-a.length,l.endLineNumber,l.endColumn+w.length))):(E.push(A.h.delete(new u.e(l.startLineNumber,l.startColumn-a.length,l.startLineNumber,l.startColumn))),E.push(A.h.delete(new u.e(l.endLineNumber,l.endColumn,l.endLineNumber,l.endColumn+w.length)))),E}static _createAddBlockCommentOperations(l,a,w,E){let D=[];return u.e.isEmpty(l)?D.push(A.h.replace(new u.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn),a+"  "+w)):(D.push(A.h.insert(new x.L(l.startLineNumber,l.startColumn),a+(E?" ":""))),D.push(A.h.insert(new x.L(l.endLineNumber,l.endColumn),(E?" ":"")+w))),D}getEditOperations(l,a){let w=this._selection.startLineNumber,E=this._selection.startColumn;l.tokenization.tokenizeIfCheap(w);let D=l.getLanguageIdAtPosition(w,E),L=this.languageConfigurationService.getLanguageConfiguration(D).comments;L&&L.blockCommentStartToken&&L.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,L.blockCommentStartToken,L.blockCommentEndToken,this._insertSpace,l,a)}computeCursorState(l,a){let w=a.getInverseEditOperations();if(w.length===2){let E=w[0],D=w[1];return new v.Y(E.range.endLineNumber,E.range.endColumn,D.range.startLineNumber,D.range.startColumn)}{let E=w[0].range,D=this._usedEndToken?-this._usedEndToken.length-1:0;return new v.Y(E.endLineNumber,E.endColumn+D,E.endLineNumber,E.endColumn+D)}}}var d=t(7295);class o{constructor(l,a,w,E,D,L,k){this.languageConfigurationService=l,this._selection=a,this._tabSize=w,this._type=E,this._insertSpace=D,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=L,this._ignoreFirstLine=k||!1}static _gatherPreflightCommentStrings(l,a,w,E){l.tokenization.tokenizeIfCheap(a);let D=l.getLanguageIdAtPosition(a,1),L=E.getLanguageConfiguration(D).comments,k=L?L.lineCommentToken:null;if(!k)return null;let R=[];for(let O=0,$=w-a+1;O<$;O++)R[O]={ignore:!1,commentStr:k,commentStrOffset:0,commentStrLength:k.length};return R}static _analyzeLines(l,a,w,E,D,L,k,R){let O,$=!0;O=l===0||l!==1;for(let N=0,T=E.length;N<T;N++){let C=E[N],W=D+N;if(W===D&&k){C.ignore=!0;continue}let K=w.getLineContent(W),j=d.LC(K);if(j!==-1){if($=!1,C.ignore=!1,C.commentStrOffset=j,O&&!f._haystackHasNeedleAtOffset(K,C.commentStr,j)&&(l===0?O=!1:l===1||(C.ignore=!0)),O&&a){let F=j+C.commentStrLength;F<K.length&&K.charCodeAt(F)===32&&(C.commentStrLength+=1)}}else C.ignore=L,C.commentStrOffset=K.length}if(l===0&&$){O=!1;for(let N=0,T=E.length;N<T;N++)E[N].ignore=!1}return{supported:!0,shouldRemoveComments:O,lines:E}}static _gatherPreflightData(l,a,w,E,D,L,k,R){let O=o._gatherPreflightCommentStrings(w,E,D,R);return O===null?{supported:!1}:o._analyzeLines(l,a,w,O,E,L,k,R)}_executeLineComments(l,a,w,E){let D;w.shouldRemoveComments?D=o._createRemoveLineCommentsOperations(w.lines,E.startLineNumber):(o._normalizeInsertionPoint(l,w.lines,E.startLineNumber,this._tabSize),D=this._createAddLineCommentsOperations(w.lines,E.startLineNumber));let L=new x.L(E.positionLineNumber,E.positionColumn);for(let k=0,R=D.length;k<R;k++)a.addEditOperation(D[k].range,D[k].text),u.e.isEmpty(D[k].range)&&u.e.getStartPosition(D[k].range).equals(L)&&l.getLineContent(L.lineNumber).length+1===L.column&&(this._deltaColumn=(D[k].text||"").length);this._selectionId=a.trackSelection(E)}_attemptRemoveBlockComment(l,a,w,E){let D=a.startLineNumber,L=a.endLineNumber,k=E.length+Math.max(l.getLineFirstNonWhitespaceColumn(a.startLineNumber),a.startColumn),R=l.getLineContent(D).lastIndexOf(w,k-1),O=l.getLineContent(L).indexOf(E,a.endColumn-1-w.length);return R!==-1&&O===-1&&(O=l.getLineContent(D).indexOf(E,R+w.length),L=D),R===-1&&O!==-1&&(R=l.getLineContent(L).lastIndexOf(w,O),D=L),!a.isEmpty()||R!==-1&&O!==-1||(R=l.getLineContent(D).indexOf(w),R!==-1&&(O=l.getLineContent(D).indexOf(E,R+w.length))),R!==-1&&l.getLineContent(D).charCodeAt(R+w.length)===32&&(w+=" "),O!==-1&&l.getLineContent(L).charCodeAt(O-1)===32&&(E=" "+E,O-=1),R!==-1&&O!==-1?f._createRemoveBlockCommentOperations(new u.e(D,R+w.length+1,L,O+1),w,E):null}_executeBlockComment(l,a,w){l.tokenization.tokenizeIfCheap(w.startLineNumber);let E=l.getLanguageIdAtPosition(w.startLineNumber,1),D=this.languageConfigurationService.getLanguageConfiguration(E).comments;if(!D||!D.blockCommentStartToken||!D.blockCommentEndToken)return;let L=D.blockCommentStartToken,k=D.blockCommentEndToken,R=this._attemptRemoveBlockComment(l,w,L,k);if(!R){if(w.isEmpty()){let O=l.getLineContent(w.startLineNumber),$=d.LC(O);$===-1&&($=O.length),R=f._createAddBlockCommentOperations(new u.e(w.startLineNumber,$+1,w.startLineNumber,O.length+1),L,k,this._insertSpace)}else R=f._createAddBlockCommentOperations(new u.e(w.startLineNumber,l.getLineFirstNonWhitespaceColumn(w.startLineNumber),w.endLineNumber,l.getLineMaxColumn(w.endLineNumber)),L,k,this._insertSpace);R.length===1&&(this._deltaColumn=L.length+1)}this._selectionId=a.trackSelection(w);for(let O of R)a.addEditOperation(O.range,O.text)}getEditOperations(l,a){let w=this._selection;if(this._moveEndPositionDown=!1,w.startLineNumber===w.endLineNumber&&this._ignoreFirstLine)return a.addEditOperation(new u.e(w.startLineNumber,l.getLineMaxColumn(w.startLineNumber),w.startLineNumber+1,1),w.startLineNumber===l.getLineCount()?"":`
`),void(this._selectionId=a.trackSelection(w));w.startLineNumber<w.endLineNumber&&w.endColumn===1&&(this._moveEndPositionDown=!0,w=w.setEndPosition(w.endLineNumber-1,l.getLineMaxColumn(w.endLineNumber-1)));let E=o._gatherPreflightData(this._type,this._insertSpace,l,w.startLineNumber,w.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return E.supported?this._executeLineComments(l,a,E,w):this._executeBlockComment(l,a,w)}computeCursorState(l,a){let w=a.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(w=w.setEndPosition(w.endLineNumber+1,1)),new v.Y(w.selectionStartLineNumber,w.selectionStartColumn+this._deltaColumn,w.positionLineNumber,w.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(l,a){let w=[];for(let E=0,D=l.length;E<D;E++){let L=l[E];L.ignore||w.push(A.h.delete(new u.e(a+E,L.commentStrOffset+1,a+E,L.commentStrOffset+L.commentStrLength+1)))}return w}_createAddLineCommentsOperations(l,a){let w=[],E=this._insertSpace?" ":"";for(let D=0,L=l.length;D<L;D++){let k=l[D];k.ignore||w.push(A.h.insert(new x.L(a+D,k.commentStrOffset+1),k.commentStr+E))}return w}static nextVisibleColumn(l,a,w,E){return w?l+(a-l%a):l+E}static _normalizeInsertionPoint(l,a,w,E){let D,L,k=1073741824;for(let R=0,O=a.length;R<O;R++){if(a[R].ignore)continue;let $=l.getLineContent(w+R),N=0;for(let T=0,C=a[R].commentStrOffset;N<k&&T<C;T++)N=o.nextVisibleColumn(N,E,$.charCodeAt(T)===9,1);N<k&&(k=N)}k=Math.floor(k/E)*E;for(let R=0,O=a.length;R<O;R++){if(a[R].ignore)continue;let $=l.getLineContent(w+R),N=0;for(D=0,L=a[R].commentStrOffset;N<k&&D<L;D++)N=o.nextVisibleColumn(N,E,$.charCodeAt(D)===9,1);a[R].commentStrOffset=N>k?D-1:D}}}var h=t(3580),r=t(4144);class i extends B.R6{constructor(l,a){super(a),this._type=l}run(l,a){let w=l.get(_.c_);if(!a.hasModel())return;let E=[],D=a.getModel().getOptions(),L=a.getOption(21),k=a.getSelections().map((O,$)=>({selection:O,index:$,ignoreFirstLine:!1}));k.sort((O,$)=>u.e.compareRangesUsingStarts(O.selection,$.selection));let R=k[0];for(let O=1;O<k.length;O++){let $=k[O];R.selection.endLineNumber===$.selection.startLineNumber&&(R.index<$.index?$.ignoreFirstLine=!0:(R.ignoreFirstLine=!0,R=$))}for(let O of k)E.push(new o(w,O.selection,D.tabSize,this._type,L.insertSpace,L.ignoreEmptyLines,O.ignoreFirstLine));a.pushUndoStop(),a.executeCommands(this.id,E),a.pushUndoStop()}}class c extends B.R6{constructor(){super({id:"editor.action.blockComment",label:h.NC("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:I.u.writable,kbOpts:{kbExpr:I.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:r.eH.MenubarEditMenu,group:"5_insert",title:h.NC({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(l,a){let w=l.get(_.c_);if(!a.hasModel())return;let E=a.getOption(21),D=[],L=a.getSelections();for(let k of L)D.push(new f(k,E.insertSpace,w));a.pushUndoStop(),a.executeCommands(this.id,D),a.pushUndoStop()}}(0,B.Qr)(class extends i{constructor(){super(0,{id:"editor.action.commentLine",label:h.NC("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:I.u.writable,kbOpts:{kbExpr:I.u.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:r.eH.MenubarEditMenu,group:"5_insert",title:h.NC({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,B.Qr)(class extends i{constructor(){super(1,{id:"editor.action.addCommentLine",label:h.NC("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:I.u.writable,kbOpts:{kbExpr:I.u.editorTextFocus,primary:(0,m.gx)(2089,2081),weight:100}})}}),(0,B.Qr)(class extends i{constructor(){super(2,{id:"editor.action.removeCommentLine",label:h.NC("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:I.u.writable,kbOpts:{kbExpr:I.u.editorTextFocus,primary:(0,m.gx)(2089,2099),weight:100}})}}),(0,B.Qr)(c)},3740:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ContextMenuController:()=>b});var m=t(5321),B=t(8609),u=t(4741),I=t(5976),_=t(1432),A=t(6830),x=t(9102),v=t(3580),f=t(4144),d=t(3983),o=t(5606),h=t(1847),r=t(3108),i=t(382),c=function(a,w){return function(E,D){w(E,D,a)}};let b=class zl{static get(w){return w.getContribution(zl.ID)}constructor(w,E,D,L,k,R,O,$){this._contextMenuService=E,this._contextViewService=D,this._contextKeyService=L,this._keybindingService=k,this._menuService=R,this._configurationService=O,this._workspaceContextService=$,this._toDispose=new I.SL,this._contextMenuIsBeingShownCount=0,this._editor=w,this._toDispose.add(this._editor.onContextMenu(N=>this._onContextMenu(N))),this._toDispose.add(this._editor.onMouseWheel(N=>{if(this._contextMenuIsBeingShownCount>0){let T=this._contextViewService.getContextViewElement(),C=N.srcElement;C.shadowRoot&&m.Ay(T)===C.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(N=>{this._editor.getOption(22)&&N.keyCode===58&&(N.preventDefault(),N.stopPropagation(),this.showContextMenu())}))}_onContextMenu(w){if(!this._editor.hasModel())return;if(!this._editor.getOption(22))return this._editor.focus(),void(w.target.position&&!this._editor.getSelection().containsPosition(w.target.position)&&this._editor.setPosition(w.target.position));if(w.target.type===12||w.target.type===6&&w.target.detail.injectedText)return;if(w.event.preventDefault(),w.event.stopPropagation(),w.target.type===11)return this._showScrollbarContextMenu({x:w.event.posx-1,width:2,y:w.event.posy-1,height:2});if(w.target.type!==6&&w.target.type!==7&&w.target.type!==1)return;if(this._editor.focus(),w.target.position){let D=!1;for(let L of this._editor.getSelections())if(L.containsPosition(w.target.position)){D=!0;break}D||this._editor.setPosition(w.target.position)}let E=null;w.target.type!==1&&(E={x:w.event.posx-1,width:2,y:w.event.posy-1,height:2}),this.showContextMenu(E)}showContextMenu(w){if(!this._editor.getOption(22)||!this._editor.hasModel())return;let E=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?f.eH.SimpleEditorContext:f.eH.EditorContext);E.length>0&&this._doShowContextMenu(E,w)}_getMenuActions(w,E){let D=[],L=this._menuService.createMenu(E,this._contextKeyService),k=L.getActions({arg:w.uri});L.dispose();for(let R of k){let[,O]=R,$=0;for(let N of O)if(N instanceof f.NZ){let T=this._getMenuActions(w,N.item.submenu);T.length>0&&(D.push(new u.wY(N.id,N.label,T)),$++)}else D.push(N),$++;$&&D.push(new u.Z0)}return D.length&&D.pop(),D}_doShowContextMenu(w,E=null){if(!this._editor.hasModel())return;let D=this._editor.getOption(58);if(this._editor.updateOptions({hover:{enabled:!1}}),!E){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let k=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),R=m.i(this._editor.getDomNode()),O=R.left+k.left,$=R.top+k.top+k.height;E={x:O,y:$}}let L=this._editor.getOption(122)&&!_.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:L?this._editor.getDomNode():void 0,getAnchor:()=>E,getActions:()=>w,getActionViewItem:k=>{let R=this._keybindingFor(k);if(R)return new B.gU(k,k,{label:!0,keybinding:R.getLabel(),isMenu:!0});let O=k;return typeof O.getActionViewItem=="function"?O.getActionViewItem():new B.gU(k,k,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:k=>this._keybindingFor(k),onHide:k=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:D})}})}_showScrollbarContextMenu(w){if(!this._editor.hasModel()||(0,i.x)(this._workspaceContextService.getWorkspace()))return;let E=this._editor.getOption(70),D=0,L=$=>({id:"menu-action-"+ ++D,label:$.label,tooltip:"",class:void 0,enabled:$.enabled===void 0||$.enabled,checked:$.checked,run:$.run}),k=($,N,T,C,W)=>{if(!N)return L({label:$,enabled:N,run:()=>{}});let K=F=>()=>{this._configurationService.updateValue(T,F)},j=[];for(let F of W)j.push(L({label:F.label,checked:C===F.value,run:K(F.value)}));return((F,H)=>new u.wY("menu-action-"+ ++D,F,H,void 0))($,j)},R=[];R.push(L({label:v.NC("context.minimap.minimap","Minimap"),checked:E.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!E.enabled)}})),R.push(new u.Z0),R.push(L({label:v.NC("context.minimap.renderCharacters","Render Characters"),enabled:E.enabled,checked:E.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!E.renderCharacters)}})),R.push(k(v.NC("context.minimap.size","Vertical size"),E.enabled,"editor.minimap.size",E.size,[{label:v.NC("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:v.NC("context.minimap.size.fill","Fill"),value:"fill"},{label:v.NC("context.minimap.size.fit","Fit"),value:"fit"}])),R.push(k(v.NC("context.minimap.slider","Slider"),E.enabled,"editor.minimap.showSlider",E.showSlider,[{label:v.NC("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:v.NC("context.minimap.slider.always","Always"),value:"always"}]));let O=this._editor.getOption(122)&&!_.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:O?this._editor.getDomNode():void 0,getAnchor:()=>w,getActions:()=>R,onHide:$=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(w){return this._keybindingService.lookupKeybinding(w.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};b.ID="editor.contrib.contextmenu",b=function(a,w,E,D){var L,k=arguments.length,R=k<3?w:D===null?D=Object.getOwnPropertyDescriptor(w,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(a,w,E,D);else for(var O=a.length-1;O>=0;O--)(L=a[O])&&(R=(k<3?L(R):k>3?L(w,E,R):L(w,E))||R);return k>3&&R&&Object.defineProperty(w,E,R),R}([c(1,o.i),c(2,o.u),c(3,d.i6),c(4,h.d),c(5,f.co),c(6,r.Ui),c(7,i.ec)],b);class l extends A.R6{constructor(){super({id:"editor.action.showContextMenu",label:v.NC("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:x.u.textInputFocus,primary:1092,weight:100}})}run(w,E){var D;(D=b.get(E))===null||D===void 0||D.showContextMenu()}}(0,A._K)(b.ID,b,2),(0,A.Qr)(l)},4907:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(800),u=t(5321),I=t(5393),_=t(3278),A=t(5976),x=t(1170),v=t(6663),f=t(8e3),d=t(2944),o=t(6007),h=t(4314),r=t(3860),i=t(1922),c=t(6467),b=t(4074),l=t(5084),a=t(3580),w=t(4972),E=t(3108),D=t(2065),L=function(C,W){return function(K,j){W(K,j,C)}},k=function(C,W,K,j){return new(K||(K=Promise))(function(F,H){function z(fe){try{oe(j.next(fe))}catch(q){H(q)}}function J(fe){try{oe(j.throw(fe))}catch(q){H(q)}}function oe(fe){var q;fe.done?F(fe.value):(q=fe.value,q instanceof K?q:new K(function(p){p(q)})).then(z,J)}oe((j=j.apply(C,W||[])).next())})};let R="application/vnd.code.copyMetadata",O=class extends A.JT{constructor(C,W,K,j,F,H){super(),this._bulkEditService=K,this._clipboardService=j,this._configurationService=F,this._languageFeaturesService=H,this.operationIdPool=0,this._editor=C;let z=C.getContainerDomNode();this._register((0,u.nm)(z,"copy",J=>this.handleCopy(J))),this._register((0,u.nm)(z,"cut",J=>this.handleCopy(J))),this._register((0,u.nm)(z,"paste",J=>this.handlePaste(J),!0)),this._pasteProgressManager=this._register(new b.InlineProgressManager("pasteIntoEditor",C,W))}arePasteActionsEnabled(C){return!!this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:C.uri})||C.uri.scheme===v.lg.vscodeNotebookCell}handleCopy(C){var W;if(!C.clipboardData||!this._editor.hasTextFocus())return;let K=this._editor.getModel(),j=this._editor.getSelections();if(!K||!(j!=null&&j.length)||!this.arePasteActionsEnabled(K))return;let F=[...j],H=j[0],z=H.isEmpty();if(z){if(!this._editor.getOption(35))return;F[0]=new h.e(H.startLineNumber,0,H.startLineNumber,K.getLineLength(H.startLineNumber))}let J=this._languageFeaturesService.documentPasteEditProvider.ordered(K).filter(p=>!!p.prepareDocumentPaste);if(!J.length)return void this.setCopyMetadata(C.clipboardData,{wasFromEmptySelection:z});let oe=(0,d.B)(C.clipboardData),fe=(0,f.R)();this.setCopyMetadata(C.clipboardData,{id:fe,wasFromEmptySelection:z});let q=(0,I.PG)(p=>k(this,void 0,void 0,function*(){let re=yield Promise.all(J.map(ne=>ne.prepareDocumentPaste(K,F,oe,p)));for(let ne of re)ne==null||ne.forEach((ie,se)=>{oe.replace(se,ie)});return oe}));(W=this._currentClipboardItem)===null||W===void 0||W.dataTransferPromise.cancel(),this._currentClipboardItem={handle:fe,dataTransferPromise:q}}setCopyMetadata(C,W){C.setData(R,JSON.stringify(W))}handlePaste(C){var W,K;return k(this,void 0,void 0,function*(){if(!C.clipboardData||!this._editor.hasTextFocus())return;let j=this.operationIdPool++;(W=this._currentOperation)===null||W===void 0||W.promise.cancel(),this._pasteProgressManager.clear();let F=this._editor.getSelections();if(!(F!=null&&F.length)||!this._editor.hasModel())return;let H=this._editor.getModel();if(!this.arePasteActionsEnabled(H))return;let z,J=(K=C.clipboardData)===null||K===void 0?void 0:K.getData(R);J&&typeof J=="string"&&(z=JSON.parse(J));let oe=this._languageFeaturesService.documentPasteEditProvider.ordered(H);if(!oe.length)return;C.preventDefault(),C.stopImmediatePropagation();let fe=(0,I.PG)(q=>k(this,void 0,void 0,function*(){var p,re,ne,ie;let se=this._editor;if(!se.hasModel())return;let ce=new c.Dl(se,3,void 0,q);try{this._pasteProgressManager.setAtPosition(F[0].getEndPosition(),(0,a.NC)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),{cancel:()=>ce.cancel()});let be=(0,d.B)(C.clipboardData);if(z!=null&&z.id&&((p=this._currentClipboardItem)===null||p===void 0?void 0:p.handle)===z.id){let U=yield this._currentClipboardItem.dataTransferPromise;if(ce.token.isCancellationRequested)return;U.forEach((ue,ve)=>{be.replace(ve,ue)})}if(!be.has(x.v.uriList)){let U=yield this._clipboardService.readResources();if(ce.token.isCancellationRequested)return;U.length&&be.append(x.v.uriList,(0,_.ZO)(_.Z0.create(U)))}be.delete(R);let de=yield this.getProviderPasteEdit(oe,be,H,F,ce.token);if(ce.token.isCancellationRequested)return;if(de){let U=typeof de.insertText=="string"?l.Yj.escape(de.insertText):de.insertText.snippet,ue={edits:[new o.Gl(H.uri,{range:r.Y.liftSelection(se.getSelection()),text:U,insertAsSnippet:!0}),...(ne=(re=de.additionalEdit)===null||re===void 0?void 0:re.edits)!==null&&ne!==void 0?ne:[]]};return void(yield this._bulkEditService.apply(ue,{editor:se}))}yield this.applyDefaultPasteHandler(be,z,ce.token)}finally{ce.dispose(),((ie=this._currentOperation)===null||ie===void 0?void 0:ie.id)===j&&(this._pasteProgressManager.clear(),this._currentOperation=void 0)}}));this._currentOperation={id:j,promise:fe}})}getProviderPasteEdit(C,W,K,j,F){return(0,I.eP)((()=>k(this,void 0,void 0,function*(){for(let H of C){if(F.isCancellationRequested)return;if(!$(H,W))continue;let z=yield H.provideDocumentPasteEdits(K,j,W,F);if(z)return z}}))(),F)}applyDefaultPasteHandler(C,W,K){var j;return k(this,void 0,void 0,function*(){let F=(j=C.get(x.v.text))!==null&&j!==void 0?j:C.get("text");if(!F)return;let H=yield F.asString();K.isCancellationRequested||this._editor.trigger("keyboard","paste",{text:H,pasteOnNewLine:W==null?void 0:W.wasFromEmptySelection,multicursorText:null})})}};function $(C,W){return C.pasteMimeTypes.some(K=>W.matches(K))}O.ID="editor.contrib.copyPasteActionController",O=function(C,W,K,j){var F,H=arguments.length,z=H<3?W:j===null?j=Object.getOwnPropertyDescriptor(W,K):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(C,W,K,j);else for(var J=C.length-1;J>=0;J--)(F=C[J])&&(z=(H<3?F(z):H>3?F(W,K,z):F(W,K))||z);return H>3&&z&&Object.defineProperty(W,K,z),z}([L(1,D.TG),L(2,o.vu),L(3,w.p),L(4,E.Ui),L(5,i.p)],O);var N=t(3193),T=t(9872);(0,m._K)(O.ID,O,0),T.B.as(N.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},B.wk),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:a.NC("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}))},1895:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CursorRedo:()=>f,CursorUndo:()=>v,CursorUndoRedoController:()=>x});var m=t(5976),B=t(6830),u=t(9102),I=t(3580);class _{constructor(o){this.selections=o}equals(o){let h=this.selections.length;if(h!==o.selections.length)return!1;for(let r=0;r<h;r++)if(!this.selections[r].equalsSelection(o.selections[r]))return!1;return!0}}class A{constructor(o,h,r){this.cursorState=o,this.scrollTop=h,this.scrollLeft=r}}class x extends m.JT{static get(o){return o.getContribution(x.ID)}constructor(o){super(),this._editor=o,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(o.onDidChangeModel(h=>{this._undoStack=[],this._redoStack=[]})),this._register(o.onDidChangeModelContent(h=>{this._undoStack=[],this._redoStack=[]})),this._register(o.onDidChangeCursorSelection(h=>{if(this._isCursorUndoRedo||!h.oldSelections||h.oldModelVersionId!==h.modelVersionId)return;let r=new _(h.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(r)||(this._undoStack.push(new A(r,o.getScrollTop(),o.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){this._editor.hasModel()&&this._undoStack.length!==0&&(this._redoStack.push(new A(new _(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&this._redoStack.length!==0&&(this._undoStack.push(new A(new _(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(o){this._isCursorUndoRedo=!0,this._editor.setSelections(o.cursorState.selections),this._editor.setScrollPosition({scrollTop:o.scrollTop,scrollLeft:o.scrollLeft}),this._isCursorUndoRedo=!1}}x.ID="editor.contrib.cursorUndoRedoController";class v extends B.R6{constructor(){super({id:"cursorUndo",label:I.NC("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:u.u.textInputFocus,primary:2099,weight:100}})}run(o,h,r){var i;(i=x.get(h))===null||i===void 0||i.cursorUndo()}}class f extends B.R6{constructor(){super({id:"cursorRedo",label:I.NC("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(o,h,r){var i;(i=x.get(h))===null||i===void 0||i.cursorRedo()}}(0,B._K)(x.ID,x,0),(0,B.Qr)(v),(0,B.Qr)(f)},6022:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{DragAndDropController:()=>d});var m=t(5976),B=t(1432),u=t(6830),I=t(187),_=t(4314),A=t(3860),x=t(3654);class v{constructor(h,r,i){this.selection=h,this.targetPosition=r,this.copy=i,this.targetSelection=null}getEditOperations(h,r){let i=h.getValueInRange(this.selection);this.copy||r.addEditOperation(this.selection,null),r.addEditOperation(new _.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new A.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new A.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new A.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new A.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new A.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(h,r){return this.targetSelection}}function f(o){return B.dz?o.altKey:o.ctrlKey}class d extends m.JT{constructor(h){super(),this._editor=h,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(r=>this._onEditorMouseDown(r))),this._register(this._editor.onMouseUp(r=>this._onEditorMouseUp(r))),this._register(this._editor.onMouseDrag(r=>this._onEditorMouseDrag(r))),this._register(this._editor.onMouseDrop(r=>this._onEditorMouseDrop(r))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(r=>this.onEditorKeyDown(r))),this._register(this._editor.onKeyUp(r=>this.onEditorKeyUp(r))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(h){this._editor.getOption(33)&&!this._editor.getOption(20)&&(f(h)&&(this._modifierPressed=!0),this._mouseDown&&f(h)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(h){this._editor.getOption(33)&&!this._editor.getOption(20)&&(f(h)&&(this._modifierPressed=!1),this._mouseDown&&h.keyCode===d.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(h){this._mouseDown=!0}_onEditorMouseUp(h){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(h){let r=h.target;if(this._dragSelection===null){let i=(this._editor.getSelections()||[]).filter(c=>r.position&&c.containsPosition(r.position));if(i.length!==1)return;this._dragSelection=i[0]}f(h.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),r.position&&(this._dragSelection.containsPosition(r.position)?this._removeDecoration():this.showAt(r.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(h){if(h.target&&(this._hitContent(h.target)||this._hitMargin(h.target))&&h.target.position){let r=new I.L(h.target.position.lineNumber,h.target.position.column);if(this._dragSelection===null){let i=null;if(h.event.shiftKey){let c=this._editor.getSelection();if(c){let{selectionStartLineNumber:b,selectionStartColumn:l}=c;i=[new A.Y(b,l,r.lineNumber,r.column)]}}else i=(this._editor.getSelections()||[]).map(c=>c.containsPosition(r)?new A.Y(r.lineNumber,r.column,r.lineNumber,r.column):c);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(r)||(f(h.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(r)||this._dragSelection.getStartPosition().equals(r)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(d.ID,new v(this._dragSelection,r,f(h.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(h){this._dndDecorationIds.set([{range:new _.e(h.lineNumber,h.column,h.lineNumber,h.column),options:d._DECORATION_OPTIONS}]),this._editor.revealPosition(h,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(h){return h.type===6||h.type===7}_hitMargin(h){return h.type===2||h.type===3||h.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}d.ID="editor.contrib.dragAndDrop",d.TRIGGER_KEY_VALUE=B.dz?6:5,d._DECORATION_OPTIONS=x.qx.register({description:"dnd-target",className:"dnd-target"}),(0,u._K)(d.ID,d,2)},6917:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(1050),B=t(8401),u=t(666),I=t(8216),_=t(335),A=t(4565);A.P.registerCommand("_executeDocumentSymbolProvider",function(x,...v){return f=this,d=void 0,h=function*(){let[r]=v;(0,B.p_)(u.o.isUri(r));let i=x.get(_.Je),c=x.get(I.S),b=yield c.createModelReference(r);try{return(yield i.getOrCreate(b.object.textEditorModel,m.T.None)).getTopLevelSymbols()}finally{b.dispose()}},new((o=void 0)||(o=Promise))(function(r,i){function c(a){try{l(h.next(a))}catch(w){i(w)}}function b(a){try{l(h.throw(a))}catch(w){i(w)}}function l(a){var w;a.done?r(a.value):(w=a.value,w instanceof o?w:new o(function(E){E(w)})).then(c,b)}l((h=h.apply(f,d||[])).next())});var f,d,o,h})},335:(ut,Ie,t)=>{"use strict";t.d(Ie,{C3:()=>a,H3:()=>l,Je:()=>w,sT:()=>b});var m=t(9488),B=t(1050),u=t(7301),I=t(3725),_=t(3702),A=t(187),x=t(4314),v=t(8191),f=t(2065),d=t(5026),o=t(3733),h=t(5976),r=t(1922),i=function(D,L){return function(k,R){L(k,R,D)}};class c{remove(){var L;(L=this.parent)===null||L===void 0||L.children.delete(this.id)}static findId(L,k){let R;typeof L=="string"?R=`${k.id}/${L}`:(R=`${k.id}/${L.name}`,k.children.get(R)!==void 0&&(R=`${k.id}/${L.name}_${L.range.startLineNumber}_${L.range.startColumn}`));let O=R;for(let $=0;k.children.get(O)!==void 0;$++)O=`${R}_${$}`;return O}static empty(L){return L.children.size===0}}class b extends c{constructor(L,k,R){super(),this.id=L,this.parent=k,this.symbol=R,this.children=new Map}}class l extends c{constructor(L,k,R,O){super(),this.id=L,this.parent=k,this.label=R,this.order=O,this.children=new Map}}class a extends c{static create(L,k,R){let O=new B.A(R),$=new a(k.uri),N=L.ordered(k),T=N.map((W,K)=>{var j;let F=c.findId(`provider_${K}`,$),H=new l(F,$,(j=W.displayName)!==null&&j!==void 0?j:"Unknown Outline Provider",K);return Promise.resolve(W.provideDocumentSymbols(k,O.token)).then(z=>{for(let J of z||[])a._makeOutlineElement(J,H);return H},z=>((0,u.Cp)(z),H)).then(z=>{c.empty(z)?z.remove():$._groups.set(F,z)})}),C=L.onDidChange(()=>{let W=L.ordered(k);(0,m.fS)(W,N)||O.cancel()});return Promise.all(T).then(()=>O.token.isCancellationRequested&&!R.isCancellationRequested?a.create(L,k,R):$._compact()).finally(()=>{C.dispose()})}static _makeOutlineElement(L,k){let R=c.findId(L,k),O=new b(R,k,L);if(L.children)for(let $ of L.children)a._makeOutlineElement($,O);k.children.set(O.id,O)}constructor(L){super(),this.uri=L,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let L=0;for(let[k,R]of this._groups)R.children.size===0?this._groups.delete(k):L+=1;if(L!==1)this.children=this._groups;else{let k=I.$.first(this._groups.values());for(let[,R]of k.children)R.parent=this,this.children.set(R.id,R)}return this}getTopLevelSymbols(){let L=[];for(let k of this.children.values())k instanceof b?L.push(k.symbol):L.push(...I.$.map(k.children.values(),R=>R.symbol));return L.sort((k,R)=>x.e.compareRangesUsingStarts(k.range,R.range))}asListOfDocumentSymbols(){let L=this.getTopLevelSymbols(),k=[];return a._flattenDocumentSymbols(k,L,""),k.sort((R,O)=>A.L.compare(x.e.getStartPosition(R.range),x.e.getStartPosition(O.range))||A.L.compare(x.e.getEndPosition(O.range),x.e.getEndPosition(R.range)))}static _flattenDocumentSymbols(L,k,R){for(let O of k)L.push({kind:O.kind,tags:O.tags,name:O.name,detail:O.detail,containerName:O.containerName||R,range:O.range,selectionRange:O.selectionRange,children:void 0}),O.children&&a._flattenDocumentSymbols(L,O.children,O.name)}}let w=(0,f.yh)("IOutlineModelService"),E=class{constructor(D,L,k){this._languageFeaturesService=D,this._disposables=new h.SL,this._cache=new _.z6(10,.7),this._debounceInformation=L.for(D.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(k.onModelRemoved(R=>{this._cache.delete(R.id)}))}dispose(){this._disposables.dispose()}getOrCreate(D,L){return k=this,R=void 0,$=function*(){let N=this._languageFeaturesService.documentSymbolProvider,T=N.ordered(D),C=this._cache.get(D.id);if(!C||C.versionId!==D.getVersionId()||!(0,m.fS)(C.provider,T)){let K=new B.A;C={versionId:D.getVersionId(),provider:T,promiseCnt:0,source:K,promise:a.create(N,D,K.token),model:void 0},this._cache.set(D.id,C);let j=Date.now();C.promise.then(F=>{C.model=F,this._debounceInformation.update(D,Date.now()-j)}).catch(F=>{this._cache.delete(D.id)})}if(C.model)return C.model;C.promiseCnt+=1;let W=L.onCancellationRequested(()=>{--C.promiseCnt==0&&(C.source.cancel(),this._cache.delete(D.id))});try{return yield C.promise}finally{W.dispose()}},new((O=void 0)||(O=Promise))(function(N,T){function C(j){try{K($.next(j))}catch(F){T(F)}}function W(j){try{K($.throw(j))}catch(F){T(F)}}function K(j){var F;j.done?N(j.value):(F=j.value,F instanceof O?F:new O(function(H){H(F)})).then(C,W)}K(($=$.apply(k,R||[])).next())});var k,R,O,$}};E=function(D,L,k,R){var O,$=arguments.length,N=$<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,k):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(D,L,k,R);else for(var T=D.length-1;T>=0;T--)(O=D[T])&&(N=($<3?O(N):$>3?O(L,k,N):O(L,k))||N);return $>3&&N&&Object.defineProperty(L,k,N),N}([i(0,r.p),i(1,v.A),i(2,o.q)],E),(0,d.z)(w,E,1)},2111:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{DropIntoEditorController:()=>de});var m=t(9488),B=t(5393),u=t(3278),I=t(5976),_=t(2944),A=t(6830),x=t(6007),v=t(4314),f=t(1922);class d{constructor(ue){this.identifier=ue}}var o=t(5026),h=t(2065);let r=(0,h.yh)("treeViewsDndService");(0,o.z)(r,class{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(U){if(U&&this._dragOperations.has(U)){let ue=this._dragOperations.get(U);return this._dragOperations.delete(U),ue}}},1);var i=t(5321),c=t(3416),b=t(4741),l=t(4669),a=t(3580),w=t(3983),E=t(5606),D=t(1847),L=function(U,ue,ve,X){var ye,Ce=arguments.length,Ee=Ce<3?ue:X===null?X=Object.getOwnPropertyDescriptor(ue,ve):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ee=Reflect.decorate(U,ue,ve,X);else for(var Ae=U.length-1;Ae>=0;Ae--)(ye=U[Ae])&&(Ee=(Ce<3?ye(Ee):Ce>3?ye(ue,ve,Ee):ye(ue,ve))||Ee);return Ce>3&&Ee&&Object.defineProperty(ue,ve,Ee),Ee},k=function(U,ue){return function(ve,X){ue(ve,X,U)}};let R="editor.changeDropType",O=new w.uy("dropWidgetVisible",!1,(0,a.NC)("dropWidgetVisible","Whether the drop widget is showing")),$=class Ul extends I.JT{constructor(ue,ve,X,ye,Ce,Ee,Ae){super(),this.editor=ue,this.range=ve,this.edits=X,this.onSelectNewEdit=ye,this._contextMenuService=Ce,this._keybindingService=Ae,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.dropWidgetVisible=O.bindTo(Ee),this.dropWidgetVisible.set(!0),this._register((0,I.OF)(()=>this.dropWidgetVisible.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register((0,I.OF)(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(Fe=>{ve.containsPosition(Fe.position)||this.dispose()})),this._register(l.ju.runAndSubscribe(Ae.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var ue;let ve=(ue=this._keybindingService.lookupKeybinding(R))===null||ue===void 0?void 0:ue.getLabel();this.button.element.title=ve?(0,a.NC)("postDropWidgetTitleWithBinding","Show drop options... ({0})",ve):(0,a.NC)("postDropWidgetTitle","Show drop options...")}create(){this.domNode=i.$(".post-drop-widget"),this.button=this._register(new c.z(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(i.nm(this.domNode,i.tw.CLICK,()=>this.showDropSelector()))}getId(){return Ul.ID}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showDropSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{let ue=i.i(this.button.element);return{x:ue.left+ue.width,y:ue.top+ue.height}},getActions:()=>this.edits.allEdits.map((ue,ve)=>(0,b.xw)({id:"",label:ue.label,checked:ve===this.edits.activeEditIndex,run:()=>{if(ve!==this.edits.activeEditIndex)return this.onSelectNewEdit(ve)}}))})}};$.ID="editor.widget.postDropWidget",$=L([k(4,E.i),k(5,w.i6),k(6,D.d)],$);let N=class extends I.JT{constructor(U,ue){super(),this._editor=U,this._instantiationService=ue,this._currentWidget=this._register(new I.XK),this._register(l.ju.any(U.onDidChangeModel,U.onDidChangeModelContent)(()=>this.clear()))}show(U,ue,ve){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance($,this._editor,U,ue,ve))}clear(){this._currentWidget.clear()}changeExistingDropType(){var U;(U=this._currentWidget.value)===null||U===void 0||U.showDropSelector()}};N=L([k(1,h.TG)],N);var T=t(6467),C=t(4074),W=t(5084),K=t(6021),j=t(382),F=t(1170),H=t(6663),z=t(5935),J=t(666),oe=function(U,ue,ve,X){return new(ve||(ve=Promise))(function(ye,Ce){function Ee(_e){try{Fe(X.next(_e))}catch(te){Ce(te)}}function Ae(_e){try{Fe(X.throw(_e))}catch(te){Ce(te)}}function Fe(_e){var te;_e.done?ye(_e.value):(te=_e.value,te instanceof ve?te:new ve(function(Le){Le(te)})).then(Ee,Ae)}Fe((X=X.apply(U,ue||[])).next())})};class fe{constructor(){this.dropMimeTypes=[F.v.text,"text"]}provideDocumentOnDropEdits(ue,ve,X,ye){var Ce;return oe(this,void 0,void 0,function*(){let Ee=(Ce=X.get("text"))!==null&&Ce!==void 0?Ce:X.get(F.v.text);if(!Ee||X.has(F.v.uriList))return;let Ae=yield Ee.asString();return{label:(0,a.NC)("defaultDropProvider.text.label","Insert Plain Text"),insertText:Ae}})}}class q{constructor(){this.dropMimeTypes=[F.v.uriList]}provideDocumentOnDropEdits(ue,ve,X,ye){return oe(this,void 0,void 0,function*(){let Ce=yield re(X);if(!Ce.length||ye.isCancellationRequested)return;let Ee=0,Ae=Ce.map(({uri:_e,originalText:te})=>_e.scheme===H.lg.file?_e.fsPath:(Ee++,te)).join(" "),Fe;return Fe=Ee>0?Ce.length>1?(0,a.NC)("defaultDropProvider.uriList.uris","Insert Uris"):(0,a.NC)("defaultDropProvider.uriList.uri","Insert Uri"):Ce.length>1?(0,a.NC)("defaultDropProvider.uriList.paths","Insert Paths"):(0,a.NC)("defaultDropProvider.uriList.path","Insert Path"),{insertText:Ae,label:Fe}})}}let p=class{constructor(U){this._workspaceContextService=U,this.dropMimeTypes=[F.v.uriList]}provideDocumentOnDropEdits(U,ue,ve,X){return oe(this,void 0,void 0,function*(){let ye=yield re(ve);if(!ye.length||X.isCancellationRequested)return;let Ce=(0,m.kX)(ye.map(({uri:Ee})=>{let Ae=this._workspaceContextService.getWorkspaceFolder(Ee);return Ae?(0,z.lX)(Ae.uri,Ee):void 0}));return Ce.length?{insertText:Ce.join(" "),label:ye.length>1?(0,a.NC)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,a.NC)("defaultDropProvider.uriList.relativePath","Insert Relative Path")}:void 0})}};function re(U){return oe(this,void 0,void 0,function*(){let ue=U.get(F.v.uriList);if(!ue)return[];let ve=yield ue.asString(),X=[];for(let ye of u.Z0.parse(ve))try{X.push({uri:J.o.parse(ye),originalText:ye})}catch(Ce){}return X})}var ne,ie;p=function(U,ue,ve,X){var ye,Ce=arguments.length,Ee=Ce<3?ue:X===null?X=Object.getOwnPropertyDescriptor(ue,ve):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ee=Reflect.decorate(U,ue,ve,X);else for(var Ae=U.length-1;Ae>=0;Ae--)(ye=U[Ae])&&(Ee=(Ce<3?ye(Ee):Ce>3?ye(ue,ve,Ee):ye(ue,ve))||Ee);return Ce>3&&Ee&&Object.defineProperty(ue,ve,Ee),Ee}([(ne=0,ie=j.ec,function(U,ue){ie(U,ue,ne)})],p);let se=!1;var ce=function(U,ue){return function(ve,X){ue(ve,X,U)}},be=function(U,ue,ve,X){return new(ve||(ve=Promise))(function(ye,Ce){function Ee(_e){try{Fe(X.next(_e))}catch(te){Ce(te)}}function Ae(_e){try{Fe(X.throw(_e))}catch(te){Ce(te)}}function Fe(_e){var te;_e.done?ye(_e.value):(te=_e.value,te instanceof ve?te:new ve(function(Le){Le(te)})).then(Ee,Ae)}Fe((X=X.apply(U,ue||[])).next())})};let de=class Kl extends I.JT{static get(ue){return ue.getContribution(Kl.ID)}constructor(ue,ve,X,ye,Ce,Ee){super(),this._bulkEditService=ye,this._languageFeaturesService=Ce,this._treeViewsDragAndDropService=Ee,this.operationIdPool=0,this.treeItemsTransfer=K.Ej.getInstance(),this._dropProgressManager=this._register(ve.createInstance(C.InlineProgressManager,"dropIntoEditor",ue)),this._postDropWidgetManager=this._register(ve.createInstance(N,ue)),this._register(ue.onDropIntoEditor(Ae=>this.onDropIntoEditor(ue,Ae.position,Ae.event))),function(Ae,Fe){se||(se=!0,Ae.documentOnDropEditProvider.register("*",new fe),Ae.documentOnDropEditProvider.register("*",new q),Ae.documentOnDropEditProvider.register("*",new p(Fe)))}(this._languageFeaturesService,X)}changeDropType(){this._postDropWidgetManager.changeExistingDropType()}onDropIntoEditor(ue,ve,X){var ye;return be(this,void 0,void 0,function*(){if(!X.dataTransfer||!ue.hasModel())return;(ye=this._currentOperation)===null||ye===void 0||ye.promise.cancel(),this._dropProgressManager.clear(),ue.focus(),ue.setPosition(ve);let Ce=this.operationIdPool++,Ee=(0,B.PG)(Ae=>be(this,void 0,void 0,function*(){var Fe;let _e=new T.Dl(ue,1,void 0,Ae);this._dropProgressManager.setAtPosition(ve,(0,a.NC)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),{cancel:()=>_e.cancel()});try{let te=yield this.extractDataTransferData(X);if(te.size===0||_e.token.isCancellationRequested)return;let Le=ue.getModel();if(!Le)return;let ke=this._languageFeaturesService.documentOnDropEditProvider.ordered(Le).filter(ee=>!ee.dropMimeTypes||ee.dropMimeTypes.some(me=>te.matches(me))),le=yield(0,B.eP)(Promise.all(ke.map(ee=>ee.provideDocumentOnDropEdits(Le,ve,te,_e.token))),_e.token);if(_e.token.isCancellationRequested)return;le&&(yield this.applyDropResult(ue,ve,0,(0,m.kX)(le),Ae))}finally{_e.dispose(),((Fe=this._currentOperation)===null||Fe===void 0?void 0:Fe.id)===Ce&&(this._dropProgressManager.clear(),this._currentOperation=void 0)}}));this._currentOperation={id:Ce,promise:Ee}})}extractDataTransferData(ue){return be(this,void 0,void 0,function*(){if(!ue.dataTransfer)return new u.Hl;let ve=(0,_.B)(ue.dataTransfer);if((0,_.d)(ve,ue),this.treeItemsTransfer.hasData(d.prototype)){let X=this.treeItemsTransfer.getData(d.prototype);if(Array.isArray(X))for(let ye of X){let Ce=yield this._treeViewsDragAndDropService.removeDragOperationTransfer(ye.identifier);if(Ce)for(let[Ee,Ae]of Ce.entries())ve.replace(Ee,Ae)}}return ve})}applyDropResult(ue,ve,X,ye,Ce){var Ee,Ae;return be(this,void 0,void 0,function*(){let Fe=ue.getModel();if(!Fe)return;let _e=ye[X];if(!_e)return;let te=typeof _e.insertText=="string"?W.Yj.escape(_e.insertText):_e.insertText.snippet,Le={edits:[new x.Gl(Fe.uri,{range:v.e.fromPositions(ve),text:te,insertAsSnippet:!0}),...(Ae=(Ee=_e.additionalEdit)===null||Ee===void 0?void 0:Ee.edits)!==null&&Ae!==void 0?Ae:[]]},ke=Fe.deltaDecorations([],[{range:v.e.fromPositions(ve),options:{description:"drop-line-suffix",stickiness:0}}]),le=yield this._bulkEditService.apply(Le,{editor:ue,token:Ce}),ee=Fe.getDecorationRange(ke[0]);Fe.deltaDecorations(ke,[]),le.isApplied&&ye.length>1&&ue.getOptions().get(34).showDropSelector==="afterDrop"&&this._postDropWidgetManager.show(ee!=null?ee:v.e.fromPositions(ve),{activeEditIndex:X,allEdits:ye},me=>be(this,void 0,void 0,function*(){yield Fe.undo(),this.applyDropResult(ue,ve,me,ye,Ce)}))})}};de.ID="editor.contrib.dropIntoEditorController",de=function(U,ue,ve,X){var ye,Ce=arguments.length,Ee=Ce<3?ue:X===null?X=Object.getOwnPropertyDescriptor(ue,ve):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ee=Reflect.decorate(U,ue,ve,X);else for(var Ae=U.length-1;Ae>=0;Ae--)(ye=U[Ae])&&(Ee=(Ce<3?ye(Ee):Ce>3?ye(ue,ve,Ee):ye(ue,ve))||Ee);return Ce>3&&Ee&&Object.defineProperty(ue,ve,Ee),Ee}([ce(1,h.TG),ce(2,j.ec),ce(3,x.vu),ce(4,f.p),ce(5,r)],de),(0,A._K)(de.ID,de,2),(0,A.fK)(new class extends A._l{constructor(){super({id:R,precondition:O,kbOpts:{weight:100,primary:2137}})}runEditorCommand(U,ue,ve){var X;(X=de.get(ue))===null||X===void 0||X.changeDropType()}})},6467:(ut,Ie,t)=>{"use strict";t.d(Ie,{yy:()=>i,Dl:()=>c,YQ:()=>b});var m=t(7295),B=t(4314),u=t(1050),I=t(5976),_=t(6830),A=t(3983),x=t(1741),v=t(2065),f=t(5026),d=t(3580);let o=(0,v.yh)("IEditorCancelService"),h=new A.uy("cancellableOperation",!1,(0,d.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,f.z)(o,class{constructor(){this._tokens=new WeakMap}add(l,a){let w,E=this._tokens.get(l);return E||(E=l.invokeWithinContext(D=>({key:h.bindTo(D.get(A.i6)),tokens:new x.S})),this._tokens.set(l,E)),E.key.set(!0),w=E.tokens.push(a),()=>{w&&(w(),E.key.set(!E.tokens.isEmpty()),w=void 0)}}cancel(l){let a=this._tokens.get(l);if(!a)return;let w=a.tokens.pop();w&&(w.cancel(),a.key.set(!a.tokens.isEmpty()))}},1);class r extends u.A{constructor(a,w){super(w),this.editor=a,this._unregister=a.invokeWithinContext(E=>E.get(o).add(a,this))}dispose(){this._unregister(),super.dispose()}}(0,_.fK)(new class extends _._l{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:h})}runEditorCommand(l,a){l.get(o).cancel(a)}});class i{constructor(a,w){if(this.flags=w,(1&this.flags)!=0){let E=a.getModel();this.modelVersionId=E?m.WU("{0}#{1}",E.uri.toString(),E.getVersionId()):null}else this.modelVersionId=null;4&this.flags?this.position=a.getPosition():this.position=null,2&this.flags?this.selection=a.getSelection():this.selection=null,8&this.flags?(this.scrollLeft=a.getScrollLeft(),this.scrollTop=a.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(a){if(!(a instanceof i))return!1;let w=a;return this.modelVersionId===w.modelVersionId&&this.scrollLeft===w.scrollLeft&&this.scrollTop===w.scrollTop&&!(!this.position&&w.position||this.position&&!w.position||this.position&&w.position&&!this.position.equals(w.position))&&!(!this.selection&&w.selection||this.selection&&!w.selection||this.selection&&w.selection&&!this.selection.equalsRange(w.selection))}validate(a){return this._equals(new i(a,this.flags))}}class c extends r{constructor(a,w,E,D){super(a,D),this._listener=new I.SL,4&w&&this._listener.add(a.onDidChangeCursorPosition(L=>{E&&B.e.containsPosition(E,L.position)||this.cancel()})),2&w&&this._listener.add(a.onDidChangeCursorSelection(L=>{E&&B.e.containsRange(E,L.selection)||this.cancel()})),8&w&&this._listener.add(a.onDidScrollChange(L=>this.cancel())),1&w&&(this._listener.add(a.onDidChangeModel(L=>this.cancel())),this._listener.add(a.onDidChangeModelContent(L=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class b extends u.A{constructor(a,w){super(w),this._listener=a.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}},1633:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CommonFindController:()=>Xe,FindController:()=>$e,MatchFindAction:()=>zt,MoveToMatchFindAction:()=>$t,NextMatchFindAction:()=>Jt,NextSelectionMatchFindAction:()=>ai,PreviousMatchFindAction:()=>Gt,PreviousSelectionMatchFindAction:()=>_i,SelectionMatchFindAction:()=>si,StartFindAction:()=>ot,StartFindReplaceAction:()=>Li,StartFindWithArgsAction:()=>Ot,StartFindWithSelectionAction:()=>ti,getSelectionSearchString:()=>Pe});var m=t(5393),B=t(5976),u=t(7295),I=t(6830),_=t(8625),A=t(9102),x=t(4973),v=t(9488),f=t(1329),d=t(187),o=t(4314),h=t(3860),r=t(7277),i=t(3654),c=t(3910),b=t(7781);class l{constructor(je){this._editor=je,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){let je=this._findScopeDecorationIds.map(mt=>this._editor.getModel().getDecorationRange(mt)).filter(mt=>!!mt);if(je.length)return je}return null}getStartPosition(){return this._startPosition}setStartPosition(je){this._startPosition=je,this.setCurrentFindMatch(null)}_getDecorationIndex(je){let mt=this._decorations.indexOf(je);return mt>=0?mt+1:1}getDecorationRangeAt(je){let mt=je<this._decorations.length?this._decorations[je]:null;return mt?this._editor.getModel().getDecorationRange(mt):null}getCurrentMatchesPosition(je){let mt=this._editor.getModel().getDecorationsInRange(je);for(let wt of mt){let Rt=wt.options;if(Rt===l._FIND_MATCH_DECORATION||Rt===l._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(wt.id)}return 0}setCurrentFindMatch(je){let mt=null,wt=0;if(je)for(let Rt=0,oi=this._decorations.length;Rt<oi;Rt++){let ei=this._editor.getModel().getDecorationRange(this._decorations[Rt]);if(je.equalsRange(ei)){mt=this._decorations[Rt],wt=Rt+1;break}}return this._highlightedDecorationId===null&&mt===null||this._editor.changeDecorations(Rt=>{if(this._highlightedDecorationId!==null&&(Rt.changeDecorationOptions(this._highlightedDecorationId,l._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),mt!==null&&(this._highlightedDecorationId=mt,Rt.changeDecorationOptions(this._highlightedDecorationId,l._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(Rt.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),mt!==null){let oi=this._editor.getModel().getDecorationRange(mt);if(oi.startLineNumber!==oi.endLineNumber&&oi.endColumn===1){let ei=oi.endLineNumber-1,yi=this._editor.getModel().getLineMaxColumn(ei);oi=new o.e(oi.startLineNumber,oi.startColumn,ei,yi)}this._rangeHighlightDecorationId=Rt.addDecoration(oi,l._RANGE_HIGHLIGHT_DECORATION)}}),wt}set(je,mt){this._editor.changeDecorations(wt=>{let Rt=l._FIND_MATCH_DECORATION,oi=[];if(je.length>1e3){Rt=l._FIND_MATCH_NO_OVERVIEW_DECORATION;let yi=this._editor.getModel().getLineCount(),ki=this._editor.getLayoutInfo().height/yi,Ti=Math.max(2,Math.ceil(3/ki)),Pi=je[0].range.startLineNumber,Ni=je[0].range.endLineNumber;for(let gn=1,Dn=je.length;gn<Dn;gn++){let Yt=je[gn].range;Ni+Ti>=Yt.startLineNumber?Yt.endLineNumber>Ni&&(Ni=Yt.endLineNumber):(oi.push({range:new o.e(Pi,1,Ni,1),options:l._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),Pi=Yt.startLineNumber,Ni=Yt.endLineNumber)}oi.push({range:new o.e(Pi,1,Ni,1),options:l._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let ei=new Array(je.length);for(let yi=0,ki=je.length;yi<ki;yi++)ei[yi]={range:je[yi].range,options:Rt};this._decorations=wt.deltaDecorations(this._decorations,ei),this._overviewRulerApproximateDecorations=wt.deltaDecorations(this._overviewRulerApproximateDecorations,oi),this._rangeHighlightDecorationId&&(wt.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(yi=>wt.removeDecoration(yi)),this._findScopeDecorationIds=[]),mt!=null&&mt.length&&(this._findScopeDecorationIds=mt.map(yi=>wt.addDecoration(yi,l._FIND_SCOPE_DECORATION)))})}matchBeforePosition(je){if(this._decorations.length===0)return null;for(let mt=this._decorations.length-1;mt>=0;mt--){let wt=this._decorations[mt],Rt=this._editor.getModel().getDecorationRange(wt);if(Rt&&!(Rt.endLineNumber>je.lineNumber)&&(Rt.endLineNumber<je.lineNumber||!(Rt.endColumn>je.column)))return Rt}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(je){if(this._decorations.length===0)return null;for(let mt=0,wt=this._decorations.length;mt<wt;mt++){let Rt=this._decorations[mt],oi=this._editor.getModel().getDecorationRange(Rt);if(oi&&!(oi.startLineNumber<je.lineNumber)&&(oi.startLineNumber>je.lineNumber||!(oi.startColumn<je.column)))return oi}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let je=[];return je=je.concat(this._decorations),je=je.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&je.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&je.push(this._rangeHighlightDecorationId),je}}l._CURRENT_FIND_MATCH_DECORATION=i.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,b.EN)(c.Fm_),position:x.sh.Center},minimap:{color:(0,b.EN)(c.SUY),position:x.F5.Inline}}),l._FIND_MATCH_DECORATION=i.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,b.EN)(c.Fm_),position:x.sh.Center},minimap:{color:(0,b.EN)(c.SUY),position:x.F5.Inline}}),l._FIND_MATCH_NO_OVERVIEW_DECORATION=i.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),l._FIND_MATCH_ONLY_OVERVIEW_DECORATION=i.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,b.EN)(c.Fm_),position:x.sh.Center}}),l._RANGE_HIGHLIGHT_DECORATION=i.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),l._FIND_SCOPE_DECORATION=i.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});class a{constructor(je,mt,wt){this._editorSelection=je,this._ranges=mt,this._replaceStrings=wt,this._trackedEditorSelectionId=null}getEditOperations(je,mt){if(this._ranges.length>0){let wt=[];for(let ei=0;ei<this._ranges.length;ei++)wt.push({range:this._ranges[ei],text:this._replaceStrings[ei]});wt.sort((ei,yi)=>o.e.compareRangesUsingStarts(ei.range,yi.range));let Rt=[],oi=wt[0];for(let ei=1;ei<wt.length;ei++)oi.range.endLineNumber===wt[ei].range.startLineNumber&&oi.range.endColumn===wt[ei].range.startColumn?(oi.range=oi.range.plusRange(wt[ei].range),oi.text=oi.text+wt[ei].text):(Rt.push(oi),oi=wt[ei]);Rt.push(oi);for(let ei of Rt)mt.addEditOperation(ei.range,ei.text)}this._trackedEditorSelectionId=mt.trackSelection(this._editorSelection)}computeCursorState(je,mt){return mt.getTrackedSelection(this._trackedEditorSelectionId)}}function w(qt,je){if(qt&&qt[0]!==""){let mt=E(qt,je,"-"),wt=E(qt,je,"_");return mt&&!wt?D(qt,je,"-"):!mt&&wt?D(qt,je,"_"):qt[0].toUpperCase()===qt[0]?je.toUpperCase():qt[0].toLowerCase()===qt[0]?je.toLowerCase():u.Kw(qt[0][0])&&je.length>0?je[0].toUpperCase()+je.substr(1):qt[0][0].toUpperCase()!==qt[0][0]&&je.length>0?je[0].toLowerCase()+je.substr(1):je}return je}function E(qt,je,mt){return qt[0].indexOf(mt)!==-1&&je.indexOf(mt)!==-1&&qt[0].split(mt).length===je.split(mt).length}function D(qt,je,mt){let wt=je.split(mt),Rt=qt[0].split(mt),oi="";return wt.forEach((ei,yi)=>{oi+=w([Rt[yi]],ei)+mt}),oi.slice(0,-1)}class L{constructor(je){this.staticValue=je,this.kind=0}}class k{constructor(je){this.pieces=je,this.kind=1}}class R{static fromStaticValue(je){return new R([O.staticValue(je)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(je){je&&je.length!==0?je.length===1&&je[0].staticValue!==null?this._state=new L(je[0].staticValue):this._state=new k(je):this._state=new L("")}buildReplaceString(je,mt){if(this._state.kind===0)return mt?w(je,this._state.staticValue):this._state.staticValue;let wt="";for(let Rt=0,oi=this._state.pieces.length;Rt<oi;Rt++){let ei=this._state.pieces[Rt];if(ei.staticValue!==null){wt+=ei.staticValue;continue}let yi=R._substitute(ei.matchIndex,je);if(ei.caseOps!==null&&ei.caseOps.length>0){let ki=[],Ti=ei.caseOps.length,Pi=0;for(let Ni=0,gn=yi.length;Ni<gn;Ni++){if(Pi>=Ti){ki.push(yi.slice(Ni));break}switch(ei.caseOps[Pi]){case"U":ki.push(yi[Ni].toUpperCase());break;case"u":ki.push(yi[Ni].toUpperCase()),Pi++;break;case"L":ki.push(yi[Ni].toLowerCase());break;case"l":ki.push(yi[Ni].toLowerCase()),Pi++;break;default:ki.push(yi[Ni])}}yi=ki.join("")}wt+=yi}return wt}static _substitute(je,mt){if(mt===null)return"";if(je===0)return mt[0];let wt="";for(;je>0;){if(je<mt.length)return(mt[je]||"")+wt;wt=String(je%10)+wt,je=Math.floor(je/10)}return"$"+wt}}class O{static staticValue(je){return new O(je,-1,null)}static caseOps(je,mt){return new O(null,je,mt)}constructor(je,mt,wt){this.staticValue=je,this.matchIndex=mt,wt&&wt.length!==0?this.caseOps=wt.slice(0):this.caseOps=null}}class ${constructor(je){this._source=je,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(je){this._emitStatic(this._source.substring(this._lastCharIndex,je)),this._lastCharIndex=je}emitStatic(je,mt){this._emitStatic(je),this._lastCharIndex=mt}_emitStatic(je){je.length!==0&&(this._currentStaticPiece+=je)}emitMatchIndex(je,mt,wt){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=O.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=O.caseOps(je,wt),this._lastCharIndex=mt}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=O.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new R(this._result)}}var N=t(3983);let T=new N.uy("findWidgetVisible",!1),C=(T.toNegated(),new N.uy("findInputFocussed",!1)),W=new N.uy("replaceInputFocussed",!1),K={primary:545,mac:{primary:2593}},j={primary:565,mac:{primary:2613}},F={primary:560,mac:{primary:2608}},H={primary:554,mac:{primary:2602}},z={primary:558,mac:{primary:2606}},J="editor.action.nextMatchFindAction",oe="editor.action.previousMatchFindAction",fe="closeFindWidget",q="toggleFindCaseSensitive",p="toggleFindWholeWord",re="toggleFindRegex",ne="toggleFindInSelection",ie="togglePreserveCase",se="editor.action.replaceOne",ce="editor.action.replaceAll",be=19999;class de{constructor(je,mt){this._toDispose=new B.SL,this._editor=je,this._state=mt,this._isDisposed=!1,this._startSearchingTimer=new m._F,this._decorations=new l(je),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new m.pY(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(wt=>{wt.reason!==3&&wt.reason!==5&&wt.reason!==6||this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(wt=>{this._ignoreModelContentChanged||(wt.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(wt=>this._onStateChanged(wt))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,B.B9)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(je){!this._isDisposed&&this._editor.hasModel()&&(je.searchString||je.isReplaceRevealed||je.isRegex||je.wholeWord||je.matchCase||je.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{je.searchScope?this.research(je.moveCursor,this._state.searchScope):this.research(je.moveCursor)},240)):je.searchScope?this.research(je.moveCursor,this._state.searchScope):this.research(je.moveCursor))}static _getSearchRange(je,mt){return mt||je.getFullModelRange()}research(je,mt){let wt=null;mt!==void 0?mt!==null&&(wt=Array.isArray(mt)?mt:[mt]):wt=this._decorations.getFindScopes(),wt!==null&&(wt=wt.map(yi=>{if(yi.startLineNumber!==yi.endLineNumber){let ki=yi.endLineNumber;return yi.endColumn===1&&(ki-=1),new o.e(yi.startLineNumber,1,ki,this._editor.getModel().getLineMaxColumn(ki))}return yi}));let Rt=this._findMatches(wt,!1,be);this._decorations.set(Rt,wt);let oi=this._editor.getSelection(),ei=this._decorations.getCurrentMatchesPosition(oi);if(ei===0&&Rt.length>0){let yi=(0,v.lG)(Rt.map(ki=>ki.range),ki=>o.e.compareRangesUsingStarts(ki,oi)>=0);ei=yi>0?yi-1+1:ei}this._state.changeMatchInfo(ei,this._decorations.getCount(),void 0),je&&this._editor.getOption(39).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let je=this._decorations.getFindScope();return je&&this._editor.revealRangeInCenterIfOutsideViewport(je,0),!0}return!1}_setCurrentFindMatch(je){let mt=this._decorations.setCurrentFindMatch(je);this._state.changeMatchInfo(mt,this._decorations.getCount(),je),this._editor.setSelection(je),this._editor.revealRangeInCenterIfOutsideViewport(je,0)}_prevSearchPosition(je){let mt=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:wt,column:Rt}=je,oi=this._editor.getModel();return mt||Rt===1?(wt===1?wt=oi.getLineCount():wt--,Rt=oi.getLineMaxColumn(wt)):Rt--,new d.L(wt,Rt)}_moveToPrevMatch(je,mt=!1){if(!this._state.canNavigateBack()){let Pi=this._decorations.matchAfterPosition(je);return void(Pi&&this._setCurrentFindMatch(Pi))}if(this._decorations.getCount()<be){let Pi=this._decorations.matchBeforePosition(je);return Pi&&Pi.isEmpty()&&Pi.getStartPosition().equals(je)&&(je=this._prevSearchPosition(je),Pi=this._decorations.matchBeforePosition(je)),void(Pi&&this._setCurrentFindMatch(Pi))}if(this._cannotFind())return;let wt=this._decorations.getFindScope(),Rt=de._getSearchRange(this._editor.getModel(),wt);Rt.getEndPosition().isBefore(je)&&(je=Rt.getEndPosition()),je.isBefore(Rt.getStartPosition())&&(je=Rt.getEndPosition());let{lineNumber:oi,column:ei}=je,yi=this._editor.getModel(),ki=new d.L(oi,ei),Ti=yi.findPreviousMatch(this._state.searchString,ki,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,!1);return Ti&&Ti.range.isEmpty()&&Ti.range.getStartPosition().equals(ki)&&(ki=this._prevSearchPosition(ki),Ti=yi.findPreviousMatch(this._state.searchString,ki,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,!1)),Ti?mt||Rt.containsRange(Ti.range)?void this._setCurrentFindMatch(Ti.range):this._moveToPrevMatch(Ti.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(je){let mt=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:wt,column:Rt}=je,oi=this._editor.getModel();return mt||Rt===oi.getLineMaxColumn(wt)?(wt===oi.getLineCount()?wt=1:wt++,Rt=1):Rt++,new d.L(wt,Rt)}_moveToNextMatch(je){if(!this._state.canNavigateForward()){let wt=this._decorations.matchBeforePosition(je);return void(wt&&this._setCurrentFindMatch(wt))}if(this._decorations.getCount()<be){let wt=this._decorations.matchAfterPosition(je);return wt&&wt.isEmpty()&&wt.getStartPosition().equals(je)&&(je=this._nextSearchPosition(je),wt=this._decorations.matchAfterPosition(je)),void(wt&&this._setCurrentFindMatch(wt))}let mt=this._getNextMatch(je,!1,!0);mt&&this._setCurrentFindMatch(mt.range)}_getNextMatch(je,mt,wt,Rt=!1){if(this._cannotFind())return null;let oi=this._decorations.getFindScope(),ei=de._getSearchRange(this._editor.getModel(),oi);ei.getEndPosition().isBefore(je)&&(je=ei.getStartPosition()),je.isBefore(ei.getStartPosition())&&(je=ei.getStartPosition());let{lineNumber:yi,column:ki}=je,Ti=this._editor.getModel(),Pi=new d.L(yi,ki),Ni=Ti.findNextMatch(this._state.searchString,Pi,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,mt);return wt&&Ni&&Ni.range.isEmpty()&&Ni.range.getStartPosition().equals(Pi)&&(Pi=this._nextSearchPosition(Pi),Ni=Ti.findNextMatch(this._state.searchString,Pi,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,mt)),Ni?Rt||ei.containsRange(Ni.range)?Ni:this._getNextMatch(Ni.range.getEndPosition(),mt,wt,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(je){let mt=this._decorations.getDecorationRangeAt(je);mt&&this._setCurrentFindMatch(mt)}moveToMatch(je){this._moveToMatch(je)}_getReplacePattern(){return this._state.isRegex?function(je){if(!je||je.length===0)return new R(null);let mt=[],wt=new $(je);for(let Rt=0,oi=je.length;Rt<oi;Rt++){let ei=je.charCodeAt(Rt);if(ei!==92){if(ei===36){if(Rt++,Rt>=oi)break;let yi=je.charCodeAt(Rt);if(yi===36){wt.emitUnchanged(Rt-1),wt.emitStatic("$",Rt+1);continue}if(yi===48||yi===38){wt.emitUnchanged(Rt-1),wt.emitMatchIndex(0,Rt+1,mt),mt.length=0;continue}if(49<=yi&&yi<=57){let ki=yi-48;if(Rt+1<oi){let Ti=je.charCodeAt(Rt+1);if(48<=Ti&&Ti<=57){Rt++,ki=10*ki+(Ti-48),wt.emitUnchanged(Rt-2),wt.emitMatchIndex(ki,Rt+1,mt),mt.length=0;continue}}wt.emitUnchanged(Rt-1),wt.emitMatchIndex(ki,Rt+1,mt),mt.length=0;continue}}}else{if(Rt++,Rt>=oi)break;let yi=je.charCodeAt(Rt);switch(yi){case 92:wt.emitUnchanged(Rt-1),wt.emitStatic("\\",Rt+1);break;case 110:wt.emitUnchanged(Rt-1),wt.emitStatic(`
`,Rt+1);break;case 116:wt.emitUnchanged(Rt-1),wt.emitStatic("	",Rt+1);break;case 117:case 85:case 108:case 76:wt.emitUnchanged(Rt-1),wt.emitStatic("",Rt+1),mt.push(String.fromCharCode(yi))}}}return wt.finalize()}(this._state.replaceString):R.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let je=this._getReplacePattern(),mt=this._editor.getSelection(),wt=this._getNextMatch(mt.getStartPosition(),!0,!1);if(wt)if(mt.equalsRange(wt.range)){let Rt=je.buildReplaceString(wt.matches,this._state.preserveCase),oi=new f.T4(mt,Rt);this._executeEditorCommand("replace",oi),this._decorations.setStartPosition(new d.L(mt.startLineNumber,mt.startColumn+Rt.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(wt.range)}_findMatches(je,mt,wt){let Rt=(je||[null]).map(oi=>de._getSearchRange(this._editor.getModel(),oi));return this._editor.getModel().findMatches(this._state.searchString,Rt,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null,mt,wt)}replaceAll(){if(!this._hasMatches())return;let je=this._decorations.getFindScopes();je===null&&this._state.matchesCount>=be?this._largeReplaceAll():this._regularReplaceAll(je),this.research(!1)}_largeReplaceAll(){let je=new r.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(125):null).parseSearchRequest();if(!je)return;let mt=je.regex;if(!mt.multiline){let Pi="mu";mt.ignoreCase&&(Pi+="i"),mt.global&&(Pi+="g"),mt=new RegExp(mt.source,Pi)}let wt=this._editor.getModel(),Rt=wt.getValue(1),oi=wt.getFullModelRange(),ei=this._getReplacePattern(),yi,ki=this._state.preserveCase;yi=ei.hasReplacementPatterns||ki?Rt.replace(mt,function(){return ei.buildReplaceString(arguments,ki)}):Rt.replace(mt,ei.buildReplaceString(null,ki));let Ti=new f.hP(oi,yi,this._editor.getSelection());this._executeEditorCommand("replaceAll",Ti)}_regularReplaceAll(je){let mt=this._getReplacePattern(),wt=this._findMatches(je,mt.hasReplacementPatterns||this._state.preserveCase,1073741824),Rt=[];for(let ei=0,yi=wt.length;ei<yi;ei++)Rt[ei]=mt.buildReplaceString(wt[ei].matches,this._state.preserveCase);let oi=new a(this._editor.getSelection(),wt.map(ei=>ei.range),Rt);this._executeEditorCommand("replaceAll",oi)}selectAllMatches(){if(!this._hasMatches())return;let je=this._decorations.getFindScopes(),mt=this._findMatches(je,!1,1073741824).map(Rt=>new h.Y(Rt.range.startLineNumber,Rt.range.startColumn,Rt.range.endLineNumber,Rt.range.endColumn)),wt=this._editor.getSelection();for(let Rt=0,oi=mt.length;Rt<oi;Rt++)if(mt[Rt].equalsRange(wt)){mt=[wt].concat(mt.slice(0,Rt)).concat(mt.slice(Rt+1));break}this._editor.setSelections(mt)}_executeEditorCommand(je,mt){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(je,mt),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var U=t(5321),ue=t(1307),ve=t(3794);class X extends ve.${constructor(je,mt,wt){super(),this._hideSoon=this._register(new m.pY(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=je,this._state=mt,this._keybindingService=wt,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");let Rt={inputActiveOptionBorder:(0,c.n_1)(c.PRb),inputActiveOptionForeground:(0,c.n_1)(c.Pvw),inputActiveOptionBackground:(0,c.n_1)(c.XEs)};this.caseSensitive=this._register(new ue.rk(Object.assign({appendTitle:this._keybindingLabelFor(q),isChecked:this._state.matchCase},Rt))),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new ue.Qx(Object.assign({appendTitle:this._keybindingLabelFor(p),isChecked:this._state.wholeWord},Rt))),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new ue.eH(Object.assign({appendTitle:this._keybindingLabelFor(re),isChecked:this._state.isRegex},Rt))),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(oi=>{let ei=!1;oi.isRegex&&(this.regex.checked=this._state.isRegex,ei=!0),oi.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,ei=!0),oi.matchCase&&(this.caseSensitive.checked=this._state.matchCase,ei=!0),!this._state.isRevealed&&ei&&this._revealTemporarily()})),this._register(U.nm(this._domNode,U.tw.MOUSE_LEAVE,oi=>this._onMouseLeave())),this._register(U.nm(this._domNode,"mouseover",oi=>this._onMouseOver()))}_keybindingLabelFor(je){let mt=this._keybindingService.lookupKeybinding(je);return mt?` (${mt.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return X.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}X.ID="editor.contrib.findOptionsWidget";var ye=t(4669);function Ce(qt,je){return qt===1||qt!==2&&je}class Ee extends B.JT{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return Ce(this._isRegexOverride,this._isRegex)}get wholeWord(){return Ce(this._wholeWordOverride,this._wholeWord)}get matchCase(){return Ce(this._matchCaseOverride,this._matchCase)}get preserveCase(){return Ce(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new ye.Q5),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(je,mt,wt){let Rt={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},oi=!1;mt===0&&(je=0),je>mt&&(je=mt),this._matchesPosition!==je&&(this._matchesPosition=je,Rt.matchesPosition=!0,oi=!0),this._matchesCount!==mt&&(this._matchesCount=mt,Rt.matchesCount=!0,oi=!0),wt!==void 0&&(o.e.equalsRange(this._currentMatch,wt)||(this._currentMatch=wt,Rt.currentMatch=!0,oi=!0)),oi&&this._onFindReplaceStateChange.fire(Rt)}change(je,mt,wt=!0){var Rt;let oi={moveCursor:mt,updateHistory:wt,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},ei=!1,yi=this.isRegex,ki=this.wholeWord,Ti=this.matchCase,Pi=this.preserveCase;je.searchString!==void 0&&this._searchString!==je.searchString&&(this._searchString=je.searchString,oi.searchString=!0,ei=!0),je.replaceString!==void 0&&this._replaceString!==je.replaceString&&(this._replaceString=je.replaceString,oi.replaceString=!0,ei=!0),je.isRevealed!==void 0&&this._isRevealed!==je.isRevealed&&(this._isRevealed=je.isRevealed,oi.isRevealed=!0,ei=!0),je.isReplaceRevealed!==void 0&&this._isReplaceRevealed!==je.isReplaceRevealed&&(this._isReplaceRevealed=je.isReplaceRevealed,oi.isReplaceRevealed=!0,ei=!0),je.isRegex!==void 0&&(this._isRegex=je.isRegex),je.wholeWord!==void 0&&(this._wholeWord=je.wholeWord),je.matchCase!==void 0&&(this._matchCase=je.matchCase),je.preserveCase!==void 0&&(this._preserveCase=je.preserveCase),je.searchScope!==void 0&&(!((Rt=je.searchScope)===null||Rt===void 0)&&Rt.every(Ni=>{var gn;return(gn=this._searchScope)===null||gn===void 0?void 0:gn.some(Dn=>!o.e.equalsRange(Dn,Ni))})||(this._searchScope=je.searchScope,oi.searchScope=!0,ei=!0)),je.loop!==void 0&&this._loop!==je.loop&&(this._loop=je.loop,oi.loop=!0,ei=!0),je.isSearching!==void 0&&this._isSearching!==je.isSearching&&(this._isSearching=je.isSearching,oi.isSearching=!0,ei=!0),je.filters!==void 0&&(this._filters?this._filters.update(je.filters):this._filters=je.filters,oi.filters=!0,ei=!0),this._isRegexOverride=je.isRegexOverride!==void 0?je.isRegexOverride:0,this._wholeWordOverride=je.wholeWordOverride!==void 0?je.wholeWordOverride:0,this._matchCaseOverride=je.matchCaseOverride!==void 0?je.matchCaseOverride:0,this._preserveCaseOverride=je.preserveCaseOverride!==void 0?je.preserveCaseOverride:0,yi!==this.isRegex&&(ei=!0,oi.isRegex=!0),ki!==this.wholeWord&&(ei=!0,oi.wholeWord=!0),Ti!==this.matchCase&&(ei=!0,oi.matchCase=!0),Pi!==this.preserveCase&&(ei=!0,oi.preserveCase=!0),ei&&this._onFindReplaceStateChange.fire(oi)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=be}}var Ae=t(5152),Fe=t(2900),_e=t(3098),te=t(3046),Le=t(7301),ke=t(1432),le=t(3580),ee=t(2980);function me(qt){var je,mt;return((je=qt.lookupKeybinding("history.showPrevious"))===null||je===void 0?void 0:je.getElectronAccelerator())==="Up"&&((mt=qt.lookupKeybinding("history.showNext"))===null||mt===void 0?void 0:mt.getElectronAccelerator())==="Down"}var xe=t(9554),We=t(5670),Ve=t(2321),Ye=t(8401),tt=t(6253);let Qe=(0,xe.q5)("find-selection",te.l.selection,le.NC("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),bt=(0,xe.q5)("find-collapsed",te.l.chevronRight,le.NC("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),ht=(0,xe.q5)("find-expanded",te.l.chevronDown,le.NC("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),xt=(0,xe.q5)("find-replace",te.l.replace,le.NC("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Qt=(0,xe.q5)("find-replace-all",te.l.replaceAll,le.NC("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),At=(0,xe.q5)("find-previous-match",te.l.arrowUp,le.NC("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),mi=(0,xe.q5)("find-next-match",te.l.arrowDown,le.NC("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Lt=le.NC("label.find","Find"),ct=le.NC("placeholder.find","Find"),Kt=le.NC("label.previousMatchButton","Previous Match"),pi=le.NC("label.nextMatchButton","Next Match"),li=le.NC("label.toggleSelectionFind","Find in Selection"),Wi=le.NC("label.closeButton","Close"),Vi=le.NC("label.replace","Replace"),Xi=le.NC("placeholder.replace","Replace"),en=le.NC("label.replaceButton","Replace"),rn=le.NC("label.replaceAllButton","Replace All"),tn=le.NC("label.toggleReplaceButton","Toggle Replace"),yn=le.NC("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",be),sn=le.NC("label.matchesLocation","{0} of {1}"),ci=le.NC("label.noResults","No results"),Xt=419,kt=69,It="ctrlEnterReplaceAll.windows.donotask",ft=ke.dz?256:2048;class Mt{constructor(je){this.afterLineNumber=je,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function jt(qt,je,mt){let wt=!!je.match(/\n/);mt&&wt&&mt.selectionStart>0&&qt.stopPropagation()}function di(qt,je,mt){let wt=!!je.match(/\n/);mt&&wt&&mt.selectionEnd<mt.value.length&&qt.stopPropagation()}class fi extends ve.${constructor(je,mt,wt,Rt,oi,ei,yi,ki,Ti){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=je,this._controller=mt,this._state=wt,this._contextViewProvider=Rt,this._keybindingService=oi,this._contextKeyService=ei,this._storageService=ki,this._notificationService=Ti,this._ctrlEnterReplaceAllWarningPrompted=!!ki.getBoolean(It,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new m.vp(500),this._register((0,B.OF)(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(Pi=>this._onStateChanged(Pi))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(Pi=>{if(Pi.hasChanged(87)&&(this._codeEditor.getOption(87)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),Pi.hasChanged(139)&&this._tryUpdateWidgetWidth(),Pi.hasChanged(2)&&this.updateAccessibilitySupport(),Pi.hasChanged(39)){let Ni=this._codeEditor.getOption(39).loop;this._state.change({loop:Ni},!1);let gn=this._codeEditor.getOption(39).addExtraSpaceOnTop;gn&&!this._viewZone&&(this._viewZone=new Mt(0),this._showViewZone()),!gn&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>{return Pi=this,Ni=void 0,Dn=function*(){if(this._isVisible){let Yt=yield this._controller.getGlobalBufferTerm();Yt&&Yt!==this._state.searchString&&(this._state.change({searchString:Yt},!1),this._findInput.select())}},new((gn=void 0)||(gn=Promise))(function(Yt,Ai){function zi(pn){try{Ln(Dn.next(pn))}catch(_n){Ai(_n)}}function un(pn){try{Ln(Dn.throw(pn))}catch(_n){Ai(_n)}}function Ln(pn){var _n;pn.done?Yt(pn.value):(_n=pn.value,_n instanceof gn?_n:new gn(function(dn){dn(_n)})).then(zi,un)}Ln((Dn=Dn.apply(Pi,Ni||[])).next())});var Pi,Ni,gn,Dn})),this._findInputFocused=C.bindTo(ei),this._findFocusTracker=this._register(U.go(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=W.bindTo(ei),this._replaceFocusTracker=this._register(U.go(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(39).addExtraSpaceOnTop&&(this._viewZone=new Mt(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(Pi=>{Pi.scrollTopChanged?this._layoutViewZone():setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return fi.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(je){if(je.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(je.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),je.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),je.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(87)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=U.w(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(je.isRevealed||je.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),je.isRegex&&this._findInput.setRegex(this._state.isRegex),je.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),je.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),je.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),je.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),je.searchString||je.matchesCount||je.matchesPosition){let mt=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",mt),this._updateMatchesCount(),this._updateButtons()}(je.searchString||je.currentMatch)&&this._layoutViewZone(),je.updateHistory&&this._delayedUpdateHistory(),je.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Le.dL)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let je;if(this._matchesCount.style.minWidth=kt+"px",this._state.matchesCount>=be?this._matchesCount.title=yn:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let mt=String(this._state.matchesCount);this._state.matchesCount>=be&&(mt+="+");let wt=String(this._state.matchesPosition);wt==="0"&&(wt="?"),je=u.WU(sn,wt,mt)}else je=ci;this._matchesCount.appendChild(document.createTextNode(je)),(0,Ae.Z9)(this._getAriaLabel(je,this._state.currentMatch,this._state.searchString)),kt=Math.max(kt,this._matchesCount.clientWidth)}_getAriaLabel(je,mt,wt){if(je===ci)return wt===""?le.NC("ariaSearchNoResultEmpty","{0} found",je):le.NC("ariaSearchNoResult","{0} found for '{1}'",je,wt);if(mt){let Rt=le.NC("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",je,wt,mt.startLineNumber+":"+mt.startColumn),oi=this._codeEditor.getModel();return oi&&mt.startLineNumber<=oi.getLineCount()&&mt.startLineNumber>=1?`${oi.getLineContent(mt.startLineNumber)}, ${Rt}`:Rt}return le.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",je,wt)}_updateToggleSelectionFindButton(){let je=this._codeEditor.getSelection(),mt=!!je&&(je.startLineNumber!==je.endLineNumber||je.startColumn!==je.endColumn),wt=this._toggleSelectionFind.checked;this._isVisible&&(wt||mt)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let je=this._state.searchString.length>0,mt=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&je&&mt&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&je&&mt&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&je),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&je),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let wt=!this._codeEditor.getOption(87);this._toggleReplaceBtn.setEnabled(this._isVisible&&wt)}_reveal(){if(this._revealTimeouts.forEach(je=>{clearTimeout(je)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;let je=this._codeEditor.getSelection();switch(this._codeEditor.getOption(39).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{let wt=!!je&&je.startLineNumber!==je.endLineNumber;this._toggleSelectionFind.checked=wt;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let mt=!0;if(this._codeEditor.getOption(39).seedSearchStringFromSelection&&je){let wt=this._codeEditor.getDomNode();if(wt){let Rt=U.i(wt),oi=this._codeEditor.getScrolledVisiblePosition(je.getStartPosition()),ei=Rt.left+(oi?oi.left:0),yi=oi?oi.top:0;if(this._viewZone&&yi<this._viewZone.heightInPx){je.endLineNumber>je.startLineNumber&&(mt=!1);let ki=U.xQ(this._domNode).left;ei>ki&&(mt=!1);let Ti=this._codeEditor.getScrolledVisiblePosition(je.getEndPosition());Rt.left+(Ti?Ti.left:0)>ki&&(mt=!1)}}}this._showViewZone(mt)}}_hide(je){this._revealTimeouts.forEach(mt=>{clearTimeout(mt)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),je&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(je){if(!this._codeEditor.getOption(39).addExtraSpaceOnTop)return void this._removeViewZone();if(!this._isVisible)return;let mt=this._viewZone;this._viewZoneId===void 0&&mt&&this._codeEditor.changeViewZones(wt=>{mt.heightInPx=this._getHeight(),this._viewZoneId=wt.addZone(mt),this._codeEditor.setScrollTop(je||this._codeEditor.getScrollTop()+mt.heightInPx)})}_showViewZone(je=!0){if(!this._isVisible||!this._codeEditor.getOption(39).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new Mt(0));let mt=this._viewZone;this._codeEditor.changeViewZones(wt=>{if(this._viewZoneId!==void 0){let Rt=this._getHeight();if(Rt===mt.heightInPx)return;let oi=Rt-mt.heightInPx;return mt.heightInPx=Rt,wt.layoutZone(this._viewZoneId),void(je&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+oi))}{let Rt=this._getHeight();if(Rt-=this._codeEditor.getOption(81).top,Rt<=0)return;mt.heightInPx=Rt,this._viewZoneId=wt.addZone(mt),je&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+Rt)}})}_removeViewZone(){this._codeEditor.changeViewZones(je=>{this._viewZoneId!==void 0&&(je.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!U.Uw(this._domNode))return;let je=this._codeEditor.getLayoutInfo();if(je.contentWidth<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");let mt=je.width,wt=je.minimap.minimapWidth,Rt=!1,oi=!1,ei=!1;if(this._resized&&U.w(this._domNode)>Xt)return this._domNode.style.maxWidth=mt-28-wt-15+"px",void(this._replaceInput.width=U.w(this._findInput.domNode));if(447+wt>=mt&&(oi=!0),447+wt-kt>=mt&&(ei=!0),447+wt-kt>=mt+50&&(Rt=!0),this._domNode.classList.toggle("collapsed-find-widget",Rt),this._domNode.classList.toggle("narrow-find-widget",ei),this._domNode.classList.toggle("reduced-find-widget",oi),ei||Rt||(this._domNode.style.maxWidth=mt-28-wt-15+"px"),this._findInput.layout({collapsedFindWidget:Rt,narrowFindWidget:ei,reducedFindWidget:oi}),this._resized){let yi=this._findInput.inputBox.element.clientWidth;yi>0&&(this._replaceInput.width=yi)}else this._isReplaceVisible&&(this._replaceInput.width=U.w(this._findInput.domNode))}_getHeight(){let je=0;return je+=4,je+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(je+=4,je+=this._replaceInput.inputBox.height+2),je+=4,je}_tryUpdateHeight(){let je=this._getHeight();return(this._cachedHeight===null||this._cachedHeight!==je)&&(this._cachedHeight=je,this._domNode.style.height=`${je}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let je=this._codeEditor.getSelections();je.map(mt=>{mt.endColumn===1&&mt.endLineNumber>mt.startLineNumber&&(mt=mt.setEndPosition(mt.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(mt.endLineNumber-1)));let wt=this._state.currentMatch;return mt.startLineNumber===mt.endLineNumber||o.e.equalsRange(mt,wt)?null:mt}).filter(mt=>!!mt),je.length&&this._state.change({searchScope:je},!0)}}_onFindInputMouseDown(je){je.middleButton&&je.stopPropagation()}_onFindInputKeyDown(je){return je.equals(3|ft)?(this._keybindingService.dispatchEvent(je,je.target)||this._findInput.inputBox.insertAtCursor(`
`),void je.preventDefault()):je.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void je.preventDefault()):je.equals(2066)?(this._codeEditor.focus(),void je.preventDefault()):je.equals(16)?jt(je,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):je.equals(18)?di(je,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(je){return je.equals(3|ft)?(this._keybindingService.dispatchEvent(je,je.target)||(ke.ED&&ke.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(le.NC("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(It,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`)),void je.preventDefault()):je.equals(2)?(this._findInput.focusOnCaseSensitive(),void je.preventDefault()):je.equals(1026)?(this._findInput.focus(),void je.preventDefault()):je.equals(2066)?(this._codeEditor.focus(),void je.preventDefault()):je.equals(16)?jt(je,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):je.equals(18)?di(je,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(je){return 0}_keybindingLabelFor(je){let mt=this._keybindingService.lookupKeybinding(je);return mt?` (${mt.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new ee.Yb(null,this._contextViewProvider,{width:221,label:Lt,placeholder:ct,appendCaseSensitiveLabel:this._keybindingLabelFor(q),appendWholeWordsLabel:this._keybindingLabelFor(p),appendRegexLabel:this._keybindingLabelFor(re),validation:ei=>{if(ei.length===0||!this._findInput.getRegex())return null;try{return new RegExp(ei,"gu"),null}catch(yi){return{content:yi.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>me(this._keybindingService),inputBoxStyles:tt.Hc,toggleStyles:tt.pl},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(ei=>this._onFindInputKeyDown(ei))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(ei=>{ei.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),ei.preventDefault())})),this._register(this._findInput.onRegexKeyDown(ei=>{ei.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),ei.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(ei=>{this._tryUpdateHeight()&&this._showViewZone()})),ke.IJ&&this._register(this._findInput.onMouseDown(ei=>this._onFindInputMouseDown(ei))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Si({label:Kt+this._keybindingLabelFor(oe),icon:At,onTrigger:()=>{(0,Ye.cW)(this._codeEditor.getAction(oe)).run().then(void 0,Le.dL)}})),this._nextBtn=this._register(new Si({label:pi+this._keybindingLabelFor(J),icon:mi,onTrigger:()=>{(0,Ye.cW)(this._codeEditor.getAction(J)).run().then(void 0,Le.dL)}}));let je=document.createElement("div");je.className="find-part",je.appendChild(this._findInput.domNode);let mt=document.createElement("div");mt.className="find-actions",je.appendChild(mt),mt.appendChild(this._matchesCount),mt.appendChild(this._prevBtn.domNode),mt.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Fe.Z({icon:Qe,title:li+this._keybindingLabelFor(ne),isChecked:!1,inputActiveOptionBackground:(0,c.n_1)(c.XEs),inputActiveOptionBorder:(0,c.n_1)(c.PRb),inputActiveOptionForeground:(0,c.n_1)(c.Pvw)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let ei=this._codeEditor.getSelections();ei.map(yi=>(yi.endColumn===1&&yi.endLineNumber>yi.startLineNumber&&(yi=yi.setEndPosition(yi.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(yi.endLineNumber-1))),yi.isEmpty()?null:yi)).filter(yi=>!!yi),ei.length&&this._state.change({searchScope:ei},!0)}}else this._state.change({searchScope:null},!0)})),mt.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Si({label:Wi+this._keybindingLabelFor(fe),icon:xe.s_,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:ei=>{ei.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),ei.preventDefault())}})),mt.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new ee.Nq(null,void 0,{label:Vi,placeholder:Xi,appendPreserveCaseLabel:this._keybindingLabelFor(ie),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>me(this._keybindingService),inputBoxStyles:tt.Hc,toggleStyles:tt.pl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(ei=>this._onReplaceInputKeyDown(ei))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(ei=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(ei=>{ei.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),ei.preventDefault())})),this._replaceBtn=this._register(new Si({label:en+this._keybindingLabelFor(se),icon:xt,onTrigger:()=>{this._controller.replace()},onKeyDown:ei=>{ei.equals(1026)&&(this._closeBtn.focus(),ei.preventDefault())}})),this._replaceAllBtn=this._register(new Si({label:rn+this._keybindingLabelFor(ce),icon:Qt,onTrigger:()=>{this._controller.replaceAll()}}));let wt=document.createElement("div");wt.className="replace-part",wt.appendChild(this._replaceInput.domNode);let Rt=document.createElement("div");Rt.className="replace-actions",wt.appendChild(Rt),Rt.appendChild(this._replaceBtn.domNode),Rt.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Si({label:tn,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=U.w(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="419px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(je),this._domNode.appendChild(wt),this._resizeSash=new _e.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let oi=Xt;this._register(this._resizeSash.onDidStart(()=>{oi=U.w(this._domNode)})),this._register(this._resizeSash.onDidChange(ei=>{this._resized=!0;let yi=oi+ei.startX-ei.currentX;yi<Xt||yi>(parseFloat(U.Dx(this._domNode).maxWidth)||0)||(this._domNode.style.width=`${yi}px`,this._isReplaceVisible&&(this._replaceInput.width=U.w(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{let ei=U.w(this._domNode);if(ei<Xt)return;let yi=Xt;if(!this._resized||ei===Xt){let ki=this._codeEditor.getLayoutInfo();yi=ki.width-28-ki.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${yi}px`,this._isReplaceVisible&&(this._replaceInput.width=U.w(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){let je=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(je!==2)}}fi.ID="editor.contrib.findWidget";class Si extends ve.${constructor(je){super(),this._opts=je;let mt="button";this._opts.className&&(mt=mt+" "+this._opts.className),this._opts.icon&&(mt=mt+" "+We.k.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=mt,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,wt=>{this._opts.onTrigger(),wt.preventDefault()}),this.onkeydown(this._domNode,wt=>{var Rt,oi;if(wt.equals(10)||wt.equals(3))return this._opts.onTrigger(),void wt.preventDefault();(oi=(Rt=this._opts).onKeyDown)===null||oi===void 0||oi.call(Rt,wt)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(je){this._domNode.classList.toggle("disabled",!je),this._domNode.setAttribute("aria-disabled",String(!je)),this._domNode.tabIndex=je?0:-1}setExpanded(je){this._domNode.setAttribute("aria-expanded",String(!!je)),je?(this._domNode.classList.remove(...We.k.asClassNameArray(bt)),this._domNode.classList.add(...We.k.asClassNameArray(ht))):(this._domNode.classList.remove(...We.k.asClassNameArray(ht)),this._domNode.classList.add(...We.k.asClassNameArray(bt)))}}(0,b.Ic)((qt,je)=>{let mt=(Yt,Ai)=>{Ai&&je.addRule(`.monaco-editor ${Yt} { background-color: ${Ai}; }`)};mt(".findMatch",qt.getColor(c.MUv)),mt(".currentFindMatch",qt.getColor(c.nyM)),mt(".findScope",qt.getColor(c.jUe)),mt(".find-widget",qt.getColor(c.D0T));let wt=qt.getColor(c.rh);wt&&je.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${wt}; }`);let Rt=qt.getColor(c.A42);Rt&&je.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${Rt}; border-right: 1px solid ${Rt}; border-bottom: 1px solid ${Rt}; }`);let oi=qt.getColor(c.EiJ);oi&&je.addRule(`.monaco-editor .findMatch { border: 1px ${(0,Ve.c3)(qt.type)?"dotted":"solid"} ${oi}; box-sizing: border-box; }`);let ei=qt.getColor(c.pnM);ei&&je.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${ei}; padding: 1px; box-sizing: border-box; }`);let yi=qt.getColor(c.gkn);yi&&je.addRule(`.monaco-editor .findScope { border: 1px ${(0,Ve.c3)(qt.type)?"dashed":"solid"} ${yi}; }`);let ki=qt.getColor(c.lRK);ki&&je.addRule(`.monaco-editor .find-widget { border: 1px solid ${ki}; }`);let Ti=qt.getColor(c.Hfx);Ti&&je.addRule(`.monaco-editor .find-widget { color: ${Ti}; }`);let Pi=qt.getColor(c.Ido);Pi&&je.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${Pi}; }`);let Ni=qt.getColor(c.Ng6);if(Ni)je.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${Ni}; }`);else{let Yt=qt.getColor(c.D1_);Yt&&je.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${Yt}; }`)}let gn=qt.getColor(c.lUq);gn&&je.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${gn} !important;
		}
	`);let Dn=qt.getColor(c.R80);Dn&&je.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${Dn}; }`)});var Ri=t(4144),Wt=t(4972),Te=t(5606),Ze=t(1847),rt=t(9422),yt=t(1157),Nt=t(6904),dt=function(qt,je,mt,wt){var Rt,oi=arguments.length,ei=oi<3?je:wt===null?wt=Object.getOwnPropertyDescriptor(je,mt):wt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ei=Reflect.decorate(qt,je,mt,wt);else for(var yi=qt.length-1;yi>=0;yi--)(Rt=qt[yi])&&(ei=(oi<3?Rt(ei):oi>3?Rt(je,mt,ei):Rt(je,mt))||ei);return oi>3&&ei&&Object.defineProperty(je,mt,ei),ei},Re=function(qt,je){return function(mt,wt){je(mt,wt,qt)}},qe=function(qt,je,mt,wt){return new(mt||(mt=Promise))(function(Rt,oi){function ei(Ti){try{ki(wt.next(Ti))}catch(Pi){oi(Pi)}}function yi(Ti){try{ki(wt.throw(Ti))}catch(Pi){oi(Pi)}}function ki(Ti){var Pi;Ti.done?Rt(Ti.value):(Pi=Ti.value,Pi instanceof mt?Pi:new mt(function(Ni){Ni(Pi)})).then(ei,yi)}ki((wt=wt.apply(qt,je||[])).next())})};let Ue=524288;function Pe(qt,je="single",mt=!1){if(!qt.hasModel())return null;let wt=qt.getSelection();if(je==="single"&&wt.startLineNumber===wt.endLineNumber||je==="multiple"){if(wt.isEmpty()){let Rt=qt.getConfiguredWordAtPosition(wt.getStartPosition());if(Rt&&mt===!1)return Rt.word}else if(qt.getModel().getValueLengthInRange(wt)<Ue)return qt.getModel().getValueInRange(wt)}return null}let Xe=class jl extends B.JT{get editor(){return this._editor}static get(je){return je.getContribution(jl.ID)}constructor(je,mt,wt,Rt){super(),this._editor=je,this._findWidgetVisible=T.bindTo(mt),this._contextKeyService=mt,this._storageService=wt,this._clipboardService=Rt,this._updateHistoryDelayer=new m.vp(500),this._state=this._register(new Ee),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(oi=>this._onStateChanged(oi))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let oi=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),oi&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(39).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(je){this.saveQueryState(je),je.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),je.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(je){je.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),je.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),je.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),je.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!C.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let je=this._editor.getSelections();je.map(mt=>(mt.endColumn===1&&mt.endLineNumber>mt.startLineNumber&&(mt=mt.setEndPosition(mt.endLineNumber-1,this._editor.getModel().getLineMaxColumn(mt.endLineNumber-1))),mt.isEmpty()?null:mt)).filter(mt=>!!mt),je.length&&this._state.change({searchScope:je},!0)}}setSearchString(je){this._state.isRegex&&(je=u.ec(je)),this._state.change({searchString:je},!1)}highlightFindOptions(je=!1){}_start(je,mt){return qe(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let wt=Object.assign(Object.assign({},mt),{isRevealed:!0});if(je.seedSearchStringFromSelection==="single"){let Rt=Pe(this._editor,je.seedSearchStringFromSelection,je.seedSearchStringFromNonEmptySelection);Rt&&(this._state.isRegex?wt.searchString=u.ec(Rt):wt.searchString=Rt)}else if(je.seedSearchStringFromSelection==="multiple"&&!je.updateSearchScope){let Rt=Pe(this._editor,je.seedSearchStringFromSelection);Rt&&(wt.searchString=Rt)}if(!wt.searchString&&je.seedSearchStringFromGlobalClipboard){let Rt=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;Rt&&(wt.searchString=Rt)}if(je.forceRevealReplace||wt.isReplaceRevealed?wt.isReplaceRevealed=!0:this._findWidgetVisible.get()||(wt.isReplaceRevealed=!1),je.updateSearchScope){let Rt=this._editor.getSelections();Rt.some(oi=>!oi.isEmpty())&&(wt.searchScope=Rt)}wt.loop=je.loop,this._state.change(wt,!1),this._model||(this._model=new de(this._editor,this._state))})}start(je,mt){return this._start(je,mt)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}goToMatch(je){return!!this._model&&(this._model.moveToMatch(je),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return qe(this,void 0,void 0,function*(){return this._editor.getOption(39).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(je){this._editor.getOption(39).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(je)}};Xe.ID="editor.contrib.findController",Xe=dt([Re(1,N.i6),Re(2,Nt.Uy),Re(3,Wt.p)],Xe);let $e=class extends Xe{constructor(qt,je,mt,wt,Rt,oi,ei,yi){super(qt,mt,ei,yi),this._contextViewService=je,this._keybindingService=wt,this._themeService=Rt,this._notificationService=oi,this._widget=null,this._findOptionsWidget=null}_start(qt,je){let mt=Object.create(null,{_start:{get:()=>super._start}});return qe(this,void 0,void 0,function*(){this._widget||this._createFindWidget();let wt=this._editor.getSelection(),Rt=!1;switch(this._editor.getOption(39).autoFindInSelection){case"always":Rt=!0;break;case"never":Rt=!1;break;case"multiline":Rt=!!wt&&wt.startLineNumber!==wt.endLineNumber}qt.updateSearchScope=qt.updateSearchScope||Rt,yield mt._start.call(this,qt,je),this._widget&&(qt.shouldFocus===2?this._widget.focusReplaceInput():qt.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(qt=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!qt?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new fi(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new X(this._editor,this._state,this._keybindingService))}};$e=dt([Re(1,Te.u),Re(2,N.i6),Re(3,Ze.d),Re(4,b.XE),Re(5,rt.lT),Re(6,Nt.Uy),Re(7,Wt.p)],$e);let ot=(0,I.rn)(new I.jY({id:"actions.find",label:le.NC("startFindAction","Find"),alias:"Find",precondition:N.Ao.or(A.u.focus,N.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Ri.eH.MenubarEditMenu,group:"3_find",title:le.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));ot.addImplementation(0,(qt,je,mt)=>{let wt=Xe.get(je);return!!wt&&wt.start({forceRevealReplace:!1,seedSearchStringFromSelection:je.getOption(39).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:je.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:je.getOption(39).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:je.getOption(39).loop})});let Tt={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:le.NC("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:le.NC("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:le.NC("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:le.NC("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class Ot extends I.R6{constructor(){super({id:"editor.actions.findWithArgs",label:le.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Tt})}run(je,mt,wt){return qe(this,void 0,void 0,function*(){let Rt=Xe.get(mt);if(Rt){let oi=wt?{searchString:wt.searchString,replaceString:wt.replaceString,isReplaceRevealed:wt.replaceString!==void 0,isRegex:wt.isRegex,wholeWord:wt.matchWholeWord,matchCase:wt.isCaseSensitive,preserveCase:wt.preserveCase}:{};yield Rt.start({forceRevealReplace:!1,seedSearchStringFromSelection:Rt.getState().searchString.length===0&&mt.getOption(39).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:mt.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(wt==null?void 0:wt.findInSelection)||!1,loop:mt.getOption(39).loop},oi),Rt.setGlobalBufferTerm(Rt.getState().searchString)}})}}class ti extends I.R6{constructor(){super({id:"actions.findWithSelection",label:le.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(je,mt){return qe(this,void 0,void 0,function*(){let wt=Xe.get(mt);wt&&(yield wt.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:mt.getOption(39).loop}),wt.setGlobalBufferTerm(wt.getState().searchString))})}}class zt extends I.R6{run(je,mt){return qe(this,void 0,void 0,function*(){let wt=Xe.get(mt);wt&&!this._run(wt)&&(yield wt.start({forceRevealReplace:!1,seedSearchStringFromSelection:wt.getState().searchString.length===0&&mt.getOption(39).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:mt.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:mt.getOption(39).loop}),this._run(wt))})}}class Jt extends zt{constructor(){super({id:J,label:le.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:A.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:N.Ao.and(A.u.focus,C),primary:3,weight:100}]})}_run(je){return!!je.moveToNextMatch()&&(je.editor.pushUndoStop(),!0)}}class Gt extends zt{constructor(){super({id:oe,label:le.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:A.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:N.Ao.and(A.u.focus,C),primary:1027,weight:100}]})}_run(je){return je.moveToPrevMatch()}}class $t extends I.R6{constructor(){super({id:"editor.action.goToMatchFindAction",label:le.NC("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:T}),this._highlightDecorations=[]}run(je,mt,wt){let Rt=Xe.get(mt);if(!Rt)return;let oi=Rt.getState().matchesCount;if(oi<1)return void je.get(rt.lT).notify({severity:rt.zb.Warning,message:le.NC("findMatchAction.noResults","No matches. Try searching for something else.")});let ei=je.get(yt.eJ).createInputBox();ei.placeholder=le.NC("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",oi);let yi=Ti=>{let Pi=parseInt(Ti);if(isNaN(Pi))return;let Ni=Rt.getState().matchesCount;return Pi>0&&Pi<=Ni?Pi-1:Pi<0&&Pi>=-Ni?Ni+Pi:void 0},ki=Ti=>{let Pi=yi(Ti);if(typeof Pi=="number"){ei.validationMessage=void 0,Rt.goToMatch(Pi);let Ni=Rt.getState().currentMatch;Ni&&this.addDecorations(mt,Ni)}else ei.validationMessage=le.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",Rt.getState().matchesCount),this.clearDecorations(mt)};ei.onDidChangeValue(Ti=>{ki(Ti)}),ei.onDidAccept(()=>{let Ti=yi(ei.value);typeof Ti=="number"?(Rt.goToMatch(Ti),ei.hide()):ei.validationMessage=le.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",Rt.getState().matchesCount)}),ei.onDidHide(()=>{this.clearDecorations(mt),ei.dispose()}),ei.show()}clearDecorations(je){je.changeDecorations(mt=>{this._highlightDecorations=mt.deltaDecorations(this._highlightDecorations,[])})}addDecorations(je,mt){je.changeDecorations(wt=>{this._highlightDecorations=wt.deltaDecorations(this._highlightDecorations,[{range:mt,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:mt,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,b.EN)(_.m9),position:x.sh.Full}}}])})}}class si extends I.R6{run(je,mt){return qe(this,void 0,void 0,function*(){let wt=Xe.get(mt);if(!wt)return;let Rt=Pe(mt,"single",!1);Rt&&wt.setSearchString(Rt),this._run(wt)||(yield wt.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:mt.getOption(39).loop}),this._run(wt))})}}class ai extends si{constructor(){super({id:"editor.action.nextSelectionMatchFindAction",label:le.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:A.u.focus,primary:2109,weight:100}})}_run(je){return je.moveToNextMatch()}}class _i extends si{constructor(){super({id:"editor.action.previousSelectionMatchFindAction",label:le.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:A.u.focus,primary:3133,weight:100}})}_run(je){return je.moveToPrevMatch()}}let Li=(0,I.rn)(new I.jY({id:"editor.action.startFindReplaceAction",label:le.NC("startReplace","Replace"),alias:"Replace",precondition:N.Ao.or(A.u.focus,N.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Ri.eH.MenubarEditMenu,group:"3_find",title:le.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Li.addImplementation(0,(qt,je,mt)=>{if(!je.hasModel()||je.getOption(87))return!1;let wt=Xe.get(je);if(!wt)return!1;let Rt=je.getSelection(),oi=wt.isFindInputFocused(),ei=!Rt.isEmpty()&&Rt.startLineNumber===Rt.endLineNumber&&je.getOption(39).seedSearchStringFromSelection!=="never"&&!oi,yi=oi||ei?2:1;return wt.start({forceRevealReplace:!0,seedSearchStringFromSelection:ei?"single":"none",seedSearchStringFromNonEmptySelection:je.getOption(39).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:je.getOption(39).seedSearchStringFromSelection!=="never",shouldFocus:yi,shouldAnimate:!0,updateSearchScope:!1,loop:je.getOption(39).loop})}),(0,I._K)(Xe.ID,$e,0),(0,I.Qr)(Ot),(0,I.Qr)(ti),(0,I.Qr)(Jt),(0,I.Qr)(Gt),(0,I.Qr)($t),(0,I.Qr)(ai),(0,I.Qr)(_i);let ri=I._l.bindToContribution(Xe.get);(0,I.fK)(new ri({id:fe,precondition:T,handler:qt=>qt.closeFindWidget(),kbOpts:{weight:105,kbExpr:N.Ao.and(A.u.focus,N.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,I.fK)(new ri({id:q,precondition:void 0,handler:qt=>qt.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:K.primary,mac:K.mac,win:K.win,linux:K.linux}})),(0,I.fK)(new ri({id:p,precondition:void 0,handler:qt=>qt.toggleWholeWords(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:j.primary,mac:j.mac,win:j.win,linux:j.linux}})),(0,I.fK)(new ri({id:re,precondition:void 0,handler:qt=>qt.toggleRegex(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:F.primary,mac:F.mac,win:F.win,linux:F.linux}})),(0,I.fK)(new ri({id:ne,precondition:void 0,handler:qt=>qt.toggleSearchScope(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:H.primary,mac:H.mac,win:H.win,linux:H.linux}})),(0,I.fK)(new ri({id:ie,precondition:void 0,handler:qt=>qt.togglePreserveCase(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:z.primary,mac:z.mac,win:z.win,linux:z.linux}})),(0,I.fK)(new ri({id:se,precondition:T,handler:qt=>qt.replace(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:3094}})),(0,I.fK)(new ri({id:se,precondition:T,handler:qt=>qt.replace(),kbOpts:{weight:105,kbExpr:N.Ao.and(A.u.focus,W),primary:3}})),(0,I.fK)(new ri({id:ce,precondition:T,handler:qt=>qt.replaceAll(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:2563}})),(0,I.fK)(new ri({id:ce,precondition:T,handler:qt=>qt.replaceAll(),kbOpts:{weight:105,kbExpr:N.Ao.and(A.u.focus,W),primary:void 0,mac:{primary:2051}}})),(0,I.fK)(new ri({id:"editor.action.selectAllMatches",precondition:T,handler:qt=>qt.selectAllMatches(),kbOpts:{weight:105,kbExpr:A.u.focus,primary:515}}))},8060:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{FoldingController:()=>Ae,RangesLimitReporter:()=>Fe});var m=t(5393),B=t(1050),u=t(7301),I=t(2258),_=t(5976),A=t(7295),x=t(8401),v=t(3407),f=t(6830),d=t(9102),o=t(6887),h=t(1381),r=t(4669),i=t(7702),c=t(9954);class b{get regions(){return this._regions}get textModel(){return this._textModel}constructor(le,ee){this._updateEventEmitter=new r.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=le,this._decorationProvider=ee,this._regions=new i.MN(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(le){if(!le.length)return;le=le.sort((me,xe)=>me.regionIndex-xe.regionIndex);let ee={};this._decorationProvider.changeDecorations(me=>{let xe=0,We=-1,Ve=-1,Ye=tt=>{for(;xe<tt;){let Qe=this._regions.getEndLineNumber(xe),bt=this._regions.isCollapsed(xe);if(Qe<=We){let ht=this.regions.getSource(xe)!==0;me.changeDecorationOptions(this._editorDecorationIds[xe],this._decorationProvider.getDecorationOption(bt,Qe<=Ve,ht))}bt&&Qe>Ve&&(Ve=Qe),xe++}};for(let tt of le){let Qe=tt.regionIndex,bt=this._editorDecorationIds[Qe];if(bt&&!ee[bt]){ee[bt]=!0,Ye(Qe);let ht=!this._regions.isCollapsed(Qe);this._regions.setCollapsed(Qe,ht),We=Math.max(We,this._regions.getEndLineNumber(Qe))}}Ye(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:le})}removeManualRanges(le){let ee=new Array,me=xe=>{for(let We of le)if(!(We.startLineNumber>xe.endLineNumber||xe.startLineNumber>We.endLineNumber))return!0;return!1};for(let xe=0;xe<this._regions.length;xe++){let We=this._regions.toFoldRange(xe);We.source!==0&&me(We)||ee.push(We)}this.updatePost(i.MN.fromFoldRanges(ee))}update(le,ee=[]){let me=this._currentFoldedOrManualRanges(ee),xe=i.MN.sanitizeAndMerge(le,me,this._textModel.getLineCount());this.updatePost(i.MN.fromFoldRanges(xe))}updatePost(le){let ee=[],me=-1;for(let xe=0,We=le.length;xe<We;xe++){let Ve=le.getStartLineNumber(xe),Ye=le.getEndLineNumber(xe),tt=le.isCollapsed(xe),Qe=le.getSource(xe)!==0,bt={startLineNumber:Ve,startColumn:this._textModel.getLineMaxColumn(Ve),endLineNumber:Ye,endColumn:this._textModel.getLineMaxColumn(Ye)+1};ee.push({range:bt,options:this._decorationProvider.getDecorationOption(tt,Ye<=me,Qe)}),tt&&Ye>me&&(me=Ye)}this._decorationProvider.changeDecorations(xe=>this._editorDecorationIds=xe.deltaDecorations(this._editorDecorationIds,ee)),this._regions=le,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(le=[]){let ee=(xe,We)=>{for(let Ve of le)if(xe<Ve&&Ve<=We)return!0;return!1},me=[];for(let xe=0,We=this._regions.length;xe<We;xe++){let Ve=this.regions.isCollapsed(xe),Ye=this.regions.getSource(xe);if(Ve||Ye!==0){let tt=this._regions.toFoldRange(xe),Qe=this._textModel.getDecorationRange(this._editorDecorationIds[xe]);Qe&&(Ve&&ee(Qe.startLineNumber,Qe.endLineNumber)&&(Ve=!1),me.push({startLineNumber:Qe.startLineNumber,endLineNumber:Qe.endLineNumber,type:tt.type,isCollapsed:Ve,source:Ye}))}}return me}getMemento(){let le=this._currentFoldedOrManualRanges(),ee=[],me=this._textModel.getLineCount();for(let xe=0,We=le.length;xe<We;xe++){let Ve=le[xe];if(Ve.startLineNumber>=Ve.endLineNumber||Ve.startLineNumber<1||Ve.endLineNumber>me)continue;let Ye=this._getLinesChecksum(Ve.startLineNumber+1,Ve.endLineNumber);ee.push({startLineNumber:Ve.startLineNumber,endLineNumber:Ve.endLineNumber,isCollapsed:Ve.isCollapsed,source:Ve.source,checksum:Ye})}return ee.length>0?ee:void 0}applyMemento(le){var ee,me;if(!Array.isArray(le))return;let xe=[],We=this._textModel.getLineCount();for(let Ye of le){if(Ye.startLineNumber>=Ye.endLineNumber||Ye.startLineNumber<1||Ye.endLineNumber>We)continue;let tt=this._getLinesChecksum(Ye.startLineNumber+1,Ye.endLineNumber);Ye.checksum&&tt!==Ye.checksum||xe.push({startLineNumber:Ye.startLineNumber,endLineNumber:Ye.endLineNumber,type:void 0,isCollapsed:(ee=Ye.isCollapsed)===null||ee===void 0||ee,source:(me=Ye.source)!==null&&me!==void 0?me:0})}let Ve=i.MN.sanitizeAndMerge(this._regions,xe,We);this.updatePost(i.MN.fromFoldRanges(Ve))}_getLinesChecksum(le,ee){return(0,c.vp)(this._textModel.getLineContent(le)+this._textModel.getLineContent(ee))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(le,ee){let me=[];if(this._regions){let xe=this._regions.findRange(le),We=1;for(;xe>=0;){let Ve=this._regions.toRegion(xe);ee&&!ee(Ve,We)||me.push(Ve),We++,xe=Ve.parentIndex}}return me}getRegionAtLine(le){if(this._regions){let ee=this._regions.findRange(le);if(ee>=0)return this._regions.toRegion(ee)}return null}getRegionsInside(le,ee){let me=[],xe=le?le.regionIndex+1:0,We=le?le.endLineNumber:Number.MAX_VALUE;if(ee&&ee.length===2){let Ve=[];for(let Ye=xe,tt=this._regions.length;Ye<tt;Ye++){let Qe=this._regions.toRegion(Ye);if(!(this._regions.getStartLineNumber(Ye)<We))break;for(;Ve.length>0&&!Qe.containedBy(Ve[Ve.length-1]);)Ve.pop();Ve.push(Qe),ee(Qe,Ve.length)&&me.push(Qe)}}else for(let Ve=xe,Ye=this._regions.length;Ve<Ye;Ve++){let tt=this._regions.toRegion(Ve);if(!(this._regions.getStartLineNumber(Ve)<We))break;ee&&!ee(tt)||me.push(tt)}return me}}function l(ke,le,ee=Number.MAX_VALUE,me){let xe=[];if(me&&me.length>0)for(let We of me){let Ve=ke.getRegionAtLine(We);if(Ve&&(Ve.isCollapsed!==le&&xe.push(Ve),ee>1)){let Ye=ke.getRegionsInside(Ve,(tt,Qe)=>tt.isCollapsed!==le&&Qe<ee);xe.push(...Ye)}}else{let We=ke.getRegionsInside(null,(Ve,Ye)=>Ve.isCollapsed!==le&&Ye<ee);xe.push(...We)}ke.toggleCollapseState(xe)}function a(ke,le,ee,me){let xe=[];for(let We of me){let Ve=ke.getAllRegionsAtLine(We,(Ye,tt)=>Ye.isCollapsed!==le&&tt<=ee);xe.push(...Ve)}ke.toggleCollapseState(xe)}function w(ke,le,ee){let me=[];for(let We of ee){let Ve=ke.getAllRegionsAtLine(We,void 0);Ve.length>0&&me.push(Ve[0])}let xe=ke.getRegionsInside(null,We=>me.every(Ve=>!Ve.containedBy(We)&&!We.containedBy(Ve))&&We.isCollapsed!==le);ke.toggleCollapseState(xe)}function E(ke,le,ee){let me=ke.textModel,xe=ke.regions,We=[];for(let Ve=xe.length-1;Ve>=0;Ve--)if(ee!==xe.isCollapsed(Ve)){let Ye=xe.getStartLineNumber(Ve);le.test(me.getLineContent(Ye))&&We.push(xe.toRegion(Ve))}ke.toggleCollapseState(We)}function D(ke,le,ee){let me=ke.regions,xe=[];for(let We=me.length-1;We>=0;We--)ee!==me.isCollapsed(We)&&le===me.getType(We)&&xe.push(me.toRegion(We));ke.toggleCollapseState(xe)}var L=t(9488),k=t(4314),R=t(3795);class O{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(le){this._updateEventEmitter=new r.Q5,this._hasLineChanges=!1,this._foldingModel=le,this._foldingModelListener=le.onDidChange(ee=>this.updateHiddenRanges()),this._hiddenRanges=[],le.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(le){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=le.changes.some(ee=>ee.range.endLineNumber!==ee.range.startLineNumber||(0,R.Q)(ee.text)[0]!==0))}updateHiddenRanges(){let le=!1,ee=[],me=0,xe=0,We=Number.MAX_VALUE,Ve=-1,Ye=this._foldingModel.regions;for(;me<Ye.length;me++){if(!Ye.isCollapsed(me))continue;let tt=Ye.getStartLineNumber(me)+1,Qe=Ye.getEndLineNumber(me);We<=tt&&Qe<=Ve||(!le&&xe<this._hiddenRanges.length&&this._hiddenRanges[xe].startLineNumber===tt&&this._hiddenRanges[xe].endLineNumber===Qe?(ee.push(this._hiddenRanges[xe]),xe++):(le=!0,ee.push(new k.e(tt,1,Qe,1))),We=tt,Ve=Qe)}(this._hasLineChanges||le||xe<this._hiddenRanges.length)&&this.applyHiddenRanges(ee)}applyHiddenRanges(le){this._hiddenRanges=le,this._hasLineChanges=!1,this._updateEventEmitter.fire(le)}hasRanges(){return this._hiddenRanges.length>0}isHidden(le){return $(this._hiddenRanges,le)!==null}adjustSelections(le){let ee=!1,me=this._foldingModel.textModel,xe=null,We=Ve=>(xe&&function(Ye,tt){return Ye>=tt.startLineNumber&&Ye<=tt.endLineNumber}(Ve,xe)||(xe=$(this._hiddenRanges,Ve)),xe?xe.startLineNumber-1:null);for(let Ve=0,Ye=le.length;Ve<Ye;Ve++){let tt=le[Ve],Qe=We(tt.startLineNumber);Qe&&(tt=tt.setStartPosition(Qe,me.getLineMaxColumn(Qe)),ee=!0);let bt=We(tt.endLineNumber);bt&&(tt=tt.setEndPosition(bt,me.getLineMaxColumn(bt)),ee=!0),le[Ve]=tt}return ee}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function $(ke,le){let ee=(0,L.lG)(ke,me=>le<me.startLineNumber)-1;return ee>=0&&ke[ee].endLineNumber>=le?ke[ee]:null}var N=t(4990),T=t(3580),C=t(3983),W=t(3046),K=t(4973),j=t(3654),F=t(3910),H=t(9554),z=t(7781),J=t(5670);let oe=(0,F.P6G)("editor.foldBackground",{light:(0,F.ZnX)(F.hEj,.3),dark:(0,F.ZnX)(F.hEj,.3),hcDark:null,hcLight:null},(0,T.NC)("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,F.P6G)("editorGutter.foldingControlForeground",{dark:F.XZx,light:F.XZx,hcDark:F.XZx,hcLight:F.XZx},(0,T.NC)("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));let fe=(0,H.q5)("folding-expanded",W.l.chevronDown,(0,T.NC)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),q=(0,H.q5)("folding-collapsed",W.l.chevronRight,(0,T.NC)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),p=(0,H.q5)("folding-manual-collapsed",q,(0,T.NC)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),re=(0,H.q5)("folding-manual-expanded",fe,(0,T.NC)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),ne={color:(0,z.EN)(oe),position:K.F5.Inline};class ie{constructor(le){this.editor=le,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(le,ee,me){return ee?ie.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?le?this.showFoldingHighlights?ie.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:ie.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:ie.NO_CONTROLS_EXPANDED_RANGE_DECORATION:le?me?this.showFoldingHighlights?ie.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ie.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?ie.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ie.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?me?ie.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:ie.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:me?ie.MANUALLY_EXPANDED_VISUAL_DECORATION:ie.EXPANDED_VISUAL_DECORATION}changeDecorations(le){return this.editor.changeDecorations(le)}removeDecorations(le){this.editor.removeDecorations(le)}}ie.COLLAPSED_VISUAL_DECORATION=j.qx.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:J.k.asClassName(q)}),ie.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=j.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ne,isWholeLine:!0,firstLineDecorationClassName:J.k.asClassName(q)}),ie.MANUALLY_COLLAPSED_VISUAL_DECORATION=j.qx.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:J.k.asClassName(p)}),ie.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=j.qx.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ne,isWholeLine:!0,firstLineDecorationClassName:J.k.asClassName(p)}),ie.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=j.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0}),ie.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=j.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:ne,isWholeLine:!0}),ie.EXPANDED_VISUAL_DECORATION=j.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+J.k.asClassName(fe)}),ie.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=j.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:J.k.asClassName(fe)}),ie.MANUALLY_EXPANDED_VISUAL_DECORATION=j.qx.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+J.k.asClassName(re)}),ie.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=j.qx.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:J.k.asClassName(re)}),ie.NO_CONTROLS_EXPANDED_RANGE_DECORATION=j.qx.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),ie.HIDDEN_RANGE_DECORATION=j.qx.register({description:"folding-hidden-range-decoration",stickiness:1});var se=t(9155),ce=t(9422),be=t(8191),de=t(4013),U=t(1922),ue=t(4565),ve=t(666),X=t(3733),ye=t(3108),Ce=function(ke,le){return function(ee,me){le(ee,me,ke)}};let Ee=new C.uy("foldingEnabled",!1),Ae=class Ir extends _.JT{static get(le){return le.getContribution(Ir.ID)}static getFoldingRangeProviders(le,ee){var me,xe;let We=le.foldingRangeProvider.ordered(ee);return(xe=(me=Ir._foldingRangeSelector)===null||me===void 0?void 0:me.call(Ir,We,ee))!==null&&xe!==void 0?xe:We}constructor(le,ee,me,xe,We,Ve){super(),this.contextKeyService=ee,this.languageConfigurationService=me,this.languageFeaturesService=Ve,this.localToDispose=this._register(new _.SL),this.editor=le,this._foldingLimitReporter=new Fe(le);let Ye=this.editor.getOptions();this._isEnabled=Ye.get(41),this._useFoldingProviders=Ye.get(42)!=="indentation",this._unfoldOnClickAfterEndOfLine=Ye.get(46),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=Ye.get(44),this.updateDebounceInfo=We.for(Ve.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new ie(le),this.foldingDecorationProvider.showFoldingControls=Ye.get(105),this.foldingDecorationProvider.showFoldingHighlights=Ye.get(43),this.foldingEnabled=Ee.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(tt=>{if(tt.hasChanged(41)&&(this._isEnabled=this.editor.getOptions().get(41),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),tt.hasChanged(45)&&this.onModelChanged(),tt.hasChanged(105)||tt.hasChanged(43)){let Qe=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=Qe.get(105),this.foldingDecorationProvider.showFoldingHighlights=Qe.get(43),this.triggerFoldingModelChanged()}tt.hasChanged(42)&&(this._useFoldingProviders=this.editor.getOptions().get(42)!=="indentation",this.onFoldingStrategyChanged()),tt.hasChanged(46)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(46)),tt.hasChanged(44)&&(this._foldingImportsByDefault=this.editor.getOptions().get(44))})),this.onModelChanged()}saveViewState(){let le=this.editor.getModel();if(!le||!this._isEnabled||le.isTooLargeForTokenization())return{};if(this.foldingModel){let ee=this.foldingModel.getMemento(),me=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:ee,lineCount:le.getLineCount(),provider:me,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(le){let ee=this.editor.getModel();if(ee&&this._isEnabled&&!ee.isTooLargeForTokenization()&&this.hiddenRangeModel&&le&&(this._currentModelHasFoldedImports=!!le.foldedImports,le.collapsedRegions&&le.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(le.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();let le=this.editor.getModel();this._isEnabled&&le&&!le.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new b(le,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new O(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(ee=>this.onHiddenRangesChanges(ee))),this.updateScheduler=new m.vp(this.updateDebounceInfo.get(le)),this.cursorChangedScheduler=new m.pY(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(ee=>this.onDidChangeModelContent(ee))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(ee=>this.onEditorMouseDown(ee))),this.localToDispose.add(this.editor.onMouseUp(ee=>this.onEditorMouseUp(ee))),this.localToDispose.add({dispose:()=>{var ee,me;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(ee=this.updateScheduler)===null||ee===void 0||ee.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(me=this.rangeProvider)===null||me===void 0||me.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var le;(le=this.rangeProvider)===null||le===void 0||le.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(le){if(this.rangeProvider)return this.rangeProvider;let ee=new N.aI(le,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=ee,this._useFoldingProviders&&this.foldingModel){let me=Ir.getFoldingRangeProviders(this.languageFeaturesService,le);me.length>0&&(this.rangeProvider=new se.e(le,me,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,ee))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(le){var ee;(ee=this.hiddenRangeModel)===null||ee===void 0||ee.notifyChangeModelContent(le),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{let le=this.foldingModel;if(!le)return null;let ee=new de.G(!0),me=this.getRangeProvider(le.textModel),xe=this.foldingRegionPromise=(0,m.PG)(We=>me.compute(We));return xe.then(We=>{if(We&&xe===this.foldingRegionPromise){let Ve;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let bt=We.setCollapsedAllOfType(o.AD.Imports.value,!0);bt&&(Ve=v.Z.capture(this.editor),this._currentModelHasFoldedImports=bt)}let Ye=this.editor.getSelections(),tt=Ye?Ye.map(bt=>bt.startLineNumber):[];le.update(We,tt),Ve==null||Ve.restore(this.editor);let Qe=this.updateDebounceInfo.update(le.textModel,ee.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=Qe)}return le})}).then(void 0,le=>((0,u.dL)(le),null)))}onHiddenRangesChanges(le){if(this.hiddenRangeModel&&le.length&&!this._restoringViewState){let ee=this.editor.getSelections();ee&&this.hiddenRangeModel.adjustSelections(ee)&&this.editor.setSelections(ee)}this.editor.setHiddenAreas(le,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){let le=this.getFoldingModel();le&&le.then(ee=>{if(ee){let me=this.editor.getSelections();if(me&&me.length>0){let xe=[];for(let We of me){let Ve=We.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(Ve)&&xe.push(...ee.getAllRegionsAtLine(Ve,Ye=>Ye.isCollapsed&&Ve>Ye.startLineNumber))}xe.length&&(ee.toggleCollapseState(xe),this.reveal(me[0].getPosition()))}}}).then(void 0,u.dL)}onEditorMouseDown(le){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!le.target||!le.target.range||!le.event.leftButton&&!le.event.middleButton)return;let ee=le.target.range,me=!1;switch(le.target.type){case 4:{let xe=le.target.detail,We=le.target.element.offsetLeft;if(xe.offsetX-We<5)return;me=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!le.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){let xe=this.editor.getModel();if(xe&&ee.startColumn===xe.getLineMaxColumn(ee.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:ee.startLineNumber,iconClicked:me}}onEditorMouseUp(le){let ee=this.foldingModel;if(!ee||!this.mouseDownInfo||!le.target)return;let me=this.mouseDownInfo.lineNumber,xe=this.mouseDownInfo.iconClicked,We=le.target.range;if(!We||We.startLineNumber!==me)return;if(xe){if(le.target.type!==4)return}else{let Ye=this.editor.getModel();if(!Ye||We.startColumn!==Ye.getLineMaxColumn(me))return}let Ve=ee.getRegionAtLine(me);if(Ve&&Ve.startLineNumber===me){let Ye=Ve.isCollapsed;if(xe||Ye){let tt=[];if(le.event.altKey){let Qe=ht=>!ht.containedBy(Ve)&&!Ve.containedBy(ht),bt=ee.getRegionsInside(null,Qe);for(let ht of bt)ht.isCollapsed&&tt.push(ht);tt.length===0&&(tt=bt)}else{let Qe=le.event.middleButton||le.event.shiftKey;if(Qe)for(let bt of ee.getRegionsInside(Ve))bt.isCollapsed===Ye&&tt.push(bt);!Ye&&Qe&&tt.length!==0||tt.push(Ve)}ee.toggleCollapseState(tt),this.reveal({lineNumber:me,column:1})}}}reveal(le){this.editor.revealPositionInCenterIfOutsideViewport(le,0)}};Ae.ID="editor.contrib.folding",Ae=function(ke,le,ee,me){var xe,We=arguments.length,Ve=We<3?le:me===null?me=Object.getOwnPropertyDescriptor(le,ee):me;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ve=Reflect.decorate(ke,le,ee,me);else for(var Ye=ke.length-1;Ye>=0;Ye--)(xe=ke[Ye])&&(Ve=(We<3?xe(Ve):We>3?xe(le,ee,Ve):xe(le,ee))||Ve);return We>3&&Ve&&Object.defineProperty(le,ee,Ve),Ve}([Ce(1,C.i6),Ce(2,h.c_),Ce(3,ce.lT),Ce(4,be.A),Ce(5,U.p)],Ae);class Fe{constructor(le){this.editor=le,this._onDidChange=new r.Q5,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(45)}update(le,ee){le===this._computed&&ee===this._limited||(this._computed=le,this._limited=ee,this._onDidChange.fire())}}class _e extends f.R6{runEditorCommand(le,ee,me){let xe=le.get(h.c_),We=Ae.get(ee);if(!We)return;let Ve=We.getFoldingModel();return Ve?(this.reportTelemetry(le,ee),Ve.then(Ye=>{if(Ye){this.invoke(We,Ye,ee,me,xe);let tt=ee.getSelection();tt&&We.reveal(tt.getStartPosition())}})):void 0}getSelectedLines(le){let ee=le.getSelections();return ee?ee.map(me=>me.startLineNumber):[]}getLineNumbers(le,ee){return le&&le.selectionLines?le.selectionLines.map(me=>me+1):this.getSelectedLines(ee)}run(le,ee){}}function te(ke){if(!x.o8(ke)){if(!x.Kn(ke))return!1;let le=ke;if(!x.o8(le.levels)&&!x.hj(le.levels)||!x.o8(le.direction)&&!x.HD(le.direction)||!(x.o8(le.selectionLines)||Array.isArray(le.selectionLines)&&le.selectionLines.every(x.hj)))return!1}return!0}class Le extends _e{getFoldingLevel(){return parseInt(this.id.substr(Le.ID_PREFIX.length))}invoke(le,ee,me){(function(xe,We,Ve,Ye){let tt=xe.getRegionsInside(null,(Qe,bt)=>bt===We&&Qe.isCollapsed!==!0&&!Ye.some(ht=>Qe.containsLine(ht)));xe.toggleCollapseState(tt)})(ee,this.getFoldingLevel(),0,this.getSelectedLines(me))}}Le.ID_PREFIX="editor.foldLevel",Le.ID=ke=>Le.ID_PREFIX+ke,(0,f._K)(Ae.ID,Ae,0),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.unfold",label:T.NC("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:te,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(ke,le,ee,me){let xe=me&&me.levels||1,We=this.getLineNumbers(me,ee);me&&me.direction==="up"?a(le,!1,xe,We):l(le,!1,xe,We)}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.unfoldRecursively",label:T.NC("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2142),weight:100}})}invoke(ke,le,ee,me){l(le,!1,Number.MAX_VALUE,this.getSelectedLines(ee))}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.fold",label:T.NC("foldAction.label","Fold"),alias:"Fold",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:te,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(ke,le,ee,me){let xe=this.getLineNumbers(me,ee),We=me&&me.levels,Ve=me&&me.direction;typeof We!="number"&&typeof Ve!="string"?function(Ye,tt,Qe){let bt=[];for(let ht of Qe){let xt=Ye.getAllRegionsAtLine(ht,Qt=>Qt.isCollapsed!==!0);xt.length>0&&bt.push(xt[0])}Ye.toggleCollapseState(bt)}(le,0,xe):Ve==="up"?a(le,!0,We||1,xe):l(le,!0,We||1,xe)}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.foldRecursively",label:T.NC("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2140),weight:100}})}invoke(ke,le,ee){let me=this.getSelectedLines(ee);l(le,!0,Number.MAX_VALUE,me)}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.foldAll",label:T.NC("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2069),weight:100}})}invoke(ke,le,ee){l(le,!0)}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.unfoldAll",label:T.NC("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2088),weight:100}})}invoke(ke,le,ee){l(le,!1)}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.foldAllBlockComments",label:T.NC("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2138),weight:100}})}invoke(ke,le,ee,me,xe){if(le.regions.hasTypes())D(le,o.AD.Comment.value,!0);else{let We=ee.getModel();if(!We)return;let Ve=xe.getLanguageConfiguration(We.getLanguageId()).comments;Ve&&Ve.blockCommentStartToken&&E(le,new RegExp("^\\s*"+(0,A.ec)(Ve.blockCommentStartToken)),!0)}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.foldAllMarkerRegions",label:T.NC("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2077),weight:100}})}invoke(ke,le,ee,me,xe){if(le.regions.hasTypes())D(le,o.AD.Region.value,!0);else{let We=ee.getModel();if(!We)return;let Ve=xe.getLanguageConfiguration(We.getLanguageId()).foldingRules;Ve&&Ve.markers&&Ve.markers.start&&E(le,new RegExp(Ve.markers.start),!0)}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:T.NC("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2078),weight:100}})}invoke(ke,le,ee,me,xe){if(le.regions.hasTypes())D(le,o.AD.Region.value,!1);else{let We=ee.getModel();if(!We)return;let Ve=xe.getLanguageConfiguration(We.getLanguageId()).foldingRules;Ve&&Ve.markers&&Ve.markers.start&&E(le,new RegExp(Ve.markers.start),!1)}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.foldAllExcept",label:T.NC("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2136),weight:100}})}invoke(ke,le,ee){w(le,!0,this.getSelectedLines(ee))}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.unfoldAllExcept",label:T.NC("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2134),weight:100}})}invoke(ke,le,ee){w(le,!1,this.getSelectedLines(ee))}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.toggleFold",label:T.NC("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2090),weight:100}})}invoke(ke,le,ee){(function(me,xe,We){let Ve=[];for(let Ye of We){let tt=me.getRegionAtLine(Ye);tt&&(tt.isCollapsed,Ve.push(tt))}me.toggleCollapseState(Ve)})(le,0,this.getSelectedLines(ee))}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.gotoParentFold",label:T.NC("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,weight:100}})}invoke(ke,le,ee){let me=this.getSelectedLines(ee);if(me.length>0){let xe=function(We,Ve){let Ye=null,tt=Ve.getRegionAtLine(We);if(tt!==null&&(Ye=tt.startLineNumber,We===Ye)){let Qe=tt.parentIndex;Ye=Qe!==-1?Ve.regions.getStartLineNumber(Qe):null}return Ye}(me[0],le);xe!==null&&ee.setSelection({startLineNumber:xe,startColumn:1,endLineNumber:xe,endColumn:1})}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.gotoPreviousFold",label:T.NC("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,weight:100}})}invoke(ke,le,ee){let me=this.getSelectedLines(ee);if(me.length>0){let xe=function(We,Ve){let Ye=Ve.getRegionAtLine(We);if(Ye!==null&&Ye.startLineNumber===We){if(We!==Ye.startLineNumber)return Ye.startLineNumber;{let tt=Ye.parentIndex,Qe=0;for(tt!==-1&&(Qe=Ve.regions.getStartLineNumber(Ye.parentIndex));Ye!==null;){if(!(Ye.regionIndex>0)||(Ye=Ve.regions.toRegion(Ye.regionIndex-1),Ye.startLineNumber<=Qe))return null;if(Ye.parentIndex===tt)return Ye.startLineNumber}}}else if(Ve.regions.length>0)for(Ye=Ve.regions.toRegion(Ve.regions.length-1);Ye!==null;){if(Ye.startLineNumber<We)return Ye.startLineNumber;Ye=Ye.regionIndex>0?Ve.regions.toRegion(Ye.regionIndex-1):null}return null}(me[0],le);xe!==null&&ee.setSelection({startLineNumber:xe,startColumn:1,endLineNumber:xe,endColumn:1})}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.gotoNextFold",label:T.NC("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,weight:100}})}invoke(ke,le,ee){let me=this.getSelectedLines(ee);if(me.length>0){let xe=function(We,Ve){let Ye=Ve.getRegionAtLine(We);if(Ye!==null&&Ye.startLineNumber===We){let tt=Ye.parentIndex,Qe=0;if(tt!==-1)Qe=Ve.regions.getEndLineNumber(Ye.parentIndex);else{if(Ve.regions.length===0)return null;Qe=Ve.regions.getEndLineNumber(Ve.regions.length-1)}for(;Ye!==null;){if(!(Ye.regionIndex<Ve.regions.length)||(Ye=Ve.regions.toRegion(Ye.regionIndex+1),Ye.startLineNumber>=Qe))return null;if(Ye.parentIndex===tt)return Ye.startLineNumber}}else if(Ve.regions.length>0)for(Ye=Ve.regions.toRegion(0);Ye!==null;){if(Ye.startLineNumber>We)return Ye.startLineNumber;Ye=Ye.regionIndex<Ve.regions.length?Ve.regions.toRegion(Ye.regionIndex+1):null}return null}(me[0],le);xe!==null&&ee.setSelection({startLineNumber:xe,startColumn:1,endLineNumber:xe,endColumn:1})}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:T.NC("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2135),weight:100}})}invoke(ke,le,ee){var me;let xe=[],We=ee.getSelections();if(We){for(let Ve of We){let Ye=Ve.endLineNumber;Ve.endColumn===1&&--Ye,Ye>Ve.startLineNumber&&(xe.push({startLineNumber:Ve.startLineNumber,endLineNumber:Ye,type:void 0,isCollapsed:!0,source:1}),ee.setSelection({startLineNumber:Ve.startLineNumber,startColumn:1,endLineNumber:Ve.startLineNumber,endColumn:1}))}if(xe.length>0){xe.sort((Ye,tt)=>Ye.startLineNumber-tt.startLineNumber);let Ve=i.MN.sanitizeAndMerge(le.regions,xe,(me=ee.getModel())===null||me===void 0?void 0:me.getLineCount());le.updatePost(i.MN.fromFoldRanges(Ve))}}}}),(0,f.Qr)(class extends _e{constructor(){super({id:"editor.removeManualFoldingRanges",label:T.NC("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2137),weight:100}})}invoke(ke,le,ee){let me=ee.getSelections();if(me){let xe=[];for(let We of me){let{startLineNumber:Ve,endLineNumber:Ye}=We;xe.push(Ye>=Ve?{startLineNumber:Ve,endLineNumber:Ye}:{endLineNumber:Ye,startLineNumber:Ve})}le.removeManualRanges(xe),ke.triggerFoldingModelChanged()}}});for(let ke=1;ke<=7;ke++)(0,f.QG)(new Le({id:Le.ID(ke),label:T.NC("foldLevelAction.label","Fold Level {0}",ke),alias:`Fold Level ${ke}`,precondition:Ee,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2048|21+ke),weight:100}}));ue.P.registerCommand("_executeFoldingRangeProvider",function(ke,...le){return ee=this,me=void 0,We=function*(){let[Ve]=le;if(!(Ve instanceof ve.o))throw(0,u.b1)();let Ye=ke.get(U.p),tt=ke.get(X.q).getModel(Ve);if(!tt)throw(0,u.b1)();let Qe=ke.get(ye.Ui);if(!Qe.getValue("editor.folding",{resource:Ve}))return[];let bt=ke.get(h.c_),ht=Qe.getValue("editor.foldingStrategy",{resource:Ve}),xt={get limit(){return Qe.getValue("editor.foldingMaximumRegions",{resource:Ve})},update:(ct,Kt)=>{}},Qt=new N.aI(tt,bt,xt),At=Qt;if(ht!=="indentation"){let ct=Ae.getFoldingRangeProviders(Ye,tt);ct.length&&(At=new se.e(tt,ct,()=>{},xt,Qt))}let mi=yield At.compute(B.T.None),Lt=[];try{if(mi)for(let ct=0;ct<mi.length;ct++){let Kt=mi.getType(ct);Lt.push({start:mi.getStartLineNumber(ct),end:mi.getEndLineNumber(ct),kind:Kt?o.AD.fromValue(Kt):void 0})}return Lt}finally{At.dispose()}},new((xe=void 0)||(xe=Promise))(function(Ve,Ye){function tt(ht){try{bt(We.next(ht))}catch(xt){Ye(xt)}}function Qe(ht){try{bt(We.throw(ht))}catch(xt){Ye(xt)}}function bt(ht){var xt;ht.done?Ve(ht.value):(xt=ht.value,xt instanceof xe?xt:new xe(function(Qt){Qt(xt)})).then(tt,Qe)}bt((We=We.apply(ee,me||[])).next())});var ee,me,xe,We})},7702:(ut,Ie,t)=>{"use strict";t.d(Ie,{MN:()=>_,Xl:()=>B});let m={0:" ",1:"u",2:"r"},B=16777215,u=4278190080;class I{constructor(v){let f=Math.ceil(v/32);this._states=new Uint32Array(f)}get(v){let f=v/32|0,d=v%32;return(this._states[f]&1<<d)!=0}set(v,f){let d=v/32|0,o=v%32,h=this._states[d];this._states[d]=f?h|1<<o:h&~(1<<o)}}class _{constructor(v,f,d){if(v.length!==f.length||v.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=v,this._endIndexes=f,this._collapseStates=new I(v.length),this._userDefinedStates=new I(v.length),this._recoveredStates=new I(v.length),this._types=d,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let v=[],f=(d,o)=>{let h=v[v.length-1];return this.getStartLineNumber(h)<=d&&this.getEndLineNumber(h)>=o};for(let d=0,o=this._startIndexes.length;d<o;d++){let h=this._startIndexes[d],r=this._endIndexes[d];if(h>B||r>B)throw new Error("startLineNumber or endLineNumber must not exceed "+B);for(;v.length>0&&!f(h,r);)v.pop();let i=v.length>0?v[v.length-1]:-1;v.push(d),this._startIndexes[d]=h+((255&i)<<24),this._endIndexes[d]=r+((65280&i)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(v){return this._startIndexes[v]&B}getEndLineNumber(v){return this._endIndexes[v]&B}getType(v){return this._types?this._types[v]:void 0}hasTypes(){return!!this._types}isCollapsed(v){return this._collapseStates.get(v)}setCollapsed(v,f){this._collapseStates.set(v,f)}isUserDefined(v){return this._userDefinedStates.get(v)}setUserDefined(v,f){return this._userDefinedStates.set(v,f)}isRecovered(v){return this._recoveredStates.get(v)}setRecovered(v,f){return this._recoveredStates.set(v,f)}getSource(v){return this.isUserDefined(v)?1:this.isRecovered(v)?2:0}setSource(v,f){f===1?(this.setUserDefined(v,!0),this.setRecovered(v,!1)):f===2?(this.setUserDefined(v,!1),this.setRecovered(v,!0)):(this.setUserDefined(v,!1),this.setRecovered(v,!1))}setCollapsedAllOfType(v,f){let d=!1;if(this._types)for(let o=0;o<this._types.length;o++)this._types[o]===v&&(this.setCollapsed(o,f),d=!0);return d}toRegion(v){return new A(this,v)}getParentIndex(v){this.ensureParentIndices();let f=((this._startIndexes[v]&u)>>>24)+((this._endIndexes[v]&u)>>>16);return f===65535?-1:f}contains(v,f){return this.getStartLineNumber(v)<=f&&this.getEndLineNumber(v)>=f}findIndex(v){let f=0,d=this._startIndexes.length;if(d===0)return-1;for(;f<d;){let o=Math.floor((f+d)/2);v<this.getStartLineNumber(o)?d=o:f=o+1}return f-1}findRange(v){let f=this.findIndex(v);if(f>=0){if(this.getEndLineNumber(f)>=v)return f;for(f=this.getParentIndex(f);f!==-1;){if(this.contains(f,v))return f;f=this.getParentIndex(f)}}return-1}toString(){let v=[];for(let f=0;f<this.length;f++)v[f]=`[${m[this.getSource(f)]}${this.isCollapsed(f)?"+":"-"}] ${this.getStartLineNumber(f)}/${this.getEndLineNumber(f)}`;return v.join(", ")}toFoldRange(v){return{startLineNumber:this._startIndexes[v]&B,endLineNumber:this._endIndexes[v]&B,type:this._types?this._types[v]:void 0,isCollapsed:this.isCollapsed(v),source:this.getSource(v)}}static fromFoldRanges(v){let f=v.length,d=new Uint32Array(f),o=new Uint32Array(f),h=[],r=!1;for(let c=0;c<f;c++){let b=v[c];d[c]=b.startLineNumber,o[c]=b.endLineNumber,h.push(b.type),b.type&&(r=!0)}r||(h=void 0);let i=new _(d,o,h);for(let c=0;c<f;c++)v[c].isCollapsed&&i.setCollapsed(c,!0),i.setSource(c,v[c].source);return i}static sanitizeAndMerge(v,f,d){d=d!=null?d:Number.MAX_VALUE;let o=(L,k)=>Array.isArray(L)?R=>R<k?L[R]:void 0:R=>R<k?L.toFoldRange(R):void 0,h=o(v,v.length),r=o(f,f.length),i=0,c=0,b=h(0),l=r(0),a=[],w,E=0,D=[];for(;b||l;){let L;if(l&&(!b||b.startLineNumber>=l.startLineNumber))b&&b.startLineNumber===l.startLineNumber?(l.source===1?L=l:(L=b,L.isCollapsed=l.isCollapsed&&b.endLineNumber===l.endLineNumber,L.source=0),b=h(++i)):(L=l,l.isCollapsed&&l.source===0&&(L.source=2)),l=r(++c);else{let k=c,R=l;for(;;){if(!R||R.startLineNumber>b.endLineNumber){L=b;break}if(R.source===1&&R.endLineNumber>b.endLineNumber)break;R=r(++k)}b=h(++i)}if(L){for(;w&&w.endLineNumber<L.startLineNumber;)w=a.pop();L.endLineNumber>L.startLineNumber&&L.startLineNumber>E&&L.endLineNumber<=d&&(!w||w.endLineNumber>=L.endLineNumber)&&(D.push(L),E=L.startLineNumber,w&&a.push(w),w=L)}}return D}}class A{constructor(v,f){this.ranges=v,this.index=f}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(v){return v.startLineNumber<=this.startLineNumber&&v.endLineNumber>=this.endLineNumber}containsLine(v){return this.startLineNumber<=v&&v<=this.endLineNumber}}},4990:(ut,Ie,t)=>{"use strict";t.d(Ie,{aI:()=>u});var m=t(9616),B=t(7702);class u{constructor(x,v,f){this.editorModel=x,this.languageConfigurationService=v,this.foldingRangesLimit=f,this.id="indent"}dispose(){}compute(x){let v=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,f=v&&!!v.offSide,d=v&&v.markers;return Promise.resolve(function(o,h,r,i=_){let c=o.getOptions().tabSize,b=new I(i),l;r&&(l=new RegExp(`(${r.start.source})|(?:${r.end.source})`));let a=[],w=o.getLineCount()+1;a.push({indent:-1,endAbove:w,line:w});for(let E=o.getLineCount();E>0;E--){let D=o.getLineContent(E),L=(0,m.q)(D,c),k,R=a[a.length-1];if(L!==-1){if(l&&(k=D.match(l))){if(!k[1]){a.push({indent:-2,endAbove:E,line:E});continue}{let O=a.length-1;for(;O>0&&a[O].indent!==-2;)O--;if(O>0){a.length=O+1,R=a[O],b.insertFirst(E,R.line,L),R.line=E,R.indent=L,R.endAbove=E;continue}}}if(R.indent>L){do a.pop(),R=a[a.length-1];while(R.indent>L);let O=R.endAbove-1;O-E>=1&&b.insertFirst(E,O,L)}R.indent===L?R.endAbove=E:a.push({indent:L,endAbove:E,line:E})}else h&&(R.endAbove=E)}return b.toIndentRanges(o)}(this.editorModel,f,d,this.foldingRangesLimit))}}class I{constructor(x){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=x}insertFirst(x,v,f){if(x>B.Xl||v>B.Xl)return;let d=this._length;this._startIndexes[d]=x,this._endIndexes[d]=v,this._length++,f<1e3&&(this._indentOccurrences[f]=(this._indentOccurrences[f]||0)+1)}toIndentRanges(x){let v=this._foldingRangesLimit.limit;if(this._length<=v){this._foldingRangesLimit.update(this._length,!1);let f=new Uint32Array(this._length),d=new Uint32Array(this._length);for(let o=this._length-1,h=0;o>=0;o--,h++)f[h]=this._startIndexes[o],d[h]=this._endIndexes[o];return new B.MN(f,d)}{this._foldingRangesLimit.update(this._length,v);let f=0,d=this._indentOccurrences.length;for(let i=0;i<this._indentOccurrences.length;i++){let c=this._indentOccurrences[i];if(c){if(c+f>v){d=i;break}f+=c}}let o=x.getOptions().tabSize,h=new Uint32Array(v),r=new Uint32Array(v);for(let i=this._length-1,c=0;i>=0;i--){let b=this._startIndexes[i],l=x.getLineContent(b),a=(0,m.q)(l,o);(a<d||a===d&&f++<v)&&(h[c]=b,r[c]=this._endIndexes[i],c++)}return new B.MN(h,r)}}}let _={limit:5e3,update:()=>{}}},9155:(ut,Ie,t)=>{"use strict";t.d(Ie,{e:()=>_});var m=t(7301),B=t(5976),u=t(7702);let I={};class _{constructor(v,f,d,o,h){this.editorModel=v,this.providers=f,this.handleFoldingRangesChange=d,this.foldingRangesLimit=o,this.fallbackRangeProvider=h,this.id="syntax",this.disposables=new B.SL,h&&this.disposables.add(h);for(let r of f)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(d))}compute(v){return function(f,d,o){let h=null,r=f.map((i,c)=>Promise.resolve(i.provideFoldingRanges(d,I,o)).then(b=>{if(!o.isCancellationRequested&&Array.isArray(b)){Array.isArray(h)||(h=[]);let l=d.getLineCount();for(let a of b)a.start>0&&a.end>a.start&&a.end<=l&&h.push({start:a.start,end:a.end,rank:c,kind:a.kind})}},m.Cp));return Promise.all(r).then(i=>h)}(this.providers,this.editorModel,v).then(f=>{var d,o;return f?function(h,r){let i=h.sort((a,w)=>{let E=a.start-w.start;return E===0&&(E=a.rank-w.rank),E}),c=new A(r),b,l=[];for(let a of i)if(b){if(a.start>b.start)if(a.end<=b.end)l.push(b),b=a,c.add(a.start,a.end,a.kind&&a.kind.value,l.length);else{if(a.start>b.end){do b=l.pop();while(b&&a.start>b.end);b&&l.push(b),b=a}c.add(a.start,a.end,a.kind&&a.kind.value,l.length)}}else b=a,c.add(a.start,a.end,a.kind&&a.kind.value,l.length);return c.toIndentRanges()}(f,this.foldingRangesLimit):(o=(d=this.fallbackRangeProvider)===null||d===void 0?void 0:d.compute(v))!==null&&o!==void 0?o:null})}dispose(){this.disposables.dispose()}}class A{constructor(v){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=v}add(v,f,d,o){if(v>u.Xl||f>u.Xl)return;let h=this._length;this._startIndexes[h]=v,this._endIndexes[h]=f,this._nestingLevels[h]=o,this._types[h]=d,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){let v=this._foldingRangesLimit.limit;if(this._length<=v){this._foldingRangesLimit.update(this._length,!1);let f=new Uint32Array(this._length),d=new Uint32Array(this._length);for(let o=0;o<this._length;o++)f[o]=this._startIndexes[o],d[o]=this._endIndexes[o];return new u.MN(f,d,this._types)}{this._foldingRangesLimit.update(this._length,v);let f=0,d=this._nestingLevelCounts.length;for(let i=0;i<this._nestingLevelCounts.length;i++){let c=this._nestingLevelCounts[i];if(c){if(c+f>v){d=i;break}f+=c}}let o=new Uint32Array(v),h=new Uint32Array(v),r=[];for(let i=0,c=0;i<this._length;i++){let b=this._nestingLevels[i];(b<d||b===d&&f++<v)&&(o[c]=this._startIndexes[i],h[c]=this._endIndexes[i],r[c]=this._types[i],c++)}return new u.MN(o,h,r)}}}},4125:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(2334),u=t(3580);class I extends m.R6{constructor(){super({id:"editor.action.fontZoomIn",label:u.NC("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(v,f){B.C.setZoomLevel(B.C.getZoomLevel()+1)}}class _ extends m.R6{constructor(){super({id:"editor.action.fontZoomOut",label:u.NC("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(v,f){B.C.setZoomLevel(B.C.getZoomLevel()-1)}}class A extends m.R6{constructor(){super({id:"editor.action.fontZoomReset",label:u.NC("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(v,f){B.C.setZoomLevel(0)}}(0,m.Qr)(I),(0,m.Qr)(_),(0,m.Qr)(A)},8823:(ut,Ie,t)=>{"use strict";t.d(Ie,{xC:()=>N,Zg:()=>O,x$:()=>T,Qq:()=>W,Qs:()=>j});var m=t(5152),B=t(9488),u=t(1050),I=t(7301),_=t(3725),A=t(1741),x=t(8401),v=t(666),f=t(6467),d=t(5520),o=t(187),h=t(4314),r=t(3860),i=t(4319),c=t(8216),b=t(5120),l=t(3580),a=t(4565);class w{constructor(H){this.value=H,this._lower=H.toLowerCase()}static toKey(H){return typeof H=="string"?H.toLowerCase():H._lower}}class E{constructor(H){if(this._set=new Set,H)for(let z of H)this.add(z)}add(H){this._set.add(w.toKey(H))}has(H){return this._set.has(w.toKey(H))}}var D=t(2065),L=t(1922),k=t(3557),R=function(F,H,z,J){return new(z||(z=Promise))(function(oe,fe){function q(ne){try{re(J.next(ne))}catch(ie){fe(ie)}}function p(ne){try{re(J.throw(ne))}catch(ie){fe(ie)}}function re(ne){var ie;ne.done?oe(ne.value):(ie=ne.value,ie instanceof z?ie:new z(function(se){se(ie)})).then(q,p)}re((J=J.apply(F,H||[])).next())})};function O(F){if(!(F=F.filter(oe=>oe.range)).length)return;let{range:H}=F[0];for(let oe=1;oe<F.length;oe++)H=h.e.plusRange(H,F[oe].range);let{startLineNumber:z,endLineNumber:J}=H;z===J?F.length===1?(0,m.Z9)(l.NC("hint11","Made 1 formatting edit on line {0}",z)):(0,m.Z9)(l.NC("hintn1","Made {0} formatting edits on line {1}",F.length,z)):F.length===1?(0,m.Z9)(l.NC("hint1n","Made 1 formatting edit between lines {0} and {1}",z,J)):(0,m.Z9)(l.NC("hintnn","Made {0} formatting edits between lines {1} and {2}",F.length,z,J))}function $(F,H,z){let J=[],oe=new E,fe=F.ordered(z);for(let p of fe)J.push(p),p.extensionId&&oe.add(p.extensionId);let q=H.ordered(z);for(let p of q){if(p.extensionId){if(oe.has(p.extensionId))continue;oe.add(p.extensionId)}J.push({displayName:p.displayName,extensionId:p.extensionId,provideDocumentFormattingEdits:(re,ne,ie)=>p.provideDocumentRangeFormattingEdits(re,re.getFullModelRange(),ne,ie)})}return J}class N{static setFormatterSelector(H){return{dispose:N._selectors.unshift(H)}}static select(H,z,J){return R(this,void 0,void 0,function*(){if(H.length===0)return;let oe=_.$.first(N._selectors);return oe?yield oe(H,z,J):void 0})}}function T(F,H,z,J,oe,fe){return R(this,void 0,void 0,function*(){let q=F.get(D.TG),{documentRangeFormattingEditProvider:p}=F.get(L.p),re=(0,d.CL)(H)?H.getModel():H,ne=p.ordered(re),ie=yield N.select(ne,re,J);ie&&(oe.report(ie),yield q.invokeFunction(C,ie,H,z,fe))})}function C(F,H,z,J,oe){var fe,q;return R(this,void 0,void 0,function*(){let p=F.get(i.p),re=F.get(k.VZ),ne,ie;(0,d.CL)(z)?(ne=z.getModel(),ie=new f.Dl(z,5,void 0,oe)):(ne=z,ie=new f.YQ(z,oe));let se=[],ce=0;for(let ve of(0,B._2)(J).sort(h.e.compareRangesUsingStarts))ce>0&&h.e.areIntersectingOrTouching(se[ce-1],ve)?se[ce-1]=h.e.fromPositions(se[ce-1].getStartPosition(),ve.getEndPosition()):ce=se.push(ve);let be=ve=>R(this,void 0,void 0,function*(){var X,ye;re.trace("[format][provideDocumentRangeFormattingEdits] (request)",(X=H.extensionId)===null||X===void 0?void 0:X.value,ve);let Ce=(yield H.provideDocumentRangeFormattingEdits(ne,ve,ne.getFormattingOptions(),ie.token))||[];return re.trace("[format][provideDocumentRangeFormattingEdits] (response)",(ye=H.extensionId)===null||ye===void 0?void 0:ye.value,Ce),Ce}),de=(ve,X)=>{if(!ve.length||!X.length)return!1;let ye=ve.reduce((Ce,Ee)=>h.e.plusRange(Ce,Ee.range),ve[0].range);if(!X.some(Ce=>h.e.intersectRanges(ye,Ce.range)))return!1;for(let Ce of ve)for(let Ee of X)if(h.e.intersectRanges(Ce.range,Ee.range))return!0;return!1},U=[],ue=[];try{if(typeof H.provideDocumentRangesFormattingEdits=="function"){re.trace("[format][provideDocumentRangeFormattingEdits] (request)",(fe=H.extensionId)===null||fe===void 0?void 0:fe.value,se);let ve=(yield H.provideDocumentRangesFormattingEdits(ne,se,ne.getFormattingOptions(),ie.token))||[];re.trace("[format][provideDocumentRangeFormattingEdits] (response)",(q=H.extensionId)===null||q===void 0?void 0:q.value,ve),ue.push(ve)}else{for(let ve of se){if(ie.token.isCancellationRequested)return!0;ue.push(yield be(ve))}for(let ve=0;ve<se.length;++ve)for(let X=ve+1;X<se.length;++X){if(ie.token.isCancellationRequested)return!0;if(de(ue[ve],ue[X])){let ye=h.e.plusRange(se[ve],se[X]),Ce=yield be(ye);se.splice(X,1),se.splice(ve,1),se.push(ye),ue.splice(X,1),ue.splice(ve,1),ue.push(Ce),ve=0,X=0}}}for(let ve of ue){if(ie.token.isCancellationRequested)return!0;let X=yield p.computeMoreMinimalEdits(ne.uri,ve);X&&U.push(...X)}}finally{ie.dispose()}if(U.length===0)return!1;if((0,d.CL)(z))b.V.execute(z,U,!0),O(U),z.revealPositionInCenterIfOutsideViewport(z.getPosition(),1);else{let[{range:ve}]=U,X=new r.Y(ve.startLineNumber,ve.startColumn,ve.endLineNumber,ve.endColumn);ne.pushEditOperations([X],U.map(ye=>({text:ye.text,range:h.e.lift(ye.range),forceMoveMarkers:!0})),ye=>{for(let{range:Ce}of ye)if(h.e.areIntersectingOrTouching(Ce,X))return[new r.Y(Ce.startLineNumber,Ce.startColumn,Ce.endLineNumber,Ce.endColumn)];return null})}return!0})}function W(F,H,z,J,oe){return R(this,void 0,void 0,function*(){let fe=F.get(D.TG),q=F.get(L.p),p=(0,d.CL)(H)?H.getModel():H,re=$(q.documentFormattingEditProvider,q.documentRangeFormattingEditProvider,p),ne=yield N.select(re,p,z);ne&&(J.report(ne),yield fe.invokeFunction(K,ne,H,z,oe))})}function K(F,H,z,J,oe){return R(this,void 0,void 0,function*(){let fe=F.get(i.p),q,p,re;(0,d.CL)(z)?(q=z.getModel(),p=new f.Dl(z,5,void 0,oe)):(q=z,p=new f.YQ(z,oe));try{let ne=yield H.provideDocumentFormattingEdits(q,q.getFormattingOptions(),p.token);if(re=yield fe.computeMoreMinimalEdits(q.uri,ne),p.token.isCancellationRequested)return!0}finally{p.dispose()}if(!re||re.length===0)return!1;if((0,d.CL)(z))b.V.execute(z,re,J!==2),J!==2&&(O(re),z.revealPositionInCenterIfOutsideViewport(z.getPosition(),1));else{let[{range:ne}]=re,ie=new r.Y(ne.startLineNumber,ne.startColumn,ne.endLineNumber,ne.endColumn);q.pushEditOperations([ie],re.map(se=>({text:se.text,range:h.e.lift(se.range),forceMoveMarkers:!0})),se=>{for(let{range:ce}of se)if(h.e.areIntersectingOrTouching(ce,ie))return[new r.Y(ce.startLineNumber,ce.startColumn,ce.endLineNumber,ce.endColumn)];return null})}return!0})}function j(F,H,z,J,oe,fe,q){let p=H.onTypeFormattingEditProvider.ordered(z);return p.length===0||p[0].autoFormatTriggerCharacters.indexOf(oe)<0?Promise.resolve(void 0):Promise.resolve(p[0].provideOnTypeFormattingEdits(z,J,oe,fe,q)).catch(I.Cp).then(re=>F.computeMoreMinimalEdits(z.uri,re))}N._selectors=new A.S,a.P.registerCommand("_executeFormatRangeProvider",function(F,...H){return R(this,void 0,void 0,function*(){let[z,J,oe]=H;(0,x.p_)(v.o.isUri(z)),(0,x.p_)(h.e.isIRange(J));let fe=F.get(c.S),q=F.get(i.p),p=F.get(L.p),re=yield fe.createModelReference(z);try{return function(ne,ie,se,ce,be,de){return R(this,void 0,void 0,function*(){let U=ie.documentRangeFormattingEditProvider.ordered(se);for(let ue of U){let ve=yield Promise.resolve(ue.provideDocumentRangeFormattingEdits(se,ce,be,de)).catch(I.Cp);if((0,B.Of)(ve))return yield ne.computeMoreMinimalEdits(se.uri,ve)}})}(q,p,re.object.textEditorModel,h.e.lift(J),oe,u.T.None)}finally{re.dispose()}})}),a.P.registerCommand("_executeFormatDocumentProvider",function(F,...H){return R(this,void 0,void 0,function*(){let[z,J]=H;(0,x.p_)(v.o.isUri(z));let oe=F.get(c.S),fe=F.get(i.p),q=F.get(L.p),p=yield oe.createModelReference(z);try{return function(re,ne,ie,se,ce){return R(this,void 0,void 0,function*(){let be=$(ne.documentFormattingEditProvider,ne.documentRangeFormattingEditProvider,ie);for(let de of be){let U=yield Promise.resolve(de.provideDocumentFormattingEdits(ie,se,ce)).catch(I.Cp);if((0,B.Of)(U))return yield re.computeMoreMinimalEdits(ie.uri,U)}})}(fe,q,p.object.textEditorModel,J,u.T.None)}finally{p.dispose()}})}),a.P.registerCommand("_executeFormatOnTypeProvider",function(F,...H){return R(this,void 0,void 0,function*(){let[z,J,oe,fe]=H;(0,x.p_)(v.o.isUri(z)),(0,x.p_)(o.L.isIPosition(J)),(0,x.p_)(typeof oe=="string");let q=F.get(c.S),p=F.get(i.p),re=F.get(L.p),ne=yield q.createModelReference(z);try{return j(p,re,ne.object.textEditorModel,o.L.lift(J),oe,fe,u.T.None)}finally{ne.dispose()}})})},1097:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(9488),B=t(1050),u=t(7301),I=t(2258),_=t(5976),A=t(6830),x=t(1640),v=t(4906),f=t(4314),d=t(9102),o=t(4319),h=t(1922),r=t(8823),i=t(5120),c=t(3580),b=t(4565),l=t(3983),a=t(2065),w=t(535),E=function(N,T,C,W){var K,j=arguments.length,F=j<3?T:W===null?W=Object.getOwnPropertyDescriptor(T,C):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(N,T,C,W);else for(var H=N.length-1;H>=0;H--)(K=N[H])&&(F=(j<3?K(F):j>3?K(T,C,F):K(T,C))||F);return j>3&&F&&Object.defineProperty(T,C,F),F},D=function(N,T){return function(C,W){T(C,W,N)}},L=function(N,T,C,W){return new(C||(C=Promise))(function(K,j){function F(J){try{z(W.next(J))}catch(oe){j(oe)}}function H(J){try{z(W.throw(J))}catch(oe){j(oe)}}function z(J){var oe;J.done?K(J.value):(oe=J.value,oe instanceof C?oe:new C(function(fe){fe(oe)})).then(F,H)}z((W=W.apply(N,T||[])).next())})};let k=class{constructor(N,T,C){this._editor=N,this._languageFeaturesService=T,this._workerService=C,this._disposables=new _.SL,this._sessionDisposables=new _.SL,this._disposables.add(T.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(N.onDidChangeModel(()=>this._update())),this._disposables.add(N.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(N.onDidChangeConfiguration(W=>{W.hasChanged(54)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(54)||!this._editor.hasModel())return;let N=this._editor.getModel(),[T]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(N);if(!T||!T.autoFormatTriggerCharacters)return;let C=new v.q;for(let W of T.autoFormatTriggerCharacters)C.add(W.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(W=>{let K=W.charCodeAt(W.length-1);C.has(K)&&this._trigger(String.fromCharCode(K))}))}_trigger(N){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let T=this._editor.getModel(),C=this._editor.getPosition(),W=new B.A,K=this._editor.onDidChangeModelContent(j=>{if(j.isFlush)return W.cancel(),void K.dispose();for(let F=0,H=j.changes.length;F<H;F++)if(j.changes[F].range.endLineNumber<=C.lineNumber)return W.cancel(),void K.dispose()});(0,r.Qs)(this._workerService,this._languageFeaturesService,T,C,N,T.getFormattingOptions(),W.token).then(j=>{W.token.isCancellationRequested||(0,m.Of)(j)&&(i.V.execute(this._editor,j,!0),(0,r.Zg)(j))}).finally(()=>{K.dispose()})}};k.ID="editor.contrib.autoFormat",k=E([D(1,h.p),D(2,o.p)],k);let R=class{constructor(N,T,C){this.editor=N,this._languageFeaturesService=T,this._instantiationService=C,this._callOnDispose=new _.SL,this._callOnModel=new _.SL,this._callOnDispose.add(N.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(N.onDidChangeModel(()=>this._update())),this._callOnDispose.add(N.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(T.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(53)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:N})=>this._trigger(N)))}_trigger(N){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(r.x$,this.editor,N,2,w.Ex.None,B.T.None).catch(u.dL))}};R.ID="editor.contrib.formatOnPaste",R=E([D(1,h.p),D(2,a.TG)],R);class O extends A.R6{constructor(){super({id:"editor.action.formatDocument",label:c.NC("formatDocument.label","Format Document"),alias:"Format Document",precondition:l.Ao.and(d.u.notInCompositeEditor,d.u.writable,d.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:d.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(T,C){return L(this,void 0,void 0,function*(){if(C.hasModel()){let W=T.get(a.TG);yield T.get(w.ek).showWhile(W.invokeFunction(r.Qq,C,1,w.Ex.None,B.T.None),250)}})}}class $ extends A.R6{constructor(){super({id:"editor.action.formatSelection",label:c.NC("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:l.Ao.and(d.u.writable,d.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,I.gx)(2089,2084),weight:100},contextMenuOpts:{when:d.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(T,C){return L(this,void 0,void 0,function*(){if(!C.hasModel())return;let W=T.get(a.TG),K=C.getModel(),j=C.getSelections().map(H=>H.isEmpty()?new f.e(H.startLineNumber,1,H.startLineNumber,K.getLineMaxColumn(H.startLineNumber)):H);yield T.get(w.ek).showWhile(W.invokeFunction(r.x$,C,j,1,w.Ex.None,B.T.None),250)})}}(0,A._K)(k.ID,k,2),(0,A._K)(R.ID,R,2),(0,A.Qr)(O),(0,A.Qr)($),b.P.registerCommand("editor.action.format",N=>L(void 0,void 0,void 0,function*(){let T=N.get(x.$).getFocusedCodeEditor();if(!T||!T.hasModel())return;let C=N.get(b.H);T.getSelection().isEmpty()?yield C.executeCommand("editor.action.formatDocument"):yield C.executeCommand("editor.action.formatSelection")}))},5120:(ut,Ie,t)=>{"use strict";t.d(Ie,{V:()=>I});var m=t(9386),B=t(4314),u=t(3407);class I{static _handleEolEdits(A,x){let v,f=[];for(let d of x)typeof d.eol=="number"&&(v=d.eol),d.range&&typeof d.text=="string"&&f.push(d);return typeof v=="number"&&A.hasModel()&&A.getModel().pushEOL(v),f}static _isFullModelReplaceEdit(A,x){if(!A.hasModel())return!1;let v=A.getModel(),f=v.validateRange(x.range);return v.getFullModelRange().equalsRange(f)}static execute(A,x,v){v&&A.pushUndoStop();let f=u.Z.capture(A),d=I._handleEolEdits(A,x);d.length===1&&I._isFullModelReplaceEdit(A,d[0])?A.executeEdits("formatEditsCommand",d.map(o=>m.h.replace(B.e.lift(o.range),o.text))):A.executeEdits("formatEditsCommand",d.map(o=>m.h.replaceMove(B.e.lift(o.range),o.text))),v&&A.pushUndoStop(),f.restoreRelativeVerticalPositionOfCursor(A)}}},4970:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{MarkerController:()=>Ae,NextMarkerAction:()=>_e});var m=t(3046),B=t(5976),u=t(6830),I=t(1640),_=t(187),A=t(4314),x=t(9102),v=t(9488),f=t(4669),d=t(1741),o=t(7295),h=t(666),r=t(5026),i=t(2065),c=t(8674),b=t(3108),l=function(le,ee,me,xe){var We,Ve=arguments.length,Ye=Ve<3?ee:xe===null?xe=Object.getOwnPropertyDescriptor(ee,me):xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ye=Reflect.decorate(le,ee,me,xe);else for(var tt=le.length-1;tt>=0;tt--)(We=le[tt])&&(Ye=(Ve<3?We(Ye):Ve>3?We(ee,me,Ye):We(ee,me))||Ye);return Ve>3&&Ye&&Object.defineProperty(ee,me,Ye),Ye},a=function(le,ee){return function(me,xe){ee(me,xe,le)}};class w{constructor(ee,me,xe){this.marker=ee,this.index=me,this.total=xe}}let E=class{constructor(le,ee,me){this._markerService=ee,this._configService=me,this._onDidChange=new f.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new B.SL,this._markers=[],this._nextIdx=-1,h.o.isUri(le)?this._resourceFilter=Ye=>Ye.toString()===le.toString():le&&(this._resourceFilter=le);let xe=this._configService.getValue("problems.sortOrder"),We=(Ye,tt)=>{let Qe=(0,o.qu)(Ye.resource.toString(),tt.resource.toString());return Qe===0&&(Qe=xe==="position"?A.e.compareRangesUsingStarts(Ye,tt)||c.ZL.compare(Ye.severity,tt.severity):c.ZL.compare(Ye.severity,tt.severity)||A.e.compareRangesUsingStarts(Ye,tt)),Qe},Ve=()=>{this._markers=this._markerService.read({resource:h.o.isUri(le)?le:void 0,severities:c.ZL.Error|c.ZL.Warning|c.ZL.Info}),typeof le=="function"&&(this._markers=this._markers.filter(Ye=>this._resourceFilter(Ye.resource))),this._markers.sort(We)};Ve(),this._dispoables.add(ee.onMarkerChanged(Ye=>{this._resourceFilter&&!Ye.some(tt=>this._resourceFilter(tt))||(Ve(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(le){return!this._resourceFilter&&!le||!(!this._resourceFilter||!le)&&this._resourceFilter(le)}get selected(){let le=this._markers[this._nextIdx];return le&&new w(le,this._nextIdx+1,this._markers.length)}_initIdx(le,ee,me){let xe=!1,We=this._markers.findIndex(Ve=>Ve.resource.toString()===le.uri.toString());We<0&&(We=(0,v.ry)(this._markers,{resource:le.uri},(Ve,Ye)=>(0,o.qu)(Ve.resource.toString(),Ye.resource.toString())),We<0&&(We=~We));for(let Ve=We;Ve<this._markers.length;Ve++){let Ye=A.e.lift(this._markers[Ve]);if(Ye.isEmpty()){let tt=le.getWordAtPosition(Ye.getStartPosition());tt&&(Ye=new A.e(Ye.startLineNumber,tt.startColumn,Ye.startLineNumber,tt.endColumn))}if(ee&&(Ye.containsPosition(ee)||ee.isBeforeOrEqual(Ye.getStartPosition()))){this._nextIdx=Ve,xe=!0;break}if(this._markers[Ve].resource.toString()!==le.uri.toString())break}xe||(this._nextIdx=me?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(le,ee,me){if(this._markers.length===0)return!1;let xe=this._nextIdx;return this._nextIdx===-1?this._initIdx(ee,me,le):le?this._nextIdx=(this._nextIdx+1)%this._markers.length:le||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),xe!==this._nextIdx}find(le,ee){let me=this._markers.findIndex(xe=>xe.resource.toString()===le.toString());if(!(me<0)){for(;me<this._markers.length;me++)if(A.e.containsPosition(this._markers[me],ee))return new w(this._markers[me],me+1,this._markers.length)}}};E=l([a(1,c.lT),a(2,b.Ui)],E);let D=(0,i.yh)("IMarkerNavigationService"),L=class{constructor(le,ee){this._markerService=le,this._configService=ee,this._provider=new d.S}getMarkerList(le){for(let ee of this._provider){let me=ee.getMarkerList(le);if(me)return me}return new E(le,this._markerService,this._configService)}};L=l([a(0,c.lT),a(1,b.Ui)],L),(0,r.z)(D,L,1);var k,R=t(3580),O=t(4144),$=t(3983),N=t(9554),T=t(5321),C=t(9802),W=t(1264),K=t(5935),j=t(2049),F=t(2444),H=t(4349),z=t(988),J=t(5670),oe=t(4603);(function(le){le.className=function(ee){switch(ee){case oe.Z.Ignore:return"severity-ignore "+J.k.asClassName(m.l.info);case oe.Z.Info:return J.k.asClassName(m.l.info);case oe.Z.Warning:return J.k.asClassName(m.l.warning);case oe.Z.Error:return J.k.asClassName(m.l.error);default:return""}}})(k||(k={}));var fe=t(3910),q=t(7781),p=function(le,ee){return function(me,xe){ee(me,xe,le)}};class re{constructor(ee,me,xe,We,Ve){this._openerService=We,this._labelService=Ve,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new B.SL,this._editor=me;let Ye=document.createElement("div");Ye.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),Ye.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),Ye.appendChild(this._relatedBlock),this._disposables.add(T.mu(this._relatedBlock,"click",tt=>{tt.preventDefault();let Qe=this._relatedDiagnostics.get(tt.target);Qe&&xe(Qe)})),this._scrollable=new C.NB(Ye,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),ee.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(tt=>{Ye.style.left=`-${tt.scrollLeft}px`,Ye.style.top=`-${tt.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){(0,B.B9)(this._disposables)}update(ee){let{source:me,message:xe,relatedInformation:We,code:Ve}=ee,Ye=((me==null?void 0:me.length)||0)+2;Ve&&(Ye+=typeof Ve=="string"?Ve.length:Ve.value.length);let tt=(0,o.uq)(xe);this._lines=tt.length,this._longestLineLength=0;for(let Qt of tt)this._longestLineLength=Math.max(Qt.length+Ye,this._longestLineLength);T.PO(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(ee)),this._editor.applyFontInfo(this._messageBlock);let Qe=this._messageBlock;for(let Qt of tt)Qe=document.createElement("div"),Qe.innerText=Qt,Qt===""&&(Qe.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(Qe);if(me||Ve){let Qt=document.createElement("span");if(Qt.classList.add("details"),Qe.appendChild(Qt),me){let At=document.createElement("span");At.innerText=me,At.classList.add("source"),Qt.appendChild(At)}if(Ve)if(typeof Ve=="string"){let At=document.createElement("span");At.innerText=`(${Ve})`,At.classList.add("code"),Qt.appendChild(At)}else this._codeLink=T.$("a.code-link"),this._codeLink.setAttribute("href",`${Ve.target.toString()}`),this._codeLink.onclick=At=>{this._openerService.open(Ve.target,{allowCommands:!0}),At.preventDefault(),At.stopPropagation()},T.R3(this._codeLink,T.$("span")).innerText=Ve.value,Qt.appendChild(this._codeLink)}if(T.PO(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,v.Of)(We)){let Qt=this._relatedBlock.appendChild(document.createElement("div"));Qt.style.paddingTop=`${Math.floor(.66*this._editor.getOption(64))}px`,this._lines+=1;for(let At of We){let mi=document.createElement("div"),Lt=document.createElement("a");Lt.classList.add("filename"),Lt.innerText=`${this._labelService.getUriBasenameLabel(At.resource)}(${At.startLineNumber}, ${At.startColumn}): `,Lt.title=this._labelService.getUriLabel(At.resource),this._relatedDiagnostics.set(Lt,At);let ct=document.createElement("span");ct.innerText=At.message,mi.appendChild(Lt),mi.appendChild(ct),this._lines+=1,Qt.appendChild(mi)}}let bt=this._editor.getOption(48),ht=Math.ceil(bt.typicalFullwidthCharacterWidth*this._longestLineLength*.75),xt=bt.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:ht,scrollHeight:xt})}layout(ee,me){this._scrollable.getDomNode().style.height=`${ee}px`,this._scrollable.getDomNode().style.width=`${me}px`,this._scrollable.setScrollDimensions({width:me,height:ee})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(ee){let me="";switch(ee.severity){case c.ZL.Error:me=R.NC("Error","Error");break;case c.ZL.Warning:me=R.NC("Warning","Warning");break;case c.ZL.Info:me=R.NC("Info","Info");break;case c.ZL.Hint:me=R.NC("Hint","Hint")}let xe=R.NC("marker aria","{0} at {1}. ",me,ee.startLineNumber+":"+ee.startColumn),We=this._editor.getModel();return We&&ee.startLineNumber<=We.getLineCount()&&ee.startLineNumber>=1&&(xe=`${We.getLineContent(ee.startLineNumber)}, ${xe}`),xe}}let ne=class $l extends j.vk{constructor(ee,me,xe,We,Ve,Ye,tt){super(ee,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},Ve),this._themeService=me,this._openerService=xe,this._menuService=We,this._contextKeyService=Ye,this._labelService=tt,this._callOnDispose=new B.SL,this._onDidSelectRelatedInformation=new f.Q5,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=c.ZL.Warning,this._backgroundColor=W.Il.white,this._applyTheme(me.getColorTheme()),this._callOnDispose.add(me.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(ee){this._backgroundColor=ee.getColor(ye);let me=be,xe=de;this._severity===c.ZL.Warning?(me=U,xe=ue):this._severity===c.ZL.Info&&(me=ve,xe=X);let We=ee.getColor(me),Ve=ee.getColor(xe);this.style({arrowColor:We,frameColor:We,headerBackgroundColor:Ve,primaryHeadingColor:ee.getColor(j.IH),secondaryHeadingColor:ee.getColor(j.R7)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(ee){super._fillHead(ee),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(We=>this.editor.focus()));let me=[],xe=this._menuService.createMenu($l.TitleMenu,this._contextKeyService);(0,F.vr)(xe,void 0,me),this._actionbarWidget.push(me,{label:!1,icon:!0,index:0}),xe.dispose()}_fillTitleIcon(ee){this._icon=T.R3(ee,T.$(""))}_fillBody(ee){this._parentContainer=ee,ee.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),ee.appendChild(this._container),this._message=new re(this._container,this.editor,me=>this._onDidSelectRelatedInformation.fire(me),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(ee,me,xe){this._container.classList.remove("stale"),this._message.update(ee),this._severity=ee.severity,this._applyTheme(this._themeService.getColorTheme());let We=A.e.lift(ee),Ve=this.editor.getPosition(),Ye=Ve&&We.containsPosition(Ve)?Ve:We.getStartPosition();super.show(Ye,this.computeRequiredHeight());let tt=this.editor.getModel();if(tt){let Qe=xe>1?R.NC("problems","{0} of {1} problems",me,xe):R.NC("change","{0} of {1} problem",me,xe);this.setTitle((0,K.EZ)(tt.uri),Qe)}this._icon.className=`codicon ${k.className(c.ZL.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(Ye,0),this.editor.focus()}updateMarker(ee){this._container.classList.remove("stale"),this._message.update(ee)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(ee,me){super._doLayoutBody(ee,me),this._heightInPixel=ee,this._message.layout(ee,me),this._container.style.height=`${ee}px`}_onWidth(ee){this._message.layout(this._heightInPixel,ee)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};ne.TitleMenu=new O.eH("gotoErrorTitleMenu"),ne=function(le,ee,me,xe){var We,Ve=arguments.length,Ye=Ve<3?ee:xe===null?xe=Object.getOwnPropertyDescriptor(ee,me):xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ye=Reflect.decorate(le,ee,me,xe);else for(var tt=le.length-1;tt>=0;tt--)(We=le[tt])&&(Ye=(Ve<3?We(Ye):Ve>3?We(ee,me,Ye):We(ee,me))||Ye);return Ve>3&&Ye&&Object.defineProperty(ee,me,Ye),Ye}([p(1,q.XE),p(2,z.v4),p(3,O.co),p(4,i.TG),p(5,$.i6),p(6,H.e)],ne);let ie=(0,fe.kwl)(fe.lXJ,fe.b6y),se=(0,fe.kwl)(fe.uoC,fe.pW3),ce=(0,fe.kwl)(fe.c63,fe.T83),be=(0,fe.P6G)("editorMarkerNavigationError.background",{dark:ie,light:ie,hcDark:fe.lRK,hcLight:fe.lRK},R.NC("editorMarkerNavigationError","Editor marker navigation widget error color.")),de=(0,fe.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,fe.ZnX)(be,.1),light:(0,fe.ZnX)(be,.1),hcDark:null,hcLight:null},R.NC("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),U=(0,fe.P6G)("editorMarkerNavigationWarning.background",{dark:se,light:se,hcDark:fe.lRK,hcLight:fe.lRK},R.NC("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),ue=(0,fe.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,fe.ZnX)(U,.1),light:(0,fe.ZnX)(U,.1),hcDark:"#0C141F",hcLight:(0,fe.ZnX)(U,.2)},R.NC("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),ve=(0,fe.P6G)("editorMarkerNavigationInfo.background",{dark:ce,light:ce,hcDark:fe.lRK,hcLight:fe.lRK},R.NC("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),X=(0,fe.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,fe.ZnX)(ve,.1),light:(0,fe.ZnX)(ve,.1),hcDark:null,hcLight:null},R.NC("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),ye=(0,fe.P6G)("editorMarkerNavigation.background",{dark:fe.cvW,light:fe.cvW,hcDark:fe.cvW,hcLight:fe.cvW},R.NC("editorMarkerNavigationBackground","Editor marker navigation widget background."));var Ce=function(le,ee){return function(me,xe){ee(me,xe,le)}},Ee=function(le,ee,me,xe){return new(me||(me=Promise))(function(We,Ve){function Ye(bt){try{Qe(xe.next(bt))}catch(ht){Ve(ht)}}function tt(bt){try{Qe(xe.throw(bt))}catch(ht){Ve(ht)}}function Qe(bt){var ht;bt.done?We(bt.value):(ht=bt.value,ht instanceof me?ht:new me(function(xt){xt(ht)})).then(Ye,tt)}Qe((xe=xe.apply(le,ee||[])).next())})};let Ae=class ua{static get(ee){return ee.getContribution(ua.ID)}constructor(ee,me,xe,We,Ve){this._markerNavigationService=me,this._contextKeyService=xe,this._editorService=We,this._instantiationService=Ve,this._sessionDispoables=new B.SL,this._editor=ee,this._widgetVisible=Le.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(ee){if(this._model&&this._model.matches(ee))return this._model;let me=!1;return this._model&&(me=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(ee),me&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(ne,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(xe=>{var We,Ve,Ye;!((We=this._model)===null||We===void 0)&&We.selected&&A.e.containsPosition((Ve=this._model)===null||Ve===void 0?void 0:Ve.selected.marker,xe.position)||(Ye=this._model)===null||Ye===void 0||Ye.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;let xe=this._model.find(this._editor.getModel().uri,this._widget.position);xe?this._widget.updateMarker(xe.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(xe=>{this._editorService.openCodeEditor({resource:xe.resource,options:{pinned:!0,revealIfOpened:!0,selection:A.e.lift(xe).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(ee=!0){this._cleanUp(),ee&&this._editor.focus()}showAtMarker(ee){if(this._editor.hasModel()){let me=this._getOrCreateModel(this._editor.getModel().uri);me.resetIndex(),me.move(!0,this._editor.getModel(),new _.L(ee.startLineNumber,ee.startColumn)),me.selected&&this._widget.showAtMarker(me.selected.marker,me.selected.index,me.selected.total)}}nagivate(ee,me){var xe,We;return Ee(this,void 0,void 0,function*(){if(this._editor.hasModel()){let Ve=this._getOrCreateModel(me?void 0:this._editor.getModel().uri);if(Ve.move(ee,this._editor.getModel(),this._editor.getPosition()),!Ve.selected)return;if(Ve.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();let Ye=yield this._editorService.openCodeEditor({resource:Ve.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:Ve.selected.marker}},this._editor);Ye&&((xe=ua.get(Ye))===null||xe===void 0||xe.close(),(We=ua.get(Ye))===null||We===void 0||We.nagivate(ee,me))}else this._widget.showAtMarker(Ve.selected.marker,Ve.selected.index,Ve.selected.total)}})}};Ae.ID="editor.contrib.markerController",Ae=function(le,ee,me,xe){var We,Ve=arguments.length,Ye=Ve<3?ee:xe===null?xe=Object.getOwnPropertyDescriptor(ee,me):xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ye=Reflect.decorate(le,ee,me,xe);else for(var tt=le.length-1;tt>=0;tt--)(We=le[tt])&&(Ye=(Ve<3?We(Ye):Ve>3?We(ee,me,Ye):We(ee,me))||Ye);return Ve>3&&Ye&&Object.defineProperty(ee,me,Ye),Ye}([Ce(1,D),Ce(2,$.i6),Ce(3,I.$),Ce(4,i.TG)],Ae);class Fe extends u.R6{constructor(ee,me,xe){super(xe),this._next=ee,this._multiFile=me}run(ee,me){var xe;return Ee(this,void 0,void 0,function*(){me.hasModel()&&((xe=Ae.get(me))===null||xe===void 0||xe.nagivate(this._next,this._multiFile))})}}class _e extends Fe{constructor(){super(!0,!1,{id:_e.ID,label:_e.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:x.u.focus,primary:578,weight:100},menuOpts:{menuId:ne.TitleMenu,title:_e.LABEL,icon:(0,N.q5)("marker-navigation-next",m.l.arrowDown,R.NC("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}_e.ID="editor.action.marker.next",_e.LABEL=R.NC("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class te extends Fe{constructor(){super(!1,!1,{id:te.ID,label:te.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:x.u.focus,primary:1602,weight:100},menuOpts:{menuId:ne.TitleMenu,title:te.LABEL,icon:(0,N.q5)("marker-navigation-previous",m.l.arrowUp,R.NC("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}te.ID="editor.action.marker.prev",te.LABEL=R.NC("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)"),(0,u._K)(Ae.ID,Ae,4),(0,u.Qr)(_e),(0,u.Qr)(te),(0,u.Qr)(class extends Fe{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:R.NC("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:x.u.focus,primary:66,weight:100},menuOpts:{menuId:O.eH.MenubarGoMenu,title:R.NC({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}),(0,u.Qr)(class extends Fe{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:R.NC("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:x.u.focus,primary:1090,weight:100},menuOpts:{menuId:O.eH.MenubarGoMenu,title:R.NC({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}});let Le=new $.uy("markersNavigationVisible",!1),ke=u._l.bindToContribution(Ae.get);(0,u.fK)(new ke({id:"closeMarkersNavigation",precondition:Le,handler:le=>le.close(),kbOpts:{weight:150,kbExpr:x.u.focus,primary:9,secondary:[1033]}}))},628:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{DefinitionAction:()=>Ee,SymbolNavigationAction:()=>Ce,SymbolNavigationAnchor:()=>ye});var m=t(6268),B=t(5152),u=t(5393),I=t(2258),_=t(1432),A=t(8401),x=t(666),v=t(6467),f=t(5520),d=t(6830),o=t(1640),h=t(4527),r=t(187),i=t(4314),c=t(9102),b=t(6887),l=t(7376),a=t(1293),w=t(4669),E=t(5976),D=t(5935),L=t(3580),k=t(3983),R=t(5026),O=t(2065),$=t(1847),N=t(9989),T=t(9422),C=function(le,ee,me,xe){var We,Ve=arguments.length,Ye=Ve<3?ee:xe===null?xe=Object.getOwnPropertyDescriptor(ee,me):xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ye=Reflect.decorate(le,ee,me,xe);else for(var tt=le.length-1;tt>=0;tt--)(We=le[tt])&&(Ye=(Ve<3?We(Ye):Ve>3?We(ee,me,Ye):We(ee,me))||Ye);return Ve>3&&Ye&&Object.defineProperty(ee,me,Ye),Ye},W=function(le,ee){return function(me,xe){ee(me,xe,le)}};let K=new k.uy("hasSymbols",!1,(0,L.NC)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),j=(0,O.yh)("ISymbolNavigationService"),F=class{constructor(le,ee,me,xe){this._editorService=ee,this._notificationService=me,this._keybindingService=xe,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=K.bindTo(le)}reset(){var le,ee;this._ctxHasSymbols.reset(),(le=this._currentState)===null||le===void 0||le.dispose(),(ee=this._currentMessage)===null||ee===void 0||ee.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(le){let ee=le.parent.parent;if(ee.references.length<=1)return void this.reset();this._currentModel=ee,this._currentIdx=ee.references.indexOf(le),this._ctxHasSymbols.set(!0),this._showMessage();let me=new H(this._editorService),xe=me.onDidChange(We=>{if(this._ignoreEditorChange)return;let Ve=this._editorService.getActiveCodeEditor();if(!Ve)return;let Ye=Ve.getModel(),tt=Ve.getPosition();if(!Ye||!tt)return;let Qe=!1,bt=!1;for(let ht of ee.references)if((0,D.Xy)(ht.uri,Ye.uri))Qe=!0,bt=bt||i.e.containsPosition(ht.range,tt);else if(Qe)break;Qe&&bt||this.reset()});this._currentState=(0,E.F8)(me,xe)}revealNext(le){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;let ee=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:ee.uri,options:{selection:i.e.collapseToStart(ee.range),selectionRevealType:3}},le).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var le;(le=this._currentMessage)===null||le===void 0||le.dispose();let ee=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),me=ee?(0,L.NC)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,ee.getLabel()):(0,L.NC)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(me)}};F=C([W(0,k.i6),W(1,o.$),W(2,T.lT),W(3,$.d)],F),(0,R.z)(j,F,1),(0,d.fK)(new class extends d._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:K,kbOpts:{weight:100,primary:70}})}runEditorCommand(le,ee){return le.get(j).revealNext(ee)}}),N.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:K,primary:9,handler(le){le.get(j).reset()}});let H=class{constructor(le){this._listener=new Map,this._disposables=new E.SL,this._onDidChange=new w.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(le.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(le.onCodeEditorAdd(this._onDidAddEditor,this)),le.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,E.B9)(this._listener.values())}_onDidAddEditor(le){this._listener.set(le,(0,E.F8)(le.onDidChangeCursorPosition(ee=>this._onDidChange.fire({editor:le})),le.onDidChangeModelContent(ee=>this._onDidChange.fire({editor:le}))))}_onDidRemoveEditor(le){var ee;(ee=this._listener.get(le))===null||ee===void 0||ee.dispose(),this._listener.delete(le)}};H=C([W(0,o.$)],H);var z,J,oe,fe,q,p,re,ne,ie=t(7753),se=t(2049),ce=t(4144),be=t(4565),de=t(535),U=t(184),ue=t(1922),ve=t(3725),X=function(le,ee,me,xe){return new(me||(me=Promise))(function(We,Ve){function Ye(bt){try{Qe(xe.next(bt))}catch(ht){Ve(ht)}}function tt(bt){try{Qe(xe.throw(bt))}catch(ht){Ve(ht)}}function Qe(bt){var ht;bt.done?We(bt.value):(ht=bt.value,ht instanceof me?ht:new me(function(xt){xt(ht)})).then(Ye,tt)}Qe((xe=xe.apply(le,ee||[])).next())})};ce.BH.appendMenuItem(ce.eH.EditorContext,{submenu:ce.eH.EditorContextPeek,title:L.NC("peek.submenu","Peek"),group:"navigation",order:100});class ye{static is(ee){return!(!ee||typeof ee!="object")&&(ee instanceof ye||!(!r.L.isIPosition(ee.position)||!ee.model))}constructor(ee,me){this.model=ee,this.position=me}}class Ce extends d.x1{static all(){return Ce._allSymbolNavigationCommands.values()}static _patchConfig(ee){let me=Object.assign(Object.assign({},ee),{f1:!0});if(me.menu)for(let xe of ve.$.wrap(me.menu))xe.id!==ce.eH.EditorContext&&xe.id!==ce.eH.EditorContextPeek||(xe.when=k.Ao.and(ee.precondition,xe.when));return me}constructor(ee,me){super(Ce._patchConfig(me)),this.configuration=ee,Ce._allSymbolNavigationCommands.set(me.id,this)}runEditorCommand(ee,me,xe,We){if(!me.hasModel())return Promise.resolve(void 0);let Ve=ee.get(T.lT),Ye=ee.get(o.$),tt=ee.get(de.ek),Qe=ee.get(j),bt=ee.get(ue.p),ht=ee.get(O.TG),xt=me.getModel(),Qt=me.getPosition(),At=ye.is(xe)?xe:new ye(xt,Qt),mi=new v.Dl(me,5),Lt=(0,u.eP)(this._getLocationModel(bt,At.model,At.position,mi.token),mi.token).then(ct=>X(this,void 0,void 0,function*(){var Kt;if(!ct||mi.token.isCancellationRequested)return;let pi;if((0,B.Z9)(ct.ariaMessage),ct.referenceAt(xt.uri,Qt)){let Wi=this._getAlternativeCommand(me);!Ce._activeAlternativeCommands.has(Wi)&&Ce._allSymbolNavigationCommands.has(Wi)&&(pi=Ce._allSymbolNavigationCommands.get(Wi))}let li=ct.references.length;if(li===0){if(!this.configuration.muteMessage){let Wi=xt.getWordAtPosition(Qt);(Kt=ie.O.get(me))===null||Kt===void 0||Kt.showMessage(this._getNoResultFoundMessage(Wi),Qt)}}else{if(li!==1||!pi)return this._onResult(Ye,Qe,me,ct,We);Ce._activeAlternativeCommands.add(this.desc.id),ht.invokeFunction(Wi=>pi.runEditorCommand(Wi,me,xe,We).finally(()=>{Ce._activeAlternativeCommands.delete(this.desc.id)}))}}),ct=>{Ve.error(ct)}).finally(()=>{mi.dispose()});return tt.showWhile(Lt,250),Lt}_onResult(ee,me,xe,We,Ve){return X(this,void 0,void 0,function*(){let Ye=this._getGoToPreference(xe);if(xe instanceof h.H||!(this.configuration.openInPeek||Ye==="peek"&&We.references.length>1)){let tt=We.firstReference(),Qe=We.references.length>1&&Ye==="gotoAndPeek",bt=yield this._openReference(xe,ee,tt,this.configuration.openToSide,!Qe);Qe&&bt?this._openInPeek(bt,We,Ve):We.dispose(),Ye==="goto"&&me.put(tt)}else this._openInPeek(xe,We,Ve)})}_openReference(ee,me,xe,We,Ve){return X(this,void 0,void 0,function*(){let Ye;if((0,b.vx)(xe)&&(Ye=xe.targetSelectionRange),Ye||(Ye=xe.range),!Ye)return;let tt=yield me.openCodeEditor({resource:xe.uri,options:{selection:i.e.collapseToStart(Ye),selectionRevealType:3,selectionSource:"code.jump"}},ee,We);if(tt){if(Ve){let Qe=tt.getModel(),bt=tt.createDecorationsCollection([{range:Ye,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{tt.getModel()===Qe&&bt.clear()},350)}return tt}})}_openInPeek(ee,me,xe){let We=l.J.get(ee);We&&ee.hasModel()?We.toggleWidget(xe!=null?xe:ee.getSelection(),(0,u.PG)(Ve=>Promise.resolve(me)),this.configuration.openInPeek):me.dispose()}}Ce._allSymbolNavigationCommands=new Map,Ce._activeAlternativeCommands=new Set;class Ee extends Ce{_getLocationModel(ee,me,xe,We){return X(this,void 0,void 0,function*(){return new a.oQ(yield(0,U.nD)(ee.definitionProvider,me,xe,We),L.NC("def.title","Definitions"))})}_getNoResultFoundMessage(ee){return ee&&ee.word?L.NC("noResultWord","No definition found for '{0}'",ee.word):L.NC("generic.noResults","No definition found")}_getAlternativeCommand(ee){return ee.getOption(56).alternativeDefinitionCommand}_getGoToPreference(ee){return ee.getOption(56).multipleDefinitions}}let Ae=_.$L&&!(0,m.isStandalone)()?2118:70;(0,ce.r1)(((z=class el extends Ee{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:el.id,title:{value:L.NC("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:L.NC({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:k.Ao.and(c.u.hasDefinitionProvider,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:Ae,weight:100},menu:[{id:ce.eH.EditorContext,group:"navigation",order:1.1},{id:ce.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),be.P.registerCommandAlias("editor.action.goToDeclaration",el.id)}}).id="editor.action.revealDefinition",z)),(0,ce.r1)(((J=class tl extends Ee{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:tl.id,title:{value:L.NC("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:k.Ao.and(c.u.hasDefinitionProvider,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:(0,I.gx)(2089,Ae),weight:100}}),be.P.registerCommandAlias("editor.action.openDeclarationToTheSide",tl.id)}}).id="editor.action.revealDefinitionAside",J)),(0,ce.r1)(((oe=class il extends Ee{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:il.id,title:{value:L.NC("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:k.Ao.and(c.u.hasDefinitionProvider,se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:ce.eH.EditorContextPeek,group:"peek",order:2}}),be.P.registerCommandAlias("editor.action.previewDeclaration",il.id)}}).id="editor.action.peekDefinition",oe));class Fe extends Ce{_getLocationModel(ee,me,xe,We){return X(this,void 0,void 0,function*(){return new a.oQ(yield(0,U.zq)(ee.declarationProvider,me,xe,We),L.NC("decl.title","Declarations"))})}_getNoResultFoundMessage(ee){return ee&&ee.word?L.NC("decl.noResultWord","No declaration found for '{0}'",ee.word):L.NC("decl.generic.noResults","No declaration found")}_getAlternativeCommand(ee){return ee.getOption(56).alternativeDeclarationCommand}_getGoToPreference(ee){return ee.getOption(56).multipleDeclarations}}(0,ce.r1)(((fe=class ql extends Fe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ql.id,title:{value:L.NC("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:L.NC({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:k.Ao.and(c.u.hasDeclarationProvider,c.u.isInWalkThroughSnippet.toNegated()),menu:[{id:ce.eH.EditorContext,group:"navigation",order:1.3},{id:ce.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(ee){return ee&&ee.word?L.NC("decl.noResultWord","No declaration found for '{0}'",ee.word):L.NC("decl.generic.noResults","No declaration found")}}).id="editor.action.revealDeclaration",fe)),(0,ce.r1)(class extends Fe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:L.NC("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:k.Ao.and(c.u.hasDeclarationProvider,se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated()),menu:{id:ce.eH.EditorContextPeek,group:"peek",order:3}})}});class _e extends Ce{_getLocationModel(ee,me,xe,We){return X(this,void 0,void 0,function*(){return new a.oQ(yield(0,U.L3)(ee.typeDefinitionProvider,me,xe,We),L.NC("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(ee){return ee&&ee.word?L.NC("goToTypeDefinition.noResultWord","No type definition found for '{0}'",ee.word):L.NC("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(ee){return ee.getOption(56).alternativeTypeDefinitionCommand}_getGoToPreference(ee){return ee.getOption(56).multipleTypeDefinitions}}(0,ce.r1)(((q=class Gl extends _e{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Gl.ID,title:{value:L.NC("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:L.NC({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:k.Ao.and(c.u.hasTypeDefinitionProvider,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:0,weight:100},menu:[{id:ce.eH.EditorContext,group:"navigation",order:1.4},{id:ce.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}).ID="editor.action.goToTypeDefinition",q)),(0,ce.r1)(((p=class Ql extends _e{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Ql.ID,title:{value:L.NC("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:k.Ao.and(c.u.hasTypeDefinitionProvider,se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated()),menu:{id:ce.eH.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",p));class te extends Ce{_getLocationModel(ee,me,xe,We){return X(this,void 0,void 0,function*(){return new a.oQ(yield(0,U.f4)(ee.implementationProvider,me,xe,We),L.NC("impl.title","Implementations"))})}_getNoResultFoundMessage(ee){return ee&&ee.word?L.NC("goToImplementation.noResultWord","No implementation found for '{0}'",ee.word):L.NC("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(ee){return ee.getOption(56).alternativeImplementationCommand}_getGoToPreference(ee){return ee.getOption(56).multipleImplementations}}(0,ce.r1)(((re=class Zl extends te{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Zl.ID,title:{value:L.NC("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:L.NC({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:k.Ao.and(c.u.hasImplementationProvider,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:2118,weight:100},menu:[{id:ce.eH.EditorContext,group:"navigation",order:1.45},{id:ce.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}).ID="editor.action.goToImplementation",re)),(0,ce.r1)(((ne=class Yl extends te{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Yl.ID,title:{value:L.NC("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:k.Ao.and(c.u.hasImplementationProvider,se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:3142,weight:100},menu:{id:ce.eH.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",ne));class Le extends Ce{_getNoResultFoundMessage(ee){return ee?L.NC("references.no","No references found for '{0}'",ee.word):L.NC("references.noGeneric","No references found")}_getAlternativeCommand(ee){return ee.getOption(56).alternativeReferenceCommand}_getGoToPreference(ee){return ee.getOption(56).multipleReferences}}(0,ce.r1)(class extends Le{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:L.NC("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:L.NC({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:k.Ao.and(c.u.hasReferenceProvider,se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:c.u.editorTextFocus,primary:1094,weight:100},menu:[{id:ce.eH.EditorContext,group:"navigation",order:1.45},{id:ce.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}_getLocationModel(le,ee,me,xe){return X(this,void 0,void 0,function*(){return new a.oQ(yield(0,U.aA)(le.referenceProvider,ee,me,!0,xe),L.NC("ref.title","References"))})}}),(0,ce.r1)(class extends Le{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:L.NC("references.action.label","Peek References"),original:"Peek References"},precondition:k.Ao.and(c.u.hasReferenceProvider,se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated()),menu:{id:ce.eH.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(le,ee,me,xe){return X(this,void 0,void 0,function*(){return new a.oQ(yield(0,U.aA)(le.referenceProvider,ee,me,!1,xe),L.NC("ref.title","References"))})}});class ke extends Ce{constructor(ee,me,xe){super(ee,{id:"editor.action.goToLocation",title:{value:L.NC("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:k.Ao.and(se.Jy.notInPeekEditor,c.u.isInWalkThroughSnippet.toNegated())}),this._references=me,this._gotoMultipleBehaviour=xe}_getLocationModel(ee,me,xe,We){return X(this,void 0,void 0,function*(){return new a.oQ(this._references,L.NC("generic.title","Locations"))})}_getNoResultFoundMessage(ee){return ee&&L.NC("generic.noResult","No results for '{0}'",ee.word)||""}_getGoToPreference(ee){var me;return(me=this._gotoMultipleBehaviour)!==null&&me!==void 0?me:ee.getOption(56).multipleReferences}_getAlternativeCommand(){return""}}be.P.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:x.o},{name:"position",description:"The position at which to start",constraint:r.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(le,ee,me,xe,We,Ve,Ye)=>X(void 0,void 0,void 0,function*(){(0,A.p_)(x.o.isUri(ee)),(0,A.p_)(r.L.isIPosition(me)),(0,A.p_)(Array.isArray(xe)),(0,A.p_)(We===void 0||typeof We=="string"),(0,A.p_)(Ye===void 0||typeof Ye=="boolean");let tt=le.get(o.$),Qe=yield tt.openCodeEditor({resource:ee},tt.getFocusedCodeEditor());if((0,f.CL)(Qe))return Qe.setPosition(me),Qe.revealPositionInCenterIfOutsideViewport(me,0),Qe.invokeWithinContext(bt=>{let ht=new class extends ke{_getNoResultFoundMessage(xt){return Ve||super._getNoResultFoundMessage(xt)}}({muteMessage:!Ve,openInPeek:!!Ye,openToSide:!1},xe,We);bt.get(O.TG).invokeFunction(ht.run.bind(ht),Qe)})})}),be.P.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:x.o},{name:"position",description:"The position at which to start",constraint:r.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(le,ee,me,xe,We)=>X(void 0,void 0,void 0,function*(){le.get(be.H).executeCommand("editor.action.goToLocations",ee,me,xe,We,void 0,!0)})}),be.P.registerCommand({id:"editor.action.findReferences",handler:(le,ee,me)=>{(0,A.p_)(x.o.isUri(ee)),(0,A.p_)(r.L.isIPosition(me));let xe=le.get(ue.p),We=le.get(o.$);return We.openCodeEditor({resource:ee},We.getFocusedCodeEditor()).then(Ve=>{if(!(0,f.CL)(Ve)||!Ve.hasModel())return;let Ye=l.J.get(Ve);if(!Ye)return;let tt=(0,u.PG)(bt=>(0,U.aA)(xe.referenceProvider,Ve.getModel(),r.L.lift(me),!1,bt).then(ht=>new a.oQ(ht,L.NC("ref.title","References")))),Qe=new i.e(me.lineNumber,me.column,me.lineNumber,me.column);return Promise.resolve(Ye.toggleWidget(Qe,tt,!1))})}}),be.P.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")},184:(ut,Ie,t)=>{"use strict";t.d(Ie,{L3:()=>h,aA:()=>r,f4:()=>o,nD:()=>f,zq:()=>d});var m=t(9488),B=t(1050),u=t(7301),I=t(6830),_=t(1922),A=t(1293),x=function(c,b,l,a){return new(l||(l=Promise))(function(w,E){function D(R){try{k(a.next(R))}catch(O){E(O)}}function L(R){try{k(a.throw(R))}catch(O){E(O)}}function k(R){var O;R.done?w(R.value):(O=R.value,O instanceof l?O:new l(function($){$(O)})).then(D,L)}k((a=a.apply(c,b||[])).next())})};function v(c,b,l,a){return x(this,void 0,void 0,function*(){let w=l.ordered(c).map(D=>Promise.resolve(a(D,c,b)).then(void 0,L=>{(0,u.Cp)(L)})),E=yield Promise.all(w);return(0,m.kX)(E.flat())})}function f(c,b,l,a){return v(b,l,c,(w,E,D)=>w.provideDefinition(E,D,a))}function d(c,b,l,a){return v(b,l,c,(w,E,D)=>w.provideDeclaration(E,D,a))}function o(c,b,l,a){return v(b,l,c,(w,E,D)=>w.provideImplementation(E,D,a))}function h(c,b,l,a){return v(b,l,c,(w,E,D)=>w.provideTypeDefinition(E,D,a))}function r(c,b,l,a,w){return v(b,l,c,(E,D,L)=>x(this,void 0,void 0,function*(){let k=yield E.provideReferences(D,L,{includeDeclaration:!0},w);if(!a||!k||k.length!==2)return k;let R=yield E.provideReferences(D,L,{includeDeclaration:!1},w);return R&&R.length===1?R:k}))}function i(c){return x(this,void 0,void 0,function*(){let b=yield c(),l=new A.oQ(b,""),a=l.references.map(w=>w.link);return l.dispose(),a})}(0,I.sb)("_executeDefinitionProvider",(c,b,l)=>{let a=f(c.get(_.p).definitionProvider,b,l,B.T.None);return i(()=>a)}),(0,I.sb)("_executeTypeDefinitionProvider",(c,b,l)=>{let a=h(c.get(_.p).typeDefinitionProvider,b,l,B.T.None);return i(()=>a)}),(0,I.sb)("_executeDeclarationProvider",(c,b,l)=>{let a=d(c.get(_.p).declarationProvider,b,l,B.T.None);return i(()=>a)}),(0,I.sb)("_executeReferenceProvider",(c,b,l)=>{let a=r(c.get(_.p).referenceProvider,b,l,!1,B.T.None);return i(()=>a)}),(0,I.sb)("_executeImplementationProvider",(c,b,l)=>{let a=o(c.get(_.p).implementationProvider,b,l,B.T.None);return i(()=>a)})},2005:(ut,Ie,t)=>{"use strict";t.d(Ie,{yN:()=>f});var m=t(4669),B=t(5976),u=t(1432);function I(d,o){return!!d[o]}class _{constructor(o,h){this.target=o.target,this.isLeftClick=o.event.leftButton,this.isMiddleClick=o.event.middleButton,this.isRightClick=o.event.rightButton,this.hasTriggerModifier=I(o.event,h.triggerModifier),this.hasSideBySideModifier=I(o.event,h.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=o.event.detail<=1}}class A{constructor(o,h){this.keyCodeIsTriggerKey=o.keyCode===h.triggerKey,this.keyCodeIsSideBySideKey=o.keyCode===h.triggerSideBySideKey,this.hasTriggerModifier=I(o,h.triggerModifier)}}class x{constructor(o,h,r,i){this.triggerKey=o,this.triggerModifier=h,this.triggerSideBySideKey=r,this.triggerSideBySideModifier=i}equals(o){return this.triggerKey===o.triggerKey&&this.triggerModifier===o.triggerModifier&&this.triggerSideBySideKey===o.triggerSideBySideKey&&this.triggerSideBySideModifier===o.triggerSideBySideModifier}}function v(d){return d==="altKey"?u.dz?new x(57,"metaKey",6,"altKey"):new x(5,"ctrlKey",6,"altKey"):u.dz?new x(6,"altKey",57,"metaKey"):new x(6,"altKey",5,"ctrlKey")}class f extends B.JT{constructor(o,h){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new m.Q5),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new m.Q5),this.onExecute=this._onExecute.event,this._onCancel=this._register(new m.Q5),this.onCancel=this._onCancel.event,this._editor=o,this._alwaysFireExecuteOnMouseUp=h,this._opts=v(this._editor.getOption(75)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(r=>{if(r.hasChanged(75)){let i=v(this._editor.getOption(75));if(this._opts.equals(i))return;this._opts=i,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(r=>this._onEditorMouseMove(new _(r,this._opts)))),this._register(this._editor.onMouseDown(r=>this._onEditorMouseDown(new _(r,this._opts)))),this._register(this._editor.onMouseUp(r=>this._onEditorMouseUp(new _(r,this._opts)))),this._register(this._editor.onKeyDown(r=>this._onEditorKeyDown(new A(r,this._opts)))),this._register(this._editor.onKeyUp(r=>this._onEditorKeyUp(new A(r,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(r=>this._onDidChangeCursorSelection(r))),this._register(this._editor.onDidChangeModel(r=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(r=>{(r.scrollTopChanged||r.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(o){o.selection&&o.selection.startColumn!==o.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(o){this._lastMouseMoveEvent=o,this._onMouseMoveOrRelevantKeyDown.fire([o,null])}_onEditorMouseDown(o){this._hasTriggerKeyOnMouseDown=o.hasTriggerModifier,this._lineNumberOnMouseDown=o.target.position?o.target.position.lineNumber:0}_onEditorMouseUp(o){let h=o.target.position?o.target.position.lineNumber:0;(this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===h||this._alwaysFireExecuteOnMouseUp)&&this._onExecute.fire(o)}_onEditorKeyDown(o){this._lastMouseMoveEvent&&(o.keyCodeIsTriggerKey||o.keyCodeIsSideBySideKey&&o.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,o]):o.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(o){o.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},2470:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{GotoDefinitionAtPositionEditorContribution:()=>D});var m=t(5393),B=t(7301),u=t(9365),I=t(5976),_=t(8401),A=t(6467),x=t(6830),v=t(4314),f=t(2042),d=t(8216),o=t(2005),h=t(2049),r=t(3580),i=t(3983),c=t(628),b=t(184),l=t(1922),a=t(3654),w=function(L,k){return function(R,O){k(R,O,L)}},E=function(L,k,R,O){return new(R||(R=Promise))(function($,N){function T(K){try{W(O.next(K))}catch(j){N(j)}}function C(K){try{W(O.throw(K))}catch(j){N(j)}}function W(K){var j;K.done?$(K.value):(j=K.value,j instanceof R?j:new R(function(F){F(j)})).then(T,C)}W((O=O.apply(L,k||[])).next())})};let D=class ga{constructor(k,R,O,$){this.textModelResolverService=R,this.languageService=O,this.languageFeaturesService=$,this.toUnhook=new I.SL,this.toUnhookForKeyboard=new I.SL,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=k,this.linkDecorations=this.editor.createDecorationsCollection();let N=new o.yN(k);this.toUnhook.add(N),this.toUnhook.add(N.onMouseMoveOrRelevantKeyDown(([T,C])=>{this.startFindDefinitionFromMouse(T,(0,_.f6)(C))})),this.toUnhook.add(N.onExecute(T=>{this.isEnabled(T)&&this.gotoDefinition(T.target.position,T.hasSideBySideModifier).catch(C=>{(0,B.dL)(C)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(N.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(k){return k.getContribution(ga.ID)}startFindDefinitionFromCursor(k){return E(this,void 0,void 0,function*(){yield this.startFindDefinition(k),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(R=>{R&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(k,R){if(k.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(k,R))return this.currentWordAtPosition=null,void this.removeLinkDecorations();let O=k.target.position;this.startFindDefinition(O)}startFindDefinition(k){var R;return E(this,void 0,void 0,function*(){this.toUnhookForKeyboard.clear();let O=k?(R=this.editor.getModel())===null||R===void 0?void 0:R.getWordAtPosition(k):null;if(!O)return this.currentWordAtPosition=null,void this.removeLinkDecorations();if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===O.startColumn&&this.currentWordAtPosition.endColumn===O.endColumn&&this.currentWordAtPosition.word===O.word)return;this.currentWordAtPosition=O;let $=new A.yy(this.editor,15),N;this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,m.PG)(C=>this.findDefinition(k,C));try{N=yield this.previousPromise}catch(C){return void(0,B.dL)(C)}if(!N||!N.length||!$.validate(this.editor))return void this.removeLinkDecorations();let T=N[0].originSelectionRange?v.e.lift(N[0].originSelectionRange):new v.e(k.lineNumber,O.startColumn,k.lineNumber,O.endColumn);if(N.length>1){let C=T;for(let{originSelectionRange:W}of N)W&&(C=v.e.plusRange(C,W));this.addDecoration(C,new u.W5().appendText(r.NC("multipleResults","Click to show {0} definitions.",N.length)))}else{let C=N[0];if(!C.uri)return;this.textModelResolverService.createModelReference(C.uri).then(W=>{if(!W.object||!W.object.textEditorModel)return void W.dispose();let{object:{textEditorModel:K}}=W,{startLineNumber:j}=C.range;if(j<1||j>K.getLineCount())return void W.dispose();let F=this.getPreviewValue(K,j,C),H=this.languageService.guessLanguageIdByFilepathOrFirstLine(K.uri);this.addDecoration(T,F?new u.W5().appendCodeblock(H||"",F):void 0),W.dispose()})}})}getPreviewValue(k,R,O){let $=O.range;return $.endLineNumber-$.startLineNumber>=ga.MAX_SOURCE_PREVIEW_LINES&&($=this.getPreviewRangeBasedOnIndentation(k,R)),this.stripIndentationFromPreviewRange(k,R,$)}stripIndentationFromPreviewRange(k,R,O){let $=k.getLineFirstNonWhitespaceColumn(R);for(let N=R+1;N<O.endLineNumber;N++){let T=k.getLineFirstNonWhitespaceColumn(N);$=Math.min($,T)}return k.getValueInRange(O).replace(new RegExp(`^\\s{${$-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(k,R){let O=k.getLineFirstNonWhitespaceColumn(R),$=Math.min(k.getLineCount(),R+ga.MAX_SOURCE_PREVIEW_LINES),N=R+1;for(;N<$&&O!==k.getLineFirstNonWhitespaceColumn(N);N++);return new v.e(R,1,N+1,1)}addDecoration(k,R){let O={range:k,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:R}};this.linkDecorations.set([O])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(k,R){var O;return this.editor.hasModel()&&k.isLeftClick&&k.isNoneOrSingleMouseDown&&k.target.type===6&&!(((O=k.target.detail.injectedText)===null||O===void 0?void 0:O.options)instanceof a.HS)&&(k.hasTriggerModifier||!!R&&R.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(k,R){let O=this.editor.getModel();return O?(0,b.nD)(this.languageFeaturesService.definitionProvider,O,k,R):Promise.resolve(null)}gotoDefinition(k,R){return this.editor.setPosition(k),this.editor.invokeWithinContext(O=>{let $=!R&&this.editor.getOption(84)&&!this.isInPeekEditor(O);return new c.DefinitionAction({openToSide:R,openInPeek:$,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(O)})}isInPeekEditor(k){let R=k.get(i.i6);return h.Jy.inPeekEditor.getValue(R)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};D.ID="editor.contrib.gotodefinitionatposition",D.MAX_SOURCE_PREVIEW_LINES=8,D=function(L,k,R,O){var $,N=arguments.length,T=N<3?k:O===null?O=Object.getOwnPropertyDescriptor(k,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(L,k,R,O);else for(var C=L.length-1;C>=0;C--)($=L[C])&&(T=(N<3?$(T):N>3?$(k,R,T):$(k,R))||T);return N>3&&T&&Object.defineProperty(k,R,T),T}([w(1,d.S),w(2,f.O),w(3,l.p)],D),(0,x._K)(D.ID,D,2)},7376:(ut,Ie,t)=>{"use strict";t.d(Ie,{J:()=>ke});var m=t(5393),B=t(7301),u=t(2258),I=t(5976),_=t(1640),A=t(187),x=t(4314),v=t(2049),f=t(3580),d=t(4565),o=t(3108),h=t(3983),r=t(2065),i=t(9989),c=t(6763),b=t(9422),l=t(6904),a=t(1293),w=t(5321),E=t(3937),D=t(1264),L=t(4669),k=t(6663),R=t(5935),O=t(4527),$=t(3654),N=t(1381),T=t(8801),C=t(2042),W=t(8216),K=t(7488),j=t(4650),F=t(9834),H=t(5392),z=t(1847),J=t(4349),oe=t(6253),fe=function(ee,me,xe,We){var Ve,Ye=arguments.length,tt=Ye<3?me:We===null?We=Object.getOwnPropertyDescriptor(me,xe):We;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(ee,me,xe,We);else for(var Qe=ee.length-1;Qe>=0;Qe--)(Ve=ee[Qe])&&(tt=(Ye<3?Ve(tt):Ye>3?Ve(me,xe,tt):Ve(me,xe))||tt);return Ye>3&&tt&&Object.defineProperty(me,xe,tt),tt},q=function(ee,me){return function(xe,We){me(xe,We,ee)}};let p=class{constructor(ee){this._resolverService=ee}hasChildren(ee){return ee instanceof a.oQ||ee instanceof a.F2}getChildren(ee){if(ee instanceof a.oQ)return ee.groups;if(ee instanceof a.F2)return ee.resolve(this._resolverService).then(me=>me.children);throw new Error("bad tree")}};p=fe([q(0,W.S)],p);class re{getHeight(){return 23}getTemplateId(me){return me instanceof a.F2?ce.id:de.id}}let ne=class{constructor(ee){this._keybindingService=ee}getKeyboardNavigationLabel(ee){var me;if(ee instanceof a.WX){let xe=(me=ee.parent.getPreview(ee))===null||me===void 0?void 0:me.preview(ee.range);if(xe)return xe.value}return(0,R.EZ)(ee.uri)}};ne=fe([q(0,z.d)],ne);class ie{getId(me){return me instanceof a.WX?me.id:me.uri}}let se=class extends I.JT{constructor(ee,me){super(),this._labelService=me;let xe=document.createElement("div");xe.classList.add("reference-file"),this.file=this._register(new F.g(xe,{supportHighlights:!0})),this.badge=new K.Z(w.R3(xe,w.$(".count")),{},oe.ku),ee.appendChild(xe)}set(ee,me){let xe=(0,R.XX)(ee.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(ee.uri),this._labelService.getUriLabel(xe,{relative:!0}),{title:this._labelService.getUriLabel(ee.uri),matches:me});let We=ee.children.length;this.badge.setCount(We),We>1?this.badge.setTitleFormat((0,f.NC)("referencesCount","{0} references",We)):this.badge.setTitleFormat((0,f.NC)("referenceCount","{0} reference",We))}};se=fe([q(1,J.e)],se);let ce=class Jl{constructor(me){this._instantiationService=me,this.templateId=Jl.id}renderTemplate(me){return this._instantiationService.createInstance(se,me)}renderElement(me,xe,We){We.set(me.element,(0,H.mB)(me.filterData))}disposeTemplate(me){me.dispose()}};ce.id="FileReferencesRenderer",ce=fe([q(0,r.TG)],ce);class be{constructor(me){this.label=new j.q(me)}set(me,xe){var We;let Ve=(We=me.parent.getPreview(me))===null||We===void 0?void 0:We.preview(me.range);if(Ve&&Ve.value){let{value:Ye,highlight:tt}=Ve;xe&&!H.CL.isDefault(xe)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(Ye,(0,H.mB)(xe))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(Ye,[tt]))}else this.label.set(`${(0,R.EZ)(me.uri)}:${me.range.startLineNumber+1}:${me.range.startColumn+1}`)}}class de{constructor(){this.templateId=de.id}renderTemplate(me){return new be(me)}renderElement(me,xe,We){We.set(me.element,me.filterData)}disposeTemplate(){}}de.id="OneReferenceRenderer";class U{getWidgetAriaLabel(){return(0,f.NC)("treeAriaLabel","References")}getAriaLabel(me){return me.ariaMessage}}var ue=t(7781),ve=t(4862),X=function(ee,me){return function(xe,We){me(xe,We,ee)}},ye=function(ee,me,xe,We){return new(xe||(xe=Promise))(function(Ve,Ye){function tt(ht){try{bt(We.next(ht))}catch(xt){Ye(xt)}}function Qe(ht){try{bt(We.throw(ht))}catch(xt){Ye(xt)}}function bt(ht){var xt;ht.done?Ve(ht.value):(xt=ht.value,xt instanceof xe?xt:new xe(function(Qt){Qt(xt)})).then(tt,Qe)}bt((We=We.apply(ee,me||[])).next())})};class Ce{constructor(me,xe){this._editor=me,this._model=xe,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new I.SL,this._callOnModelChange=new I.SL,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();let me=this._editor.getModel();if(me){for(let xe of this._model.references)if(xe.uri.toString()===me.uri.toString())return void this._addDecorations(xe.parent)}}_addDecorations(me){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));let xe=[],We=[];for(let Ve=0,Ye=me.children.length;Ve<Ye;Ve++){let tt=me.children[Ve];this._decorationIgnoreSet.has(tt.id)||tt.uri.toString()===this._editor.getModel().uri.toString()&&(xe.push({range:tt.range,options:Ce.DecorationOptions}),We.push(Ve))}this._editor.changeDecorations(Ve=>{let Ye=Ve.deltaDecorations([],xe);for(let tt=0;tt<Ye.length;tt++)this._decorations.set(Ye[tt],me.children[We[tt]])})}_onDecorationChanged(){let me=[],xe=this._editor.getModel();if(xe){for(let[We,Ve]of this._decorations){let Ye=xe.getDecorationRange(We);if(!Ye)continue;let tt=!1;x.e.equalsRange(Ye,Ve.range)||((x.e.spansMultipleLines(Ye)||Ve.range.endColumn-Ve.range.startColumn!=Ye.endColumn-Ye.startColumn)&&(tt=!0),tt?(this._decorationIgnoreSet.add(Ve.id),me.push(We)):Ve.range=Ye)}for(let We=0,Ve=me.length;We<Ve;We++)this._decorations.delete(me[We]);this._editor.removeDecorations(me)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}Ce.DecorationOptions=$.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class Ee{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(me){let xe,We;try{let Ve=JSON.parse(me);xe=Ve.ratio,We=Ve.heightInLines}catch(Ve){}return{ratio:xe||.7,heightInLines:We||18}}}class Ae extends c.ls{}let Fe=class extends v.vk{constructor(ee,me,xe,We,Ve,Ye,tt,Qe,bt,ht,xt,Qt){super(ee,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},Ye),this._defaultTreeKeyboardSupport=me,this.layoutData=xe,this._textModelResolverService=Ve,this._instantiationService=Ye,this._peekViewService=tt,this._uriLabel=Qe,this._undoRedoService=bt,this._keybindingService=ht,this._languageService=xt,this._languageConfigurationService=Qt,this._disposeOnNewModel=new I.SL,this._callOnDispose=new I.SL,this._onDidSelectReference=new L.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new w.Ro(0,0),this._applyTheme(We.getColorTheme()),this._callOnDispose.add(We.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(ee,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,I.B9)(this._preview),(0,I.B9)(this._previewNotAvailableMessage),(0,I.B9)(this._tree),(0,I.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(ee){let me=ee.getColor(v.SC)||D.Il.transparent;this.style({arrowColor:me,frameColor:me,headerBackgroundColor:ee.getColor(v.KY)||D.Il.transparent,primaryHeadingColor:ee.getColor(v.IH),secondaryHeadingColor:ee.getColor(v.R7)})}show(ee){super.show(ee,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(ee){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:ee.ctrlKey||ee.metaKey||ee.altKey?"side":"open",source:"title"})}_fillBody(ee){this.setCssClass("reference-zone-widget"),this._messageContainer=w.R3(ee,w.$("div.messages")),w.Cp(this._messageContainer),this._splitView=new E.z(ee,{orientation:1}),this._previewContainer=w.R3(ee,w.$("div.preview.inline")),this._preview=this._instantiationService.createInstance(O.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),w.Cp(this._previewContainer),this._previewNotAvailableMessage=new $.yO(f.NC("missingPreviewMessage","no preview available"),T.bd,$.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=w.R3(ee,w.$("div.ref-tree.inline"));let me={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new U,keyboardNavigationLabelProvider:this._instantiationService.createInstance(ne),identityProvider:new ie,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:v.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(w.mu(this._treeContainer,"keydown",We=>{We.equals(9)&&(this._keybindingService.dispatchEvent(We,We.target),We.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Ae,"ReferencesWidget",this._treeContainer,new re,[this._instantiationService.createInstance(ce),this._instantiationService.createInstance(de)],this._instantiationService.createInstance(p),me),this._splitView.addView({onDidChange:L.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:We=>{this._preview.layout({height:this._dim.height,width:We})}},E.M.Distribute),this._splitView.addView({onDidChange:L.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:We=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${We}px`,this._tree.layout(this._dim.height,We)}},E.M.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let xe=(We,Ve)=>{We instanceof a.WX&&(Ve==="show"&&this._revealReference(We,!1),this._onDidSelectReference.fire({element:We,kind:Ve,source:"tree"}))};this._tree.onDidOpen(We=>{We.sideBySide?xe(We.element,"side"):We.editorOptions.pinned?xe(We.element,"goto"):xe(We.element,"show")}),w.Cp(this._treeContainer)}_onWidth(ee){this._dim&&this._doLayoutBody(this._dim.height,ee)}_doLayoutBody(ee,me){super._doLayoutBody(ee,me),this._dim=new w.Ro(me,ee),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(me),this._splitView.resizeView(0,me*this.layoutData.ratio)}setSelection(ee){return this._revealReference(ee,!0).then(()=>{this._model&&(this._tree.setSelection([ee]),this._tree.setFocus([ee]))})}setModel(ee){return this._disposeOnNewModel.clear(),this._model=ee,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=f.NC("noResults","No results"),w.$Z(this._messageContainer),Promise.resolve(void 0)):(w.Cp(this._messageContainer),this._decorationsManager=new Ce(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(ee=>this._tree.rerender(ee))),this._disposeOnNewModel.add(this._preview.onMouseDown(ee=>{let{event:me,target:xe}=ee;if(me.detail!==2)return;let We=this._getFocusedReference();We&&this._onDidSelectReference.fire({element:{uri:We.uri,range:xe.range},kind:me.ctrlKey||me.metaKey||me.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),w.$Z(this._treeContainer),w.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){let[ee]=this._tree.getFocus();return ee instanceof a.WX?ee:ee instanceof a.F2&&ee.children.length>0?ee.children[0]:void 0}revealReference(ee){return ye(this,void 0,void 0,function*(){yield this._revealReference(ee,!1),this._onDidSelectReference.fire({element:ee,kind:"goto",source:"tree"})})}_revealReference(ee,me){return ye(this,void 0,void 0,function*(){if(this._revealedReference===ee)return;this._revealedReference=ee,ee.uri.scheme!==k.lg.inMemory?this.setTitle((0,R.Hx)(ee.uri),this._uriLabel.getUriLabel((0,R.XX)(ee.uri))):this.setTitle(f.NC("peekView.alternateTitle","References"));let xe=this._textModelResolverService.createModelReference(ee.uri);this._tree.getInput()===ee.parent||(me&&this._tree.reveal(ee.parent),yield this._tree.expand(ee.parent)),this._tree.reveal(ee);let We=yield xe;if(!this._model)return void We.dispose();(0,I.B9)(this._previewModelReference);let Ve=We.object;if(Ve){let Ye=this._preview.getModel()===Ve.textEditorModel?0:1,tt=x.e.lift(ee.range).collapseToStart();this._previewModelReference=We,this._preview.setModel(Ve.textEditorModel),this._preview.setSelection(tt),this._preview.revealRangeInCenter(tt,Ye)}else this._preview.setModel(this._previewNotAvailableMessage),We.dispose()})}};Fe=function(ee,me,xe,We){var Ve,Ye=arguments.length,tt=Ye<3?me:We===null?We=Object.getOwnPropertyDescriptor(me,xe):We;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(ee,me,xe,We);else for(var Qe=ee.length-1;Qe>=0;Qe--)(Ve=ee[Qe])&&(tt=(Ye<3?Ve(tt):Ye>3?Ve(me,xe,tt):Ve(me,xe))||tt);return Ye>3&&tt&&Object.defineProperty(me,xe,tt),tt}([X(3,ue.XE),X(4,W.S),X(5,r.TG),X(6,v.Fw),X(7,J.e),X(8,ve.tJ),X(9,z.d),X(10,C.O),X(11,N.c_)],Fe);var _e=function(ee,me){return function(xe,We){me(xe,We,ee)}},te=function(ee,me,xe,We){return new(xe||(xe=Promise))(function(Ve,Ye){function tt(ht){try{bt(We.next(ht))}catch(xt){Ye(xt)}}function Qe(ht){try{bt(We.throw(ht))}catch(xt){Ye(xt)}}function bt(ht){var xt;ht.done?Ve(ht.value):(xt=ht.value,xt instanceof xe?xt:new xe(function(Qt){Qt(xt)})).then(tt,Qe)}bt((We=We.apply(ee,me||[])).next())})};let Le=new h.uy("referenceSearchVisible",!1,f.NC("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),ke=class nl{static get(me){return me.getContribution(nl.ID)}constructor(me,xe,We,Ve,Ye,tt,Qe,bt){this._defaultTreeKeyboardSupport=me,this._editor=xe,this._editorService=Ve,this._notificationService=Ye,this._instantiationService=tt,this._storageService=Qe,this._configurationService=bt,this._disposables=new I.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Le.bindTo(We)}dispose(){var me,xe;this._referenceSearchVisible.reset(),this._disposables.dispose(),(me=this._widget)===null||me===void 0||me.dispose(),(xe=this._model)===null||xe===void 0||xe.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(me,xe,We){let Ve;if(this._widget&&(Ve=this._widget.position),this.closeWidget(),Ve&&me.containsPosition(Ve))return;this._peekMode=We,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));let Ye="peekViewLayout",tt=Ee.fromJSON(this._storageService.get(Ye,0,"{}"));this._widget=this._instantiationService.createInstance(Fe,this._editor,this._defaultTreeKeyboardSupport,tt),this._widget.setTitle(f.NC("labelLoading","Loading...")),this._widget.show(me),this._disposables.add(this._widget.onDidClose(()=>{xe.cancel(),this._widget&&(this._storageService.store(Ye,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(bt=>{let{element:ht,kind:xt}=bt;if(ht)switch(xt){case"open":bt.source==="editor"&&this._configurationService.getValue("editor.stablePeek")||this.openReference(ht,!1,!1);break;case"side":this.openReference(ht,!0,!1);break;case"goto":We?this._gotoReference(ht,!0):this.openReference(ht,!1,!0)}}));let Qe=++this._requestIdPool;xe.then(bt=>{var ht;if(Qe===this._requestIdPool&&this._widget)return(ht=this._model)===null||ht===void 0||ht.dispose(),this._model=bt,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(f.NC("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let xt=this._editor.getModel().uri,Qt=new A.L(me.startLineNumber,me.startColumn),At=this._model.nearestReference(xt,Qt);if(At)return this._widget.setSelection(At).then(()=>{this._widget&&this._editor.getOption(83)==="editor"&&this._widget.focusOnPreviewEditor()})}});bt.dispose()},bt=>{this._notificationService.error(bt)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(me){return te(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;let xe=this._widget.position;if(!xe)return;let We=this._model.nearestReference(this._editor.getModel().uri,xe);if(!We)return;let Ve=this._model.nextOrPreviousReference(We,me),Ye=this._editor.hasTextFocus(),tt=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(Ve),yield this._gotoReference(Ve,!1),Ye?this._editor.focus():this._widget&&tt&&this._widget.focusOnPreviewEditor()})}revealReference(me){return te(this,void 0,void 0,function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(me))})}closeWidget(me=!0){var xe,We;(xe=this._widget)===null||xe===void 0||xe.dispose(),(We=this._model)===null||We===void 0||We.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,me&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(me,xe){var We;(We=this._widget)===null||We===void 0||We.hide(),this._ignoreModelChangeEvent=!0;let Ve=x.e.lift(me.range).collapseToStart();return this._editorService.openCodeEditor({resource:me.uri,options:{selection:Ve,selectionSource:"code.jump",pinned:xe}},this._editor).then(Ye=>{var tt;if(this._ignoreModelChangeEvent=!1,Ye&&this._widget)if(this._editor===Ye)this._widget.show(Ve),this._widget.focusOnReferenceTree();else{let Qe=nl.get(Ye),bt=this._model.clone();this.closeWidget(),Ye.focus(),Qe==null||Qe.toggleWidget(Ve,(0,m.PG)(ht=>Promise.resolve(bt)),(tt=this._peekMode)!==null&&tt!==void 0&&tt)}else this.closeWidget()},Ye=>{this._ignoreModelChangeEvent=!1,(0,B.dL)(Ye)})}openReference(me,xe,We){xe||this.closeWidget();let{uri:Ve,range:Ye}=me;this._editorService.openCodeEditor({resource:Ve,options:{selection:Ye,selectionSource:"code.jump",pinned:We}},this._editor,xe)}};function le(ee,me){let xe=(0,v.rc)(ee);if(!xe)return;let We=ke.get(xe);We&&me(We)}ke.ID="editor.contrib.referencesController",ke=function(ee,me,xe,We){var Ve,Ye=arguments.length,tt=Ye<3?me:We===null?We=Object.getOwnPropertyDescriptor(me,xe):We;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(ee,me,xe,We);else for(var Qe=ee.length-1;Qe>=0;Qe--)(Ve=ee[Qe])&&(tt=(Ye<3?Ve(tt):Ye>3?Ve(me,xe,tt):Ve(me,xe))||tt);return Ye>3&&tt&&Object.defineProperty(me,xe,tt),tt}([_e(2,h.i6),_e(3,_.$),_e(4,b.lT),_e(5,r.TG),_e(6,l.Uy),_e(7,o.Ui)],ke),i.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,u.gx)(2089,60),when:h.Ao.or(Le,v.Jy.inPeekEditor),handler(ee){le(ee,me=>{me.changeFocusBetweenPreviewAndReferences()})}}),i.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:h.Ao.or(Le,v.Jy.inPeekEditor),handler(ee){le(ee,me=>{me.goToNextOrPreviousReference(!0)})}}),i.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:h.Ao.or(Le,v.Jy.inPeekEditor),handler(ee){le(ee,me=>{me.goToNextOrPreviousReference(!1)})}}),d.P.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),d.P.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),d.P.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),d.P.registerCommand("closeReferenceSearch",ee=>le(ee,me=>me.closeWidget())),i.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:h.Ao.and(v.Jy.inPeekEditor,h.Ao.not("config.editor.stablePeek"))}),i.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:h.Ao.and(Le,h.Ao.not("config.editor.stablePeek"))}),i.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:h.Ao.and(Le,c.CQ,c.PS.negate(),c.uJ.negate()),handler(ee){var me;let xe=(me=ee.get(c.Lw).lastFocusedList)===null||me===void 0?void 0:me.getFocus();Array.isArray(xe)&&xe[0]instanceof a.WX&&le(ee,We=>We.revealReference(xe[0]))}}),i.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:h.Ao.and(Le,c.CQ,c.PS.negate(),c.uJ.negate()),handler(ee){var me;let xe=(me=ee.get(c.Lw).lastFocusedList)===null||me===void 0?void 0:me.getFocus();Array.isArray(xe)&&xe[0]instanceof a.WX&&le(ee,We=>We.openReference(xe[0],!0,!0))}}),d.P.registerCommand("openReference",ee=>{var me;let xe=(me=ee.get(c.Lw).lastFocusedList)===null||me===void 0?void 0:me.getFocus();Array.isArray(xe)&&xe[0]instanceof a.WX&&le(ee,We=>We.openReference(xe[0],!1,!0))})},1293:(ut,Ie,t)=>{"use strict";t.d(Ie,{F2:()=>h,WX:()=>d,oQ:()=>r});var m=t(7301),B=t(4669),u=t(4742),I=t(5976),_=t(3702),A=t(5935),x=t(7295),v=t(4314),f=t(3580);class d{constructor(c,b,l,a){this.isProviderFirst=c,this.parent=b,this.link=l,this._rangeCallback=a,this.id=u.a.nextId()}get uri(){return this.link.uri}get range(){var c,b;return(b=(c=this._range)!==null&&c!==void 0?c:this.link.targetSelectionRange)!==null&&b!==void 0?b:this.link.range}set range(c){this._range=c,this._rangeCallback(this)}get ariaMessage(){var c;let b=(c=this.parent.getPreview(this))===null||c===void 0?void 0:c.preview(this.range);return b?(0,f.NC)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,A.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,b.value):(0,f.NC)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,A.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class o{constructor(c){this._modelReference=c}dispose(){this._modelReference.dispose()}preview(c,b=8){let l=this._modelReference.object.textEditorModel;if(!l)return;let{startLineNumber:a,startColumn:w,endLineNumber:E,endColumn:D}=c,L=l.getWordUntilPosition({lineNumber:a,column:w-b}),k=new v.e(a,L.startColumn,a,w),R=new v.e(E,D,E,1073741824),O=l.getValueInRange(k).replace(/^\s+/,""),$=l.getValueInRange(c);return{value:O+$+l.getValueInRange(R).replace(/\s+$/,""),highlight:{start:O.length,end:O.length+$.length}}}}class h{constructor(c,b){this.parent=c,this.uri=b,this.children=[],this._previews=new _.Y9}dispose(){(0,I.B9)(this._previews.values()),this._previews.clear()}getPreview(c){return this._previews.get(c.uri)}get ariaMessage(){let c=this.children.length;return c===1?(0,f.NC)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,A.EZ)(this.uri),this.uri.fsPath):(0,f.NC)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",c,(0,A.EZ)(this.uri),this.uri.fsPath)}resolve(c){return b=this,l=void 0,w=function*(){if(this._previews.size!==0)return this;for(let E of this.children)if(!this._previews.has(E.uri))try{let D=yield c.createModelReference(E.uri);this._previews.set(E.uri,new o(D))}catch(D){(0,m.dL)(D)}return this},new((a=void 0)||(a=Promise))(function(E,D){function L(O){try{R(w.next(O))}catch($){D($)}}function k(O){try{R(w.throw(O))}catch($){D($)}}function R(O){var $;O.done?E(O.value):($=O.value,$ instanceof a?$:new a(function(N){N($)})).then(L,k)}R((w=w.apply(b,l||[])).next())});var b,l,a,w}}class r{constructor(c,b){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new B.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=c,this._title=b;let[l]=c,a;c.sort(r._compareReferences);for(let w of c)if(a&&A.SF.isEqual(a.uri,w.uri,!0)||(a=new h(this,w.uri),this.groups.push(a)),a.children.length===0||r._compareReferences(w,a.children[a.children.length-1])!==0){let E=new d(l===w,a,w,D=>this._onDidChangeReferenceRange.fire(D));this.references.push(E),a.children.push(E)}}dispose(){(0,I.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new r(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?(0,f.NC)("aria.result.0","No results found"):this.references.length===1?(0,f.NC)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?(0,f.NC)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,f.NC)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(c,b){let{parent:l}=c,a=l.children.indexOf(c),w=l.children.length,E=l.parent.groups.length;return E===1||b&&a+1<w||!b&&a>0?(a=b?(a+1)%w:(a+w-1)%w,l.children[a]):(a=l.parent.groups.indexOf(l),b?(a=(a+1)%E,l.parent.groups[a].children[0]):(a=(a+E-1)%E,l.parent.groups[a].children[l.parent.groups[a].children.length-1]))}nearestReference(c,b){let l=this.references.map((a,w)=>({idx:w,prefixLen:x.Mh(a.uri.toString(),c.toString()),offsetDist:100*Math.abs(a.range.startLineNumber-b.lineNumber)+Math.abs(a.range.startColumn-b.column)})).sort((a,w)=>a.prefixLen>w.prefixLen?-1:a.prefixLen<w.prefixLen?1:a.offsetDist<w.offsetDist?-1:a.offsetDist>w.offsetDist?1:0)[0];if(l)return this.references[l.idx]}referenceAt(c,b){for(let l of this.references)if(l.uri.toString()===c.toString()&&v.e.containsPosition(l.range,b))return l}firstReference(){for(let c of this.references)if(c.isProviderFirst)return c;return this.references[0]}static _compareReferences(c,b){return A.SF.compare(c.uri,b.uri)||v.e.compareRangesUsingStarts(c.range,b.range)}}},7286:(ut,Ie,t)=>{"use strict";t.d(Ie,{Hb:()=>R,hT:()=>E,mR:()=>O});var m=t(5321),B=t(986),u=t(9488),I=t(5976),_=t(187),A=t(4314),x=t(3654),v=t(6887),f=t(2457),d=t(6520),o=t(3983),h=t(2065),r=t(1847),i=t(5621),c=t(5393),b=t(9102),l=function(T,C,W,K){var j,F=arguments.length,H=F<3?C:K===null?K=Object.getOwnPropertyDescriptor(C,W):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(T,C,W,K);else for(var z=T.length-1;z>=0;z--)(j=T[z])&&(H=(F<3?j(H):F>3?j(C,W,H):j(C,W))||H);return F>3&&H&&Object.defineProperty(C,W,H),H},a=function(T,C){return function(W,K){C(W,K,T)}};let w=m.$,E=class ol extends I.JT{constructor(C,W,K){super(),this._editor=C,this._instantiationService=W,this._keybindingService=K,this._widget=this._register(this._instantiationService.createInstance(R,this._editor)),this._currentResult=null,this._participants=[];for(let j of d.Ae.getAll())this._participants.push(this._instantiationService.createInstance(j,this._editor));this._participants.sort((j,F)=>j.hoverOrdinal-F.hoverOrdinal),this._computer=new $(this._editor,this._participants),this._hoverOperation=this._register(new f.H(this._editor,this._computer)),this._register(this._hoverOperation.onResult(j=>{if(!this._computer.anchor)return;let F=j.hasLoadingMessage?this._addLoadingMessage(j.value):j.value;this._withResult(new D(this._computer.anchor,F,j.isComplete))})),this._register(m.mu(this._widget.getDomNode(),"keydown",j=>{j.equals(9)&&this.hide()})),this._register(v.RW.onDidChange(()=>{this._widget.position&&this._currentResult&&(this._widget.clear(),this._setCurrentResult(this._currentResult))}))}maybeShowAt(C){let W=[];for(let j of this._participants)if(j.suggestHoverAnchor){let F=j.suggestHoverAnchor(C);F&&W.push(F)}let K=C.target;if(K.type===6&&W.push(new d.Qj(0,K.range,C.event.posx,C.event.posy)),K.type===7){let j=this._editor.getOption(48).typicalHalfwidthCharacterWidth/2;!K.detail.isAfterLines&&typeof K.detail.horizontalDistanceToText=="number"&&K.detail.horizontalDistanceToText<j&&W.push(new d.Qj(0,K.range,C.event.posx,C.event.posy))}return W.length===0?this._startShowingOrUpdateHover(null,0,0,!1,C):(W.sort((j,F)=>F.priority-j.priority),this._startShowingOrUpdateHover(W[0],0,0,!1,C))}startShowingAtRange(C,W,K,j){this._startShowingOrUpdateHover(new d.Qj(0,C,void 0,void 0),W,K,j,null)}_startShowingOrUpdateHover(C,W,K,j,F){return this._widget.position&&this._currentResult?this._editor.getOption(58).sticky&&F&&this._widget.isMouseGettingCloser(F.event.posx,F.event.posy)?(C&&this._startHoverOperationIfNecessary(C,W,K,j,!0),!0):C?!(!C||!this._currentResult.anchor.equals(C))||(C.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(C)),this._startHoverOperationIfNecessary(C,W,K,j,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(C,W,K,j,!1),!0)):(this._setCurrentResult(null),!1):!!C&&(this._startHoverOperationIfNecessary(C,W,K,j,!1),!0)}_startHoverOperationIfNecessary(C,W,K,j,F){this._computer.anchor&&this._computer.anchor.equals(C)||(this._hoverOperation.cancel(),this._computer.anchor=C,this._computer.shouldFocus=j,this._computer.source=K,this._computer.insistOnKeepingHoverVisible=F,this._hoverOperation.start(W))}_setCurrentResult(C){this._currentResult!==C&&(C&&C.messages.length===0&&(C=null),this._currentResult=C,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}isColorPickerVisible(){return this._widget.isColorPickerVisible}isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}isVisible(){return this._widget.isVisible}containsNode(C){return!!C&&this._widget.getDomNode().contains(C)}_addLoadingMessage(C){if(this._computer.anchor){for(let W of this._participants)if(W.createLoadingMessage){let K=W.createLoadingMessage(this._computer.anchor);if(K)return C.slice(0).concat([K])}}return C}_withResult(C){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!C.isComplete||this._computer.insistOnKeepingHoverVisible&&C.messages.length===0)||this._setCurrentResult(C)}_renderMessages(C,W){let{showAtPosition:K,showAtSecondaryPosition:j,highlightRange:F}=ol.computeHoverRanges(this._editor,C.range,W),H=new I.SL,z=H.add(new O(this._keybindingService)),J=document.createDocumentFragment(),oe=null,fe={fragment:J,statusBar:z,setColorPicker:p=>oe=p,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(let p of this._participants){let re=W.filter(ne=>ne.owner===p);re.length>0&&H.add(p.renderHoverParts(fe,re))}let q=W.some(p=>p.isBeforeContent);if(z.hasContent&&J.appendChild(z.hoverElement),J.hasChildNodes()){if(F){let p=this._editor.createDecorationsCollection();p.set([{range:F,options:ol._DECORATION_OPTIONS}]),H.add((0,I.OF)(()=>{p.clear()}))}this._widget.showAt(J,new k(oe,K,j,this._editor.getOption(58).above,this._computer.shouldFocus,this._computer.source,q,C.initialMousePosX,C.initialMousePosY,H))}else H.dispose()}static computeHoverRanges(C,W,K){let j=1;if(C.hasModel()){let oe=C._getViewModel(),fe=oe.coordinatesConverter,q=fe.convertModelRangeToViewRange(W),p=new _.L(q.startLineNumber,oe.getLineMinColumn(q.startLineNumber));j=fe.convertViewPositionToModelPosition(p).column}let F=W.startLineNumber,H=W.startColumn,z=K[0].range,J=null;for(let oe of K)z=A.e.plusRange(z,oe.range),oe.range.startLineNumber===F&&oe.range.endLineNumber===F&&(H=Math.max(Math.min(H,oe.range.startColumn),j)),oe.forceShowAtRange&&(J=oe.range);return{showAtPosition:J?J.getStartPosition():new _.L(F,W.startColumn),showAtSecondaryPosition:J?J.getStartPosition():new _.L(F,H),highlightRange:z}}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}escape(){this._widget.escape()}};E._DECORATION_OPTIONS=x.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),E=l([a(1,h.TG),a(2,r.d)],E);class D{constructor(C,W,K){this.anchor=C,this.messages=W,this.isComplete=K}filter(C){let W=this.messages.filter(K=>K.isValidForHoverAnchor(C));return W.length===this.messages.length?this:new L(this,this.anchor,W,this.isComplete)}}class L extends D{constructor(C,W,K,j){super(W,K,j),this.original=C}filter(C){return this.original.filter(C)}}class k{constructor(C,W,K,j,F,H,z,J,oe,fe){this.colorPicker=C,this.showAtPosition=W,this.showAtSecondaryPosition=K,this.preferAbove=j,this.stoleFocus=F,this.source=H,this.isBeforeContent=z,this.initialMousePosX=J,this.initialMousePosY=oe,this.disposables=fe,this.closestMouseDistance=void 0}}let R=class Xl extends I.JT{get position(){var C,W;return(W=(C=this._visibleData)===null||C===void 0?void 0:C.showAtPosition)!==null&&W!==void 0?W:null}get isColorPickerVisible(){var C;return!!(!((C=this._visibleData)===null||C===void 0)&&C.colorPicker)}get isVisibleFromKeyboard(){var C;return((C=this._visibleData)===null||C===void 0?void 0:C.source)===1}get isVisible(){var C;return(C=this._hoverVisibleKey.get())!==null&&C!==void 0&&C}constructor(C,W){super(),this._editor=C,this._contextKeyService=W,this.allowEditorOverflow=!0,this._hoverVisibleKey=b.u.hoverVisible.bindTo(this._contextKeyService),this._hoverFocusedKey=b.u.hoverFocused.bindTo(this._contextKeyService),this._hover=this._register(new B.c),this._focusTracker=this._register(m.go(this.getDomNode())),this._horizontalScrollingBy=30,this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(K=>{K.hasChanged(48)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this),this._register(this._focusTracker.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(this._focusTracker.onDidBlur(()=>{this._hoverFocusedKey.set(!1)}))}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return Xl.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let C=this._visibleData.preferAbove;!C&&this._contextKeyService.getContextKeyValue(i._y.Visible.key)&&(C=!0);let W=this._visibleData.isBeforeContent?3:void 0;return{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,preference:C?[1,2]:[2,1],positionAffinity:W}}isMouseGettingCloser(C,W){if(!this._visibleData)return!1;if(this._visibleData.initialMousePosX===void 0||this._visibleData.initialMousePosY===void 0)return this._visibleData.initialMousePosX=C,this._visibleData.initialMousePosY=W,!1;let K=m.i(this.getDomNode());this._visibleData.closestMouseDistance===void 0&&(this._visibleData.closestMouseDistance=N(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,K.left,K.top,K.width,K.height));let j=N(C,W,K.left,K.top,K.width,K.height);return!(j>this._visibleData.closestMouseDistance+4||(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,j),0))}_setVisibleData(C){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=C,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){let C=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:W,lineHeight:K}=this._editor.getOption(48);this._hover.contentsDomNode.style.fontSize=`${W}px`,this._hover.contentsDomNode.style.lineHeight=""+K/W,this._hover.contentsDomNode.style.maxHeight=`${C}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(C=>this._editor.applyFontInfo(C))}showAt(C,W){var K;this._setVisibleData(W),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(C),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),W.stoleFocus&&this._hover.containerDomNode.focus(),(K=W.colorPicker)===null||K===void 0||K.layout()}hide(){if(this._visibleData){let C=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),C&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();let C=this._hover.scrollbar.getScrollDimensions();if(C.scrollWidth>C.width){let W=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==W&&(this._hover.contentsDomNode.style.paddingBottom=W,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}focus(){this._hover.containerDomNode.focus()}scrollUp(){let C=this._hover.scrollbar.getScrollPosition().scrollTop,W=this._editor.getOption(48);this._hover.scrollbar.setScrollPosition({scrollTop:C-W.lineHeight})}scrollDown(){let C=this._hover.scrollbar.getScrollPosition().scrollTop,W=this._editor.getOption(48);this._hover.scrollbar.setScrollPosition({scrollTop:C+W.lineHeight})}scrollLeft(){let C=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:C-this._horizontalScrollingBy})}scrollRight(){let C=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:C+this._horizontalScrollingBy})}pageUp(){let C=this._hover.scrollbar.getScrollPosition().scrollTop,W=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:C-W})}pageDown(){let C=this._hover.scrollbar.getScrollPosition().scrollTop,W=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:C+W})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}escape(){this._editor.focus()}};R.ID="editor.contrib.contentHoverWidget",R=l([a(1,o.i6)],R);let O=class extends I.JT{get hasContent(){return this._hasContent}constructor(T){super(),this._keybindingService=T,this._hasContent=!1,this.hoverElement=w("div.hover-row.status-bar"),this.actionsElement=m.R3(this.hoverElement,w("div.actions"))}addAction(T){let C=this._keybindingService.lookupKeybinding(T.commandId),W=C?C.getLabel():null;return this._hasContent=!0,this._register(B.S.render(this.actionsElement,T,W))}append(T){let C=m.R3(this.actionsElement,T);return this._hasContent=!0,C}};O=l([a(0,r.d)],O);class ${get anchor(){return this._anchor}set anchor(C){this._anchor=C}get shouldFocus(){return this._shouldFocus}set shouldFocus(C){this._shouldFocus=C}get source(){return this._source}set source(C){this._source=C}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(C){this._insistOnKeepingHoverVisible=C}constructor(C,W){this._editor=C,this._participants=W,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(C,W){if(W.type!==1&&!W.supportsMarkerHover)return[];let K=C.getModel(),j=W.range.startLineNumber;if(j>K.getLineCount())return[];let F=K.getLineMaxColumn(j);return C.getLineDecorations(j).filter(H=>{if(H.options.isWholeLine)return!0;let z=H.range.startLineNumber===j?H.range.startColumn:1,J=H.range.endLineNumber===j?H.range.endColumn:F;if(H.options.showIfCollapsed){if(z>W.range.startColumn+1||W.range.endColumn-1>J)return!1}else if(z>W.range.startColumn||W.range.endColumn>J)return!1;return!0})}computeAsync(C){let W=this._anchor;if(!this._editor.hasModel()||!W)return c.Aq.EMPTY;let K=$._getLineDecorations(this._editor,W);return c.Aq.merge(this._participants.map(j=>j.computeAsync?j.computeAsync(W,K,C):c.Aq.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];let C=$._getLineDecorations(this._editor,this._anchor),W=[];for(let K of this._participants)W=W.concat(K.computeSync(this._anchor,C));return(0,u.kX)(W)}}function N(T,C,W,K,j,F){let H=W+j/2,z=K+F/2,J=Math.max(Math.abs(T-H)-j/2,0),oe=Math.max(Math.abs(C-z)-F/2,0);return Math.sqrt(J*J+oe*oe)}},1095:(ut,Ie,t)=>{"use strict";t.d(Ie,{R8:()=>v});var m=t(5393),B=t(1050),u=t(7301),I=t(6830),_=t(1922),A=function(f,d,o,h){return new(o||(o=Promise))(function(r,i){function c(a){try{l(h.next(a))}catch(w){i(w)}}function b(a){try{l(h.throw(a))}catch(w){i(w)}}function l(a){var w;a.done?r(a.value):(w=a.value,w instanceof o?w:new o(function(E){E(w)})).then(c,b)}l((h=h.apply(f,d||[])).next())})};class x{constructor(d,o,h){this.provider=d,this.hover=o,this.ordinal=h}}function v(f,d,o,h){let r=f.ordered(d).map((i,c)=>function(b,l,a,w,E){return A(this,void 0,void 0,function*(){try{let D=yield Promise.resolve(b.provideHover(a,w,E));if(D&&function(L){let k=L.range!==void 0,R=L.contents!==void 0&&L.contents&&L.contents.length>0;return k&&R}(D))return new x(b,D,l)}catch(D){(0,u.Cp)(D)}})}(i,c,d,o,h));return m.Aq.fromPromises(r).coalesce()}(0,I.sb)("_executeHoverProvider",(f,d,o)=>function(h,r,i,c){return v(h,r,i,c).map(b=>b.hover).toPromise()}(f.get(_.p).hoverProvider,d,o,B.T.None))},9817:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ModesHoverController:()=>se});var m=t(2258),B=t(5976),u=t(6830),I=t(4314),_=t(9102),A=t(2042),x=t(2470),v=t(7286),f=t(5321),d=t(9488),o=t(9365),h=t(5241),r=t(2457),i=t(986);let c=f.$;class b extends B.JT{constructor(_e,te,Le){super(),this._renderDisposeables=this._register(new B.SL),this._editor=_e,this._isVisible=!1,this._messages=[],this._hover=this._register(new i.c),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new h.$({editor:this._editor},te,Le)),this._computer=new l(this._editor),this._hoverOperation=this._register(new r.H(this._editor,this._computer)),this._register(this._hoverOperation.onResult(ke=>{this._withResult(ke.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(ke=>{ke.hasChanged(48)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return b.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(_e=>this._editor.applyFontInfo(_e))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(_e){this._computer.lineNumber!==_e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=_e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(_e){this._messages=_e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(_e,te){this._renderDisposeables.clear();let Le=document.createDocumentFragment();for(let ke of te){let le=c("div.hover-row.markdown-hover"),ee=f.R3(le,c("div.hover-contents")),me=this._renderDisposeables.add(this._markdownRenderer.render(ke.value));ee.appendChild(me.element),Le.appendChild(le)}this._updateContents(Le),this._showAt(_e)}_updateContents(_e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(_e),this._updateFont()}_showAt(_e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));let te=this._editor.getLayoutInfo(),Le=this._editor.getTopForLineNumber(_e),ke=this._editor.getScrollTop(),le=this._editor.getOption(64),ee=Le-ke-(this._hover.containerDomNode.clientHeight-le)/2;this._hover.containerDomNode.style.left=`${te.glyphMarginLeft+te.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(ee),0)}px`}}b.ID="editor.contrib.modesGlyphHoverWidget";class l{get lineNumber(){return this._lineNumber}set lineNumber(_e){this._lineNumber=_e}constructor(_e){this._editor=_e,this._lineNumber=-1}computeSync(){let _e=ke=>({value:ke}),te=this._editor.getLineDecorations(this._lineNumber),Le=[];if(!te)return Le;for(let ke of te){if(!ke.options.glyphMarginClassName)continue;let le=ke.options.glyphMarginHoverMessage;le&&!(0,o.CP)(le)&&Le.push(...(0,d._2)(le).map(_e))}return Le}}var a=t(3580),w=t(2065),E=t(988),D=t(3910),L=t(7781),k=t(6520),R=t(2374),O=t(5393),$=t(7301),N=t(5935),T=t(1922),C=t(6357),W=t(5396),K=t(792),j=t(7997),F=t(4970),H=t(8674),z=t(535),J=function(Fe,_e){return function(te,Le){_e(te,Le,Fe)}};let oe=f.$;class fe{constructor(_e,te,Le){this.owner=_e,this.range=te,this.marker=Le}isValidForHoverAnchor(_e){return _e.type===1&&this.range.startColumn<=_e.range.startColumn&&this.range.endColumn>=_e.range.endColumn}}let q={type:1,filter:{include:j.yN.QuickFix},triggerAction:j.aQ.QuickFixHover},p=class{constructor(Fe,_e,te,Le){this._editor=Fe,this._markerDecorationsService=_e,this._openerService=te,this._languageFeaturesService=Le,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(Fe,_e){if(!this._editor.hasModel()||Fe.type!==1&&!Fe.supportsMarkerHover)return[];let te=this._editor.getModel(),Le=Fe.range.startLineNumber,ke=te.getLineMaxColumn(Le),le=[];for(let ee of _e){let me=ee.range.startLineNumber===Le?ee.range.startColumn:1,xe=ee.range.endLineNumber===Le?ee.range.endColumn:ke,We=this._markerDecorationsService.getMarker(te.uri,ee);if(!We)continue;let Ve=new I.e(Fe.range.startLineNumber,me,Fe.range.startLineNumber,xe);le.push(new fe(this,Ve,We))}return le}renderHoverParts(Fe,_e){if(!_e.length)return B.JT.None;let te=new B.SL;_e.forEach(ke=>Fe.fragment.appendChild(this.renderMarkerHover(ke,te)));let Le=_e.length===1?_e[0]:_e.sort((ke,le)=>H.ZL.compare(ke.marker.severity,le.marker.severity))[0];return this.renderMarkerStatusbar(Fe,Le,te),te}renderMarkerHover(Fe,_e){let te=oe("div.hover-row"),Le=f.R3(te,oe("div.marker.hover-contents")),{source:ke,message:le,code:ee,relatedInformation:me}=Fe.marker;this._editor.applyFontInfo(Le);let xe=f.R3(Le,oe("span"));if(xe.style.whiteSpace="pre-wrap",xe.innerText=le,ke||ee)if(ee&&typeof ee!="string"){let We=oe("span");ke&&(f.R3(We,oe("span")).innerText=ke);let Ve=f.R3(We,oe("a.code-link"));Ve.setAttribute("href",ee.target.toString()),_e.add(f.nm(Ve,"click",tt=>{this._openerService.open(ee.target,{allowCommands:!0}),tt.preventDefault(),tt.stopPropagation()})),f.R3(Ve,oe("span")).innerText=ee.value;let Ye=f.R3(Le,We);Ye.style.opacity="0.6",Ye.style.paddingLeft="6px"}else{let We=f.R3(Le,oe("span"));We.style.opacity="0.6",We.style.paddingLeft="6px",We.innerText=ke&&ee?`${ke}(${ee})`:ke||`(${ee})`}if((0,d.Of)(me))for(let{message:We,resource:Ve,startLineNumber:Ye,startColumn:tt}of me){let Qe=f.R3(Le,oe("div"));Qe.style.marginTop="8px";let bt=f.R3(Qe,oe("a"));bt.innerText=`${(0,N.EZ)(Ve)}(${Ye}, ${tt}): `,bt.style.cursor="pointer",_e.add(f.nm(bt,"click",xt=>{xt.stopPropagation(),xt.preventDefault(),this._openerService&&this._openerService.open(Ve,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:Ye,startColumn:tt}}}).catch($.dL)}));let ht=f.R3(Qe,oe("span"));ht.innerText=We,this._editor.applyFontInfo(ht)}return te}renderMarkerStatusbar(Fe,_e,te){if(_e.marker.severity!==H.ZL.Error&&_e.marker.severity!==H.ZL.Warning&&_e.marker.severity!==H.ZL.Info||Fe.statusBar.addAction({label:a.NC("view problem","View Problem"),commandId:F.NextMarkerAction.ID,run:()=>{var Le;Fe.hide(),(Le=F.MarkerController.get(this._editor))===null||Le===void 0||Le.showAtMarker(_e.marker),this._editor.focus()}}),!this._editor.getOption(87)){let Le=Fe.statusBar.append(oe("div"));this.recentMarkerCodeActionsInfo&&(H.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===H.H0.makeKey(_e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(Le.textContent=a.NC("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);let ke=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?B.JT.None:te.add((0,O.Vg)(()=>Le.textContent=a.NC("checkingForQuickFixes","Checking for quick fixes..."),200));Le.textContent||(Le.textContent=String.fromCharCode(160));let le=this.getCodeActions(_e.marker);te.add((0,B.OF)(()=>le.cancel())),le.then(ee=>{if(ke.dispose(),this.recentMarkerCodeActionsInfo={marker:_e.marker,hasCodeActions:ee.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return ee.dispose(),void(Le.textContent=a.NC("noQuickFixes","No quick fixes available"));Le.style.display="none";let me=!1;te.add((0,B.OF)(()=>{me||ee.dispose()})),Fe.statusBar.addAction({label:a.NC("quick fixes","Quick Fix..."),commandId:W.cz,run:xe=>{me=!0;let We=K.G.get(this._editor),Ve=f.i(xe);Fe.hide(),We==null||We.showCodeActions(q,ee,{x:Ve.left+6,y:Ve.top+Ve.height+6,width:Ve.width,height:Ve.height})}})},$.dL)}}getCodeActions(Fe){return(0,O.PG)(_e=>(0,W.aI)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new I.e(Fe.startLineNumber,Fe.startColumn,Fe.endLineNumber,Fe.endColumn),q,z.Ex.None,_e))}};p=function(Fe,_e,te,Le){var ke,le=arguments.length,ee=le<3?_e:Le===null?Le=Object.getOwnPropertyDescriptor(_e,te):Le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(Fe,_e,te,Le);else for(var me=Fe.length-1;me>=0;me--)(ke=Fe[me])&&(ee=(le<3?ke(ee):le>3?ke(_e,te,ee):ke(_e,te))||ee);return le>3&&ee&&Object.defineProperty(_e,te,ee),ee}([J(1,C.i),J(2,E.v4),J(3,T.p)],p);var re=t(7298),ne=t(1847),ie=function(Fe,_e){return function(te,Le){_e(te,Le,Fe)}};let se=class ed{static get(_e){return _e.getContribution(ed.ID)}constructor(_e,te,Le,ke,le){this._editor=_e,this._instantiationService=te,this._openerService=Le,this._languageService=ke,this._keybindingService=le,this._toUnhook=new B.SL,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(ee=>{ee.hasChanged(58)&&(this._unhookEvents(),this._hookEvents())})}_hookEvents(){let _e=this._editor.getOption(58);this._isHoverEnabled=_e.enabled,this._isHoverSticky=_e.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(te=>this._onEditorMouseDown(te))),this._toUnhook.add(this._editor.onMouseUp(te=>this._onEditorMouseUp(te))),this._toUnhook.add(this._editor.onMouseMove(te=>this._onEditorMouseMove(te))),this._toUnhook.add(this._editor.onKeyDown(te=>this._onKeyDown(te)))):(this._toUnhook.add(this._editor.onMouseMove(te=>this._onEditorMouseMove(te))),this._toUnhook.add(this._editor.onKeyDown(te=>this._onKeyDown(te)))),this._toUnhook.add(this._editor.onMouseLeave(te=>this._onEditorMouseLeave(te))),this._toUnhook.add(this._editor.onDidChangeModel(()=>this._hideWidgets())),this._toUnhook.add(this._editor.onDidScrollChange(te=>this._onEditorScrollChanged(te)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(_e){(_e.scrollTopChanged||_e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(_e){this._isMouseDown=!0;let te=_e.target;te.type!==9||te.detail!==v.Hb.ID?te.type===12&&te.detail===b.ID||(te.type!==12&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(_e){this._isMouseDown=!1}_onEditorMouseLeave(_e){var te;let Le=_e.event.browserEvent.relatedTarget;!((te=this._contentWidget)===null||te===void 0)&&te.containsNode(Le)||this._hideWidgets()}_onEditorMouseMove(_e){var te,Le,ke,le,ee,me,xe,We;let Ve=_e.target;if((!this._isMouseDown||!this._hoverClicked)&&(!this._isHoverSticky||Ve.type!==9||Ve.detail!==v.Hb.ID)&&(!this._isHoverSticky||!(!((te=this._contentWidget)===null||te===void 0)&&te.containsNode((Le=_e.event.browserEvent.view)===null||Le===void 0?void 0:Le.document.activeElement))||!((le=(ke=_e.event.browserEvent.view)===null||ke===void 0?void 0:ke.getSelection())===null||le===void 0)&&le.isCollapsed)&&(this._isHoverSticky||Ve.type!==9||Ve.detail!==v.Hb.ID||!(!((ee=this._contentWidget)===null||ee===void 0)&&ee.isColorPickerVisible()))&&!(this._isHoverSticky&&Ve.type===12&&Ve.detail===b.ID||this._isHoverSticky&&(!((me=this._contentWidget)===null||me===void 0)&&me.isVisibleFromKeyboard()))){if(this._isHoverEnabled)return this._getOrCreateContentWidget().maybeShowAt(_e)?void((xe=this._glyphWidget)===null||xe===void 0||xe.hide()):Ve.type===2&&Ve.position?((We=this._contentWidget)===null||We===void 0||We.hide(),this._glyphWidget||(this._glyphWidget=new b(this._editor,this._languageService,this._openerService)),void this._glyphWidget.startShowingAt(Ve.position.lineNumber)):void this._hideWidgets();this._hideWidgets()}}_onKeyDown(_e){var te;if(!this._editor.hasModel())return;let Le=this._keybindingService.softDispatch(_e,this._editor.getDomNode()),ke=(Le==null?void 0:Le.kind)===1||Le&&Le.kind===2&&Le.commandId==="editor.action.showHover"&&((te=this._contentWidget)===null||te===void 0?void 0:te.isVisible());_e.keyCode===5||_e.keyCode===6||_e.keyCode===57||_e.keyCode===4||ke||this._hideWidgets()}_hideWidgets(){var _e,te,Le;this._isMouseDown&&this._hoverClicked&&(!((_e=this._contentWidget)===null||_e===void 0)&&_e.isColorPickerVisible())||re.Q.dropDownVisible||(this._hoverClicked=!1,(te=this._glyphWidget)===null||te===void 0||te.hide(),(Le=this._contentWidget)===null||Le===void 0||Le.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(v.hT,this._editor)),this._contentWidget}isColorPickerVisible(){var _e;return((_e=this._contentWidget)===null||_e===void 0?void 0:_e.isColorPickerVisible())||!1}showContentHover(_e,te,Le,ke){this._getOrCreateContentWidget().startShowingAtRange(_e,te,Le,ke)}focus(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.focus()}scrollUp(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.scrollUp()}scrollDown(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.scrollDown()}scrollLeft(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.scrollLeft()}scrollRight(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.scrollRight()}pageUp(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.pageUp()}pageDown(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.pageDown()}goToTop(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.goToTop()}goToBottom(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.goToBottom()}escape(){var _e;(_e=this._contentWidget)===null||_e===void 0||_e.escape()}isHoverVisible(){var _e;return(_e=this._contentWidget)===null||_e===void 0?void 0:_e.isVisible()}dispose(){var _e,te;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(_e=this._glyphWidget)===null||_e===void 0||_e.dispose(),(te=this._contentWidget)===null||te===void 0||te.dispose()}};se.ID="editor.contrib.hover",se=function(Fe,_e,te,Le){var ke,le=arguments.length,ee=le<3?_e:Le===null?Le=Object.getOwnPropertyDescriptor(_e,te):Le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(Fe,_e,te,Le);else for(var me=Fe.length-1;me>=0;me--)(ke=Fe[me])&&(ee=(le<3?ke(ee):le>3?ke(_e,te,ee):ke(_e,te))||ee);return le>3&&ee&&Object.defineProperty(_e,te,ee),ee}([ie(1,w.TG),ie(2,E.v4),ie(3,A.O),ie(4,ne.d)],se);class ce extends u.R6{constructor(){super({id:"editor.action.showHover",label:a.NC({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse.","If the hover is already visible, it will take focus."]},"Show or Focus Hover"),description:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if when triggered with the keyboard, the hover should take focus immediately.",type:"boolean",default:!1}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:_.u.editorTextFocus,primary:(0,m.gx)(2089,2087),weight:100}})}run(_e,te,Le){if(!te.hasModel())return;let ke=se.get(te);if(!ke)return;let le=te.getPosition(),ee=new I.e(le.lineNumber,le.column,le.lineNumber,le.column),me=te.getOption(2)===2||!!(Le!=null&&Le.focus);ke.isHoverVisible()?ke.focus():ke.showContentHover(ee,1,1,me)}}class be extends u.R6{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:a.NC({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(_e,te){let Le=se.get(te);if(!Le)return;let ke=te.getPosition();if(!ke)return;let le=new I.e(ke.lineNumber,ke.column,ke.lineNumber,ke.column),ee=x.GotoDefinitionAtPositionEditorContribution.get(te);ee&&ee.startFindDefinitionFromCursor(ke).then(()=>{Le.showContentHover(le,1,1,!0)})}}class de extends u.R6{constructor(){super({id:"editor.action.scrollUpHover",label:a.NC({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:16,weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.scrollUp()}}class U extends u.R6{constructor(){super({id:"editor.action.scrollDownHover",label:a.NC({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:18,weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.scrollDown()}}class ue extends u.R6{constructor(){super({id:"editor.action.scrollLeftHover",label:a.NC({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:15,weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.scrollLeft()}}class ve extends u.R6{constructor(){super({id:"editor.action.scrollRightHover",label:a.NC({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:17,weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.scrollRight()}}class X extends u.R6{constructor(){super({id:"editor.action.pageUpHover",label:a.NC({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:11,secondary:[528],weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.pageUp()}}class ye extends u.R6{constructor(){super({id:"editor.action.pageDownHover",label:a.NC({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:12,secondary:[530],weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.pageDown()}}class Ce extends u.R6{constructor(){super({id:"editor.action.goToTopHover",label:a.NC({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.goToTop()}}class Ee extends u.R6{constructor(){super({id:"editor.action.goToBottomHover",label:a.NC({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.goToBottom()}}class Ae extends u.R6{constructor(){super({id:"editor.action.escapeFocusHover",label:a.NC({key:"escapeFocusHover",comment:["Action that allows to escape from the hover widget with the escape command when the hover widget is focused."]},"Escape Focus Hover"),alias:"Escape Focus Hover",precondition:_.u.hoverFocused,kbOpts:{kbExpr:_.u.hoverFocused,primary:9,weight:100}})}run(_e,te){let Le=se.get(te);Le&&Le.escape()}}(0,u._K)(se.ID,se,2),(0,u.Qr)(ce),(0,u.Qr)(be),(0,u.Qr)(de),(0,u.Qr)(U),(0,u.Qr)(ue),(0,u.Qr)(ve),(0,u.Qr)(X),(0,u.Qr)(ye),(0,u.Qr)(Ce),(0,u.Qr)(Ee),(0,u.Qr)(Ae),k.Ae.register(R.D5),k.Ae.register(p),(0,L.Ic)((Fe,_e)=>{let te=Fe.getColor(D.CNo);te&&(_e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${te.transparent(.5)}; }`),_e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${te.transparent(.5)}; }`),_e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${te.transparent(.5)}; }`))})},2457:(ut,Ie,t)=>{"use strict";t.d(Ie,{H:()=>A});var m=t(5393),B=t(7301),u=t(4669),I=t(5976);class _{constructor(v,f,d){this.value=v,this.isComplete=f,this.hasLoadingMessage=d}}class A extends I.JT{constructor(v,f){super(),this._editor=v,this._computer=f,this._onResult=this._register(new u.Q5),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new m.pY(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new m.pY(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new m.pY(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(58).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(v,f=!0){this._state=v,f&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,m.zS)(v=>this._computer.computeAsync(v)),(()=>{var v,f,d,o;v=this,f=void 0,o=function*(){var h,r,i,c;try{try{for(var b,l=!0,a=function(w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,D=w[Symbol.asyncIterator];return D?D.call(w):(w=typeof __values=="function"?__values(w):w[Symbol.iterator](),E={},L("next"),L("throw"),L("return"),E[Symbol.asyncIterator]=function(){return this},E);function L(k){E[k]=w[k]&&function(R){return new Promise(function(O,$){(function(N,T,C,W){Promise.resolve(W).then(function(K){N({value:K,done:C})},T)})(O,$,(R=w[k](R)).done,R.value)})}}}(this._asyncIterable);!(h=(b=yield a.next()).done);){c=b.value,l=!1;try{let w=c;w&&(this._result.push(w),this._fireResult())}finally{l=!0}}}catch(w){r={error:w}}finally{try{l||h||!(i=a.return)||(yield i.call(a))}finally{if(r)throw r.error}}this._asyncIterableDone=!0,this._state!==3&&this._state!==4||this._setState(0)}catch(w){(0,B.dL)(w)}},new((d=void 0)||(d=Promise))(function(h,r){function i(l){try{b(o.next(l))}catch(a){r(a)}}function c(l){try{b(o.throw(l))}catch(a){r(a)}}function b(l){var a;l.done?h(l.value):(a=l.value,a instanceof d?a:new d(function(w){w(a)})).then(i,c)}b((o=o.apply(v,f||[])).next())})})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;let v=this._state===0,f=this._state===4;this._onResult.fire(new _(this._result.slice(0),v,f))}start(v){if(v===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}},6520:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ae:()=>u,Qj:()=>m,YM:()=>B});class m{constructor(_,A,x,v){this.priority=_,this.range=A,this.initialMousePosX=x,this.initialMousePosY=v,this.type=1}equals(_){return _.type===1&&this.range.equalsRange(_.range)}canAdoptVisibleHover(_,A){return _.type===1&&A.lineNumber===this.range.startLineNumber}}class B{constructor(_,A,x,v,f,d){this.priority=_,this.owner=A,this.range=x,this.initialMousePosX=v,this.initialMousePosY=f,this.supportsMarkerHover=d,this.type=2}equals(_){return _.type===2&&this.owner===_.owner}canAdoptVisibleHover(_,A){return _.type===2&&this.owner===_.owner}}let u=new class{constructor(){this._participants=[]}register(I){this._participants.push(I)}getAll(){return this._participants}}},2374:(ut,Ie,t)=>{"use strict";t.d(Ie,{D5:()=>a,c:()=>w,hU:()=>l});var m=t(5321),B=t(9488),u=t(5393),I=t(9365),_=t(5976),A=t(5241),x=t(187),v=t(4314),f=t(2042),d=t(1095),o=t(3580),h=t(3108),r=t(988),i=t(1922),c=function(E,D){return function(L,k){D(L,k,E)}};let b=m.$;class l{constructor(D,L,k,R,O){this.owner=D,this.range=L,this.contents=k,this.isBeforeContent=R,this.ordinal=O}isValidForHoverAnchor(D){return D.type===1&&this.range.startColumn<=D.range.startColumn&&this.range.endColumn>=D.range.endColumn}}let a=class{constructor(E,D,L,k,R){this._editor=E,this._languageService=D,this._openerService=L,this._configurationService=k,this._languageFeaturesService=R,this.hoverOrdinal=3}createLoadingMessage(E){return new l(this,E.range,[new I.W5().appendText(o.NC("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(E,D){if(!this._editor.hasModel()||E.type!==1)return[];let L=this._editor.getModel(),k=E.range.startLineNumber,R=L.getLineMaxColumn(k),O=[],$=1e3,N=L.getLineLength(k),T=L.getLanguageIdAtPosition(E.range.startLineNumber,E.range.startColumn),C=this._editor.getOption(112),W=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:T}),K=!1;C>=0&&N>C&&E.range.startColumn>=C&&(K=!0,O.push(new l(this,E.range,[{value:o.NC("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,$++))),!K&&typeof W=="number"&&N>=W&&O.push(new l(this,E.range,[{value:o.NC("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,$++));let j=!1;for(let F of D){let H=F.range.startLineNumber===k?F.range.startColumn:1,z=F.range.endLineNumber===k?F.range.endColumn:R,J=F.options.hoverMessage;if(!J||(0,I.CP)(J))continue;F.options.beforeContentClassName&&(j=!0);let oe=new v.e(E.range.startLineNumber,H,E.range.startLineNumber,z);O.push(new l(this,oe,(0,B._2)(J),j,$++))}return O}computeAsync(E,D,L){if(!this._editor.hasModel()||E.type!==1)return u.Aq.EMPTY;let k=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(k))return u.Aq.EMPTY;let R=new x.L(E.range.startLineNumber,E.range.startColumn);return(0,d.R8)(this._languageFeaturesService.hoverProvider,k,R,L).filter(O=>!(0,I.CP)(O.hover.contents)).map(O=>{let $=O.hover.range?v.e.lift(O.hover.range):E.range;return new l(this,$,O.hover.contents,!1,O.ordinal)})}renderHoverParts(E,D){return w(E,D,this._editor,this._languageService,this._openerService)}};function w(E,D,L,k,R){D.sort(($,N)=>$.ordinal-N.ordinal);let O=new _.SL;for(let $ of D)for(let N of $.contents){if((0,I.CP)(N))continue;let T=b("div.hover-row.markdown-hover"),C=m.R3(T,b("div.hover-contents")),W=O.add(new A.$({editor:L},k,R));O.add(W.onDidRenderAsync(()=>{C.className="hover-contents code-hover-contents",E.onContentsChanged()}));let K=O.add(W.render(N));C.appendChild(K.element),E.fragment.appendChild(T)}return O}a=function(E,D,L,k){var R,O=arguments.length,$=O<3?D:k===null?k=Object.getOwnPropertyDescriptor(D,L):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(E,D,L,k);else for(var N=E.length-1;N>=0;N--)(R=E[N])&&($=(O<3?R($):O>3?R(D,L,$):R(D,L))||$);return O>3&&$&&Object.defineProperty(D,L,$),$}([c(1,f.O),c(2,r.v4),c(3,h.Ui),c(4,i.p)],a)},6353:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(5393),B=t(7301),u=t(6467),I=t(6830),_=t(4314),A=t(3860),x=t(9102),v=t(3654),f=t(4319),d=t(3580);class o{constructor(a,w,E){this._editRange=a,this._originalSelection=w,this._text=E}getEditOperations(a,w){w.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(a,w){let E=w.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new A.Y(E.endLineNumber,Math.min(this._originalSelection.positionColumn,E.endColumn),E.endLineNumber,Math.min(this._originalSelection.positionColumn,E.endColumn)):new A.Y(E.endLineNumber,E.endColumn-this._text.length,E.endLineNumber,E.endColumn)}}let h=class sl{static get(a){return a.getContribution(sl.ID)}constructor(a,w){this.editor=a,this.editorWorkerService=w,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(a,w){var E;(E=this.currentRequest)===null||E===void 0||E.cancel();let D=this.editor.getSelection(),L=this.editor.getModel();if(!L||!D)return;let k=D;if(k.startLineNumber!==k.endLineNumber)return;let R=new u.yy(this.editor,5),O=L.uri;return this.editorWorkerService.canNavigateValueSet(O)?(this.currentRequest=(0,m.PG)($=>this.editorWorkerService.navigateValueSet(O,k,w)),this.currentRequest.then($=>{var N;if(!$||!$.range||!$.value||!R.validate(this.editor))return;let T=_.e.lift($.range),C=$.range,W=$.value.length-(k.endColumn-k.startColumn);C={startLineNumber:C.startLineNumber,startColumn:C.startColumn,endLineNumber:C.endLineNumber,endColumn:C.startColumn+$.value.length},W>1&&(k=new A.Y(k.startLineNumber,k.startColumn,k.endLineNumber,k.endColumn+W-1));let K=new o(T,k,$.value);this.editor.pushUndoStop(),this.editor.executeCommand(a,K),this.editor.pushUndoStop(),this.decorations.set([{range:C,options:sl.DECORATION}]),(N=this.decorationRemover)===null||N===void 0||N.cancel(),this.decorationRemover=(0,m.Vs)(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(B.dL)}).catch(B.dL)):Promise.resolve(void 0)}};var r,i;h.ID="editor.contrib.inPlaceReplaceController",h.DECORATION=v.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),h=function(l,a,w,E){var D,L=arguments.length,k=L<3?a:E===null?E=Object.getOwnPropertyDescriptor(a,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,w,E);else for(var R=l.length-1;R>=0;R--)(D=l[R])&&(k=(L<3?D(k):L>3?D(a,w,k):D(a,w))||k);return L>3&&k&&Object.defineProperty(a,w,k),k}([(r=1,i=f.p,function(l,a){i(l,a,r)})],h);class c extends I.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:d.NC("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:x.u.writable,kbOpts:{kbExpr:x.u.editorTextFocus,primary:3159,weight:100}})}run(a,w){let E=h.get(w);return E?E.run(this.id,!1):Promise.resolve(void 0)}}class b extends I.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:d.NC("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:x.u.writable,kbOpts:{kbExpr:x.u.editorTextFocus,primary:3161,weight:100}})}run(a,w){let E=h.get(w);return E?E.run(this.id,!0):Promise.resolve(void 0)}}(0,I._K)(h.ID,h,4),(0,I.Qr)(c),(0,I.Qr)(b)},8279:(ut,Ie,t)=>{"use strict";function m(u,I){let _=0;for(let A=0;A<u.length;A++)u.charAt(A)==="	"?_+=I:_++;return _}function B(u,I,_){u=u<0?0:u;let A="";if(!_){let x=Math.floor(u/I);u%=I;for(let v=0;v<x;v++)A+="	"}for(let x=0;x<u;x++)A+=" ";return A}t.d(Ie,{J:()=>B,Y:()=>m})},4602:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{AutoIndentOnPaste:()=>N,AutoIndentOnPasteCommand:()=>$,ChangeIndentationSizeAction:()=>w,ChangeTabDisplaySize:()=>L,DetectIndentation:()=>k,IndentUsingSpaces:()=>D,IndentUsingTabs:()=>E,IndentationToSpacesAction:()=>l,IndentationToSpacesCommand:()=>K,IndentationToTabsAction:()=>a,IndentationToTabsCommand:()=>j,ReindentLinesAction:()=>R,ReindentSelectedLinesAction:()=>O,getReindentEditOperations:()=>b});var m=t(5976),B=t(7295),u=t(6830),I=t(291),_=t(9386),A=t(4314),x=t(3860),v=t(9102),f=t(1381),d=t(3733),o=t(8279),h=t(3580),r=t(1157),i=t(3158),c=t(5383);function b(F,H,z,J,oe){if(F.getLineCount()===1&&F.getLineMaxColumn(1)===1)return[];let fe=H.getLanguageConfiguration(F.getLanguageId()).indentationRules;if(!fe)return[];for(J=Math.min(J,F.getLineCount());z<=J&&fe.unIndentedLinePattern;){let ue=F.getLineContent(z);if(!fe.unIndentedLinePattern.test(ue))break;z++}if(z>J-1)return[];let{tabSize:q,indentSize:p,insertSpaces:re}=F.getOptions(),ne=(ue,ve)=>(ve=ve||1,I.U.shiftIndent(ue,ue.length+ve,q,p,re)),ie=(ue,ve)=>(ve=ve||1,I.U.unshiftIndent(ue,ue.length+ve,q,p,re)),se=[],ce,be=F.getLineContent(z),de=be;if(oe!=null){ce=oe;let ue=B.V8(be);de=ce+be.substring(ue.length),fe.decreaseIndentPattern&&fe.decreaseIndentPattern.test(de)&&(ce=ie(ce),de=ce+be.substring(ue.length)),be!==de&&se.push(_.h.replaceMove(new x.Y(z,1,z,ue.length+1),(0,i.x)(ce,p,re)))}else ce=B.V8(be);let U=ce;fe.increaseIndentPattern&&fe.increaseIndentPattern.test(de)?(U=ne(U),ce=ne(ce)):fe.indentNextLinePattern&&fe.indentNextLinePattern.test(de)&&(U=ne(U));for(let ue=++z;ue<=J;ue++){let ve=F.getLineContent(ue),X=B.V8(ve),ye=U+ve.substring(X.length);fe.decreaseIndentPattern&&fe.decreaseIndentPattern.test(ye)&&(U=ie(U),ce=ie(ce)),X!==U&&se.push(_.h.replaceMove(new x.Y(ue,1,ue,X.length+1),(0,i.x)(U,p,re))),fe.unIndentedLinePattern&&fe.unIndentedLinePattern.test(ve)||(fe.increaseIndentPattern&&fe.increaseIndentPattern.test(ye)?(ce=ne(ce),U=ce):U=fe.indentNextLinePattern&&fe.indentNextLinePattern.test(ye)?ne(U):ce)}return se}class l extends u.R6{constructor(){super({id:l.ID,label:h.NC("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:v.u.writable})}run(H,z){let J=z.getModel();if(!J)return;let oe=J.getOptions(),fe=z.getSelection();if(!fe)return;let q=new K(fe,oe.tabSize);z.pushUndoStop(),z.executeCommands(this.id,[q]),z.pushUndoStop(),J.updateOptions({insertSpaces:!0})}}l.ID="editor.action.indentationToSpaces";class a extends u.R6{constructor(){super({id:a.ID,label:h.NC("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:v.u.writable})}run(H,z){let J=z.getModel();if(!J)return;let oe=J.getOptions(),fe=z.getSelection();if(!fe)return;let q=new j(fe,oe.tabSize);z.pushUndoStop(),z.executeCommands(this.id,[q]),z.pushUndoStop(),J.updateOptions({insertSpaces:!1})}}a.ID="editor.action.indentationToTabs";class w extends u.R6{constructor(H,z,J){super(J),this.insertSpaces=H,this.displaySizeOnly=z}run(H,z){let J=H.get(r.eJ),oe=H.get(d.q),fe=z.getModel();if(!fe)return;let q=oe.getCreationOptions(fe.getLanguageId(),fe.uri,fe.isForSimpleWidget),p=fe.getOptions(),re=[1,2,3,4,5,6,7,8].map(ie=>({id:ie.toString(),label:ie.toString(),description:ie===q.tabSize&&ie===p.tabSize?h.NC("configuredTabSize","Configured Tab Size"):ie===q.tabSize?h.NC("defaultTabSize","Default Tab Size"):ie===p.tabSize?h.NC("currentTabSize","Current Tab Size"):void 0})),ne=Math.min(fe.getOptions().tabSize-1,7);setTimeout(()=>{J.pick(re,{placeHolder:h.NC({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:re[ne]}).then(ie=>{if(ie&&fe&&!fe.isDisposed()){let se=parseInt(ie.label,10);this.displaySizeOnly?fe.updateOptions({tabSize:se}):fe.updateOptions({tabSize:se,indentSize:se,insertSpaces:this.insertSpaces})}})},50)}}class E extends w{constructor(){super(!1,!1,{id:E.ID,label:h.NC("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}E.ID="editor.action.indentUsingTabs";class D extends w{constructor(){super(!0,!1,{id:D.ID,label:h.NC("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}D.ID="editor.action.indentUsingSpaces";class L extends w{constructor(){super(!0,!0,{id:L.ID,label:h.NC("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}}L.ID="editor.action.changeTabDisplaySize";class k extends u.R6{constructor(){super({id:k.ID,label:h.NC("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(H,z){let J=H.get(d.q),oe=z.getModel();if(!oe)return;let fe=J.getCreationOptions(oe.getLanguageId(),oe.uri,oe.isForSimpleWidget);oe.detectIndentation(fe.insertSpaces,fe.tabSize)}}k.ID="editor.action.detectIndentation";class R extends u.R6{constructor(){super({id:"editor.action.reindentlines",label:h.NC("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:v.u.writable})}run(H,z){let J=H.get(f.c_),oe=z.getModel();if(!oe)return;let fe=b(oe,J,1,oe.getLineCount());fe.length>0&&(z.pushUndoStop(),z.executeEdits(this.id,fe),z.pushUndoStop())}}class O extends u.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:h.NC("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:v.u.writable})}run(H,z){let J=H.get(f.c_),oe=z.getModel();if(!oe)return;let fe=z.getSelections();if(fe===null)return;let q=[];for(let p of fe){let re=p.startLineNumber,ne=p.endLineNumber;if(re!==ne&&p.endColumn===1&&ne--,re===1){if(re===ne)continue}else re--;let ie=b(oe,J,re,ne);q.push(...ie)}q.length>0&&(z.pushUndoStop(),z.executeEdits(this.id,q),z.pushUndoStop())}}class ${constructor(H,z){this._initialSelection=z,this._edits=[],this._selectionId=null;for(let J of H)J.range&&typeof J.text=="string"&&this._edits.push(J)}getEditOperations(H,z){for(let oe of this._edits)z.addEditOperation(A.e.lift(oe.range),oe.text);let J=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(J=!0,this._selectionId=z.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(J=!0,this._selectionId=z.trackSelection(this._initialSelection,!1))),J||(this._selectionId=z.trackSelection(this._initialSelection))}computeCursorState(H,z){return z.getTrackedSelection(this._selectionId)}}let N=class{constructor(F,H){this.editor=F,this._languageConfigurationService=H,this.callOnDispose=new m.SL,this.callOnModel=new m.SL,this.callOnDispose.add(F.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(F.onDidChangeModel(()=>this.update())),this.callOnDispose.add(F.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),this.editor.getOption(10)<4||this.editor.getOption(53)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:F})=>{this.trigger(F)}))}trigger(F){let H=this.editor.getSelections();if(H===null||H.length>1)return;let z=this.editor.getModel();if(!z||!z.tokenization.isCheapToTokenize(F.getStartPosition().lineNumber))return;let J=this.editor.getOption(10),{tabSize:oe,indentSize:fe,insertSpaces:q}=z.getOptions(),p=[],re={shiftIndent:ce=>I.U.shiftIndent(ce,ce.length+1,oe,fe,q),unshiftIndent:ce=>I.U.unshiftIndent(ce,ce.length+1,oe,fe,q)},ne=F.startLineNumber;for(;ne<=F.endLineNumber&&this.shouldIgnoreLine(z,ne);)ne++;if(ne>F.endLineNumber)return;let ie=z.getLineContent(ne);if(!/\S/.test(ie.substring(0,F.startColumn-1))){let ce=(0,c.n8)(J,z,z.getLanguageId(),ne,re,this._languageConfigurationService);if(ce!==null){let be=B.V8(ie),de=o.Y(ce,oe);if(de!==o.Y(be,oe)){let U=o.J(de,oe,q);p.push({range:new A.e(ne,1,ne,be.length+1),text:U}),ie=U+ie.substr(be.length)}else{let U=(0,c.tI)(z,ne,this._languageConfigurationService);if(U===0||U===8)return}}}let se=ne;for(;ne<F.endLineNumber&&!/\S/.test(z.getLineContent(ne+1));)ne++;if(ne!==F.endLineNumber){let ce={tokenization:{getLineTokens:de=>z.tokenization.getLineTokens(de),getLanguageId:()=>z.getLanguageId(),getLanguageIdAtPosition:(de,U)=>z.getLanguageIdAtPosition(de,U)},getLineContent:de=>de===se?ie:z.getLineContent(de)},be=(0,c.n8)(J,ce,z.getLanguageId(),ne+1,re,this._languageConfigurationService);if(be!==null){let de=o.Y(be,oe),U=o.Y(B.V8(z.getLineContent(ne+1)),oe);if(de!==U){let ue=de-U;for(let ve=ne+1;ve<=F.endLineNumber;ve++){let X=z.getLineContent(ve),ye=B.V8(X),Ce=o.Y(ye,oe)+ue,Ee=o.J(Ce,oe,q);Ee!==ye&&p.push({range:new A.e(ve,1,ve,ye.length+1),text:Ee})}}}}if(p.length>0){this.editor.pushUndoStop();let ce=new $(p,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",ce),this.editor.pushUndoStop()}}shouldIgnoreLine(F,H){F.tokenization.forceTokenization(H);let z=F.getLineFirstNonWhitespaceColumn(H);if(z===0)return!0;let J=F.tokenization.getLineTokens(H);if(J.getCount()>0){let oe=J.findTokenIndexAtOffset(z);if(oe>=0&&J.getStandardTokenType(oe)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function T(F,H,z,J){if(F.getLineCount()===1&&F.getLineMaxColumn(1)===1)return;let oe="";for(let q=0;q<z;q++)oe+=" ";let fe=new RegExp(oe,"gi");for(let q=1,p=F.getLineCount();q<=p;q++){let re=F.getLineFirstNonWhitespaceColumn(q);if(re===0&&(re=F.getLineMaxColumn(q)),re===1)continue;let ne=new A.e(q,1,q,re),ie=F.getValueInRange(ne),se=J?ie.replace(/\t/gi,oe):ie.replace(fe,"	");H.addEditOperation(ne,se)}}var C,W;N.ID="editor.contrib.autoIndentOnPaste",N=function(F,H,z,J){var oe,fe=arguments.length,q=fe<3?H:J===null?J=Object.getOwnPropertyDescriptor(H,z):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(F,H,z,J);else for(var p=F.length-1;p>=0;p--)(oe=F[p])&&(q=(fe<3?oe(q):fe>3?oe(H,z,q):oe(H,z))||q);return fe>3&&q&&Object.defineProperty(H,z,q),q}([(C=1,W=f.c_,function(F,H){W(F,H,C)})],N);class K{constructor(H,z){this.selection=H,this.tabSize=z,this.selectionId=null}getEditOperations(H,z){this.selectionId=z.trackSelection(this.selection),T(H,z,this.tabSize,!0)}computeCursorState(H,z){return z.getTrackedSelection(this.selectionId)}}class j{constructor(H,z){this.selection=H,this.tabSize=z,this.selectionId=null}getEditOperations(H,z){this.selectionId=z.trackSelection(this.selection),T(H,z,this.tabSize,!1)}computeCursorState(H,z){return z.getTrackedSelection(this.selectionId)}}(0,u._K)(N.ID,N,2),(0,u.Qr)(l),(0,u.Qr)(a),(0,u.Qr)(E),(0,u.Qr)(D),(0,u.Qr)(L),(0,u.Qr)(k),(0,u.Qr)(R),(0,u.Qr)(O)},6348:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(6520),u=t(5321),I=t(9488),_=t(5393),A=t(1050),x=t(7301),v=t(5976),f=t(3702),d=t(8401),o=t(666),h=t(9994),r=t(3407),i=t(4141),c=t(9386),b=t(4314),l=t(6887),a=t(4973),w=t(3654),E=t(8191),D=t(1922),L=t(8216),k=t(2005),R=t(187),O=t(6663),$=function(Fe,_e,te,Le){return new(te||(te=Promise))(function(ke,le){function ee(We){try{xe(Le.next(We))}catch(Ve){le(Ve)}}function me(We){try{xe(Le.throw(We))}catch(Ve){le(Ve)}}function xe(We){var Ve;We.done?ke(We.value):(Ve=We.value,Ve instanceof te?Ve:new te(function(Ye){Ye(Ve)})).then(ee,me)}xe((Le=Le.apply(Fe,_e||[])).next())})};class N{constructor(_e,te){this.range=_e,this.direction=te}}class T{constructor(_e,te,Le){this.hint=_e,this.anchor=te,this.provider=Le,this._isResolved=!1}with(_e){let te=new T(this.hint,_e.anchor,this.provider);return te._isResolved=this._isResolved,te._currentResolve=this._currentResolve,te}resolve(_e){return $(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,_e.isCancellationRequested?void 0:this.resolve(_e);this._isResolved||(this._currentResolve=this._doResolve(_e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(_e){var te,Le;return $(this,void 0,void 0,function*(){try{let ke=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,_e));this.hint.tooltip=(te=ke==null?void 0:ke.tooltip)!==null&&te!==void 0?te:this.hint.tooltip,this.hint.label=(Le=ke==null?void 0:ke.label)!==null&&Le!==void 0?Le:this.hint.label,this._isResolved=!0}catch(ke){(0,x.Cp)(ke),this._isResolved=!1}})}}class C{static create(_e,te,Le,ke){return $(this,void 0,void 0,function*(){let le=[],ee=_e.ordered(te).reverse().map(me=>Le.map(xe=>$(this,void 0,void 0,function*(){try{let We=yield me.provideInlayHints(te,xe,ke);We!=null&&We.hints.length&&le.push([We,me])}catch(We){(0,x.Cp)(We)}})));if(yield Promise.all(ee.flat()),ke.isCancellationRequested||te.isDisposed())throw new x.FU;return new C(Le,le,te)})}constructor(_e,te,Le){this._disposables=new v.SL,this.ranges=_e,this.provider=new Set;let ke=[];for(let[le,ee]of te){this._disposables.add(le),this.provider.add(ee);for(let me of le.hints){let xe=Le.validatePosition(me.position),We="before",Ve=C._getRangeAtPosition(Le,xe),Ye;Ve.getStartPosition().isBefore(xe)?(Ye=b.e.fromPositions(Ve.getStartPosition(),xe),We="after"):(Ye=b.e.fromPositions(xe,Ve.getEndPosition()),We="before"),ke.push(new T(me,new N(Ye,We),ee))}}this.items=ke.sort((le,ee)=>R.L.compare(le.hint.position,ee.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(_e,te){let Le=te.lineNumber,ke=_e.getWordAtPosition(te);if(ke)return new b.e(Le,ke.startColumn,Le,ke.endColumn);_e.tokenization.tokenizeIfCheap(Le);let le=_e.tokenization.getLineTokens(Le),ee=te.column-1,me=le.findTokenIndexAtOffset(ee),xe=le.getStartOffset(me),We=le.getEndOffset(me);return We-xe==1&&(xe===ee&&me>1?(xe=le.getStartOffset(me-1),We=le.getEndOffset(me-1)):We===ee&&me<le.getCount()-1&&(xe=le.getStartOffset(me+1),We=le.getEndOffset(me+1))),new b.e(Le,xe+1,Le,We+1)}}var W=t(8722),K=t(4565),j=t(5026),F=t(2065),H=t(9422),z=t(3910),J=t(7781),oe=function(Fe,_e){return function(te,Le){_e(te,Le,Fe)}},fe=function(Fe,_e,te,Le){return new(te||(te=Promise))(function(ke,le){function ee(We){try{xe(Le.next(We))}catch(Ve){le(Ve)}}function me(We){try{xe(Le.throw(We))}catch(Ve){le(Ve)}}function xe(We){var Ve;We.done?ke(We.value):(Ve=We.value,Ve instanceof te?Ve:new te(function(Ye){Ye(Ve)})).then(ee,me)}xe((Le=Le.apply(Fe,_e||[])).next())})};class q{constructor(){this._entries=new f.z6(50)}get(_e){let te=q._key(_e);return this._entries.get(te)}set(_e,te){let Le=q._key(_e);this._entries.set(Le,te)}static _key(_e){return`${_e.uri.toString()}/${_e.getVersionId()}`}}let p=(0,F.yh)("IInlayHintsCache");(0,j.z)(p,q,1);class re{constructor(_e,te){this.item=_e,this.index=te}get part(){let _e=this.item.hint.label;return typeof _e=="string"?{label:_e}:_e[this.index]}}class ne{constructor(_e,te){this.part=_e,this.hasTriggerModifier=te}}let ie=class rl{static get(_e){var te;return(te=_e.getContribution(rl.ID))!==null&&te!==void 0?te:void 0}constructor(_e,te,Le,ke,le,ee,me){this._editor=_e,this._languageFeaturesService=te,this._inlayHintsCache=ke,this._commandService=le,this._notificationService=ee,this._instaService=me,this._disposables=new v.SL,this._sessionDisposables=new v.SL,this._decorationsMetadata=new Map,this._ruleFactory=new h.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=Le.for(te.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(te.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(_e.onDidChangeModel(()=>this._update())),this._disposables.add(_e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(_e.onDidChangeConfiguration(xe=>{xe.hasChanged(135)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();let _e=this._editor.getOption(135);if(_e.enabled==="off")return;let te=this._editor.getModel();if(!te||!this._languageFeaturesService.inlayHintsProvider.has(te))return;let Le=this._inlayHintsCache.get(te),ke;Le&&this._updateHintsDecorators([te.getFullModelRange()],Le),this._sessionDisposables.add((0,v.OF)(()=>{te.isDisposed()||this._cacheHintsForFastRestore(te)}));let le=new Set,ee=new _.pY(()=>fe(this,void 0,void 0,function*(){let me=Date.now();ke==null||ke.dispose(!0),ke=new A.A;let xe=te.onWillDispose(()=>ke==null?void 0:ke.cancel());try{let We=ke.token,Ve=yield C.create(this._languageFeaturesService.inlayHintsProvider,te,this._getHintsRanges(),We);if(ee.delay=this._debounceInfo.update(te,Date.now()-me),We.isCancellationRequested)return void Ve.dispose();for(let Ye of Ve.provider)typeof Ye.onDidChangeInlayHints!="function"||le.has(Ye)||(le.add(Ye),this._sessionDisposables.add(Ye.onDidChangeInlayHints(()=>{ee.isScheduled()||ee.schedule()})));this._sessionDisposables.add(Ve),this._updateHintsDecorators(Ve.ranges,Ve.items),this._cacheHintsForFastRestore(te)}catch(We){(0,x.dL)(We)}finally{ke.dispose(),xe.dispose()}}),this._debounceInfo.get(te));if(this._sessionDisposables.add(ee),this._sessionDisposables.add((0,v.OF)(()=>ke==null?void 0:ke.dispose(!0))),ee.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(me=>{!me.scrollTopChanged&&ee.isScheduled()||ee.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(me=>{let xe=Math.max(ee.delay,1250);ee.schedule(xe)})),_e.enabled==="on")this._activeRenderMode=0;else{let me,xe;_e.enabled==="onUnlessPressed"?(me=0,xe=1):(me=1,xe=0),this._activeRenderMode=me,this._sessionDisposables.add(u._q.getInstance().event(We=>{if(!this._editor.hasModel())return;let Ve=We.altKey&&We.ctrlKey&&!We.shiftKey&&!We.metaKey?xe:me;if(Ve!==this._activeRenderMode){this._activeRenderMode=Ve;let Ye=this._editor.getModel(),tt=this._copyInlayHintsWithCurrentAnchor(Ye);this._updateHintsDecorators([Ye.getFullModelRange()],tt),ee.schedule(0)}}))}this._sessionDisposables.add(this._installDblClickGesture(()=>ee.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){let _e=new v.SL,te=_e.add(new k.yN(this._editor)),Le=new v.SL;return _e.add(Le),_e.add(te.onMouseMoveOrRelevantKeyDown(ke=>{let[le]=ke,ee=this._getInlayHintLabelPart(le),me=this._editor.getModel();if(!ee||!me)return void Le.clear();let xe=new A.A;Le.add((0,v.OF)(()=>xe.dispose(!0))),ee.item.resolve(xe.token),this._activeInlayHintPart=ee.part.command||ee.part.location?new ne(ee,le.hasTriggerModifier):void 0;let We=me.validatePosition(ee.item.hint.position).lineNumber,Ve=new b.e(We,1,We,me.getLineMaxColumn(We)),Ye=this._getInlineHintsForRange(Ve);this._updateHintsDecorators([Ve],Ye),Le.add((0,v.OF)(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([Ve],Ye)}))})),_e.add(te.onCancel(()=>Le.clear())),_e.add(te.onExecute(ke=>fe(this,void 0,void 0,function*(){let le=this._getInlayHintLabelPart(ke);if(le){let ee=le.part;ee.location?this._instaService.invokeFunction(W.K,ke,this._editor,ee.location):l.mY.is(ee.command)&&(yield this._invokeCommand(ee.command,le.item))}}))),_e}_getInlineHintsForRange(_e){let te=new Set;for(let Le of this._decorationsMetadata.values())_e.containsRange(Le.item.anchor.range)&&te.add(Le.item);return Array.from(te)}_installDblClickGesture(_e){return this._editor.onMouseUp(te=>fe(this,void 0,void 0,function*(){if(te.event.detail!==2)return;let Le=this._getInlayHintLabelPart(te);if(Le&&(te.event.preventDefault(),yield Le.item.resolve(A.T.None),(0,I.Of)(Le.item.hint.textEdits))){let ke=Le.item.hint.textEdits.map(le=>c.h.replace(b.e.lift(le.range),le.text));this._editor.executeEdits("inlayHint.default",ke),_e()}}))}_installContextMenu(){return this._editor.onContextMenu(_e=>fe(this,void 0,void 0,function*(){if(!(_e.event.target instanceof HTMLElement))return;let te=this._getInlayHintLabelPart(_e);te&&(yield this._instaService.invokeFunction(W.u,this._editor,_e.event.target,te))}))}_getInlayHintLabelPart(_e){var te;if(_e.target.type!==6)return;let Le=(te=_e.target.detail.injectedText)===null||te===void 0?void 0:te.options;return Le instanceof w.HS&&(Le==null?void 0:Le.attachedData)instanceof re?Le.attachedData:void 0}_invokeCommand(_e,te){var Le;return fe(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(_e.id,...(Le=_e.arguments)!==null&&Le!==void 0?Le:[])}catch(ke){this._notificationService.notify({severity:H.zb.Error,source:te.provider.displayName,message:ke})}})}_cacheHintsForFastRestore(_e){let te=this._copyInlayHintsWithCurrentAnchor(_e);this._inlayHintsCache.set(_e,te)}_copyInlayHintsWithCurrentAnchor(_e){let te=new Map;for(let[Le,ke]of this._decorationsMetadata){if(te.has(ke.item))continue;let le=_e.getDecorationRange(Le);if(le){let ee=new N(le,ke.item.anchor.direction),me=ke.item.with({anchor:ee});te.set(ke.item,me)}}return Array.from(te.values())}_getHintsRanges(){let _e=this._editor.getModel(),te=this._editor.getVisibleRangesPlusViewportAboveBelow(),Le=[];for(let ke of te.sort(b.e.compareRangesUsingStarts)){let le=_e.validateRange(new b.e(ke.startLineNumber-30,ke.startColumn,ke.endLineNumber+30,ke.endColumn));Le.length!==0&&b.e.areIntersectingOrTouching(Le[Le.length-1],le)?Le[Le.length-1]=b.e.plusRange(Le[Le.length-1],le):Le.push(le)}return Le}_updateHintsDecorators(_e,te){var Le,ke;let le=[],ee=(ht,xt,Qt,At,mi)=>{let Lt={content:Qt,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:xt.className,cursorStops:At,attachedData:mi};le.push({item:ht,classNameRef:xt,decoration:{range:ht.anchor.range,options:{description:"InlayHint",showIfCollapsed:ht.anchor.range.isEmpty(),collapseOnReplaceEdit:!ht.anchor.range.isEmpty(),stickiness:0,[ht.anchor.direction]:this._activeRenderMode===0?Lt:void 0}}})},me=(ht,xt)=>{let Qt=this._ruleFactory.createClassNameRef({width:(xe/3|0)+"px",display:"inline-block"});ee(ht,Qt,"\u200A",xt?a.RM.Right:a.RM.None)},{fontSize:xe,fontFamily:We,padding:Ve,isUniform:Ye}=this._getLayoutInfo(),tt="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(tt,We);for(let ht of te){ht.hint.paddingLeft&&me(ht,!1);let xt=typeof ht.hint.label=="string"?[{label:ht.hint.label}]:ht.hint.label;for(let Qt=0;Qt<xt.length;Qt++){let At=xt[Qt],mi=Qt===0,Lt=Qt===xt.length-1,ct={fontSize:`${xe}px`,fontFamily:`var(${tt}), ${i.hL.fontFamily}`,verticalAlign:Ye?"baseline":"middle"};(0,I.Of)(ht.hint.textEdits)&&(ct.cursor="default"),this._fillInColors(ct,ht.hint),(At.command||At.location)&&((Le=this._activeInlayHintPart)===null||Le===void 0?void 0:Le.part.item)===ht&&this._activeInlayHintPart.part.index===Qt&&(ct.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(ct.color=(0,J.EN)(z._Yy),ct.cursor="pointer")),Ve&&(mi&&Lt?(ct.padding=`1px ${0|Math.max(1,xe/4)}px`,ct.borderRadius=(xe/4|0)+"px"):mi?(ct.padding=`1px 0 1px ${0|Math.max(1,xe/4)}px`,ct.borderRadius=`${xe/4|0}px 0 0 ${xe/4|0}px`):Lt?(ct.padding=`1px ${0|Math.max(1,xe/4)}px 1px 0`,ct.borderRadius=`0 ${xe/4|0}px ${xe/4|0}px 0`):ct.padding="1px 0 1px 0"),ee(ht,this._ruleFactory.createClassNameRef(ct),At.label.replace(/[ \t]/g,"\xA0"),Lt&&!ht.hint.paddingRight?a.RM.Right:a.RM.None,new re(ht,Qt))}if(ht.hint.paddingRight&&me(ht,!0),le.length>rl._MAX_DECORATORS)break}let Qe=[];for(let ht of _e)for(let{id:xt}of(ke=this._editor.getDecorationsInRange(ht))!==null&&ke!==void 0?ke:[]){let Qt=this._decorationsMetadata.get(xt);Qt&&(Qe.push(xt),Qt.classNameRef.dispose(),this._decorationsMetadata.delete(xt))}let bt=r.Z.capture(this._editor);this._editor.changeDecorations(ht=>{let xt=ht.deltaDecorations(Qe,le.map(Qt=>Qt.decoration));for(let Qt=0;Qt<xt.length;Qt++){let At=le[Qt];this._decorationsMetadata.set(xt[Qt],At)}}),bt.restore(this._editor)}_fillInColors(_e,te){te.kind===l.gl.Parameter?(_e.backgroundColor=(0,J.EN)(z.phM),_e.color=(0,J.EN)(z.HCL)):te.kind===l.gl.Type?(_e.backgroundColor=(0,J.EN)(z.bKB),_e.color=(0,J.EN)(z.hX8)):(_e.backgroundColor=(0,J.EN)(z.PpC),_e.color=(0,J.EN)(z.VVv))}_getLayoutInfo(){let _e=this._editor.getOption(135),te=_e.padding,Le=this._editor.getOption(50),ke=this._editor.getOption(47),le=_e.fontSize;(!le||le<5||le>Le)&&(le=Le);let ee=_e.fontFamily||ke;return{fontSize:le,fontFamily:ee,padding:te,isUniform:!te&&ee===ke&&le===Le}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(let _e of this._decorationsMetadata.values())_e.classNameRef.dispose();this._decorationsMetadata.clear()}};ie.ID="editor.contrib.InlayHints",ie._MAX_DECORATORS=1500,ie=function(Fe,_e,te,Le){var ke,le=arguments.length,ee=le<3?_e:Le===null?Le=Object.getOwnPropertyDescriptor(_e,te):Le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(Fe,_e,te,Le);else for(var me=Fe.length-1;me>=0;me--)(ke=Fe[me])&&(ee=(le<3?ke(ee):le>3?ke(_e,te,ee):ke(_e,te))||ee);return le>3&&ee&&Object.defineProperty(_e,te,ee),ee}([oe(1,D.p),oe(2,E.A),oe(3,p),oe(4,K.H),oe(5,H.lT),oe(6,F.TG)],ie),K.P.registerCommand("_executeInlayHintProvider",(Fe,..._e)=>fe(void 0,void 0,void 0,function*(){let[te,Le]=_e;(0,d.p_)(o.o.isUri(te)),(0,d.p_)(b.e.isIRange(Le));let{inlayHintsProvider:ke}=Fe.get(D.p),le=yield Fe.get(L.S).createModelReference(te);try{let ee=yield C.create(ke,le.object.textEditorModel,[b.e.lift(Le)],A.T.None),me=ee.items.map(xe=>xe.hint);return setTimeout(()=>ee.dispose(),0),me}finally{le.dispose()}}));var se=t(9365),ce=t(2042),be=t(1095),de=t(2374),U=t(3108),ue=t(988),ve=t(3580),X=t(1432),ye=function(Fe,_e){return function(te,Le){_e(te,Le,Fe)}},Ce=function(Fe,_e,te,Le){return new(te||(te=Promise))(function(ke,le){function ee(We){try{xe(Le.next(We))}catch(Ve){le(Ve)}}function me(We){try{xe(Le.throw(We))}catch(Ve){le(Ve)}}function xe(We){var Ve;We.done?ke(We.value):(Ve=We.value,Ve instanceof te?Ve:new te(function(Ye){Ye(Ve)})).then(ee,me)}xe((Le=Le.apply(Fe,_e||[])).next())})};class Ee extends B.YM{constructor(_e,te,Le,ke){super(10,te,_e.item.anchor.range,Le,ke,!0),this.part=_e}}let Ae=class extends de.D5{constructor(Fe,_e,te,Le,ke,le){super(Fe,_e,te,Le,le),this._resolverService=ke,this.hoverOrdinal=6}suggestHoverAnchor(Fe){var _e;if(!ie.get(this._editor)||Fe.target.type!==6)return null;let te=(_e=Fe.target.detail.injectedText)===null||_e===void 0?void 0:_e.options;return te instanceof w.HS&&te.attachedData instanceof re?new Ee(te.attachedData,this,Fe.event.posx,Fe.event.posy):null}computeSync(){return[]}computeAsync(Fe,_e,te){return Fe instanceof Ee?new _.Aq(Le=>Ce(this,void 0,void 0,function*(){var ke,le,ee,me;let{part:xe}=Fe;if(yield xe.item.resolve(te),te.isCancellationRequested)return;let We,Ve;if(typeof xe.item.hint.tooltip=="string"?We=new se.W5().appendText(xe.item.hint.tooltip):xe.item.hint.tooltip&&(We=xe.item.hint.tooltip),We&&Le.emitOne(new de.hU(this,Fe.range,[We],!1,0)),(0,I.Of)(xe.item.hint.textEdits)&&Le.emitOne(new de.hU(this,Fe.range,[new se.W5().appendText((0,ve.NC)("hint.dbl","Double-click to insert"))],!1,10001)),typeof xe.part.tooltip=="string"?Ve=new se.W5().appendText(xe.part.tooltip):xe.part.tooltip&&(Ve=xe.part.tooltip),Ve&&Le.emitOne(new de.hU(this,Fe.range,[Ve],!1,1)),xe.part.location||xe.part.command){let xt,Qt=this._editor.getOption(75)==="altKey"?X.dz?(0,ve.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,ve.NC)("links.navigate.kb.meta","ctrl + click"):X.dz?(0,ve.NC)("links.navigate.kb.alt.mac","option + click"):(0,ve.NC)("links.navigate.kb.alt","alt + click");xe.part.location&&xe.part.command?xt=new se.W5().appendText((0,ve.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",Qt)):xe.part.location?xt=new se.W5().appendText((0,ve.NC)("hint.def","Go to Definition ({0})",Qt)):xe.part.command&&(xt=new se.W5(`[${(0,ve.NC)("hint.cmd","Execute Command")}](${Ye=xe.part.command,o.o.from({scheme:O.lg.command,path:Ye.id,query:Ye.arguments&&encodeURIComponent(JSON.stringify(Ye.arguments))}).toString()} "${xe.part.command.title}") (${Qt})`,{isTrusted:!0})),xt&&Le.emitOne(new de.hU(this,Fe.range,[xt],!1,1e4))}var Ye;let tt=yield this._resolveInlayHintLabelPartHover(xe,te);try{for(var Qe,bt=!0,ht=function(xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qt,At=xt[Symbol.asyncIterator];return At?At.call(xt):(xt=typeof __values=="function"?__values(xt):xt[Symbol.iterator](),Qt={},mi("next"),mi("throw"),mi("return"),Qt[Symbol.asyncIterator]=function(){return this},Qt);function mi(Lt){Qt[Lt]=xt[Lt]&&function(ct){return new Promise(function(Kt,pi){(function(li,Wi,Vi,Xi){Promise.resolve(Xi).then(function(en){li({value:en,done:Vi})},Wi)})(Kt,pi,(ct=xt[Lt](ct)).done,ct.value)})}}}(tt);!(ke=(Qe=yield ht.next()).done);){me=Qe.value,bt=!1;try{let xt=me;Le.emitOne(xt)}finally{bt=!0}}}catch(xt){le={error:xt}}finally{try{bt||ke||!(ee=ht.return)||(yield ee.call(ht))}finally{if(le)throw le.error}}})):_.Aq.EMPTY}_resolveInlayHintLabelPartHover(Fe,_e){return Ce(this,void 0,void 0,function*(){if(!Fe.part.location)return _.Aq.EMPTY;let{uri:te,range:Le}=Fe.part.location,ke=yield this._resolverService.createModelReference(te);try{let le=ke.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(le)?(0,be.R8)(this._languageFeaturesService.hoverProvider,le,new R.L(Le.startLineNumber,Le.startColumn),_e).filter(ee=>!(0,se.CP)(ee.hover.contents)).map(ee=>new de.hU(this,Fe.item.anchor.range,ee.hover.contents,!1,2+ee.ordinal)):_.Aq.EMPTY}finally{ke.dispose()}})}};Ae=function(Fe,_e,te,Le){var ke,le=arguments.length,ee=le<3?_e:Le===null?Le=Object.getOwnPropertyDescriptor(_e,te):Le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(Fe,_e,te,Le);else for(var me=Fe.length-1;me>=0;me--)(ke=Fe[me])&&(ee=(le<3?ke(ee):le>3?ke(_e,te,ee):ke(_e,te))||ee);return le>3&&ee&&Object.defineProperty(_e,te,ee),ee}([ye(1,ce.O),ye(2,ue.v4),ye(3,U.Ui),ye(4,L.S),ye(5,D.p)],Ae),(0,m._K)(ie.ID,ie,1),B.Ae.register(Ae)},8722:(ut,Ie,t)=>{"use strict";t.d(Ie,{K:()=>l,u:()=>b});var m=t(5321),B=t(4741),u=t(1050),I=t(8e3),_=t(4314),A=t(8216),x=t(628),v=t(2049),f=t(4144),d=t(4565),o=t(3983),h=t(5606),r=t(2065),i=t(9422),c=function(a,w,E,D){return new(E||(E=Promise))(function(L,k){function R(N){try{$(D.next(N))}catch(T){k(T)}}function O(N){try{$(D.throw(N))}catch(T){k(T)}}function $(N){var T;N.done?L(N.value):(T=N.value,T instanceof E?T:new E(function(C){C(T)})).then(R,O)}$((D=D.apply(a,w||[])).next())})};function b(a,w,E,D){var L;return c(this,void 0,void 0,function*(){let k=a.get(A.S),R=a.get(h.i),O=a.get(d.H),$=a.get(r.TG),N=a.get(i.lT);if(yield D.item.resolve(u.T.None),!D.part.location)return;let T=D.part.location,C=[],W=new Set(f.BH.getMenuItems(f.eH.EditorContext).map(j=>(0,f.vr)(j)?j.command.id:(0,I.R)()));for(let j of x.SymbolNavigationAction.all())W.has(j.desc.id)&&C.push(new B.aU(j.desc.id,f.U8.label(j.desc,{renderShortTitle:!0}),void 0,!0,()=>c(this,void 0,void 0,function*(){let F=yield k.createModelReference(T.uri);try{let H=new x.SymbolNavigationAnchor(F.object.textEditorModel,_.e.getStartPosition(T.range)),z=D.item.anchor.range;yield $.invokeFunction(j.runEditorCommand.bind(j),w,H,z)}finally{F.dispose()}})));if(D.part.command){let{command:j}=D.part;C.push(new B.Z0),C.push(new B.aU(j.id,j.title,void 0,!0,()=>c(this,void 0,void 0,function*(){var F;try{yield O.executeCommand(j.id,...(F=j.arguments)!==null&&F!==void 0?F:[])}catch(H){N.notify({severity:i.zb.Error,source:D.item.provider.displayName,message:H})}})))}let K=w.getOption(122);R.showContextMenu({domForShadowRoot:K&&(L=w.getDomNode())!==null&&L!==void 0?L:void 0,getAnchor:()=>{let j=m.i(E);return{x:j.left,y:j.top+j.height+8}},getActions:()=>C,onHide:()=>{w.focus()},autoSelectFirstItem:!0})})}function l(a,w,E,D){return c(this,void 0,void 0,function*(){let L=a.get(A.S),k=yield L.createModelReference(D.uri);yield E.invokeWithinContext(R=>c(this,void 0,void 0,function*(){let O=w.hasSideBySideModifier,$=R.get(o.i6),N=v.Jy.inPeekEditor.getValue($),T=!O&&E.getOption(84)&&!N;return new x.DefinitionAction({openToSide:O,openInPeek:T,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(R,new x.SymbolNavigationAnchor(k.object.textEditorModel,_.e.getStartPosition(D.range)),_.e.lift(D.range))})),k.dispose()})}},6020:(ut,Ie,t)=>{"use strict";t.d(Ie,{Np:()=>B,OW:()=>u,Ou:()=>m});let m="editor.action.inlineSuggest.commit",B="editor.action.inlineSuggest.showPrevious",u="editor.action.inlineSuggest.showNext"},8573:(ut,Ie,t)=>{"use strict";t.d(Ie,{f:()=>x});var m=t(2495),B=t(7295),u=t(7988),I=t(3983),_=t(5976),A=t(3580);class x extends _.JT{constructor(f,d){super(),this.contextKeyService=f,this.model=d,this.inlineCompletionVisible=x.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=x.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=x.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=x.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,m.EH)("update context key: inlineCompletionVisible, suppressSuggestions",o=>{let h=this.model.read(o),r=h==null?void 0:h.selectedInlineCompletion.read(o),i=h==null?void 0:h.ghostText.read(o),c=h==null?void 0:h.selectedSuggestItem.read(o);this.inlineCompletionVisible.set(c===void 0&&i!==void 0),i&&r&&this.suppressSuggestions.set(r.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register((0,m.EH)("update context key: inlineCompletionSuggestsIndentation, inlineCompletionSuggestsIndentationLessThanTabSize",o=>{let h=this.model.read(o),r=!1,i=!0,c=h==null?void 0:h.ghostText.read(o);if(h!=null&&h.selectedSuggestItem&&c&&c.parts.length>0){let{column:b,lines:l}=c.parts[0],a=l[0];if(b<=h.textModel.getLineIndentColumn(c.lineNumber)){let w=(0,B.LC)(a);w===-1&&(w=a.length-1),r=w>0;let E=h.textModel.getOptions().tabSize;i=u.i.visibleColumnFromColumn(a,w+1,E)<E}}this.inlineCompletionSuggestsIndentation.set(r),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}))}}x.inlineSuggestionVisible=new I.uy("inlineSuggestionVisible",!1,(0,A.NC)("inlineSuggestionVisible","Whether an inline suggestion is visible")),x.inlineSuggestionHasIndentation=new I.uy("inlineSuggestionHasIndentation",!1,(0,A.NC)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),x.inlineSuggestionHasIndentationLessThanTabSize=new I.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,A.NC)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),x.alwaysShowInlineSuggestionToolbar=new I.uy("alwaysShowInlineSuggestionToolbar",!1,(0,A.NC)("alwaysShowInlineSuggestionToolbar","Whether the inline suggestion toolbar should always be visible")),x.suppressSuggestions=new I.uy("inlineSuggestionSuppressSuggestions",void 0,(0,A.NC)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"))},2306:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(6520),u=t(2495),I=t(9102),_=t(6020),A=t(8573),x=t(5152),v=t(4669),f=t(5976),d=t(9869),o=t(9317),h=t(187),r=t(8191),i=t(1922),c=t(7295),b=t(2136),l=t(4141),a=t(4314),w=t(72),E=t(2042),D=t(4973),L=t(7378),k=t(2550),R=t(1557),O=t(7301);class ${constructor(Pe){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let Xe=0;Xe<Pe.length;Xe++)Pe.charAt(Xe)===`
`&&this.lineStartOffsetByLineIdx.push(Xe+1)}getOffset(Pe){return this.lineStartOffsetByLineIdx[Pe.lineNumber-1]+Pe.column-1}}let N=[];class T{constructor(Pe,Xe){if(this.startColumn=Pe,this.endColumnExclusive=Xe,Pe>Xe)throw new O.he(`startColumn ${Pe} cannot be after endColumnExclusive ${Xe}`)}toRange(Pe){return new a.e(Pe,this.startColumn,Pe,this.endColumnExclusive)}}function C(Ue,Pe){return new h.L(Ue.lineNumber+Pe.lineNumber-1,Pe.lineNumber===1?Ue.column+Pe.column-1:Pe.column)}function W(Ue){let Pe=1,Xe=1;for(let $e of Ue)$e===`
`?(Pe++,Xe=1):Xe++;return new h.L(Pe,Xe)}class K{constructor(Pe,Xe){this.lineNumber=Pe,this.parts=Xe}renderForScreenReader(Pe){if(this.parts.length===0)return"";let Xe=this.parts[this.parts.length-1];return function($e,ot){let Tt=new $($e),Ot=ot.map(ti=>{let zt=a.e.lift(ti.range);return{startOffset:Tt.getOffset(zt.getStartPosition()),endOffset:Tt.getOffset(zt.getEndPosition()),text:ti.text}});Ot.sort((ti,zt)=>zt.startOffset-ti.startOffset);for(let ti of Ot)$e=$e.substring(0,ti.startOffset)+ti.text+$e.substring(ti.endOffset);return $e}(Pe.substr(0,Xe.column-1),this.parts.map($e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:$e.column,endColumn:$e.column},text:$e.lines.join(`
`)}))).substring(this.parts[0].column-1)}get lineCount(){return 1+this.parts.reduce((Pe,Xe)=>Pe+Xe.lines.length-1,0)}}class j{constructor(Pe,Xe,$e){this.column=Pe,this.lines=Xe,this.preview=$e}}class F{constructor(Pe,Xe,$e,ot=0){this.lineNumber=Pe,this.columnRange=Xe,this.newLines=$e,this.additionalReservedLineCount=ot,this.parts=[new j(this.columnRange.endColumnExclusive,this.newLines,!1)]}}var H;let z=class extends f.JT{constructor(Ue,Pe,Xe){super(),this.editor=Ue,this.model=Pe,this.languageService=Xe,this.isDisposed=(0,u.uh)("isDisposed",!1),this.currentTextModel=(0,u.rD)(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,u.nK)("uiState",$e=>{if(this.isDisposed.read($e))return;let ot=this.currentTextModel.read($e);if(ot!==this.model.targetTextModel.read($e))return;let Tt=this.model.ghostText.read($e);if(!Tt)return;let Ot=Tt instanceof F?Tt.columnRange:void 0,ti=[],zt=[];function Jt(_i,Li){if(zt.length>0){let ri=zt[zt.length-1];Li&&ri.decorations.push(new k.Kp(ri.content.length+1,ri.content.length+1+_i[0].length,Li,0)),ri.content+=_i[0],_i=_i.slice(1)}for(let ri of _i)zt.push({content:ri,decorations:Li?[new k.Kp(1,ri.length+1,Li,0)]:[]})}let Gt=ot.getLineContent(Tt.lineNumber),$t,si=0;for(let _i of Tt.parts){let Li=_i.lines;$t===void 0?(ti.push({column:_i.column,text:Li[0],preview:_i.preview}),Li=Li.slice(1)):Jt([Gt.substring(si,_i.column-1)],void 0),Li.length>0&&(Jt(Li,"ghost-text"),$t===void 0&&_i.column<=Gt.length&&($t=_i.column)),si=_i.column-1}$t!==void 0&&Jt([Gt.substring(si)],void 0);let ai=$t!==void 0?new T($t,Gt.length+1):void 0;return{replacedRange:Ot,inlineTexts:ti,additionalLines:zt,hiddenRange:ai,lineNumber:Tt.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read($e),targetTextModel:ot}}),this.decorations=(0,u.nK)("decorations",$e=>{let ot=this.uiState.read($e);if(!ot)return[];let Tt=[];ot.replacedRange&&Tt.push({range:ot.replacedRange.toRange(ot.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),ot.hiddenRange&&Tt.push({range:ot.hiddenRange.toRange(ot.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(let Ot of ot.inlineTexts)Tt.push({range:a.e.fromPositions(new h.L(ot.lineNumber,Ot.column)),options:{description:"ghost-text",after:{content:Ot.text,inlineClassName:Ot.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:D.RM.Left},showIfCollapsed:!0}});return Tt}),this.additionalLinesWidget=this._register(new fe(this.editor,this.languageService.languageIdCodec,(0,u.nK)("lines",$e=>{let ot=this.uiState.read($e);return ot?{lineNumber:ot.lineNumber,additionalLines:ot.additionalLines,minReservedLineCount:ot.additionalReservedLineCount,targetTextModel:ot.targetTextModel}:void 0}))),this._register((0,f.OF)(()=>{this.isDisposed.set(!0,void 0)})),this._register(function($e,ot){let Tt=new f.SL,Ot=$e.createDecorationsCollection();return Tt.add((0,u.EH)(`Apply decorations from ${ot.debugName}`,ti=>{let zt=ot.read(ti);Ot.set(zt)})),Tt.add({dispose:()=>{Ot.clear()}}),Tt}(this.editor,this.decorations))}ownsViewZone(Ue){return this.additionalLinesWidget.viewZoneId===Ue}};var J,oe;z=function(Ue,Pe,Xe,$e){var ot,Tt=arguments.length,Ot=Tt<3?Pe:$e===null?$e=Object.getOwnPropertyDescriptor(Pe,Xe):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(Ue,Pe,Xe,$e);else for(var ti=Ue.length-1;ti>=0;ti--)(ot=Ue[ti])&&(Ot=(Tt<3?ot(Ot):Tt>3?ot(Pe,Xe,Ot):ot(Pe,Xe))||Ot);return Tt>3&&Ot&&Object.defineProperty(Pe,Xe,Ot),Ot}([(J=2,oe=E.O,function(Ue,Pe){oe(Ue,Pe,J)})],z);class fe extends f.JT{get viewZoneId(){return this._viewZoneId}constructor(Pe,Xe,$e){super(),this.editor=Pe,this.languageIdCodec=Xe,this.lines=$e,this._viewZoneId=void 0,this.editorOptionsChanged=(0,u.aq)("editorOptionChanged",v.ju.filter(this.editor.onDidChangeConfiguration,ot=>ot.hasChanged(31)||ot.hasChanged(112)||ot.hasChanged(94)||ot.hasChanged(89)||ot.hasChanged(49)||ot.hasChanged(48)||ot.hasChanged(64))),this._register((0,u.EH)("update view zone",ot=>{let Tt=this.lines.read(ot);this.editorOptionsChanged.read(ot),Tt?this.updateLines(Tt.lineNumber,Tt.additionalLines,Tt.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(Pe=>{this._viewZoneId&&(Pe.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(Pe,Xe,$e){let ot=this.editor.getModel();if(!ot)return;let{tabSize:Tt}=ot.getOptions();this.editor.changeViewZones(Ot=>{this._viewZoneId&&(Ot.removeZone(this._viewZoneId),this._viewZoneId=void 0);let ti=Math.max(Xe.length,$e);if(ti>0){let zt=document.createElement("div");(function(Jt,Gt,$t,si,ai){let _i=si.get(31),Li=si.get(112),ri=si.get(89),qt=si.get(49),je=si.get(48),mt=si.get(64),wt=new w.HT(1e4);wt.appendString('<div class="suggest-preview-text">');for(let ei=0,yi=$t.length;ei<yi;ei++){let ki=$t[ei],Ti=ki.content;wt.appendString('<div class="view-line'),wt.appendString('" style="top:'),wt.appendString(String(ei*mt)),wt.appendString('px;width:1000000px;">');let Pi=c.$i(Ti),Ni=c.Ut(Ti),gn=L.A.createEmpty(Ti,ai);(0,R.d1)(new R.IJ(je.isMonospace&&!_i,je.canUseHalfwidthRightwardsArrow,Ti,!1,Pi,Ni,0,gn,ki.decorations,Gt,0,je.spaceWidth,je.middotWidth,je.wsmiddotWidth,Li,"none",ri,qt!==l.n0.OFF,null),wt),wt.appendString("</div>")}wt.appendString("</div>"),(0,b.N)(Jt,je);let Rt=wt.build(),oi=q?q.createHTML(Rt):Rt;Jt.innerHTML=oi})(zt,Tt,Xe,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=Ot.addZone({afterLineNumber:Pe,heightInLines:ti,domNode:zt,afterColumnAffinity:1})}})}}let q=(H=window.trustedTypes)===null||H===void 0?void 0:H.createPolicy("editorGhostText",{createHTML:Ue=>Ue});var p=t(7298),re=t(9488),ne=t(8401),ie=t(9386),se=t(6887),ce=t(1381),be=t(1050),de=t(5392),U=t(2484);class ue{constructor(Pe,Xe){this.range=Pe,this.text=Xe}removeCommonPrefix(Pe,Xe){let $e=Xe?this.range.intersectRanges(Xe):this.range;if(!$e)return this;let ot=Pe.getValueInRange($e,1),Tt=(0,c.Mh)(ot,this.text),Ot=C(this.range.getStartPosition(),W(ot.substring(0,Tt))),ti=this.text.substring(Tt),zt=a.e.fromPositions(Ot,this.range.getEndPosition());return new ue(zt,ti)}augments(Pe){return this.text.startsWith(Pe.text)&&(Xe=this.range,($e=Pe.range).getStartPosition().equals(Xe.getStartPosition())&&$e.getEndPosition().isBeforeOrEqual(Xe.getEndPosition()));var Xe,$e}computeGhostText(Pe,Xe,$e,ot=0){let Tt=this.removeCommonPrefix(Pe);if(Tt.range.endLineNumber!==Tt.range.startLineNumber)return;let Ot=Pe.getLineContent(Tt.range.startLineNumber),ti=(0,c.V8)(Ot).length;if(Tt.range.startColumn-1<=ti){let ai=(0,c.V8)(Tt.text).length,_i=Ot.substring(Tt.range.startColumn-1,ti),Li=a.e.fromPositions(Tt.range.getStartPosition().delta(0,_i.length),Tt.range.getEndPosition()),ri=Tt.text.startsWith(_i)?Tt.text.substring(_i.length):Tt.text.substring(ai);Tt=new ue(Li,ri)}let zt=Pe.getValueInRange(Tt.range),Jt=function(ai,_i){if((ve==null?void 0:ve.originalValue)===ai&&(ve==null?void 0:ve.newValue)===_i)return ve==null?void 0:ve.changes;{let Li=ye(ai,_i,!0);if(Li){let ri=X(Li);if(ri>0){let qt=ye(ai,_i,!1);qt&&X(qt)<ri&&(Li=qt)}}return ve={originalValue:ai,newValue:_i,changes:Li},Li}}(zt,Tt.text);if(!Jt)return;let Gt=Tt.range.startLineNumber,$t=new Array;if(Xe==="prefix"){let ai=Jt.filter(_i=>_i.originalLength===0);if(ai.length>1||ai.length===1&&ai[0].originalStart!==zt.length)return}let si=Tt.text.length-ot;for(let ai of Jt){let _i=Tt.range.startColumn+ai.originalStart+ai.originalLength;if(Xe==="subwordSmart"&&$e&&$e.lineNumber===Tt.range.startLineNumber&&_i<$e.column||ai.originalLength>0)return;if(ai.modifiedLength===0)continue;let Li=ai.modifiedStart+ai.modifiedLength,ri=Math.max(ai.modifiedStart,Math.min(Li,si)),qt=Tt.text.substring(ai.modifiedStart,ri),je=Tt.text.substring(ri,Math.max(ai.modifiedStart,Li));if(qt.length>0){let mt=(0,c.uq)(qt);$t.push(new j(_i,mt,!1))}if(je.length>0){let mt=(0,c.uq)(je);$t.push(new j(_i,mt,!0))}}return new K(Gt,$t)}}let ve;function X(Ue){let Pe=0;for(let Xe of Ue)Pe+=Xe.originalLength;return Pe}function ye(Ue,Pe,Xe){if(Ue.length>5e3||Pe.length>5e3)return;function $e(Jt){let Gt=0;for(let $t=0,si=Jt.length;$t<si;$t++){let ai=Jt.charCodeAt($t);ai>Gt&&(Gt=ai)}return Gt}let ot=Math.max($e(Ue),$e(Pe));function Tt(Jt){if(Jt<0)throw new Error("unexpected");return ot+Jt+1}function Ot(Jt){let Gt=0,$t=0,si=new Int32Array(Jt.length);for(let ai=0,_i=Jt.length;ai<_i;ai++)if(Xe&&Jt[ai]==="("){let Li=100*$t+Gt;si[ai]=Tt(2*Li),Gt++}else if(Xe&&Jt[ai]===")"){Gt=Math.max(Gt-1,0);let Li=100*$t+Gt;si[ai]=Tt(2*Li+1),Gt===0&&$t++}else si[ai]=Jt.charCodeAt(ai);return si}let ti=Ot(Ue),zt=Ot(Pe);return new U.Hs({getElements:()=>ti},{getElements:()=>zt}).ComputeDiff(!1).changes}var Ce=t(5146),Ee=t(5382),Ae=t(5035),Fe=t(3883),_e=t(1761),te=t(6735);class Le{constructor(Pe){this.lines=Pe,this.tokenization={getLineTokens:Xe=>this.lines[Xe-1]}}getLineCount(){return this.lines.length}getLineLength(Pe){return this.lines[Pe-1].getLineContent().length}}var ke=t(5084),le=function(Ue,Pe,Xe,$e){return new(Xe||(Xe=Promise))(function(ot,Tt){function Ot(Jt){try{zt($e.next(Jt))}catch(Gt){Tt(Gt)}}function ti(Jt){try{zt($e.throw(Jt))}catch(Gt){Tt(Gt)}}function zt(Jt){var Gt;Jt.done?ot(Jt.value):(Gt=Jt.value,Gt instanceof Xe?Gt:new Xe(function($t){$t(Gt)})).then(Ot,ti)}zt(($e=$e.apply(Ue,Pe||[])).next())})};class ee{constructor(Pe,Xe,$e){this.completions=Pe,this.hashs=Xe,this.providerResults=$e}has(Pe){return this.hashs.has(Pe.hash())}dispose(){for(let Pe of this.providerResults)Pe.removeRef()}}class me{constructor(Pe,Xe){this.inlineCompletions=Pe,this.provider=Xe,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class xe{static from(Pe,Xe,$e,ot,Tt){let Ot,ti,zt=Pe.range?a.e.lift(Pe.range):$e;if(typeof Pe.insertText=="string"){if(Ot=Pe.insertText,Tt&&Pe.completeBracketPairs){Ot=We(Ot,zt.getStartPosition(),ot,Tt);let Jt=Ot.length-Pe.insertText.length;Jt!==0&&(zt=new a.e(zt.startLineNumber,zt.startColumn,zt.endLineNumber,zt.endColumn+Jt))}ti=void 0}else if("snippet"in Pe.insertText){let Jt=Pe.insertText.snippet.length;if(Tt&&Pe.completeBracketPairs){Pe.insertText.snippet=We(Pe.insertText.snippet,zt.getStartPosition(),ot,Tt);let $t=Pe.insertText.snippet.length-Jt;$t!==0&&(zt=new a.e(zt.startLineNumber,zt.startColumn,zt.endLineNumber,zt.endColumn+$t))}let Gt=new ke.Yj().parse(Pe.insertText.snippet);Gt.children.length===1&&Gt.children[0]instanceof ke.xv?(Ot=Gt.children[0].value,ti=void 0):(Ot=Gt.toString(),ti={snippet:Pe.insertText.snippet,range:zt})}else(0,Ce.vE)(Pe.insertText);return new xe(Ot,Pe.command,zt,Ot,ti,Pe.additionalTextEdits||N,Pe,Xe)}constructor(Pe,Xe,$e,ot,Tt,Ot,ti,zt){this.filterText=Pe,this.command=Xe,this.range=$e,this.insertText=ot,this.snippetInfo=Tt,this.additionalTextEdits=Ot,this.sourceInlineCompletion=ti,this.source=zt,ot=(Pe=Pe.replace(/\r\n|\r/g,`
`)).replace(/\r\n|\r/g,`
`)}withRange(Pe){return new xe(this.filterText,this.command,Pe,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function We(Ue,Pe,Xe,$e){let ot=Xe.getLineContent(Pe.lineNumber).substring(0,Pe.column-1)+Ue,Tt=Xe.tokenization.tokenizeLineWithEdit(Pe,ot.length-(Pe.column-1),Ue),Ot=Tt==null?void 0:Tt.sliceAndInflate(Pe.column-1,ot.length,0);return Ot?function(zt,Jt){let Gt=new _e.FE,$t=new Ee.Z(Gt,ri=>Jt.getLanguageConfiguration(ri)),si=new te.xH(new Le([zt]),$t),ai=(0,Fe.w)(si,[],void 0,!0),_i="",Li=zt.getLineContent();return function ri(qt,je){if(qt.kind===2)if(ri(qt.openingBracket,je),je=(0,Ae.Ii)(je,qt.openingBracket.length),qt.child&&(ri(qt.child,je),je=(0,Ae.Ii)(je,qt.child.length)),qt.closingBracket)ri(qt.closingBracket,je),je=(0,Ae.Ii)(je,qt.closingBracket.length);else{let mt=$t.getSingleLanguageBracketTokens(qt.openingBracket.languageId).findClosingTokenText(qt.openingBracket.bracketIds);_i+=mt}else if(qt.kind!==3){if(qt.kind===0||qt.kind===1)_i+=Li.substring((0,Ae.F_)(je),(0,Ae.F_)((0,Ae.Ii)(je,qt.length)));else if(qt.kind===4)for(let mt of qt.children)ri(mt,je),je=(0,Ae.Ii)(je,mt.length)}}(ai,Ae.xl),_i}(Ot,$e):Ue}var Ve=function(Ue,Pe){return function(Xe,$e){Pe(Xe,$e,Ue)}};let Ye=class extends f.JT{constructor(Ue,Pe,Xe,$e,ot){super(),this.textModel=Ue,this.versionId=Pe,this._debounceValue=Xe,this.languageFeaturesService=$e,this.languageConfigurationService=ot,this.updateOperation=this._register(new f.XK),this.inlineCompletions=(0,d.DN)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,d.DN)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this.updateOperation.clear()}))}clear(Ue){this.updateOperation.clear(),this.inlineCompletions.set(void 0,Ue),this.suggestWidgetInlineCompletions.set(void 0,Ue)}clearSuggestWidgetInlineCompletions(){var Ue;!((Ue=this.updateOperation.value)===null||Ue===void 0)&&Ue.request.context.selectedSuggestionInfo&&this.updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,void 0)}update(Ue,Pe,Xe){var $e,ot;let Tt=new tt(Ue,Pe,this.textModel.getVersionId()),Ot=Pe.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!(($e=this.updateOperation.value)===null||$e===void 0)&&$e.request.satisfies(Tt))return this.updateOperation.value.promise;if(!((ot=Ot.get())===null||ot===void 0)&&ot.request.satisfies(Tt))return Promise.resolve(!0);let ti=!!this.updateOperation.value;this.updateOperation.clear();let zt=new be.A,Jt=(()=>{return $t=this,si=void 0,_i=function*(){var Li;if((ti||Pe.triggerKind===se.bw.Automatic)&&(yield(Li=this._debounceValue.get(this.textModel),new Promise(wt=>{let Rt;setTimeout(()=>{Rt&&Rt.dispose(),wt()},Li)}))),zt.token.isCancellationRequested||this.textModel.getVersionId()!==Tt.versionId)return!1;let ri=new Date,qt=yield function(wt,Rt,oi,ei,yi=be.T.None,ki){return le(this,void 0,void 0,function*(){let Ti=function(Yt,Ai){let zi=Ai.getWordAtPosition(Yt),un=Ai.getLineMaxColumn(Yt.lineNumber);return zi?new a.e(Yt.lineNumber,zi.startColumn,Yt.lineNumber,un):a.e.fromPositions(Yt,Yt.with(void 0,un))}(Rt,oi),Pi=wt.all(oi),Ni=yield Promise.all(Pi.map(Yt=>le(this,void 0,void 0,function*(){try{let Ai=yield Yt.provideInlineCompletions(oi,Rt,ei,yi);return{provider:Yt,completions:Ai}}catch(Ai){(0,O.Cp)(Ai)}return{provider:Yt,completions:void 0}}))),gn=new Map,Dn=[];for(let Yt of Ni){let Ai=Yt.completions;if(!Ai)continue;let zi=new me(Ai,Yt.provider);Dn.push(zi);for(let un of Ai.items){let Ln=xe.from(un,zi,Ti,oi,ki);gn.set(Ln.hash(),Ln)}}return new ee(Array.from(gn.values()),new Set(gn.keys()),Dn)})}(this.languageFeaturesService.inlineCompletionsProvider,Ue,this.textModel,Pe,zt.token,this.languageConfigurationService);if(zt.token.isCancellationRequested||this.textModel.getVersionId()!==Tt.versionId)return!1;let je=new Date;this._debounceValue.update(this.textModel,je.getTime()-ri.getTime());let mt=new bt(qt,Tt,this.textModel,this.versionId);if(Xe){let wt=Xe.toInlineCompletion(void 0);Xe.canBeReused(this.textModel,Ue)&&!qt.has(wt)&&mt.prepend(Xe.inlineCompletion,wt.range,!0)}return(0,d.PS)(wt=>{Ot.set(mt,wt)}),this.updateOperation.clear(),!0},new((ai=void 0)||(ai=Promise))(function(Li,ri){function qt(wt){try{mt(_i.next(wt))}catch(Rt){ri(Rt)}}function je(wt){try{mt(_i.throw(wt))}catch(Rt){ri(Rt)}}function mt(wt){var Rt;wt.done?Li(wt.value):(Rt=wt.value,Rt instanceof ai?Rt:new ai(function(oi){oi(Rt)})).then(qt,je)}mt((_i=_i.apply($t,si||[])).next())});var $t,si,ai,_i})(),Gt=new Qe(Tt,zt,Jt);return this.updateOperation.value=Gt,Jt}};Ye=function(Ue,Pe,Xe,$e){var ot,Tt=arguments.length,Ot=Tt<3?Pe:$e===null?$e=Object.getOwnPropertyDescriptor(Pe,Xe):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(Ue,Pe,Xe,$e);else for(var ti=Ue.length-1;ti>=0;ti--)(ot=Ue[ti])&&(Ot=(Tt<3?ot(Ot):Tt>3?ot(Pe,Xe,Ot):ot(Pe,Xe))||Ot);return Tt>3&&Ot&&Object.defineProperty(Pe,Xe,Ot),Ot}([Ve(3,i.p),Ve(4,ce.c_)],Ye);class tt{constructor(Pe,Xe,$e){this.position=Pe,this.context=Xe,this.versionId=$e}satisfies(Pe){return this.position.equals(Pe.position)&&(Xe=this.context.selectedSuggestionInfo,$e=Pe.context.selectedSuggestionInfo,Xe&&$e?((ot,Tt)=>ot.equals(Tt))(Xe,$e):Xe===$e)&&(Pe.context.triggerKind===se.bw.Automatic||this.context.triggerKind===se.bw.Explicit)&&this.versionId===Pe.versionId;var Xe,$e}}class Qe{constructor(Pe,Xe,$e){this.request=Pe,this.cancellationTokenSource=Xe,this.promise=$e}dispose(){this.cancellationTokenSource.cancel()}}class bt{get inlineCompletions(){return this._inlineCompletions}constructor(Pe,Xe,$e,ot){this.inlineCompletionProviderResult=Pe,this.request=Xe,this.textModel=$e,this.versionId=ot,this.refCount=1,this.prependedInlineCompletionItems=[],this.counter=0,this.rangeVersion=(0,u.nK)("ranges",Ot=>{this.versionId.read(Ot);let ti=!1;for(let zt of this._inlineCompletions)ti=ti||zt._updateRange(this.textModel);return ti&&this.counter++,this.counter});let Tt=$e.deltaDecorations([],Pe.completions.map(Ot=>({range:Ot.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=Pe.completions.map((Ot,ti)=>new ht(Ot,Tt[ti],this.rangeVersion))}prepend(Pe,Xe,$e){$e&&Pe.source.addRef();let ot=this.textModel.deltaDecorations([],[{range:Xe,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new ht(Pe,ot,this.rangeVersion,Xe)),this.prependedInlineCompletionItems.push(Pe)}clone(){return this.refCount++,this}dispose(){if(this.refCount--,this.refCount===0){this.textModel.deltaDecorations(this._inlineCompletions.map(Pe=>Pe.decorationId),[]),this.inlineCompletionProviderResult.dispose();for(let Pe of this.prependedInlineCompletionItems)Pe.source.removeRef()}}}class ht{constructor(Pe,Xe,$e,ot){this.inlineCompletion=Pe,this.decorationId=Xe,this.rangeVersion=$e,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=ot!=null?ot:Pe.range}getUpdatedRange(Pe){return this.rangeVersion.read(Pe),this._updatedRange}_updateRange(Pe){let Xe=Pe.getDecorationRange(this.decorationId);return Xe?!this._updatedRange.equalsRange(Xe)&&(this._updatedRange=Xe,!0):(this._isValid=!1,!0)}toInlineCompletion(Pe){return this.inlineCompletion.withRange(this.getUpdatedRange(Pe))}toSingleTextEdit(Pe){return new ue(this.getUpdatedRange(Pe),this.inlineCompletion.insertText)}isVisible(Pe,Xe,$e){let ot=this.toFilterTextReplacement($e).removeCommonPrefix(Pe);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this.getUpdatedRange($e).getStartPosition())||Xe.lineNumber!==ot.range.startLineNumber)return!1;let Tt=Pe.getValueInRange(ot.range,1).toLowerCase(),Ot=ot.text.toLowerCase(),ti=Math.max(0,Xe.column-ot.range.startColumn),zt=Ot.substring(0,ti),Jt=Ot.substring(ti),Gt=Tt.substring(0,ti),$t=Tt.substring(ti),si=Pe.getLineIndentColumn(ot.range.startLineNumber);return ot.range.startColumn<=si&&(Gt=Gt.trimStart(),Gt.length===0&&($t=$t.trimStart()),zt=zt.trimStart(),zt.length===0&&(Jt=Jt.trimStart())),zt.startsWith(Gt)&&!!(0,de.Sy)($t,Jt)}toFilterTextReplacement(Pe){return new ue(this.getUpdatedRange(Pe),this.inlineCompletion.filterText)}canBeReused(Pe,Xe){return this._isValid&&this.getUpdatedRange(void 0).containsPosition(Xe)&&this.isVisible(Pe,Xe,void 0)&&!this.isSmallerThanOriginal(void 0)}isSmallerThanOriginal(Pe){return xt(this.getUpdatedRange(Pe)).isBefore(xt(this.inlineCompletion.range))}}function xt(Ue){return Ue.startLineNumber===Ue.endLineNumber?new h.L(1,1+Ue.endColumn-Ue.startColumn):new h.L(1+Ue.endLineNumber-Ue.startLineNumber,Ue.endColumn)}var Qt,At=t(8762),mi=t(4565),Lt=t(2065),ct=function(Ue,Pe){return function(Xe,$e){Pe(Xe,$e,Ue)}},Kt=function(Ue,Pe,Xe,$e){return new(Xe||(Xe=Promise))(function(ot,Tt){function Ot(Jt){try{zt($e.next(Jt))}catch(Gt){Tt(Gt)}}function ti(Jt){try{zt($e.throw(Jt))}catch(Gt){Tt(Gt)}}function zt(Jt){var Gt;Jt.done?ot(Jt.value):(Gt=Jt.value,Gt instanceof Xe?Gt:new Xe(function($t){$t(Gt)})).then(Ot,ti)}zt(($e=$e.apply(Ue,Pe||[])).next())})};(function(Ue){Ue[Ue.Undo=0]="Undo",Ue[Ue.Redo=1]="Redo",Ue[Ue.AcceptWord=2]="AcceptWord",Ue[Ue.Other=3]="Other"})(Qt||(Qt={}));let pi=class extends f.JT{get isAcceptingPartially(){return this._isAcceptingPartially}get isNavigatingCurrentInlineCompletion(){return this._isNavigatingCurrentInlineCompletion}constructor(Ue,Pe,Xe,$e,ot,Tt,Ot,ti,zt,Jt,Gt,$t){super(),this.textModel=Ue,this.selectedSuggestItem=Pe,this.cursorPosition=Xe,this.textModelVersionId=$e,this._debounceValue=ot,this._suggestPreviewEnabled=Tt,this._suggestPreviewMode=Ot,this._inlineSuggestMode=ti,this._enabled=zt,this._instantiationService=Jt,this._commandService=Gt,this._languageConfigurationService=$t,this._source=this._register(this._instantiationService.createInstance(Ye,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=(0,u.uh)("isActive",!1),this._forceUpdate=(0,u.GN)("forceUpdate"),this._isAcceptingPartially=!1,this._isNavigatingCurrentInlineCompletion=!1,this._filteredInlineCompletionItems=(0,u.nK)("filteredInlineCompletionItems",ri=>{let qt=this._source.inlineCompletions.read(ri);if(!qt)return[];let je=this.cursorPosition.read(ri);return qt.inlineCompletions.filter(wt=>wt.isVisible(this.textModel,je,ri))}),this._selectedInlineCompletionId=void 0,this._selectedInlineCompletionIdChangeSignal=(0,u.GN)("selectedCompletionIdChanged"),this.selectedInlineCompletionIndex=(0,u.nK)("selectedCachedCompletionIndex",ri=>{this._selectedInlineCompletionIdChangeSignal.read(ri);let qt=this._filteredInlineCompletionItems.read(ri),je=this._selectedInlineCompletionId===void 0?-1:qt.findIndex(mt=>mt.semanticId===this._selectedInlineCompletionId);return je===-1?(this._selectedInlineCompletionId=void 0,0):je}),this.selectedInlineCompletion=(0,u.nK)("selectedCachedCompletion",ri=>this._filteredInlineCompletionItems.read(ri)[this.selectedInlineCompletionIndex.read(ri)]),this.lastTriggerKind=this._source.inlineCompletions.map(ri=>ri==null?void 0:ri.request.context.triggerKind),this.inlineCompletionsCount=(0,u.nK)("selectedInlineCompletionsCount",ri=>this.lastTriggerKind.read(ri)===se.bw.Explicit?this._filteredInlineCompletionItems.read(ri).length:void 0),this.ghostTextAndCompletion=(0,u.nK)("ghostTextAndCompletion",ri=>{var qt;let je=this.textModel,mt=this.selectedSuggestItem.read(ri);if(mt){let wt=this._source.suggestWidgetInlineCompletions.read(ri),Rt=wt?wt.inlineCompletions:[this.selectedInlineCompletion.read(ri)].filter(ne.$K),oi=mt.toSingleTextEdit().removeCommonPrefix(je),ei=(0,re.bX)(Rt,gn=>{let Dn=gn.toSingleTextEdit(ri);return Dn=Dn.removeCommonPrefix(je,a.e.fromPositions(Dn.range.getStartPosition(),mt.range.getEndPosition())),Dn.augments(oi)?{edit:Dn,completion:gn}:void 0});if(!this._suggestPreviewEnabled.read(ri)&&!ei)return;let yi=(qt=ei==null?void 0:ei.edit)!==null&&qt!==void 0?qt:oi,ki=ei?ei.edit.text.length-oi.text.length:0,Ti=this._suggestPreviewMode.read(ri),Pi=this.cursorPosition.read(ri),Ni=yi.computeGhostText(je,Ti,Pi,ki);return{ghostText:Ni!=null?Ni:new K(yi.range.endLineNumber,[]),completion:ei==null?void 0:ei.completion}}{if(!this._isActive.read(ri))return;let wt=this.selectedInlineCompletion.read(ri);if(!wt)return;let Rt=wt.toSingleTextEdit(ri),oi=this._inlineSuggestMode.read(ri),ei=this.cursorPosition.read(ri),yi=Rt.computeGhostText(je,oi,ei);return yi?{ghostText:yi,completion:wt}:void 0}}),this.ghostText=(0,u.nK)("ghostText",ri=>{let qt=this.ghostTextAndCompletion.read(ri);if(qt)return qt.ghostText});let si=new Set([Qt.Redo,Qt.Undo,Qt.AcceptWord]),ai,_i=!1,Li=se.bw.Automatic;this._register((0,u.nJ)("update",{handleChange:ri=>(ri.didChange(this.textModelVersionId)&&si.has(ri.change)?_i=!0:ri.didChange(this._forceUpdate)&&(Li=ri.change),!0)},ri=>{var qt,je;if(this._forceUpdate.read(ri),this._enabled.read(ri)&&this.selectedSuggestItem.read(ri)||this._isActive.read(ri)){let mt=_i||(je=(qt=this.selectedInlineCompletion.get())===null||qt===void 0?void 0:qt.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&je!==void 0&&je,wt=this.selectedSuggestItem.read(ri),Rt=this.cursorPosition.read(ri);this.textModelVersionId.read(ri);let oi=this._source.suggestWidgetInlineCompletions.get();if(oi&&!wt){let ei=this._source.inlineCompletions.get();ei&&oi.request.versionId>ei.request.versionId&&this._source.inlineCompletions.set(oi.clone(),void 0),this._source.clearSuggestWidgetInlineCompletions()}this._updatePromise=this._source.update(Rt,{triggerKind:Li,selectedSuggestionInfo:wt==null?void 0:wt.toSelectedSuggestionInfo()},mt?this.selectedInlineCompletion.get():void 0)}else this._updatePromise=void 0;_i=!1,Li=se.bw.Automatic})),this._register((0,u.EH)("call handleItemDidShow",ri=>{var qt,je;let mt=this.ghostTextAndCompletion.read(ri),wt=mt==null?void 0:mt.completion;if((wt==null?void 0:wt.semanticId)!==(ai==null?void 0:ai.semanticId)&&(ai=wt,wt)){let Rt=wt.inlineCompletion,oi=Rt.source;(je=(qt=oi.provider).handleItemDidShow)===null||je===void 0||je.call(qt,oi.inlineCompletions,Rt.sourceInlineCompletion,Rt.insertText)}}))}trigger(Ue){return Kt(this,void 0,void 0,function*(){this._isActive.set(!0,Ue),yield this._updatePromise})}triggerExplicitly(){return Kt(this,void 0,void 0,function*(){(0,u.PS)(Ue=>{this._isActive.set(!0,Ue),this._forceUpdate.trigger(Ue,se.bw.Explicit)}),yield this._updatePromise})}stop(Ue){Ue?(this._isActive.set(!1,Ue),this._source.clear(Ue)):(0,u.PS)(Pe=>this.stop(Pe))}deltaIndex(Ue){return Kt(this,void 0,void 0,function*(){yield this.triggerExplicitly(),this._isNavigatingCurrentInlineCompletion=!0;try{let Pe=this._filteredInlineCompletionItems.get()||[];if(Pe.length>0){let Xe=(this.selectedInlineCompletionIndex.get()+Ue+Pe.length)%Pe.length;this._selectedInlineCompletionId=Pe[Xe].semanticId}else this._selectedInlineCompletionId=void 0;this._selectedInlineCompletionIdChangeSignal.trigger(void 0)}finally{this._isNavigatingCurrentInlineCompletion=!1}})}next(){return Kt(this,void 0,void 0,function*(){yield this.deltaIndex(1)})}previous(){return Kt(this,void 0,void 0,function*(){yield this.deltaIndex(-1)})}accept(Ue){var Pe,Xe;if(Ue.getModel()!==this.textModel)throw new O.he;let $e=this.ghostText.get(),ot=(Pe=this.selectedInlineCompletion.get())===null||Pe===void 0?void 0:Pe.toInlineCompletion(void 0);$e&&ot&&(Ue.pushUndoStop(),ot.snippetInfo?(Ue.executeEdits("inlineSuggestion.accept",[ie.h.replaceMove(ot.range,""),...ot.additionalTextEdits]),Ue.setPosition(ot.snippetInfo.range.getStartPosition()),(Xe=At.SnippetController2.get(Ue))===null||Xe===void 0||Xe.insert(ot.snippetInfo.snippet,{undoStopBefore:!1})):Ue.executeEdits("inlineSuggestion.accept",[ie.h.replaceMove(ot.range,ot.insertText),...ot.additionalTextEdits]),ot.command?this._commandService.executeCommand(ot.command.id,...ot.command.arguments||[]).finally(()=>{(0,u.PS)(Tt=>{this._source.clear(Tt)})}).then(void 0,O.Cp):(0,u.PS)(Tt=>{this._source.clear(Tt)}))}acceptNextWord(Ue){this.acceptNext(Ue,(Pe,Xe)=>{let $e=this.textModel.getLanguageIdAtPosition(Pe.lineNumber,Pe.column),ot=this._languageConfigurationService.getLanguageConfiguration($e),Tt=new RegExp(ot.wordDefinition.source,ot.wordDefinition.flags.replace("g","")),Ot=Xe.match(Tt),ti=0;ti=Ot&&Ot.index!==void 0?Ot.index===0?Ot[0].length:Ot.index:Xe.length;let zt=/\s+/g.exec(Xe);return zt&&zt.index!==void 0&&zt.index+zt[0].length<ti&&(ti=zt.index+zt[0].length),ti})}acceptNextLine(Ue){this.acceptNext(Ue,(Pe,Xe)=>{let $e=Xe.match(/\n/);return $e&&$e.index!==void 0?$e.index+1:Xe.length})}acceptNext(Ue,Pe){var Xe;if(Ue.getModel()!==this.textModel)throw new O.he;let $e=this.ghostText.get(),ot=(Xe=this.selectedInlineCompletion.get())===null||Xe===void 0?void 0:Xe.toInlineCompletion(void 0);if(!$e||!ot)return;if(ot.snippetInfo||ot.filterText!==ot.insertText)return void this.accept(Ue);if($e.parts.length===0)return;let Tt=$e.parts[0],Ot=new h.L($e.lineNumber,Tt.column),ti=Tt.lines.join(`
`),zt=Pe(Ot,ti);if(zt===ti.length&&$e.parts.length===1)return void this.accept(Ue);let Jt=ti.substring(0,zt);this._isAcceptingPartially=!0;try{Ue.pushUndoStop(),Ue.executeEdits("inlineSuggestion.accept",[ie.h.replace(a.e.fromPositions(Ot),Jt)]);let Gt=W(Jt);Ue.setPosition(C(Ot,Gt))}finally{this._isAcceptingPartially=!1}if(ot.source.provider.handlePartialAccept){let Gt=a.e.fromPositions(ot.range.getStartPosition(),C(Ot,W(Jt))),$t=Ue.getModel().getValueInRange(Gt,1);ot.source.provider.handlePartialAccept(ot.source.inlineCompletions,ot.sourceInlineCompletion,$t.length)}}};pi=function(Ue,Pe,Xe,$e){var ot,Tt=arguments.length,Ot=Tt<3?Pe:$e===null?$e=Object.getOwnPropertyDescriptor(Pe,Xe):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(Ue,Pe,Xe,$e);else for(var ti=Ue.length-1;ti>=0;ti--)(ot=Ue[ti])&&(Ot=(Tt<3?ot(Ot):Tt>3?ot(Pe,Xe,Ot):ot(Pe,Xe))||Ot);return Tt>3&&Ot&&Object.defineProperty(Pe,Xe,Ot),Ot}([ct(9,Lt.TG),ct(10,mi.H),ct(11,ce.c_)],pi);var li=t(9561),Wi=t(4804);class Vi extends f.JT{get selectedItem(){return this._selectedItem}constructor(Pe,Xe,$e){super(),this.editor=Pe,this.suggestControllerPreselector=Xe,this.checkModelVersion=$e,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=(0,u.uh)("suggestWidgetInlineCompletionProvider.selectedItem",void 0),this._register(Pe.onKeyDown(Tt=>{Tt.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(Pe.onKeyUp(Tt=>{Tt.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));let ot=Wi.SuggestController.get(this.editor);if(ot){this._register(ot.registerSelector({priority:100,select:(ti,zt,Jt)=>{var Gt;(0,u.PS)(ri=>this.checkModelVersion(ri));let $t=this.editor.getModel();if(!$t)return-1;let si=(Gt=this.suggestControllerPreselector())===null||Gt===void 0?void 0:Gt.removeCommonPrefix($t);if(!si)return-1;let ai=h.L.lift(zt),_i=Jt.map((ri,qt)=>{let je=Xi.fromSuggestion(ot,$t,ai,ri,this.isShiftKeyPressed).toSingleTextEdit().removeCommonPrefix($t);return{index:qt,valid:si.augments(je),prefixLength:je.text.length,suggestItem:ri}}).filter(ri=>ri&&ri.valid&&ri.prefixLength>0),Li=(0,re.Dc)(_i,(0,re.tT)(ri=>ri.prefixLength,re.fv));return Li?Li.index:-1}}));let Tt=!1,Ot=()=>{Tt||(Tt=!0,this._register(ot.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(ot.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(ot.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(v.ju.once(ot.model.onDidTrigger)(ti=>{Ot()}))}this.update(this._isActive)}update(Pe){let Xe=this.getSuggestItemInfo();var $e,ot;this._isActive===Pe&&(($e=this._currentSuggestItemInfo)===(ot=Xe)||$e&&ot&&$e.equals(ot))||(this._isActive=Pe,this._currentSuggestItemInfo=Xe,(0,u.PS)(Tt=>{this.checkModelVersion(Tt),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,Tt)}))}getSuggestItemInfo(){let Pe=Wi.SuggestController.get(this.editor);if(!Pe||!this.isSuggestWidgetVisible)return;let Xe=Pe.widget.value.getFocusedItem(),$e=this.editor.getPosition(),ot=this.editor.getModel();return Xe&&$e&&ot?Xi.fromSuggestion(Pe,ot,$e,Xe.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){let Pe=Wi.SuggestController.get(this.editor);Pe==null||Pe.stopForceRenderingAbove()}forceRenderingAbove(){let Pe=Wi.SuggestController.get(this.editor);Pe==null||Pe.forceRenderingAbove()}}class Xi{static fromSuggestion(Pe,Xe,$e,ot,Tt){let{insertText:Ot}=ot.completion,ti=!1;if(4&ot.completion.insertTextRules){let Jt=new ke.Yj().parse(Ot);Jt.children.length<100&&li.l.adjustWhitespace(Xe,$e,!0,Jt),Ot=Jt.toString(),ti=!0}let zt=Pe.getOverwriteInfo(ot,Tt);return new Xi(a.e.fromPositions($e.delta(0,-zt.overwriteBefore),$e.delta(0,Math.max(zt.overwriteAfter,0))),Ot,ot.completion.kind,ti)}constructor(Pe,Xe,$e,ot){this.range=Pe,this.insertText=Xe,this.completionItemKind=$e,this.isSnippetText=ot}equals(Pe){return this.range.equalsRange(Pe.range)&&this.insertText===Pe.insertText&&this.completionItemKind===Pe.completionItemKind&&this.isSnippetText===Pe.isSnippetText}toSelectedSuggestionInfo(){return new se.ln(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new ue(this.range,this.insertText)}}var en=t(9149),rn=t(3108),tn=t(3983),yn=function(Ue,Pe){return function(Xe,$e){Pe(Xe,$e,Ue)}};let sn=class td extends f.JT{static get(Pe){return Pe.getContribution(td.ID)}constructor(Pe,Xe,$e,ot,Tt,Ot,ti,zt){super(),this.editor=Pe,this.instantiationService=Xe,this.contextKeyService=$e,this.configurationService=ot,this.commandService=Tt,this.debounceService=Ot,this.languageFeaturesService=ti,this.audioCueService=zt,this.suggestWidgetAdaptor=this._register(new Vi(this.editor,()=>{var $t,si;return(si=($t=this.model.get())===null||$t===void 0?void 0:$t.selectedInlineCompletion.get())===null||si===void 0?void 0:si.toSingleTextEdit(void 0)},$t=>this.updateObservables($t,Qt.Other))),this.textModelVersionId=(0,u.uh)("textModelVersionId",-1),this.cursorPosition=(0,u.uh)("cursorPosition",new h.L(1,1)),this.model=(0,d.DN)("inlineCompletionModel",void 0),this.ghostTextWidget=this._register(this.instantiationService.createInstance(z,this.editor,{ghostText:this.model.map(($t,si)=>$t==null?void 0:$t.ghostText.read(si)),minReservedLineCount:(0,u.Dz)(0),targetTextModel:this.model.map($t=>$t==null?void 0:$t.textModel)})),this._debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(new A.f(this.contextKeyService,this.model));let Jt=(0,u.rD)(Pe.onDidChangeConfiguration,()=>Pe.getOption(60).enabled),Gt;this._register(v.ju.runAndSubscribe(Pe.onDidChangeModel,()=>{(0,d.PS)($t=>{this.model.set(void 0,$t),this.updateObservables($t,Qt.Other);let si=Pe.getModel();if(si){let ai=Xe.createInstance(pi,si,this.suggestWidgetAdaptor.selectedItem,this.cursorPosition,this.textModelVersionId,this._debounceValue,(0,u.rD)(Pe.onDidChangeConfiguration,()=>Pe.getOption(113).preview),(0,u.rD)(Pe.onDidChangeConfiguration,()=>Pe.getOption(113).previewMode),(0,u.rD)(Pe.onDidChangeConfiguration,()=>Pe.getOption(60).mode),Jt);this.model.set(ai,$t)}})})),this._register(Pe.onDidChangeModelContent($t=>(0,d.PS)(si=>{var ai;return this.updateObservables(si,$t.isUndoing?Qt.Undo:$t.isRedoing?Qt.Redo:!((ai=this.model.get())===null||ai===void 0)&&ai.isAcceptingPartially?Qt.AcceptWord:Qt.Other)}))),this._register(Pe.onDidChangeCursorPosition($t=>(0,d.PS)(si=>{var ai;this.updateObservables(si,Qt.Other),$t.reason===3&&((ai=this.model.get())===null||ai===void 0||ai.stop(si))}))),this._register(Pe.onDidType(()=>(0,d.PS)($t=>{var si;this.updateObservables($t,Qt.Other),Jt.get()&&((si=this.model.get())===null||si===void 0||si.trigger($t))}))),this._register(this.commandService.onDidExecuteCommand($t=>{new Set([o.CoreEditingCommands.Tab.id,o.CoreEditingCommands.DeleteLeft.id,o.CoreEditingCommands.DeleteRight.id,_.Ou,"acceptSelectedSuggestion"]).has($t.commandId)&&Pe.hasTextFocus()&&Jt.get()&&(0,d.PS)(si=>{var ai;(ai=this.model.get())===null||ai===void 0||ai.trigger(si)})})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.configurationService.getValue("editor.inlineSuggest.keepOnBlur")||Pe.getOption(60).keepOnBlur||p.Q.dropDownVisible||(0,d.PS)($t=>{var si;(si=this.model.get())===null||si===void 0||si.stop($t)})})),this._register((0,u.EH)("forceRenderingAbove",$t=>{let si=this.model.read($t),ai=si==null?void 0:si.ghostText.read($t);this.suggestWidgetAdaptor.selectedItem.read($t)?ai&&ai.lineCount>=2&&this.suggestWidgetAdaptor.forceRenderingAbove():this.suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register((0,f.OF)(()=>{this.suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register((0,u.EH)("play audio cue & read suggestion",$t=>{let si=this.model.read($t),ai=si==null?void 0:si.selectedInlineCompletion.read($t);if(!si||!ai)return void(Gt=void 0);let _i=si==null?void 0:si.ghostText.get();if(!_i)return void(Gt=void 0);let Li=si.textModel.getLineContent(_i.lineNumber);if(ai.semanticId!==Gt){if(Gt=ai.semanticId,si.isNavigatingCurrentInlineCompletion)return;this.audioCueService.playAudioCue(en.y$.inlineSuggestion).then(()=>{this.editor.getOption(6)&&(0,x.Z9)(_i.renderForScreenReader(Li))})}}))}updateObservables(Pe,Xe){var $e,ot;let Tt=this.editor.getModel();this.textModelVersionId.set(($e=Tt==null?void 0:Tt.getVersionId())!==null&&$e!==void 0?$e:-1,Pe,Xe),this.cursorPosition.set((ot=this.editor.getPosition())!==null&&ot!==void 0?ot:new h.L(1,1),Pe)}shouldShowHoverAt(Pe){var Xe;let $e=(Xe=this.model.get())===null||Xe===void 0?void 0:Xe.ghostText.get();return!!$e&&$e.parts.some(ot=>Pe.containsPosition(new h.L($e.lineNumber,ot.column)))}shouldShowHoverAtViewZone(Pe){return this.ghostTextWidget.ownsViewZone(Pe)}};sn.ID="editor.contrib.inlineCompletionsController",sn=function(Ue,Pe,Xe,$e){var ot,Tt=arguments.length,Ot=Tt<3?Pe:$e===null?$e=Object.getOwnPropertyDescriptor(Pe,Xe):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(Ue,Pe,Xe,$e);else for(var ti=Ue.length-1;ti>=0;ti--)(ot=Ue[ti])&&(Ot=(Tt<3?ot(Ot):Tt>3?ot(Pe,Xe,Ot):ot(Pe,Xe))||Ot);return Tt>3&&Ot&&Object.defineProperty(Pe,Xe,Ot),Ot}([yn(1,Lt.TG),yn(2,tn.i6),yn(3,rn.Ui),yn(4,mi.H),yn(5,r.A),yn(6,i.p),yn(7,en.e7)],sn);var ci=t(3580),Xt=t(4144),kt=function(Ue,Pe,Xe,$e){return new(Xe||(Xe=Promise))(function(ot,Tt){function Ot(Jt){try{zt($e.next(Jt))}catch(Gt){Tt(Gt)}}function ti(Jt){try{zt($e.throw(Jt))}catch(Gt){Tt(Gt)}}function zt(Jt){var Gt;Jt.done?ot(Jt.value):(Gt=Jt.value,Gt instanceof Xe?Gt:new Xe(function($t){$t(Gt)})).then(Ot,ti)}zt(($e=$e.apply(Ue,Pe||[])).next())})};class It extends m.R6{constructor(){super({id:It.ID,label:ci.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:tn.Ao.and(I.u.writable,A.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}run(Pe,Xe){var $e;return kt(this,void 0,void 0,function*(){let ot=sn.get(Xe);($e=ot==null?void 0:ot.model.get())===null||$e===void 0||$e.next()})}}It.ID=_.OW;class ft extends m.R6{constructor(){super({id:ft.ID,label:ci.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:tn.Ao.and(I.u.writable,A.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}run(Pe,Xe){var $e;return kt(this,void 0,void 0,function*(){let ot=sn.get(Xe);($e=ot==null?void 0:ot.model.get())===null||$e===void 0||$e.previous()})}}ft.ID=_.Np;class Mt extends m.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:ci.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:I.u.writable})}run(Pe,Xe){var $e;return kt(this,void 0,void 0,function*(){let ot=sn.get(Xe);($e=ot==null?void 0:ot.model.get())===null||$e===void 0||$e.triggerExplicitly()})}}class jt extends m.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:ci.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:tn.Ao.and(I.u.writable,A.f.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065},menuOpts:[{menuId:Xt.eH.InlineSuggestionToolbar,title:ci.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}run(Pe,Xe){var $e;return kt(this,void 0,void 0,function*(){let ot=sn.get(Xe);($e=ot==null?void 0:ot.model.get())===null||$e===void 0||$e.acceptNextWord(ot.editor)})}}class di extends m.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:ci.NC("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:tn.Ao.and(I.u.writable,A.f.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:Xt.eH.InlineSuggestionToolbar,title:ci.NC("acceptLine","Accept Line"),group:"secondary",order:2}]})}run(Pe,Xe){var $e;return kt(this,void 0,void 0,function*(){let ot=sn.get(Xe);($e=ot==null?void 0:ot.model.get())===null||$e===void 0||$e.acceptNextLine(ot.editor)})}}class fi extends m.R6{constructor(){super({id:_.Ou,label:ci.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:A.f.inlineSuggestionVisible,menuOpts:[{menuId:Xt.eH.InlineSuggestionToolbar,title:ci.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:tn.Ao.and(A.f.inlineSuggestionVisible,I.u.tabMovesFocus.toNegated(),A.f.inlineSuggestionHasIndentationLessThanTabSize)}})}run(Pe,Xe){var $e;return kt(this,void 0,void 0,function*(){let ot=sn.get(Xe);ot&&(($e=ot.model.get())===null||$e===void 0||$e.accept(ot.editor),ot.editor.focus())})}}class Si extends m.R6{constructor(){super({id:Si.ID,label:ci.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:A.f.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(Pe,Xe){return kt(this,void 0,void 0,function*(){let $e=sn.get(Xe);(0,u.PS)(ot=>{var Tt;(Tt=$e==null?void 0:$e.model.get())===null||Tt===void 0||Tt.stop(ot)})})}}Si.ID="editor.action.inlineSuggest.hide";class Ri extends Xt.Ke{constructor(){super({id:Ri.ID,title:ci.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Xt.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:A.f.alwaysShowInlineSuggestionToolbar})}run(Pe,Xe){return kt(this,void 0,void 0,function*(){let $e=Pe.get(rn.Ui),ot=$e.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";$e.updateValue("editor.inlineSuggest.showToolbar",ot)})}}Ri.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var Wt=t(5321),Te=t(9365),Ze=t(5241),rt=t(1106),yt=t(988),Nt=t(829),dt=function(Ue,Pe){return function(Xe,$e){Pe(Xe,$e,Ue)}};class Re{constructor(Pe,Xe,$e){this.owner=Pe,this.range=Xe,this.controller=$e}isValidForHoverAnchor(Pe){return Pe.type===1&&this.range.startColumn<=Pe.range.startColumn&&this.range.endColumn>=Pe.range.endColumn}}let qe=class{constructor(Ue,Pe,Xe,$e,ot,Tt){this._editor=Ue,this._languageService=Pe,this._openerService=Xe,this.accessibilityService=$e,this._instantiationService=ot,this._telemetryService=Tt,this.hoverOrdinal=4}suggestHoverAnchor(Ue){let Pe=sn.get(this._editor);if(!Pe)return null;let Xe=Ue.target;if(Xe.type===8){let $e=Xe.detail;if(Pe.shouldShowHoverAtViewZone($e.viewZoneId))return new B.YM(1e3,this,a.e.fromPositions(this._editor.getModel().validatePosition($e.positionBefore||$e.position)),Ue.event.posx,Ue.event.posy,!1)}return Xe.type===7&&Pe.shouldShowHoverAt(Xe.range)||Xe.type===6&&Xe.detail.mightBeForeignElement&&Pe.shouldShowHoverAt(Xe.range)?new B.YM(1e3,this,Xe.range,Ue.event.posx,Ue.event.posy,!1):null}computeSync(Ue,Pe){if(this._editor.getOption(60).showToolbar==="always")return[];let Xe=sn.get(this._editor);return Xe&&Xe.shouldShowHoverAt(Ue.range)?[new Re(this,Ue.range,Xe)]:[]}renderHoverParts(Ue,Pe){let Xe=new f.SL,$e=Pe[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(Ue,$e,Xe);let ot=$e.controller.model.get(),Tt=this._instantiationService.createInstance(p.Q,this._editor,!1,(0,u.Dz)(null),ot.selectedInlineCompletionIndex,ot.inlineCompletionsCount,ot.selectedInlineCompletion.map(Ot=>{var ti;return(ti=Ot==null?void 0:Ot.inlineCompletion.source.inlineCompletions.commands)!==null&&ti!==void 0?ti:[]}));return Ue.fragment.appendChild(Tt.getDomNode()),ot.triggerExplicitly(),Xe.add(Tt),Xe}renderScreenReaderText(Ue,Pe,Xe){let $e=Wt.$,ot=$e("div.hover-row.markdown-hover"),Tt=Wt.R3(ot,$e("div.hover-contents",{"aria-live":"assertive"})),Ot=Xe.add(new Ze.$({editor:this._editor},this._languageService,this._openerService));Xe.add((0,u.EH)("update hover",ti=>{var zt;let Jt=(zt=Pe.controller.model.read(ti))===null||zt===void 0?void 0:zt.ghostText.read(ti);if(Jt){let Gt=this._editor.getModel().getLineContent(Jt.lineNumber);($t=>{Xe.add(Ot.onDidRenderAsync(()=>{Tt.className="hover-contents code-hover-contents",Ue.onContentsChanged()}));let si=ci.NC("inlineSuggestionFollows","Suggestion:"),ai=Xe.add(Ot.render(new Te.W5().appendText(si).appendCodeblock("text",$t)));Tt.replaceChildren(ai.element)})(Jt.renderForScreenReader(Gt))}else Wt.mc(Tt)})),Ue.fragment.appendChild(ot)}};qe=function(Ue,Pe,Xe,$e){var ot,Tt=arguments.length,Ot=Tt<3?Pe:$e===null?$e=Object.getOwnPropertyDescriptor(Pe,Xe):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ot=Reflect.decorate(Ue,Pe,Xe,$e);else for(var ti=Ue.length-1;ti>=0;ti--)(ot=Ue[ti])&&(Ot=(Tt<3?ot(Ot):Tt>3?ot(Pe,Xe,Ot):ot(Pe,Xe))||Ot);return Tt>3&&Ot&&Object.defineProperty(Pe,Xe,Ot),Ot}([dt(1,E.O),dt(2,yt.v4),dt(3,rt.F),dt(4,Lt.TG),dt(5,Nt.b)],qe),(0,m._K)(sn.ID,sn,3),(0,m.Qr)(Mt),(0,m.Qr)(It),(0,m.Qr)(ft),(0,m.Qr)(jt),(0,m.Qr)(di),(0,m.Qr)(fi),(0,m.Qr)(Si),(0,Xt.r1)(Ri),B.Ae.register(qe)},7298:(ut,Ie,t)=>{"use strict";t.d(Ie,{Q:()=>H});var m=t(5321),B=t(317),u=t(5496),I=t(4741),_=t(9488),A=t(5393),x=t(3046),v=t(5976),f=t(2495),d=t(1432),o=t(5670),h=t(6020),r=t(3580),i=t(2444),c=t(1364),b=t(4669),l=t(8401);class a extends v.JT{constructor(fe,q,p={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new b.z5),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=new v.SL,this.options=p,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new w(()=>{var re;return(re=this.toggleMenuActionViewItem)===null||re===void 0?void 0:re.show()},p.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",fe.appendChild(this.element),this.actionBar=this._register(new B.o(this.element,{orientation:p.orientation,ariaLabel:p.ariaLabel,actionRunner:p.actionRunner,allowContextMenu:p.allowContextMenu,actionViewItemProvider:(re,ne)=>{var ie;if(re.id===w.ID)return this.toggleMenuActionViewItem=new c.C(re,re.menuActions,q,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:o.k.asClassNameArray((ie=p.moreIcon)!==null&&ie!==void 0?ie:x.l.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(p.actionViewItemProvider){let se=p.actionViewItemProvider(re,ne);if(se)return se}if(re instanceof I.wY){let se=new c.C(re,re.actions,q,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:re.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement});return se.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(se),this.disposables.add(this._onDidChangeDropdownVisibility.add(se.onDidChangeVisibility)),se}}}))}set actionRunner(fe){this.actionBar.actionRunner=fe}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(fe){return this.actionBar.getAction(fe)}setActions(fe,q){this.clear();let p=fe?fe.slice(0):[];this.hasSecondaryActions=!!(q&&q.length>0),this.hasSecondaryActions&&q&&(this.toggleMenuAction.menuActions=q.slice(0),p.push(this.toggleMenuAction)),p.forEach(re=>{this.actionBar.push(re,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(re)})})}getKeybindingLabel(fe){var q,p;let re=this.lookupKeybindings?(p=(q=this.options).getKeyBinding)===null||p===void 0?void 0:p.call(q,fe):void 0;return(0,l.f6)(re==null?void 0:re.getLabel())}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),super.dispose()}}class w extends I.aU{constructor(fe,q){q=q||r.NC("moreActions","More Actions..."),super(w.ID,q,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=fe}run(){return fe=this,q=void 0,re=function*(){this.toggleDropdownMenu()},new((p=void 0)||(p=Promise))(function(ne,ie){function se(de){try{be(re.next(de))}catch(U){ie(U)}}function ce(de){try{be(re.throw(de))}catch(U){ie(U)}}function be(de){var U;de.done?ne(de.value):(U=de.value,U instanceof p?U:new p(function(ue){ue(U)})).then(se,ce)}be((re=re.apply(fe,q||[])).next())});var fe,q,p,re}get menuActions(){return this._menuActions}set menuActions(fe){this._menuActions=fe}}w.ID="toolbar.toggle.more";var E=t(4144),D=t(3983),L=t(5606),k=t(1847),R=t(829),O=function(oe,fe){return function(q,p){fe(q,p,oe)}};let $=class extends a{constructor(oe,fe,q,p,re,ne,ie){super(oe,re,Object.assign(Object.assign({getKeyBinding:se=>{var ce;return(ce=ne.lookupKeybinding(se.id))!==null&&ce!==void 0?ce:void 0}},fe),{allowContextMenu:!0})),this._options=fe,this._menuService=q,this._contextKeyService=p,this._contextMenuService=re,this._sessionDisposables=this._store.add(new v.SL),fe!=null&&fe.telemetrySource&&this._store.add(this.actionBar.onDidRun(se=>ie.publicLog2("workbenchActionExecuted",{id:se.action.id,from:fe.telemetrySource})))}setActions(oe,fe=[],q){var p,re,ne;this._sessionDisposables.clear();let ie=oe.slice(),se=fe.slice(),ce=[],be=0,de=[],U=!1;if(((p=this._options)===null||p===void 0?void 0:p.hiddenItemStrategy)!==-1)for(let ue=0;ue<ie.length;ue++){let ve=ie[ue];(ve instanceof E.U8||ve instanceof E.NZ)&&ve.hideActions&&(ce.push(ve.hideActions.toggle),ve.hideActions.toggle.checked&&be++,ve.hideActions.isHidden&&(U=!0,ie[ue]=void 0,((re=this._options)===null||re===void 0?void 0:re.hiddenItemStrategy)!==0&&(de[ue]=ve)))}if(((ne=this._options)===null||ne===void 0?void 0:ne.maxNumberOfItems)!==void 0){let ue=0;for(let ve=0;ve<ie.length;ve++){let X=ie[ve];X&&++ue>=this._options.maxNumberOfItems&&(ie[ve]=void 0,de[ve]=X)}}(0,_.Rs)(ie),(0,_.Rs)(de),super.setActions(ie,I.Z0.join(de,se)),ce.length>0&&this._sessionDisposables.add((0,m.nm)(this.getElement(),"contextmenu",ue=>{var ve,X,ye,Ce;let Ee=this.getItemAction(ue.target);if(!Ee)return;ue.preventDefault(),ue.stopPropagation();let Ae,Fe=!1;if(be===1&&((ve=this._options)===null||ve===void 0?void 0:ve.hiddenItemStrategy)===0){Fe=!0;for(let te=0;te<ce.length;te++)if(ce[te].checked){ce[te]=(0,I.xw)({id:Ee.id,label:Ee.label,checked:!0,enabled:!1,run(){}});break}}if(!Fe&&(Ee instanceof E.U8||Ee instanceof E.NZ)){if(!Ee.hideActions)return;Ae=Ee.hideActions.hide}else Ae=(0,I.xw)({id:"label",label:(0,r.NC)("hide","Hide"),enabled:!1,run(){}});let _e=I.Z0.join([Ae],ce);!((X=this._options)===null||X===void 0)&&X.resetMenu&&!q&&(q=[this._options.resetMenu]),U&&q&&(_e.push(new I.Z0),_e.push((0,I.xw)({id:"resetThisMenu",label:(0,r.NC)("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(q)}))),this._contextMenuService.showContextMenu({getAnchor:()=>ue,getActions:()=>_e,menuId:(ye=this._options)===null||ye===void 0?void 0:ye.contextMenu,menuActionOptions:Object.assign({renderShortTitle:!0},(Ce=this._options)===null||Ce===void 0?void 0:Ce.menuOptions),contextKeyService:this._contextKeyService})}))}};$=function(oe,fe,q,p){var re,ne=arguments.length,ie=ne<3?fe:p===null?p=Object.getOwnPropertyDescriptor(fe,q):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(oe,fe,q,p);else for(var se=oe.length-1;se>=0;se--)(re=oe[se])&&(ie=(ne<3?re(ie):ne>3?re(fe,q,ie):re(fe,q))||ie);return ne>3&&ie&&Object.defineProperty(fe,q,ie),ie}([O(2,E.co),O(3,D.i6),O(4,L.i),O(5,k.d),O(6,R.b)],$);var N=t(4565),T=t(2065),C=t(9554),W=function(oe,fe,q,p){var re,ne=arguments.length,ie=ne<3?fe:p===null?p=Object.getOwnPropertyDescriptor(fe,q):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(oe,fe,q,p);else for(var se=oe.length-1;se>=0;se--)(re=oe[se])&&(ie=(ne<3?re(ie):ne>3?re(fe,q,ie):re(fe,q))||ie);return ne>3&&ie&&Object.defineProperty(fe,q,ie),ie},K=function(oe,fe){return function(q,p){fe(q,p,oe)}};let j=(0,C.q5)("inline-suggestion-hints-next",x.l.chevronRight,(0,r.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),F=(0,C.q5)("inline-suggestion-hints-previous",x.l.chevronLeft,(0,r.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),H=class al extends v.JT{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(fe,q,p){let re=new I.aU(fe,q,p,!0,()=>this._commandService.executeCommand(fe)),ne=this.keybindingService.lookupKeybinding(fe,this._contextKeyService),ie=q;return ne&&(ie=(0,r.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",q,ne.getLabel())),re.tooltip=ie,re}constructor(fe,q,p,re,ne,ie,se,ce,be,de,U){super(),this.editor=fe,this.withBorder=q,this._position=p,this._currentSuggestionIdx=re,this._suggestionCount=ne,this._extraCommands=ie,this._commandService=se,this.keybindingService=be,this._contextKeyService=de,this._menuService=U,this.id="InlineSuggestionHintsContentWidget"+al.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,m.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,m.h)("div",{style:{display:"flex"}},[(0,m.h)("div@actionBar",{className:"custom-actions"}),(0,m.h)("div@toolBar")])]),this.previousAction=this.createCommandAction(h.Np,(0,r.NC)("previous","Previous"),o.k.asClassName(F)),this.availableSuggestionCountAction=new I.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(h.OW,(0,r.NC)("next","Next"),o.k.asClassName(j)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(E.eH.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new A.pY(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new A.pY(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.lastCommands=[];let ue=this._register(new B.o(this.nodes.actionBar));ue.push(this.previousAction,{icon:!0,label:!1}),ue.push(this.availableSuggestionCountAction),ue.push(this.nextAction,{icon:!0,label:!1}),this.toolBar=this._register(ce.createInstance(J,this.nodes.toolBar,E.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:ve=>ve.startsWith("primary")},actionViewItemProvider:(ve,X)=>ve instanceof E.U8?ce.createInstance(z,ve,void 0):void 0,telemetrySource:"InlineSuggestionToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(ve=>{al._dropDownVisible=ve})),this._register((0,f.EH)("update position",ve=>{this._position.read(ve),this.editor.layoutContentWidget(this)})),this._register((0,f.EH)("counts",ve=>{let X=this._suggestionCount.read(ve),ye=this._currentSuggestionIdx.read(ve);X!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${ye+1}/${X}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),X!==void 0&&X>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register((0,f.EH)("extra commands",ve=>{let X=this._extraCommands.read(ve);if((0,_.fS)(this.lastCommands,X))return;this.lastCommands=X;let ye=X.map(Ce=>({class:void 0,id:Ce.id,enabled:!0,tooltip:Ce.tooltip||"",label:Ce.title,run:Ee=>this._commandService.executeCommand(Ce.id)}));for(let[Ce,Ee]of this.inlineCompletionsActionsMenus.getActions())for(let Ae of Ee)Ae instanceof E.U8&&ye.push(Ae);ye.length>0&&ye.unshift(new I.Z0),this.toolBar.setAdditionalSecondaryActions(ye)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};H._dropDownVisible=!1,H.id=0,H=W([K(6,N.H),K(7,T.TG),K(8,k.d),K(9,D.i6),K(10,E.co)],H);class z extends i.Mm{updateLabel(){let fe=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!fe)return super.updateLabel();if(this.label){let q=(0,m.h)("div.keybinding").root;new u.e(q,d.OS,Object.assign({disableTitle:!0},u.F)).set(fe),this.label.textContent=this._action.label,this.label.appendChild(q),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}}let J=class extends ${constructor(oe,fe,q,p,re,ne,ie,se){super(oe,Object.assign({resetMenu:fe},q),p,re,ne,ie,se),this.menuId=fe,this.options2=q,this.menuService=p,this.contextKeyService=re,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var oe,fe,q,p,re,ne,ie;let se=[],ce=[];(0,i.vr)(this.menu,(oe=this.options2)===null||oe===void 0?void 0:oe.menuOptions,{primary:se,secondary:ce},(q=(fe=this.options2)===null||fe===void 0?void 0:fe.toolbarOptions)===null||q===void 0?void 0:q.primaryGroup,(re=(p=this.options2)===null||p===void 0?void 0:p.toolbarOptions)===null||re===void 0?void 0:re.shouldInlineSubmenu,(ie=(ne=this.options2)===null||ne===void 0?void 0:ne.toolbarOptions)===null||ie===void 0?void 0:ie.useSeparatorsInPrimaryActions),ce.push(...this.additionalActions),this.setActions(se,ce)}setAdditionalSecondaryActions(oe){(0,_.fS)(this.additionalActions,oe,(fe,q)=>fe===q)||(this.additionalActions=oe,this.updateToolbar())}};J=W([K(3,E.co),K(4,D.i6),K(5,L.i),K(6,k.d),K(7,R.b)],J)},4074:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{InlineProgressManager:()=>h});var m=t(5321),B=t(5393),u=t(3046),I=t(5976),_=t(7295),A=t(5670),x=t(4314),v=t(3654),f=t(2065);let d=v.qx.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:_.B4,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class o extends I.JT{constructor(b,l,a,w,E){super(),this.typeId=b,this.editor=l,this.range=a,this.delegate=E,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(w),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(b){this.domNode=m.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=b;let l=m.$("span.icon");this.domNode.append(l),l.classList.add(...A.k.asClassNameArray(u.l.loading),"codicon-modifier-spin");let a=()=>{let w=this.editor.getOption(64);this.domNode.style.height=`${w}px`,this.domNode.style.width=`${Math.ceil(.8*w)}px`};a(),this._register(this.editor.onDidChangeConfiguration(w=>{(w.hasChanged(50)||w.hasChanged(64))&&a()})),this._register(m.nm(this.domNode,m.tw.CLICK,w=>{this.delegate.cancel()}))}getId(){return o.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}o.baseId="editor.widget.inlineProgressWidget";let h=class extends I.JT{constructor(c,b,l){super(),this.id=c,this._editor=b,this._instantiationService=l,this._showDelay=500,this._showPromise=this._register(new I.XK),this._currentWidget=new I.XK,this._currentDecorations=b.createDecorationsCollection()}setAtPosition(c,b,l){this.clear(),this._showPromise.value=(0,B.Vg)(()=>{let a=x.e.fromPositions(c);this._currentDecorations.set([{range:a,options:d}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(o,this.id,this._editor,a,b,l))},this._showDelay)}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};var r,i;h=function(c,b,l,a){var w,E=arguments.length,D=E<3?b:a===null?a=Object.getOwnPropertyDescriptor(b,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,b,l,a);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(D=(E<3?w(D):E>3?w(b,l,D):w(b,l))||D);return E>3&&D&&Object.defineProperty(b,l,D),D}([(r=2,i=f.TG,function(c,b){i(c,b,r)})],h)},7615:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ExpandLineSelectionAction:()=>_});var m=t(6830),B=t(8108),u=t(9102),I=t(3580);class _ extends m.R6{constructor(){super({id:"expandLineSelection",label:I.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:u.u.textInputFocus,primary:2090}})}run(x,v,f){if(f=f||{},!v.hasModel())return;let d=v._getViewModel();d.model.pushStackElement(),d.setCursorStates(f.source,3,B.P.expandLineSelection(d,d.getCursorStates())),d.revealPrimaryCursor(f.source,!0)}}(0,m.Qr)(_)},995:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{AbstractCaseAction:()=>ce,AbstractDeleteAllToBoundaryAction:()=>p,AbstractSortLinesAction:()=>W,CamelCaseAction:()=>X,DeleteAllLeftAction:()=>re,DeleteAllRightAction:()=>ne,DeleteDuplicateLinesAction:()=>F,DeleteLinesAction:()=>z,DuplicateSelectionAction:()=>T,IndentLinesAction:()=>J,InsertLineAfterAction:()=>q,InsertLineBeforeAction:()=>fe,JoinLinesAction:()=>ie,KebabCaseAction:()=>ye,LowerCaseAction:()=>de,SnakeCaseAction:()=>ve,SortLinesAscendingAction:()=>K,SortLinesDescendingAction:()=>j,TitleCaseAction:()=>ue,TransposeAction:()=>se,TrimTrailingWhitespaceAction:()=>H,UpperCaseAction:()=>be});var m=t(2258),B=t(9317),u=t(6830),I=t(1329),_=t(7295),A=t(9386),x=t(4314);class v{constructor(Ee,Ae){this._selection=Ee,this._cursors=Ae,this._selectionId=null}getEditOperations(Ee,Ae){let Fe=function(_e,te){te.sort((me,xe)=>me.lineNumber===xe.lineNumber?me.column-xe.column:me.lineNumber-xe.lineNumber);for(let me=te.length-2;me>=0;me--)te[me].lineNumber===te[me+1].lineNumber&&te.splice(me,1);let Le=[],ke=0,le=0,ee=te.length;for(let me=1,xe=_e.getLineCount();me<=xe;me++){let We=_e.getLineContent(me),Ve=We.length+1,Ye=0;if(le<ee&&te[le].lineNumber===me&&(Ye=te[le].column,le++,Ye===Ve)||We.length===0)continue;let tt=_.ow(We),Qe=0;if(tt===-1)Qe=1;else{if(tt===We.length-1)continue;Qe=tt+2}Qe=Math.max(Ye,Qe),Le[ke++]=A.h.delete(new x.e(me,Qe,me,Ve))}return Le}(Ee,this._cursors);for(let _e=0,te=Fe.length;_e<te;_e++){let Le=Fe[_e];Ae.addEditOperation(Le.range,Le.text)}this._selectionId=Ae.trackSelection(this._selection)}computeCursorState(Ee,Ae){return Ae.getTrackedSelection(this._selectionId)}}var f=t(1336),d=t(187),o=t(3860),h=t(9102);class r{constructor(Ee,Ae,Fe){this._selection=Ee,this._isCopyingDown=Ae,this._noop=Fe||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(Ee,Ae){let Fe=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,Fe.startLineNumber<Fe.endLineNumber&&Fe.endColumn===1&&(this._endLineNumberDelta=1,Fe=Fe.setEndPosition(Fe.endLineNumber-1,Ee.getLineMaxColumn(Fe.endLineNumber-1)));let _e=[];for(let Le=Fe.startLineNumber;Le<=Fe.endLineNumber;Le++)_e.push(Ee.getLineContent(Le));let te=_e.join(`
`);te===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?Ae.addEditOperation(new x.e(Fe.endLineNumber,Ee.getLineMaxColumn(Fe.endLineNumber),Fe.endLineNumber+1,1),Fe.endLineNumber===Ee.getLineCount()?"":`
`):this._isCopyingDown?Ae.addEditOperation(new x.e(Fe.startLineNumber,1,Fe.startLineNumber,1),te+`
`):Ae.addEditOperation(new x.e(Fe.endLineNumber,Ee.getLineMaxColumn(Fe.endLineNumber),Fe.endLineNumber,Ee.getLineMaxColumn(Fe.endLineNumber)),`
`+te),this._selectionId=Ae.trackSelection(Fe),this._selectionDirection=this._selection.getDirection()}computeCursorState(Ee,Ae){let Fe=Ae.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let _e=Fe.startLineNumber,te=Fe.startColumn,Le=Fe.endLineNumber,ke=Fe.endColumn;this._startLineNumberDelta!==0&&(_e+=this._startLineNumberDelta,te=1),this._endLineNumberDelta!==0&&(Le+=this._endLineNumberDelta,ke=1),Fe=o.Y.createWithDirection(_e,te,Le,ke,this._selectionDirection)}return Fe}}var i=t(291),c=t(9119),b=t(1381),l=t(8279),a=t(5383),w=t(1615);let E=class{constructor(Ce,Ee,Ae,Fe){this._languageConfigurationService=Fe,this._selection=Ce,this._isMovingDown=Ee,this._autoIndent=Ae,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(Ce,Ee){let Ae=Ce.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===Ae)return void(this._selectionId=Ee.trackSelection(this._selection));if(!this._isMovingDown&&this._selection.startLineNumber===1)return void(this._selectionId=Ee.trackSelection(this._selection));this._moveEndPositionDown=!1;let Fe=this._selection;Fe.startLineNumber<Fe.endLineNumber&&Fe.endColumn===1&&(this._moveEndPositionDown=!0,Fe=Fe.setEndPosition(Fe.endLineNumber-1,Ce.getLineMaxColumn(Fe.endLineNumber-1)));let{tabSize:_e,indentSize:te,insertSpaces:Le}=Ce.getOptions(),ke=this.buildIndentConverter(_e,te,Le),le={tokenization:{getLineTokens:ee=>Ce.tokenization.getLineTokens(ee),getLanguageId:()=>Ce.getLanguageId(),getLanguageIdAtPosition:(ee,me)=>Ce.getLanguageIdAtPosition(ee,me)},getLineContent:null};if(Fe.startLineNumber===Fe.endLineNumber&&Ce.getLineMaxColumn(Fe.startLineNumber)===1){let ee=Fe.startLineNumber,me=this._isMovingDown?ee+1:ee-1;Ce.getLineMaxColumn(me)===1?Ee.addEditOperation(new x.e(1,1,1,1),null):(Ee.addEditOperation(new x.e(ee,1,ee,1),Ce.getLineContent(me)),Ee.addEditOperation(new x.e(me,1,me,Ce.getLineMaxColumn(me)),null)),Fe=new o.Y(me,1,me,1)}else{let ee,me;if(this._isMovingDown){ee=Fe.endLineNumber+1,me=Ce.getLineContent(ee),Ee.addEditOperation(new x.e(ee-1,Ce.getLineMaxColumn(ee-1),ee,Ce.getLineMaxColumn(ee)),null);let xe=me;if(this.shouldAutoIndent(Ce,Fe)){let We=this.matchEnterRule(Ce,ke,_e,ee,Fe.startLineNumber-1);if(We!==null){let Ye=_.V8(Ce.getLineContent(ee)),tt=We+l.Y(Ye,_e);xe=l.J(tt,_e,Le)+this.trimLeft(me)}else{le.getLineContent=tt=>tt===Fe.startLineNumber?Ce.getLineContent(ee):Ce.getLineContent(tt);let Ye=(0,a.n8)(this._autoIndent,le,Ce.getLanguageIdAtPosition(ee,1),Fe.startLineNumber,ke,this._languageConfigurationService);if(Ye!==null){let tt=_.V8(Ce.getLineContent(ee)),Qe=l.Y(Ye,_e);Qe!==l.Y(tt,_e)&&(xe=l.J(Qe,_e,Le)+this.trimLeft(me))}}Ee.addEditOperation(new x.e(Fe.startLineNumber,1,Fe.startLineNumber,1),xe+`
`);let Ve=this.matchEnterRuleMovingDown(Ce,ke,_e,Fe.startLineNumber,ee,xe);if(Ve!==null)Ve!==0&&this.getIndentEditsOfMovingBlock(Ce,Ee,Fe,_e,Le,Ve);else{le.getLineContent=tt=>tt===Fe.startLineNumber?xe:tt>=Fe.startLineNumber+1&&tt<=Fe.endLineNumber+1?Ce.getLineContent(tt-1):Ce.getLineContent(tt);let Ye=(0,a.n8)(this._autoIndent,le,Ce.getLanguageIdAtPosition(ee,1),Fe.startLineNumber+1,ke,this._languageConfigurationService);if(Ye!==null){let tt=_.V8(Ce.getLineContent(Fe.startLineNumber)),Qe=l.Y(Ye,_e),bt=l.Y(tt,_e);if(Qe!==bt){let ht=Qe-bt;this.getIndentEditsOfMovingBlock(Ce,Ee,Fe,_e,Le,ht)}}}}else Ee.addEditOperation(new x.e(Fe.startLineNumber,1,Fe.startLineNumber,1),xe+`
`)}else if(ee=Fe.startLineNumber-1,me=Ce.getLineContent(ee),Ee.addEditOperation(new x.e(ee,1,ee+1,1),null),Ee.addEditOperation(new x.e(Fe.endLineNumber,Ce.getLineMaxColumn(Fe.endLineNumber),Fe.endLineNumber,Ce.getLineMaxColumn(Fe.endLineNumber)),`
`+me),this.shouldAutoIndent(Ce,Fe)){le.getLineContent=We=>We===ee?Ce.getLineContent(Fe.startLineNumber):Ce.getLineContent(We);let xe=this.matchEnterRule(Ce,ke,_e,Fe.startLineNumber,Fe.startLineNumber-2);if(xe!==null)xe!==0&&this.getIndentEditsOfMovingBlock(Ce,Ee,Fe,_e,Le,xe);else{let We=(0,a.n8)(this._autoIndent,le,Ce.getLanguageIdAtPosition(Fe.startLineNumber,1),ee,ke,this._languageConfigurationService);if(We!==null){let Ve=_.V8(Ce.getLineContent(Fe.startLineNumber)),Ye=l.Y(We,_e),tt=l.Y(Ve,_e);if(Ye!==tt){let Qe=Ye-tt;this.getIndentEditsOfMovingBlock(Ce,Ee,Fe,_e,Le,Qe)}}}}}this._selectionId=Ee.trackSelection(Fe)}buildIndentConverter(Ce,Ee,Ae){return{shiftIndent:Fe=>i.U.shiftIndent(Fe,Fe.length+1,Ce,Ee,Ae),unshiftIndent:Fe=>i.U.unshiftIndent(Fe,Fe.length+1,Ce,Ee,Ae)}}parseEnterResult(Ce,Ee,Ae,Fe,_e){if(_e){let te=_e.indentation;_e.indentAction===c.wU.None||_e.indentAction===c.wU.Indent?te=_e.indentation+_e.appendText:_e.indentAction===c.wU.IndentOutdent?te=_e.indentation:_e.indentAction===c.wU.Outdent&&(te=Ee.unshiftIndent(_e.indentation)+_e.appendText);let Le=Ce.getLineContent(Fe);if(this.trimLeft(Le).indexOf(this.trimLeft(te))>=0){let ke=_.V8(Ce.getLineContent(Fe)),le=_.V8(te),ee=(0,a.tI)(Ce,Fe,this._languageConfigurationService);return ee!==null&&2&ee&&(le=Ee.unshiftIndent(le)),l.Y(le,Ae)-l.Y(ke,Ae)}}return null}matchEnterRuleMovingDown(Ce,Ee,Ae,Fe,_e,te){if(_.ow(te)>=0){let Le=Ce.getLineMaxColumn(_e),ke=(0,w.A)(this._autoIndent,Ce,new x.e(_e,Le,_e,Le),this._languageConfigurationService);return this.parseEnterResult(Ce,Ee,Ae,Fe,ke)}{let Le=Fe-1;for(;Le>=1;){let ee=Ce.getLineContent(Le);if(_.ow(ee)>=0)break;Le--}if(Le<1||Fe>Ce.getLineCount())return null;let ke=Ce.getLineMaxColumn(Le),le=(0,w.A)(this._autoIndent,Ce,new x.e(Le,ke,Le,ke),this._languageConfigurationService);return this.parseEnterResult(Ce,Ee,Ae,Fe,le)}}matchEnterRule(Ce,Ee,Ae,Fe,_e,te){let Le=_e;for(;Le>=1;){let ee;if(ee=Le===_e&&te!==void 0?te:Ce.getLineContent(Le),_.ow(ee)>=0)break;Le--}if(Le<1||Fe>Ce.getLineCount())return null;let ke=Ce.getLineMaxColumn(Le),le=(0,w.A)(this._autoIndent,Ce,new x.e(Le,ke,Le,ke),this._languageConfigurationService);return this.parseEnterResult(Ce,Ee,Ae,Fe,le)}trimLeft(Ce){return Ce.replace(/^\s+/,"")}shouldAutoIndent(Ce,Ee){if(this._autoIndent<4||!Ce.tokenization.isCheapToTokenize(Ee.startLineNumber))return!1;let Ae=Ce.getLanguageIdAtPosition(Ee.startLineNumber,1);return Ae===Ce.getLanguageIdAtPosition(Ee.endLineNumber,1)&&this._languageConfigurationService.getLanguageConfiguration(Ae).indentRulesSupport!==null}getIndentEditsOfMovingBlock(Ce,Ee,Ae,Fe,_e,te){for(let Le=Ae.startLineNumber;Le<=Ae.endLineNumber;Le++){let ke=Ce.getLineContent(Le),le=_.V8(ke),ee=l.Y(le,Fe)+te,me=l.J(ee,Fe,_e);me!==le&&(Ee.addEditOperation(new x.e(Le,1,Le,le.length+1),me),Le===Ae.endLineNumber&&Ae.endColumn<=le.length+1&&me===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(Ce,Ee){let Ae=Ee.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(Ae=Ae.setEndPosition(Ae.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&Ae.startLineNumber<Ae.endLineNumber&&(Ae=Ae.setEndPosition(Ae.endLineNumber,2)),Ae}};var D,L;E=function(Ce,Ee,Ae,Fe){var _e,te=arguments.length,Le=te<3?Ee:Fe===null?Fe=Object.getOwnPropertyDescriptor(Ee,Ae):Fe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Le=Reflect.decorate(Ce,Ee,Ae,Fe);else for(var ke=Ce.length-1;ke>=0;ke--)(_e=Ce[ke])&&(Le=(te<3?_e(Le):te>3?_e(Ee,Ae,Le):_e(Ee,Ae))||Le);return te>3&&Le&&Object.defineProperty(Ee,Ae,Le),Le}([(D=3,L=b.c_,function(Ce,Ee){L(Ce,Ee,D)})],E);class k{static getCollator(){return k._COLLATOR||(k._COLLATOR=new Intl.Collator),k._COLLATOR}constructor(Ee,Ae){this.selection=Ee,this.descending=Ae,this.selectionId=null}getEditOperations(Ee,Ae){let Fe=function(_e,te,Le){let ke=R(_e,te,Le);return ke?A.h.replace(new x.e(ke.startLineNumber,1,ke.endLineNumber,_e.getLineMaxColumn(ke.endLineNumber)),ke.after.join(`
`)):null}(Ee,this.selection,this.descending);Fe&&Ae.addEditOperation(Fe.range,Fe.text),this.selectionId=Ae.trackSelection(this.selection)}computeCursorState(Ee,Ae){return Ae.getTrackedSelection(this.selectionId)}static canRun(Ee,Ae,Fe){if(Ee===null)return!1;let _e=R(Ee,Ae,Fe);if(!_e)return!1;for(let te=0,Le=_e.before.length;te<Le;te++)if(_e.before[te]!==_e.after[te])return!0;return!1}}function R(Ce,Ee,Ae){let Fe=Ee.startLineNumber,_e=Ee.endLineNumber;if(Ee.endColumn===1&&_e--,Fe>=_e)return null;let te=[];for(let ke=Fe;ke<=_e;ke++)te.push(Ce.getLineContent(ke));let Le=te.slice(0);return Le.sort(k.getCollator().compare),Ae===!0&&(Le=Le.reverse()),{startLineNumber:Fe,endLineNumber:_e,before:te,after:Le}}k._COLLATOR=null;var O=t(3580),$=t(4144);class N extends u.R6{constructor(Ee,Ae){super(Ae),this.down=Ee}run(Ee,Ae){if(!Ae.hasModel())return;let Fe=Ae.getSelections().map((Le,ke)=>({selection:Le,index:ke,ignore:!1}));Fe.sort((Le,ke)=>x.e.compareRangesUsingStarts(Le.selection,ke.selection));let _e=Fe[0];for(let Le=1;Le<Fe.length;Le++){let ke=Fe[Le];_e.selection.endLineNumber===ke.selection.startLineNumber&&(_e.index<ke.index?ke.ignore=!0:(_e.ignore=!0,_e=ke))}let te=[];for(let Le of Fe)te.push(new r(Le.selection,this.down,Le.ignore));Ae.pushUndoStop(),Ae.executeCommands(this.id,te),Ae.pushUndoStop()}}class T extends u.R6{constructor(){super({id:"editor.action.duplicateSelection",label:O.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:h.u.writable,menuOpts:{menuId:$.eH.MenubarSelectionMenu,group:"2_line",title:O.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(Ee,Ae,Fe){if(!Ae.hasModel())return;let _e=[],te=Ae.getSelections(),Le=Ae.getModel();for(let ke of te)if(ke.isEmpty())_e.push(new r(ke,!0));else{let le=new o.Y(ke.endLineNumber,ke.endColumn,ke.endLineNumber,ke.endColumn);_e.push(new I.OY(le,Le.getValueInRange(ke)))}Ae.pushUndoStop(),Ae.executeCommands(this.id,_e),Ae.pushUndoStop()}}class C extends u.R6{constructor(Ee,Ae){super(Ae),this.down=Ee}run(Ee,Ae){let Fe=Ee.get(b.c_),_e=[],te=Ae.getSelections()||[],Le=Ae.getOption(10);for(let ke of te)_e.push(new E(ke,this.down,Le,Fe));Ae.pushUndoStop(),Ae.executeCommands(this.id,_e),Ae.pushUndoStop()}}class W extends u.R6{constructor(Ee,Ae){super(Ae),this.descending=Ee}run(Ee,Ae){let Fe=Ae.getSelections()||[];for(let te of Fe)if(!k.canRun(Ae.getModel(),te,this.descending))return;let _e=[];for(let te=0,Le=Fe.length;te<Le;te++)_e[te]=new k(Fe[te],this.descending);Ae.pushUndoStop(),Ae.executeCommands(this.id,_e),Ae.pushUndoStop()}}class K extends W{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:O.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:h.u.writable})}}class j extends W{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:O.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:h.u.writable})}}class F extends u.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:O.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:h.u.writable})}run(Ee,Ae){if(!Ae.hasModel())return;let Fe=Ae.getModel();if(Fe.getLineCount()===1&&Fe.getLineMaxColumn(1)===1)return;let _e=[],te=[],Le=0;for(let ke of Ae.getSelections()){let le=new Set,ee=[];for(let Ve=ke.startLineNumber;Ve<=ke.endLineNumber;Ve++){let Ye=Fe.getLineContent(Ve);le.has(Ye)||(ee.push(Ye),le.add(Ye))}let me=new o.Y(ke.startLineNumber,1,ke.endLineNumber,Fe.getLineMaxColumn(ke.endLineNumber)),xe=ke.startLineNumber-Le,We=new o.Y(xe,1,xe+ee.length-1,ee[ee.length-1].length);_e.push(A.h.replace(me,ee.join(`
`))),te.push(We),Le+=ke.endLineNumber-ke.startLineNumber+1-ee.length}Ae.pushUndoStop(),Ae.executeEdits(this.id,_e,te),Ae.pushUndoStop()}}class H extends u.R6{constructor(){super({id:H.ID,label:O.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:(0,m.gx)(2089,2102),weight:100}})}run(Ee,Ae,Fe){let _e=[];Fe.reason==="auto-save"&&(_e=(Ae.getSelections()||[]).map(ke=>new d.L(ke.positionLineNumber,ke.positionColumn)));let te=Ae.getSelection();if(te===null)return;let Le=new v(te,_e);Ae.pushUndoStop(),Ae.executeCommands(this.id,[Le]),Ae.pushUndoStop()}}H.ID="editor.action.trimTrailingWhitespace";class z extends u.R6{constructor(){super({id:"editor.action.deleteLines",label:O.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:h.u.writable,kbOpts:{kbExpr:h.u.textInputFocus,primary:3113,weight:100}})}run(Ee,Ae){if(!Ae.hasModel())return;let Fe=this._getLinesToRemove(Ae),_e=Ae.getModel();if(_e.getLineCount()===1&&_e.getLineMaxColumn(1)===1)return;let te=0,Le=[],ke=[];for(let le=0,ee=Fe.length;le<ee;le++){let me=Fe[le],xe=me.startLineNumber,We=me.endLineNumber,Ve=1,Ye=_e.getLineMaxColumn(We);We<_e.getLineCount()?(We+=1,Ye=1):xe>1&&(xe-=1,Ve=_e.getLineMaxColumn(xe)),Le.push(A.h.replace(new o.Y(xe,Ve,We,Ye),"")),ke.push(new o.Y(xe-te,me.positionColumn,xe-te,me.positionColumn)),te+=me.endLineNumber-me.startLineNumber+1}Ae.pushUndoStop(),Ae.executeEdits(this.id,Le,ke),Ae.pushUndoStop()}_getLinesToRemove(Ee){let Ae=Ee.getSelections().map(te=>{let Le=te.endLineNumber;return te.startLineNumber<te.endLineNumber&&te.endColumn===1&&(Le-=1),{startLineNumber:te.startLineNumber,selectionStartColumn:te.selectionStartColumn,endLineNumber:Le,positionColumn:te.positionColumn}});Ae.sort((te,Le)=>te.startLineNumber===Le.startLineNumber?te.endLineNumber-Le.endLineNumber:te.startLineNumber-Le.startLineNumber);let Fe=[],_e=Ae[0];for(let te=1;te<Ae.length;te++)_e.endLineNumber+1>=Ae[te].startLineNumber?_e.endLineNumber=Ae[te].endLineNumber:(Fe.push(_e),_e=Ae[te]);return Fe.push(_e),Fe}}class J extends u.R6{constructor(){super({id:"editor.action.indentLines",label:O.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2142,weight:100}})}run(Ee,Ae){let Fe=Ae._getViewModel();Fe&&(Ae.pushUndoStop(),Ae.executeCommands(this.id,f.u6.indent(Fe.cursorConfig,Ae.getModel(),Ae.getSelections())),Ae.pushUndoStop())}}class oe extends u.R6{constructor(){super({id:"editor.action.outdentLines",label:O.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2140,weight:100}})}run(Ee,Ae){B.CoreEditingCommands.Outdent.runEditorCommand(Ee,Ae,null)}}class fe extends u.R6{constructor(){super({id:"editor.action.insertLineBefore",label:O.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:3075,weight:100}})}run(Ee,Ae){let Fe=Ae._getViewModel();Fe&&(Ae.pushUndoStop(),Ae.executeCommands(this.id,f.u6.lineInsertBefore(Fe.cursorConfig,Ae.getModel(),Ae.getSelections())))}}class q extends u.R6{constructor(){super({id:"editor.action.insertLineAfter",label:O.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2051,weight:100}})}run(Ee,Ae){let Fe=Ae._getViewModel();Fe&&(Ae.pushUndoStop(),Ae.executeCommands(this.id,f.u6.lineInsertAfter(Fe.cursorConfig,Ae.getModel(),Ae.getSelections())))}}class p extends u.R6{run(Ee,Ae){if(!Ae.hasModel())return;let Fe=Ae.getSelection(),_e=this._getRangesToDelete(Ae),te=[];for(let le=0,ee=_e.length-1;le<ee;le++){let me=_e[le],xe=_e[le+1];x.e.intersectRanges(me,xe)===null?te.push(me):_e[le+1]=x.e.plusRange(me,xe)}te.push(_e[_e.length-1]);let Le=this._getEndCursorState(Fe,te),ke=te.map(le=>A.h.replace(le,""));Ae.pushUndoStop(),Ae.executeEdits(this.id,ke,Le),Ae.pushUndoStop()}}class re extends p{constructor(){super({id:"deleteAllLeft",label:O.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:h.u.writable,kbOpts:{kbExpr:h.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(Ee,Ae){let Fe=null,_e=[],te=0;return Ae.forEach(Le=>{let ke;if(Le.endColumn===1&&te>0){let le=Le.startLineNumber-te;ke=new o.Y(le,Le.startColumn,le,Le.startColumn)}else ke=new o.Y(Le.startLineNumber,Le.startColumn,Le.startLineNumber,Le.startColumn);te+=Le.endLineNumber-Le.startLineNumber,Le.intersectRanges(Ee)?Fe=ke:_e.push(ke)}),Fe&&_e.unshift(Fe),_e}_getRangesToDelete(Ee){let Ae=Ee.getSelections();if(Ae===null)return[];let Fe=Ae,_e=Ee.getModel();return _e===null?[]:(Fe.sort(x.e.compareRangesUsingStarts),Fe=Fe.map(te=>{if(te.isEmpty()){if(te.startColumn===1){let Le=Math.max(1,te.startLineNumber-1),ke=te.startLineNumber===1?1:_e.getLineContent(Le).length+1;return new x.e(Le,ke,te.startLineNumber,1)}return new x.e(te.startLineNumber,1,te.startLineNumber,te.startColumn)}return new x.e(te.startLineNumber,1,te.endLineNumber,te.endColumn)}),Fe)}}class ne extends p{constructor(){super({id:"deleteAllRight",label:O.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:h.u.writable,kbOpts:{kbExpr:h.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(Ee,Ae){let Fe=null,_e=[];for(let te=0,Le=Ae.length,ke=0;te<Le;te++){let le=Ae[te],ee=new o.Y(le.startLineNumber-ke,le.startColumn,le.startLineNumber-ke,le.startColumn);le.intersectRanges(Ee)?Fe=ee:_e.push(ee)}return Fe&&_e.unshift(Fe),_e}_getRangesToDelete(Ee){let Ae=Ee.getModel();if(Ae===null)return[];let Fe=Ee.getSelections();if(Fe===null)return[];let _e=Fe.map(te=>{if(te.isEmpty()){let Le=Ae.getLineMaxColumn(te.startLineNumber);return te.startColumn===Le?new x.e(te.startLineNumber,te.startColumn,te.startLineNumber+1,1):new x.e(te.startLineNumber,te.startColumn,te.startLineNumber,Le)}return te});return _e.sort(x.e.compareRangesUsingStarts),_e}}class ie extends u.R6{constructor(){super({id:"editor.action.joinLines",label:O.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(Ee,Ae){let Fe=Ae.getSelections();if(Fe===null)return;let _e=Ae.getSelection();if(_e===null)return;Fe.sort(x.e.compareRangesUsingStarts);let te=[],Le=Fe.reduce((We,Ve)=>We.isEmpty()?We.endLineNumber===Ve.startLineNumber?(_e.equalsSelection(We)&&(_e=Ve),Ve):Ve.startLineNumber>We.endLineNumber+1?(te.push(We),Ve):new o.Y(We.startLineNumber,We.startColumn,Ve.endLineNumber,Ve.endColumn):Ve.startLineNumber>We.endLineNumber?(te.push(We),Ve):new o.Y(We.startLineNumber,We.startColumn,Ve.endLineNumber,Ve.endColumn));te.push(Le);let ke=Ae.getModel();if(ke===null)return;let le=[],ee=[],me=_e,xe=0;for(let We=0,Ve=te.length;We<Ve;We++){let Ye=te[We],tt=Ye.startLineNumber,Qe=1,bt,ht,xt=0,Qt=ke.getLineContent(Ye.endLineNumber).length-Ye.endColumn;if(Ye.isEmpty()||Ye.startLineNumber===Ye.endLineNumber){let Lt=Ye.getStartPosition();Lt.lineNumber<ke.getLineCount()?(bt=tt+1,ht=ke.getLineMaxColumn(bt)):(bt=Lt.lineNumber,ht=ke.getLineMaxColumn(Lt.lineNumber))}else bt=Ye.endLineNumber,ht=ke.getLineMaxColumn(bt);let At=ke.getLineContent(tt);for(let Lt=tt+1;Lt<=bt;Lt++){let ct=ke.getLineContent(Lt),Kt=ke.getLineFirstNonWhitespaceColumn(Lt);if(Kt>=1){let pi=!0;At===""&&(pi=!1),!pi||At.charAt(At.length-1)!==" "&&At.charAt(At.length-1)!=="	"||(pi=!1,At=At.replace(/[\s\uFEFF\xA0]+$/g," "));let li=ct.substr(Kt-1);At+=(pi?" ":"")+li,xt=pi?li.length+1:li.length}else xt=0}let mi=new x.e(tt,Qe,bt,ht);if(!mi.isEmpty()){let Lt;Ye.isEmpty()?(le.push(A.h.replace(mi,At)),Lt=new o.Y(mi.startLineNumber-xe,At.length-xt+1,tt-xe,At.length-xt+1)):Ye.startLineNumber===Ye.endLineNumber?(le.push(A.h.replace(mi,At)),Lt=new o.Y(Ye.startLineNumber-xe,Ye.startColumn,Ye.endLineNumber-xe,Ye.endColumn)):(le.push(A.h.replace(mi,At)),Lt=new o.Y(Ye.startLineNumber-xe,Ye.startColumn,Ye.startLineNumber-xe,At.length-Qt)),x.e.intersectRanges(mi,_e)!==null?me=Lt:ee.push(Lt)}xe+=mi.endLineNumber-mi.startLineNumber}ee.unshift(me),Ae.pushUndoStop(),Ae.executeEdits(this.id,le,ee),Ae.pushUndoStop()}}class se extends u.R6{constructor(){super({id:"editor.action.transpose",label:O.NC("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:h.u.writable})}run(Ee,Ae){let Fe=Ae.getSelections();if(Fe===null)return;let _e=Ae.getModel();if(_e===null)return;let te=[];for(let Le=0,ke=Fe.length;Le<ke;Le++){let le=Fe[Le];if(!le.isEmpty())continue;let ee=le.getStartPosition(),me=_e.getLineMaxColumn(ee.lineNumber);if(ee.column>=me){if(ee.lineNumber===_e.getLineCount())continue;let xe=new x.e(ee.lineNumber,Math.max(1,ee.column-1),ee.lineNumber+1,1),We=_e.getValueInRange(xe).split("").reverse().join("");te.push(new I.T4(new o.Y(ee.lineNumber,Math.max(1,ee.column-1),ee.lineNumber+1,1),We))}else{let xe=new x.e(ee.lineNumber,Math.max(1,ee.column-1),ee.lineNumber,ee.column+1),We=_e.getValueInRange(xe).split("").reverse().join("");te.push(new I.hP(xe,We,new o.Y(ee.lineNumber,ee.column+1,ee.lineNumber,ee.column+1)))}}Ae.pushUndoStop(),Ae.executeCommands(this.id,te),Ae.pushUndoStop()}}class ce extends u.R6{run(Ee,Ae){let Fe=Ae.getSelections();if(Fe===null)return;let _e=Ae.getModel();if(_e===null)return;let te=Ae.getOption(125),Le=[];for(let ke of Fe)if(ke.isEmpty()){let le=ke.getStartPosition(),ee=Ae.getConfiguredWordAtPosition(le);if(!ee)continue;let me=new x.e(le.lineNumber,ee.startColumn,le.lineNumber,ee.endColumn),xe=_e.getValueInRange(me);Le.push(A.h.replace(me,this._modifyText(xe,te)))}else{let le=_e.getValueInRange(ke);Le.push(A.h.replace(ke,this._modifyText(le,te)))}Ae.pushUndoStop(),Ae.executeEdits(this.id,Le),Ae.pushUndoStop()}}class be extends ce{constructor(){super({id:"editor.action.transformToUppercase",label:O.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:h.u.writable})}_modifyText(Ee,Ae){return Ee.toLocaleUpperCase()}}class de extends ce{constructor(){super({id:"editor.action.transformToLowercase",label:O.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:h.u.writable})}_modifyText(Ee,Ae){return Ee.toLocaleLowerCase()}}class U{constructor(Ee,Ae){this._pattern=Ee,this._flags=Ae,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(Ee){}}return this._actual}isSupported(){return this.get()!==null}}class ue extends ce{constructor(){super({id:"editor.action.transformToTitlecase",label:O.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:h.u.writable})}_modifyText(Ee,Ae){let Fe=ue.titleBoundary.get();return Fe?Ee.toLocaleLowerCase().replace(Fe,_e=>_e.toLocaleUpperCase()):Ee}}ue.titleBoundary=new U("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class ve extends ce{constructor(){super({id:"editor.action.transformToSnakecase",label:O.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:h.u.writable})}_modifyText(Ee,Ae){let Fe=ve.caseBoundary.get(),_e=ve.singleLetters.get();return Fe&&_e?Ee.replace(Fe,"$1_$2").replace(_e,"$1_$2$3").toLocaleLowerCase():Ee}}ve.caseBoundary=new U("(\\p{Ll})(\\p{Lu})","gmu"),ve.singleLetters=new U("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class X extends ce{constructor(){super({id:"editor.action.transformToCamelcase",label:O.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:h.u.writable})}_modifyText(Ee,Ae){let Fe=X.wordBoundary.get();if(!Fe)return Ee;let _e=Ee.split(Fe);return _e.shift()+_e.map(te=>te.substring(0,1).toLocaleUpperCase()+te.substring(1)).join("")}}X.wordBoundary=new U("[_\\s-]","gm");class ye extends ce{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(Ee=>Ee.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:O.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:h.u.writable})}_modifyText(Ee,Ae){let Fe=ye.caseBoundary.get(),_e=ye.singleLetters.get(),te=ye.underscoreBoundary.get();return Fe&&_e&&te?Ee.replace(te,"$1-$3").replace(Fe,"$1-$2").replace(_e,"$1-$2").toLocaleLowerCase():Ee}}ye.caseBoundary=new U("(\\p{Ll})(\\p{Lu})","gmu"),ye.singleLetters=new U("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),ye.underscoreBoundary=new U("(\\S)(_)(\\S)","gm"),(0,u.Qr)(class extends N{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:O.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:$.eH.MenubarSelectionMenu,group:"2_line",title:O.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}),(0,u.Qr)(class extends N{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:O.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:$.eH.MenubarSelectionMenu,group:"2_line",title:O.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}),(0,u.Qr)(T),(0,u.Qr)(class extends C{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:O.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:$.eH.MenubarSelectionMenu,group:"2_line",title:O.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}),(0,u.Qr)(class extends C{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:O.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:h.u.writable,kbOpts:{kbExpr:h.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:$.eH.MenubarSelectionMenu,group:"2_line",title:O.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}),(0,u.Qr)(K),(0,u.Qr)(j),(0,u.Qr)(F),(0,u.Qr)(H),(0,u.Qr)(z),(0,u.Qr)(J),(0,u.Qr)(oe),(0,u.Qr)(fe),(0,u.Qr)(q),(0,u.Qr)(re),(0,u.Qr)(ne),(0,u.Qr)(ie),(0,u.Qr)(se),(0,u.Qr)(be),(0,u.Qr)(de),ve.caseBoundary.isSupported()&&ve.singleLetters.isSupported()&&(0,u.Qr)(ve),X.wordBoundary.isSupported()&&(0,u.Qr)(X),ue.titleBoundary.isSupported()&&(0,u.Qr)(ue),ye.isSupported()&&(0,u.Qr)(ye)},76:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:()=>O,LinkedEditingAction:()=>N,LinkedEditingContribution:()=>$,editorLinkedEditingBackground:()=>W});var m=t(9488),B=t(5393),u=t(1050),I=t(1264),_=t(7301),A=t(4669),x=t(5976),v=t(7295),f=t(666),d=t(6830),o=t(1640),h=t(187),r=t(4314),i=t(9102),c=t(3654),b=t(1381),l=t(3580),a=t(3983),w=t(1922),E=t(3910),D=t(8191),L=t(4013),k=function(K,j){return function(F,H){j(F,H,K)}},R=function(K,j,F,H){return new(F||(F=Promise))(function(z,J){function oe(p){try{q(H.next(p))}catch(re){J(re)}}function fe(p){try{q(H.throw(p))}catch(re){J(re)}}function q(p){var re;p.done?z(p.value):(re=p.value,re instanceof F?re:new F(function(ne){ne(re)})).then(oe,fe)}q((H=H.apply(K,j||[])).next())})};let O=new a.uy("LinkedEditingInputVisible",!1),$=class ll extends x.JT{static get(j){return j.getContribution(ll.ID)}constructor(j,F,H,z,J){super(),this.languageConfigurationService=z,this._syncRangesToken=0,this._localToDispose=this._register(new x.SL),this._editor=j,this._providers=H.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=O.bindTo(F),this._debounceInformation=J.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new x.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(oe=>{(oe.hasChanged(67)||oe.hasChanged(88))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(j){let F=this._editor.getModel(),H=F!==null&&(this._editor.getOption(67)||this._editor.getOption(88))&&this._providers.has(F);if(H===this._enabled&&!j||(this._enabled=H,this.clearRanges(),this._localToDispose.clear(),!H||F===null))return;this._localToDispose.add(A.ju.runAndSubscribe(F.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(F.getLanguageId()).getWordDefinition()}));let z=new B.vp(this._debounceInformation.get(F)),J=()=>{var q;this._rangeUpdateTriggerPromise=z.trigger(()=>this.updateRanges(),(q=this._debounceDuration)!==null&&q!==void 0?q:this._debounceInformation.get(F))},oe=new B.vp(0),fe=q=>{this._rangeSyncTriggerPromise=oe.trigger(()=>this._syncRanges(q))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{J()})),this._localToDispose.add(this._editor.onDidChangeModelContent(q=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){let p=this._currentDecorations.getRange(0);if(p&&q.changes.every(re=>p.intersectRanges(re.range)))return void fe(this._syncRangesToken)}J()})),this._localToDispose.add({dispose:()=>{z.dispose(),oe.dispose()}}),this.updateRanges()}_syncRanges(j){if(!this._editor.hasModel()||j!==this._syncRangesToken||this._currentDecorations.length===0)return;let F=this._editor.getModel(),H=this._currentDecorations.getRange(0);if(!H||H.startLineNumber!==H.endLineNumber)return this.clearRanges();let z=F.getValueInRange(H);if(this._currentWordPattern){let oe=z.match(this._currentWordPattern);if((oe?oe[0].length:0)!==z.length)return this.clearRanges()}let J=[];for(let oe=1,fe=this._currentDecorations.length;oe<fe;oe++){let q=this._currentDecorations.getRange(oe);if(q)if(q.startLineNumber!==q.endLineNumber)J.push({range:q,text:z});else{let p=F.getValueInRange(q),re=z,ne=q.startColumn,ie=q.endColumn,se=v.Mh(p,re);ne+=se,p=p.substr(se),re=re.substr(se);let ce=v.P1(p,re);ie-=ce,p=p.substr(0,p.length-ce),re=re.substr(0,re.length-ce),ne===ie&&re.length===0||J.push({range:new r.e(q.startLineNumber,ne,q.endLineNumber,ie),text:re})}}if(J.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;let oe=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",J),this._editor._getViewModel().setPrevEditOperationType(oe)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(j=!1){return R(this,void 0,void 0,function*(){if(!this._editor.hasModel())return void this.clearRanges();let F=this._editor.getPosition();if(!this._enabled&&!j||this._editor.getSelections().length>1)return void this.clearRanges();let H=this._editor.getModel(),z=H.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===z){if(F.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){let oe=this._currentDecorations.getRange(0);if(oe&&oe.containsPosition(F))return}}this.clearRanges(),this._currentRequestPosition=F,this._currentRequestModelVersion=z;let J=(0,B.PG)(oe=>R(this,void 0,void 0,function*(){try{let fe=new L.G(!1),q=yield C(this._providers,H,F,oe);if(this._debounceInformation.update(H,fe.elapsed()),J!==this._currentRequest||(this._currentRequest=null,z!==H.getVersionId()))return;let p=[];q!=null&&q.ranges&&(p=q.ranges),this._currentWordPattern=(q==null?void 0:q.wordPattern)||this._languageWordPattern;let re=!1;for(let ie=0,se=p.length;ie<se;ie++)if(r.e.containsPosition(p[ie],F)){if(re=!0,ie!==0){let ce=p[ie];p.splice(ie,1),p.unshift(ce)}break}if(!re)return void this.clearRanges();let ne=p.map(ie=>({range:ie,options:ll.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(ne),this._syncRangesToken++}catch(fe){(0,_.n2)(fe)||(0,_.dL)(fe),this._currentRequest!==J&&this._currentRequest||this.clearRanges()}}));return this._currentRequest=J,J})}};$.ID="editor.contrib.linkedEditing",$.DECORATION=c.qx.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),$=function(K,j,F,H){var z,J=arguments.length,oe=J<3?j:H===null?H=Object.getOwnPropertyDescriptor(j,F):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(K,j,F,H);else for(var fe=K.length-1;fe>=0;fe--)(z=K[fe])&&(oe=(J<3?z(oe):J>3?z(j,F,oe):z(j,F))||oe);return J>3&&oe&&Object.defineProperty(j,F,oe),oe}([k(1,a.i6),k(2,w.p),k(3,b.c_),k(4,D.A)],$);class N extends d.R6{constructor(){super({id:"editor.action.linkedEditing",label:l.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:a.Ao.and(i.u.writable,i.u.hasRenameProvider),kbOpts:{kbExpr:i.u.editorTextFocus,primary:3132,weight:100}})}runCommand(j,F){let H=j.get(o.$),[z,J]=Array.isArray(F)&&F||[void 0,void 0];return f.o.isUri(z)&&h.L.isIPosition(J)?H.openCodeEditor({resource:z},H.getActiveCodeEditor()).then(oe=>{oe&&(oe.setPosition(J),oe.invokeWithinContext(fe=>(this.reportTelemetry(fe,oe),this.run(fe,oe))))},_.dL):super.runCommand(j,F)}run(j,F){let H=$.get(F);return H?Promise.resolve(H.updateRanges(!0)):Promise.resolve()}}let T=d._l.bindToContribution($.get);function C(K,j,F,H){let z=K.ordered(j);return(0,B.Ps)(z.map(J=>()=>R(this,void 0,void 0,function*(){try{return yield J.provideLinkedEditingRanges(j,F,H)}catch(oe){return void(0,_.Cp)(oe)}})),J=>!!J&&m.Of(J==null?void 0:J.ranges))}(0,d.fK)(new T({id:"cancelLinkedEditingInput",precondition:O,handler:K=>K.clearRanges(),kbOpts:{kbExpr:i.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));let W=(0,E.P6G)("editor.linkedEditingBackground",{dark:I.Il.fromHex("#f00").transparent(.3),light:I.Il.fromHex("#f00").transparent(.3),hcDark:I.Il.fromHex("#f00").transparent(.3),hcLight:I.Il.white},l.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,d.sb)("_executeLinkedEditingProvider",(K,j,F)=>{let{linkedEditingRangeProvider:H}=K.get(w.p);return C(H,j,F,u.T.None)}),(0,d._K)($.ID,$,1),(0,d.Qr)(N)},7253:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{LinkDetector:()=>C});var m=t(5393),B=t(1050),u=t(7301),I=t(9365),_=t(5976),A=t(6663),x=t(1432),v=t(5935),f=t(4013),d=t(666),o=t(6830),h=t(3654),r=t(8191),i=t(1922),c=t(2005),b=t(9488),l=t(8401),a=t(4314),w=t(3733),E=t(4565),D=function(F,H,z,J){return new(z||(z=Promise))(function(oe,fe){function q(ne){try{re(J.next(ne))}catch(ie){fe(ie)}}function p(ne){try{re(J.throw(ne))}catch(ie){fe(ie)}}function re(ne){var ie;ne.done?oe(ne.value):(ie=ne.value,ie instanceof z?ie:new z(function(se){se(ie)})).then(q,p)}re((J=J.apply(F,H||[])).next())})};class L{constructor(H,z){this._link=H,this._provider=z}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(H){return D(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,H)).then(z=>(this._link=z||this._link,this._link.url?this.resolve(H):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class k{constructor(H){this._disposables=new _.SL;let z=[];for(let[J,oe]of H){let fe=J.links.map(q=>new L(q,oe));z=k._union(z,fe),(0,_.Wf)(J)&&this._disposables.add(J)}this.links=z}dispose(){this._disposables.dispose(),this.links.length=0}static _union(H,z){let J=[],oe,fe,q,p;for(oe=0,q=0,fe=H.length,p=z.length;oe<fe&&q<p;){let re=H[oe],ne=z[q];a.e.areIntersectingOrTouching(re.range,ne.range)?oe++:a.e.compareRangesUsingStarts(re.range,ne.range)<0?(J.push(re),oe++):(J.push(ne),q++)}for(;oe<fe;oe++)J.push(H[oe]);for(;q<p;q++)J.push(z[q]);return J}}function R(F,H,z){let J=[],oe=F.ordered(H).reverse().map((fe,q)=>Promise.resolve(fe.provideLinks(H,z)).then(p=>{p&&(J[q]=[p,fe])},u.Cp));return Promise.all(oe).then(()=>{let fe=new k((0,b.kX)(J));return z.isCancellationRequested?(fe.dispose(),new k([])):fe})}E.P.registerCommand("_executeLinkProvider",(F,...H)=>D(void 0,void 0,void 0,function*(){let[z,J]=H;(0,l.p_)(z instanceof d.o),typeof J!="number"&&(J=0);let{linkProvider:oe}=F.get(i.p),fe=F.get(w.q).getModel(z);if(!fe)return[];let q=yield R(oe,fe,B.T.None);if(!q)return[];for(let re=0;re<Math.min(J,q.links.length);re++)yield q.links[re].resolve(B.T.None);let p=q.links.slice(0);return q.dispose(),p}));var O=t(3580),$=t(9422),N=t(988),T=function(F,H){return function(z,J){H(z,J,F)}};let C=class id extends _.JT{static get(H){return H.getContribution(id.ID)}constructor(H,z,J,oe,fe){super(),this.editor=H,this.openerService=z,this.notificationService=J,this.languageFeaturesService=oe,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=fe.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new m.pY(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;let q=this._register(new c.yN(H));this._register(q.onMouseMoveOrRelevantKeyDown(([p,re])=>{this._onEditorMouseMove(p,re)})),this._register(q.onExecute(p=>{this.onEditorMouseUp(p)})),this._register(q.onCancel(p=>{this.cleanUpActiveLinkDecoration()})),this._register(H.onDidChangeConfiguration(p=>{p.hasChanged(68)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(H.onDidChangeModelContent(p=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(H.onDidChangeModel(p=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(H.onDidChangeModelLanguage(p=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(p=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}computeLinksNow(){return H=this,z=void 0,oe=function*(){if(!this.editor.hasModel()||!this.editor.getOption(68))return;let fe=this.editor.getModel();if(this.providers.has(fe)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,m.PG)(q=>R(this.providers,fe,q));try{let q=new f.G(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(fe,q.elapsed()),fe.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(q){(0,u.dL)(q)}finally{this.computePromise=null}}},new((J=void 0)||(J=Promise))(function(fe,q){function p(ie){try{ne(oe.next(ie))}catch(se){q(se)}}function re(ie){try{ne(oe.throw(ie))}catch(se){q(se)}}function ne(ie){var se;ie.done?fe(ie.value):(se=ie.value,se instanceof J?se:new J(function(ce){ce(se)})).then(p,re)}ne((oe=oe.apply(H,z||[])).next())});var H,z,J,oe}updateDecorations(H){let z=this.editor.getOption(75)==="altKey",J=[],oe=Object.keys(this.currentOccurrences);for(let q of oe){let p=this.currentOccurrences[q];J.push(p.decorationId)}let fe=[];if(H)for(let q of H)fe.push(K.decoration(q,z));this.editor.changeDecorations(q=>{let p=q.deltaDecorations(J,fe);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let re=0,ne=p.length;re<ne;re++){let ie=new K(H[re],p[re]);this.currentOccurrences[ie.decorationId]=ie}})}_onEditorMouseMove(H,z){let J=this.editor.getOption(75)==="altKey";if(this.isEnabled(H,z)){this.cleanUpActiveLinkDecoration();let oe=this.getLinkOccurrence(H.target.position);oe&&this.editor.changeDecorations(fe=>{oe.activate(fe,J),this.activeLinkDecorationId=oe.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){let H=this.editor.getOption(75)==="altKey";if(this.activeLinkDecorationId){let z=this.currentOccurrences[this.activeLinkDecorationId];z&&this.editor.changeDecorations(J=>{z.deactivate(J,H)}),this.activeLinkDecorationId=null}}onEditorMouseUp(H){if(!this.isEnabled(H))return;let z=this.getLinkOccurrence(H.target.position);z&&this.openLinkOccurrence(z,H.hasSideBySideModifier,!0)}openLinkOccurrence(H,z,J=!1){if(!this.openerService)return;let{link:oe}=H;oe.resolve(B.T.None).then(fe=>{if(typeof fe=="string"&&this.editor.hasModel()){let q=this.editor.getModel().uri;if(q.scheme===A.lg.file&&fe.startsWith(`${A.lg.file}:`)){let p=d.o.parse(fe);if(p.scheme===A.lg.file){let re=v.z_(p),ne=null;re.startsWith("/./")?ne=`.${re.substr(1)}`:re.startsWith("//./")&&(ne=`.${re.substr(2)}`),ne&&(fe=v.Vo(q,ne))}}}return this.openerService.open(fe,{openToSide:z,fromUserGesture:J,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},fe=>{let q=fe instanceof Error?fe.message:fe;q==="invalid"?this.notificationService.warn(O.NC("invalid.url","Failed to open this link because it is not well-formed: {0}",oe.url.toString())):q==="missing"?this.notificationService.warn(O.NC("missing.url","Failed to open this link because its target is missing.")):(0,u.dL)(fe)})}getLinkOccurrence(H){if(!this.editor.hasModel()||!H)return null;let z=this.editor.getModel().getDecorationsInRange({startLineNumber:H.lineNumber,startColumn:H.column,endLineNumber:H.lineNumber,endColumn:H.column},0,!0);for(let J of z){let oe=this.currentOccurrences[J.id];if(oe)return oe}return null}isEnabled(H,z){return!!(H.target.type===6&&(H.hasTriggerModifier||z&&z.keyCodeIsTriggerKey))}stop(){var H;this.computeLinks.cancel(),this.activeLinksList&&((H=this.activeLinksList)===null||H===void 0||H.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};C.ID="editor.linkDetector",C=function(F,H,z,J){var oe,fe=arguments.length,q=fe<3?H:J===null?J=Object.getOwnPropertyDescriptor(H,z):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(F,H,z,J);else for(var p=F.length-1;p>=0;p--)(oe=F[p])&&(q=(fe<3?oe(q):fe>3?oe(H,z,q):oe(H,z))||q);return fe>3&&q&&Object.defineProperty(H,z,q),q}([T(1,N.v4),T(2,$.lT),T(3,i.p),T(4,r.A)],C);let W={general:h.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:h.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class K{static decoration(H,z){return{range:H.range,options:K._getOptions(H,z,!1)}}static _getOptions(H,z,J){let oe=Object.assign({},J?W.active:W.general);return oe.hoverMessage=function(fe,q){let p=fe.url&&/^command:/i.test(fe.url.toString()),re=fe.tooltip?fe.tooltip:p?O.NC("links.navigate.executeCmd","Execute command"):O.NC("links.navigate.follow","Follow link"),ne=q?x.dz?O.NC("links.navigate.kb.meta.mac","cmd + click"):O.NC("links.navigate.kb.meta","ctrl + click"):x.dz?O.NC("links.navigate.kb.alt.mac","option + click"):O.NC("links.navigate.kb.alt","alt + click");if(fe.url){let ie="";if(/^command:/i.test(fe.url.toString())){let se=fe.url.toString().match(/^command:([^?#]+)/);if(se){let ce=se[1];ie=O.NC("tooltip.explanation","Execute command {0}",ce)}}return new I.W5("",!0).appendLink(fe.url.toString(!0).replace(/ /g,"%20"),re,ie).appendMarkdown(` (${ne})`)}return new I.W5().appendText(`${re} (${ne})`)}(H,z),oe}constructor(H,z){this.link=H,this.decorationId=z}activate(H,z){H.changeDecorationOptions(this.decorationId,K._getOptions(this.link,z,!0))}deactivate(H,z){H.changeDecorationOptions(this.decorationId,K._getOptions(this.link,z,!1))}}class j extends o.R6{constructor(){super({id:"editor.action.openLink",label:O.NC("label","Open Link"),alias:"Open Link",precondition:void 0})}run(H,z){let J=C.get(z);if(!J||!z.hasModel())return;let oe=z.getSelections();for(let fe of oe){let q=J.getLinkOccurrence(fe.getEndPosition());q&&J.openLinkOccurrence(q,!1)}}}(0,o._K)(C.ID,C,1),(0,o.Qr)(j)},3519:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(5976),B=t(6830);class u extends m.JT{constructor(_){super(),this._editor=_,this._register(this._editor.onMouseDown(A=>{let x=this._editor.getOption(112);x>=0&&A.target.type===6&&A.target.position.column>=x&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}u.ID="editor.contrib.longLinesHelper",(0,B._K)(u.ID,u,2)},5241:(ut,Ie,t)=>{"use strict";t.d(Ie,{$:()=>r});var m,B=t(7352),u=t(7301),I=t(4669),_=t(5976),A=t(2136),x=t(2042),v=t(8801),f=t(2963),d=t(988),o=function(c,b){return function(l,a){b(l,a,c)}},h=function(c,b,l,a){return new(l||(l=Promise))(function(w,E){function D(R){try{k(a.next(R))}catch(O){E(O)}}function L(R){try{k(a.throw(R))}catch(O){E(O)}}function k(R){var O;R.done?w(R.value):(O=R.value,O instanceof l?O:new l(function($){$(O)})).then(D,L)}k((a=a.apply(c,b||[])).next())})};let r=class nd{constructor(b,l,a){this._options=b,this._languageService=l,this._openerService=a,this._onDidRenderAsync=new I.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(b,l,a){if(!b)return{element:document.createElement("span"),dispose:()=>{}};let w=new _.SL,E=w.add((0,B.ap)(b,Object.assign(Object.assign({},this._getRenderOptions(b,w)),l),a));return E.element.classList.add("rendered-markdown"),{element:E.element,dispose:()=>w.dispose()}}_getRenderOptions(b,l){return{codeBlockRenderer:(a,w)=>h(this,void 0,void 0,function*(){var E,D,L;let k;a?k=this._languageService.getLanguageIdByLanguageName(a):this._options.editor&&(k=(E=this._options.editor.getModel())===null||E===void 0?void 0:E.getLanguageId()),k||(k=v.bd);let R=yield(0,f.C2)(this._languageService,w,k),O=document.createElement("span");if(O.innerHTML=(L=(D=nd._ttpTokenizer)===null||D===void 0?void 0:D.createHTML(R))!==null&&L!==void 0?L:R,this._options.editor){let $=this._options.editor.getOption(48);(0,A.N)(O,$)}else this._options.codeBlockFontFamily&&(O.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(O.style.fontSize=this._options.codeBlockFontSize),O}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:a=>function(w,E,D){return h(this,void 0,void 0,function*(){try{return yield w.open(E,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:i(D)})}catch(L){return(0,u.dL)(L),!1}})}(this._openerService,a,b.isTrusted),disposables:l}}}};function i(c){return c===!0||!(!c||!Array.isArray(c.enabledCommands))&&c.enabledCommands}r._ttpTokenizer=(m=window.trustedTypes)===null||m===void 0?void 0:m.createPolicy("tokenizeToString",{createHTML:c=>c}),r=function(c,b,l,a){var w,E=arguments.length,D=E<3?b:a===null?a=Object.getOwnPropertyDescriptor(b,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,b,l,a);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(D=(E<3?w(D):E>3?w(b,l,D):w(b,l))||D);return E>3&&D&&Object.defineProperty(b,l,D),D}([o(1,x.O),o(2,d.v4)],r)},7753:(ut,Ie,t)=>{"use strict";t.d(Ie,{O:()=>v});var m=t(5152),B=t(5393),u=t(5976),I=t(6830),_=t(4314),A=t(3580),x=t(3983);let v=class dl{static get(i){return i.getContribution(dl.ID)}constructor(i,c){this._messageWidget=new u.XK,this._messageListeners=new u.SL,this._editor=i,this._visible=dl.MESSAGE_VISIBLE.bindTo(c)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(i,c){let b;(0,m.Z9)(i),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new h(this._editor,c,i),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new B._F(()=>this.closeMessage(),3e3)),this._messageListeners.add(this._editor.onMouseMove(l=>{l.target.position&&(b?b.containsPosition(l.target.position)||this.closeMessage():b=new _.e(c.lineNumber-3,1,l.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(h.fadeOut(this._messageWidget.value))}};var f,d;v.ID="editor.contrib.messageController",v.MESSAGE_VISIBLE=new x.uy("messageVisible",!1,A.NC("messageVisible","Whether the editor is currently showing an inline message")),v=function(r,i,c,b){var l,a=arguments.length,w=a<3?i:b===null?b=Object.getOwnPropertyDescriptor(i,c):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(r,i,c,b);else for(var E=r.length-1;E>=0;E--)(l=r[E])&&(w=(a<3?l(w):a>3?l(i,c,w):l(i,c))||w);return a>3&&w&&Object.defineProperty(i,c,w),w}([(f=1,d=x.i6,function(r,i){d(r,i,f)})],v);let o=I._l.bindToContribution(v.get);(0,I.fK)(new o({id:"leaveEditorMessage",precondition:v.MESSAGE_VISIBLE,handler:r=>r.closeMessage(),kbOpts:{weight:130,primary:9}}));class h{static fadeOut(i){let c=()=>{i.dispose(),clearTimeout(b),i.getDomNode().removeEventListener("animationend",c)},b=setTimeout(c,110);return i.getDomNode().addEventListener("animationend",c),i.getDomNode().classList.add("fadeOut"),{dispose:c}}constructor(i,{lineNumber:c,column:b},l){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=i,this._editor.revealLinesInCenterIfOutsideViewport(c,c,0),this._position={lineNumber:c,column:b},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";let a=document.createElement("div");a.classList.add("anchor","top"),this._domNode.appendChild(a);let w=document.createElement("div");w.classList.add("message"),w.textContent=l,this._domNode.appendChild(w);let E=document.createElement("div");E.classList.add("anchor","below"),this._domNode.appendChild(E),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(i){this._domNode.classList.toggle("below",i===2)}}(0,I._K)(v.ID,v,4)},7061:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{AddSelectionToNextFindMatchAction:()=>N,AddSelectionToPreviousFindMatchAction:()=>T,CompatChangeAll:()=>j,FocusNextCursor:()=>q,FocusPreviousCursor:()=>p,InsertCursorAbove:()=>a,InsertCursorBelow:()=>w,MoveSelectionToNextFindMatchAction:()=>C,MoveSelectionToPreviousFindMatchAction:()=>W,MultiCursorSelectionController:()=>O,MultiCursorSelectionControllerAction:()=>$,MultiCursorSession:()=>R,MultiCursorSessionResult:()=>k,SelectHighlightsAction:()=>K,SelectionHighlighter:()=>H});var m=t(5152),B=t(5393),u=t(2258),I=t(5976),_=t(6830),A=t(8108),x=t(4314),v=t(3860),f=t(9102),d=t(1633),o=t(3580),h=t(4144),r=t(3983),i=t(1922),c=t(4495),b=t(2065);function l(re,ne){let ie=ne.filter(se=>!re.find(ce=>ce.equals(se)));if(ie.length>=1){let se=ie.map(be=>`line ${be.viewState.position.lineNumber} column ${be.viewState.position.column}`).join(", "),ce=ie.length===1?o.NC("cursorAdded","Cursor added: {0}",se):o.NC("cursorsAdded","Cursors added: {0}",se);(0,m.i7)(ce)}}class a extends _.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:o.NC("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:f.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:h.eH.MenubarSelectionMenu,group:"3_multi",title:o.NC({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(ne,ie,se){if(!ie.hasModel())return;let ce=!0;se&&se.logicalLine===!1&&(ce=!1);let be=ie._getViewModel();if(be.cursorConfig.readOnly)return;be.model.pushStackElement();let de=be.getCursorStates();be.setCursorStates(se.source,3,A.P.addCursorUp(be,de,ce)),be.revealTopMostCursor(se.source),l(de,be.getCursorStates())}}class w extends _.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:o.NC("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:f.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:h.eH.MenubarSelectionMenu,group:"3_multi",title:o.NC({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(ne,ie,se){if(!ie.hasModel())return;let ce=!0;se&&se.logicalLine===!1&&(ce=!1);let be=ie._getViewModel();if(be.cursorConfig.readOnly)return;be.model.pushStackElement();let de=be.getCursorStates();be.setCursorStates(se.source,3,A.P.addCursorDown(be,de,ce)),be.revealBottomMostCursor(se.source),l(de,be.getCursorStates())}}class E extends _.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:o.NC("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:f.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:h.eH.MenubarSelectionMenu,group:"3_multi",title:o.NC({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(ne,ie,se){if(!ne.isEmpty()){for(let ce=ne.startLineNumber;ce<ne.endLineNumber;ce++){let be=ie.getLineMaxColumn(ce);se.push(new v.Y(ce,be,ce,be))}ne.endColumn>1&&se.push(new v.Y(ne.endLineNumber,ne.endColumn,ne.endLineNumber,ne.endColumn))}}run(ne,ie){if(!ie.hasModel())return;let se=ie.getModel(),ce=ie.getSelections(),be=ie._getViewModel(),de=be.getCursorStates(),U=[];ce.forEach(ue=>this.getCursorsForSelection(ue,se,U)),U.length>0&&ie.setSelections(U),l(de,be.getCursorStates())}}class D extends _.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:o.NC("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(ne,ie){if(!ie.hasModel())return;let se=ie.getSelections(),ce=ie.getModel().getLineCount(),be=[];for(let ue=se[0].startLineNumber;ue<=ce;ue++)be.push(new v.Y(ue,se[0].startColumn,ue,se[0].endColumn));let de=ie._getViewModel(),U=de.getCursorStates();be.length>0&&ie.setSelections(be),l(U,de.getCursorStates())}}class L extends _.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:o.NC("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(ne,ie){if(!ie.hasModel())return;let se=ie.getSelections(),ce=[];for(let U=se[0].startLineNumber;U>=1;U--)ce.push(new v.Y(U,se[0].startColumn,U,se[0].endColumn));let be=ie._getViewModel(),de=be.getCursorStates();ce.length>0&&ie.setSelections(ce),l(de,be.getCursorStates())}}class k{constructor(ne,ie,se){this.selections=ne,this.revealRange=ie,this.revealScrollType=se}}class R{static create(ne,ie){if(!ne.hasModel())return null;let se=ie.getState();if(!ne.hasTextFocus()&&se.isRevealed&&se.searchString.length>0)return new R(ne,ie,!1,se.searchString,se.wholeWord,se.matchCase,null);let ce,be,de=!1,U=ne.getSelections();U.length===1&&U[0].isEmpty()?(de=!0,ce=!0,be=!0):(ce=se.wholeWord,be=se.matchCase);let ue=ne.getSelection(),ve,X=null;if(ue.isEmpty()){let ye=ne.getConfiguredWordAtPosition(ue.getStartPosition());if(!ye)return null;ve=ye.word,X=new v.Y(ue.startLineNumber,ye.startColumn,ue.startLineNumber,ye.endColumn)}else ve=ne.getModel().getValueInRange(ue).replace(/\r\n/g,`
`);return new R(ne,ie,de,ve,ce,be,X)}constructor(ne,ie,se,ce,be,de,U){this._editor=ne,this.findController=ie,this.isDisconnectedFromFindController=se,this.searchText=ce,this.wholeWord=be,this.matchCase=de,this.currentMatch=U}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let ne=this._getNextMatch();if(!ne)return null;let ie=this._editor.getSelections();return new k(ie.concat(ne),ne,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let ne=this._getNextMatch();if(!ne)return null;let ie=this._editor.getSelections();return new k(ie.slice(0,ie.length-1).concat(ne),ne,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let ce=this.currentMatch;return this.currentMatch=null,ce}this.findController.highlightFindOptions();let ne=this._editor.getSelections(),ie=ne[ne.length-1],se=this._editor.getModel().findNextMatch(this.searchText,ie.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1);return se?new v.Y(se.range.startLineNumber,se.range.startColumn,se.range.endLineNumber,se.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let ne=this._getPreviousMatch();if(!ne)return null;let ie=this._editor.getSelections();return new k(ie.concat(ne),ne,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let ne=this._getPreviousMatch();if(!ne)return null;let ie=this._editor.getSelections();return new k(ie.slice(0,ie.length-1).concat(ne),ne,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let ce=this.currentMatch;return this.currentMatch=null,ce}this.findController.highlightFindOptions();let ne=this._editor.getSelections(),ie=ne[ne.length-1],se=this._editor.getModel().findPreviousMatch(this.searchText,ie.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1);return se?new v.Y(se.range.startLineNumber,se.range.startColumn,se.range.endLineNumber,se.range.endColumn):null}selectAll(ne){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();let ie=this._editor.getModel();return ne?ie.findMatches(this.searchText,ne,!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1,1073741824):ie.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(125):null,!1,1073741824)}}class O extends I.JT{static get(ne){return ne.getContribution(O.ID)}constructor(ne){super(),this._sessionDispose=this._register(new I.SL),this._editor=ne,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(ne){if(!this._session){let ie=R.create(this._editor,ne);if(!ie)return;this._session=ie;let se={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(se.wholeWordOverride=1,se.matchCaseOverride=1,se.isRegexOverride=2),ne.getState().change(se,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(ce=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(ne.getState().onFindReplaceStateChange(ce=>{(ce.matchCase||ce.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){let ne={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(ne,!1)}this._session=null}_setSelections(ne){this._ignoreSelectionChange=!0,this._editor.setSelections(ne),this._ignoreSelectionChange=!1}_expandEmptyToWord(ne,ie){if(!ie.isEmpty())return ie;let se=this._editor.getConfiguredWordAtPosition(ie.getStartPosition());return se?new v.Y(ie.startLineNumber,se.startColumn,ie.startLineNumber,se.endColumn):ie}_applySessionResult(ne){ne&&(this._setSelections(ne.selections),ne.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(ne.revealRange,ne.revealScrollType))}getSession(ne){return this._session}addSelectionToNextFindMatch(ne){if(this._editor.hasModel()){if(!this._session){let ie=this._editor.getSelections();if(ie.length>1){let se=ne.getState().matchCase;if(!z(this._editor.getModel(),ie,se)){let ce=this._editor.getModel(),be=[];for(let de=0,U=ie.length;de<U;de++)be[de]=this._expandEmptyToWord(ce,ie[de]);return void this._editor.setSelections(be)}}}this._beginSessionIfNeeded(ne),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(ne){this._beginSessionIfNeeded(ne),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(ne){this._beginSessionIfNeeded(ne),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(ne){this._beginSessionIfNeeded(ne),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(ne){if(!this._editor.hasModel())return;let ie=null,se=ne.getState();if(se.isRevealed&&se.searchString.length>0&&se.isRegex){let ce=this._editor.getModel();ie=se.searchScope?ce.findMatches(se.searchString,se.searchScope,se.isRegex,se.matchCase,se.wholeWord?this._editor.getOption(125):null,!1,1073741824):ce.findMatches(se.searchString,!0,se.isRegex,se.matchCase,se.wholeWord?this._editor.getOption(125):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(ne),!this._session)return;ie=this._session.selectAll(se.searchScope)}if(ie.length>0){let ce=this._editor.getSelection();for(let be=0,de=ie.length;be<de;be++){let U=ie[be];if(U.range.intersectRanges(ce)){ie[be]=ie[0],ie[0]=U;break}}this._setSelections(ie.map(be=>new v.Y(be.range.startLineNumber,be.range.startColumn,be.range.endLineNumber,be.range.endColumn)))}}}O.ID="editor.contrib.multiCursorController";class $ extends _.R6{run(ne,ie){let se=O.get(ie);if(!se)return;let ce=ie._getViewModel();if(ce){let be=ce.getCursorStates(),de=d.CommonFindController.get(ie);if(de)this._run(se,de);else{let U=ne.get(b.TG).createInstance(d.CommonFindController,ie);this._run(se,U),U.dispose()}l(be,ce.getCursorStates())}}}class N extends ${constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:o.NC("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:2082,weight:100},menuOpts:{menuId:h.eH.MenubarSelectionMenu,group:"3_multi",title:o.NC({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(ne,ie){ne.addSelectionToNextFindMatch(ie)}}class T extends ${constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:o.NC("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:h.eH.MenubarSelectionMenu,group:"3_multi",title:o.NC({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(ne,ie){ne.addSelectionToPreviousFindMatch(ie)}}class C extends ${constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:o.NC("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:(0,u.gx)(2089,2082),weight:100}})}_run(ne,ie){ne.moveSelectionToNextFindMatch(ie)}}class W extends ${constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:o.NC("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(ne,ie){ne.moveSelectionToPreviousFindMatch(ie)}}class K extends ${constructor(){super({id:"editor.action.selectHighlights",label:o.NC("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:f.u.focus,primary:3114,weight:100},menuOpts:{menuId:h.eH.MenubarSelectionMenu,group:"3_multi",title:o.NC({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(ne,ie){ne.selectAll(ie)}}class j extends ${constructor(){super({id:"editor.action.changeAll",label:o.NC("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:r.Ao.and(f.u.writable,f.u.editorTextFocus),kbOpts:{kbExpr:f.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(ne,ie){ne.selectAll(ie)}}class F{constructor(ne,ie,se,ce,be){this._model=ne,this._searchText=ie,this._matchCase=se,this._wordSeparators=ce,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,be&&this._model===be._model&&this._searchText===be._searchText&&this._matchCase===be._matchCase&&this._wordSeparators===be._wordSeparators&&this._modelVersionId===be._modelVersionId&&(this._cachedFindMatches=be._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(ne=>ne.range),this._cachedFindMatches.sort(x.e.compareRangesUsingStarts)),this._cachedFindMatches}}let H=class od extends I.JT{constructor(ne,ie){super(),this._languageFeaturesService=ie,this.editor=ne,this._isEnabled=ne.getOption(103),this._decorations=ne.createDecorationsCollection(),this.updateSoon=this._register(new B.pY(()=>this._update(),300)),this.state=null,this._register(ne.onDidChangeConfiguration(ce=>{this._isEnabled=ne.getOption(103)})),this._register(ne.onDidChangeCursorSelection(ce=>{this._isEnabled&&(ce.selection.isEmpty()?ce.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(ne.onDidChangeModel(ce=>{this._setState(null)})),this._register(ne.onDidChangeModelContent(ce=>{this._isEnabled&&this.updateSoon.schedule()}));let se=d.CommonFindController.get(ne);se&&this._register(se.getState().onFindReplaceStateChange(ce=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(od._createState(this.state,this._isEnabled,this.editor))}static _createState(ne,ie,se){if(!ie||!se.hasModel())return null;let ce=se.getSelection();if(ce.startLineNumber!==ce.endLineNumber)return null;let be=O.get(se);if(!be)return null;let de=d.CommonFindController.get(se);if(!de)return null;let U=be.getSession(de);if(!U){let X=se.getSelections();if(X.length>1){let ye=de.getState().matchCase;if(!z(se.getModel(),X,ye))return null}U=R.create(se,de)}if(!U||U.currentMatch||/^[ \t]+$/.test(U.searchText)||U.searchText.length>200)return null;let ue=de.getState(),ve=ue.matchCase;if(ue.isRevealed){let X=ue.searchString;ve||(X=X.toLowerCase());let ye=U.searchText;if(ve||(ye=ye.toLowerCase()),X===ye&&U.matchCase===ue.matchCase&&U.wholeWord===ue.wholeWord&&!ue.isRegex)return null}return new F(se.getModel(),U.searchText,U.matchCase,U.wholeWord?se.getOption(125):null,ne)}_setState(ne){if(this.state=ne,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;let ie=this.editor.getModel();if(ie.isTooLargeForTokenization())return;let se=this.state.findMatches(),ce=this.editor.getSelections();ce.sort(x.e.compareRangesUsingStarts);let be=[];for(let ue=0,ve=0,X=se.length,ye=ce.length;ue<X;){let Ce=se[ue];if(ve>=ye)be.push(Ce),ue++;else{let Ee=x.e.compareRangesUsingStarts(Ce,ce[ve]);Ee<0?(!ce[ve].isEmpty()&&x.e.areIntersecting(Ce,ce[ve])||be.push(Ce),ue++):(Ee>0||ue++,ve++)}}let de=this._languageFeaturesService.documentHighlightProvider.has(ie)&&this.editor.getOption(78),U=be.map(ue=>({range:ue,options:(0,c.w)(de)}));this._decorations.set(U)}dispose(){this._setState(null),super.dispose()}};function z(re,ne,ie){let se=J(re,ne[0],!ie);for(let ce=1,be=ne.length;ce<be;ce++){let de=ne[ce];if(de.isEmpty()||se!==J(re,de,!ie))return!1}return!0}function J(re,ne,ie){let se=re.getValueInRange(ne);return ie?se.toLowerCase():se}var oe,fe;H.ID="editor.contrib.selectionHighlighter",H=function(re,ne,ie,se){var ce,be=arguments.length,de=be<3?ne:se===null?se=Object.getOwnPropertyDescriptor(ne,ie):se;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")de=Reflect.decorate(re,ne,ie,se);else for(var U=re.length-1;U>=0;U--)(ce=re[U])&&(de=(be<3?ce(de):be>3?ce(ne,ie,de):ce(ne,ie))||de);return be>3&&de&&Object.defineProperty(ne,ie,de),de}([(oe=1,fe=i.p,function(re,ne){fe(re,ne,oe)})],H);class q extends _.R6{constructor(){super({id:"editor.action.focusNextCursor",label:o.NC("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:o.NC("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(ne,ie,se){if(!ie.hasModel())return;let ce=ie._getViewModel();if(ce.cursorConfig.readOnly)return;ce.model.pushStackElement();let be=Array.from(ce.getCursorStates()),de=be.shift();de&&(be.push(de),ce.setCursorStates(se.source,3,be),ce.revealPrimaryCursor(se.source,!0),l(be,ce.getCursorStates()))}}class p extends _.R6{constructor(){super({id:"editor.action.focusPreviousCursor",label:o.NC("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:o.NC("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(ne,ie,se){if(!ie.hasModel())return;let ce=ie._getViewModel();if(ce.cursorConfig.readOnly)return;ce.model.pushStackElement();let be=Array.from(ce.getCursorStates()),de=be.pop();de&&(be.unshift(de),ce.setCursorStates(se.source,3,be),ce.revealPrimaryCursor(se.source,!0),l(be,ce.getCursorStates()))}}(0,_._K)(O.ID,O,4),(0,_._K)(H.ID,H,1),(0,_.Qr)(a),(0,_.Qr)(w),(0,_.Qr)(E),(0,_.Qr)(N),(0,_.Qr)(T),(0,_.Qr)(C),(0,_.Qr)(W),(0,_.Qr)(K),(0,_.Qr)(j),(0,_.Qr)(D),(0,_.Qr)(L),(0,_.Qr)(q),(0,_.Qr)(p)},5313:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{TriggerParameterHintsAction:()=>se});var m=t(9579),B=t(5976),u=t(6830),I=t(9102),_=t(6887),A=t(1922),x=t(5393),v=t(7301),f=t(4669),d=t(4906),o=t(1050),h=t(8401),r=t(666),i=t(187),c=t(8216),b=t(4565),l=t(3983),a=function(be,de,U,ue){return new(U||(U=Promise))(function(ve,X){function ye(Ae){try{Ee(ue.next(Ae))}catch(Fe){X(Fe)}}function Ce(Ae){try{Ee(ue.throw(Ae))}catch(Fe){X(Fe)}}function Ee(Ae){var Fe;Ae.done?ve(Ae.value):(Fe=Ae.value,Fe instanceof U?Fe:new U(function(_e){_e(Fe)})).then(ye,Ce)}Ee((ue=ue.apply(be,de||[])).next())})};let w={Visible:new l.uy("parameterHintsVisible",!1),MultipleSignatures:new l.uy("parameterHintsMultipleSignatures",!1)};function E(be,de,U,ue,ve){return a(this,void 0,void 0,function*(){let X=be.ordered(de);for(let ye of X)try{let Ce=yield ye.provideSignatureHelp(de,U,ve,ue);if(Ce)return Ce}catch(Ce){(0,v.Cp)(Ce)}})}b.P.registerCommand("_executeSignatureHelpProvider",(be,...de)=>a(void 0,void 0,void 0,function*(){let[U,ue,ve]=de;(0,h.p_)(r.o.isUri(U)),(0,h.p_)(i.L.isIPosition(ue)),(0,h.p_)(typeof ve=="string"||!ve);let X=be.get(A.p),ye=yield be.get(c.S).createModelReference(U);try{let Ce=yield E(X.signatureHelpProvider,ye.object.textEditorModel,i.L.lift(ue),{triggerKind:_.WW.Invoke,isRetrigger:!1,triggerCharacter:ve},o.T.None);return Ce?(setTimeout(()=>Ce.dispose(),0),Ce.value):void 0}finally{ye.dispose()}}));var D;(function(be){be.Default={type:0},be.Pending=class{constructor(de,U){this.request=de,this.previouslyActiveHints=U,this.type=2}},be.Active=class{constructor(de){this.hints=de,this.type=1}}})(D||(D={}));class L extends B.JT{constructor(de,U,ue=L.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new f.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=D.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new B.XK),this.triggerChars=new d.q,this.retriggerChars=new d.q,this.triggerId=0,this.editor=de,this.providers=U,this.throttledDelayer=new x.vp(ue),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(ve=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(ve=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(ve=>this.onCursorChange(ve))),this._register(this.editor.onDidChangeModelContent(ve=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(ve=>this.onDidType(ve))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(de){this._state.type===2&&this._state.request.cancel(),this._state=de}cancel(de=!1){this.state=D.Default,this.throttledDelayer.cancel(),de||this._onChangedHints.fire(void 0)}trigger(de,U){let ue=this.editor.getModel();if(!ue||!this.providers.has(ue))return;let ve=++this.triggerId;this._pendingTriggers.push(de),this.throttledDelayer.trigger(()=>this.doTrigger(ve),U).catch(v.dL)}next(){if(this.state.type!==1)return;let de=this.state.hints.signatures.length,U=this.state.hints.activeSignature,ue=U%de==de-1,ve=this.editor.getOption(82).cycle;!(de<2||ue)||ve?this.updateActiveSignature(ue&&ve?0:U+1):this.cancel()}previous(){if(this.state.type!==1)return;let de=this.state.hints.signatures.length,U=this.state.hints.activeSignature,ue=U===0,ve=this.editor.getOption(82).cycle;!(de<2||ue)||ve?this.updateActiveSignature(ue&&ve?de-1:U-1):this.cancel()}updateActiveSignature(de){this.state.type===1&&(this.state=new D.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:de})),this._onChangedHints.fire(this.state.hints))}doTrigger(de){return U=this,ue=void 0,X=function*(){let ye=this.state.type===1||this.state.type===2,Ce=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;let Ee=this._pendingTriggers.reduce(k);this._pendingTriggers=[];let Ae={triggerKind:Ee.triggerKind,triggerCharacter:Ee.triggerCharacter,isRetrigger:ye,activeSignatureHelp:Ce};if(!this.editor.hasModel())return!1;let Fe=this.editor.getModel(),_e=this.editor.getPosition();this.state=new D.Pending((0,x.PG)(te=>E(this.providers,Fe,_e,Ae,te)),Ce);try{let te=yield this.state.request;return de!==this.triggerId?(te==null||te.dispose(),!1):te&&te.value.signatures&&te.value.signatures.length!==0?(this.state=new D.Active(te.value),this._lastSignatureHelpResult.value=te,this._onChangedHints.fire(this.state.hints),!0):(te==null||te.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(te){return de===this.triggerId&&(this.state=D.Default),(0,v.dL)(te),!1}},new((ve=void 0)||(ve=Promise))(function(ye,Ce){function Ee(_e){try{Fe(X.next(_e))}catch(te){Ce(te)}}function Ae(_e){try{Fe(X.throw(_e))}catch(te){Ce(te)}}function Fe(_e){var te;_e.done?ye(_e.value):(te=_e.value,te instanceof ve?te:new ve(function(Le){Le(te)})).then(Ee,Ae)}Fe((X=X.apply(U,ue||[])).next())});var U,ue,ve,X}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();let de=this.editor.getModel();if(de)for(let U of this.providers.ordered(de)){for(let ue of U.signatureHelpTriggerCharacters||[])if(ue.length){let ve=ue.charCodeAt(0);this.triggerChars.add(ve),this.retriggerChars.add(ve)}for(let ue of U.signatureHelpRetriggerCharacters||[])ue.length&&this.retriggerChars.add(ue.charCodeAt(0))}}onDidType(de){if(!this.triggerOnType)return;let U=de.length-1,ue=de.charCodeAt(U);(this.triggerChars.has(ue)||this.isTriggered&&this.retriggerChars.has(ue))&&this.trigger({triggerKind:_.WW.TriggerCharacter,triggerCharacter:de.charAt(U)})}onCursorChange(de){de.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:_.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:_.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(82).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function k(be,de){switch(de.triggerKind){case _.WW.Invoke:return de;case _.WW.ContentChange:return be;case _.WW.TriggerCharacter:default:return de}}L.DEFAULT_DELAY=120;var R=t(3580),O=t(2065),$=t(5321),N=t(5152),T=t(9802),C=t(3046),W=t(7295),K=t(2042),j=t(5241),F=t(988),H=t(3910),z=t(9554),J=t(5670),oe=function(be,de){return function(U,ue){de(U,ue,be)}};let fe=$.$,q=(0,z.q5)("parameter-hints-next",C.l.chevronDown,R.NC("parameterHintsNextIcon","Icon for show next parameter hint.")),p=(0,z.q5)("parameter-hints-previous",C.l.chevronUp,R.NC("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),re=class sd extends B.JT{constructor(de,U,ue,ve,X){super(),this.editor=de,this.model=U,this.renderDisposeables=this._register(new B.SL),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new j.$({editor:de},X,ve)),this.keyVisible=w.Visible.bindTo(ue),this.keyMultipleSignatures=w.MultipleSignatures.bindTo(ue)}createParameterHintDOMNodes(){let de=fe(".editor-widget.parameter-hints-widget"),U=$.R3(de,fe(".phwrapper"));U.tabIndex=-1;let ue=$.R3(U,fe(".controls")),ve=$.R3(ue,fe(".button"+J.k.asCSSSelector(p))),X=$.R3(ue,fe(".overloads")),ye=$.R3(ue,fe(".button"+J.k.asCSSSelector(q)));this._register($.nm(ve,"click",te=>{$.zB.stop(te),this.previous()})),this._register($.nm(ye,"click",te=>{$.zB.stop(te),this.next()}));let Ce=fe(".body"),Ee=new T.s$(Ce,{alwaysConsumeMouseWheel:!0});this._register(Ee),U.appendChild(Ee.getDomNode());let Ae=$.R3(Ce,fe(".signature")),Fe=$.R3(Ce,fe(".docs"));de.style.userSelect="text",this.domNodes={element:de,signature:Ae,overloads:X,docs:Fe,scrollbar:Ee},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(te=>{this.visible&&this.editor.layoutContentWidget(this)}));let _e=()=>{if(!this.domNodes)return;let te=this.editor.getOption(48);this.domNodes.element.style.fontSize=`${te.fontSize}px`,this.domNodes.element.style.lineHeight=""+te.lineHeight/te.fontSize};_e(),this._register(f.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(te=>te.hasChanged(48)).on(_e,null)),this._register(this.editor.onDidLayoutChange(te=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var de;(de=this.domNodes)===null||de===void 0||de.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var de;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(de=this.domNodes)===null||de===void 0||de.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(de){var U;if(this.renderDisposeables.clear(),!this.domNodes)return;let ue=de.signatures.length>1;this.domNodes.element.classList.toggle("multiple",ue),this.keyMultipleSignatures.set(ue),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";let ve=de.signatures[de.activeSignature];if(!ve)return;let X=$.R3(this.domNodes.signature,fe(".code")),ye=this.editor.getOption(48);X.style.fontSize=`${ye.fontSize}px`,X.style.fontFamily=ye.fontFamily;let Ce=ve.parameters.length>0,Ee=(U=ve.activeParameter)!==null&&U!==void 0?U:de.activeParameter;Ce?this.renderParameters(X,ve,Ee):$.R3(X,fe("span")).textContent=ve.label;let Ae=ve.parameters[Ee];if(Ae!=null&&Ae.documentation){let _e=fe("span.documentation");if(typeof Ae.documentation=="string")_e.textContent=Ae.documentation;else{let te=this.renderMarkdownDocs(Ae.documentation);_e.appendChild(te.element)}$.R3(this.domNodes.docs,fe("p",{},_e))}if(ve.documentation!==void 0)if(typeof ve.documentation=="string")$.R3(this.domNodes.docs,fe("p",{},ve.documentation));else{let _e=this.renderMarkdownDocs(ve.documentation);$.R3(this.domNodes.docs,_e.element)}let Fe=this.hasDocs(ve,Ae);if(this.domNodes.signature.classList.toggle("has-docs",Fe),this.domNodes.docs.classList.toggle("empty",!Fe),this.domNodes.overloads.textContent=String(de.activeSignature+1).padStart(de.signatures.length.toString().length,"0")+"/"+de.signatures.length,Ae){let _e="",te=ve.parameters[Ee];_e=Array.isArray(te.label)?ve.label.substring(te.label[0],te.label[1]):te.label,te.documentation&&(_e+=typeof te.documentation=="string"?`, ${te.documentation}`:`, ${te.documentation.value}`),ve.documentation&&(_e+=typeof ve.documentation=="string"?`, ${ve.documentation}`:`, ${ve.documentation.value}`),this.announcedLabel!==_e&&(N.Z9(R.NC("hint","{0}, hint",_e)),this.announcedLabel=_e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(de){let U=this.renderDisposeables.add(this.markdownRenderer.render(de,{asyncRenderCallback:()=>{var ue;(ue=this.domNodes)===null||ue===void 0||ue.scrollbar.scanDomNode()}}));return U.element.classList.add("markdown-docs"),U}hasDocs(de,U){return!!(U&&typeof U.documentation=="string"&&(0,h.cW)(U.documentation).length>0||U&&typeof U.documentation=="object"&&(0,h.cW)(U.documentation).value.length>0||de.documentation&&typeof de.documentation=="string"&&(0,h.cW)(de.documentation).length>0||de.documentation&&typeof de.documentation=="object"&&(0,h.cW)(de.documentation.value).length>0)}renderParameters(de,U,ue){let[ve,X]=this.getParameterLabelOffsets(U,ue),ye=document.createElement("span");ye.textContent=U.label.substring(0,ve);let Ce=document.createElement("span");Ce.textContent=U.label.substring(ve,X),Ce.className="parameter active";let Ee=document.createElement("span");Ee.textContent=U.label.substring(X),$.R3(de,ye,Ce,Ee)}getParameterLabelOffsets(de,U){let ue=de.parameters[U];if(ue){if(Array.isArray(ue.label))return ue.label;if(ue.label.length){let ve=new RegExp(`(\\W|^)${(0,W.ec)(ue.label)}(?=\\W|$)`,"g");ve.test(de.label);let X=ve.lastIndex-ue.label.length;return X>=0?[X,ve.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return sd.ID}updateMaxHeight(){if(!this.domNodes)return;let de=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=de;let U=this.domNodes.element.getElementsByClassName("phwrapper");U.length&&(U[0].style.maxHeight=de)}};re.ID="editor.widget.parameterHintsWidget",re=function(be,de,U,ue){var ve,X=arguments.length,ye=X<3?de:ue===null?ue=Object.getOwnPropertyDescriptor(de,U):ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ye=Reflect.decorate(be,de,U,ue);else for(var Ce=be.length-1;Ce>=0;Ce--)(ve=be[Ce])&&(ye=(X<3?ve(ye):X>3?ve(de,U,ye):ve(de,U))||ye);return X>3&&ye&&Object.defineProperty(de,U,ye),ye}([oe(2,l.i6),oe(3,F.v4),oe(4,K.O)],re),(0,H.P6G)("editorHoverWidget.highlightForeground",{dark:H.Gwp,light:H.Gwp,hcDark:H.Gwp,hcLight:H.Gwp},R.NC("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var ne=function(be,de){return function(U,ue){de(U,ue,be)}};let ie=class rd extends B.JT{static get(de){return de.getContribution(rd.ID)}constructor(de,U,ue){super(),this.editor=de,this.model=this._register(new L(de,ue.signatureHelpProvider)),this._register(this.model.onChangedHints(ve=>{var X;ve?(this.widget.value.show(),this.widget.value.render(ve)):(X=this.widget.rawValue)===null||X===void 0||X.hide()})),this.widget=new m.o(()=>this._register(U.createInstance(re,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var de;(de=this.widget.rawValue)===null||de===void 0||de.previous()}next(){var de;(de=this.widget.rawValue)===null||de===void 0||de.next()}trigger(de){this.model.trigger(de,0)}};ie.ID="editor.controller.parameterHints",ie=function(be,de,U,ue){var ve,X=arguments.length,ye=X<3?de:ue===null?ue=Object.getOwnPropertyDescriptor(de,U):ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ye=Reflect.decorate(be,de,U,ue);else for(var Ce=be.length-1;Ce>=0;Ce--)(ve=be[Ce])&&(ye=(X<3?ve(ye):X>3?ve(de,U,ye):ve(de,U))||ye);return X>3&&ye&&Object.defineProperty(de,U,ye),ye}([ne(1,O.TG),ne(2,A.p)],ie);class se extends u.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:R.NC("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:I.u.hasSignatureHelpProvider,kbOpts:{kbExpr:I.u.editorTextFocus,primary:3082,weight:100}})}run(de,U){let ue=ie.get(U);ue==null||ue.trigger({triggerKind:_.WW.Invoke})}}(0,u._K)(ie.ID,ie,2),(0,u.Qr)(se);let ce=u._l.bindToContribution(ie.get);(0,u.fK)(new ce({id:"closeParameterHints",precondition:w.Visible,handler:be=>be.cancel(),kbOpts:{weight:175,kbExpr:I.u.focus,primary:9,secondary:[1033]}})),(0,u.fK)(new ce({id:"showPrevParameterHint",precondition:l.Ao.and(w.Visible,w.MultipleSignatures),handler:be=>be.previous(),kbOpts:{weight:175,kbExpr:I.u.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,u.fK)(new ce({id:"showNextParameterHint",precondition:l.Ao.and(w.Visible,w.MultipleSignatures),handler:be=>be.next(),kbOpts:{weight:175,kbExpr:I.u.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))},2049:(ut,Ie,t)=>{"use strict";t.d(Ie,{Fw:()=>K,Jy:()=>j,vk:()=>J,rc:()=>H,SC:()=>p,M8:()=>re,KY:()=>oe,IH:()=>fe,R7:()=>q});var m=t(5321),B=t(317),u=t(4741),I=t(3046),_=t(5670),A=t(1264),x=t(4669),v=t(6248),f=t(6830),d=t(1640),o=t(4527),h=t(3098),r=t(4742),i=t(5976),c=t(4314),b=t(3654);let l=new A.Il(new A.VS(0,122,204)),a={showArrow:!0,showFrame:!0,className:"",frameColor:l,arrowColor:l,keepEditorSelection:!1};class w{constructor(se,ce,be,de,U,ue,ve,X){this.id="",this.domNode=se,this.afterLineNumber=ce,this.afterColumn=be,this.heightInLines=de,this.showInHiddenAreas=ve,this.ordinal=X,this._onDomNodeTop=U,this._onComputedHeight=ue}onDomNodeTop(se){this._onDomNodeTop(se)}onComputedHeight(se){this._onComputedHeight(se)}}class E{constructor(se,ce){this._id=se,this._domNode=ce}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class D{constructor(se){this._editor=se,this._ruleName=D._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),m.uN(this._ruleName)}set color(se){this._color!==se&&(this._color=se,this._updateStyle())}set height(se){this._height!==se&&(this._height=se,this._updateStyle())}_updateStyle(){m.uN(this._ruleName),m.fk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(se){se.column===1&&(se={lineNumber:se.lineNumber,column:2}),this._decorations.set([{range:c.e.fromPositions(se),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}D._IdGenerator=new r.R(".arrow-decoration-");class L{constructor(se,ce={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new i.SL,this.container=null,this._isShowing=!1,this.editor=se,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=v.I8(ce),v.jB(this.options,a,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(be=>{let de=this._getWidth(be);this.domNode.style.width=de+"px",this.domNode.style.left=this._getLeft(be)+"px",this._onWidth(de)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(se=>{this._viewZone&&se.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new D(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(se){se.frameColor&&(this.options.frameColor=se.frameColor),se.arrowColor&&(this.options.arrowColor=se.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let se=this.options.frameColor.toString();this.container.style.borderTopColor=se,this.container.style.borderBottomColor=se}if(this._arrow&&this.options.arrowColor){let se=this.options.arrowColor.toString();this._arrow.color=se}}_getWidth(se){return se.width-se.minimap.minimapWidth-se.verticalScrollbarWidth}_getLeft(se){return se.minimap.minimapWidth>0&&se.minimap.minimapLeft===0?se.minimap.minimapWidth:0}_onViewZoneTop(se){this.domNode.style.top=se+"px"}_onViewZoneHeight(se){var ce;if(this.domNode.style.height=`${se}px`,this.container){let be=se-this._decoratingElementsHeight();this.container.style.height=`${be}px`;let de=this.editor.getLayoutInfo();this._doLayout(be,this._getWidth(de))}(ce=this._resizeSash)===null||ce===void 0||ce.layout()}get position(){let se=this._positionMarkerId.getRange(0);if(se)return se.getStartPosition()}show(se,ce){let be=c.e.isIRange(se)?c.e.lift(se):c.e.fromPositions(se);this._isShowing=!0,this._showImpl(be,ce),this._isShowing=!1,this._positionMarkerId.set([{range:be,options:b.qx.EMPTY}])}hide(){var se;this._viewZone&&(this.editor.changeViewZones(ce=>{this._viewZone&&ce.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(se=this._arrow)===null||se===void 0||se.hide()}_decoratingElementsHeight(){let se=this.editor.getOption(64),ce=0;return this.options.showArrow&&(ce+=2*Math.round(se/3)),this.options.showFrame&&(ce+=2*Math.round(se/9)),ce}_showImpl(se,ce){let be=se.getStartPosition(),de=this.editor.getLayoutInfo(),U=this._getWidth(de);this.domNode.style.width=`${U}px`,this.domNode.style.left=this._getLeft(de)+"px";let ue=document.createElement("div");ue.style.overflow="hidden";let ve=this.editor.getOption(64),X=Math.max(12,this.editor.getLayoutInfo().height/ve*.8);ce=Math.min(ce,X);let ye=0,Ce=0;if(this._arrow&&this.options.showArrow&&(ye=Math.round(ve/3),this._arrow.height=ye,this._arrow.show(be)),this.options.showFrame&&(Ce=Math.round(ve/9)),this.editor.changeViewZones(Fe=>{this._viewZone&&Fe.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new w(ue,be.lineNumber,be.column,ce,_e=>this._onViewZoneTop(_e),_e=>this._onViewZoneHeight(_e),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=Fe.addZone(this._viewZone),this._overlayWidget=new E("vs.editor.contrib.zoneWidget"+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){let Fe=this.options.frameWidth?this.options.frameWidth:Ce;this.container.style.borderTopWidth=Fe+"px",this.container.style.borderBottomWidth=Fe+"px"}let Ee=ce*ve-this._decoratingElementsHeight();this.container&&(this.container.style.top=ye+"px",this.container.style.height=Ee+"px",this.container.style.overflow="hidden"),this._doLayout(Ee,U),this.options.keepEditorSelection||this.editor.setSelection(se);let Ae=this.editor.getModel();if(Ae){let Fe=Ae.validateRange(new c.e(se.startLineNumber,1,se.endLineNumber+1,1));this.revealRange(Fe,Fe.endLineNumber===Ae.getLineCount())}}revealRange(se,ce){ce?this.editor.revealLineNearTop(se.endLineNumber,0):this.editor.revealRange(se,0)}setCssClass(se,ce){this.container&&(ce&&this.container.classList.remove(ce),this.container.classList.add(se))}_onWidth(se){}_doLayout(se,ce){}_relayout(se){this._viewZone&&this._viewZone.heightInLines!==se&&this.editor.changeViewZones(ce=>{this._viewZone&&(this._viewZone.heightInLines=se,ce.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;let se;this._resizeSash=this._disposables.add(new h.g(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart(ce=>{this._viewZone&&(se={startY:ce.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{se=void 0})),this._disposables.add(this._resizeSash.onDidChange(ce=>{if(se){let be=(ce.currentY-se.startY)/this.editor.getOption(64),de=be<0?Math.ceil(be):Math.floor(be),U=se.heightInLines+de;U>5&&U<35&&this._relayout(U)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){let se=this.editor.getLayoutInfo();return se.width-se.minimap.minimapWidth}}var k=t(3580),R=t(2444),O=t(3983),$=t(5026),N=t(2065),T=t(3910),C=function(ie,se,ce,be){var de,U=arguments.length,ue=U<3?se:be===null?be=Object.getOwnPropertyDescriptor(se,ce):be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ue=Reflect.decorate(ie,se,ce,be);else for(var ve=ie.length-1;ve>=0;ve--)(de=ie[ve])&&(ue=(U<3?de(ue):U>3?de(se,ce,ue):de(se,ce))||ue);return U>3&&ue&&Object.defineProperty(se,ce,ue),ue},W=function(ie,se){return function(ce,be){se(ce,be,ie)}};let K=(0,N.yh)("IPeekViewService");var j;(0,$.z)(K,class{constructor(){this._widgets=new Map}addExclusiveWidget(ie,se){let ce=this._widgets.get(ie);ce&&(ce.listener.dispose(),ce.widget.dispose()),this._widgets.set(ie,{widget:se,listener:se.onDidClose(()=>{let be=this._widgets.get(ie);be&&be.widget===se&&(be.listener.dispose(),this._widgets.delete(ie))})})}},1),function(ie){ie.inPeekEditor=new O.uy("inReferenceSearchEditor",!0,k.NC("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),ie.notInPeekEditor=ie.inPeekEditor.toNegated()}(j||(j={}));let F=class{constructor(ie,se){ie instanceof o.H&&j.inPeekEditor.bindTo(se)}dispose(){}};function H(ie){let se=ie.get(d.$).getFocusedCodeEditor();return se instanceof o.H?se.getParentEditor():se}F.ID="editor.contrib.referenceController",F=C([W(1,O.i6)],F),(0,f._K)(F.ID,F,0);let z={headerBackgroundColor:A.Il.white,primaryHeadingColor:A.Il.fromHex("#333333"),secondaryHeadingColor:A.Il.fromHex("#6c6c6cb3")},J=class extends L{constructor(ie,se,ce){super(ie,se),this.instantiationService=ce,this._onDidClose=new x.Q5,this.onDidClose=this._onDidClose.event,v.jB(this.options,z,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(ie){let se=this.options;ie.headerBackgroundColor&&(se.headerBackgroundColor=ie.headerBackgroundColor),ie.primaryHeadingColor&&(se.primaryHeadingColor=ie.primaryHeadingColor),ie.secondaryHeadingColor&&(se.secondaryHeadingColor=ie.secondaryHeadingColor),super.style(ie)}_applyStyles(){super._applyStyles();let ie=this.options;this._headElement&&ie.headerBackgroundColor&&(this._headElement.style.backgroundColor=ie.headerBackgroundColor.toString()),this._primaryHeading&&ie.primaryHeadingColor&&(this._primaryHeading.style.color=ie.primaryHeadingColor.toString()),this._secondaryHeading&&ie.secondaryHeadingColor&&(this._secondaryHeading.style.color=ie.secondaryHeadingColor.toString()),this._bodyElement&&ie.frameColor&&(this._bodyElement.style.borderColor=ie.frameColor.toString())}_fillContainer(ie){this.setCssClass("peekview-widget"),this._headElement=m.$(".head"),this._bodyElement=m.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),ie.appendChild(this._headElement),ie.appendChild(this._bodyElement)}_fillHead(ie,se){this._titleElement=m.$(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),m.mu(this._titleElement,"click",de=>this._onTitleClick(de))),m.R3(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=m.$("span.filename"),this._secondaryHeading=m.$("span.dirname"),this._metaHeading=m.$("span.meta"),m.R3(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);let ce=m.$(".peekview-actions");m.R3(this._headElement,ce);let be=this._getActionBarOptions();this._actionbarWidget=new B.o(ce,be),this._disposables.add(this._actionbarWidget),se||this._actionbarWidget.push(new u.aU("peekview.close",k.NC("label.close","Close"),_.k.asClassName(I.l.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(ie){}_getActionBarOptions(){return{actionViewItemProvider:R.Id.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(ie){}setTitle(ie,se){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=ie,this._primaryHeading.setAttribute("title",ie),se?this._secondaryHeading.innerText=se:m.PO(this._secondaryHeading))}setMetaTitle(ie){this._metaHeading&&(ie?(this._metaHeading.innerText=ie,m.$Z(this._metaHeading)):m.Cp(this._metaHeading))}_doLayout(ie,se){if(!this._isShowing&&ie<0)return void this.dispose();let ce=Math.ceil(1.2*this.editor.getOption(64)),be=Math.round(ie-(ce+2));this._doLayoutHead(ce,se),this._doLayoutBody(be,se)}_doLayoutHead(ie,se){this._headElement&&(this._headElement.style.height=`${ie}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(ie,se){this._bodyElement&&(this._bodyElement.style.height=`${ie}px`)}};J=C([W(2,N.TG)],J);let oe=(0,T.P6G)("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:A.Il.black,hcLight:A.Il.white},k.NC("peekViewTitleBackground","Background color of the peek view title area.")),fe=(0,T.P6G)("peekViewTitleLabel.foreground",{dark:A.Il.white,light:A.Il.black,hcDark:A.Il.white,hcLight:T.NOs},k.NC("peekViewTitleForeground","Color of the peek view title.")),q=(0,T.P6G)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},k.NC("peekViewTitleInfoForeground","Color of the peek view title info.")),p=(0,T.P6G)("peekView.border",{dark:T.c63,light:T.c63,hcDark:T.lRK,hcLight:T.lRK},k.NC("peekViewBorder","Color of the peek view borders and arrow.")),re=(0,T.P6G)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:A.Il.black,hcLight:A.Il.white},k.NC("peekViewResultsBackground","Background color of the peek view result list.")),ne=((0,T.P6G)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:A.Il.white,hcLight:T.NOs},k.NC("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),(0,T.P6G)("peekViewResult.fileForeground",{dark:A.Il.white,light:"#1E1E1E",hcDark:A.Il.white,hcLight:T.NOs},k.NC("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),(0,T.P6G)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},k.NC("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),(0,T.P6G)("peekViewResult.selectionForeground",{dark:A.Il.white,light:"#6C6C6C",hcDark:A.Il.white,hcLight:T.NOs},k.NC("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),(0,T.P6G)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:A.Il.black,hcLight:A.Il.white},k.NC("peekViewEditorBackground","Background color of the peek view editor.")));(0,T.P6G)("peekViewEditorGutter.background",{dark:ne,light:ne,hcDark:ne,hcLight:ne},k.NC("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),(0,T.P6G)("peekViewEditorStickyScroll.background",{dark:ne,light:ne,hcDark:ne,hcLight:ne},k.NC("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),(0,T.P6G)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},k.NC("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),(0,T.P6G)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},k.NC("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),(0,T.P6G)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:T.xL1,hcLight:T.xL1},k.NC("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},3943:(ut,Ie,t)=>{"use strict";t.d(Ie,{X:()=>f});var m=t(8289),B=t(5976),u=t(8401),I=t(5520),_=t(4973),A=t(8625),x=t(7781),v=t(5152);class f{constructor(o){this.options=o,this.rangeHighlightDecorationId=void 0}provide(o,h){var r;let i=new B.SL;o.canAcceptInBackground=!!(!((r=this.options)===null||r===void 0)&&r.canAcceptInBackground),o.matchOnLabel=o.matchOnDescription=o.matchOnDetail=o.sortByLabel=!1;let c=i.add(new B.XK);return c.value=this.doProvide(o,h),i.add(this.onDidActiveTextEditorControlChange(()=>{c.value=void 0,c.value=this.doProvide(o,h)})),i}doProvide(o,h){let r=new B.SL,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){let c={editor:i},b=(0,I.Pi)(i);if(b){let l=(0,u.f6)(i.saveViewState());r.add(b.onDidChangeCursorPosition(()=>{l=(0,u.f6)(i.saveViewState())})),c.restoreViewState=()=>{l&&i===this.activeTextEditorControl&&i.restoreViewState(l)},r.add((0,m.I)(h.onCancellationRequested)(()=>{var a;return(a=c.restoreViewState)===null||a===void 0?void 0:a.call(c)}))}r.add((0,B.OF)(()=>this.clearDecorations(i))),r.add(this.provideWithTextEditor(c,o,h))}else r.add(this.provideWithoutTextEditor(o,h));return r}canProvideWithTextEditor(o){return!0}gotoLocation({editor:o},h){o.setSelection(h.range),o.revealRangeInCenter(h.range,0),h.preserveFocus||o.focus();let r=o.getModel();r&&"getLineContent"in r&&(0,v.Z9)(`${r.getLineContent(h.range.startLineNumber)}`)}getModel(o){var h;return(0,I.QI)(o)?(h=o.getModel())===null||h===void 0?void 0:h.modified:o.getModel()}addDecorations(o,h){o.changeDecorations(r=>{let i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);let c=[{range:h,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:h,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,x.EN)(A.m9),position:_.sh.Full}}}],[b,l]=r.deltaDecorations(i,c);this.rangeHighlightDecorationId={rangeHighlightId:b,overviewRulerDecorationId:l}})}clearDecorations(o){let h=this.rangeHighlightDecorationId;h&&(o.changeDecorations(r=>{r.deltaDecorations([h.overviewRulerDecorationId,h.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}},3945:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ReadOnlyMessageController:()=>_});var m=t(5976),B=t(6830),u=t(7753),I=t(3580);class _ extends m.JT{constructor(x){super(),this.editor=x,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){let x=u.O.get(this.editor);x&&this.editor.hasModel()&&(this.editor.isSimpleWidget?x.showMessage(I.NC("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):x.showMessage(I.NC("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}_.ID="editor.contrib.readOnlyMessageController",(0,B._K)(_.ID,_,2)},2894:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{RenameAction:()=>oe,rename:()=>z});var m=t(5152),B=t(5393),u=t(1050),I=t(7301),_=t(5976),A=t(8401),x=t(666),v=t(6467),f=t(6830),d=t(6007),o=t(1640),h=t(187),r=t(4314),i=t(9102),c=t(1765),b=t(7753),l=t(3580),a=t(3193),w=t(3983),E=t(2065),D=t(3557),L=t(9422),k=t(535),R=t(9872),O=t(1847),$=t(3910),N=t(7781),T=function(q,p){return function(re,ne){p(re,ne,q)}};let C=new w.uy("renameInputVisible",!1,(0,l.NC)("renameInputVisible","Whether the rename input widget is visible")),W=class{constructor(q,p,re,ne,ie){this._editor=q,this._acceptKeybindings=p,this._themeService=re,this._keybindingService=ne,this._disposables=new _.SL,this.allowEditorOverflow=!0,this._visibleContextKey=C.bindTo(ie),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(se=>{se.hasChanged(48)&&this._updateFont()})),this._disposables.add(re.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,l.NC)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(q){var p,re,ne,ie;if(!this._input||!this._domNode)return;let se=q.getColor($.rh),ce=q.getColor($.A42);this._domNode.style.backgroundColor=String((p=q.getColor($.D0T))!==null&&p!==void 0?p:""),this._domNode.style.boxShadow=se?` 0 0 8px 2px ${se}`:"",this._domNode.style.border=ce?`1px solid ${ce}`:"",this._domNode.style.color=String((re=q.getColor($.zJb))!==null&&re!==void 0?re:""),this._input.style.backgroundColor=String((ne=q.getColor($.sEe))!==null&&ne!==void 0?ne:"");let be=q.getColor($.dt_);this._input.style.borderWidth=be?"1px":"0px",this._input.style.borderStyle=be?"solid":"none",this._input.style.borderColor=(ie=be==null?void 0:be.toString())!==null&&ie!==void 0?ie:"none"}_updateFont(){if(!this._input||!this._label)return;let q=this._editor.getOption(48);this._input.style.fontFamily=q.fontFamily,this._input.style.fontWeight=q.fontWeight,this._input.style.fontSize=`${q.fontSize}px`,this._label.style.fontSize=.8*q.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}beforeRender(){var q,p;let[re,ne]=this._acceptKeybindings;return this._label.innerText=(0,l.NC)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(q=this._keybindingService.lookupKeybinding(re))===null||q===void 0?void 0:q.getLabel(),(p=this._keybindingService.lookupKeybinding(ne))===null||p===void 0?void 0:p.getLabel()),null}afterRender(q){q||this.cancelInput(!0)}acceptInput(q){var p;(p=this._currentAcceptInput)===null||p===void 0||p.call(this,q)}cancelInput(q){var p;(p=this._currentCancelInput)===null||p===void 0||p.call(this,q)}getInput(q,p,re,ne,ie,se){this._domNode.classList.toggle("preview",ie),this._position=new h.L(q.startLineNumber,q.startColumn),this._input.value=p,this._input.setAttribute("selectionStart",re.toString()),this._input.setAttribute("selectionEnd",ne.toString()),this._input.size=Math.max(1.1*(q.endColumn-q.startColumn),20);let ce=new _.SL;return new Promise(be=>{this._currentCancelInput=de=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,be(de),!0),this._currentAcceptInput=de=>{this._input.value.trim().length!==0&&this._input.value!==p?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,be({newName:this._input.value,wantsPreview:ie&&de})):this.cancelInput(!0)},ce.add(se.onCancellationRequested(()=>this.cancelInput(!0))),ce.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!document.hasFocus()))),this._show()}).finally(()=>{ce.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};W=function(q,p,re,ne){var ie,se=arguments.length,ce=se<3?p:ne===null?ne=Object.getOwnPropertyDescriptor(p,re):ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(q,p,re,ne);else for(var be=q.length-1;be>=0;be--)(ie=q[be])&&(ce=(se<3?ie(ce):se>3?ie(p,re,ce):ie(p,re))||ce);return se>3&&ce&&Object.defineProperty(p,re,ce),ce}([T(2,N.XE),T(3,O.d),T(4,w.i6)],W);var K=t(1922),j=function(q,p){return function(re,ne){p(re,ne,q)}},F=function(q,p,re,ne){return new(re||(re=Promise))(function(ie,se){function ce(U){try{de(ne.next(U))}catch(ue){se(ue)}}function be(U){try{de(ne.throw(U))}catch(ue){se(ue)}}function de(U){var ue;U.done?ie(U.value):(ue=U.value,ue instanceof re?ue:new re(function(ve){ve(ue)})).then(ce,be)}de((ne=ne.apply(q,p||[])).next())})};class H{constructor(p,re,ne){this.model=p,this.position=re,this._providerRenameIdx=0,this._providers=ne.ordered(p)}hasProvider(){return this._providers.length>0}resolveRenameLocation(p){return F(this,void 0,void 0,function*(){let re=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){let ie=this._providers[this._providerRenameIdx];if(!ie.resolveRenameLocation)break;let se=yield ie.resolveRenameLocation(this.model,this.position,p);if(se){if(!se.rejectReason)return se;re.push(se.rejectReason)}}let ne=this.model.getWordAtPosition(this.position);return ne?{range:new r.e(this.position.lineNumber,ne.startColumn,this.position.lineNumber,ne.endColumn),text:ne.word,rejectReason:re.length>0?re.join(`
`):void 0}:{range:r.e.fromPositions(this.position),text:"",rejectReason:re.length>0?re.join(`
`):void 0}})}provideRenameEdits(p,re){return F(this,void 0,void 0,function*(){return this._provideRenameEdits(p,this._providerRenameIdx,[],re)})}_provideRenameEdits(p,re,ne,ie){return F(this,void 0,void 0,function*(){let se=this._providers[re];if(!se)return{edits:[],rejectReason:ne.join(`
`)};let ce=yield se.provideRenameEdits(this.model,this.position,p,ie);return ce?ce.rejectReason?this._provideRenameEdits(p,re+1,ne.concat(ce.rejectReason),ie):ce:this._provideRenameEdits(p,re+1,ne.concat(l.NC("no result","No result.")),ie)})}}function z(q,p,re,ne){return F(this,void 0,void 0,function*(){let ie=new H(p,re,q),se=yield ie.resolveRenameLocation(u.T.None);return se!=null&&se.rejectReason?{edits:[],rejectReason:se.rejectReason}:ie.provideRenameEdits(ne,u.T.None)})}let J=class ad{static get(p){return p.getContribution(ad.ID)}constructor(p,re,ne,ie,se,ce,be,de){this.editor=p,this._instaService=re,this._notificationService=ne,this._bulkEditService=ie,this._progressService=se,this._logService=ce,this._configService=be,this._languageFeaturesService=de,this._disposableStore=new _.SL,this._cts=new u.A,this._renameInputField=this._disposableStore.add(this._instaService.createInstance(W,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var p,re;return F(this,void 0,void 0,function*(){if(this._cts.dispose(!0),this._cts=new u.A,!this.editor.hasModel())return;let ne=this.editor.getPosition(),ie=new H(this.editor.getModel(),ne,this._languageFeaturesService.renameProvider);if(!ie.hasProvider())return;let se=new v.Dl(this.editor,5,void 0,this._cts.token),ce;try{let Ce=ie.resolveRenameLocation(se.token);this._progressService.showWhile(Ce,250),ce=yield Ce}catch(Ce){return void((p=b.O.get(this.editor))===null||p===void 0||p.showMessage(Ce||l.NC("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),ne))}finally{se.dispose()}if(!ce)return;if(ce.rejectReason)return void((re=b.O.get(this.editor))===null||re===void 0||re.showMessage(ce.rejectReason,ne));if(se.token.isCancellationRequested)return;let be=new v.Dl(this.editor,5,ce.range,this._cts.token),de=this.editor.getSelection(),U=0,ue=ce.text.length;r.e.isEmpty(de)||r.e.spansMultipleLines(de)||!r.e.containsRange(ce.range,de)||(U=Math.max(0,de.startColumn-ce.range.startColumn),ue=Math.min(ce.range.endColumn,de.endColumn)-ce.range.startColumn);let ve=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),X=yield this._renameInputField.getInput(ce.range,ce.text,U,ue,ve,be.token);if(typeof X=="boolean")return X&&this.editor.focus(),void be.dispose();this.editor.focus();let ye=(0,B.eP)(ie.provideRenameEdits(X.newName,be.token),be.token).then(Ce=>F(this,void 0,void 0,function*(){Ce&&this.editor.hasModel()&&(Ce.rejectReason?this._notificationService.info(Ce.rejectReason):(this.editor.setSelection(r.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(Ce,{editor:this.editor,showPreview:X.wantsPreview,label:l.NC("label","Renaming '{0}' to '{1}'",ce==null?void 0:ce.text,X.newName),code:"undoredo.rename",quotableLabel:l.NC("quotableLabel","Renaming {0} to {1}",ce==null?void 0:ce.text,X.newName),respectAutoSaveConfig:!0}).then(Ee=>{Ee.ariaSummary&&(0,m.Z9)(l.NC("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",ce.text,X.newName,Ee.ariaSummary))}).catch(Ee=>{this._notificationService.error(l.NC("rename.failedApply","Rename failed to apply edits")),this._logService.error(Ee)})))}),Ce=>{this._notificationService.error(l.NC("rename.failed","Rename failed to compute edits")),this._logService.error(Ce)}).finally(()=>{be.dispose()});return this._progressService.showWhile(ye,250),ye})}acceptRenameInput(p){this._renameInputField.acceptInput(p)}cancelRenameInput(){this._renameInputField.cancelInput(!0)}};J.ID="editor.contrib.renameController",J=function(q,p,re,ne){var ie,se=arguments.length,ce=se<3?p:ne===null?ne=Object.getOwnPropertyDescriptor(p,re):ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(q,p,re,ne);else for(var be=q.length-1;be>=0;be--)(ie=q[be])&&(ce=(se<3?ie(ce):se>3?ie(p,re,ce):ie(p,re))||ce);return se>3&&ce&&Object.defineProperty(p,re,ce),ce}([j(1,E.TG),j(2,L.lT),j(3,d.vu),j(4,k.ek),j(5,D.VZ),j(6,c.V),j(7,K.p)],J);class oe extends f.R6{constructor(){super({id:"editor.action.rename",label:l.NC("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:w.Ao.and(i.u.writable,i.u.hasRenameProvider),kbOpts:{kbExpr:i.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(p,re){let ne=p.get(o.$),[ie,se]=Array.isArray(re)&&re||[void 0,void 0];return x.o.isUri(ie)&&h.L.isIPosition(se)?ne.openCodeEditor({resource:ie},ne.getActiveCodeEditor()).then(ce=>{ce&&(ce.setPosition(se),ce.invokeWithinContext(be=>(this.reportTelemetry(be,ce),this.run(be,ce))))},I.dL):super.runCommand(p,re)}run(p,re){let ne=J.get(re);return ne?ne.run():Promise.resolve()}}(0,f._K)(J.ID,J,4),(0,f.Qr)(oe);let fe=f._l.bindToContribution(J.get);(0,f.fK)(new fe({id:"acceptRenameInput",precondition:C,handler:q=>q.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:w.Ao.and(i.u.focus,w.Ao.not("isComposing")),primary:3}})),(0,f.fK)(new fe({id:"acceptRenameInputWithPreview",precondition:w.Ao.and(C,w.Ao.has("config.editor.rename.enablePreview")),handler:q=>q.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:w.Ao.and(i.u.focus,w.Ao.not("isComposing")),primary:1027}})),(0,f.fK)(new fe({id:"cancelRenameInput",precondition:C,handler:q=>q.cancelRenameInput(),kbOpts:{weight:199,kbExpr:i.u.focus,primary:9,secondary:[1033]}})),(0,f.sb)("_executeDocumentRenameProvider",function(q,p,re,...ne){let[ie]=ne;(0,A.p_)(typeof ie=="string");let{renameProvider:se}=q.get(K.p);return z(se,p,re,ie)}),(0,f.sb)("_executePrepareRename",function(q,p,re){return F(this,void 0,void 0,function*(){let{renameProvider:ne}=q.get(K.p),ie=new H(p,re,ne),se=yield ie.resolveRenameLocation(u.T.None);if(se!=null&&se.rejectReason)throw new Error(se.rejectReason);return se})}),R.B.as(a.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:l.NC("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})},1168:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{DocumentSemanticTokensFeature:()=>a});var m=t(5976),B=t(7301),u=t(3733),I=t(3108),_=t(5393),A=t(1050),x=t(7781),v=t(8802),f=t(4983),d=t(8191),o=t(4013),h=t(1922),r=t(3343),i=t(637),c=t(4408),b=function(D,L,k,R){var O,$=arguments.length,N=$<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,k):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(D,L,k,R);else for(var T=D.length-1;T>=0;T--)(O=D[T])&&(N=($<3?O(N):$>3?O(L,k,N):O(L,k))||N);return $>3&&N&&Object.defineProperty(L,k,N),N},l=function(D,L){return function(k,R){L(k,R,D)}};let a=class extends m.JT{constructor(D,L,k,R,O,$){super(),this._watchers=Object.create(null);let N=W=>{this._watchers[W.uri.toString()]=new w(W,D,k,O,$)},T=(W,K)=>{K.dispose(),delete this._watchers[W.uri.toString()]},C=()=>{for(let W of L.getModels()){let K=this._watchers[W.uri.toString()];(0,c.t)(W,k,R)?K||N(W):K&&T(W,K)}};this._register(L.onModelAdded(W=>{(0,c.t)(W,k,R)&&N(W)})),this._register(L.onModelRemoved(W=>{let K=this._watchers[W.uri.toString()];K&&T(W,K)})),this._register(R.onDidChangeConfiguration(W=>{W.affectsConfiguration(c.e)&&C()})),this._register(k.onDidColorThemeChange(C))}dispose(){for(let D of Object.values(this._watchers))D.dispose();super.dispose()}};a=b([l(0,r.s),l(1,u.q),l(2,x.XE),l(3,I.Ui),l(4,d.A),l(5,h.p)],a);let w=class xs extends m.JT{constructor(L,k,R,O,$){super(),this._semanticTokensStylingService=k,this._isDisposed=!1,this._model=L,this._provider=$.documentSemanticTokensProvider,this._debounceInformation=O.for(this._provider,"DocumentSemanticTokens",{min:xs.REQUEST_MIN_DELAY,max:xs.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new _.pY(()=>this._fetchDocumentSemanticTokensNow(),xs.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let N=()=>{(0,m.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(let T of this._provider.all(L))typeof T.onDidChange=="function"&&this._documentProvidersChangeListeners.push(T.onDidChange(()=>{this._currentDocumentRequestCancellationTokenSource?this._providersChangedDuringRequest=!0:this._fetchDocumentSemanticTokens.schedule(0)}))};N(),this._register(this._provider.onDidChange(()=>{N(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(R.onDidColorThemeChange(T=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!(0,f.Jc)(this._provider,this._model))return void(this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1));if(!this._model.isAttachedToEditor())return;let L=new A.A,k=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,R=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,O=(0,f.ML)(this._provider,this._model,k,R,L.token);this._currentDocumentRequestCancellationTokenSource=L,this._providersChangedDuringRequest=!1;let $=[],N=this._model.onDidChangeContent(C=>{$.push(C)}),T=new o.G(!1);O.then(C=>{if(this._debounceInformation.update(this._model,T.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,N.dispose(),C){let{provider:W,tokens:K}=C,j=this._semanticTokensStylingService.getStyling(W);this._setDocumentSemanticTokens(W,K||null,j,$)}else this._setDocumentSemanticTokens(null,null,null,$)},C=>{C&&(B.n2(C)||typeof C.message=="string"&&C.message.indexOf("busy")!==-1)||B.dL(C),this._currentDocumentRequestCancellationTokenSource=null,N.dispose(),($.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(L,k,R,O,$){$=Math.min($,R.length-O,L.length-k);for(let N=0;N<$;N++)R[O+N]=L[k+N]}_setDocumentSemanticTokens(L,k,R,O){let $=this._currentDocumentResponse,N=()=>{(O.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)L&&k&&L.releaseDocumentSemanticTokens(k.resultId);else if(L&&R){if(!k)return this._model.tokenization.setSemanticTokens(null,!0),void N();if((0,f.Vj)(k)){if(!$)return void this._model.tokenization.setSemanticTokens(null,!0);if(k.edits.length===0)k={resultId:k.resultId,data:$.data};else{let T=0;for(let F of k.edits)T+=(F.data?F.data.length:0)-F.deleteCount;let C=$.data,W=new Uint32Array(C.length+T),K=C.length,j=W.length;for(let F=k.edits.length-1;F>=0;F--){let H=k.edits[F];if(H.start>C.length)return R.warnInvalidEditStart($.resultId,k.resultId,F,H.start,C.length),void this._model.tokenization.setSemanticTokens(null,!0);let z=K-(H.start+H.deleteCount);z>0&&(xs._copy(C,K-z,W,j-z,z),j-=z),H.data&&(xs._copy(H.data,0,W,j-H.data.length,H.data.length),j-=H.data.length),K=H.start}K>0&&xs._copy(C,0,W,0,K),k={resultId:k.resultId,data:W}}}if((0,f.Vl)(k)){this._currentDocumentResponse=new E(L,k.resultId,k.data);let T=(0,v.h)(k,R,this._model.getLanguageId());if(O.length>0)for(let C of O)for(let W of T)for(let K of C.changes)W.applyEdit(K.range,K.text);this._model.tokenization.setSemanticTokens(T,!0)}else this._model.tokenization.setSemanticTokens(null,!0);N()}else this._model.tokenization.setSemanticTokens(null,!1)}};w.REQUEST_MIN_DELAY=300,w.REQUEST_MAX_DELAY=2e3,w=b([l(1,r.s),l(2,x.XE),l(3,d.A),l(4,h.p)],w);class E{constructor(L,k,R){this.provider=L,this.resultId=k,this.data=R}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}(0,i.y)(a)},9995:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ViewportSemanticTokensContribution:()=>i});var m=t(5393),B=t(5976),u=t(6830),I=t(4983),_=t(4408),A=t(8802),x=t(3108),v=t(7781),f=t(8191),d=t(4013),o=t(1922),h=t(3343),r=function(c,b){return function(l,a){b(l,a,c)}};let i=class extends B.JT{constructor(c,b,l,a,w,E){super(),this._semanticTokensStylingService=b,this._themeService=l,this._configurationService=a,this._editor=c,this._provider=E.documentRangeSemanticTokensProvider,this._debounceInformation=w.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new m.pY(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];let D=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{D()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),D()})),this._register(this._editor.onDidChangeModelContent(L=>{this._cancelAll(),D()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),D()})),this._register(this._configurationService.onDidChangeConfiguration(L=>{L.affectsConfiguration(_.e)&&(this._cancelAll(),D())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),D()})),D()}_cancelAll(){for(let c of this._outstandingRequests)c.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(c){for(let b=0,l=this._outstandingRequests.length;b<l;b++)if(this._outstandingRequests[b]===c)return void this._outstandingRequests.splice(b,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;let c=this._editor.getModel();if(c.tokenization.hasCompleteSemanticTokens())return;if(!(0,_.t)(c,this._themeService,this._configurationService)||!(0,I.KO)(this._provider,c))return void(c.tokenization.hasSomeSemanticTokens()&&c.tokenization.setSemanticTokens(null,!1));let b=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(b.map(l=>this._requestRange(c,l)))}_requestRange(c,b){let l=c.getVersionId(),a=(0,m.PG)(E=>Promise.resolve((0,I.OG)(this._provider,c,b,E))),w=new d.G(!1);return a.then(E=>{if(this._debounceInformation.update(c,w.elapsed()),!E||!E.tokens||c.isDisposed()||c.getVersionId()!==l)return;let{provider:D,tokens:L}=E,k=this._semanticTokensStylingService.getStyling(D);c.tokenization.setPartialSemanticTokens(b,(0,A.h)(L,k,c.getLanguageId()))}).then(()=>this._removeOutstandingRequest(a),()=>this._removeOutstandingRequest(a)),a}};i.ID="editor.contrib.viewportSemanticTokens",i=function(c,b,l,a){var w,E=arguments.length,D=E<3?b:a===null?a=Object.getOwnPropertyDescriptor(b,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,b,l,a);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(D=(E<3?w(D):E>3?w(b,l,D):w(b,l))||D);return E>3&&D&&Object.defineProperty(b,l,D),D}([r(1,h.s),r(2,v.XE),r(3,x.Ui),r(4,f.A),r(5,o.p)],i),(0,u._K)(i.ID,i,1)},4983:(ut,Ie,t)=>{"use strict";t.d(Ie,{OG:()=>D,ML:()=>l,KO:()=>w,Jc:()=>b,Vl:()=>r,Vj:()=>i});var m=t(1050),B=t(7301),u=t(666),I=t(3733),_=t(4565),A=t(8401),x=t(3060),v=t(1432);function f(L){let k=new Uint32Array(function(O){let $=0;if($+=2,O.type==="full")$+=1+O.data.length;else{$+=1,$+=3*O.deltas.length;for(let N of O.deltas)N.data&&($+=N.data.length)}return $}(L)),R=0;if(k[R++]=L.id,L.type==="full")k[R++]=1,k[R++]=L.data.length,k.set(L.data,R),R+=L.data.length;else{k[R++]=2,k[R++]=L.deltas.length;for(let O of L.deltas)k[R++]=O.start,k[R++]=O.deleteCount,O.data?(k[R++]=O.data.length,k.set(O.data,R),R+=O.data.length):k[R++]=0}return function(O){let $=new Uint8Array(O.buffer,O.byteOffset,4*O.length);return v.r()||function(N){for(let T=0,C=N.length;T<C;T+=4){let W=N[T+0],K=N[T+1],j=N[T+2],F=N[T+3];N[T+0]=F,N[T+1]=j,N[T+2]=K,N[T+3]=W}}($),x.KN.wrap($)}(k)}var d=t(4314),o=t(1922),h=function(L,k,R,O){return new(R||(R=Promise))(function($,N){function T(K){try{W(O.next(K))}catch(j){N(j)}}function C(K){try{W(O.throw(K))}catch(j){N(j)}}function W(K){var j;K.done?$(K.value):(j=K.value,j instanceof R?j:new R(function(F){F(j)})).then(T,C)}W((O=O.apply(L,k||[])).next())})};function r(L){return L&&!!L.data}function i(L){return L&&Array.isArray(L.edits)}class c{constructor(k,R,O){this.provider=k,this.tokens=R,this.error=O}}function b(L,k){return L.has(k)}function l(L,k,R,O,$){return h(this,void 0,void 0,function*(){let N=function(C,W){let K=C.orderedGroups(W);return K.length>0?K[0]:[]}(L,k),T=yield Promise.all(N.map(C=>h(this,void 0,void 0,function*(){let W,K=null;try{W=yield C.provideDocumentSemanticTokens(k,C===R?O:null,$)}catch(j){K=j,W=null}return W&&(r(W)||i(W))||(W=null),new c(C,W,K)})));for(let C of T){if(C.error)throw C.error;if(C.tokens)return C}return T.length>0?T[0]:null})}class a{constructor(k,R){this.provider=k,this.tokens=R}}function w(L,k){return L.has(k)}function E(L,k){let R=L.orderedGroups(k);return R.length>0?R[0]:[]}function D(L,k,R,O){return h(this,void 0,void 0,function*(){let $=E(L,k),N=yield Promise.all($.map(T=>h(this,void 0,void 0,function*(){let C;try{C=yield T.provideDocumentRangeSemanticTokens(k,R,O)}catch(W){(0,B.Cp)(W),C=null}return C&&r(C)||(C=null),new a(T,C)})));for(let T of N)if(T.tokens)return T;return N.length>0?N[0]:null})}_.P.registerCommand("_provideDocumentSemanticTokensLegend",(L,...k)=>h(void 0,void 0,void 0,function*(){let[R]=k;(0,A.p_)(R instanceof u.o);let O=L.get(I.q).getModel(R);if(!O)return;let{documentSemanticTokensProvider:$}=L.get(o.p),N=function(T,C){let W=T.orderedGroups(C);return W.length>0?W[0]:null}($,O);return N?N[0].getLegend():L.get(_.H).executeCommand("_provideDocumentRangeSemanticTokensLegend",R)})),_.P.registerCommand("_provideDocumentSemanticTokens",(L,...k)=>h(void 0,void 0,void 0,function*(){let[R]=k;(0,A.p_)(R instanceof u.o);let O=L.get(I.q).getModel(R);if(!O)return;let{documentSemanticTokensProvider:$}=L.get(o.p);if(!b($,O))return L.get(_.H).executeCommand("_provideDocumentRangeSemanticTokens",R,O.getFullModelRange());let N=yield l($,O,null,null,m.T.None);if(!N)return;let{provider:T,tokens:C}=N;if(!C||!r(C))return;let W=f({id:0,type:"full",data:C.data});return C.resultId&&T.releaseDocumentSemanticTokens(C.resultId),W})),_.P.registerCommand("_provideDocumentRangeSemanticTokensLegend",(L,...k)=>h(void 0,void 0,void 0,function*(){let[R,O]=k;(0,A.p_)(R instanceof u.o);let $=L.get(I.q).getModel(R);if(!$)return;let{documentRangeSemanticTokensProvider:N}=L.get(o.p),T=E(N,$);if(T.length===0)return;if(T.length===1)return T[0].getLegend();if(!O||!d.e.isIRange(O))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),T[0].getLegend();let C=yield D(N,$,d.e.lift(O),m.T.None);return C?C.provider.getLegend():void 0})),_.P.registerCommand("_provideDocumentRangeSemanticTokens",(L,...k)=>h(void 0,void 0,void 0,function*(){let[R,O]=k;(0,A.p_)(R instanceof u.o),(0,A.p_)(d.e.isIRange(O));let $=L.get(I.q).getModel(R);if(!$)return;let{documentRangeSemanticTokensProvider:N}=L.get(o.p),T=yield D(N,$,d.e.lift(O),m.T.None);return T&&T.tokens?f({id:0,type:"full",data:T.tokens.data}):void 0}))},4408:(ut,Ie,t)=>{"use strict";t.d(Ie,{e:()=>m,t:()=>B});let m="editor.semanticHighlighting";function B(u,I,_){var A;let x=(A=_.getValue(m,{overrideIdentifier:u.getLanguageId(),resource:u.uri}))===null||A===void 0?void 0:A.enabled;return typeof x=="boolean"?x:I.getColorTheme().semanticHighlighting}},9694:(ut,Ie,t)=>{"use strict";t.d(Ie,{x:()=>I});var m=t(1741),B=t(187),u=t(4314);class I{provideSelectionRanges(A,x){return v=this,f=void 0,o=function*(){let h=[];for(let r of x){let i=[];h.push(i);let c=new Map;yield new Promise(b=>I._bracketsRightYield(b,0,A,r,c)),yield new Promise(b=>I._bracketsLeftYield(b,0,A,r,c,i))}return h},new((d=void 0)||(d=Promise))(function(h,r){function i(l){try{b(o.next(l))}catch(a){r(a)}}function c(l){try{b(o.throw(l))}catch(a){r(a)}}function b(l){var a;l.done?h(l.value):(a=l.value,a instanceof d?a:new d(function(w){w(a)})).then(i,c)}b((o=o.apply(v,f||[])).next())});var v,f,d,o}static _bracketsRightYield(A,x,v,f,d){let o=new Map,h=Date.now();for(;;){if(x>=I._maxRounds){A();break}if(!f){A();break}let r=v.bracketPairs.findNextBracket(f);if(!r){A();break}if(Date.now()-h>I._maxDuration){setTimeout(()=>I._bracketsRightYield(A,x+1,v,f,d));break}if(r.bracketInfo.isOpeningBracket){let i=r.bracketInfo.bracketText,c=o.has(i)?o.get(i):0;o.set(i,c+1)}else{let i=r.bracketInfo.getOpeningBrackets()[0].bracketText,c=o.has(i)?o.get(i):0;if(c-=1,o.set(i,Math.max(0,c)),c<0){let b=d.get(i);b||(b=new m.S,d.set(i,b)),b.push(r.range)}}f=r.range.getEndPosition()}}static _bracketsLeftYield(A,x,v,f,d,o){let h=new Map,r=Date.now();for(;;){if(x>=I._maxRounds&&d.size===0){A();break}if(!f){A();break}let i=v.bracketPairs.findPrevBracket(f);if(!i){A();break}if(Date.now()-r>I._maxDuration){setTimeout(()=>I._bracketsLeftYield(A,x+1,v,f,d,o));break}if(i.bracketInfo.isOpeningBracket){let c=i.bracketInfo.bracketText,b=h.has(c)?h.get(c):0;if(b-=1,h.set(c,Math.max(0,b)),b<0){let l=d.get(c);if(l){let a=l.shift();l.size===0&&d.delete(c);let w=u.e.fromPositions(i.range.getEndPosition(),a.getStartPosition()),E=u.e.fromPositions(i.range.getStartPosition(),a.getEndPosition());o.push({range:w}),o.push({range:E}),I._addBracketLeading(v,E,o)}}}else{let c=i.bracketInfo.getOpeningBrackets()[0].bracketText,b=h.has(c)?h.get(c):0;h.set(c,b+1)}f=i.range.getStartPosition()}}static _addBracketLeading(A,x,v){if(x.startLineNumber===x.endLineNumber)return;let f=x.startLineNumber,d=A.getLineFirstNonWhitespaceColumn(f);d!==0&&d!==x.startColumn&&(v.push({range:u.e.fromPositions(new B.L(f,d),x.getEndPosition())}),v.push({range:u.e.fromPositions(new B.L(f,1),x.getEndPosition())}));let o=f-1;if(o>0){let h=A.getLineFirstNonWhitespaceColumn(o);h===x.startColumn&&h!==A.getLineLastNonWhitespaceColumn(o)&&(v.push({range:u.e.fromPositions(new B.L(o,h),x.getEndPosition())}),v.push({range:u.e.fromPositions(new B.L(o,1),x.getEndPosition())}))}}}I._maxDuration=30,I._maxRounds=2},102:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{SmartSelectController:()=>D,provideSelectionRanges:()=>O});var m=t(9488),B=t(1050),u=t(7301),I=t(6830),_=t(187),A=t(4314),x=t(3860),v=t(9102),f=t(9694),d=t(7295);class o{provideSelectionRanges(N,T){let C=[];for(let W of T){let K=[];C.push(K),this._addInWordRanges(K,N,W),this._addWordRanges(K,N,W),this._addWhitespaceLine(K,N,W),K.push({range:N.getFullModelRange()})}return C}_addInWordRanges(N,T,C){let W=T.getWordAtPosition(C);if(!W)return;let{word:K,startColumn:j}=W,F=C.column-j,H=F,z=F,J=0;for(;H>=0;H--){let oe=K.charCodeAt(H);if(H!==F&&(oe===95||oe===45)||(0,d.mK)(oe)&&(0,d.df)(J))break;J=oe}for(H+=1;z<K.length;z++){let oe=K.charCodeAt(z);if((0,d.df)(oe)&&(0,d.mK)(J)||oe===95||oe===45)break;J=oe}H<z&&N.push({range:new A.e(C.lineNumber,j+H,C.lineNumber,j+z)})}_addWordRanges(N,T,C){let W=T.getWordAtPosition(C);W&&N.push({range:new A.e(C.lineNumber,W.startColumn,C.lineNumber,W.endColumn)})}_addWhitespaceLine(N,T,C){T.getLineLength(C.lineNumber)>0&&T.getLineFirstNonWhitespaceColumn(C.lineNumber)===0&&T.getLineLastNonWhitespaceColumn(C.lineNumber)===0&&N.push({range:new A.e(C.lineNumber,1,C.lineNumber,T.getLineMaxColumn(C.lineNumber))})}}var h=t(3580),r=t(4144),i=t(4565),c=t(1922),b=t(8216),l=t(8401),a=t(666),w=function($,N,T,C){return new(T||(T=Promise))(function(W,K){function j(z){try{H(C.next(z))}catch(J){K(J)}}function F(z){try{H(C.throw(z))}catch(J){K(J)}}function H(z){var J;z.done?W(z.value):(J=z.value,J instanceof T?J:new T(function(oe){oe(J)})).then(j,F)}H((C=C.apply($,N||[])).next())})};class E{constructor(N,T){this.index=N,this.ranges=T}mov(N){let T=this.index+(N?1:-1);if(T<0||T>=this.ranges.length)return this;let C=new E(T,this.ranges);return C.ranges[T].equalsRange(this.ranges[this.index])?C.mov(N):C}}let D=class ld{static get(N){return N.getContribution(ld.ID)}constructor(N,T){this._editor=N,this._languageFeaturesService=T,this._ignoreSelection=!1}dispose(){var N;(N=this._selectionListener)===null||N===void 0||N.dispose()}run(N){return w(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;let T=this._editor.getSelections(),C=this._editor.getModel();if(this._state||(yield O(this._languageFeaturesService.selectionRangeProvider,C,T.map(K=>K.getPosition()),this._editor.getOption(108),B.T.None).then(K=>{var j;if(m.Of(K)&&K.length===T.length&&this._editor.hasModel()&&m.fS(this._editor.getSelections(),T,(F,H)=>F.equalsSelection(H))){for(let F=0;F<K.length;F++)K[F]=K[F].filter(H=>H.containsPosition(T[F].getStartPosition())&&H.containsPosition(T[F].getEndPosition())),K[F].unshift(T[F]);this._state=K.map(F=>new E(0,F)),(j=this._selectionListener)===null||j===void 0||j.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var F;this._ignoreSelection||((F=this._selectionListener)===null||F===void 0||F.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(K=>K.mov(N));let W=this._state.map(K=>x.Y.fromPositions(K.ranges[K.index].getStartPosition(),K.ranges[K.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(W)}finally{this._ignoreSelection=!1}})}};var L,k;D.ID="editor.contrib.smartSelectController",D=function($,N,T,C){var W,K=arguments.length,j=K<3?N:C===null?C=Object.getOwnPropertyDescriptor(N,T):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate($,N,T,C);else for(var F=$.length-1;F>=0;F--)(W=$[F])&&(j=(K<3?W(j):K>3?W(N,T,j):W(N,T))||j);return K>3&&j&&Object.defineProperty(N,T,j),j}([(L=1,k=c.p,function($,N){k($,N,L)})],D);class R extends I.R6{constructor(N,T){super(T),this._forward=N}run(N,T){return w(this,void 0,void 0,function*(){let C=D.get(T);C&&(yield C.run(this._forward))})}}function O($,N,T,C,W){return w(this,void 0,void 0,function*(){let K=$.all(N).concat(new o);K.length===1&&K.unshift(new f.x);let j=[],F=[];for(let H of K)j.push(Promise.resolve(H.provideSelectionRanges(N,T,W)).then(z=>{if(m.Of(z)&&z.length===T.length)for(let J=0;J<T.length;J++){F[J]||(F[J]=[]);for(let oe of z[J])A.e.isIRange(oe.range)&&A.e.containsPosition(oe.range,T[J])&&F[J].push(A.e.lift(oe.range))}},u.Cp));return yield Promise.all(j),F.map(H=>{if(H.length===0)return[];H.sort((fe,q)=>_.L.isBefore(fe.getStartPosition(),q.getStartPosition())?1:_.L.isBefore(q.getStartPosition(),fe.getStartPosition())||_.L.isBefore(fe.getEndPosition(),q.getEndPosition())?-1:_.L.isBefore(q.getEndPosition(),fe.getEndPosition())?1:0);let z=[],J;for(let fe of H)(!J||A.e.containsRange(fe,J)&&!A.e.equalsRange(fe,J))&&(z.push(fe),J=fe);if(!C.selectLeadingAndTrailingWhitespace)return z;let oe=[z[0]];for(let fe=1;fe<z.length;fe++){let q=z[fe-1],p=z[fe];if(p.startLineNumber!==q.startLineNumber||p.endLineNumber!==q.endLineNumber){let re=new A.e(q.startLineNumber,N.getLineFirstNonWhitespaceColumn(q.startLineNumber),q.endLineNumber,N.getLineLastNonWhitespaceColumn(q.endLineNumber));re.containsRange(q)&&!re.equalsRange(q)&&p.containsRange(re)&&!p.equalsRange(re)&&oe.push(re);let ne=new A.e(q.startLineNumber,1,q.endLineNumber,N.getLineMaxColumn(q.endLineNumber));ne.containsRange(q)&&!ne.equalsRange(re)&&p.containsRange(ne)&&!p.equalsRange(ne)&&oe.push(ne)}oe.push(p)}return oe})})}i.P.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand"),(0,I._K)(D.ID,D,4),(0,I.Qr)(class extends R{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:h.NC("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:v.u.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:r.eH.MenubarSelectionMenu,group:"1_basic",title:h.NC({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}),(0,I.Qr)(class extends R{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:h.NC("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:v.u.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:r.eH.MenubarSelectionMenu,group:"1_basic",title:h.NC({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}),i.P.registerCommand("_executeSelectionRangeProvider",function($,...N){return w(this,void 0,void 0,function*(){let[T,C]=N;(0,l.p_)(a.o.isUri(T));let W=$.get(c.p).selectionRangeProvider,K=yield $.get(b.S).createModelReference(T);try{return O(W,K.object.textEditorModel,C,{selectLeadingAndTrailingWhitespace:!0},B.T.None)}finally{K.dispose()}})})},8762:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{SnippetController2:()=>c});var m=t(5976),B=t(8401),u=t(6830),I=t(187),_=t(9102),A=t(1381),x=t(1922),v=t(5621),f=t(3580),d=t(3983),o=t(3557),h=t(9561),r=function(l,a){return function(w,E){a(w,E,l)}};let i={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},c=class Tr{static get(a){return a.getContribution(Tr.ID)}constructor(a,w,E,D,L){this._editor=a,this._logService=w,this._languageFeaturesService=E,this._languageConfigurationService=L,this._snippetListener=new m.SL,this._modelVersionId=-1,this._inSnippet=Tr.InSnippetMode.bindTo(D),this._hasNextTabstop=Tr.HasNextTabstop.bindTo(D),this._hasPrevTabstop=Tr.HasPrevTabstop.bindTo(D)}dispose(){var a;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(a=this._session)===null||a===void 0||a.dispose(),this._snippetListener.dispose()}insert(a,w){try{this._doInsert(a,w===void 0?i:Object.assign(Object.assign({},i),w))}catch(E){this.cancel(),this._logService.error(E),this._logService.error("snippet_error"),this._logService.error("insert_template=",a),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(a,w){var E;if(this._editor.hasModel()){if(this._snippetListener.clear(),w.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof a!="string"&&this.cancel(),this._session?((0,B.p_)(typeof a=="string"),this._session.merge(a,w)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new h.l(this._editor,a,w,this._languageConfigurationService),this._session.insert()),w.undoStopAfter&&this._editor.getModel().pushStackElement(),(E=this._session)===null||E===void 0?void 0:E.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(L,k)=>{if(!this._session||L!==this._editor.getModel()||!I.L.equals(this._editor.getPosition(),k))return;let{activeChoice:R}=this._session;if(!R||R.choice.options.length===0)return;let O=L.getValueInRange(R.range),$=!!R.choice.options.find(T=>T.value===O),N=[];for(let T=0;T<R.choice.options.length;T++){let C=R.choice.options[T];N.push({kind:13,label:C.value,insertText:C.value,sortText:"a".repeat(T+1),range:R.range,filterText:$?`${O}_${C.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,f.NC)("next","Go to next placeholder...")}})}return{suggestions:N}}};let D=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme,exclusive:!0},this._choiceCompletionItemProvider);this._snippetListener.add(D)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(D=>D.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);let{activeChoice:a}=this._session;a&&this._choiceCompletionItemProvider?this._currentChoice!==a.choice&&(this._currentChoice=a.choice,queueMicrotask(()=>{(0,v.i5)(this._editor,this._choiceCompletionItemProvider)})):this._currentChoice=void 0}finish(){for(;this._inSnippet.get();)this.next()}cancel(a=!1){var w;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(w=this._session)===null||w===void 0||w.dispose(),this._session=void 0,this._modelVersionId=-1,a&&this._editor.setSelections([this._editor.getSelection()])}prev(){var a;(a=this._session)===null||a===void 0||a.prev(),this._updateState()}next(){var a;(a=this._session)===null||a===void 0||a.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};c.ID="snippetController2",c.InSnippetMode=new d.uy("inSnippetMode",!1,(0,f.NC)("inSnippetMode","Whether the editor in current in snippet mode")),c.HasNextTabstop=new d.uy("hasNextTabstop",!1,(0,f.NC)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),c.HasPrevTabstop=new d.uy("hasPrevTabstop",!1,(0,f.NC)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),c=function(l,a,w,E){var D,L=arguments.length,k=L<3?a:E===null?E=Object.getOwnPropertyDescriptor(a,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,a,w,E);else for(var R=l.length-1;R>=0;R--)(D=l[R])&&(k=(L<3?D(k):L>3?D(a,w,k):D(a,w))||k);return L>3&&k&&Object.defineProperty(a,w,k),k}([r(1,o.VZ),r(2,x.p),r(3,d.i6),r(4,A.c_)],c),(0,u._K)(c.ID,c,4);let b=u._l.bindToContribution(c.get);(0,u.fK)(new b({id:"jumpToNextSnippetPlaceholder",precondition:d.Ao.and(c.InSnippetMode,c.HasNextTabstop),handler:l=>l.next(),kbOpts:{weight:130,kbExpr:_.u.editorTextFocus,primary:2}})),(0,u.fK)(new b({id:"jumpToPrevSnippetPlaceholder",precondition:d.Ao.and(c.InSnippetMode,c.HasPrevTabstop),handler:l=>l.prev(),kbOpts:{weight:130,kbExpr:_.u.editorTextFocus,primary:1026}})),(0,u.fK)(new b({id:"leaveSnippet",precondition:c.InSnippetMode,handler:l=>l.cancel(!0),kbOpts:{weight:130,kbExpr:_.u.editorTextFocus,primary:9,secondary:[1033]}})),(0,u.fK)(new b({id:"acceptSnippet",precondition:c.InSnippetMode,handler:l=>l.finish()}))},5084:(ut,Ie,t)=>{"use strict";t.d(Ie,{Lv:()=>A,Vm:()=>_,Yj:()=>h,xv:()=>u,y1:()=>o});class m{constructor(){this.value="",this.pos=0}static isDigitCharacter(i){return i>=48&&i<=57}static isVariableCharacter(i){return i===95||i>=97&&i<=122||i>=65&&i<=90}text(i){this.value=i,this.pos=0}tokenText(i){return this.value.substr(i.pos,i.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let i=this.pos,c,b=0,l=this.value.charCodeAt(i);if(c=m._table[l],typeof c=="number")return this.pos+=1,{type:c,pos:i,len:1};if(m.isDigitCharacter(l)){c=8;do b+=1,l=this.value.charCodeAt(i+b);while(m.isDigitCharacter(l));return this.pos+=b,{type:c,pos:i,len:b}}if(m.isVariableCharacter(l)){c=9;do l=this.value.charCodeAt(i+ ++b);while(m.isVariableCharacter(l)||m.isDigitCharacter(l));return this.pos+=b,{type:c,pos:i,len:b}}c=10;do b+=1,l=this.value.charCodeAt(i+b);while(!isNaN(l)&&m._table[l]===void 0&&!m.isDigitCharacter(l)&&!m.isVariableCharacter(l));return this.pos+=b,{type:c,pos:i,len:b}}}m._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class B{constructor(){this._children=[]}appendChild(i){return i instanceof u&&this._children[this._children.length-1]instanceof u?this._children[this._children.length-1].value+=i.value:(i.parent=this,this._children.push(i)),this}replace(i,c){let{parent:b}=i,l=b.children.indexOf(i),a=b.children.slice(0);a.splice(l,1,...c),b._children=a,function w(E,D){for(let L of E)L.parent=D,w(L.children,L)}(c,b)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let i=this;for(;;){if(!i)return;if(i instanceof o)return i;i=i.parent}}toString(){return this.children.reduce((i,c)=>i+c.toString(),"")}len(){return 0}}class u extends B{constructor(i){super(),this.value=i}toString(){return this.value}len(){return this.value.length}clone(){return new u(this.value)}}class I extends B{}class _ extends I{static compareByIndex(i,c){return i.index===c.index?0:i.isFinalTabstop?1:c.isFinalTabstop||i.index<c.index?-1:i.index>c.index?1:0}constructor(i){super(),this.index=i}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof A?this._children[0]:void 0}clone(){let i=new _(this.index);return this.transform&&(i.transform=this.transform.clone()),i._children=this.children.map(c=>c.clone()),i}}class A extends B{constructor(){super(...arguments),this.options=[]}appendChild(i){return i instanceof u&&(i.parent=this,this.options.push(i)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let i=new A;return this.options.forEach(i.appendChild,i),i}}class x extends B{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(i){let c=this,b=!1,l=i.replace(this.regexp,function(){return b=!0,c._replace(Array.prototype.slice.call(arguments,0,-2))});return!b&&this._children.some(a=>a instanceof v&&!!a.elseValue)&&(l=this._replace([])),l}_replace(i){let c="";for(let b of this._children)if(b instanceof v){let l=i[b.index]||"";l=b.resolve(l),c+=l}else c+=b.toString();return c}toString(){return""}clone(){let i=new x;return i.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),i._children=this.children.map(c=>c.clone()),i}}class v extends B{constructor(i,c,b,l){super(),this.index=i,this.shorthandName=c,this.ifValue=b,this.elseValue=l}resolve(i){return this.shorthandName==="upcase"?i?i.toLocaleUpperCase():"":this.shorthandName==="downcase"?i?i.toLocaleLowerCase():"":this.shorthandName==="capitalize"?i?i[0].toLocaleUpperCase()+i.substr(1):"":this.shorthandName==="pascalcase"?i?this._toPascalCase(i):"":this.shorthandName==="camelcase"?i?this._toCamelCase(i):"":i&&typeof this.ifValue=="string"?this.ifValue:i||typeof this.elseValue!="string"?i||"":this.elseValue}_toPascalCase(i){let c=i.match(/[a-z0-9]+/gi);return c?c.map(b=>b.charAt(0).toUpperCase()+b.substr(1)).join(""):i}_toCamelCase(i){let c=i.match(/[a-z0-9]+/gi);return c?c.map((b,l)=>l===0?b.charAt(0).toLowerCase()+b.substr(1):b.charAt(0).toUpperCase()+b.substr(1)).join(""):i}clone(){return new v(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class f extends I{constructor(i){super(),this.name=i}resolve(i){let c=i.resolve(this);return this.transform&&(c=this.transform.resolve(c||"")),c!==void 0&&(this._children=[new u(c)],!0)}clone(){let i=new f(this.name);return this.transform&&(i.transform=this.transform.clone()),i._children=this.children.map(c=>c.clone()),i}}function d(r,i){let c=[...r];for(;c.length>0;){let b=c.shift();if(!i(b))break;c.unshift(...b.children)}}class o extends B{get placeholderInfo(){if(!this._placeholders){let i=[],c;this.walk(function(b){return b instanceof _&&(i.push(b),c=!c||c.index<b.index?b:c),!0}),this._placeholders={all:i,last:c}}return this._placeholders}get placeholders(){let{all:i}=this.placeholderInfo;return i}offset(i){let c=0,b=!1;return this.walk(l=>l===i?(b=!0,!1):(c+=l.len(),!0)),b?c:-1}fullLen(i){let c=0;return d([i],b=>(c+=b.len(),!0)),c}enclosingPlaceholders(i){let c=[],{parent:b}=i;for(;b;)b instanceof _&&c.push(b),b=b.parent;return c}resolveVariables(i){return this.walk(c=>(c instanceof f&&c.resolve(i)&&(this._placeholders=void 0),!0)),this}appendChild(i){return this._placeholders=void 0,super.appendChild(i)}replace(i,c){return this._placeholders=void 0,super.replace(i,c)}clone(){let i=new o;return this._children=this.children.map(c=>c.clone()),i}walk(i){d(this.children,i)}}class h{constructor(){this._scanner=new m,this._token={type:14,pos:0,len:0}}static escape(i){return i.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(i){return/\${?CLIPBOARD/.test(i)}parse(i,c,b){let l=new o;return this.parseFragment(i,l),this.ensureFinalTabstop(l,b!=null&&b,c!=null&&c),l}parseFragment(i,c){let b=c.children.length;for(this._scanner.text(i),this._token=this._scanner.next();this._parse(c););let l=new Map,a=[];c.walk(D=>(D instanceof _&&(D.isFinalTabstop?l.set(0,void 0):!l.has(D.index)&&D.children.length>0?l.set(D.index,D.children):a.push(D)),!0));let w=(D,L)=>{let k=l.get(D.index);if(!k)return;let R=new _(D.index);R.transform=D.transform;for(let O of k){let $=O.clone();R.appendChild($),$ instanceof _&&l.has($.index)&&!L.has($.index)&&(L.add($.index),w($,L),L.delete($.index))}c.replace(D,[R])},E=new Set;for(let D of a)w(D,E);return c.children.slice(b)}ensureFinalTabstop(i,c,b){(c||b&&i.placeholders.length>0)&&(i.placeholders.find(l=>l.index===0)||i.appendChild(new _(0)))}_accept(i,c){if(i===void 0||this._token.type===i){let b=!c||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),b}return!1}_backTo(i){return this._scanner.pos=i.pos+i.len,this._token=i,!1}_until(i){let c=this._token;for(;this._token.type!==i;){if(this._token.type===14)return!1;if(this._token.type===5){let l=this._scanner.next();if(l.type!==0&&l.type!==4&&l.type!==5)return!1}this._token=this._scanner.next()}let b=this._scanner.value.substring(c.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),b}_parse(i){return this._parseEscaped(i)||this._parseTabstopOrVariableName(i)||this._parseComplexPlaceholder(i)||this._parseComplexVariable(i)||this._parseAnything(i)}_parseEscaped(i){let c;return!!(c=this._accept(5,!0))&&(c=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||c,i.appendChild(new u(c)),!0)}_parseTabstopOrVariableName(i){let c,b=this._token;return this._accept(0)&&(c=this._accept(9,!0)||this._accept(8,!0))?(i.appendChild(/^\d+$/.test(c)?new _(Number(c)):new f(c)),!0):this._backTo(b)}_parseComplexPlaceholder(i){let c,b=this._token;if(!(this._accept(0)&&this._accept(3)&&(c=this._accept(8,!0))))return this._backTo(b);let l=new _(Number(c));if(this._accept(1))for(;;){if(this._accept(4))return i.appendChild(l),!0;if(!this._parse(l))return i.appendChild(new u("${"+c+":")),l.children.forEach(i.appendChild,i),!0}else{if(!(l.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(l)?(i.appendChild(l),!0):(this._backTo(b),!1):this._accept(4)?(i.appendChild(l),!0):this._backTo(b);{let a=new A;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(l.appendChild(a),this._accept(4)))return i.appendChild(l),!0}return this._backTo(b),!1}}}}_parseChoiceElement(i){let c=this._token,b=[];for(;this._token.type!==2&&this._token.type!==7;){let l;if(l=(l=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||l:this._accept(void 0,!0),!l)return this._backTo(c),!1;b.push(l)}return b.length===0?(this._backTo(c),!1):(i.appendChild(new u(b.join(""))),!0)}_parseComplexVariable(i){let c,b=this._token;if(!(this._accept(0)&&this._accept(3)&&(c=this._accept(9,!0))))return this._backTo(b);let l=new f(c);if(!this._accept(1))return this._accept(6)?this._parseTransform(l)?(i.appendChild(l),!0):(this._backTo(b),!1):this._accept(4)?(i.appendChild(l),!0):this._backTo(b);for(;;){if(this._accept(4))return i.appendChild(l),!0;if(!this._parse(l))return i.appendChild(new u("${"+c+":")),l.children.forEach(i.appendChild,i),!0}}_parseTransform(i){let c=new x,b="",l="";for(;!this._accept(6);){let a;if(a=this._accept(5,!0))a=this._accept(6,!0)||a,b+=a;else{if(this._token.type===14)return!1;b+=this._accept(void 0,!0)}}for(;!this._accept(6);){let a;if(a=this._accept(5,!0))a=this._accept(5,!0)||this._accept(6,!0)||a,c.appendChild(new u(a));else if(!this._parseFormatString(c)&&!this._parseAnything(c))return!1}for(;!this._accept(4);){if(this._token.type===14)return!1;l+=this._accept(void 0,!0)}try{c.regexp=new RegExp(b,l)}catch(a){return!1}return i.transform=c,!0}_parseFormatString(i){let c=this._token;if(!this._accept(0))return!1;let b=!1;this._accept(3)&&(b=!0);let l=this._accept(8,!0);if(!l)return this._backTo(c),!1;if(!b)return i.appendChild(new v(Number(l))),!0;if(this._accept(4))return i.appendChild(new v(Number(l))),!0;if(!this._accept(1))return this._backTo(c),!1;if(this._accept(6)){let a=this._accept(9,!0);return a&&this._accept(4)?(i.appendChild(new v(Number(l),a)),!0):(this._backTo(c),!1)}if(this._accept(11)){let a=this._until(4);if(a)return i.appendChild(new v(Number(l),void 0,a,void 0)),!0}else if(this._accept(12)){let a=this._until(4);if(a)return i.appendChild(new v(Number(l),void 0,void 0,a)),!0}else if(this._accept(13)){let a=this._until(1);if(a){let w=this._until(4);if(w)return i.appendChild(new v(Number(l),void 0,a,w)),!0}}else{let a=this._until(4);if(a)return i.appendChild(new v(Number(l),void 0,void 0,a)),!0}return this._backTo(c),!1}_parseAnything(i){return this._token.type!==14&&(i.appendChild(new u(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}},9561:(ut,Ie,t)=>{"use strict";t.d(Ie,{l:()=>K});var m=t(9488),B=t(5976),u=t(7295),I=t(9386),_=t(4314),A=t(3860),x=t(1381),v=t(3654),f=t(4349),d=t(382),o=t(5084),h=t(5527),r=t(1432);function i(j,F=r.ED){return(0,h.oP)(j,F)?j.charAt(0).toUpperCase()+j.slice(1):j}var c=t(8721),b=t(5935),l=t(8e3),a=t(3580);Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class w{constructor(F){this._delegates=F}resolve(F){for(let H of this._delegates){let z=H.resolve(F);if(z!==void 0)return z}}}class E{constructor(F,H,z,J){this._model=F,this._selection=H,this._selectionIdx=z,this._overtypingCapturer=J}resolve(F){let{name:H}=F;if(H==="SELECTION"||H==="TM_SELECTED_TEXT"){let z=this._model.getValueInRange(this._selection)||void 0,J=this._selection.startLineNumber!==this._selection.endLineNumber;if(!z&&this._overtypingCapturer){let oe=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);oe&&(z=oe.value,J=oe.multiline)}if(z&&J&&F.snippet){let oe=this._model.getLineContent(this._selection.startLineNumber),fe=(0,u.V8)(oe,0,this._selection.startColumn-1),q=fe;F.snippet.walk(re=>re!==F&&(re instanceof o.xv&&(q=(0,u.V8)((0,u.uq)(re.value).pop())),!0));let p=(0,u.Mh)(q,fe);z=z.replace(/(\r\n|\r|\n)(.*)/g,(re,ne,ie)=>`${ne}${q.substr(p)}${ie}`)}return z}if(H==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(H==="TM_CURRENT_WORD"){let z=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return z&&z.word||void 0}return H==="TM_LINE_INDEX"?String(this._selection.positionLineNumber-1):H==="TM_LINE_NUMBER"?String(this._selection.positionLineNumber):H==="CURSOR_INDEX"?String(this._selectionIdx):H==="CURSOR_NUMBER"?String(this._selectionIdx+1):void 0}}class D{constructor(F,H){this._labelService=F,this._model=H}resolve(F){let{name:H}=F;if(H==="TM_FILENAME")return c.EZ(this._model.uri.fsPath);if(H==="TM_FILENAME_BASE"){let z=c.EZ(this._model.uri.fsPath),J=z.lastIndexOf(".");return J<=0?z:z.slice(0,J)}return H==="TM_DIRECTORY"?c.XX(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel((0,b.XX)(this._model.uri)):H==="TM_FILEPATH"?this._labelService.getUriLabel(this._model.uri):H==="RELATIVE_FILEPATH"?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}class L{constructor(F,H,z,J){this._readClipboardText=F,this._selectionIdx=H,this._selectionCount=z,this._spread=J}resolve(F){if(F.name!=="CLIPBOARD")return;let H=this._readClipboardText();if(H){if(this._spread){let z=H.split(/\r\n|\n|\r/).filter(J=>!(0,u.m5)(J));if(z.length===this._selectionCount)return z[this._selectionIdx]}return H}}}let k=class{constructor(j,F,H){this._model=j,this._selection=F,this._languageConfigurationService=H}resolve(j){let{name:F}=j,H=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),z=this._languageConfigurationService.getLanguageConfiguration(H).comments;if(z)return F==="LINE_COMMENT"?z.lineCommentToken||void 0:F==="BLOCK_COMMENT_START"?z.blockCommentStartToken||void 0:F==="BLOCK_COMMENT_END"&&z.blockCommentEndToken||void 0}};var R,O;k=function(j,F,H,z){var J,oe=arguments.length,fe=oe<3?F:z===null?z=Object.getOwnPropertyDescriptor(F,H):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")fe=Reflect.decorate(j,F,H,z);else for(var q=j.length-1;q>=0;q--)(J=j[q])&&(fe=(oe<3?J(fe):oe>3?J(F,H,fe):J(F,H))||fe);return oe>3&&fe&&Object.defineProperty(F,H,fe),fe}([(R=2,O=x.c_,function(j,F){O(j,F,R)})],k);class ${constructor(){this._date=new Date}resolve(F){let{name:H}=F;if(H==="CURRENT_YEAR")return String(this._date.getFullYear());if(H==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(H==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(H==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(H==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(H==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(H==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(H==="CURRENT_DAY_NAME")return $.dayNames[this._date.getDay()];if(H==="CURRENT_DAY_NAME_SHORT")return $.dayNamesShort[this._date.getDay()];if(H==="CURRENT_MONTH_NAME")return $.monthNames[this._date.getMonth()];if(H==="CURRENT_MONTH_NAME_SHORT")return $.monthNamesShort[this._date.getMonth()];if(H==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(H==="CURRENT_TIMEZONE_OFFSET"){let z=this._date.getTimezoneOffset(),J=z>0?"-":"+",oe=Math.trunc(Math.abs(z/60)),fe=oe<10?"0"+oe:oe,q=Math.abs(z)-60*oe;return J+fe+":"+(q<10?"0"+q:q)}}}$.dayNames=[a.NC("Sunday","Sunday"),a.NC("Monday","Monday"),a.NC("Tuesday","Tuesday"),a.NC("Wednesday","Wednesday"),a.NC("Thursday","Thursday"),a.NC("Friday","Friday"),a.NC("Saturday","Saturday")],$.dayNamesShort=[a.NC("SundayShort","Sun"),a.NC("MondayShort","Mon"),a.NC("TuesdayShort","Tue"),a.NC("WednesdayShort","Wed"),a.NC("ThursdayShort","Thu"),a.NC("FridayShort","Fri"),a.NC("SaturdayShort","Sat")],$.monthNames=[a.NC("January","January"),a.NC("February","February"),a.NC("March","March"),a.NC("April","April"),a.NC("May","May"),a.NC("June","June"),a.NC("July","July"),a.NC("August","August"),a.NC("September","September"),a.NC("October","October"),a.NC("November","November"),a.NC("December","December")],$.monthNamesShort=[a.NC("JanuaryShort","Jan"),a.NC("FebruaryShort","Feb"),a.NC("MarchShort","Mar"),a.NC("AprilShort","Apr"),a.NC("MayShort","May"),a.NC("JuneShort","Jun"),a.NC("JulyShort","Jul"),a.NC("AugustShort","Aug"),a.NC("SeptemberShort","Sep"),a.NC("OctoberShort","Oct"),a.NC("NovemberShort","Nov"),a.NC("DecemberShort","Dec")];class N{constructor(F){this._workspaceService=F}resolve(F){if(!this._workspaceService)return;let H=(0,d.uT)(this._workspaceService.getWorkspace());return(0,d.c$)(H)?void 0:F.name==="WORKSPACE_NAME"?this._resolveWorkspaceName(H):F.name==="WORKSPACE_FOLDER"?this._resoveWorkspacePath(H):void 0}_resolveWorkspaceName(F){if((0,d.eb)(F))return c.EZ(F.uri.path);let H=c.EZ(F.configPath.path);return H.endsWith(d.A6)&&(H=H.substr(0,H.length-d.A6.length-1)),H}_resoveWorkspacePath(F){if((0,d.eb)(F))return i(F.uri.fsPath);let H=c.EZ(F.configPath.path),z=F.configPath.fsPath;return z.endsWith(H)&&(z=z.substr(0,z.length-H.length-1)),z?i(z):"/"}}class T{resolve(F){let{name:H}=F;return H==="RANDOM"?Math.random().toString().slice(-6):H==="RANDOM_HEX"?Math.random().toString(16).slice(-6):H==="UUID"?(0,l.R)():void 0}}class C{constructor(F,H,z){this._editor=F,this._snippet=H,this._snippetLineLeadingWhitespace=z,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,m.vM)(H.placeholders,o.Vm.compareByIndex),this._placeholderGroupsIdx=-1}initialize(F){this._offset=F.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let F=this._editor.getModel();this._editor.changeDecorations(H=>{for(let z of this._snippet.placeholders){let J=this._snippet.offset(z),oe=this._snippet.fullLen(z),fe=_.e.fromPositions(F.getPositionAt(this._offset+J),F.getPositionAt(this._offset+J+oe)),q=z.isFinalTabstop?C._decor.inactiveFinal:C._decor.inactive,p=H.addDecoration(fe,q);this._placeholderDecorations.set(z,p)}})}move(F){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let J=[];for(let oe of this._placeholderGroups[this._placeholderGroupsIdx])if(oe.transform){let fe=this._placeholderDecorations.get(oe),q=this._editor.getModel().getDecorationRange(fe),p=this._editor.getModel().getValueInRange(q),re=oe.transform.resolve(p).split(/\r\n|\r|\n/);for(let ne=1;ne<re.length;ne++)re[ne]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+re[ne]);J.push(I.h.replace(q,re.join(this._editor.getModel().getEOL())))}J.length>0&&this._editor.executeEdits("snippet.placeholderTransform",J)}let H=!1;F===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,H=!0):F===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,H=!0);let z=this._editor.getModel().changeDecorations(J=>{let oe=new Set,fe=[];for(let q of this._placeholderGroups[this._placeholderGroupsIdx]){let p=this._placeholderDecorations.get(q),re=this._editor.getModel().getDecorationRange(p);fe.push(new A.Y(re.startLineNumber,re.startColumn,re.endLineNumber,re.endColumn)),H=H&&this._hasPlaceholderBeenCollapsed(q),J.changeDecorationOptions(p,q.isFinalTabstop?C._decor.activeFinal:C._decor.active),oe.add(q);for(let ne of this._snippet.enclosingPlaceholders(q)){let ie=this._placeholderDecorations.get(ne);J.changeDecorationOptions(ie,ne.isFinalTabstop?C._decor.activeFinal:C._decor.active),oe.add(ne)}}for(let[q,p]of this._placeholderDecorations)oe.has(q)||J.changeDecorationOptions(p,q.isFinalTabstop?C._decor.inactiveFinal:C._decor.inactive);return fe});return H?this.move(F):z!=null?z:[]}_hasPlaceholderBeenCollapsed(F){let H=F;for(;H;){if(H instanceof o.Vm){let z=this._placeholderDecorations.get(H);if(this._editor.getModel().getDecorationRange(z).isEmpty()&&H.toString().length>0)return!0}H=H.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){let[F]=this._snippet.placeholders;if(F.isFinalTabstop&&this._snippet.rightMostDescendant===F)return!0}return!1}computePossibleSelections(){let F=new Map;for(let H of this._placeholderGroups){let z;for(let J of H){if(J.isFinalTabstop)break;z||(z=[],F.set(J.index,z));let oe=this._placeholderDecorations.get(J),fe=this._editor.getModel().getDecorationRange(oe);if(!fe){F.delete(J.index);break}z.push(fe)}}return F}get activeChoice(){if(!this._placeholderDecorations)return;let F=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(F!=null&&F.choice))return;let H=this._placeholderDecorations.get(F);if(!H)return;let z=this._editor.getModel().getDecorationRange(H);return z?{range:z,choice:F.choice}:void 0}get hasChoice(){let F=!1;return this._snippet.walk(H=>(F=H instanceof o.Lv,!F)),F}merge(F){let H=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(z=>{for(let J of this._placeholderGroups[this._placeholderGroupsIdx]){let oe=F.shift();console.assert(oe._offset!==-1),console.assert(!oe._placeholderDecorations);let fe=oe._snippet.placeholderInfo.last.index;for(let p of oe._snippet.placeholderInfo.all)p.isFinalTabstop?p.index=J.index+(fe+1)/this._nestingLevel:p.index=J.index+p.index/this._nestingLevel;this._snippet.replace(J,oe._snippet.children);let q=this._placeholderDecorations.get(J);z.removeDecoration(q),this._placeholderDecorations.delete(J);for(let p of oe._snippet.placeholders){let re=oe._snippet.offset(p),ne=oe._snippet.fullLen(p),ie=_.e.fromPositions(H.getPositionAt(oe._offset+re),H.getPositionAt(oe._offset+re+ne)),se=z.addDecoration(ie,C._decor.inactive);this._placeholderDecorations.set(p,se)}}this._placeholderGroups=(0,m.vM)(this._snippet.placeholders,o.Vm.compareByIndex)})}}C._decor={active:v.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:v.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:v.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:v.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let W={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},K=class zo{static adjustWhitespace(F,H,z,J,oe){let fe=F.getLineContent(H.lineNumber),q=(0,u.V8)(fe,0,H.column-1),p;return J.walk(re=>{if(!(re instanceof o.xv)||re.parent instanceof o.Lv||oe&&!oe.has(re))return!0;let ne=re.value.split(/\r\n|\r|\n/);if(z){let se=J.offset(re);if(se===0)ne[0]=F.normalizeIndentation(ne[0]);else{p=p!=null?p:J.toString();let ce=p.charCodeAt(se-1);ce!==10&&ce!==13||(ne[0]=F.normalizeIndentation(q+ne[0]))}for(let ce=1;ce<ne.length;ce++)ne[ce]=F.normalizeIndentation(q+ne[ce])}let ie=ne.join(F.getEOL());return ie!==re.value&&(re.parent.replace(re,[new o.xv(ie)]),p=void 0),!0}),q}static adjustSelection(F,H,z,J){if(z!==0||J!==0){let{positionLineNumber:oe,positionColumn:fe}=H,q=fe-z,p=fe+J,re=F.validateRange({startLineNumber:oe,startColumn:q,endLineNumber:oe,endColumn:p});H=A.Y.createWithDirection(re.startLineNumber,re.startColumn,re.endLineNumber,re.endColumn,H.getDirection())}return H}static createEditsAndSnippetsFromSelections(F,H,z,J,oe,fe,q,p,re){let ne=[],ie=[];if(!F.hasModel())return{edits:ne,snippets:ie};let se=F.getModel(),ce=F.invokeWithinContext(ye=>ye.get(d.ec)),be=F.invokeWithinContext(ye=>new D(ye.get(f.e),se)),de=()=>q,U=se.getValueInRange(zo.adjustSelection(se,F.getSelection(),z,0)),ue=se.getValueInRange(zo.adjustSelection(se,F.getSelection(),0,J)),ve=se.getLineFirstNonWhitespaceColumn(F.getSelection().positionLineNumber),X=F.getSelections().map((ye,Ce)=>({selection:ye,idx:Ce})).sort((ye,Ce)=>_.e.compareRangesUsingStarts(ye.selection,Ce.selection));for(let{selection:ye,idx:Ce}of X){let Ee=zo.adjustSelection(se,ye,z,0),Ae=zo.adjustSelection(se,ye,0,J);U!==se.getValueInRange(Ee)&&(Ee=ye),ue!==se.getValueInRange(Ae)&&(Ae=ye);let Fe=ye.setStartPosition(Ee.startLineNumber,Ee.startColumn).setEndPosition(Ae.endLineNumber,Ae.endColumn),_e=new o.Yj().parse(H,!0,oe),te=Fe.getStartPosition(),Le=zo.adjustWhitespace(se,te,fe||Ce>0&&ve!==se.getLineFirstNonWhitespaceColumn(ye.positionLineNumber),_e);_e.resolveVariables(new w([be,new L(de,Ce,X.length,F.getOption(76)==="spread"),new E(se,ye,Ce,p),new k(se,ye,re),new $,new N(ce),new T])),ne[Ce]=I.h.replace(Fe,_e.toString()),ne[Ce].identifier={major:Ce,minor:0},ne[Ce]._isTracked=!0,ie[Ce]=new C(F,_e,Le)}return{edits:ne,snippets:ie}}static createEditsAndSnippetsFromEdits(F,H,z,J,oe,fe,q){if(!F.hasModel()||H.length===0)return{edits:[],snippets:[]};let p=[],re=F.getModel(),ne=new o.Yj,ie=new o.y1,se=new w([F.invokeWithinContext(be=>new D(be.get(f.e),re)),new L(()=>oe,0,F.getSelections().length,F.getOption(76)==="spread"),new E(re,F.getSelection(),0,fe),new k(re,F.getSelection(),q),new $,new N(F.invokeWithinContext(be=>be.get(d.ec))),new T]);H=H.sort((be,de)=>_.e.compareRangesUsingStarts(be.range,de.range));let ce=0;for(let be=0;be<H.length;be++){let{range:de,template:U}=H[be];if(be>0){let Ce=H[be-1].range,Ee=_.e.fromPositions(Ce.getEndPosition(),de.getStartPosition()),Ae=new o.xv(re.getValueInRange(Ee));ie.appendChild(Ae),ce+=Ae.value.length}let ue=ne.parseFragment(U,ie);zo.adjustWhitespace(re,de.getStartPosition(),!0,ie,new Set(ue)),ie.resolveVariables(se);let ve=ie.toString(),X=ve.slice(ce);ce=ve.length;let ye=I.h.replace(de,X);ye.identifier={major:be,minor:0},ye._isTracked=!0,p.push(ye)}return ne.ensureFinalTabstop(ie,z,!0),{edits:p,snippets:[new C(F,ie,"")]}}constructor(F,H,z=W,J){this._editor=F,this._template=H,this._options=z,this._languageConfigurationService=J,this._templateMerges=[],this._snippets=[]}dispose(){(0,B.B9)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:F,snippets:H}=typeof this._template=="string"?zo.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):zo.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=H,this._editor.executeEdits("snippet",F,z=>{let J=z.filter(oe=>!!oe.identifier);for(let oe=0;oe<H.length;oe++)H[oe].initialize(J[oe].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):J.map(oe=>A.Y.fromPositions(oe.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(F,H=W){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,F]);let{edits:z,snippets:J}=zo.createEditsAndSnippetsFromSelections(this._editor,F,H.overwriteBefore,H.overwriteAfter,!0,H.adjustWhitespace,H.clipboardText,H.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",z,oe=>{let fe=oe.filter(p=>!!p.identifier);for(let p=0;p<J.length;p++)J[p].initialize(fe[p].textChange);let q=J[0].isTrivialSnippet;if(!q){for(let p of this._snippets)p.merge(J);console.assert(J.length===0)}return this._snippets[0].hasPlaceholder&&!q?this._move(void 0):fe.map(p=>A.Y.fromPositions(p.range.getEndPosition()))})}next(){let F=this._move(!0);this._editor.setSelections(F),this._editor.revealPositionInCenterIfOutsideViewport(F[0].getPosition())}prev(){let F=this._move(!1);this._editor.setSelections(F),this._editor.revealPositionInCenterIfOutsideViewport(F[0].getPosition())}_move(F){let H=[];for(let z of this._snippets){let J=z.move(F);H.push(...J)}return H}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let F=this._editor.getSelections();if(F.length<this._snippets.length)return!1;let H=new Map;for(let z of this._snippets){let J=z.computePossibleSelections();if(H.size===0)for(let[oe,fe]of J){fe.sort(_.e.compareRangesUsingStarts);for(let q of F)if(fe[0].containsRange(q)){H.set(oe,[]);break}}if(H.size===0)return!1;H.forEach((oe,fe)=>{oe.push(...J.get(fe))})}F.sort(_.e.compareRangesUsingStarts);for(let[z,J]of H)if(J.length===F.length){J.sort(_.e.compareRangesUsingStarts);for(let oe=0;oe<J.length;oe++)J[oe].containsRange(F[oe])||H.delete(z)}else H.delete(z);return H.size>0}};K=function(j,F,H,z){var J,oe=arguments.length,fe=oe<3?F:z===null?z=Object.getOwnPropertyDescriptor(F,H):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")fe=Reflect.decorate(j,F,H,z);else for(var q=j.length-1;q>=0;q--)(J=j[q])&&(fe=(oe<3?J(fe):oe>3?J(F,H,fe):J(F,H))||fe);return oe>3&&fe&&Object.defineProperty(F,H,fe),fe}([function(j,F){return function(H,z){F(H,z,j)}}(3,x.c_)],K)},544:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(3580);let u=Object.freeze({View:{value:(0,B.NC)("view","View"),original:"View"},Help:{value:(0,B.NC)("help","Help"),original:"Help"},Test:{value:(0,B.NC)("test","Test"),original:"Test"},File:{value:(0,B.NC)("file","File"),original:"File"},Preferences:{value:(0,B.NC)("preferences","Preferences"),original:"Preferences"},Developer:{value:(0,B.NC)({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}});var I,_=t(4144),A=t(3108),x=t(3983),v=t(9102),f=t(5976),d=t(1922),o=t(72),h=t(1557),r=t(2550),i=t(187),c=t(7448),b=t(4527),l=t(5321);class a{constructor(Qe,bt){this.lineNumbers=Qe,this.lastLineRelativePosition=bt}}let w=(I=window.trustedTypes)===null||I===void 0?void 0:I.createPolicy("stickyScrollViewLayer",{createHTML:tt=>tt});class E extends f.JT{constructor(Qe){super(),this._editor=Qe,this._rootDomNode=document.createElement("div"),this._disposableStore=this._register(new f.SL),this._lineNumbers=[],this._lastLineRelativePosition=0,this._hoverOnLine=-1,this._hoverOnColumn=-1,this._layoutInfo=this._editor.getLayoutInfo(),this._rootDomNode=document.createElement("div"),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",Qe instanceof b.H),this._rootDomNode.style.width=this._layoutInfo.width-this._layoutInfo.minimap.minimapCanvasOuterWidth-this._layoutInfo.verticalScrollbarWidth+"px"}get hoverOnLine(){return this._hoverOnLine}get hoverOnColumn(){return this._hoverOnColumn}get lineNumbers(){return this._lineNumbers}getCurrentLines(){return this._lineNumbers}setState(Qe){l.PO(this._rootDomNode),this._disposableStore.clear(),this._lineNumbers.length=0;let bt=this._editor.getOption(64);Qe.lineNumbers.length*bt+Qe.lastLineRelativePosition>0?(this._lastLineRelativePosition=Qe.lastLineRelativePosition,this._lineNumbers=Qe.lineNumbers):(this._lastLineRelativePosition=0,this._lineNumbers=[]),this._renderRootNode()}_renderRootNode(){if(!this._editor._getViewModel())return;for(let[ht,xt]of this._lineNumbers.entries()){let Qt=this._renderChildNode(ht,xt);this._rootDomNode.appendChild(Qt)}let Qe=this._editor.getOption(64),bt=this._lineNumbers.length*Qe+this._lastLineRelativePosition;this._rootDomNode.style.display=bt>0?"block":"none",this._rootDomNode.style.height=bt.toString()+"px",this._rootDomNode.setAttribute("role","list"),this._editor.getOption(70).side==="left"&&(this._rootDomNode.style.marginLeft=this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth+"px")}_renderChildNode(Qe,bt){let ht=document.createElement("div"),xt=this._editor._getViewModel(),Qt=xt.coordinatesConverter.convertModelPositionToViewPosition(new i.L(bt,1)).lineNumber,At=xt.getViewLineRenderingData(Qt),mi=this._editor.getLayoutInfo(),Lt=mi.width-mi.minimap.minimapCanvasOuterWidth-mi.verticalScrollbarWidth,ct=this._editor.getOption(70).side,Kt=this._editor.getOption(64),pi=this._editor.getOption(65),li;try{li=r.Kp.filter(At.inlineDecorations,Qt,At.minColumn,At.maxColumn)}catch(yn){li=[]}let Wi=new h.IJ(!0,!0,At.content,At.continuesWithWrappedLine,At.isBasicASCII,At.containsRTL,0,At.tokens,li,At.tabSize,At.startVisibleColumn,1,1,1,500,"none",!0,!0,null),Vi=new o.HT(2e3),Xi;(0,h.d1)(Wi,Vi),Xi=w?w.createHTML(Vi.build()):Vi.build();let en=document.createElement("span");en.className="sticky-line",en.classList.add(`stickyLine${bt}`),en.style.lineHeight=`${Kt}px`,en.innerHTML=Xi;let rn=document.createElement("span");rn.className="sticky-line",rn.style.lineHeight=`${Kt}px`,ct==="left"?rn.style.width=mi.contentLeft-mi.minimap.minimapCanvasOuterWidth+"px":ct==="right"&&(rn.style.width=`${mi.contentLeft}px`);let tn=document.createElement("span");return pi.renderType===1||pi.renderType===3&&bt%10==0?tn.innerText=bt.toString():pi.renderType===2&&(tn.innerText=Math.abs(bt-this._editor.getPosition().lineNumber).toString()),tn.className="sticky-line-number",tn.style.lineHeight=`${Kt}px`,tn.style.width=`${mi.lineNumbersWidth}px`,ct==="left"?tn.style.paddingLeft=mi.lineNumbersLeft-mi.minimap.minimapCanvasOuterWidth+"px":ct==="right"&&(tn.style.paddingLeft=`${mi.lineNumbersLeft}px`),rn.appendChild(tn),this._editor.applyFontInfo(en),this._editor.applyFontInfo(tn),ht.appendChild(rn),ht.appendChild(en),ht.className="sticky-line-root",ht.setAttribute("role","listitem"),ht.tabIndex=0,ht.style.lineHeight=`${Kt}px`,ht.style.width=`${Lt}px`,ht.style.height=`${Kt}px`,ht.style.zIndex="0",Qe===this._lineNumbers.length-1&&(ht.style.position="relative",ht.style.zIndex="-1",ht.style.top=this._lastLineRelativePosition+"px"),this._disposableStore.add(l.nm(ht,"mouseover",yn=>{if(this._editor.hasModel()){let sn=new c.n(yn).target.innerText;this._hoverOnLine=bt,this._hoverOnColumn=this._editor.getModel().getLineContent(bt).indexOf(sn)+1||-1}})),ht}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}}var D=t(1050),L=t(5393),k=t(9488),R=t(5935),O=t(4669),$=t(1381),N=t(335),T=t(8060),C=t(9155),W=t(4990),K=t(7301);class j{constructor(Qe,bt){this.startLineNumber=Qe,this.endLineNumber=bt}}class F{constructor(Qe,bt,ht){this.range=Qe,this.children=bt,this.parent=ht}}class H{constructor(Qe,bt,ht,xt){this.uri=Qe,this.version=bt,this.element=ht,this.outlineProviderId=xt}}var z,J,oe=t(3725),fe=function(tt,Qe,bt,ht){var xt,Qt=arguments.length,At=Qt<3?Qe:ht===null?ht=Object.getOwnPropertyDescriptor(Qe,bt):ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")At=Reflect.decorate(tt,Qe,bt,ht);else for(var mi=tt.length-1;mi>=0;mi--)(xt=tt[mi])&&(At=(Qt<3?xt(At):Qt>3?xt(Qe,bt,At):xt(Qe,bt))||At);return Qt>3&&At&&Object.defineProperty(Qe,bt,At),At},q=function(tt,Qe){return function(bt,ht){Qe(bt,ht,tt)}},p=function(tt,Qe,bt,ht){return new(bt||(bt=Promise))(function(xt,Qt){function At(ct){try{Lt(ht.next(ct))}catch(Kt){Qt(Kt)}}function mi(ct){try{Lt(ht.throw(ct))}catch(Kt){Qt(Kt)}}function Lt(ct){var Kt;ct.done?xt(ct.value):(Kt=ct.value,Kt instanceof bt?Kt:new bt(function(pi){pi(Kt)})).then(At,mi)}Lt((ht=ht.apply(tt,Qe||[])).next())})};(function(tt){tt.OUTLINE_MODEL="outlineModel",tt.FOLDING_PROVIDER_MODEL="foldingProviderModel",tt.INDENTATION_MODEL="indentationModel"})(z||(z={})),function(tt){tt[tt.VALID=0]="VALID",tt[tt.INVALID=1]="INVALID",tt[tt.CANCELED=2]="CANCELED"}(J||(J={}));let re=class{constructor(tt,Qe,bt,ht){this._editor=tt,this._languageConfigurationService=Qe,this._languageFeaturesService=bt,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=new L.vp(300);let xt=new ie(bt),Qt=new be(this._editor,bt),At=new ce(this._editor,Qe);switch(ht){case z.OUTLINE_MODEL:this._modelProviders.push(xt),this._modelProviders.push(Qt),this._modelProviders.push(At);break;case z.FOLDING_PROVIDER_MODEL:this._modelProviders.push(Qt),this._modelProviders.push(At);break;case z.INDENTATION_MODEL:this._modelProviders.push(At)}this._store=new f.SL}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}update(tt,Qe,bt){return p(this,void 0,void 0,function*(){return this._store.clear(),this._store.add({dispose:()=>{var ht;this._cancelModelPromise(),(ht=this._updateScheduler)===null||ht===void 0||ht.cancel()}}),this._cancelModelPromise(),yield this._updateScheduler.trigger(()=>p(this,void 0,void 0,function*(){for(let ht of this._modelProviders){let{statusPromise:xt,modelPromise:Qt}=ht.computeStickyModel(tt,Qe,bt);this._modelPromise=Qt;let At=yield xt;if(this._modelPromise!==Qt)return null;switch(At){case J.CANCELED:return this._store.clear(),null;case J.VALID:return ht.stickyModel}}return null}))})}};re=fe([q(1,$.c_),q(2,d.p)],re);class ne{constructor(){this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,J.INVALID}computeStickyModel(Qe,bt,ht){if(!this.isProviderValid(Qe))return{statusPromise:this._invalid(),modelPromise:null};let xt=(0,L.PG)(Qt=>this.createModelFromProvider(Qe,bt,Qt));return{statusPromise:xt.then(Qt=>this.isModelValid(Qt)?ht.isCancellationRequested?J.CANCELED:(this._stickyModel=this.createStickyModel(Qe,bt,ht,Qt),J.VALID):this._invalid()).then(void 0,Qt=>((0,K.dL)(Qt),J.CANCELED)),modelPromise:xt}}isModelValid(Qe){return!0}isProviderValid(Qe){return!0}}let ie=class extends ne{constructor(tt){super(),this._languageFeaturesService=tt}createModelFromProvider(tt,Qe,bt){return N.C3.create(this._languageFeaturesService.documentSymbolProvider,tt,bt)}createStickyModel(tt,Qe,bt,ht){var xt;let{stickyOutlineElement:Qt,providerID:At}=this._stickyModelFromOutlineModel(ht,(xt=this._stickyModel)===null||xt===void 0?void 0:xt.outlineProviderId);return new H(tt.uri,Qe,Qt,At)}isModelValid(tt){return tt&&tt.children.size>0}_stickyModelFromOutlineModel(tt,Qe){let bt;if(oe.$.first(tt.children.values())instanceof N.H3){let Qt=oe.$.find(tt.children.values(),At=>At.id===Qe);if(Qt)bt=Qt.children;else{let At,mi="",Lt=-1;for(let[ct,Kt]of tt.children.entries()){let pi=this._findSumOfRangesOfGroup(Kt);pi>Lt&&(At=Kt,Lt=pi,mi=Kt.id)}Qe=mi,bt=At.children}}else bt=tt.children;let ht=[],xt=Array.from(bt.values()).sort((Qt,At)=>{let mi=new j(Qt.symbol.range.startLineNumber,Qt.symbol.range.endLineNumber),Lt=new j(At.symbol.range.startLineNumber,At.symbol.range.endLineNumber);return this._comparator(mi,Lt)});for(let Qt of xt)ht.push(this._stickyModelFromOutlineElement(Qt,Qt.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new F(void 0,ht,void 0),providerID:Qe}}_stickyModelFromOutlineElement(tt,Qe){let bt=[];for(let xt of tt.children.values())if(xt.symbol.selectionRange.startLineNumber!==xt.symbol.range.endLineNumber)if(xt.symbol.selectionRange.startLineNumber!==Qe)bt.push(this._stickyModelFromOutlineElement(xt,xt.symbol.selectionRange.startLineNumber));else for(let Qt of xt.children.values())bt.push(this._stickyModelFromOutlineElement(Qt,xt.symbol.selectionRange.startLineNumber));bt.sort((xt,Qt)=>this._comparator(xt.range,Qt.range));let ht=new j(tt.symbol.selectionRange.startLineNumber,tt.symbol.range.endLineNumber);return new F(ht,bt,void 0)}_comparator(tt,Qe){return tt.startLineNumber!==Qe.startLineNumber?tt.startLineNumber-Qe.startLineNumber:Qe.endLineNumber-tt.endLineNumber}_findSumOfRangesOfGroup(tt){let Qe=0;for(let bt of tt.children.values())Qe+=this._findSumOfRangesOfGroup(bt);return tt instanceof N.sT?Qe+tt.symbol.range.endLineNumber-tt.symbol.selectionRange.startLineNumber:Qe}};ie=fe([q(0,d.p)],ie);class se extends ne{constructor(Qe){super(),this._foldingLimitReporter=new T.RangesLimitReporter(Qe)}createStickyModel(Qe,bt,ht,xt){let Qt=this._fromFoldingRegions(xt);return new H(Qe.uri,bt,Qt,void 0)}isModelValid(Qe){return Qe!==null}_fromFoldingRegions(Qe){let bt=Qe.length,ht=[],xt=new F(void 0,[],void 0);for(let Qt=0;Qt<bt;Qt++){let At=Qe.getParentIndex(Qt),mi;mi=At!==-1?ht[At]:xt;let Lt=new F(new j(Qe.getStartLineNumber(Qt),Qe.getEndLineNumber(Qt)+1),[],mi);mi.children.push(Lt),ht.push(Lt)}return xt}}let ce=class extends se{constructor(tt,Qe){super(tt),this._languageConfigurationService=Qe}createModelFromProvider(tt,Qe,bt){return new W.aI(tt,this._languageConfigurationService,this._foldingLimitReporter).compute(bt)}};ce=fe([q(1,$.c_)],ce);let be=class extends se{constructor(tt,Qe){super(tt),this._languageFeaturesService=Qe}isProviderValid(tt){return T.FoldingController.getFoldingRangeProviders(this._languageFeaturesService,tt).length>0}createModelFromProvider(tt,Qe,bt){let ht=T.FoldingController.getFoldingRangeProviders(this._languageFeaturesService,tt);return new C.e(tt,ht,()=>this.createModelFromProvider(tt,Qe,bt),this._foldingLimitReporter,void 0).compute(bt)}};be=fe([q(1,d.p)],be);var de=function(tt,Qe){return function(bt,ht){Qe(bt,ht,tt)}},U=function(tt,Qe,bt,ht){return new(bt||(bt=Promise))(function(xt,Qt){function At(ct){try{Lt(ht.next(ct))}catch(Kt){Qt(Kt)}}function mi(ct){try{Lt(ht.throw(ct))}catch(Kt){Qt(Kt)}}function Lt(ct){var Kt;ct.done?xt(ct.value):(Kt=ct.value,Kt instanceof bt?Kt:new bt(function(pi){pi(Kt)})).then(At,mi)}Lt((ht=ht.apply(tt,Qe||[])).next())})};class ue{constructor(Qe,bt,ht){this.startLineNumber=Qe,this.endLineNumber=bt,this.nestingDepth=ht}}let ve=class extends f.JT{constructor(tt,Qe,bt){super(),this._languageFeaturesService=Qe,this._languageConfigurationService=bt,this._onDidChangeStickyScroll=this._store.add(new O.Q5),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._options=null,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=tt,this._sessionStore=new f.SL,this._updateSoon=this._register(new L.pY(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(ht=>{ht.hasChanged(110)&&this.readConfiguration()})),this.readConfiguration()}dispose(){super.dispose(),this._sessionStore.dispose()}readConfiguration(){this._options=this._editor.getOption(110),this._options.enabled?(this._stickyModelProvider=new re(this._editor,this._languageConfigurationService,this._languageFeaturesService,this._options.defaultModel),this._sessionStore.add(this._editor.onDidChangeModel(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this.update()):this._sessionStore.clear()}getVersionId(){var tt;return(tt=this._model)===null||tt===void 0?void 0:tt.version}update(){var tt;return U(this,void 0,void 0,function*(){(tt=this._cts)===null||tt===void 0||tt.dispose(!0),this._cts=new D.A,yield this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()})}updateStickyModel(tt){return U(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._stickyModelProvider)return;let Qe=this._editor.getModel(),bt=Qe.getVersionId(),ht=this._model&&!(0,R.Xy)(this._model.uri,Qe.uri)?setTimeout(()=>{tt.isCancellationRequested||(this._model=new H(Qe.uri,Qe.getVersionId(),void 0,void 0),this._onDidChangeStickyScroll.fire())},75):void 0;this._model=yield this._stickyModelProvider.update(Qe,bt,tt),clearTimeout(ht)})}updateIndex(tt){return tt===-1?tt=0:tt<0&&(tt=-tt-2),tt}getCandidateStickyLinesIntersectingFromStickyModel(tt,Qe,bt,ht,xt){if(Qe.children.length===0)return;let Qt=xt,At=[];for(let ct=0;ct<Qe.children.length;ct++){let Kt=Qe.children[ct];Kt.range&&At.push(Kt.range.startLineNumber)}let mi=this.updateIndex((0,k.ry)(At,tt.startLineNumber,(ct,Kt)=>ct-Kt)),Lt=this.updateIndex((0,k.ry)(At,tt.startLineNumber+ht,(ct,Kt)=>ct-Kt));for(let ct=mi;ct<=Lt;ct++){let Kt=Qe.children[ct];if(!Kt)return;if(Kt.range){let pi=Kt.range.startLineNumber,li=Kt.range.endLineNumber;tt.startLineNumber<=li+1&&pi-1<=tt.endLineNumber&&pi!==Qt&&(Qt=pi,bt.push(new ue(pi,li-1,ht+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(tt,Kt,bt,ht+1,pi))}else this.getCandidateStickyLinesIntersectingFromStickyModel(tt,Kt,bt,ht,xt)}}getCandidateStickyLinesIntersecting(tt){var Qe,bt;if(!(!((Qe=this._model)===null||Qe===void 0)&&Qe.element))return[];let ht=[];this.getCandidateStickyLinesIntersectingFromStickyModel(tt,this._model.element,ht,0,-1);let xt=(bt=this._editor._getViewModel())===null||bt===void 0?void 0:bt.getHiddenAreas();if(xt)for(let Qt of xt)ht=ht.filter(At=>!(At.startLineNumber>=Qt.startLineNumber&&At.endLineNumber<=Qt.endLineNumber+1));return ht}};ve=function(tt,Qe,bt,ht){var xt,Qt=arguments.length,At=Qt<3?Qe:ht===null?ht=Object.getOwnPropertyDescriptor(Qe,bt):ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")At=Reflect.decorate(tt,Qe,bt,ht);else for(var mi=tt.length-1;mi>=0;mi--)(xt=tt[mi])&&(At=(Qt<3?xt(At):Qt>3?xt(Qe,bt,At):xt(Qe,bt))||At);return Qt>3&&At&&Object.defineProperty(Qe,bt,At),At}([de(1,d.p),de(2,$.c_)],ve);var X=t(2065),ye=t(5606),Ce=t(2005),Ee=t(4314),Ae=t(184),Fe=t(8722),_e=t(8191),te=function(tt,Qe){return function(bt,ht){Qe(bt,ht,tt)}},Le=function(tt,Qe,bt,ht){return new(bt||(bt=Promise))(function(xt,Qt){function At(ct){try{Lt(ht.next(ct))}catch(Kt){Qt(Kt)}}function mi(ct){try{Lt(ht.throw(ct))}catch(Kt){Qt(Kt)}}function Lt(ct){var Kt;ct.done?xt(ct.value):(Kt=ct.value,Kt instanceof bt?Kt:new bt(function(pi){pi(Kt)})).then(At,mi)}Lt((ht=ht.apply(tt,Qe||[])).next())})};let ke=class dd extends f.JT{constructor(Qe,bt,ht,xt,Qt,At,mi){super(),this._editor=Qe,this._contextMenuService=bt,this._languageFeaturesService=ht,this._instaService=xt,this._contextKeyService=mi,this._sessionStore=new f.SL,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._stickyScrollWidget=new E(this._editor),this._stickyLineCandidateProvider=new ve(this._editor,ht,Qt),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new a([],0),this._readConfiguration(),this._register(this._editor.onDidChangeConfiguration(ct=>{ct.hasChanged(110)&&this._readConfiguration()})),this._register(l.nm(this._stickyScrollWidget.getDomNode(),l.tw.CONTEXT_MENU,ct=>Le(this,void 0,void 0,function*(){this._onContextMenu(ct)}))),this._stickyScrollFocusedContextKey=v.u.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=v.u.stickyScrollVisible.bindTo(this._contextKeyService);let Lt=this._register(l.go(this._stickyScrollWidget.getDomNode()));this._register(Lt.onDidBlur(ct=>{let Kt=this._stickyScrollWidget.getDomNode().clientHeight;this._positionRevealed===!1&&Kt===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(Lt.onDidFocus(ct=>{this.focus()})),this._register(this._createClickLinkGesture()),this._register(l.nm(this._stickyScrollWidget.getDomNode(),l.tw.MOUSE_DOWN,ct=>{this._onMouseDown=!0}))}static get(Qe){return Qe.getContribution(dd.ID)}_disposeFocusStickyScrollStore(){var Qe;this._stickyScrollFocusedContextKey.set(!1),(Qe=this._focusDisposableStore)===null||Qe===void 0||Qe.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown)return this._onMouseDown=!1,void this._editor.focus();if(this._stickyScrollFocusedContextKey.get()===!0)return;this._focused=!0,this._focusDisposableStore=new f.SL,this._stickyScrollFocusedContextKey.set(!0);let Qe=this._stickyScrollWidget.getDomNode();Qe.lastElementChild.focus(),this._stickyElements=Qe.children,this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1}focusNext(){this._focusedStickyElementIndex<this._stickyElements.length-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(Qe){this._focusedStickyElementIndex=Qe?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyElements.item(this._focusedStickyElementIndex).focus()}goToFocused(){let Qe=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:Qe[this._focusedStickyElementIndex],column:1})}_revealPosition(Qe){this._positionRevealed=!0,this._editor.revealPosition(Qe),this._editor.setSelection(Ee.e.fromPositions(Qe)),this._editor.focus()}_createClickLinkGesture(){let Qe=new f.SL,bt=new f.SL;Qe.add(bt);let ht=new Ce.yN(this._editor,!0);return Qe.add(ht),Qe.add(ht.onMouseMoveOrRelevantKeyDown(([xt,Qt])=>{if(!this._editor.hasModel()||!xt.hasTriggerModifier)return void bt.clear();let At=xt.target;if(At.detail===this._stickyScrollWidget.getId()&&At.element.innerText===At.element.innerHTML){let mi=At.element.innerText;if(this._stickyScrollWidget.hoverOnColumn===-1)return;let Lt=this._stickyScrollWidget.hoverOnLine,ct=this._stickyScrollWidget.hoverOnColumn,Kt=new Ee.e(Lt,ct,Lt,ct+mi.length);if(Kt.equalsRange(this._stickyRangeProjectedOnEditor)){if(At.element.style.textDecoration==="underline")return}else this._stickyRangeProjectedOnEditor=Kt,bt.clear();let pi=new D.A,li;bt.add((0,f.OF)(()=>pi.dispose(!0))),(0,Ae.nD)(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new i.L(Lt,ct+1),pi.token).then(Wi=>{if(!pi.token.isCancellationRequested)if(Wi.length!==0){this._candidateDefinitionsLength=Wi.length;let Vi=At.element;li!==Vi?(bt.clear(),li=Vi,li.style.textDecoration="underline",bt.add((0,f.OF)(()=>{li.style.textDecoration="none"}))):li||(li=Vi,li.style.textDecoration="underline",bt.add((0,f.OF)(()=>{li.style.textDecoration="none"})))}else bt.clear()})}else bt.clear()})),Qe.add(ht.onCancel(()=>{bt.clear()})),Qe.add(ht.onExecute(xt=>Le(this,void 0,void 0,function*(){xt.target.detail===this._stickyScrollWidget.getId()&&(xt.hasTriggerModifier?(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:this._stickyScrollWidget.hoverOnLine,column:1})),this._instaService.invokeFunction(Fe.K,xt,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})):xt.isRightClick||(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:this._stickyScrollWidget.hoverOnLine,column:this._stickyScrollWidget.hoverOnColumn})))}))),Qe}_onContextMenu(Qe){this._contextMenuService.showContextMenu({menuId:_.eH.StickyScrollContext,getAnchor:()=>Qe})}_readConfiguration(){let Qe=this._editor.getOption(110);if(Qe.enabled===!1)return this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),void(this._enabled=!1);Qe.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(()=>this._renderStickyScroll())),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(bt=>this._onTokensChange(bt))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>this._renderStickyScroll())),this._enabled=!0),this._editor.getOption(65).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>this._renderStickyScroll()))}_needsUpdate(Qe){let bt=this._stickyScrollWidget.getCurrentLines();for(let ht of bt)for(let xt of Qe.ranges)if(ht>=xt.fromLineNumber&&ht<=xt.toLineNumber)return!0;return!1}_onTokensChange(Qe){this._needsUpdate(Qe)&&this._renderStickyScroll()}_onDidResize(){let Qe=this._editor.getLayoutInfo(),bt=Qe.width-Qe.minimap.minimapCanvasOuterWidth-Qe.verticalScrollbarWidth;this._stickyScrollWidget.getDomNode().style.width=`${bt}px`;let ht=Qe.height/this._editor.getOption(64);this._maxStickyLines=Math.round(.25*ht)}_renderStickyScroll(){if(!this._editor.hasModel())return;let Qe=this._editor.getModel(),bt=this._stickyLineCandidateProvider.getVersionId();if(bt===void 0||bt===Qe.getVersionId())if(this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.lineNumbers.length!==0),this._focused)if(this._stickyElements=this._stickyScrollWidget.getDomNode().children,this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState),this._focusedStickyElementIndex=this._stickyElements.length-1,this._focusedStickyElementIndex!==-1&&this._stickyElements.item(this._focusedStickyElementIndex).focus();else{let ht=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState),this._stickyElements.length===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(ht)||(this._focusedStickyElementIndex=this._stickyElements.length-1),this._stickyElements.item(this._focusedStickyElementIndex).focus())}else this._stickyScrollWidget.setState(this._widgetState)}findScrollWidgetState(){let Qe=this._editor.getOption(64),bt=Math.min(this._maxStickyLines,this._editor.getOption(110).maxLineCount),ht=this._editor.getScrollTop(),xt=0,Qt=[],At=this._editor.getVisibleRanges();if(At.length!==0){let mi=new j(At[0].startLineNumber,At[At.length-1].endLineNumber),Lt=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(mi);for(let ct of Lt){let Kt=ct.startLineNumber,pi=ct.endLineNumber,li=ct.nestingDepth;if(pi-Kt>0){let Wi=(li-1)*Qe,Vi=li*Qe,Xi=this._editor.getBottomForLineNumber(Kt)-ht,en=this._editor.getTopForLineNumber(pi)-ht,rn=this._editor.getBottomForLineNumber(pi)-ht;if(Wi>en&&Wi<=rn){Qt.push(Kt),xt=rn-Vi;break}if(Vi>Xi&&Vi<=rn&&Qt.push(Kt),Qt.length===bt)break}}}return new a(Qt,xt)}dispose(){super.dispose(),this._sessionStore.dispose()}};ke.ID="store.contrib.stickyScrollController",ke=function(tt,Qe,bt,ht){var xt,Qt=arguments.length,At=Qt<3?Qe:ht===null?ht=Object.getOwnPropertyDescriptor(Qe,bt):ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")At=Reflect.decorate(tt,Qe,bt,ht);else for(var mi=tt.length-1;mi>=0;mi--)(xt=tt[mi])&&(At=(Qt<3?xt(At):Qt>3?xt(Qe,bt,At):xt(Qe,bt))||At);return Qt>3&&At&&Object.defineProperty(Qe,bt,At),At}([te(1,ye.i),te(2,d.p),te(3,X.TG),te(4,$.c_),te(5,_e.A),te(6,x.i6)],ke);class le extends _.Ke{constructor(){super({id:"editor.action.toggleStickyScroll",title:{value:(0,B.NC)("toggleStickyScroll","Toggle Sticky Scroll"),mnemonicTitle:(0,B.NC)({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Sticky Scroll"),original:"Toggle Sticky Scroll"},category:u.View,toggled:{condition:x.Ao.equals("config.editor.stickyScroll.enabled",!0),title:(0,B.NC)("stickyScroll","Sticky Scroll"),mnemonicTitle:(0,B.NC)({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:_.eH.CommandPalette},{id:_.eH.MenubarViewMenu,group:"5_editor",order:2},{id:_.eH.StickyScrollContext}]})}run(Qe){return bt=this,ht=void 0,Qt=function*(){let At=Qe.get(A.Ui),mi=!At.getValue("editor.stickyScroll.enabled");return At.updateValue("editor.stickyScroll.enabled",mi)},new((xt=void 0)||(xt=Promise))(function(At,mi){function Lt(pi){try{Kt(Qt.next(pi))}catch(li){mi(li)}}function ct(pi){try{Kt(Qt.throw(pi))}catch(li){mi(li)}}function Kt(pi){var li;pi.done?At(pi.value):(li=pi.value,li instanceof xt?li:new xt(function(Wi){Wi(li)})).then(Lt,ct)}Kt((Qt=Qt.apply(bt,ht||[])).next())});var bt,ht,xt,Qt}}let ee=100;class me extends m.x1{constructor(){super({id:"editor.action.focusStickyScroll",title:{value:(0,B.NC)("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:(0,B.NC)({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll"),original:"Focus Sticky Scroll"},precondition:x.Ao.and(x.Ao.has("config.editor.stickyScroll.enabled"),v.u.stickyScrollVisible),menu:[{id:_.eH.CommandPalette}]})}runEditorCommand(Qe,bt){var ht;(ht=ke.get(bt))===null||ht===void 0||ht.focus()}}class xe extends m.x1{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:{value:(0,B.NC)("selectNextStickyScrollLine.title","Select next sticky scroll line"),original:"Select next sticky scroll line"},precondition:v.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ee,primary:18}})}runEditorCommand(Qe,bt){var ht;(ht=ke.get(bt))===null||ht===void 0||ht.focusNext()}}class We extends m.x1{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:{value:(0,B.NC)("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),original:"Select previous sticky scroll line"},precondition:v.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ee,primary:16}})}runEditorCommand(Qe,bt){var ht;(ht=ke.get(bt))===null||ht===void 0||ht.focusPrevious()}}class Ve extends m.x1{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:{value:(0,B.NC)("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),original:"Go to focused sticky scroll line"},precondition:v.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ee,primary:3}})}runEditorCommand(Qe,bt){var ht;(ht=ke.get(bt))===null||ht===void 0||ht.goToFocused()}}class Ye extends m.x1{constructor(){super({id:"editor.action.selectEditor",title:{value:(0,B.NC)("selectEditor.title","Select Editor"),original:"Select Editor"},precondition:v.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:ee,primary:9}})}runEditorCommand(Qe,bt){var ht;(ht=ke.get(bt))===null||ht===void 0||ht.selectEditor()}}(0,m._K)(ke.ID,ke,1),(0,_.r1)(le),(0,_.r1)(me),(0,_.r1)(We),(0,_.r1)(xe),(0,_.r1)(Ve),(0,_.r1)(Ye)},4961:(ut,Ie,t)=>{"use strict";t.d(Ie,{_:()=>_,t:()=>I});var m=t(9488),B=t(5392),u=t(7295);class I{constructor(x,v){this.leadingLineContent=x,this.characterCountDelta=v}}class _{constructor(x,v,f,d,o,h,r=B.mX.default,i=void 0){this.clipboardText=i,this._snippetCompareFn=_._compareCompletionItems,this._items=x,this._column=v,this._wordDistance=d,this._options=o,this._refilterKind=1,this._lineContext=f,this._fuzzyScoreOptions=r,h==="top"?this._snippetCompareFn=_._compareCompletionItemsSnippetsUp:h==="bottom"&&(this._snippetCompareFn=_._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(x){this._lineContext.leadingLineContent===x.leadingLineContent&&this._lineContext.characterCountDelta===x.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<x.characterCountDelta&&this._filteredItems?2:1,this._lineContext=x)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();let x=new Set;for(let[v,f]of this.getItemsByProvider())f.length>0&&f[0].container.incomplete&&x.add(v);return x}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;let x=[],{leadingLineContent:v,characterCountDelta:f}=this._lineContext,d="",o="",h=this._refilterKind===1?this._items:this._filteredItems,r=[],i=!this._options.filterGraceful||h.length>2e3?B.EW:B.l7;for(let c=0;c<h.length;c++){let b=h[c];if(b.isInvalid)continue;let l=this._itemsByProvider.get(b.provider);l?l.push(b):this._itemsByProvider.set(b.provider,[b]);let a=b.position.column-b.editStart.column,w=a+f-(b.position.column-this._column);if(d.length!==w&&(d=w===0?"":v.slice(-w),o=d.toLowerCase()),b.word=d,w===0)b.score=B.CL.Default;else{let E=0;for(;E<a;){let D=d.charCodeAt(E);if(D!==32&&D!==9)break;E+=1}if(E>=w)b.score=B.CL.Default;else if(typeof b.completion.filterText=="string"){let D=i(d,o,E,b.completion.filterText,b.filterTextLow,0,this._fuzzyScoreOptions);if(!D)continue;(0,u.zY)(b.completion.filterText,b.textLabel)===0?b.score=D:(b.score=(0,B.jB)(d,o,E,b.textLabel,b.labelLow,0),b.score[0]=D[0])}else{let D=i(d,o,E,b.textLabel,b.labelLow,0,this._fuzzyScoreOptions);if(!D)continue;b.score=D}}b.idx=c,b.distance=this._wordDistance.distance(b.position,b.completion),r.push(b),x.push(b.textLabel.length)}this._filteredItems=r.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:x.length?(0,m.HW)(x.length-.85,x,(c,b)=>c-b):0}}static _compareCompletionItems(x,v){return x.score[0]>v.score[0]?-1:x.score[0]<v.score[0]?1:x.distance<v.distance?-1:x.distance>v.distance?1:x.idx<v.idx?-1:x.idx>v.idx?1:0}static _compareCompletionItemsSnippetsDown(x,v){if(x.completion.kind!==v.completion.kind){if(x.completion.kind===27)return 1;if(v.completion.kind===27)return-1}return _._compareCompletionItems(x,v)}static _compareCompletionItemsSnippetsUp(x,v){if(x.completion.kind!==v.completion.kind){if(x.completion.kind===27)return-1;if(v.completion.kind===27)return 1}return _._compareCompletionItems(x,v)}}},5621:(ut,Ie,t)=>{"use strict";t.d(Ie,{A9:()=>L,GI:()=>E,ZJ:()=>R,_y:()=>w,i5:()=>C,kL:()=>$,tG:()=>W});var m=t(1050),B=t(7301),u=t(5392),I=t(5976),_=t(4013),A=t(8401),x=t(666),v=t(187),f=t(4314),d=t(8216),o=t(5084),h=t(3580),r=t(4144),i=t(4565),c=t(3983),b=t(1922),l=t(2980),a=function(K,j,F,H){return new(F||(F=Promise))(function(z,J){function oe(p){try{q(H.next(p))}catch(re){J(re)}}function fe(p){try{q(H.throw(p))}catch(re){J(re)}}function q(p){var re;p.done?z(p.value):(re=p.value,re instanceof F?re:new F(function(ne){ne(re)})).then(oe,fe)}q((H=H.apply(K,j||[])).next())})};let w={Visible:l.iX,HasFocusedSuggestion:new c.uy("suggestWidgetHasFocusedSuggestion",!1,(0,h.NC)("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new c.uy("suggestWidgetDetailsVisible",!1,(0,h.NC)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new c.uy("suggestWidgetMultipleSuggestions",!1,(0,h.NC)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new c.uy("suggestionMakesTextEdit",!0,(0,h.NC)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new c.uy("acceptSuggestionOnEnter",!0,(0,h.NC)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new c.uy("suggestionHasInsertAndReplaceRange",!1,(0,h.NC)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new c.uy("suggestionInsertMode",void 0,{type:"string",description:(0,h.NC)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new c.uy("suggestionCanResolve",!1,(0,h.NC)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},E=new r.eH("suggestWidgetStatusBar");class D{constructor(j,F,H,z){var J;this.position=j,this.completion=F,this.container=H,this.provider=z,this.isInvalid=!1,this.score=u.CL.Default,this.distance=0,this.textLabel=typeof F.label=="string"?F.label:(J=F.label)===null||J===void 0?void 0:J.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=F.sortText&&F.sortText.toLowerCase(),this.filterTextLow=F.filterText&&F.filterText.toLowerCase(),this.extensionId=F.extensionId,f.e.isIRange(F.range)?(this.editStart=new v.L(F.range.startLineNumber,F.range.startColumn),this.editInsertEnd=new v.L(F.range.endLineNumber,F.range.endColumn),this.editReplaceEnd=new v.L(F.range.endLineNumber,F.range.endColumn),this.isInvalid=this.isInvalid||f.e.spansMultipleLines(F.range)||F.range.startLineNumber!==j.lineNumber):(this.editStart=new v.L(F.range.insert.startLineNumber,F.range.insert.startColumn),this.editInsertEnd=new v.L(F.range.insert.endLineNumber,F.range.insert.endColumn),this.editReplaceEnd=new v.L(F.range.replace.endLineNumber,F.range.replace.endColumn),this.isInvalid=this.isInvalid||f.e.spansMultipleLines(F.range.insert)||f.e.spansMultipleLines(F.range.replace)||F.range.insert.startLineNumber!==j.lineNumber||F.range.replace.startLineNumber!==j.lineNumber||F.range.insert.startColumn!==F.range.replace.startColumn),typeof z.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(j){return a(this,void 0,void 0,function*(){if(!this._resolveCache){let F=j.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,j)).then(H=>{Object.assign(this.completion,H),this._isResolved=!0,F.dispose()},H=>{(0,B.n2)(H)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class L{constructor(j=2,F=new Set,H=new Set,z=new Map,J=!0){this.snippetSortOrder=j,this.kindFilter=F,this.providerFilter=H,this.providerItemsToReuse=z,this.showDeprecated=J}}let k;function R(){return k}L.default=new L;class O{constructor(j,F,H,z){this.items=j,this.needsClipboard=F,this.durations=H,this.disposable=z}}function $(K,j,F,H=L.default,z={triggerKind:0},J=m.T.None){return a(this,void 0,void 0,function*(){let oe=new _.G(!0);F=F.clone();let fe=j.getWordAtPosition(F),q=fe?new f.e(F.lineNumber,fe.startColumn,F.lineNumber,fe.endColumn):f.e.fromPositions(F),p={replace:q,insert:q.setEndPosition(F.lineNumber,F.column)},re=[],ne=new I.SL,ie=[],se=!1,ce=(U,ue,ve)=>{var X,ye,Ce;let Ee=!1;if(!ue)return Ee;for(let Ae of ue.suggestions)if(!H.kindFilter.has(Ae.kind)){if(!H.showDeprecated&&(!((X=Ae==null?void 0:Ae.tags)===null||X===void 0)&&X.includes(1)))continue;Ae.range||(Ae.range=p),Ae.sortText||(Ae.sortText=typeof Ae.label=="string"?Ae.label:Ae.label.label),!se&&Ae.insertTextRules&&4&Ae.insertTextRules&&(se=o.Yj.guessNeedsClipboard(Ae.insertText)),re.push(new D(F,Ae,ue,U)),Ee=!0}return(0,I.Wf)(ue)&&ne.add(ue),ie.push({providerName:(ye=U._debugDisplayName)!==null&&ye!==void 0?ye:"unknown_provider",elapsedProvider:(Ce=ue.duration)!==null&&Ce!==void 0?Ce:-1,elapsedOverall:ve.elapsed()}),Ee},be=(()=>a(this,void 0,void 0,function*(){if(!k||H.kindFilter.has(27))return;let U=H.providerItemsToReuse.get(k);if(U)return void U.forEach(X=>re.push(X));if(H.providerFilter.size>0&&!H.providerFilter.has(k))return;let ue=new _.G(!0),ve=yield k.provideCompletionItems(j,F,z,J);ce(k,ve,ue)}))();for(let U of K.orderedGroups(j)){let ue=!1;if(yield Promise.all(U.map(ve=>a(this,void 0,void 0,function*(){if(H.providerItemsToReuse.has(ve)){let X=H.providerItemsToReuse.get(ve);return X.forEach(ye=>re.push(ye)),void(ue=ue||X.length>0)}if(!(H.providerFilter.size>0)||H.providerFilter.has(ve))try{let X=new _.G(!0),ye=yield ve.provideCompletionItems(j,F,z,J);ue=ce(ve,ye,X)||ue}catch(X){(0,B.Cp)(X)}}))),ue||J.isCancellationRequested)break}return yield be,J.isCancellationRequested?(ne.dispose(),Promise.reject(new B.FU)):new O(re.sort((de=H.snippetSortOrder,T.get(de))),se,{entries:ie,elapsed:oe.elapsed()},ne);var de})}function N(K,j){if(K.sortTextLow&&j.sortTextLow){if(K.sortTextLow<j.sortTextLow)return-1;if(K.sortTextLow>j.sortTextLow)return 1}return K.textLabel<j.textLabel?-1:K.textLabel>j.textLabel?1:K.completion.kind-j.completion.kind}let T=new Map;function C(K,j){var F;(F=K.getContribution("editor.contrib.suggestController"))===null||F===void 0||F.triggerSuggest(new Set().add(j),void 0,!0)}T.set(0,function(K,j){if(K.completion.kind!==j.completion.kind){if(K.completion.kind===27)return-1;if(j.completion.kind===27)return 1}return N(K,j)}),T.set(2,function(K,j){if(K.completion.kind!==j.completion.kind){if(K.completion.kind===27)return 1;if(j.completion.kind===27)return-1}return N(K,j)}),T.set(1,N),i.P.registerCommand("_executeCompletionItemProvider",(K,...j)=>a(void 0,void 0,void 0,function*(){let[F,H,z,J]=j;(0,A.p_)(x.o.isUri(F)),(0,A.p_)(v.L.isIPosition(H)),(0,A.p_)(typeof z=="string"||!z),(0,A.p_)(typeof J=="number"||!J);let{completionProvider:oe}=K.get(b.p),fe=yield K.get(d.S).createModelReference(F);try{let q={incomplete:!1,suggestions:[]},p=[],re=fe.object.textEditorModel.validatePosition(H),ne=yield $(oe,fe.object.textEditorModel,re,void 0,{triggerCharacter:z!=null?z:void 0,triggerKind:z?1:0});for(let ie of ne.items)p.length<(J!=null?J:0)&&p.push(ie.resolve(m.T.None)),q.incomplete=q.incomplete||ie.container.incomplete,q.suggestions.push(ie.completion);try{return yield Promise.all(p),q}finally{setTimeout(()=>ne.disposable.dispose(),100)}}finally{fe.dispose()}}));class W{static isAllOff(j){return j.other==="off"&&j.comments==="off"&&j.strings==="off"}static isAllOn(j){return j.other==="on"&&j.comments==="on"&&j.strings==="on"}static valueFor(j,F){switch(F){case 1:return j.comments;case 2:return j.strings;default:return j.other}}}},4804:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{SuggestController:()=>Te,TriggerSuggestAction:()=>rt});var m=t(5152),B=t(9488),u=t(5393),I=t(1050),_=t(7301),A=t(4669),x=t(8313),v=t(5976),f=t(1432),d=t(4013),o=t(8401),h=t(3407),r=t(6830),i=t(9386),c=t(187),b=t(4314),l=t(9102),a=t(8762),w=t(5084),E=t(378),D=t(3983);let L=class hd{constructor(Re,qe){this._editor=Re,this._enabled=!1,this._ckAtEnd=hd.AtEnd.bindTo(qe),this._configListener=this._editor.onDidChangeConfiguration(Ue=>Ue.hasChanged(118)&&this._update()),this._update()}dispose(){var Re;this._configListener.dispose(),(Re=this._selectionListener)===null||Re===void 0||Re.dispose(),this._ckAtEnd.reset()}_update(){let Re=this._editor.getOption(118)==="on";if(this._enabled!==Re)if(this._enabled=Re,this._enabled){let qe=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);let Ue=this._editor.getModel(),Pe=this._editor.getSelection(),Xe=Ue.getWordAtPosition(Pe.getStartPosition());Xe?this._ckAtEnd.set(Xe.endColumn===Pe.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(qe),qe()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};var k,R;L.AtEnd=new D.uy("atEndOfWord",!1),L=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([(k=1,R=D.i6,function(dt,Re){R(dt,Re,k)})],L);var O=t(3580),$=t(4565),N=t(2065),T=t(3557),C=t(5621);let W=class pa{constructor(Re,qe){this._editor=Re,this._index=0,this._ckOtherSuggestions=pa.OtherSuggestions.bindTo(qe)}dispose(){this.reset()}reset(){var Re;this._ckOtherSuggestions.reset(),(Re=this._listener)===null||Re===void 0||Re.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:Re,index:qe},Ue){Re.items.length!==0&&pa._moveIndex(!0,Re,qe)!==qe?(this._acceptNext=Ue,this._model=Re,this._index=qe,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(Re,qe,Ue){let Pe=Ue;for(let Xe=qe.items.length;Xe>0&&(Pe=(Pe+qe.items.length+(Re?1:-1))%qe.items.length,Pe!==Ue)&&qe.items[Pe].completion.additionalTextEdits;Xe--);return Pe}next(){this._move(!0)}prev(){this._move(!1)}_move(Re){if(this._model)try{this._ignore=!0,this._index=pa._moveIndex(Re,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};W.OtherSuggestions=new D.uy("hasOtherSuggestions",!1),W=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}}(1,D.i6)],W);var K=t(4906);class j{constructor(Re,qe,Ue,Pe){this._disposables=new v.SL,this._disposables.add(Ue.onDidSuggest(Xe=>{Xe.completionModel.items.length===0&&this.reset()})),this._disposables.add(Ue.onDidCancel(Xe=>{this.reset()})),this._disposables.add(qe.onDidShow(()=>this._onItem(qe.getFocusedItem()))),this._disposables.add(qe.onDidFocus(this._onItem,this)),this._disposables.add(qe.onDidHide(this.reset,this)),this._disposables.add(Re.onWillType(Xe=>{if(this._active&&!qe.isFrozen()&&Ue.state!==0){let $e=Xe.charCodeAt(Xe.length-1);this._active.acceptCharacters.has($e)&&Re.getOption(0)&&Pe(this._active.item)}}))}_onItem(Re){if(!Re||!(0,B.Of)(Re.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===Re.item)return;let qe=new K.q;for(let Ue of Re.item.completion.commitCharacters)Ue.length>0&&qe.add(Ue.charCodeAt(0));this._active={acceptCharacters:qe,item:Re}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var F=t(7295),H=t(3860),z=t(4319),J=t(4477),oe=t(4972),fe=t(3108),q=t(829),p=t(4961),re=t(1922),ne=t(5392),ie=t(8573),se=function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}};class ce{static shouldAutoTrigger(Re){if(!Re.hasModel())return!1;let qe=Re.getModel(),Ue=Re.getPosition();qe.tokenization.tokenizeIfCheap(Ue.lineNumber);let Pe=qe.getWordAtPosition(Ue);return!!Pe&&Pe.endColumn===Ue.column&&!!isNaN(Number(Pe.word))}constructor(Re,qe,Ue){this.leadingLineContent=Re.getLineContent(qe.lineNumber).substr(0,qe.column-1),this.leadingWord=Re.getWordUntilPosition(qe),this.lineNumber=qe.lineNumber,this.column=qe.column,this.triggerOptions=Ue}}let be=class cd{constructor(Re,qe,Ue,Pe,Xe,$e,ot,Tt){this._editor=Re,this._editorWorkerService=qe,this._clipboardService=Ue,this._telemetryService=Pe,this._logService=Xe,this._contextKeyService=$e,this._configurationService=ot,this._languageFeaturesService=Tt,this._toDispose=new v.SL,this._triggerCharacterListener=new v.SL,this._triggerQuickSuggest=new u._F,this._triggerState=void 0,this._completionDisposables=new v.SL,this._onDidCancel=new A.Q5,this._onDidTrigger=new A.Q5,this._onDidSuggest=new A.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new H.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let Ot=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{Ot=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{Ot=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(ti=>{Ot||this._onCursorChange(ti)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{Ot||this._triggerState===void 0||this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){(0,v.B9)(this._triggerCharacterListener),(0,v.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(87)||!this._editor.hasModel()||!this._editor.getOption(116))return;let Re=new Map;for(let Ue of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let Pe of Ue.triggerCharacters||[]){let Xe=Re.get(Pe);Xe||(Xe=new Set,Xe.add((0,C.ZJ)()),Re.set(Pe,Xe)),Xe.add(Ue)}let qe=Ue=>{var Pe;if(!function(ot,Tt,Ot){if(!Tt.getContextKeyValue("inlineSuggestionVisible"))return!0;let ti=Tt.getContextKeyValue(ie.f.suppressSuggestions.key);return ti!==void 0?!ti:!ot.getOption(60).suppressSuggestions}(this._editor,this._contextKeyService,this._configurationService)||ce.shouldAutoTrigger(this._editor))return;if(!Ue){let ot=this._editor.getPosition();Ue=this._editor.getModel().getLineContent(ot.lineNumber).substr(0,ot.column-1)}let Xe="";(0,F.YK)(Ue.charCodeAt(Ue.length-1))?(0,F.ZG)(Ue.charCodeAt(Ue.length-2))&&(Xe=Ue.substr(Ue.length-2)):Xe=Ue.charAt(Ue.length-1);let $e=Re.get(Xe);if($e){let ot=new Map;if(this._completionModel)for(let[Tt,Ot]of this._completionModel.getItemsByProvider())$e.has(Tt)||ot.set(Tt,Ot);this.trigger({auto:!0,triggerKind:1,triggerCharacter:Xe,retrigger:!!this._completionModel,clipboardText:(Pe=this._completionModel)===null||Pe===void 0?void 0:Pe.clipboardText,completionOptions:{providerFilter:$e,providerItemsToReuse:ot}})}};this._triggerCharacterListener.add(this._editor.onDidType(qe)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>qe()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(Re=!1){var qe;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(qe=this._requestToken)===null||qe===void 0||qe.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:Re}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}_onCursorChange(Re){if(!this._editor.hasModel())return;let qe=this._currentSelection;this._currentSelection=this._editor.getSelection(),!Re.selection.isEmpty()||Re.reason!==0&&Re.reason!==3||Re.source!=="keyboard"&&Re.source!=="deleteLeft"?this.cancel():this._triggerState===void 0&&Re.reason===0?(qe.containsRange(this._currentSelection)||qe.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&Re.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){C.tG.isAllOff(this._editor.getOption(85))||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!ce.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let Re=this._editor.getModel(),qe=this._editor.getPosition(),Ue=this._editor.getOption(85);if(!C.tG.isAllOff(Ue)){if(!C.tG.isAllOn(Ue)){Re.tokenization.tokenizeIfCheap(qe.lineNumber);let Pe=Re.tokenization.getLineTokens(qe.lineNumber),Xe=Pe.getStandardTokenType(Pe.findTokenIndexAtOffset(Math.max(qe.column-1-1,0)));if(C.tG.valueFor(Ue,Xe)!=="on")return}(function(Pe,Xe,$e){if(!Xe.getContextKeyValue(ie.f.inlineSuggestionVisible.key))return!0;let ot=Xe.getContextKeyValue(ie.f.suppressSuggestions.key);return ot!==void 0?!ot:!Pe.getOption(60).suppressSuggestions})(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(Re)&&this.trigger({auto:!0})}},this._editor.getOption(86)))}_refilterCompletionItems(){(0,o.p_)(this._editor.hasModel()),(0,o.p_)(this._triggerState!==void 0);let Re=this._editor.getModel(),qe=this._editor.getPosition(),Ue=new ce(Re,qe,Object.assign(Object.assign({},this._triggerState),{refilter:!0}));this._onNewContext(Ue)}trigger(Re){var qe,Ue,Pe,Xe,$e,ot;if(!this._editor.hasModel())return;let Tt=this._editor.getModel(),Ot=new ce(Tt,this._editor.getPosition(),Re);this.cancel(Re.retrigger),this._triggerState=Re,this._onDidTrigger.fire({auto:Re.auto,shy:(qe=Re.shy)!==null&&qe!==void 0&&qe,position:this._editor.getPosition()}),this._context=Ot;let ti={triggerKind:(Ue=Re.triggerKind)!==null&&Ue!==void 0?Ue:0};Re.triggerCharacter&&(ti={triggerKind:1,triggerCharacter:Re.triggerCharacter}),this._requestToken=new I.A;let zt=1;switch(this._editor.getOption(107)){case"top":zt=0;break;case"bottom":zt=2}let{itemKind:Jt,showDeprecated:Gt}=cd._createSuggestFilter(this._editor),$t=new C.A9(zt,(Xe=(Pe=Re.completionOptions)===null||Pe===void 0?void 0:Pe.kindFilter)!==null&&Xe!==void 0?Xe:Jt,($e=Re.completionOptions)===null||$e===void 0?void 0:$e.providerFilter,(ot=Re.completionOptions)===null||ot===void 0?void 0:ot.providerItemsToReuse,Gt),si=J.K.create(this._editorWorkerService,this._editor),ai=(0,C.kL)(this._languageFeaturesService.completionProvider,Tt,this._editor.getPosition(),$t,ti,this._requestToken.token);Promise.all([ai,si]).then(([_i,Li])=>{return ri=this,qt=void 0,mt=function*(){var wt;if((wt=this._requestToken)===null||wt===void 0||wt.dispose(),!this._editor.hasModel())return;let Rt=Re==null?void 0:Re.clipboardText;if(!Rt&&_i.needsClipboard&&(Rt=yield this._clipboardService.readText()),this._triggerState===void 0)return;let oi=this._editor.getModel(),ei=new ce(oi,this._editor.getPosition(),Re),yi=Object.assign(Object.assign({},ne.mX.default),{firstMatchCanBeWeak:!this._editor.getOption(113).matchOnWordStartOnly});this._completionModel=new p._(_i.items,this._context.column,{leadingLineContent:ei.leadingLineContent,characterCountDelta:ei.column-this._context.column},Li,this._editor.getOption(113),this._editor.getOption(107),yi,Rt),this._completionDisposables.add(_i.disposable),this._onNewContext(ei),this._reportDurationsTelemetry(_i.durations)},new((je=void 0)||(je=Promise))(function(wt,Rt){function oi(ki){try{yi(mt.next(ki))}catch(Ti){Rt(Ti)}}function ei(ki){try{yi(mt.throw(ki))}catch(Ti){Rt(Ti)}}function yi(ki){var Ti;ki.done?wt(ki.value):(Ti=ki.value,Ti instanceof je?Ti:new je(function(Pi){Pi(Ti)})).then(oi,ei)}yi((mt=mt.apply(ri,qt||[])).next())});var ri,qt,je,mt}).catch(_.dL)}_reportDurationsTelemetry(Re){this._telemetryGate++%230==0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(Re)}),this._logService.debug("suggest.durations.json",Re)})}static _createSuggestFilter(Re){let qe=new Set;Re.getOption(107)==="none"&&qe.add(27);let Ue=Re.getOption(113);return Ue.showMethods||qe.add(0),Ue.showFunctions||qe.add(1),Ue.showConstructors||qe.add(2),Ue.showFields||qe.add(3),Ue.showVariables||qe.add(4),Ue.showClasses||qe.add(5),Ue.showStructs||qe.add(6),Ue.showInterfaces||qe.add(7),Ue.showModules||qe.add(8),Ue.showProperties||qe.add(9),Ue.showEvents||qe.add(10),Ue.showOperators||qe.add(11),Ue.showUnits||qe.add(12),Ue.showValues||qe.add(13),Ue.showConstants||qe.add(14),Ue.showEnums||qe.add(15),Ue.showEnumMembers||qe.add(16),Ue.showKeywords||qe.add(17),Ue.showWords||qe.add(18),Ue.showColors||qe.add(19),Ue.showFiles||qe.add(20),Ue.showReferences||qe.add(21),Ue.showColors||qe.add(22),Ue.showFolders||qe.add(23),Ue.showTypeParameters||qe.add(24),Ue.showSnippets||qe.add(27),Ue.showUsers||qe.add(25),Ue.showIssues||qe.add(26),{itemKind:qe,showDeprecated:Ue.showDeprecated}}_onNewContext(Re){if(this._context)if(Re.lineNumber===this._context.lineNumber)if((0,F.V8)(Re.leadingLineContent)===(0,F.V8)(this._context.leadingLineContent)){if(Re.column<this._context.column)Re.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(Re.leadingWord.word.length!==0&&Re.leadingWord.startColumn>this._context.leadingWord.startColumn){if(ce.shouldAutoTrigger(this._editor)&&this._context){let qe=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:qe}})}}else if(Re.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&Re.leadingWord.word.length!==0){let qe=new Map,Ue=new Set;for(let[Pe,Xe]of this._completionModel.getItemsByProvider())Xe.length>0&&Xe[0].container.incomplete?Ue.add(Pe):qe.set(Pe,Xe);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:Ue,providerItemsToReuse:qe}})}else{let qe=this._completionModel.lineContext,Ue=!1;if(this._completionModel.lineContext={leadingLineContent:Re.leadingLineContent,characterCountDelta:Re.column-this._context.column},this._completionModel.items.length===0){let Pe=ce.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(Pe&&this._context.leadingWord.endColumn<Re.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=qe,Ue=this._completionModel.items.length>0,Ue&&Re.leadingWord.word.length===0)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:Re.triggerOptions,isFrozen:Ue})}}else this.cancel();else this.cancel()}};be=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([se(1,z.p),se(2,oe.p),se(3,q.b),se(4,T.VZ),se(5,D.i6),se(6,fe.Ui),se(7,re.p)],be);class de{constructor(Re,qe){this._disposables=new v.SL,this._lastOvertyped=[],this._locked=!1,this._disposables.add(Re.onWillType(()=>{if(this._locked||!Re.hasModel())return;let Ue=Re.getSelections(),Pe=Ue.length,Xe=!1;for(let ot=0;ot<Pe;ot++)if(!Ue[ot].isEmpty()){Xe=!0;break}if(!Xe)return void(this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0));this._lastOvertyped=[];let $e=Re.getModel();for(let ot=0;ot<Pe;ot++){let Tt=Ue[ot];if($e.getValueLengthInRange(Tt)>de._maxSelectionLength)return;this._lastOvertyped[ot]={value:$e.getValueInRange(Tt),multiline:Tt.startLineNumber!==Tt.endLineNumber}}})),this._disposables.add(qe.onDidTrigger(Ue=>{this._locked=!0})),this._disposables.add(qe.onDidCancel(Ue=>{this._locked=!1}))}getLastOvertypedInfo(Re){if(Re>=0&&Re<this._lastOvertyped.length)return this._lastOvertyped[Re]}dispose(){this._disposables.dispose()}}de._maxSelectionLength=51200;var U=t(5321),ue=t(3799),ve=t(9870),X=t(4527),ye=t(317),Ce=t(2444),Ee=t(4144),Ae=function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}};class Fe extends Ce.Mm{updateLabel(){let Re=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!Re)return super.updateLabel();this.label&&(this.label.textContent=(0,O.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,Fe.symbolPrintEnter(Re)))}static symbolPrintEnter(Re){var qe;return(qe=Re.getLabel())===null||qe===void 0?void 0:qe.replace(/\benter\b/gi,"\u23CE")}}let _e=class{constructor(dt,Re,qe,Ue,Pe){this._menuId=Re,this._menuService=Ue,this._contextKeyService=Pe,this._menuDisposables=new v.SL,this.element=U.R3(dt,U.$(".suggest-status-bar"));let Xe=$e=>$e instanceof Ee.U8?qe.createInstance(Fe,$e,void 0):void 0;this._leftActions=new ye.o(this.element,{actionViewItemProvider:Xe}),this._rightActions=new ye.o(this.element,{actionViewItemProvider:Xe}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){let dt=this._menuService.createMenu(this._menuId,this._contextKeyService),Re=()=>{let qe=[],Ue=[];for(let[Pe,Xe]of dt.getActions())Pe==="left"?qe.push(...Xe):Ue.push(...Xe);this._leftActions.clear(),this._leftActions.push(qe),this._rightActions.clear(),this._rightActions.push(Ue)};this._menuDisposables.add(dt.onDidChange(()=>Re())),this._menuDisposables.add(dt)}hide(){this._menuDisposables.clear()}};_e=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([Ae(2,N.TG),Ae(3,Ee.co),Ae(4,D.i6)],_e),t(1713);var te=t(6904),Le=t(3910),ke=t(2321),le=t(7781),ee=t(3098);class me{constructor(){let Re;this._onDidWillResize=new A.Q5,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new A.Q5,this.onDidResize=this._onDidResize.event,this._sashListener=new v.SL,this._size=new U.Ro(0,0),this._minSize=new U.Ro(0,0),this._maxSize=new U.Ro(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new ee.g(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new ee.g(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new ee.g(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:ee.l.North}),this._southSash=new ee.g(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:ee.l.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let qe=0,Ue=0;this._sashListener.add(A.ju.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{Re===void 0&&(this._onDidWillResize.fire(),Re=this._size,qe=0,Ue=0)})),this._sashListener.add(A.ju.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{Re!==void 0&&(Re=void 0,qe=0,Ue=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(Pe=>{Re&&(Ue=Pe.currentX-Pe.startX,this.layout(Re.height+qe,Re.width+Ue),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(Pe=>{Re&&(Ue=-(Pe.currentX-Pe.startX),this.layout(Re.height+qe,Re.width+Ue),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(Pe=>{Re&&(qe=-(Pe.currentY-Pe.startY),this.layout(Re.height+qe,Re.width+Ue),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(Pe=>{Re&&(qe=Pe.currentY-Pe.startY,this.layout(Re.height+qe,Re.width+Ue),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(A.ju.any(this._eastSash.onDidReset,this._westSash.onDidReset)(Pe=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(A.ju.any(this._northSash.onDidReset,this._southSash.onDidReset)(Pe=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(Re,qe,Ue,Pe){this._northSash.state=Re?3:0,this._eastSash.state=qe?3:0,this._southSash.state=Ue?3:0,this._westSash.state=Pe?3:0}layout(Re=this.size.height,qe=this.size.width){let{height:Ue,width:Pe}=this._minSize,{height:Xe,width:$e}=this._maxSize;Re=Math.max(Ue,Math.min(Xe,Re)),qe=Math.max(Pe,Math.min($e,qe));let ot=new U.Ro(qe,Re);U.Ro.equals(ot,this._size)||(this.domNode.style.height=Re+"px",this.domNode.style.width=qe+"px",this._size=ot,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(Re){this._maxSize=Re}get maxSize(){return this._maxSize}set minSize(Re){this._minSize=Re}get minSize(){return this._minSize}set preferredSize(Re){this._preferredSize=Re}get preferredSize(){return this._preferredSize}}var xe=t(9802),We=t(3046),Ve=t(5670),Ye=t(9365),tt=t(5241);function Qe(dt){return!!dt&&!!(dt.completion.documentation||dt.completion.detail&&dt.completion.detail!==dt.completion.label)}let bt=class{constructor(dt,Re){this._editor=dt,this._onDidClose=new A.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new A.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new v.SL,this._renderDisposeable=new v.SL,this._borderWidth=1,this._size=new U.Ro(330,0),this.domNode=U.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=Re.createInstance(tt.$,{editor:dt}),this._body=U.$(".body"),this._scrollbar=new xe.s$(this._body,{alwaysConsumeMouseWheel:!0}),U.R3(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=U.R3(this._body,U.$(".header")),this._close=U.R3(this._header,U.$("span"+Ve.k.asCSSSelector(We.l.close))),this._close.title=O.NC("details.close","Close"),this._type=U.R3(this._header,U.$("p.type")),this._docs=U.R3(this._body,U.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(qe=>{qe.hasChanged(48)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let dt=this._editor.getOptions(),Re=dt.get(48),qe=Re.getMassagedFontFamily(),Ue=dt.get(114)||Re.fontSize,Pe=dt.get(115)||Re.lineHeight,Xe=Re.fontWeight,$e=`${Ue}px`,ot=`${Pe}px`;this.domNode.style.fontSize=$e,this.domNode.style.lineHeight=""+Pe/Ue,this.domNode.style.fontWeight=Xe,this.domNode.style.fontFeatureSettings=Re.fontFeatureSettings,this._type.style.fontFamily=qe,this._close.style.height=ot,this._close.style.width=ot}getLayoutInfo(){let dt=this._editor.getOption(115)||this._editor.getOption(48).lineHeight,Re=this._borderWidth;return{lineHeight:dt,borderWidth:Re,borderHeight:2*Re,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=O.NC("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(dt,Re){var qe,Ue;this._renderDisposeable.clear();let{detail:Pe,documentation:Xe}=dt.completion;if(Re){let $e="";$e+=`score: ${dt.score[0]}
`,$e+=`prefix: ${(qe=dt.word)!==null&&qe!==void 0?qe:"(no prefix)"}
`,$e+=`word: ${dt.completion.filterText?dt.completion.filterText+" (filterText)":dt.textLabel}
`,$e+=`distance: ${dt.distance} (localityBonus-setting)
`,$e+=`index: ${dt.idx}, based on ${dt.completion.sortText&&`sortText: "${dt.completion.sortText}"`||"label"}
`,$e+=`commit_chars: ${(Ue=dt.completion.commitCharacters)===null||Ue===void 0?void 0:Ue.join("")}
`,Xe=new Ye.W5().appendCodeblock("empty",$e),Pe=`Provider: ${dt.provider._debugDisplayName}`}if(Re||Qe(dt)){if(this.domNode.classList.remove("no-docs","no-type"),Pe){let $e=Pe.length>1e5?`${Pe.substr(0,1e5)}\u2026`:Pe;this._type.textContent=$e,this._type.title=$e,U.$Z(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test($e))}else U.PO(this._type),this._type.title="",U.Cp(this._type),this.domNode.classList.add("no-type");if(U.PO(this._docs),typeof Xe=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=Xe;else if(Xe){this._docs.classList.add("markdown-docs"),U.PO(this._docs);let $e=this._markdownRenderer.render(Xe);this._docs.appendChild($e.element),this._renderDisposeable.add($e),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=$e=>{$e.preventDefault(),$e.stopPropagation()},this._close.onclick=$e=>{$e.preventDefault(),$e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(dt,Re){let qe=new U.Ro(dt,Re);U.Ro.equals(qe,this._size)||(this._size=qe,U.dp(this.domNode,dt,Re)),this._scrollbar.scanDomNode()}scrollDown(dt=8){this._body.scrollTop+=dt}scrollUp(dt=8){this._body.scrollTop-=dt}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(dt){this._borderWidth=dt}get borderWidth(){return this._borderWidth}};bt=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}}(1,N.TG)],bt);class ht{constructor(Re,qe){let Ue,Pe;this.widget=Re,this._editor=qe,this._disposables=new v.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new me,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(Re.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let Xe=0,$e=0;this._disposables.add(this._resizable.onDidWillResize(()=>{Ue=this._topLeft,Pe=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(ot=>{if(Ue&&Pe){this.widget.layout(ot.dimension.width,ot.dimension.height);let Tt=!1;ot.west&&($e=Pe.width-ot.dimension.width,Tt=!0),ot.north&&(Xe=Pe.height-ot.dimension.height,Tt=!0),Tt&&this._applyTopLeft({top:Ue.top+Xe,left:Ue.left+$e})}ot.done&&(Ue=void 0,Pe=void 0,Xe=0,$e=0,this._userSize=ot.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var ot;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(ot=this._userSize)!==null&&ot!==void 0?ot:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(Re=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),Re&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(Re,qe){var Ue;let Pe=Re.getBoundingClientRect();this._anchorBox=Pe,this._preferAlignAtTop=qe,this._placeAtAnchor(this._anchorBox,(Ue=this._userSize)!==null&&Ue!==void 0?Ue:this.widget.size,qe)}_placeAtAnchor(Re,qe,Ue){var Pe;let Xe=U.D6(document.body),$e=this.widget.getLayoutInfo(),ot=new U.Ro(220,2*$e.lineHeight),Tt=Re.top,Ot=function(){let _i=Xe.width-(Re.left+Re.width+$e.borderWidth+$e.horizontalPadding),Li=-$e.borderWidth+Re.left+Re.width,ri=new U.Ro(_i,Xe.height-Re.top-$e.borderHeight-$e.verticalPadding),qt=ri.with(void 0,Re.top+Re.height-$e.borderHeight-$e.verticalPadding);return{top:Tt,left:Li,fit:_i-qe.width,maxSizeTop:ri,maxSizeBottom:qt,minSize:ot.with(Math.min(_i,ot.width))}}(),ti=[Ot,function(){let _i=Re.left-$e.borderWidth-$e.horizontalPadding,Li=Math.max($e.horizontalPadding,Re.left-qe.width-$e.borderWidth),ri=new U.Ro(_i,Xe.height-Re.top-$e.borderHeight-$e.verticalPadding),qt=ri.with(void 0,Re.top+Re.height-$e.borderHeight-$e.verticalPadding);return{top:Tt,left:Li,fit:_i-qe.width,maxSizeTop:ri,maxSizeBottom:qt,minSize:ot.with(Math.min(_i,ot.width))}}(),function(){let _i=Re.left,Li=-$e.borderWidth+Re.top+Re.height,ri=new U.Ro(Re.width-$e.borderHeight,Xe.height-Re.top-Re.height-$e.verticalPadding);return{top:Li,left:_i,fit:ri.height-qe.height,maxSizeBottom:ri,maxSizeTop:ri,minSize:ot.with(ri.width)}}()],zt=(Pe=ti.find(_i=>_i.fit>=0))!==null&&Pe!==void 0?Pe:ti.sort((_i,Li)=>Li.fit-_i.fit)[0],Jt=Re.top+Re.height-$e.borderHeight,Gt,$t=qe.height,si=Math.max(zt.maxSizeTop.height,zt.maxSizeBottom.height),ai;$t>si&&($t=si),Ue?$t<=zt.maxSizeTop.height?(Gt=!0,ai=zt.maxSizeTop):(Gt=!1,ai=zt.maxSizeBottom):$t<=zt.maxSizeBottom.height?(Gt=!1,ai=zt.maxSizeBottom):(Gt=!0,ai=zt.maxSizeTop),this._applyTopLeft({left:zt.left,top:Gt?zt.top:Jt-$t}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!Gt,zt===Ot,Gt,zt!==Ot),this._resizable.minSize=zt.minSize,this._resizable.maxSize=ai,this._resizable.layout($t,Math.min(ai.width,qe.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(Re){this._topLeft=Re,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var xt,Qt=t(9834),At=t(666),mi=t(6887),Lt=t(6663),ct=t(5935),Kt=t(8801);(function(dt){dt[dt.FILE=0]="FILE",dt[dt.FOLDER=1]="FOLDER",dt[dt.ROOT_FOLDER=2]="ROOT_FOLDER"})(xt||(xt={}));let pi=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function li(dt,Re,qe,Ue){let Pe=Ue===xt.ROOT_FOLDER?["rootfolder-icon"]:Ue===xt.FOLDER?["folder-icon"]:["file-icon"];if(qe){let Xe;if(qe.scheme===Lt.lg.data)Xe=ct.Vb.parseMetaData(qe).get(ct.Vb.META_DATA_LABEL);else{let $e=qe.path.match(pi);$e?(Xe=Wi($e[2].toLowerCase()),$e[1]&&Pe.push(`${Wi($e[1].toLowerCase())}-name-dir-icon`)):Xe=Wi(qe.authority.toLowerCase())}if(Ue===xt.FOLDER)Pe.push(`${Xe}-name-folder-icon`);else{if(Xe){if(Pe.push(`${Xe}-name-file-icon`),Pe.push("name-file-icon"),Xe.length<=255){let ot=Xe.split(".");for(let Tt=1;Tt<ot.length;Tt++)Pe.push(`${ot.slice(Tt).join(".")}-ext-file-icon`)}Pe.push("ext-file-icon")}let $e=function(ot,Tt,Ot){if(!Ot)return null;let ti=null;if(Ot.scheme===Lt.lg.data){let zt=ct.Vb.parseMetaData(Ot).get(ct.Vb.META_DATA_MIME);zt&&(ti=Tt.getLanguageIdByMimeType(zt))}else{let zt=ot.getModel(Ot);zt&&(ti=zt.getLanguageId())}return ti&&ti!==Kt.bd?ti:Tt.guessLanguageIdByFilepathOrFirstLine(Ot)}(dt,Re,qe);$e&&Pe.push(`${Wi($e)}-lang-file-icon`)}}return Pe}function Wi(dt){return dt.replace(/[\11\12\14\15\40]/g,"/")}var Vi,Xi=t(3733),en=t(2042),rn=function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}};function tn(dt){return`suggest-aria-id:${dt}`}let yn=(0,t(9554).q5)("suggest-more-info",We.l.chevronRight,O.NC("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),sn=new((Vi=class ma{extract(Re,qe){if(Re.textLabel.match(ma._regexStrict))return qe[0]=Re.textLabel,!0;if(Re.completion.detail&&Re.completion.detail.match(ma._regexStrict))return qe[0]=Re.completion.detail,!0;if(typeof Re.completion.documentation=="string"){let Ue=ma._regexRelaxed.exec(Re.completion.documentation);if(Ue&&(Ue.index===0||Ue.index+Ue[0].length===Re.completion.documentation.length))return qe[0]=Ue[0],!0}return!1}})._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Vi._regexStrict=new RegExp(`^${Vi._regexRelaxed.source}$`,"i"),Vi),ci=class{constructor(dt,Re,qe,Ue){this._editor=dt,this._modelService=Re,this._languageService=qe,this._themeService=Ue,this._onDidToggleDetails=new A.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(dt){let Re=new v.SL,qe=dt;qe.classList.add("show-file-icons");let Ue=(0,U.R3)(dt,(0,U.$)(".icon")),Pe=(0,U.R3)(Ue,(0,U.$)("span.colorspan")),Xe=(0,U.R3)(dt,(0,U.$)(".contents")),$e=(0,U.R3)(Xe,(0,U.$)(".main")),ot=(0,U.R3)($e,(0,U.$)(".icon-label.codicon")),Tt=(0,U.R3)($e,(0,U.$)("span.left")),Ot=(0,U.R3)($e,(0,U.$)("span.right")),ti=new Qt.g(Tt,{supportHighlights:!0,supportIcons:!0});Re.add(ti);let zt=(0,U.R3)(Tt,(0,U.$)("span.signature-label")),Jt=(0,U.R3)(Tt,(0,U.$)("span.qualifier-label")),Gt=(0,U.R3)(Ot,(0,U.$)("span.details-label")),$t=(0,U.R3)(Ot,(0,U.$)("span.readMore"+Ve.k.asCSSSelector(yn)));$t.title=O.NC("readMore","Read More");let si=()=>{let ai=this._editor.getOptions(),_i=ai.get(48),Li=_i.getMassagedFontFamily(),ri=_i.fontFeatureSettings,qt=ai.get(114)||_i.fontSize,je=ai.get(115)||_i.lineHeight,mt=_i.fontWeight,wt=`${qt}px`,Rt=`${je}px`,oi=`${_i.letterSpacing}px`;qe.style.fontSize=wt,qe.style.fontWeight=mt,qe.style.letterSpacing=oi,$e.style.fontFamily=Li,$e.style.fontFeatureSettings=ri,$e.style.lineHeight=Rt,Ue.style.height=Rt,Ue.style.width=Rt,$t.style.height=Rt,$t.style.width=Rt};return si(),Re.add(this._editor.onDidChangeConfiguration(ai=>{(ai.hasChanged(48)||ai.hasChanged(114)||ai.hasChanged(115))&&si()})),{root:qe,left:Tt,right:Ot,icon:Ue,colorspan:Pe,iconLabel:ti,iconContainer:ot,parametersLabel:zt,qualifierLabel:Jt,detailsLabel:Gt,readMore:$t,disposables:Re}}renderElement(dt,Re,qe){let{completion:Ue}=dt;qe.root.id=tn(Re),qe.colorspan.style.backgroundColor="";let Pe={labelEscapeNewLines:!0,matches:(0,ne.mB)(dt.score)},Xe=[];if(Ue.kind===19&&sn.extract(dt,Xe))qe.icon.className="icon customcolor",qe.iconContainer.className="icon hide",qe.colorspan.style.backgroundColor=Xe[0];else if(Ue.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){qe.icon.className="icon hide",qe.iconContainer.className="icon hide";let $e=li(this._modelService,this._languageService,At.o.from({scheme:"fake",path:dt.textLabel}),xt.FILE),ot=li(this._modelService,this._languageService,At.o.from({scheme:"fake",path:Ue.detail}),xt.FILE);Pe.extraClasses=$e.length>ot.length?$e:ot}else Ue.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(qe.icon.className="icon hide",qe.iconContainer.className="icon hide",Pe.extraClasses=[li(this._modelService,this._languageService,At.o.from({scheme:"fake",path:dt.textLabel}),xt.FOLDER),li(this._modelService,this._languageService,At.o.from({scheme:"fake",path:Ue.detail}),xt.FOLDER)].flat()):(qe.icon.className="icon hide",qe.iconContainer.className="",qe.iconContainer.classList.add("suggest-icon",...Ve.k.asClassNameArray(mi.gX.toIcon(Ue.kind))));Ue.tags&&Ue.tags.indexOf(1)>=0&&(Pe.extraClasses=(Pe.extraClasses||[]).concat(["deprecated"]),Pe.matches=[]),qe.iconLabel.setLabel(dt.textLabel,void 0,Pe),typeof Ue.label=="string"?(qe.parametersLabel.textContent="",qe.detailsLabel.textContent=Xt(Ue.detail||""),qe.root.classList.add("string-label")):(qe.parametersLabel.textContent=Xt(Ue.label.detail||""),qe.detailsLabel.textContent=Xt(Ue.label.description||""),qe.root.classList.remove("string-label")),this._editor.getOption(113).showInlineDetails?(0,U.$Z)(qe.detailsLabel):(0,U.Cp)(qe.detailsLabel),Qe(dt)?(qe.right.classList.add("can-expand-details"),(0,U.$Z)(qe.readMore),qe.readMore.onmousedown=$e=>{$e.stopPropagation(),$e.preventDefault()},qe.readMore.onclick=$e=>{$e.stopPropagation(),$e.preventDefault(),this._onDidToggleDetails.fire()}):(qe.right.classList.remove("can-expand-details"),(0,U.Cp)(qe.readMore),qe.readMore.onmousedown=null,qe.readMore.onclick=null)}disposeTemplate(dt){dt.disposables.dispose()}};function Xt(dt){return dt.replace(/\r\n|\r|\n/g,"")}ci=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([rn(1,Xi.q),rn(2,en.O),rn(3,le.XE)],ci);var kt=t(6253),It=function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}};(0,Le.P6G)("editorSuggestWidget.background",{dark:Le.D0T,light:Le.D0T,hcDark:Le.D0T,hcLight:Le.D0T},O.NC("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,Le.P6G)("editorSuggestWidget.border",{dark:Le.D1_,light:Le.D1_,hcDark:Le.D1_,hcLight:Le.D1_},O.NC("editorSuggestWidgetBorder","Border color of the suggest widget."));let ft=(0,Le.P6G)("editorSuggestWidget.foreground",{dark:Le.NOs,light:Le.NOs,hcDark:Le.NOs,hcLight:Le.NOs},O.NC("editorSuggestWidgetForeground","Foreground color of the suggest widget."));(0,Le.P6G)("editorSuggestWidget.selectedForeground",{dark:Le.NPS,light:Le.NPS,hcDark:Le.NPS,hcLight:Le.NPS},O.NC("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,Le.P6G)("editorSuggestWidget.selectedIconForeground",{dark:Le.cbQ,light:Le.cbQ,hcDark:Le.cbQ,hcLight:Le.cbQ},O.NC("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));let Mt=(0,Le.P6G)("editorSuggestWidget.selectedBackground",{dark:Le.Vqd,light:Le.Vqd,hcDark:Le.Vqd,hcLight:Le.Vqd},O.NC("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));(0,Le.P6G)("editorSuggestWidget.highlightForeground",{dark:Le.Gwp,light:Le.Gwp,hcDark:Le.Gwp,hcLight:Le.Gwp},O.NC("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,Le.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:Le.PX0,light:Le.PX0,hcDark:Le.PX0,hcLight:Le.PX0},O.NC("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,Le.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,Le.ZnX)(ft,.5),light:(0,Le.ZnX)(ft,.5),hcDark:(0,Le.ZnX)(ft,.5),hcLight:(0,Le.ZnX)(ft,.5)},O.NC("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class jt{constructor(Re,qe){this._service=Re,this._key=`suggestWidget.size/${qe.getEditorType()}/${qe instanceof X.H}`}restore(){var Re;let qe=(Re=this._service.get(this._key,0))!==null&&Re!==void 0?Re:"";try{let Ue=JSON.parse(qe);if(U.Ro.is(Ue))return U.Ro.lift(Ue)}catch(Ue){}}store(Re){this._service.store(this._key,JSON.stringify(Re),0,1)}reset(){this._service.remove(this._key,0)}}let di=class hl{constructor(Re,qe,Ue,Pe,Xe){this.editor=Re,this._storageService=qe,this._state=0,this._isAuto=!1,this._pendingLayout=new v.XK,this._pendingShowDetails=new v.XK,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new u._F,this._disposables=new v.SL,this._onDidSelect=new A.K3,this._onDidFocus=new A.K3,this._onDidHide=new A.Q5,this._onDidShow=new A.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new A.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new me,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new fi(this,Re),this._persistedSize=new jt(qe,Re);class $e{constructor(Gt,$t,si=!1,ai=!1){this.persistedSize=Gt,this.currentSize=$t,this.persistHeight=si,this.persistWidth=ai}}let ot;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),ot=new $e(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(Jt=>{var Gt,$t,si,ai;if(this._resize(Jt.dimension.width,Jt.dimension.height),ot&&(ot.persistHeight=ot.persistHeight||!!Jt.north||!!Jt.south,ot.persistWidth=ot.persistWidth||!!Jt.east||!!Jt.west),Jt.done){if(ot){let{itemHeight:_i,defaultSize:Li}=this.getLayoutInfo(),ri=Math.round(_i/2),{width:qt,height:je}=this.element.size;(!ot.persistHeight||Math.abs(ot.currentSize.height-je)<=ri)&&(je=($t=(Gt=ot.persistedSize)===null||Gt===void 0?void 0:Gt.height)!==null&&$t!==void 0?$t:Li.height),(!ot.persistWidth||Math.abs(ot.currentSize.width-qt)<=ri)&&(qt=(ai=(si=ot.persistedSize)===null||si===void 0?void 0:si.width)!==null&&ai!==void 0?ai:Li.width),this._persistedSize.store(new U.Ro(qt,je))}this._contentWidget.unlockPreference(),ot=void 0}})),this._messageElement=U.R3(this.element.domNode,U.$(".message")),this._listElement=U.R3(this.element.domNode,U.$(".tree"));let Tt=Xe.createInstance(bt,this.editor);Tt.onDidClose(this.toggleDetails,this,this._disposables),this._details=new ht(Tt,this.editor);let Ot=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(113).showIcons);Ot();let ti=Xe.createInstance(ci,this.editor);this._disposables.add(ti),this._disposables.add(ti.onDidToggleDetails(()=>this.toggleDetails())),this._list=new ue.aV("SuggestWidget",this._listElement,{getHeight:Jt=>this.getLayoutInfo().itemHeight,getTemplateId:Jt=>"suggestion"},[ti],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>O.NC("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:Jt=>{let Gt=Jt.textLabel;if(typeof Jt.completion.label!="string"){let{detail:_i,description:Li}=Jt.completion.label;_i&&Li?Gt=O.NC("label.full","{0}{1}, {2}",Gt,_i,Li):_i?Gt=O.NC("label.detail","{0}{1}",Gt,_i):Li&&(Gt=O.NC("label.desc","{0}, {1}",Gt,Li))}if(!Jt.isResolved||!this._isDetailsVisible())return Gt;let{documentation:$t,detail:si}=Jt.completion,ai=F.WU("{0}{1}",si||"",$t?typeof $t=="string"?$t:$t.value:"");return O.NC("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",Gt,ai)}}}),this._list.style((0,kt.TU)({listInactiveFocusBackground:Mt,listInactiveFocusOutline:Le.xL1})),this._status=Xe.createInstance(_e,this.element.domNode,C.GI);let zt=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(113).showStatusBar);zt(),this._disposables.add(Pe.onDidColorThemeChange(Jt=>this._onThemeChange(Jt))),this._onThemeChange(Pe.getColorTheme()),this._disposables.add(this._list.onMouseDown(Jt=>this._onListMouseDownOrTap(Jt))),this._disposables.add(this._list.onTap(Jt=>this._onListMouseDownOrTap(Jt))),this._disposables.add(this._list.onDidChangeSelection(Jt=>this._onListSelection(Jt))),this._disposables.add(this._list.onDidChangeFocus(Jt=>this._onListFocus(Jt))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(Jt=>{Jt.hasChanged(113)&&(zt(),Ot())})),this._ctxSuggestWidgetVisible=C._y.Visible.bindTo(Ue),this._ctxSuggestWidgetDetailsVisible=C._y.DetailsVisible.bindTo(Ue),this._ctxSuggestWidgetMultipleSuggestions=C._y.MultipleSuggestions.bindTo(Ue),this._ctxSuggestWidgetHasFocusedSuggestion=C._y.HasFocusedSuggestion.bindTo(Ue),this._disposables.add(U.mu(this._details.widget.domNode,"keydown",Jt=>{this._onDetailsKeydown.fire(Jt)})),this._disposables.add(this.editor.onMouseDown(Jt=>this._onEditorMouseDown(Jt)))}dispose(){var Re;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(Re=this._loadingTimeout)===null||Re===void 0||Re.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(Re){this._details.widget.domNode.contains(Re.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(Re.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(Re){Re.element!==void 0&&Re.index!==void 0&&(Re.browserEvent.preventDefault(),Re.browserEvent.stopPropagation(),this._select(Re.element,Re.index))}_onListSelection(Re){Re.elements.length&&this._select(Re.elements[0],Re.indexes[0])}_select(Re,qe){let Ue=this._completionModel;Ue&&(this._onDidSelect.fire({item:Re,index:qe,model:Ue}),this.editor.focus())}_onThemeChange(Re){this._details.widget.borderWidth=(0,ke.c3)(Re.type)?2:1}_onListFocus(Re){var qe;if(this._ignoreFocusEvents)return;if(!Re.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let Ue=Re.elements[0],Pe=Re.indexes[0];Ue!==this._focusedItem&&((qe=this._currentSuggestionDetails)===null||qe===void 0||qe.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=Ue,this._list.reveal(Pe),this._currentSuggestionDetails=(0,u.PG)(Xe=>{return $e=this,ot=void 0,Ot=function*(){let ti=(0,u.Vg)(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),zt=Xe.onCancellationRequested(()=>ti.dispose()),Jt=yield Ue.resolve(Xe);return ti.dispose(),zt.dispose(),Jt},new((Tt=void 0)||(Tt=Promise))(function(ti,zt){function Jt(si){try{$t(Ot.next(si))}catch(ai){zt(ai)}}function Gt(si){try{$t(Ot.throw(si))}catch(ai){zt(ai)}}function $t(si){var ai;si.done?ti(si.value):(ai=si.value,ai instanceof Tt?ai:new Tt(function(_i){_i(ai)})).then(Jt,Gt)}$t((Ot=Ot.apply($e,ot||[])).next())});var $e,ot,Tt,Ot}),this._currentSuggestionDetails.then(()=>{Pe>=this._list.length||Ue!==this._list.element(Pe)||(this._ignoreFocusEvents=!0,this._list.splice(Pe,1,[Ue]),this._list.setFocus([Pe]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:tn(Pe)}))}).catch(_.dL)),this._onDidFocus.fire({item:Ue,index:Pe,model:this._completionModel})}_setState(Re){if(this._state!==Re)switch(this._state=Re,this.element.domNode.classList.toggle("frozen",Re===4),this.element.domNode.classList.remove("message"),Re){case 0:U.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=hl.LOADING_MESSAGE,U.Cp(this._listElement,this._status.element),U.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=hl.NO_SUGGESTIONS_MESSAGE,U.Cp(this._listElement,this._status.element),U.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:U.Cp(this._messageElement),U.$Z(this._listElement,this._status.element),this._show();break;case 5:U.Cp(this._messageElement),U.$Z(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(Re,qe){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!Re,this._isAuto||(this._loadingTimeout=(0,u.Vg)(()=>this._setState(1),qe)))}showSuggestions(Re,qe,Ue,Pe,Xe){var $e,ot;if(this._contentWidget.setPosition(this.editor.getPosition()),($e=this._loadingTimeout)===null||$e===void 0||$e.dispose(),(ot=this._currentSuggestionDetails)===null||ot===void 0||ot.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==Re&&(this._completionModel=Re),Ue&&this._state!==2&&this._state!==0)return void this._setState(4);let Tt=this._completionModel.items.length,Ot=Tt===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(Tt>1),Ot)return this._setState(Pe?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(Ue?4:3),this._list.reveal(qe,0),this._list.setFocus(Xe?[]:[qe])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=U.lI(()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!Qe(this._list.getFocusedElements()[0])&&!this._explainMode||this._state!==3&&this._state!==5&&this._state!==4||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(Re){this._pendingShowDetails.value=U.lI(()=>{this._pendingShowDetails.clear(),this._details.show(),Re?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var Re;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(Re=this._loadingTimeout)===null||Re===void 0||Re.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let qe=this._persistedSize.restore(),Ue=Math.ceil(4.3*this.getLayoutInfo().itemHeight);qe&&qe.height<Ue&&this._persistedSize.store(qe.with(void 0,Ue))}isFrozen(){return this._state===4}_afterRender(Re){Re!==null?this._state!==2&&this._state!==1&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(Re){var qe,Ue,Pe;if(!this.editor.hasModel()||!this.editor.getDomNode())return;let Xe=U.D6(document.body),$e=this.getLayoutInfo();Re||(Re=$e.defaultSize);let ot=Re.height,Tt=Re.width;if(this._status.element.style.height=`${$e.itemHeight}px`,this._state===2||this._state===1)ot=$e.itemHeight+$e.borderHeight,Tt=$e.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new U.Ro(Tt,ot),this._contentWidget.setPreference(2);else{let Ot=Xe.width-$e.borderHeight-2*$e.horizontalPadding;Tt>Ot&&(Tt=Ot);let ti=this._completionModel?this._completionModel.stats.pLabelLen*$e.typicalHalfwidthCharacterWidth:Tt,zt=$e.statusBarHeight+this._list.contentHeight+$e.borderHeight,Jt=$e.itemHeight+$e.statusBarHeight,Gt=U.i(this.editor.getDomNode()),$t=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),si=Gt.top+$t.top+$t.height,ai=Math.min(Xe.height-si-$e.verticalPadding,zt),_i=Gt.top+$t.top-$e.verticalPadding,Li=Math.min(_i,zt),ri=Math.min(Math.max(Li,ai)+$e.borderHeight,zt);ot===((qe=this._cappedHeight)===null||qe===void 0?void 0:qe.capped)&&(ot=this._cappedHeight.wanted),ot<Jt&&(ot=Jt),ot>ri&&(ot=ri);let qt=150;ot>ai||this._forceRenderingAbove&&_i>qt?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),ri=Li):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),ri=ai),this.element.preferredSize=new U.Ro(ti,$e.defaultSize.height),this.element.maxSize=new U.Ro(Ot,ri),this.element.minSize=new U.Ro(220,Jt),this._cappedHeight=ot===zt?{wanted:(Pe=(Ue=this._cappedHeight)===null||Ue===void 0?void 0:Ue.wanted)!==null&&Pe!==void 0?Pe:Re.height,capped:ot}:void 0}this._resize(Tt,ot)}_resize(Re,qe){let{width:Ue,height:Pe}=this.element.maxSize;Re=Math.min(Ue,Re),qe=Math.min(Pe,qe);let{statusBarHeight:Xe}=this.getLayoutInfo();this._list.layout(qe-Xe,Re),this._listElement.style.height=qe-Xe+"px",this.element.layout(qe,Re),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var Re;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((Re=this._contentWidget.getPosition())===null||Re===void 0?void 0:Re.preference[0])===2)}getLayoutInfo(){let Re=this.editor.getOption(48),qe=(0,ve.uZ)(this.editor.getOption(115)||Re.lineHeight,8,1e3),Ue=this.editor.getOption(113).showStatusBar&&this._state!==2&&this._state!==1?qe:0,Pe=this._details.widget.borderWidth,Xe=2*Pe;return{itemHeight:qe,statusBarHeight:Ue,borderWidth:Pe,borderHeight:Xe,typicalHalfwidthCharacterWidth:Re.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new U.Ro(430,Ue+12*qe+Xe)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(Re){this._storageService.store("expandSuggestionDocs",Re,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};di.LOADING_MESSAGE=O.NC("suggestWidget.loading","Loading..."),di.NO_SUGGESTIONS_MESSAGE=O.NC("suggestWidget.noSuggestions","No suggestions."),di=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([It(1,te.Uy),It(2,D.i6),It(3,le.XE),It(4,N.TG)],di);class fi{constructor(Re,qe){this._widget=Re,this._editor=qe,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){let{height:Re,width:qe}=this._widget.element.size,{borderWidth:Ue,horizontalPadding:Pe}=this._widget.getLayoutInfo();return new U.Ro(qe+2*Ue+Pe,Re+2*Ue)}afterRender(Re){this._widget._afterRender(Re)}setPreference(Re){this._preferenceLocked||(this._preference=Re)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(Re){this._position=Re}}var Si=t(9954),Ri=function(dt,Re){return function(qe,Ue){Re(qe,Ue,dt)}};class Wt{constructor(Re,qe){if(this._model=Re,this._position=qe,Re.getLineMaxColumn(qe.lineNumber)!==qe.column){let Ue=Re.getOffsetAt(qe),Pe=Re.getPositionAt(Ue+1);this._marker=Re.deltaDecorations([],[{range:b.e.fromPositions(qe,Pe),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(Re){if(this._model.isDisposed()||this._position.lineNumber!==Re.lineNumber)return 0;if(this._marker){let qe=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(qe.getStartPosition())-this._model.getOffsetAt(Re)}return this._model.getLineMaxColumn(Re.lineNumber)-Re.column}}let Te=class ud{static get(Re){return Re.getContribution(ud.ID)}constructor(Re,qe,Ue,Pe,Xe,$e,ot){this._memoryService=qe,this._commandService=Ue,this._contextKeyService=Pe,this._instantiationService=Xe,this._logService=$e,this._telemetryService=ot,this._lineSuffix=new v.XK,this._toDispose=new v.SL,this._selectors=new Ze(zt=>zt.priority),this._telemetryGate=0,this.editor=Re,this.model=Xe.createInstance(be,this.editor),this._selectors.register({priority:0,select:(zt,Jt,Gt)=>this._memoryService.select(zt,Jt,Gt)});let Tt=C._y.InsertMode.bindTo(Pe);Tt.set(Re.getOption(113).insertMode),this.model.onDidTrigger(()=>Tt.set(Re.getOption(113).insertMode)),this.widget=this._toDispose.add(new u.Ue(()=>{let zt=this._instantiationService.createInstance(di,this.editor);this._toDispose.add(zt),this._toDispose.add(zt.onDidSelect(ai=>this._insertSuggestion(ai,0),this));let Jt=new j(this.editor,zt,this.model,ai=>this._insertSuggestion(ai,2));this._toDispose.add(Jt);let Gt=C._y.MakesTextEdit.bindTo(this._contextKeyService),$t=C._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),si=C._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,v.OF)(()=>{Gt.reset(),$t.reset(),si.reset()})),this._toDispose.add(zt.onDidFocus(({item:ai})=>{let _i=this.editor.getPosition(),Li=ai.editStart.column,ri=_i.column,qt=!0;this.editor.getOption(1)!=="smart"||this.model.state!==2||ai.completion.additionalTextEdits||4&ai.completion.insertTextRules||ri-Li!==ai.completion.insertText.length||(qt=this.editor.getModel().getValueInRange({startLineNumber:_i.lineNumber,startColumn:Li,endLineNumber:_i.lineNumber,endColumn:ri})!==ai.completion.insertText),Gt.set(qt),$t.set(!c.L.equals(ai.editInsertEnd,ai.editReplaceEnd)),si.set(!!ai.provider.resolveCompletionItem||!!ai.completion.documentation||ai.completion.detail!==ai.completion.label)})),this._toDispose.add(zt.onDetailsKeyDown(ai=>{ai.toKeyCodeChord().equals(new x.$M(!0,!1,!1,!1,33))||f.dz&&ai.toKeyCodeChord().equals(new x.$M(!1,!1,!1,!0,33))?ai.stopPropagation():ai.toKeyCodeChord().isModifierKey()||this.editor.focus()})),zt})),this._overtypingCapturer=this._toDispose.add(new u.Ue(()=>this._toDispose.add(new de(this.editor,this.model)))),this._alternatives=this._toDispose.add(new u.Ue(()=>this._toDispose.add(new W(this.editor,this._contextKeyService)))),this._toDispose.add(Xe.createInstance(L,Re)),this._toDispose.add(this.model.onDidTrigger(zt=>{this.widget.value.showTriggered(zt.auto,zt.shy?250:50),this._lineSuffix.value=new Wt(this.editor.getModel(),zt.position)})),this._toDispose.add(this.model.onDidSuggest(zt=>{var Jt;if(zt.triggerOptions.shy)return;let Gt=-1;for(let si of this._selectors.itemsOrderedByPriorityDesc)if(Gt=si.select(this.editor.getModel(),this.editor.getPosition(),zt.completionModel.items),Gt!==-1)break;Gt===-1&&(Gt=0);let $t=!1;if(zt.triggerOptions.auto){let si=this.editor.getOption(113);si.snippetsPreventQuickSuggestions&&(!((Jt=a.SnippetController2.get(this.editor))===null||Jt===void 0)&&Jt.isInSnippet())?$t=!0:si.selectionMode==="never"||si.selectionMode==="always"?$t=si.selectionMode==="never":si.selectionMode==="whenTriggerCharacter"?$t=zt.triggerOptions.triggerKind!==1:si.selectionMode==="whenQuickSuggestion"&&($t=zt.triggerOptions.triggerKind===1&&!zt.triggerOptions.refilter)}this.widget.value.showSuggestions(zt.completionModel,Gt,zt.isFrozen,zt.triggerOptions.auto,$t)})),this._toDispose.add(this.model.onDidCancel(zt=>{zt.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let Ot=C._y.AcceptSuggestionsOnEnter.bindTo(Pe),ti=()=>{let zt=this.editor.getOption(1);Ot.set(zt==="on"||zt==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>ti())),ti()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(Re,qe){if(!Re||!Re.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;let Ue=a.SnippetController2.get(this.editor);if(!Ue)return;let Pe=this.editor.getModel(),Xe=Pe.getAlternativeVersionId(),{item:$e}=Re,ot=[],Tt=new I.A;1&qe||this.editor.pushUndoStop();let Ot=this.getOverwriteInfo($e,!!(8&qe));if(this._memoryService.memorize(Pe,this.editor.getPosition(),$e),Array.isArray($e.completion.additionalTextEdits)){this.model.cancel();let zt=h.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",$e.completion.additionalTextEdits.map(Jt=>i.h.replaceMove(b.e.lift(Jt.range),Jt.text))),zt.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!$e.isResolved){let zt=new d.G(!0),Jt,Gt=Pe.onDidChangeContent(_i=>{if(_i.isFlush)return Tt.cancel(),void Gt.dispose();for(let Li of _i.changes){let ri=b.e.getEndPosition(Li.range);Jt&&!c.L.isBefore(ri,Jt)||(Jt=ri)}}),$t=qe;qe|=2;let si=!1,ai=this.editor.onWillType(()=>{ai.dispose(),si=!0,2&$t||this.editor.pushUndoStop()});ot.push($e.resolve(Tt.token).then(()=>{if(!$e.completion.additionalTextEdits||Tt.token.isCancellationRequested||Jt&&$e.completion.additionalTextEdits.some(Li=>c.L.isBefore(Jt,b.e.getStartPosition(Li.range))))return!1;si&&this.editor.pushUndoStop();let _i=h.Z.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",$e.completion.additionalTextEdits.map(Li=>i.h.replaceMove(b.e.lift(Li.range),Li.text))),_i.restoreRelativeVerticalPositionOfCursor(this.editor),!si&&2&$t||this.editor.pushUndoStop(),!0}).then(_i=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",zt.elapsed(),_i),Gt.dispose(),ai.dispose()}))}let{insertText:ti}=$e.completion;4&$e.completion.insertTextRules||(ti=w.Yj.escape(ti)),this.model.cancel(),Ue.insert(ti,{overwriteBefore:Ot.overwriteBefore,overwriteAfter:Ot.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&$e.completion.insertTextRules),clipboardText:Re.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&qe||this.editor.pushUndoStop(),$e.completion.command&&($e.completion.command.id===rt.id?this.model.trigger({auto:!0,retrigger:!0}):ot.push(this._commandService.executeCommand($e.completion.command.id,...$e.completion.command.arguments?[...$e.completion.command.arguments]:[]).catch(_.dL))),4&qe&&this._alternatives.value.set(Re,zt=>{for(Tt.cancel();Pe.canUndo();){Xe!==Pe.getAlternativeVersionId()&&Pe.undo(),this._insertSuggestion(zt,3|(8&qe?8:0));break}}),this._alertCompletionItem($e),Promise.all(ot).finally(()=>{this._reportSuggestionAcceptedTelemetry($e,Pe,Re),this.model.clear(),Tt.dispose()})}_reportSuggestionAcceptedTelemetry(Re,qe,Ue){var Pe;if(this._telemetryGate++%100!=0)return;let Xe=Re.extensionId?Re.extensionId.value:((Pe=Ue.item.provider._debugDisplayName)!==null&&Pe!==void 0?Pe:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:Xe,kind:Re.completion.kind,basenameHash:(0,Si.vp)((0,ct.EZ)(qe.uri)).toString(16),languageId:qe.getLanguageId(),fileExtension:(0,ct.DZ)(qe.uri)})}getOverwriteInfo(Re,qe){(0,o.p_)(this.editor.hasModel());let Ue=this.editor.getOption(113).insertMode==="replace";qe&&(Ue=!Ue);let Pe=Re.position.column-Re.editStart.column,Xe=(Ue?Re.editReplaceEnd.column:Re.editInsertEnd.column)-Re.position.column;return{overwriteBefore:Pe+(this.editor.getPosition().column-Re.position.column),overwriteAfter:Xe+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(Re){if((0,B.Of)(Re.completion.additionalTextEdits)){let qe=O.NC("aria.alert.snippet","Accepting '{0}' made {1} additional edits",Re.textLabel,Re.completion.additionalTextEdits.length);(0,m.Z9)(qe)}}triggerSuggest(Re,qe,Ue){this.editor.hasModel()&&(this.model.trigger({auto:qe!=null&&qe,completionOptions:{providerFilter:Re,kindFilter:Ue?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(Re){if(!this.editor.hasModel())return;let qe=this.editor.getPosition(),Ue=()=>{qe.equals(this.editor.getPosition())&&this._commandService.executeCommand(Re.fallback)},Pe=Xe=>{if(4&Xe.completion.insertTextRules||Xe.completion.additionalTextEdits)return!0;let $e=this.editor.getPosition(),ot=Xe.editStart.column,Tt=$e.column;return Tt-ot!==Xe.completion.insertText.length||this.editor.getModel().getValueInRange({startLineNumber:$e.lineNumber,startColumn:ot,endLineNumber:$e.lineNumber,endColumn:Tt})!==Xe.completion.insertText};A.ju.once(this.model.onDidTrigger)(Xe=>{let $e=[];A.ju.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{(0,v.B9)($e),Ue()},void 0,$e),this.model.onDidSuggest(({completionModel:ot})=>{if((0,v.B9)($e),ot.items.length===0)return void Ue();let Tt=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),ot.items),Ot=ot.items[Tt];Pe(Ot)?(this.editor.pushUndoStop(),this._insertSuggestion({index:Tt,item:Ot,model:ot},7)):Ue()},void 0,$e)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(qe,0),this.editor.focus()}acceptSelectedSuggestion(Re,qe){let Ue=this.widget.value.getFocusedItem(),Pe=0;Re&&(Pe|=4),qe&&(Pe|=8),this._insertSuggestion(Ue,Pe)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(Re){return this._selectors.register(Re)}};Te.ID="editor.contrib.suggestController",Te=function(dt,Re,qe,Ue){var Pe,Xe=arguments.length,$e=Xe<3?Re:Ue===null?Ue=Object.getOwnPropertyDescriptor(Re,qe):Ue;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(dt,Re,qe,Ue);else for(var ot=dt.length-1;ot>=0;ot--)(Pe=dt[ot])&&($e=(Xe<3?Pe($e):Xe>3?Pe(Re,qe,$e):Pe(Re,qe))||$e);return Xe>3&&$e&&Object.defineProperty(Re,qe,$e),$e}([Ri(1,E.Fh),Ri(2,$.H),Ri(3,D.i6),Ri(4,N.TG),Ri(5,T.VZ),Ri(6,q.b)],Te);class Ze{constructor(Re){this.prioritySelector=Re,this._items=new Array}register(Re){if(this._items.indexOf(Re)!==-1)throw new Error("Value is already registered");return this._items.push(Re),this._items.sort((qe,Ue)=>this.prioritySelector(Ue)-this.prioritySelector(qe)),{dispose:()=>{let qe=this._items.indexOf(Re);qe>=0&&this._items.splice(qe,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class rt extends r.R6{constructor(){super({id:rt.id,label:O.NC("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:D.Ao.and(l.u.writable,l.u.hasCompletionItemProvider,C._y.Visible.toNegated()),kbOpts:{kbExpr:l.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(Re,qe,Ue){let Pe=Te.get(qe);if(!Pe)return;let Xe;Ue&&typeof Ue=="object"&&Ue.auto===!0&&(Xe=!0),Pe.triggerSuggest(void 0,Xe,void 0)}}rt.id="editor.action.triggerSuggest",(0,r._K)(Te.ID,Te,2),(0,r.Qr)(rt);let yt=190,Nt=r._l.bindToContribution(Te.get);(0,r.fK)(new Nt({id:"acceptSelectedSuggestion",precondition:D.Ao.and(C._y.Visible,C._y.HasFocusedSuggestion),handler(dt){dt.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:D.Ao.and(C._y.Visible,l.u.textInputFocus),weight:yt},{primary:3,kbExpr:D.Ao.and(C._y.Visible,l.u.textInputFocus,C._y.AcceptSuggestionsOnEnter,C._y.MakesTextEdit),weight:yt}],menuOpts:[{menuId:C.GI,title:O.NC("accept.insert","Insert"),group:"left",order:1,when:C._y.HasInsertAndReplaceRange.toNegated()},{menuId:C.GI,title:O.NC("accept.insert","Insert"),group:"left",order:1,when:D.Ao.and(C._y.HasInsertAndReplaceRange,C._y.InsertMode.isEqualTo("insert"))},{menuId:C.GI,title:O.NC("accept.replace","Replace"),group:"left",order:1,when:D.Ao.and(C._y.HasInsertAndReplaceRange,C._y.InsertMode.isEqualTo("replace"))}]})),(0,r.fK)(new Nt({id:"acceptAlternativeSelectedSuggestion",precondition:D.Ao.and(C._y.Visible,l.u.textInputFocus,C._y.HasFocusedSuggestion),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:1027,secondary:[1026]},handler(dt){dt.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:C.GI,group:"left",order:2,when:D.Ao.and(C._y.HasInsertAndReplaceRange,C._y.InsertMode.isEqualTo("insert")),title:O.NC("accept.replace","Replace")},{menuId:C.GI,group:"left",order:2,when:D.Ao.and(C._y.HasInsertAndReplaceRange,C._y.InsertMode.isEqualTo("replace")),title:O.NC("accept.insert","Insert")}]})),$.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,r.fK)(new Nt({id:"hideSuggestWidget",precondition:C._y.Visible,handler:dt=>dt.cancelSuggestWidget(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:9,secondary:[1033]}})),(0,r.fK)(new Nt({id:"selectNextSuggestion",precondition:D.Ao.and(C._y.Visible,D.Ao.or(C._y.MultipleSuggestions,C._y.HasFocusedSuggestion.negate())),handler:dt=>dt.selectNextSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,r.fK)(new Nt({id:"selectNextPageSuggestion",precondition:D.Ao.and(C._y.Visible,D.Ao.or(C._y.MultipleSuggestions,C._y.HasFocusedSuggestion.negate())),handler:dt=>dt.selectNextPageSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:12,secondary:[2060]}})),(0,r.fK)(new Nt({id:"selectLastSuggestion",precondition:D.Ao.and(C._y.Visible,D.Ao.or(C._y.MultipleSuggestions,C._y.HasFocusedSuggestion.negate())),handler:dt=>dt.selectLastSuggestion()})),(0,r.fK)(new Nt({id:"selectPrevSuggestion",precondition:D.Ao.and(C._y.Visible,D.Ao.or(C._y.MultipleSuggestions,C._y.HasFocusedSuggestion.negate())),handler:dt=>dt.selectPrevSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,r.fK)(new Nt({id:"selectPrevPageSuggestion",precondition:D.Ao.and(C._y.Visible,D.Ao.or(C._y.MultipleSuggestions,C._y.HasFocusedSuggestion.negate())),handler:dt=>dt.selectPrevPageSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:11,secondary:[2059]}})),(0,r.fK)(new Nt({id:"selectFirstSuggestion",precondition:D.Ao.and(C._y.Visible,D.Ao.or(C._y.MultipleSuggestions,C._y.HasFocusedSuggestion.negate())),handler:dt=>dt.selectFirstSuggestion()})),(0,r.fK)(new Nt({id:"focusSuggestion",precondition:D.Ao.and(C._y.Visible,C._y.HasFocusedSuggestion.negate()),handler:dt=>dt.focusSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,r.fK)(new Nt({id:"focusAndAcceptSuggestion",precondition:D.Ao.and(C._y.Visible,C._y.HasFocusedSuggestion.negate()),handler:dt=>{dt.focusSuggestion(),dt.acceptSelectedSuggestion(!0,!1)}})),(0,r.fK)(new Nt({id:"toggleSuggestionDetails",precondition:D.Ao.and(C._y.Visible,C._y.HasFocusedSuggestion),handler:dt=>dt.toggleSuggestionDetails(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:C.GI,group:"right",order:1,when:D.Ao.and(C._y.DetailsVisible,C._y.CanResolve),title:O.NC("detail.more","show less")},{menuId:C.GI,group:"right",order:1,when:D.Ao.and(C._y.DetailsVisible.toNegated(),C._y.CanResolve),title:O.NC("detail.less","show more")}]})),(0,r.fK)(new Nt({id:"toggleExplainMode",precondition:C._y.Visible,handler:dt=>dt.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),(0,r.fK)(new Nt({id:"toggleSuggestionFocus",precondition:C._y.Visible,handler:dt=>dt.toggleSuggestionFocus(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,r.fK)(new Nt({id:"insertBestCompletion",precondition:D.Ao.and(l.u.textInputFocus,D.Ao.equals("config.editor.tabCompletion","on"),L.AtEnd,C._y.Visible.toNegated(),W.OtherSuggestions.toNegated(),a.SnippetController2.InSnippetMode.toNegated()),handler:(dt,Re)=>{dt.triggerSuggestAndAcceptBest((0,o.Kn)(Re)?Object.assign({fallback:"tab"},Re):{fallback:"tab"})},kbOpts:{weight:yt,primary:2}})),(0,r.fK)(new Nt({id:"insertNextSuggestion",precondition:D.Ao.and(l.u.textInputFocus,D.Ao.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,C._y.Visible.toNegated(),a.SnippetController2.InSnippetMode.toNegated()),handler:dt=>dt.acceptNextSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:2}})),(0,r.fK)(new Nt({id:"insertPrevSuggestion",precondition:D.Ao.and(l.u.textInputFocus,D.Ao.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,C._y.Visible.toNegated(),a.SnippetController2.InSnippetMode.toNegated()),handler:dt=>dt.acceptPrevSuggestion(),kbOpts:{weight:yt,kbExpr:l.u.textInputFocus,primary:1026}})),(0,r.Qr)(class extends r.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:O.NC("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(dt,Re){var qe;(qe=Te.get(Re))===null||qe===void 0||qe.resetWidgetSize()}})},8088:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{SuggestInlineCompletions:()=>w});var m=t(1050),B=t(5392),u=t(3725),I=t(5976),_=t(6830),A=t(1640),x=t(4314),v=t(1922),f=t(4961),d=t(5621),o=t(378),h=t(4477),r=t(4972),i=t(2065),c=function(D,L,k,R){var O,$=arguments.length,N=$<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,k):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(D,L,k,R);else for(var T=D.length-1;T>=0;T--)(O=D[T])&&(N=($<3?O(N):$>3?O(L,k,N):O(L,k))||N);return $>3&&N&&Object.defineProperty(L,k,N),N},b=function(D,L){return function(k,R){L(k,R,D)}};class l{constructor(L,k,R,O,$,N){this.range=L,this.insertText=k,this.filterText=R,this.additionalTextEdits=O,this.command=$,this.completion=N}}let a=class extends I.L6{constructor(D,L,k,R,O,$){super(O.disposable),this.model=D,this.line=L,this.word=k,this.completionModel=R,this._suggestMemoryService=$}canBeReused(D,L,k){return this.model===D&&this.line===L&&this.word.word.length>0&&this.word.startColumn===k.startColumn&&this.word.endColumn<k.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var D;let L=[],{items:k}=this.completionModel,R=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},k),O=u.$.slice(k,R),$=u.$.slice(k,0,R),N=5;for(let T of u.$.concat(O,$)){if(T.score===B.CL.Default)continue;let C=new x.e(T.editStart.lineNumber,T.editStart.column,T.editInsertEnd.lineNumber,T.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),W=T.completion.insertTextRules&&4&T.completion.insertTextRules?{snippet:T.completion.insertText}:T.completion.insertText;L.push(new l(C,W,(D=T.filterTextLow)!==null&&D!==void 0?D:T.labelLow,T.completion.additionalTextEdits,T.completion.command,T)),N-->=0&&T.resolve(m.T.None)}return L}};a=c([b(5,o.Fh)],a);let w=class{constructor(D,L,k,R){this._getEditorOption=D,this._languageFeatureService=L,this._clipboardService=k,this._suggestMemoryService=R}provideInlineCompletions(D,L,k,R){var O,$,N,T,C;return $=this,N=void 0,C=function*(){if(k.selectedSuggestionInfo)return;let W=this._getEditorOption(85,D);if(d.tG.isAllOff(W))return;D.tokenization.tokenizeIfCheap(L.lineNumber);let K=D.tokenization.getLineTokens(L.lineNumber),j=K.getStandardTokenType(K.findTokenIndexAtOffset(Math.max(L.column-1-1,0)));if(d.tG.valueFor(W,j)!=="inline")return;let F,H,z=D.getWordAtPosition(L);if(z!=null&&z.word||(F=this._getTriggerCharacterInfo(D,L)),!(z!=null&&z.word)&&!F||(z||(z=D.getWordUntilPosition(L)),z.endColumn!==L.column))return;let J=D.getValueInRange(new x.e(L.lineNumber,1,L.lineNumber,L.column));if(!F&&(!((O=this._lastResult)===null||O===void 0)&&O.canBeReused(D,L.lineNumber,z))){let oe=new f.t(J,L.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=oe,this._lastResult.acquire(),H=this._lastResult}else{let oe=yield(0,d.kL)(this._languageFeatureService.completionProvider,D,L,new d.A9(void 0,void 0,F==null?void 0:F.providers),F&&{triggerKind:1,triggerCharacter:F.ch},R),fe;oe.needsClipboard&&(fe=yield this._clipboardService.readText());let q=new f._(oe.items,L.column,new f.t(J,0),h.K.None,this._getEditorOption(113,D),this._getEditorOption(107,D),{boostFullMatch:!1,firstMatchCanBeWeak:!1},fe);H=new a(D,L.lineNumber,z,q,oe,this._suggestMemoryService)}return this._lastResult=H,H},new((T=void 0)||(T=Promise))(function(W,K){function j(z){try{H(C.next(z))}catch(J){K(J)}}function F(z){try{H(C.throw(z))}catch(J){K(J)}}function H(z){var J;z.done?W(z.value):(J=z.value,J instanceof T?J:new T(function(oe){oe(J)})).then(j,F)}H((C=C.apply($,N||[])).next())})}handleItemDidShow(D,L){L.completion.resolve(m.T.None)}freeInlineCompletions(D){D.release()}_getTriggerCharacterInfo(D,L){var k;let R=D.getValueInRange(x.e.fromPositions({lineNumber:L.lineNumber,column:L.column-1},L)),O=new Set;for(let $ of this._languageFeatureService.completionProvider.all(D))!((k=$.triggerCharacters)===null||k===void 0)&&k.includes(R)&&O.add($);if(O.size!==0)return{providers:O,ch:R}}};w=c([b(1,v.p),b(2,r.p),b(3,o.Fh)],w);let E=class Xs{constructor(L,k,R,O){if(++Xs._counter==1){let $=O.createInstance(w,(N,T)=>{var C;return((C=R.listCodeEditors().find(W=>W.getModel()===T))!==null&&C!==void 0?C:L).getOption(N)});Xs._disposable=k.inlineCompletionsProvider.register("*",$)}}dispose(){var L;--Xs._counter==0&&((L=Xs._disposable)===null||L===void 0||L.dispose(),Xs._disposable=void 0)}};E._counter=0,E=c([b(1,v.p),b(2,A.$),b(3,i.TG)],E),(0,_._K)("suggest.inlineCompletionsProvider",E,0)},378:(ut,Ie,t)=>{"use strict";t.d(Ie,{Fh:()=>i});var m=t(5393),B=t(5976),u=t(3702),I=t(4767),_=t(6887),A=t(3108),x=t(5026),v=t(2065),f=t(6904),d=function(c,b){return function(l,a){b(l,a,c)}};class o{constructor(b){this.name=b}select(b,l,a){if(a.length===0)return 0;let w=a[0].score[0];for(let E=0;E<a.length;E++){let{score:D,completion:L}=a[E];if(D[0]!==w)break;if(L.preselect)return E}return 0}}class h extends o{constructor(){super("first")}memorize(b,l,a){}toJSON(){}fromJSON(){}}let r=class fa{constructor(b,l){this._storageService=b,this._configService=l,this._disposables=new B.SL,this._persistSoon=new m.pY(()=>this._saveState(),500),this._disposables.add(b.onWillSaveState(a=>{a.reason===f.fk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(b,l,a){this._withStrategy(b,l).memorize(b,l,a),this._persistSoon.schedule()}select(b,l,a){return this._withStrategy(b,l).select(b,l,a)}_withStrategy(b,l){var a;let w=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:b.getLanguageIdAtPosition(l.lineNumber,l.column),resource:b.uri});if(((a=this._strategy)===null||a===void 0?void 0:a.name)!==w){this._saveState();let E=fa._strategyCtors.get(w)||h;this._strategy=new E;try{let D=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,L=this._storageService.get(`${fa._storagePrefix}/${w}`,D);L&&this._strategy.fromJSON(JSON.parse(L))}catch(D){}}return this._strategy}_saveState(){if(this._strategy){let b=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=JSON.stringify(this._strategy);this._storageService.store(`${fa._storagePrefix}/${this._strategy.name}`,l,b,1)}}};r._strategyCtors=new Map([["recentlyUsedByPrefix",class extends o{constructor(){super("recentlyUsedByPrefix"),this._trie=I.Id.forStrings(),this._seq=0}memorize(c,b,l){let{word:a}=c.getWordUntilPosition(b),w=`${c.getLanguageId()}/${a}`;this._trie.set(w,{type:l.completion.kind,insertText:l.completion.insertText,touch:this._seq++})}select(c,b,l){let{word:a}=c.getWordUntilPosition(b);if(!a)return super.select(c,b,l);let w=`${c.getLanguageId()}/${a}`,E=this._trie.get(w);if(E||(E=this._trie.findSubstr(w)),E)for(let D=0;D<l.length;D++){let{kind:L,insertText:k}=l[D].completion;if(L===E.type&&k===E.insertText)return D}return super.select(c,b,l)}toJSON(){let c=[];return this._trie.forEach((b,l)=>c.push([l,b])),c.sort((b,l)=>-(b[1].touch-l[1].touch)).forEach((b,l)=>b[1].touch=l),c.slice(0,200)}fromJSON(c){if(this._trie.clear(),c.length>0){this._seq=c[0][1].touch+1;for(let[b,l]of c)l.type=typeof l.type=="number"?l.type:_.gX.fromString(l.type),this._trie.set(b,l)}}}],["recentlyUsed",class extends o{constructor(){super("recentlyUsed"),this._cache=new u.z6(300,.66),this._seq=0}memorize(c,b,l){let a=`${c.getLanguageId()}/${l.textLabel}`;this._cache.set(a,{touch:this._seq++,type:l.completion.kind,insertText:l.completion.insertText})}select(c,b,l){if(l.length===0)return 0;let a=c.getLineContent(b.lineNumber).substr(b.column-10,b.column-1);if(/\s$/.test(a))return super.select(c,b,l);let w=l[0].score[0],E=-1,D=-1;for(let L=0;L<l.length&&l[L].score[0]===w;L++){let k=`${c.getLanguageId()}/${l[L].textLabel}`,R=this._cache.peek(k);if(R&&R.touch>D&&R.type===l[L].completion.kind&&R.insertText===l[L].completion.insertText&&(D=R.touch,E=L),l[L].completion.preselect)return L}return E!==-1?E:0}toJSON(){return this._cache.toJSON()}fromJSON(c){this._cache.clear();for(let[b,l]of c)l.touch=0,l.type=typeof l.type=="number"?l.type:_.gX.fromString(l.type),this._cache.set(b,l);this._seq=this._cache.size}}],["first",h]]),r._storagePrefix="suggest/memories",r=function(c,b,l,a){var w,E=arguments.length,D=E<3?b:a===null?a=Object.getOwnPropertyDescriptor(b,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,b,l,a);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(D=(E<3?w(D):E>3?w(b,l,D):w(b,l))||D);return E>3&&D&&Object.defineProperty(b,l,D),D}([d(0,f.Uy),d(1,A.Ui)],r);let i=(0,v.yh)("ISuggestMemories");(0,x.z)(i,r,1)},4477:(ut,Ie,t)=>{"use strict";t.d(Ie,{K:()=>I});var m=t(9488),B=t(4314),u=t(9694);class I{static create(A,x){return v=this,f=void 0,o=function*(){if(!x.getOption(113).localityBonus||!x.hasModel())return I.None;let h=x.getModel(),r=x.getPosition();if(!A.canComputeWordRanges(h.uri))return I.None;let[i]=yield new u.x().provideSelectionRanges(h,[r]);if(i.length===0)return I.None;let c=yield A.computeWordRanges(h.uri,i[0].range);if(!c)return I.None;let b=h.getWordUntilPosition(r);return delete c[b.word],new class extends I{distance(l,a){if(!r.equals(x.getPosition()))return 0;if(a.kind===17)return 2097152;let w=typeof a.label=="string"?a.label:a.label.label,E=c[w];if((0,m.XY)(E))return 2097152;let D=(0,m.ry)(E,B.e.fromPositions(l),B.e.compareRangesUsingStarts),L=D>=0?E[D]:E[Math.max(0,~D-1)],k=i.length;for(let R of i){if(!B.e.containsRange(R.range,L))break;k-=1}return k}}},new((d=void 0)||(d=Promise))(function(h,r){function i(l){try{b(o.next(l))}catch(a){r(a)}}function c(l){try{b(o.throw(l))}catch(a){r(a)}}function b(l){var a;l.done?h(l.value):(a=l.value,a instanceof d?a:new d(function(w){w(a)})).then(i,c)}b((o=o.apply(v,f||[])).next())});var v,f,d,o}}I.None=new class extends I{distance(){return 0}}},1713:(ut,Ie,t)=>{"use strict";var m=t(3580),B=t(3910);(0,B.P6G)("symbolIcon.arrayForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.booleanForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,m.NC)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.colorForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.constantForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,m.NC)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,m.NC)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,m.NC)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,m.NC)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,m.NC)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.fileForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.folderForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,m.NC)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,m.NC)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.keyForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.keywordForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,m.NC)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.moduleForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.namespaceForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.nullForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.numberForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.objectForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.operatorForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.packageForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.propertyForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.referenceForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.snippetForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.stringForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.structForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.textForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.typeParameterForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.unitForeground",{dark:B.dRz,light:B.dRz,hcDark:B.dRz,hcLight:B.dRz},(0,m.NC)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,B.P6G)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,m.NC)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."))},4662:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{ToggleTabFocusModeAction:()=>A});var m=t(5152),B=t(7940),u=t(3580),I=t(4144),_=t(3983);class A extends I.Ke{constructor(){super({id:A.ID,title:{value:u.NC({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),original:"Toggle Tab Key Moves Focus"},precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(v){let f=v.get(_.i6).getContextKeyValue("focusedView")==="terminal"?"terminalFocus":"editorFocus",d=!B.n.getTabFocusMode(f);B.n.setTabFocusMode(d,f),d?(0,m.Z9)(u.NC("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,m.Z9)(u.NC("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}A.ID="editor.action.toggleTabFocusMode",(0,I.r1)(A)},2614:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(4013),B=t(6830),u=t(3580);class I extends B.R6{constructor(){super({id:"editor.action.forceRetokenize",label:u.NC("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(A,x){if(!x.hasModel())return;let v=x.getModel();v.tokenization.resetTokenization();let f=new m.G(!0);v.tokenization.forceTokenization(v.getLineCount()),f.stop(),console.log(`tokenization took ${f.elapsed()}`)}}(0,B.Qr)(I)},2954:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{DisableHighlightingInCommentsAction:()=>X,DisableHighlightingInStringsAction:()=>ye,DisableHighlightingOfAmbiguousCharactersAction:()=>Ce,DisableHighlightingOfInvisibleCharactersAction:()=>Ee,DisableHighlightingOfNonBasicAsciiCharactersAction:()=>Ae,ShowExcludeOptions:()=>Fe,UnicodeHighlighter:()=>ie,UnicodeHighlighterHoverParticipant:()=>be,warningIcon:()=>ne});var m=t(5393),B=t(3046),u=t(9365),I=t(5976),_=t(1432),A=t(7295),x=t(6830),v=t(4141),f=t(3654),d=t(1446),o=t(4319),h=t(2042),r=t(168),i=t(6520),c=t(2374),b=t(5321),l=t(317),a=t(4741),w=t(5241),E=t(2065),D=t(4850),L=t(9069),k=t(553),R=t(4669),O=t(988);let $=class extends I.JT{get enabled(){return this._enabled}set enabled(te){te?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=te}constructor(te,Le,ke={},le){var ee;super(),this._link=Le,this._enabled=!0,this.el=(0,b.R3)(te,(0,b.$)("a.monaco-link",{tabIndex:(ee=Le.tabIndex)!==null&&ee!==void 0?ee:0,href:Le.href,title:Le.title},Le.label)),this.el.setAttribute("role","button");let me=this._register(new D.Y(this.el,"click")),xe=this._register(new D.Y(this.el,"keypress")),We=R.ju.chain(xe.event).map(tt=>new L.y(tt)).filter(tt=>tt.keyCode===3).event,Ve=this._register(new D.Y(this.el,k.t.Tap)).event;this._register(k.o.addTarget(this.el));let Ye=R.ju.any(me.event,We,Ve);this._register(Ye(tt=>{this.enabled&&(b.zB.stop(tt,!0),ke!=null&&ke.opener?ke.opener(this._link.href):le.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}};var N,T;$=function(te,Le,ke,le){var ee,me=arguments.length,xe=me<3?Le:le===null?le=Object.getOwnPropertyDescriptor(Le,ke):le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xe=Reflect.decorate(te,Le,ke,le);else for(var We=te.length-1;We>=0;We--)(ee=te[We])&&(xe=(me<3?ee(xe):me>3?ee(Le,ke,xe):ee(Le,ke))||xe);return me>3&&xe&&Object.defineProperty(Le,ke,xe),xe}([(N=3,T=O.v4,function(te,Le){T(te,Le,N)})],$);var C=t(9554),W=t(5670),K=function(te,Le,ke,le){var ee,me=arguments.length,xe=me<3?Le:le===null?le=Object.getOwnPropertyDescriptor(Le,ke):le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xe=Reflect.decorate(te,Le,ke,le);else for(var We=te.length-1;We>=0;We--)(ee=te[We])&&(xe=(me<3?ee(xe):me>3?ee(Le,ke,xe):ee(Le,ke))||xe);return me>3&&xe&&Object.defineProperty(Le,ke,xe),xe},j=function(te,Le){return function(ke,le){Le(ke,le,te)}};let F=class extends I.JT{constructor(te,Le){super(),this._editor=te,this.instantiationService=Le,this.banner=this._register(this.instantiationService.createInstance(H))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(te){this.banner.show(Object.assign(Object.assign({},te),{onClose:()=>{var Le;this.hide(),(Le=te.onClose)===null||Le===void 0||Le.call(te)}})),this._editor.setBanner(this.banner.element,26)}};F=K([j(1,E.TG)],F);let H=class extends I.JT{constructor(te){super(),this.instantiationService=te,this.markdownRenderer=this.instantiationService.createInstance(w.$,{}),this.element=(0,b.$)("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(te){return te.ariaLabel?te.ariaLabel:typeof te.message=="string"?te.message:void 0}getBannerMessage(te){if(typeof te=="string"){let Le=(0,b.$)("span");return Le.innerText=te,Le}return this.markdownRenderer.render(te).element}clear(){(0,b.PO)(this.element)}show(te){(0,b.PO)(this.element);let Le=this.getAriaLabel(te);Le&&this.element.setAttribute("aria-label",Le);let ke=(0,b.R3)(this.element,(0,b.$)("div.icon-container"));ke.setAttribute("aria-hidden","true"),te.icon&&ke.appendChild((0,b.$)(`div${W.k.asCSSSelector(te.icon)}`));let le=(0,b.R3)(this.element,(0,b.$)("div.message-container"));if(le.setAttribute("aria-hidden","true"),le.appendChild(this.getBannerMessage(te.message)),this.messageActionsContainer=(0,b.R3)(this.element,(0,b.$)("div.message-actions-container")),te.actions)for(let me of te.actions)this._register(this.instantiationService.createInstance($,this.messageActionsContainer,Object.assign(Object.assign({},me),{tabIndex:-1}),{}));let ee=(0,b.R3)(this.element,(0,b.$)("div.action-container"));this.actionBar=this._register(new l.o(ee)),this.actionBar.push(this._register(new a.aU("banner.close","Close Banner",W.k.asClassName(C.s_),!0,()=>{typeof te.onClose=="function"&&te.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};H=K([j(0,E.TG)],H);var z=t(3580),J=t(3108),oe=t(1157),fe=t(3425),q=function(te,Le,ke,le){var ee,me=arguments.length,xe=me<3?Le:le===null?le=Object.getOwnPropertyDescriptor(Le,ke):le;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xe=Reflect.decorate(te,Le,ke,le);else for(var We=te.length-1;We>=0;We--)(ee=te[We])&&(xe=(me<3?ee(xe):me>3?ee(Le,ke,xe):ee(Le,ke))||xe);return me>3&&xe&&Object.defineProperty(Le,ke,xe),xe},p=function(te,Le){return function(ke,le){Le(ke,le,te)}},re=function(te,Le,ke,le){return new(ke||(ke=Promise))(function(ee,me){function xe(Ye){try{Ve(le.next(Ye))}catch(tt){me(tt)}}function We(Ye){try{Ve(le.throw(Ye))}catch(tt){me(tt)}}function Ve(Ye){var tt;Ye.done?ee(Ye.value):(tt=Ye.value,tt instanceof ke?tt:new ke(function(Qe){Qe(tt)})).then(xe,We)}Ve((le=le.apply(te,Le||[])).next())})};let ne=(0,C.q5)("extensions-warning-message",B.l.warning,z.NC("warningIcon","Icon shown with a warning message in the extensions editor.")),ie=class extends I.JT{constructor(te,Le,ke,le){super(),this._editor=te,this._editorWorkerService=Le,this._workspaceTrustService=ke,this._highlighter=null,this._bannerClosed=!1,this._updateState=ee=>{if(ee&&ee.hasMore){if(this._bannerClosed)return;let me=Math.max(ee.ambiguousCharacterCount,ee.nonBasicAsciiCharacterCount,ee.invisibleCharacterCount),xe;if(ee.nonBasicAsciiCharacterCount>=me)xe={message:z.NC("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new Ae};else if(ee.ambiguousCharacterCount>=me)xe={message:z.NC("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new Ce};else{if(!(ee.invisibleCharacterCount>=me))throw new Error("Unreachable");xe={message:z.NC("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new Ee}}this._bannerController.show({id:"unicodeHighlightBanner",message:xe.message,icon:ne,actions:[{label:xe.command.shortLabel,href:`command:${xe.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(le.createInstance(F,te)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=te.getOption(120),this._register(ke.onDidChangeTrust(ee=>{this._updateHighlighter()})),this._register(te.onDidChangeConfiguration(ee=>{ee.hasChanged(120)&&(this._options=te.getOption(120),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;let te=function(ke,le){return{nonBasicASCII:le.nonBasicASCII===v.Av?!ke:le.nonBasicASCII,ambiguousCharacters:le.ambiguousCharacters,invisibleCharacters:le.invisibleCharacters,includeComments:le.includeComments===v.Av?!ke:le.includeComments,includeStrings:le.includeStrings===v.Av?!ke:le.includeStrings,allowedCharacters:le.allowedCharacters,allowedLocales:le.allowedLocales}}(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([te.nonBasicASCII,te.ambiguousCharacters,te.invisibleCharacters].every(ke=>ke===!1))return;let Le={nonBasicASCII:te.nonBasicASCII,ambiguousCharacters:te.ambiguousCharacters,invisibleCharacters:te.invisibleCharacters,includeComments:te.includeComments,includeStrings:te.includeStrings,allowedCodePoints:Object.keys(te.allowedCharacters).map(ke=>ke.codePointAt(0)),allowedLocales:Object.keys(te.allowedLocales).map(ke=>ke==="_os"?new Intl.NumberFormat().resolvedOptions().locale:ke==="_vscode"?_.dK:ke)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new se(this._editor,Le,this._updateState,this._editorWorkerService):this._highlighter=new ce(this._editor,Le,this._updateState)}getDecorationInfo(te){return this._highlighter?this._highlighter.getDecorationInfo(te):null}};ie.ID="editor.contrib.unicodeHighlighter",ie=q([p(1,o.p),p(2,fe.Y),p(3,E.TG)],ie);let se=class extends I.JT{constructor(te,Le,ke,le){super(),this._editor=te,this._options=Le,this._updateState=ke,this._editorWorkerService=le,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new m.pY(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void this._decorations.clear();let te=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(Le=>{if(this._model.isDisposed()||this._model.getVersionId()!==te)return;this._updateState(Le);let ke=[];if(!Le.hasMore)for(let le of Le.ranges)ke.push({range:le,options:ve.instance.getDecorationFromOptions(this._options)});this._decorations.set(ke)})}getDecorationInfo(te){if(!this._decorations.has(te))return null;let Le=this._editor.getModel();return(0,r.Fd)(Le,te)?{reason:ue(Le.getValueInRange(te.range),this._options),inComment:(0,r.$t)(Le,te),inString:(0,r.zg)(Le,te)}:null}};se=q([p(3,o.p)],se);class ce extends I.JT{constructor(Le,ke,le){super(),this._editor=Le,this._options=ke,this._updateState=le,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new m.pY(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void this._decorations.clear();let Le=this._editor.getVisibleRanges(),ke=[],le={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(let ee of Le){let me=d.a.computeUnicodeHighlights(this._model,this._options,ee);for(let xe of me.ranges)le.ranges.push(xe);le.ambiguousCharacterCount+=le.ambiguousCharacterCount,le.invisibleCharacterCount+=le.invisibleCharacterCount,le.nonBasicAsciiCharacterCount+=le.nonBasicAsciiCharacterCount,le.hasMore=le.hasMore||me.hasMore}if(!le.hasMore)for(let ee of le.ranges)ke.push({range:ee,options:ve.instance.getDecorationFromOptions(this._options)});this._updateState(le),this._decorations.set(ke)}getDecorationInfo(Le){if(!this._decorations.has(Le))return null;let ke=this._editor.getModel(),le=ke.getValueInRange(Le.range);return(0,r.Fd)(ke,Le)?{reason:ue(le,this._options),inComment:(0,r.$t)(ke,Le),inString:(0,r.zg)(ke,Le)}:null}}let be=class{constructor(te,Le,ke){this._editor=te,this._languageService=Le,this._openerService=ke,this.hoverOrdinal=5}computeSync(te,Le){if(!this._editor.hasModel()||te.type!==1)return[];let ke=this._editor.getModel(),le=this._editor.getContribution(ie.ID);if(!le)return[];let ee=[],me=300;for(let xe of Le){let We=le.getDecorationInfo(xe);if(!We)continue;let Ve=ke.getValueInRange(xe.range).codePointAt(0),Ye=U(Ve),tt;switch(We.reason.kind){case 0:tt=(0,A.$i)(We.reason.confusableWith)?z.NC("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",Ye,U(We.reason.confusableWith.codePointAt(0))):z.NC("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",Ye,U(We.reason.confusableWith.codePointAt(0)));break;case 1:tt=z.NC("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",Ye);break;case 2:tt=z.NC("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",Ye)}let Qe={codePoint:Ve,reason:We.reason,inComment:We.inComment,inString:We.inString},bt=z.NC("unicodeHighlight.adjustSettings","Adjust settings"),ht=`command:${Fe.ID}?${encodeURIComponent(JSON.stringify(Qe))}`,xt=new u.W5("",!0).appendMarkdown(tt).appendText(" ").appendLink(ht,bt);ee.push(new c.hU(this,xe.range,[xt],!1,me++))}return ee}renderHoverParts(te,Le){return(0,c.c)(te,Le,this._editor,this._languageService,this._openerService)}};function de(te){return`U+${te.toString(16).padStart(4,"0")}`}function U(te){let Le=`\`${de(te)}\``;return A.vU.isInvisibleCharacter(te)||(Le+=` "${function(ke){return ke===96?"`` ` ``":"`"+String.fromCodePoint(ke)+"`"}(te)}"`),Le}function ue(te,Le){return d.a.computeUnicodeHighlightReason(te,Le)}be=q([p(1,h.O),p(2,O.v4)],be);class ve{constructor(){this.map=new Map}getDecorationFromOptions(Le){return this.getDecoration(!Le.includeComments,!Le.includeStrings)}getDecoration(Le,ke){let le=`${Le}${ke}`,ee=this.map.get(le);return ee||(ee=f.qx.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:Le,hideInStringTokens:ke}),this.map.set(le,ee)),ee}}ve.instance=new ve;class X extends x.R6{constructor(){super({id:Ce.ID,label:z.NC("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=z.NC("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(Le,ke,le){return re(this,void 0,void 0,function*(){let ee=Le==null?void 0:Le.get(J.Ui);ee&&this.runAction(ee)})}runAction(Le){return re(this,void 0,void 0,function*(){yield Le.updateValue(v.qt.includeComments,!1,2)})}}class ye extends x.R6{constructor(){super({id:Ce.ID,label:z.NC("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=z.NC("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(Le,ke,le){return re(this,void 0,void 0,function*(){let ee=Le==null?void 0:Le.get(J.Ui);ee&&this.runAction(ee)})}runAction(Le){return re(this,void 0,void 0,function*(){yield Le.updateValue(v.qt.includeStrings,!1,2)})}}class Ce extends x.R6{constructor(){super({id:Ce.ID,label:z.NC("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=z.NC("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(Le,ke,le){return re(this,void 0,void 0,function*(){let ee=Le==null?void 0:Le.get(J.Ui);ee&&this.runAction(ee)})}runAction(Le){return re(this,void 0,void 0,function*(){yield Le.updateValue(v.qt.ambiguousCharacters,!1,2)})}}Ce.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class Ee extends x.R6{constructor(){super({id:Ee.ID,label:z.NC("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=z.NC("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(Le,ke,le){return re(this,void 0,void 0,function*(){let ee=Le==null?void 0:Le.get(J.Ui);ee&&this.runAction(ee)})}runAction(Le){return re(this,void 0,void 0,function*(){yield Le.updateValue(v.qt.invisibleCharacters,!1,2)})}}Ee.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class Ae extends x.R6{constructor(){super({id:Ae.ID,label:z.NC("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=z.NC("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(Le,ke,le){return re(this,void 0,void 0,function*(){let ee=Le==null?void 0:Le.get(J.Ui);ee&&this.runAction(ee)})}runAction(Le){return re(this,void 0,void 0,function*(){yield Le.updateValue(v.qt.nonBasicASCII,!1,2)})}}Ae.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class Fe extends x.R6{constructor(){super({id:Fe.ID,label:z.NC("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(Le,ke,le){return re(this,void 0,void 0,function*(){let{codePoint:ee,reason:me,inString:xe,inComment:We}=le,Ve=String.fromCodePoint(ee),Ye=Le.get(oe.eJ),tt=Le.get(J.Ui),Qe=[];if(me.kind===0)for(let ht of me.notAmbiguousInLocales)Qe.push({label:z.NC("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',ht),run:()=>re(this,void 0,void 0,function*(){_e(tt,[ht])})});if(Qe.push({label:function(ht){return A.vU.isInvisibleCharacter(ht)?z.NC("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",de(ht)):z.NC("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${de(ht)} "${Ve}"`)}(ee),run:()=>function(ht,xt){return re(this,void 0,void 0,function*(){let Qt=ht.getValue(v.qt.allowedCharacters),At;At=typeof Qt=="object"&&Qt?Qt:{};for(let mi of xt)At[String.fromCodePoint(mi)]=!0;yield ht.updateValue(v.qt.allowedCharacters,At,2)})}(tt,[ee])}),We){let ht=new X;Qe.push({label:ht.label,run:()=>re(this,void 0,void 0,function*(){return ht.runAction(tt)})})}else if(xe){let ht=new ye;Qe.push({label:ht.label,run:()=>re(this,void 0,void 0,function*(){return ht.runAction(tt)})})}if(me.kind===0){let ht=new Ce;Qe.push({label:ht.label,run:()=>re(this,void 0,void 0,function*(){return ht.runAction(tt)})})}else if(me.kind===1){let ht=new Ee;Qe.push({label:ht.label,run:()=>re(this,void 0,void 0,function*(){return ht.runAction(tt)})})}else if(me.kind===2){let ht=new Ae;Qe.push({label:ht.label,run:()=>re(this,void 0,void 0,function*(){return ht.runAction(tt)})})}else(function(ht){throw new Error(`Unexpected value: ${ht}`)})(me);let bt=yield Ye.pick(Qe,{title:z.NC("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});bt&&(yield bt.run())})}}function _e(te,Le){var ke;return re(this,void 0,void 0,function*(){let le=(ke=te.inspect(v.qt.allowedLocales).user)===null||ke===void 0?void 0:ke.value,ee;ee=typeof le=="object"&&le?Object.assign({},le):{};for(let me of Le)ee[me]=!0;yield te.updateValue(v.qt.allowedLocales,ee,2)})}Fe.ID="editor.action.unicodeHighlight.showExcludeOptions",(0,x.Qr)(Ce),(0,x.Qr)(Ee),(0,x.Qr)(Ae),(0,x.Qr)(Fe),(0,x._K)(ie.ID,ie,1),i.Ae.register(be)},9607:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{UnusualLineTerminatorsDetector:()=>f});var m=t(5976),B=t(5935),u=t(6830),I=t(1640),_=t(3580),A=t(8820),x=function(d,o){return function(h,r){o(h,r,d)}};let v="ignoreUnusualLineTerminators",f=class extends m.JT{constructor(d,o,h){super(),this._editor=d,this._dialogService=o,this._codeEditorService=h,this._isPresentingDialog=!1,this._config=this._editor.getOption(121),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(121)&&(this._config=this._editor.getOption(121),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(r=>{r.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}_checkForUnusualLineTerminators(){return d=this,o=void 0,r=function*(){if(this._config==="off"||!this._editor.hasModel())return;let i=this._editor.getModel();if(!i.mightContainUnusualLineTerminators()||function(l,a){return l.getModelProperty(a.uri,v)}(this._codeEditorService,i)===!0||this._editor.getOption(87))return;if(this._config==="auto")return void i.removeUnusualLineTerminators(this._editor.getSelections());if(this._isPresentingDialog)return;let b;try{this._isPresentingDialog=!0,b=yield this._dialogService.confirm({title:_.NC("unusualLineTerminators.title","Unusual Line Terminators"),message:_.NC("unusualLineTerminators.message","Detected unusual line terminators"),detail:_.NC("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,B.EZ)(i.uri)),primaryButton:_.NC({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:_.NC("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}b.confirmed?i.removeUnusualLineTerminators(this._editor.getSelections()):function(l,a,w){l.setModelProperty(a.uri,v,!0)}(this._codeEditorService,i)},new((h=void 0)||(h=Promise))(function(i,c){function b(w){try{a(r.next(w))}catch(E){c(E)}}function l(w){try{a(r.throw(w))}catch(E){c(E)}}function a(w){var E;w.done?i(w.value):(E=w.value,E instanceof h?E:new h(function(D){D(E)})).then(b,l)}a((r=r.apply(d,o||[])).next())});var d,o,h,r}};f.ID="editor.contrib.unusualLineTerminatorsDetector",f=function(d,o,h,r){var i,c=arguments.length,b=c<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,h):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,o,h,r);else for(var l=d.length-1;l>=0;l--)(i=d[l])&&(b=(c<3?i(b):c>3?i(o,h,b):i(o,h))||b);return c>3&&b&&Object.defineProperty(o,h,b),b}([x(1,A.S),x(2,I.$)],f),(0,u._K)(f.ID,f,1)},4495:(ut,Ie,t)=>{"use strict";t.d(Ie,{G:()=>l,w:()=>a});var m=t(4973),B=t(3654),u=t(6887),I=t(3580),_=t(3910),A=t(7781);let x=(0,_.P6G)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},I.NC("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);(0,_.P6G)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},I.NC("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),(0,_.P6G)("editor.wordHighlightTextBackground",{light:x,dark:x,hcDark:x,hcLight:x},I.NC("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);let v=(0,_.P6G)("editor.wordHighlightBorder",{light:null,dark:null,hcDark:_.xL1,hcLight:_.xL1},I.NC("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));(0,_.P6G)("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:_.xL1,hcLight:_.xL1},I.NC("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),(0,_.P6G)("editor.wordHighlightTextBorder",{light:v,dark:v,hcDark:v,hcLight:v},I.NC("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));let f=(0,_.P6G)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},I.NC("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),d=(0,_.P6G)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},I.NC("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),o=(0,_.P6G)("editorOverviewRuler.wordHighlightTextForeground",{dark:_.SPM,light:_.SPM,hcDark:_.SPM,hcLight:_.SPM},I.NC("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),h=B.qx.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,A.EN)(d),position:m.sh.Center},minimap:{color:(0,A.EN)(_.IYc),position:m.F5.Inline}}),r=B.qx.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:(0,A.EN)(o),position:m.sh.Center},minimap:{color:(0,A.EN)(_.IYc),position:m.F5.Inline}}),i=B.qx.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,A.EN)(_.SPM),position:m.sh.Center},minimap:{color:(0,A.EN)(_.IYc),position:m.F5.Inline}}),c=B.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),b=B.qx.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,A.EN)(f),position:m.sh.Center},minimap:{color:(0,A.EN)(_.IYc),position:m.F5.Inline}});function l(w){return w===u.MY.Write?h:w===u.MY.Text?r:b}function a(w){return w?c:i}(0,A.Ic)((w,E)=>{let D=w.getColor(_.Rzx);D&&E.addRule(`.monaco-editor .selectionHighlight { background-color: ${D.transparent(.5)}; }`)})},943:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{WordHighlighterContribution:()=>L,getOccurrencesAtPosition:()=>l});var m=t(5152),B=t(9488),u=t(5393),I=t(1050),_=t(7301),A=t(5976),x=t(6830),v=t(4314),f=t(9102),d=t(6887),o=t(3580),h=t(3983),r=t(1922),i=t(4495),c=function(O,$){return function(N,T){$(N,T,O)}};let b=new h.uy("hasWordHighlights",!1);function l(O,$,N,T){let C=O.ordered($);return(0,u.Ps)(C.map(W=>()=>Promise.resolve(W.provideDocumentHighlights($,N,T)).then(void 0,_.Cp)),B.Of)}class a{constructor($,N,T){this._model=$,this._selection=N,this._wordSeparators=T,this._wordRange=this._getCurrentWordRange($,N),this._result=null}get result(){return this._result||(this._result=(0,u.PG)($=>this._compute(this._model,this._selection,this._wordSeparators,$))),this._result}_getCurrentWordRange($,N){let T=$.getWordAtPosition(N.getPosition());return T?new v.e(N.startLineNumber,T.startColumn,N.startLineNumber,T.endColumn):null}isValid($,N,T){let C=N.startLineNumber,W=N.startColumn,K=N.endColumn,j=this._getCurrentWordRange($,N),F=!!(this._wordRange&&this._wordRange.equalsRange(j));for(let H=0,z=T.length;!F&&H<z;H++){let J=T.getRange(H);J&&J.startLineNumber===C&&J.startColumn<=W&&J.endColumn>=K&&(F=!0)}return F}cancel(){this.result.cancel()}}class w extends a{constructor($,N,T,C){super($,N,T),this._providers=C}_compute($,N,T,C){return l(this._providers,$,N.getPosition(),C).then(W=>W||[])}}class E extends a{constructor($,N,T){super($,N,T),this._selectionIsEmpty=N.isEmpty()}_compute($,N,T,C){return(0,u.Vs)(250,C).then(()=>{if(!N.isEmpty())return[];let W=$.getWordAtPosition(N.getPosition());return!W||W.word.length>1e3?[]:$.findMatches(W.word,!0,!1,!0,T,!1).map(K=>({range:K.range,kind:d.MY.Text}))})}isValid($,N,T){let C=N.isEmpty();return this._selectionIsEmpty===C&&super.isValid($,N,T)}}(0,x.sb)("_executeDocumentHighlights",(O,$,N)=>l(O.get(r.p).documentHighlightProvider,$,N,I.T.None));class D{constructor($,N,T){this.toUnhook=new A.SL,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=$,this.providers=N,this._hasWordHighlights=b.bindTo(T),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(78),this.model=this.editor.getModel(),this.toUnhook.add($.onDidChangeCursorPosition(C=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(C)})),this.toUnhook.add($.onDidChangeModelContent(C=>{this._stopAll()})),this.toUnhook.add($.onDidChangeConfiguration(C=>{let W=this.editor.getOption(78);this.occurrencesHighlight!==W&&(this.occurrencesHighlight=W,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(v.e.compareRangesUsingStarts)}moveNext(){let $=this._getSortedHighlights(),N=($.findIndex(C=>C.containsPosition(this.editor.getPosition()))+1)%$.length,T=$[N];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(T.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(T);let C=this._getWord();if(C){let W=this.editor.getModel().getLineContent(T.startLineNumber);(0,m.Z9)(`${W}, ${N+1} of ${$.length} for '${C.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let $=this._getSortedHighlights(),N=($.findIndex(C=>C.containsPosition(this.editor.getPosition()))-1+$.length)%$.length,T=$[N];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(T.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(T);let C=this._getWord();if(C){let W=this.editor.getModel().getLineContent(T.startLineNumber);(0,m.Z9)(`${W}, ${N+1} of ${$.length} for '${C.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged($){this.occurrencesHighlight&&$.reason===3?this._run():this._stopAll()}_getWord(){let $=this.editor.getSelection(),N=$.startLineNumber,T=$.startColumn;return this.model.getWordAtPosition({lineNumber:N,column:T})}_run(){let $=this.editor.getSelection();if($.startLineNumber!==$.endLineNumber)return void this._stopAll();let N=$.startColumn,T=$.endColumn,C=this._getWord();if(!C||C.startColumn>N||C.endColumn<T)return void this._stopAll();let W=this.workerRequest&&this.workerRequest.isValid(this.model,$,this.decorations);if(this.lastCursorPositionChangeTime=new Date().getTime(),W)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let z=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=(K=this.providers,j=this.model,F=this.editor.getSelection(),H=this.editor.getOption(125),K.has(j)?new w(j,F,H,K):new E(j,F,H)),this.workerRequest.result.then(J=>{z===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=J||[],this._beginRenderDecorations())},_.dL)}var K,j,F,H}_beginRenderDecorations(){let $=new Date().getTime(),N=this.lastCursorPositionChangeTime+250;$>=N?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},N-$)}renderDecorations(){this.renderDecorationsTimer=-1;let $=[];for(let N of this.workerRequestValue)N.range&&$.push({range:N.range,options:(0,i.G)(N.kind)});this.decorations.set($),this._hasWordHighlights.set(this.hasDecorations())}dispose(){this._stopAll(),this.toUnhook.dispose()}}let L=class gd extends A.JT{static get($){return $.getContribution(gd.ID)}constructor($,N,T){super(),this.wordHighlighter=null;let C=()=>{$.hasModel()&&(this.wordHighlighter=new D($,T.documentHighlightProvider,N))};this._register($.onDidChangeModel(W=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),C()})),C()}saveViewState(){return!(!this.wordHighlighter||!this.wordHighlighter.hasDecorations())}moveNext(){var $;($=this.wordHighlighter)===null||$===void 0||$.moveNext()}moveBack(){var $;($=this.wordHighlighter)===null||$===void 0||$.moveBack()}restoreViewState($){this.wordHighlighter&&$&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};L.ID="editor.contrib.wordHighlighter",L=function(O,$,N,T){var C,W=arguments.length,K=W<3?$:T===null?T=Object.getOwnPropertyDescriptor($,N):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(O,$,N,T);else for(var j=O.length-1;j>=0;j--)(C=O[j])&&(K=(W<3?C(K):W>3?C($,N,K):C($,N))||K);return W>3&&K&&Object.defineProperty($,N,K),K}([c(1,h.i6),c(2,r.p)],L);class k extends x.R6{constructor($,N){super(N),this._isNext=$}run($,N){let T=L.get(N);T&&(this._isNext?T.moveNext():T.moveBack())}}class R extends x.R6{constructor(){super({id:"editor.action.wordHighlight.trigger",label:o.NC("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:b.toNegated(),kbOpts:{kbExpr:f.u.editorTextFocus,primary:0,weight:100}})}run($,N,T){let C=L.get(N);C&&C.restoreViewState(!0)}}(0,x._K)(L.ID,L,0),(0,x.Qr)(class extends k{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:o.NC("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:b,kbOpts:{kbExpr:f.u.editorTextFocus,primary:65,weight:100}})}}),(0,x.Qr)(class extends k{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:o.NC("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:b,kbOpts:{kbExpr:f.u.editorTextFocus,primary:1089,weight:100}})}}),(0,x.Qr)(R)},7181:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CursorWordAccessibilityLeft:()=>O,CursorWordAccessibilityLeftSelect:()=>$,CursorWordAccessibilityRight:()=>F,CursorWordAccessibilityRightSelect:()=>H,CursorWordEndLeft:()=>E,CursorWordEndLeftSelect:()=>k,CursorWordEndRight:()=>T,CursorWordEndRightSelect:()=>K,CursorWordLeft:()=>D,CursorWordLeftSelect:()=>R,CursorWordRight:()=>C,CursorWordRightSelect:()=>j,CursorWordStartLeft:()=>w,CursorWordStartLeftSelect:()=>L,CursorWordStartRight:()=>N,CursorWordStartRightSelect:()=>W,DeleteInsideWord:()=>se,DeleteWordCommand:()=>z,DeleteWordEndLeft:()=>q,DeleteWordEndRight:()=>ne,DeleteWordLeft:()=>p,DeleteWordLeftCommand:()=>J,DeleteWordRight:()=>ie,DeleteWordRightCommand:()=>oe,DeleteWordStartLeft:()=>fe,DeleteWordStartRight:()=>re,MoveWordCommand:()=>b,WordLeftCommand:()=>l,WordRightCommand:()=>a});var m=t(6830),B=t(1329),u=t(4141),I=t(5343),_=t(2896),A=t(4929),x=t(187),v=t(4314),f=t(3860),d=t(9102),o=t(1381),h=t(3580),r=t(1106),i=t(3983),c=t(9282);class b extends m._l{constructor(be){super(be),this._inSelectionMode=be.inSelectionMode,this._wordNavigationType=be.wordNavigationType}runEditorCommand(be,de,U){if(!de.hasModel())return;let ue=(0,A.u)(de.getOption(125)),ve=de.getModel(),X=de.getSelections().map(ye=>{let Ce=new x.L(ye.positionLineNumber,ye.positionColumn),Ee=this._move(ue,ve,Ce,this._wordNavigationType);return this._moveTo(ye,Ee,this._inSelectionMode)});if(ve.pushStackElement(),de._getViewModel().setCursorStates("moveWordCommand",3,X.map(ye=>I.Vi.fromModelSelection(ye))),X.length===1){let ye=new x.L(X[0].positionLineNumber,X[0].positionColumn);de.revealPosition(ye,0)}}_moveTo(be,de,U){return U?new f.Y(be.selectionStartLineNumber,be.selectionStartColumn,de.lineNumber,de.column):new f.Y(de.lineNumber,de.column,de.lineNumber,de.column)}}class l extends b{_move(be,de,U,ue){return _.w.moveWordLeft(be,de,U,ue)}}class a extends b{_move(be,de,U,ue){return _.w.moveWordRight(be,de,U,ue)}}class w extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class E extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class D extends l{constructor(){var be;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:i.Ao.and(d.u.textInputFocus,(be=i.Ao.and(r.U,c.cv))===null||be===void 0?void 0:be.negate()),primary:2063,mac:{primary:527},weight:100}})}}class L extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class k extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class R extends l{constructor(){var be;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:i.Ao.and(d.u.textInputFocus,(be=i.Ao.and(r.U,c.cv))===null||be===void 0?void 0:be.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class O extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(be,de,U,ue){return super._move((0,A.u)(u.BH.wordSeparators.defaultValue),de,U,ue)}}class $ extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(be,de,U,ue){return super._move((0,A.u)(u.BH.wordSeparators.defaultValue),de,U,ue)}}class N extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class T extends a{constructor(){var be;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:i.Ao.and(d.u.textInputFocus,(be=i.Ao.and(r.U,c.cv))===null||be===void 0?void 0:be.negate()),primary:2065,mac:{primary:529},weight:100}})}}class C extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class W extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class K extends a{constructor(){var be;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:i.Ao.and(d.u.textInputFocus,(be=i.Ao.and(r.U,c.cv))===null||be===void 0?void 0:be.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class j extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class F extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(be,de,U,ue){return super._move((0,A.u)(u.BH.wordSeparators.defaultValue),de,U,ue)}}class H extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(be,de,U,ue){return super._move((0,A.u)(u.BH.wordSeparators.defaultValue),de,U,ue)}}class z extends m._l{constructor(be){super(be),this._whitespaceHeuristics=be.whitespaceHeuristics,this._wordNavigationType=be.wordNavigationType}runEditorCommand(be,de,U){let ue=be.get(o.c_);if(!de.hasModel())return;let ve=(0,A.u)(de.getOption(125)),X=de.getModel(),ye=de.getSelections(),Ce=de.getOption(5),Ee=de.getOption(9),Ae=ue.getLanguageConfiguration(X.getLanguageId()).getAutoClosingPairs(),Fe=de._getViewModel(),_e=ye.map(te=>{let Le=this._delete({wordSeparators:ve,model:X,selection:te,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:de.getOption(7),autoClosingBrackets:Ce,autoClosingQuotes:Ee,autoClosingPairs:Ae,autoClosedCharacters:Fe.getCursorAutoClosedCharacters()},this._wordNavigationType);return new B.T4(Le,"")});de.pushUndoStop(),de.executeCommands(this.id,_e),de.pushUndoStop()}}class J extends z{_delete(be,de){return _.w.deleteWordLeft(be,de)||new v.e(1,1,1,1)}}class oe extends z{_delete(be,de){let U=_.w.deleteWordRight(be,de);if(U)return U;let ue=be.model.getLineCount(),ve=be.model.getLineMaxColumn(ue);return new v.e(ue,ve,ue,ve)}}class fe extends J{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:d.u.writable})}}class q extends J{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:d.u.writable})}}class p extends J{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:d.u.writable,kbOpts:{kbExpr:d.u.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class re extends oe{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:d.u.writable})}}class ne extends oe{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:d.u.writable})}}class ie extends oe{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:d.u.writable,kbOpts:{kbExpr:d.u.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class se extends m.R6{constructor(){super({id:"deleteInsideWord",precondition:d.u.writable,label:h.NC("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(be,de,U){if(!de.hasModel())return;let ue=(0,A.u)(de.getOption(125)),ve=de.getModel(),X=de.getSelections().map(ye=>{let Ce=_.w.deleteInsideWord(ue,ve,ye);return new B.T4(Ce,"")});de.pushUndoStop(),de.executeCommands(this.id,X),de.pushUndoStop()}}(0,m.fK)(new w),(0,m.fK)(new E),(0,m.fK)(new D),(0,m.fK)(new L),(0,m.fK)(new k),(0,m.fK)(new R),(0,m.fK)(new N),(0,m.fK)(new T),(0,m.fK)(new C),(0,m.fK)(new W),(0,m.fK)(new K),(0,m.fK)(new j),(0,m.fK)(new O),(0,m.fK)(new $),(0,m.fK)(new F),(0,m.fK)(new H),(0,m.fK)(new fe),(0,m.fK)(new q),(0,m.fK)(new p),(0,m.fK)(new re),(0,m.fK)(new ne),(0,m.fK)(new ie),(0,m.Qr)(se)},6709:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CursorWordPartLeft:()=>d,CursorWordPartLeftSelect:()=>o,CursorWordPartRight:()=>r,CursorWordPartRightSelect:()=>i,DeleteWordPartLeft:()=>x,DeleteWordPartRight:()=>v,WordPartLeftCommand:()=>f,WordPartRightCommand:()=>h});var m=t(6830),B=t(2896),u=t(4314),I=t(9102),_=t(7181),A=t(4565);class x extends _.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:I.u.writable,kbOpts:{kbExpr:I.u.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(b,l){return B.L.deleteWordPartLeft(b)||new u.e(1,1,1,1)}}class v extends _.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:I.u.writable,kbOpts:{kbExpr:I.u.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(b,l){let a=B.L.deleteWordPartRight(b);if(a)return a;let w=b.model.getLineCount(),E=b.model.getLineMaxColumn(w);return new u.e(w,E,w,E)}}class f extends _.MoveWordCommand{_move(b,l,a,w){return B.L.moveWordPartLeft(b,l,a)}}class d extends f{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:I.u.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}A.P.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class o extends f{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:I.u.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}A.P.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class h extends _.MoveWordCommand{_move(b,l,a,w){return B.L.moveWordPartRight(b,l,a)}}class r extends h{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:I.u.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class i extends h{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:I.u.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}(0,m.fK)(new x),(0,m.fK)(new v),(0,m.fK)(new d),(0,m.fK)(new o),(0,m.fK)(new r),(0,m.fK)(new i)},2518:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{CancellationTokenSource:()=>Kd,Emitter:()=>jd,KeyCode:()=>$d,KeyMod:()=>qd,MarkerSeverity:()=>Jd,MarkerTag:()=>Xd,Position:()=>Gd,Range:()=>Qd,Selection:()=>Zd,SelectionDirection:()=>Yd,Token:()=>th,Uri:()=>eh,editor:()=>ih,languages:()=>nh});var m=t(4141),B=t(927),u=t(5976),I=t(7295),_=t(666),A=t(7231),x=t(1640),v=t(5146),f=t(4669),d=t(6248),o=t(4314),h=t(9149),r=t(1106),i=function(G,n){return function(g,M){n(g,M,G)}};let c={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0,findResultLoop:!0},b=class extends u.JT{constructor(G,n={},g,M,Z){super(),this._audioCueService=g,this._codeEditorService=M,this._accessibilityService=Z,this._onDidUpdate=this._register(new f.Q5),this._editor=G,this._options=d.jB(n,c,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(ae=>{this.ignoreSelectionChange||(this._updateAccessibilityState(ae.position.lineNumber),this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(ae=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(G){this.ranges=[],G&&G.forEach(n=>{!this._options.ignoreCharChanges&&n.charChanges?n.charChanges.forEach(g=>{this.ranges.push({rhs:!0,range:new o.e(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn)})}):n.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new o.e(n.modifiedStartLineNumber,1,n.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new o.e(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber+1,1)})}),this.ranges.sort((n,g)=>o.e.compareRangesUsingStarts(n.range,g.range)),this._onDidUpdate.fire(this)}_initIdx(G){let n=!1,g=this._editor.getPosition();if(g){for(let M=0,Z=this.ranges.length;M<Z&&!n;M++){let ae=this.ranges[M].range;g.isBeforeOrEqual(ae.getStartPosition())&&(this.nextIdx=M+(G?0:-1),n=!0)}n||(this.nextIdx=G?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(G,n){if(v.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(G):G?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let g=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let M=g.range.getStartPosition();this._editor.setPosition(M),this._editor.revealRangeInCenter(g.range,n),this._updateAccessibilityState(M.lineNumber,!0)}finally{this.ignoreSelectionChange=!1}}_updateAccessibilityState(G,n){var g;let M=(g=this._editor.getModel())===null||g===void 0?void 0:g.modified;if(!M)return;let Z=M.getLineDecorations(G).find(ge=>ge.options.className==="line-insert");if(Z)this._audioCueService.playAudioCue(h.y$.diffLineModified,!0);else{if(!n)return;this._audioCueService.playAudioCue(h.y$.diffLineDeleted,!0)}let ae=this._codeEditorService.getActiveCodeEditor();n&&ae&&Z&&this._accessibilityService.isScreenReaderOptimized()&&(ae.setSelection({startLineNumber:G,startColumn:0,endLineNumber:G,endColumn:Number.MAX_VALUE}),ae.writeScreenReaderContent("diff-navigation"))}canNavigate(){return this.ranges&&this.ranges.length>0}next(G=0){this.canNavigateNext()&&this._move(!0,G)}previous(G=0){this.canNavigatePrevious()&&this._move(!1,G)}canNavigateNext(){return this.canNavigateLoop()||this.nextIdx<this.ranges.length-1}canNavigatePrevious(){return this.canNavigateLoop()||this.nextIdx!==0}canNavigateLoop(){return!!this._options.findResultLoop}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}};b=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([i(2,h.e7),i(3,x.$),i(4,r.F)],b);var l=t(7374),a=t(6518),w=t(4973),E=t(6887),D=t(1381),L=t(276),k=t(2042),R=t(3733),O=t(2573);class $ extends O.Q8{constructor(n,g,M){super(n,M.keepIdleModels||!1,M.label,g),this._foreignModuleId=M.moduleId,this._foreignModuleCreateData=M.createData||null,this._foreignModuleHost=M.host||null,this._foreignProxy=null}fhr(n,g){if(!this._foreignModuleHost||typeof this._foreignModuleHost[n]!="function")return Promise.reject(new Error("Missing method "+n+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[n].apply(this._foreignModuleHost,g))}catch(M){return Promise.reject(M)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(n=>{let g=this._foreignModuleHost?(0,d.$E)(this._foreignModuleHost):[];return n.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,g).then(M=>{this._foreignModuleCreateData=null;let Z=(De,ze)=>n.fmr(De,ze),ae=(De,ze)=>function(){let He=Array.prototype.slice.call(arguments,0);return ze(De,He)},ge={};for(let De of M)ge[De]=ae(De,Z);return ge})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(n){return this._withSyncedResources(n).then(g=>this.getProxy())}}var N=t(902),T=t(7378),C=t(1557),W=t(1118);function K(G){return typeof G=="string"}function j(G){return!K(G)}function F(G){return!G}function H(G,n){return G.ignoreCase&&n?n.toLowerCase():n}function z(G){return G.replace(/[&<>'"_]/g,"-")}function J(G,n){return new Error(`${G.languageId}: ${n}`)}function oe(G,n,g,M,Z){let ae=null;return n.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,function(ge,De,ze,He,Je,vt,Pt,Bt,ni){return F(ze)?F(He)?!F(Je)&&Je<M.length?H(G,M[Je]):!F(Pt)&&G&&typeof G[Pt]=="string"?G[Pt]:(ae===null&&(ae=Z.split("."),ae.unshift(Z)),!F(vt)&&vt<ae.length?H(G,ae[vt]):""):H(G,g):"$"})}function fe(G,n){let g=n;for(;g&&g.length>0;){let M=G.tokenizer[g];if(M)return M;let Z=g.lastIndexOf(".");g=Z<0?null:g.substr(0,Z)}return null}var q=t(3108);class p{static create(n,g){return this._INSTANCE.create(n,g)}constructor(n){this._maxCacheDepth=n,this._entries=Object.create(null)}create(n,g){if(n!==null&&n.depth>=this._maxCacheDepth)return new re(n,g);let M=re.getStackElementId(n);M.length>0&&(M+="|"),M+=g;let Z=this._entries[M];return Z||(Z=new re(n,g),this._entries[M]=Z,Z)}}p._INSTANCE=new p(5);class re{constructor(n,g){this.parent=n,this.state=g,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(n){let g="";for(;n!==null;)g.length>0&&(g+="|"),g+=n.state,n=n.parent;return g}static _equals(n,g){for(;n!==null&&g!==null;){if(n===g)return!0;if(n.state!==g.state)return!1;n=n.parent,g=g.parent}return n===null&&g===null}equals(n){return re._equals(this,n)}push(n){return p.create(this,n)}pop(){return this.parent}popall(){let n=this;for(;n.parent;)n=n.parent;return n}switchTo(n){return p.create(this.parent,n)}}class ne{constructor(n,g){this.languageId=n,this.state=g}equals(n){return this.languageId===n.languageId&&this.state.equals(n.state)}clone(){return this.state.clone()===this.state?this:new ne(this.languageId,this.state)}}class ie{static create(n,g){return this._INSTANCE.create(n,g)}constructor(n){this._maxCacheDepth=n,this._entries=Object.create(null)}create(n,g){if(g!==null)return new se(n,g);if(n!==null&&n.depth>=this._maxCacheDepth)return new se(n,g);let M=re.getStackElementId(n),Z=this._entries[M];return Z||(Z=new se(n,null),this._entries[M]=Z,Z)}}ie._INSTANCE=new ie(5);class se{constructor(n,g){this.stack=n,this.embeddedLanguageData=g}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:ie.create(this.stack,this.embeddedLanguageData)}equals(n){return n instanceof se&&!!this.stack.equals(n.stack)&&(this.embeddedLanguageData===null&&n.embeddedLanguageData===null||this.embeddedLanguageData!==null&&n.embeddedLanguageData!==null&&this.embeddedLanguageData.equals(n.embeddedLanguageData))}}class ce{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(n){this._languageId=n}emit(n,g){this._lastTokenType===g&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=g,this._lastTokenLanguage=this._languageId,this._tokens.push(new E.WU(n,g,this._languageId)))}nestedLanguageTokenize(n,g,M,Z){let ae=M.languageId,ge=M.state,De=E.RW.get(ae);if(!De)return this.enterLanguage(ae),this.emit(Z,""),ge;let ze=De.tokenize(n,g,ge);if(Z!==0)for(let He of ze.tokens)this._tokens.push(new E.WU(He.offset+Z,He.type,He.language));else this._tokens=this._tokens.concat(ze.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,ze.endState}finalize(n){return new E.hG(this._tokens,n)}}class be{constructor(n,g){this._languageService=n,this._theme=g,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(n){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(n)}emit(n,g){let M=1024|this._theme.match(this._currentLanguageId,g);this._lastTokenMetadata!==M&&(this._lastTokenMetadata=M,this._tokens.push(n),this._tokens.push(M))}static _merge(n,g,M){let Z=n!==null?n.length:0,ae=g.length,ge=M!==null?M.length:0;if(Z===0&&ae===0&&ge===0)return new Uint32Array(0);if(Z===0&&ae===0)return M;if(ae===0&&ge===0)return n;let De=new Uint32Array(Z+ae+ge);n!==null&&De.set(n);for(let ze=0;ze<ae;ze++)De[Z+ze]=g[ze];return M!==null&&De.set(M,Z+ae),De}nestedLanguageTokenize(n,g,M,Z){let ae=M.languageId,ge=M.state,De=E.RW.get(ae);if(!De)return this.enterLanguage(ae),this.emit(Z,""),ge;let ze=De.tokenizeEncoded(n,g,ge);if(Z!==0)for(let He=0,Je=ze.tokens.length;He<Je;He+=2)ze.tokens[He]+=Z;return this._prependTokens=be._merge(this._prependTokens,this._tokens,ze.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,ze.endState}finalize(n){return new E.DI(be._merge(this._prependTokens,this._tokens,null),n)}}let de=class pd{constructor(n,g,M,Z,ae){this._configurationService=ae,this._languageService=n,this._standaloneThemeService=g,this._languageId=M,this._lexer=Z,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let ge=!1;this._tokenizationRegistryListener=E.RW.onDidChange(De=>{if(ge)return;let ze=!1;for(let He=0,Je=De.changedLanguages.length;He<Je;He++){let vt=De.changedLanguages[He];if(this._embeddedLanguages[vt]){ze=!0;break}}ze&&(ge=!0,E.RW.handleChange([this._languageId]),ge=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(De=>{De.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let n=[];for(let g in this._embeddedLanguages){let M=E.RW.get(g);if(M){if(M instanceof pd){let Z=M.getLoadStatus();Z.loaded===!1&&n.push(Z.promise)}}else E.RW.isResolved(g)||n.push(E.RW.getOrCreate(g))}return n.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(n).then(g=>{})}}getInitialState(){let n=p.create(null,this._lexer.start);return ie.create(n,null)}tokenize(n,g,M){if(n.length>=this._maxTokenizationLineLength)return(0,L.Ri)(this._languageId,M);let Z=new ce,ae=this._tokenize(n,g,M,Z);return Z.finalize(ae)}tokenizeEncoded(n,g,M){if(n.length>=this._maxTokenizationLineLength)return(0,L.Dy)(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),M);let Z=new be(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),ae=this._tokenize(n,g,M,Z);return Z.finalize(ae)}_tokenize(n,g,M,Z){return M.embeddedLanguageData?this._nestedTokenize(n,g,M,0,Z):this._myTokenize(n,g,M,0,Z)}_findLeavingNestedLanguageOffset(n,g){let M=this._lexer.tokenizer[g.stack.state];if(!M&&(M=fe(this._lexer,g.stack.state),!M))throw J(this._lexer,"tokenizer state is not defined: "+g.stack.state);let Z=-1,ae=!1;for(let ge of M){if(!j(ge.action)||ge.action.nextEmbedded!=="@pop")continue;ae=!0;let De=ge.regex,ze=ge.regex.source;if(ze.substr(0,4)==="^(?:"&&ze.substr(ze.length-1,1)===")"){let Je=(De.ignoreCase?"i":"")+(De.unicode?"u":"");De=new RegExp(ze.substr(4,ze.length-5),Je)}let He=n.search(De);He===-1||He!==0&&ge.matchOnlyAtLineStart||(Z===-1||He<Z)&&(Z=He)}if(!ae)throw J(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+g.stack.state);return Z}_nestedTokenize(n,g,M,Z,ae){let ge=this._findLeavingNestedLanguageOffset(n,M);if(ge===-1){let He=ae.nestedLanguageTokenize(n,g,M.embeddedLanguageData,Z);return ie.create(M.stack,new ne(M.embeddedLanguageData.languageId,He))}let De=n.substring(0,ge);De.length>0&&ae.nestedLanguageTokenize(De,!1,M.embeddedLanguageData,Z);let ze=n.substring(ge);return this._myTokenize(ze,g,M,Z+ge,ae)}_safeRuleName(n){return n?n.name:"(unknown)"}_myTokenize(n,g,M,Z,ae){ae.enterLanguage(this._languageId);let ge=n.length,De=g&&this._lexer.includeLF?n+`
`:n,ze=De.length,He=M.embeddedLanguageData,Je=M.stack,vt=0,Pt=null,Bt=!0;for(;Bt||vt<ze;){let Fi=vt,Yi=Je.depth,an=Pt?Pt.groups.length:0,Gi=Je.state,nn=null,ln=null,$i=null,Qi=null,Ji=null;if(Pt){nn=Pt.matches;let Mi=Pt.groups.shift();ln=Mi.matched,$i=Mi.action,Qi=Pt.rule,Pt.groups.length===0&&(Pt=null)}else{if(!Bt&&vt>=ze)break;Bt=!1;let Mi=this._lexer.tokenizer[Gi];if(!Mi&&(Mi=fe(this._lexer,Gi),!Mi))throw J(this._lexer,"tokenizer state is not defined: "+Gi);let on=De.substr(vt);for(let Cn of Mi)if((vt===0||!Cn.matchOnlyAtLineStart)&&(nn=on.match(Cn.regex),nn)){ln=nn[0],$i=Cn.action;break}}if(nn||(nn=[""],ln=""),$i||(vt<ze&&(nn=[De.charAt(vt)],ln=nn[0]),$i=this._lexer.defaultToken),ln===null)break;for(vt+=ln.length;!function(Mi){return Array.isArray(Mi)}($i)&&j($i)&&$i.test;)$i=$i.test(ln,nn,Gi,vt===ze);let Oi=null;if(typeof $i=="string"||Array.isArray($i))Oi=$i;else if($i.group)Oi=$i.group;else if($i.token!==null&&$i.token!==void 0){if(Oi=$i.tokenSubst?oe(this._lexer,$i.token,ln,nn,Gi):$i.token,$i.nextEmbedded)if($i.nextEmbedded==="@pop"){if(!He)throw J(this._lexer,"cannot pop embedded language if not inside one");He=null}else{if(He)throw J(this._lexer,"cannot enter embedded language from within an embedded language");Ji=oe(this._lexer,$i.nextEmbedded,ln,nn,Gi)}if($i.goBack&&(vt=Math.max(0,vt-$i.goBack)),$i.switchTo&&typeof $i.switchTo=="string"){let Mi=oe(this._lexer,$i.switchTo,ln,nn,Gi);if(Mi[0]==="@"&&(Mi=Mi.substr(1)),!fe(this._lexer,Mi))throw J(this._lexer,"trying to switch to a state '"+Mi+"' that is undefined in rule: "+this._safeRuleName(Qi));Je=Je.switchTo(Mi)}else{if($i.transform&&typeof $i.transform=="function")throw J(this._lexer,"action.transform not supported");if($i.next)if($i.next==="@push"){if(Je.depth>=this._lexer.maxStack)throw J(this._lexer,"maximum tokenizer stack size reached: ["+Je.state+","+Je.parent.state+",...]");Je=Je.push(Gi)}else if($i.next==="@pop"){if(Je.depth<=1)throw J(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(Qi));Je=Je.pop()}else if($i.next==="@popall")Je=Je.popall();else{let Mi=oe(this._lexer,$i.next,ln,nn,Gi);if(Mi[0]==="@"&&(Mi=Mi.substr(1)),!fe(this._lexer,Mi))throw J(this._lexer,"trying to set a next state '"+Mi+"' that is undefined in rule: "+this._safeRuleName(Qi));Je=Je.push(Mi)}}$i.log&&typeof $i.log=="string"&&(ni=this._lexer,Ci=this._lexer.languageId+": "+oe(this._lexer,$i.log,ln,nn,Gi),console.log(`${ni.languageId}: ${Ci}`))}if(Oi===null)throw J(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(Qi));let In=Mi=>{let on=this._languageService.getLanguageIdByLanguageName(Mi)||this._languageService.getLanguageIdByMimeType(Mi)||Mi,Cn=this._getNestedEmbeddedLanguageData(on);if(vt<ze){let Sn=n.substr(vt);return this._nestedTokenize(Sn,g,ie.create(Je,Cn),Z+vt,ae)}return ie.create(Je,Cn)};if(Array.isArray(Oi)){if(Pt&&Pt.groups.length>0)throw J(this._lexer,"groups cannot be nested: "+this._safeRuleName(Qi));if(nn.length!==Oi.length+1)throw J(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(Qi));let Mi=0;for(let on=1;on<nn.length;on++)Mi+=nn[on].length;if(Mi!==ln.length)throw J(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(Qi));Pt={rule:Qi,matches:nn,groups:[]};for(let on=0;on<Oi.length;on++)Pt.groups[on]={action:Oi[on],matched:nn[on+1]};vt-=ln.length}else{{if(Oi==="@rematch"&&(vt-=ln.length,ln="",nn=null,Oi="",Ji!==null))return In(Ji);if(ln.length===0){if(ze===0||Yi!==Je.depth||Gi!==Je.state||(Pt?Pt.groups.length:0)!==an)continue;throw J(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(Qi))}let Mi=null;if(K(Oi)&&Oi.indexOf("@brackets")===0){let on=Oi.substr(9),Cn=U(this._lexer,ln);if(!Cn)throw J(this._lexer,"@brackets token returned but no bracket defined as: "+ln);Mi=z(Cn.token+on)}else Mi=z(Oi===""?"":Oi+this._lexer.tokenPostfix);Fi<ge&&ae.emit(Fi+Z,Mi)}if(Ji!==null)return In(Ji)}}var ni,Ci;return ie.create(Je,He)}_getNestedEmbeddedLanguageData(n){if(!this._languageService.isRegisteredLanguageId(n))return new ne(n,L.TJ);n!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(n),E.RW.getOrCreate(n),this._embeddedLanguages[n]=!0);let g=E.RW.get(n);return new ne(n,g?g.getInitialState():L.TJ)}};function U(G,n){if(!n)return null;n=H(G,n);let g=G.brackets;for(let M of g){if(M.open===n)return{token:M.token,bracketType:1};if(M.close===n)return{token:M.token,bracketType:-1}}return null}var ue,ve;de=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([(ue=4,ve=q.Ui,function(G,n){ve(G,n,ue)})],de);var X;let ye=(X=window.trustedTypes)===null||X===void 0?void 0:X.createPolicy("standaloneColorizer",{createHTML:G=>G});class Ce{static colorizeElement(n,g,M,Z){let ae=(Z=Z||{}).theme||"vs",ge=Z.mimeType||M.getAttribute("lang")||M.getAttribute("data-lang");if(!ge)return console.error("Mode not detected"),Promise.resolve();let De=g.getLanguageIdByMimeType(ge)||ge;n.setTheme(ae);let ze=M.firstChild?M.firstChild.nodeValue:"";return M.className+=" "+ae,this.colorize(g,ze||"",De,Z).then(He=>{var Je;let vt=(Je=ye==null?void 0:ye.createHTML(He))!==null&&Je!==void 0?Je:He;M.innerHTML=vt},He=>console.error(He))}static colorize(n,g,M,Z){return ae=this,ge=void 0,ze=function*(){let He=n.languageIdCodec,Je=4;Z&&typeof Z.tabSize=="number"&&(Je=Z.tabSize),I.uS(g)&&(g=g.substr(1));let vt=I.uq(g);if(!n.isRegisteredLanguageId(M))return Ee(vt,Je,He);let Pt=yield E.RW.getOrCreate(M);return Pt?function(Bt,ni,Ci,Fi){return new Promise((Yi,an)=>{let Gi=()=>{let nn=function(ln,$i,Qi,Ji){let Oi=[],In=Qi.getInitialState();for(let Mi=0,on=ln.length;Mi<on;Mi++){let Cn=ln[Mi],Sn=Qi.tokenizeEncoded(Cn,!0,In);T.A.convertToEndOffset(Sn.tokens,Cn.length);let Nn=new T.A(Sn.tokens,Cn,Ji),ro=W.wA.isBasicASCII(Cn,!0),fo=W.wA.containsRTL(Cn,ro,!0),ao=(0,C.tF)(new C.IJ(!1,!0,Cn,!1,ro,fo,0,Nn.inflate(),[],$i,0,0,0,0,-1,"none",!1,!1,null));Oi=Oi.concat(ao.html),Oi.push("<br/>"),In=Sn.endState}return Oi.join("")}(Bt,ni,Ci,Fi);if(Ci instanceof de){let ln=Ci.getLoadStatus();if(ln.loaded===!1)return void ln.promise.then(Gi,an)}Yi(nn)};Gi()})}(vt,Je,Pt,He):Ee(vt,Je,He)},new((De=void 0)||(De=Promise))(function(He,Je){function vt(ni){try{Bt(ze.next(ni))}catch(Ci){Je(Ci)}}function Pt(ni){try{Bt(ze.throw(ni))}catch(Ci){Je(Ci)}}function Bt(ni){var Ci;ni.done?He(ni.value):(Ci=ni.value,Ci instanceof De?Ci:new De(function(Fi){Fi(Ci)})).then(vt,Pt)}Bt((ze=ze.apply(ae,ge||[])).next())});var ae,ge,De,ze}static colorizeLine(n,g,M,Z,ae=4){let ge=W.wA.isBasicASCII(n,g),De=W.wA.containsRTL(n,ge,M);return(0,C.tF)(new C.IJ(!1,!0,n,!1,ge,De,0,Z,[],ae,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(n,g,M=4){let Z=n.getLineContent(g);n.tokenization.forceTokenization(g);let ae=n.tokenization.getLineTokens(g).inflate();return this.colorizeLine(Z,n.mightContainNonBasicASCII(),n.mightContainRTL(),ae,M)}}function Ee(G,n,g){let M=[],Z=new Uint32Array(2);Z[0]=0,Z[1]=33587200;for(let ae=0,ge=G.length;ae<ge;ae++){let De=G[ae];Z[0]=De.length;let ze=new T.A(Z,De,g),He=W.wA.isBasicASCII(De,!0),Je=W.wA.containsRTL(De,He,!0),vt=(0,C.tF)(new C.IJ(!1,!0,De,!1,He,Je,0,ze,[],n,0,0,0,0,-1,"none",!1,!1,null));M=M.concat(vt.html),M.push("<br/>")}return M.join("")}var Ae,Fe=t(5152),_e=t(1998),te=t(5321),Le=t(8626),ke=t(6542),le=t(3098),ee=t(5393),me=t(3046),xe=t(7301),We=t(2136),Ve=t(4534),Ye=t(6830),tt=t(3407),Qe=t(3580),bt=t(317),ht=t(9802),xt=t(4741),Qt=t(187),At=t(3983),mi=t(5670),Lt=t(9554),ct=function(G,n){return function(g,M){n(g,M,G)}};class Kt{constructor(n,g,M,Z){this.originalLineStart=n,this.originalLineEnd=g,this.modifiedLineStart=M,this.modifiedLineEnd=Z}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class pi{constructor(n){this.entries=n}}let li=(0,Lt.q5)("diff-review-insert",me.l.add,Qe.NC("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),Wi=(0,Lt.q5)("diff-review-remove",me.l.remove,Qe.NC("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),Vi=(0,Lt.q5)("diff-review-close",me.l.close,Qe.NC("diffReviewCloseIcon","Icon for 'Close' in diff review.")),Xi=class Es extends u.JT{constructor(n,g,M,Z){super(),this._languageService=g,this._audioCueService=M,this._configurationService=Z,this._width=0,this._diffEditor=n,this._isVisible=!1,this.shadow=(0,Le.X)(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=(0,Le.X)(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new bt.o(this.actionBarContainer.domNode)),this._actionBar.push(new xt.aU("diffreview.close",Qe.NC("label.close","Close"),"close-diff-review "+mi.k.asClassName(Vi),!0,()=>{return ae=this,ge=void 0,ze=function*(){return this.hide()},new((De=void 0)||(De=Promise))(function(He,Je){function vt(ni){try{Bt(ze.next(ni))}catch(Ci){Je(Ci)}}function Pt(ni){try{Bt(ze.throw(ni))}catch(Ci){Je(Ci)}}function Bt(ni){var Ci;ni.done?He(ni.value):(Ci=ni.value,Ci instanceof De?Ci:new De(function(Fi){Fi(Ci)})).then(vt,Pt)}Bt((ze=ze.apply(ae,ge||[])).next())});var ae,ge,De,ze}),{label:!1,icon:!0}),this.domNode=(0,Le.X)(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=(0,Le.X)(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new ht.s$(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(n.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(n.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(te.mu(this.domNode.domNode,"click",ae=>{ae.preventDefault();let ge=te.Fx(ae.target,"diff-review-row");ge&&this._goToRow(ge)})),this._register(te.mu(this.domNode.domNode,"keydown",ae=>{(ae.equals(18)||ae.equals(2066)||ae.equals(530))&&(ae.preventDefault(),this._goToRow(this._getNextRow(),"next")),(ae.equals(16)||ae.equals(2064)||ae.equals(528))&&(ae.preventDefault(),this._goToRow(this._getPrevRow(),"previous")),(ae.equals(9)||ae.equals(2057)||ae.equals(521)||ae.equals(1033)||ae.equals(10)||ae.equals(3))&&(ae.preventDefault(),this.accept())})),this._register(this._configurationService.onDidChangeConfiguration(ae=>{ae.affectsConfiguration("accessibility.verbosity.diff-editor")&&this._diffEditor.updateOptions({accessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.diff-editor")})})),this._diffs=[],this._currentDiff=null}prev(){let n=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let M=-1;for(let Z=0,ae=this._diffs.length;Z<ae;Z++)if(this._diffs[Z]===this._currentDiff){M=Z;break}n=this._diffs.length+M-1}else n=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;n%=this._diffs.length;let g=this._diffs[n].entries;this._diffEditor.setPosition(new Qt.L(g[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:g[0].modifiedLineStart,endColumn:1073741824,endLineNumber:g[g.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getPrevRow(),"previous")}next(){let n=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let M=-1;for(let Z=0,ae=this._diffs.length;Z<ae;Z++)if(this._diffs[Z]===this._currentDiff){M=Z;break}n=M+1}else n=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;n%=this._diffs.length;let g=this._diffs[n].entries;this._diffEditor.setPosition(new Qt.L(g[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:g[0].modifiedLineStart,endColumn:1073741824,endLineNumber:g[g.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow(),"next")}accept(){let n=-1,g=this._getCurrentFocusedRow();if(g){let M=parseInt(g.getAttribute("data-line"),10);isNaN(M)||(n=M)}this.hide(),n!==-1&&(this._diffEditor.setPosition(new Qt.L(n,1)),this._diffEditor.revealPosition(new Qt.L(n,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let n=this._getCurrentFocusedRow();return n?n.previousElementSibling?n.previousElementSibling:n:this._getFirstRow()}_getNextRow(){let n=this._getCurrentFocusedRow();return n?n.nextElementSibling?n.nextElementSibling:n:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let n=document.activeElement;return n&&/diff-review-row/.test(n.className)?n:null}_goToRow(n,g){let M=this._getCurrentFocusedRow();n.tabIndex=0,n.focus(),M&&M!==n&&(M.tabIndex=-1);let Z=g?g==="next"?M==null?void 0:M.nextElementSibling:M==null?void 0:M.previousElementSibling:M;Z!=null&&Z.classList.contains("line-insert")?this._audioCueService.playAudioCue(h.y$.diffLineInserted,!0):Z!=null&&Z.classList.contains("line-delete")&&this._audioCueService.playAudioCue(h.y$.diffLineDeleted,!0),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(n,g,M){this._width=g,this.shadow.setTop(n-6),this.shadow.setWidth(g),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(n),this.domNode.setWidth(g),this.domNode.setHeight(M),this._content.setHeight(M),this._content.setWidth(g),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){let n=this._diffEditor.getLineChanges();if(!n||n.length===0)return[];let g=this._diffEditor.getOriginalEditor().getModel(),M=this._diffEditor.getModifiedEditor().getModel();return g&&M?Es._mergeAdjacent(n,g.getLineCount(),M.getLineCount()):[]}static _mergeAdjacent(n,g,M){if(!n||n.length===0)return[];let Z=[],ae=0;for(let He=0,Je=n.length;He<Je;He++){let vt=n[He],Pt=vt.originalStartLineNumber,Bt=vt.originalEndLineNumber,ni=vt.modifiedStartLineNumber,Ci=vt.modifiedEndLineNumber,Fi=[],Yi=0;{let an=Bt===0?Pt:Pt-1,Gi=Ci===0?ni:ni-1,nn=1,ln=1;if(He>0){let Ji=n[He-1];nn=Ji.originalEndLineNumber===0?Ji.originalStartLineNumber+1:Ji.originalEndLineNumber+1,ln=Ji.modifiedEndLineNumber===0?Ji.modifiedStartLineNumber+1:Ji.modifiedEndLineNumber+1}let $i=an-3+1,Qi=Gi-3+1;if($i<nn){let Ji=nn-$i;$i+=Ji,Qi+=Ji}if(Qi<ln){let Ji=ln-Qi;$i+=Ji,Qi+=Ji}Fi[Yi++]=new Kt($i,an,Qi,Gi)}Bt!==0&&(Fi[Yi++]=new Kt(Pt,Bt,0,0)),Ci!==0&&(Fi[Yi++]=new Kt(0,0,ni,Ci));{let an=Bt===0?Pt+1:Bt+1,Gi=Ci===0?ni+1:Ci+1,nn=g,ln=M;if(He+1<Je){let Ji=n[He+1];nn=Ji.originalEndLineNumber===0?Ji.originalStartLineNumber:Ji.originalStartLineNumber-1,ln=Ji.modifiedEndLineNumber===0?Ji.modifiedStartLineNumber:Ji.modifiedStartLineNumber-1}let $i=an+3-1,Qi=Gi+3-1;if($i>nn){let Ji=nn-$i;$i+=Ji,Qi+=Ji}if(Qi>ln){let Ji=ln-Qi;$i+=Ji,Qi+=Ji}Fi[Yi++]=new Kt(an,$i,Gi,Qi)}Z[ae++]=new pi(Fi)}let ge=Z[0].entries,De=[],ze=0;for(let He=1,Je=Z.length;He<Je;He++){let vt=Z[He].entries,Pt=ge[ge.length-1],Bt=vt[0];Pt.getType()===0&&Bt.getType()===0&&Bt.originalLineStart<=Pt.originalLineEnd?(ge[ge.length-1]=new Kt(Pt.originalLineStart,Bt.originalLineEnd,Pt.modifiedLineStart,Bt.modifiedLineEnd),ge=ge.concat(vt.slice(1))):(De[ze++]=new pi(ge),ge=vt)}return De[ze++]=new pi(ge),De}_findDiffIndex(n){let g=n.lineNumber;for(let M=0,Z=this._diffs.length;M<Z;M++){let ae=this._diffs[M].entries;if(g<=ae[ae.length-1].modifiedLineEnd)return M}return 0}_render(){let n=this._diffEditor.getOriginalEditor().getOptions(),g=this._diffEditor.getModifiedEditor().getOptions(),M=this._diffEditor.getOriginalEditor().getModel(),Z=this._diffEditor.getModifiedEditor().getModel(),ae=M.getOptions(),ge=Z.getOptions();if(!this._isVisible||!M||!Z)return te.PO(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});let De=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[De]===this._currentDiff)return;this._currentDiff=this._diffs[De];let ze=this._diffs[De].entries,He=document.createElement("div");He.className="diff-review-table",He.setAttribute("role","list"),He.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),(0,We.N)(He,g.get(48));let Je=0,vt=0,Pt=0,Bt=0;for(let Qi=0,Ji=ze.length;Qi<Ji;Qi++){let Oi=ze[Qi],In=Oi.originalLineStart,Mi=Oi.originalLineEnd,on=Oi.modifiedLineStart,Cn=Oi.modifiedLineEnd;In!==0&&(Je===0||In<Je)&&(Je=In),Mi!==0&&(vt===0||Mi>vt)&&(vt=Mi),on!==0&&(Pt===0||on<Pt)&&(Pt=on),Cn!==0&&(Bt===0||Cn>Bt)&&(Bt=Cn)}let ni=document.createElement("div");ni.className="diff-review-row";let Ci=document.createElement("div");Ci.className="diff-review-cell diff-review-summary";let Fi=vt-Je+1,Yi=Bt-Pt+1;Ci.appendChild(document.createTextNode(`${De+1}/${this._diffs.length}: @@ -${Je},${Fi} +${Pt},${Yi} @@`)),ni.setAttribute("data-line",String(Pt));let an=Qi=>Qi===0?Qe.NC("no_lines_changed","no lines changed"):Qi===1?Qe.NC("one_line_changed","1 line changed"):Qe.NC("more_lines_changed","{0} lines changed",Qi),Gi=an(Fi),nn=an(Yi);ni.setAttribute("aria-label",Qe.NC({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",De+1,this._diffs.length,Je,Gi,Pt,nn)),ni.appendChild(Ci),ni.setAttribute("role","listitem"),He.appendChild(ni);let ln=g.get(64),$i=Pt;for(let Qi=0,Ji=ze.length;Qi<Ji;Qi++){let Oi=ze[Qi];Es._renderSection(He,Oi,$i,ln,this._width,n,M,ae,g,Z,ge,this._languageService.languageIdCodec),Oi.modifiedLineStart!==0&&($i=Oi.modifiedLineEnd)}te.PO(this._content.domNode),this._content.domNode.appendChild(He),this.scrollbar.scanDomNode()}static _renderSection(n,g,M,Z,ae,ge,De,ze,He,Je,vt,Pt){let Bt=g.getType(),ni="diff-review-row",Ci="",Fi=null;switch(Bt){case 1:ni="diff-review-row line-insert",Ci=" char-insert",Fi=li;break;case 2:ni="diff-review-row line-delete",Ci=" char-delete",Fi=Wi}let Yi=g.originalLineStart,an=g.originalLineEnd,Gi=g.modifiedLineStart,nn=g.modifiedLineEnd,ln=Math.max(nn-Gi,an-Yi),$i=ge.get(139),Qi=$i.glyphMarginWidth+$i.lineNumbersWidth,Ji=He.get(139),Oi=10+Ji.glyphMarginWidth+Ji.lineNumbersWidth;for(let In=0;In<=ln;In++){let Mi=Yi===0?0:Yi+In,on=Gi===0?0:Gi+In,Cn=document.createElement("div");Cn.style.minWidth=ae+"px",Cn.className=ni,Cn.setAttribute("role","listitem"),on!==0&&(M=on),Cn.setAttribute("data-line",String(M));let Sn=document.createElement("div");Sn.className="diff-review-cell",Sn.style.height=`${Z}px`,Cn.appendChild(Sn);let Nn=document.createElement("span");Nn.style.width=Qi+"px",Nn.style.minWidth=Qi+"px",Nn.className="diff-review-line-number"+Ci,Mi!==0?Nn.appendChild(document.createTextNode(String(Mi))):Nn.innerText="\xA0",Sn.appendChild(Nn);let ro=document.createElement("span");ro.style.width=Oi+"px",ro.style.minWidth=Oi+"px",ro.style.paddingRight="10px",ro.className="diff-review-line-number"+Ci,on!==0?ro.appendChild(document.createTextNode(String(on))):ro.innerText="\xA0",Sn.appendChild(ro);let fo=document.createElement("span");if(fo.className="diff-review-spacer",Fi){let Lo=document.createElement("span");Lo.className=mi.k.asClassName(Fi),Lo.innerText="\xA0\xA0",fo.appendChild(Lo)}else fo.innerText="\xA0\xA0";let ao;if(Sn.appendChild(fo),on!==0){let Lo=this._renderLine(Je,He,vt.tabSize,on,Pt);Es._ttPolicy&&(Lo=Es._ttPolicy.createHTML(Lo)),Sn.insertAdjacentHTML("beforeend",Lo),ao=Je.getLineContent(on)}else{let Lo=this._renderLine(De,ge,ze.tabSize,Mi,Pt);Es._ttPolicy&&(Lo=Es._ttPolicy.createHTML(Lo)),Sn.insertAdjacentHTML("beforeend",Lo),ao=De.getLineContent(Mi)}ao.length===0&&(ao=Qe.NC("blankLine","blank"));let Co="";switch(Bt){case 0:Co=Mi===on?Qe.NC({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",ao,Mi):Qe.NC("equalLine","{0} original line {1} modified line {2}",ao,Mi,on);break;case 1:Co=Qe.NC("insertLine","+ {0} modified line {1}",ao,on);break;case 2:Co=Qe.NC("deleteLine","- {0} original line {1}",ao,Mi)}Cn.setAttribute("aria-label",Co),n.appendChild(Cn)}}static _renderLine(n,g,M,Z,ae){let ge=n.getLineContent(Z),De=g.get(48),ze=T.A.createEmpty(ge,ae),He=W.wA.isBasicASCII(ge,n.mightContainNonBasicASCII()),Je=W.wA.containsRTL(ge,He,n.mightContainRTL());return(0,C.tF)(new C.IJ(De.isMonospace&&!g.get(31),De.canUseHalfwidthRightwardsArrow,ge,!1,He,Je,0,ze,[],M,0,De.spaceWidth,De.middotWidth,De.wsmiddotWidth,g.get(112),g.get(94),g.get(89),g.get(49)!==m.n0.OFF,null)).html}};Xi._ttPolicy=(Ae=window.trustedTypes)===null||Ae===void 0?void 0:Ae.createPolicy("diffReview",{createHTML:G=>G}),Xi=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([ct(1,k.O),ct(2,h.e7),ct(3,q.Ui)],Xi);class en extends Ye.R6{constructor(){super({id:"editor.action.diffReview.next",label:Qe.NC("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:At.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(n,g){let M=tn(n);M==null||M.diffReviewNext()}}class rn extends Ye.R6{constructor(){super({id:"editor.action.diffReview.prev",label:Qe.NC("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:At.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(n,g){let M=tn(n);M==null||M.diffReviewPrev()}}function tn(G){let n=G.get(x.$),g=n.listDiffEditors(),M=n.getActiveCodeEditor();if(!M)return null;for(let Z=0,ae=g.length;Z<ae;Z++){let ge=g[Z];if(ge.getModifiedEditor().getId()===M.getId()||ge.getOriginalEditor().getId()===M.getId())return ge}return null}(0,Ye.Qr)(en),(0,Ye.Qr)(rn);var yn=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};class sn extends u.JT{get visibility(){return this._visibility}set visibility(n){this._visibility!==n&&(this._visibility=n,this._diffActions.style.visibility=n?"visible":"hidden")}constructor(n,g,M,Z,ae,ge){super(),this._viewZoneId=n,this._marginDomNode=g,this.editor=M,this.diff=Z,this._contextMenuService=ae,this._clipboardService=ge,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=mi.k.asClassName(me.l.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";let De=M.getOption(64),ze=M.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${De}px`,this._diffActions.style.lineHeight=`${De}px`,this._marginDomNode.appendChild(this._diffActions);let He=[],Je=Z.modifiedEndLineNumber===0;He.push(new xt.aU("diff.clipboard.copyDeletedContent",Je?Z.originalEndLineNumber>Z.modifiedStartLineNumber?Qe.NC("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):Qe.NC("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):Z.originalEndLineNumber>Z.modifiedStartLineNumber?Qe.NC("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):Qe.NC("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>yn(this,void 0,void 0,function*(){let ni=new o.e(Z.originalStartLineNumber,1,Z.originalEndLineNumber+1,1),Ci=Z.originalModel.getValueInRange(ni);yield this._clipboardService.writeText(Ci)})));let vt,Pt=0;Z.originalEndLineNumber>Z.modifiedStartLineNumber&&(vt=new xt.aU("diff.clipboard.copyDeletedLineContent",Je?Qe.NC("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",Z.originalStartLineNumber):Qe.NC("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",Z.originalStartLineNumber),void 0,!0,()=>yn(this,void 0,void 0,function*(){let ni=Z.originalModel.getLineContent(Z.originalStartLineNumber+Pt);if(ni===""){let Ci=Z.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(Ci===0?`
`:`\r
`)}else yield this._clipboardService.writeText(ni)})),He.push(vt)),M.getOption(87)||He.push(new xt.aU("diff.inline.revertChange",Qe.NC("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>yn(this,void 0,void 0,function*(){let ni=new o.e(Z.originalStartLineNumber,1,Z.originalEndLineNumber,Z.originalModel.getLineMaxColumn(Z.originalEndLineNumber)),Ci=Z.originalModel.getValueInRange(ni);if(Z.modifiedEndLineNumber===0){let Fi=M.getModel().getLineMaxColumn(Z.modifiedStartLineNumber);M.executeEdits("diffEditor",[{range:new o.e(Z.modifiedStartLineNumber,Fi,Z.modifiedStartLineNumber,Fi),text:ze+Ci}])}else{let Fi=M.getModel().getLineMaxColumn(Z.modifiedEndLineNumber);M.executeEdits("diffEditor",[{range:new o.e(Z.modifiedStartLineNumber,1,Z.modifiedEndLineNumber,Fi),text:Ci}])}})));let Bt=(ni,Ci)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:ni,y:Ci}),getActions:()=>(vt&&(vt.label=Je?Qe.NC("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",Z.originalStartLineNumber+Pt):Qe.NC("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",Z.originalStartLineNumber+Pt)),He),autoSelectFirstItem:!0})};this._register(te.mu(this._diffActions,"mousedown",ni=>{let{top:Ci,height:Fi}=te.i(this._diffActions),Yi=Math.floor(De/3);ni.preventDefault(),Bt(ni.posx,Ci+Fi+Yi)})),this._register(M.onMouseMove(ni=>{(ni.target.type===8||ni.target.type===5)&&ni.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,Pt=this._updateLightBulbPosition(this._marginDomNode,ni.event.browserEvent.y,De)):this.visibility=!1})),this._register(M.onMouseDown(ni=>{!ni.event.rightButton||ni.target.type!==8&&ni.target.type!==5||ni.target.detail.viewZoneId===this._viewZoneId&&(ni.event.preventDefault(),Pt=this._updateLightBulbPosition(this._marginDomNode,ni.event.browserEvent.y,De),Bt(ni.event.posx,ni.event.posy+De))}))}_updateLightBulbPosition(n,g,M){let{top:Z}=te.i(n),ae=g-Z,ge=Math.floor(ae/M),De=ge*M;if(this._diffActions.style.top=`${De}px`,this.diff.viewLineCounts){let ze=0;for(let He=0;He<this.diff.viewLineCounts.length;He++)if(ze+=this.diff.viewLineCounts[He],ge<ze)return He}return ge}}var ci=t(4013),Xt=t(4319),kt=t(829),It=function(G,n){return function(g,M){n(g,M,G)}};let ft=class{constructor(G,n,g){this.editorWorkerService=n,this.telemetryService=g,this.onDidChangeEventEmitter=new f.Q5,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(G)}dispose(){var G;(G=this.diffAlgorithmOnDidChangeSubscription)===null||G===void 0||G.dispose()}computeDiff(G,n,g){var M,Z,ae,ge,De;return Z=this,ae=void 0,De=function*(){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(G,n,g);let ze=ci.G.create(!0),He=yield this.editorWorkerService.computeDiff(G.uri,n.uri,g,this.diffAlgorithm),Je=ze.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:Je,timedOut:(M=He==null?void 0:He.quitEarly)===null||M===void 0||M}),!He)throw new Error("no diff result available");return He},new((ge=void 0)||(ge=Promise))(function(ze,He){function Je(Bt){try{Pt(De.next(Bt))}catch(ni){He(ni)}}function vt(Bt){try{Pt(De.throw(Bt))}catch(ni){He(ni)}}function Pt(Bt){var ni;Bt.done?ze(Bt.value):(ni=Bt.value,ni instanceof ge?ni:new ge(function(Ci){Ci(ni)})).then(Je,vt)}Pt((De=De.apply(Z,ae||[])).next())})}setOptions(G){var n;let g=!1;G.diffAlgorithm&&this.diffAlgorithm!==G.diffAlgorithm&&((n=this.diffAlgorithmOnDidChangeSubscription)===null||n===void 0||n.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=G.diffAlgorithm,typeof G.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=G.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),g=!0),g&&this.onDidChangeEventEmitter.fire()}};ft=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([It(1,Xt.p),It(2,kt.b)],ft);var Mt,jt=t(72),di=t(3654),fi=t(2550),Si=t(665),Ri=t(4972),Wt=t(5606),Te=t(2065),Ze=t(972),rt=t(9422),yt=t(535),Nt=t(3910),dt=t(7781),Re=t(9365),qe=function(G,n){return function(g,M){n(g,M,G)}};class Ue{constructor(n,g){this._contextMenuService=n,this._clipboardService=g,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(n){return n.filter(g=>!this._zonesMap[String(g.id)])}clean(n){this._zones.length>0&&n.changeViewZones(g=>{for(let M of this._zones)g.removeZone(M)}),this._zones=[],this._zonesMap={},n.changeDecorations(g=>{this._decorations=g.deltaDecorations(this._decorations,[])})}apply(n,g,M,Z){let ae=Z?tt.Z.capture(n):null;n.changeViewZones(ge=>{var De;for(let ze of this._zones)ge.removeZone(ze);for(let ze of this._inlineDiffMargins)ze.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let ze=0,He=M.zones.length;ze<He;ze++){let Je=M.zones[ze];Je.suppressMouseDown=!0;let vt=ge.addZone(Je);this._zones.push(vt),this._zonesMap[String(vt)]=!0,M.zones[ze].diff&&Je.marginDomNode&&(Je.suppressMouseDown=!1,((De=M.zones[ze].diff)===null||De===void 0?void 0:De.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new sn(vt,Je.marginDomNode,n,M.zones[ze].diff,this._contextMenuService,this._clipboardService)))}}),ae==null||ae.restore(n),n.changeDecorations(ge=>{this._decorations=ge.deltaDecorations(this._decorations,M.decorations)}),g==null||g.setZones(M.overviewZones)}}let Pe=0,Xe=(0,Lt.q5)("diff-insert",me.l.add,Qe.NC("diffInsertIcon","Line decoration for inserts in the diff editor.")),$e=(0,Lt.q5)("diff-remove",me.l.remove,Qe.NC("diffRemoveIcon","Line decoration for removals in the diff editor.")),ot=(Mt=window.trustedTypes)===null||Mt===void 0?void 0:Mt.createPolicy("diffEditorWidget",{createHTML:G=>G}),Tt=Qe.NC("diff-aria-navigation-tip"," use Shift + F7 to navigate changes"),Ot=class lo extends u.JT{constructor(n,g,M,Z,ae,ge,De,ze,He,Je,vt){super(),this._editorProgressService=vt,this._onDidDispose=this._register(new f.Q5),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModel=this._register(new f.Q5),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidUpdateDiff=this._register(new f.Q5),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new f.Q5),this._lastOriginalWarning=null,this._lastModifiedWarning=null,De.willCreateDiffEditor(),this._documentDiffProvider=this._register(ge.createInstance(ft,g)),this._register(this._documentDiffProvider.onDidChange(Bt=>this._beginUpdateDecorationsSoon())),this._codeEditorService=De,this._contextKeyService=this._register(ae.createScoped(n)),this._instantiationService=ge.createChild(new Ze.y([At.i6,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=ze,this._notificationService=He,this._id=++Pe,this._state=0,this._updatingDiffProgress=null,this._domElement=n,g=g||{},this._options=ei(g,{enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1}),g.isInEmbeddedEditor!==void 0?this._contextKeyService.createKey("isInEmbeddedDiffEditor",g.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new ee.pY(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=lo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=(0,Le.X)(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(te.mu(this._overviewDomElement,te.tw.POINTER_DOWN,Bt=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(Bt)})),this._register(te.nm(this._overviewDomElement,te.tw.MOUSE_WHEEL,Bt=>{this._modifiedEditor.delegateScrollFromMouseWheelEvent(Bt)},{passive:!1})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new Ue(Je,Z),this._modifiedEditorState=new Ue(Je,Z),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new Ve.I(this._containerDomElement,g.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),g.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(g,M.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(g,M.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=ge.createInstance(Xi,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new si(this._createDataSource(),this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio)):this._setStrategy(new _i(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(ze.onDidColorThemeChange(Bt=>{this._strategy&&this._strategy.applyColors(Bt)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=lo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));let Pt=Ye.Uc.getDiffEditorContributions();for(let Bt of Pt)try{this._register(ge.createInstance(Bt.ctor,this))}catch(ni){(0,xe.dL)(ni)}this._codeEditorService.addDiffEditor(this)}_setState(n){this._state!==n&&(this._state=n,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(n,g){let M="monaco-diff-editor monaco-editor-background ";return g&&(M+="side-by-side "),M+=(0,dt.m6)(n.type),M}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(v.ok(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(n,g){let M=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(n),g);this._register(M.onDidScrollChange(ae=>{this._isHandlingScrollEvent||(ae.scrollTopChanged||ae.scrollLeftChanged||ae.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:ae.scrollLeft,scrollTop:ae.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(M.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(M.onDidChangeConfiguration(ae=>{M.getModel()&&(ae.hasChanged(48)&&this._updateDecorationsRunner.schedule(),ae.hasChanged(140)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(M.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(M.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));let Z=this._contextKeyService.createKey("isInDiffLeftEditor",M.hasWidgetFocus());return this._register(M.onDidFocusEditorWidget(()=>Z.set(!0))),this._register(M.onDidBlurEditorWidget(()=>Z.set(!1))),this._register(M.onDidContentSizeChange(ae=>{let ge=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+lo.ONE_OVERVIEW_WIDTH,De=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:De,contentWidth:ge,contentHeightChanged:ae.contentHeightChanged,contentWidthChanged:ae.contentWidthChanged})})),M}_createRightHandSideEditor(n,g){let M=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(n),g);this._register(M.onDidScrollChange(ae=>{this._isHandlingScrollEvent||(ae.scrollTopChanged||ae.scrollLeftChanged||ae.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:ae.scrollLeft,scrollTop:ae.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(M.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(M.onDidChangeConfiguration(ae=>{M.getModel()&&(ae.hasChanged(48)&&this._updateDecorationsRunner.schedule(),ae.hasChanged(140)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(M.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(M.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(M.onDidChangeModelOptions(ae=>{ae.tabSize&&this._updateDecorationsRunner.schedule()}));let Z=this._contextKeyService.createKey("isInDiffRightEditor",M.hasWidgetFocus());return this._register(M.onDidFocusEditorWidget(()=>Z.set(!0))),this._register(M.onDidBlurEditorWidget(()=>Z.set(!1))),this._register(M.onDidContentSizeChange(ae=>{let ge=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+lo.ONE_OVERVIEW_WIDTH,De=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:De,contentWidth:ge,contentHeightChanged:ae.contentHeightChanged,contentWidthChanged:ae.contentWidthChanged})})),this._register(M.onMouseDown(ae=>{var ge,De;if(!ae.event.rightButton&&ae.target.position&&(!((ge=ae.target.element)===null||ge===void 0)&&ge.className.includes("arrow-revert-change"))){let ze=ae.target.position.lineNumber,He=ae.target,Je=(De=this._diffComputationResult)===null||De===void 0?void 0:De.changes.find(vt=>(He==null?void 0:He.detail.afterLineNumber)===vt.modifiedStartLineNumber||vt.modifiedEndLineNumber>0&&vt.modifiedStartLineNumber===ze);return Je&&this.revertChange(Je),ae.event.stopPropagation(),void this._updateDecorations()}})),M}revertChange(n){let g=this._modifiedEditor,M=this._originalEditor.getModel(),Z=this._modifiedEditor.getModel();if(!M||!Z||!g)return;let ae=n.originalEndLineNumber>0?new o.e(n.originalStartLineNumber,1,n.originalEndLineNumber,M.getLineMaxColumn(n.originalEndLineNumber)):null,ge=ae?M.getValueInRange(ae):null,De=n.modifiedEndLineNumber>0?new o.e(n.modifiedStartLineNumber,1,n.modifiedEndLineNumber,Z.getLineMaxColumn(n.modifiedEndLineNumber)):null,ze=Z.getEOL();if(n.originalEndLineNumber===0&&De){let He=De;n.modifiedStartLineNumber>1?He=De.setStartPosition(n.modifiedStartLineNumber-1,Z.getLineMaxColumn(n.modifiedStartLineNumber-1)):n.modifiedEndLineNumber<Z.getLineCount()&&(He=De.setEndPosition(n.modifiedEndLineNumber+1,1)),g.executeEdits("diffEditor",[{range:He,text:""}])}else if(n.modifiedEndLineNumber===0&&ge!==null){let He=n.modifiedStartLineNumber<Z.getLineCount()?new Qt.L(n.modifiedStartLineNumber+1,1):new Qt.L(n.modifiedStartLineNumber,Z.getLineMaxColumn(n.modifiedStartLineNumber));g.executeEdits("diffEditor",[{range:o.e.fromPositions(He,He),text:n.modifiedStartLineNumber<Z.getLineCount()?ge+ze:ze+ge}])}else De&&ge!==null&&g.executeEdits("diffEditor",[{range:De,text:ge}])}_createInnerEditor(n,g,M,Z){return n.createInstance(_e.Gm,g,M,Z)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return a.g.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(n){let g=ei(n,this._options),M=(ae=g,{enableSplitViewResizing:(Z=this._options).enableSplitViewResizing!==ae.enableSplitViewResizing,renderSideBySide:Z.renderSideBySide!==ae.renderSideBySide,renderMarginRevertIcon:Z.renderMarginRevertIcon!==ae.renderMarginRevertIcon,maxComputationTime:Z.maxComputationTime!==ae.maxComputationTime,maxFileSize:Z.maxFileSize!==ae.maxFileSize,ignoreTrimWhitespace:Z.ignoreTrimWhitespace!==ae.ignoreTrimWhitespace,renderIndicators:Z.renderIndicators!==ae.renderIndicators,originalEditable:Z.originalEditable!==ae.originalEditable,diffCodeLens:Z.diffCodeLens!==ae.diffCodeLens,renderOverviewRuler:Z.renderOverviewRuler!==ae.renderOverviewRuler,diffWordWrap:Z.diffWordWrap!==ae.diffWordWrap,diffAlgorithm:Z.diffAlgorithm!==ae.diffAlgorithm,accessibilityVerbose:Z.accessibilityVerbose!==ae.accessibilityVerbose});var Z,ae;this._options=g;let ge=M.ignoreTrimWhitespace||M.renderIndicators||M.renderMarginRevertIcon,De=this._isVisible&&(M.maxComputationTime||M.maxFileSize);this._documentDiffProvider.setOptions(g),ge?this._beginUpdateDecorations():De&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(n)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(n)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio),M.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new si(this._createDataSource(),this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio)):this._setStrategy(new _i(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=lo._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),M.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(n){if(n&&(!n.original||!n.modified))throw new Error(n.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(n?n.original:null),this._modifiedEditor.setModel(n?n.modified:null),this._updateDecorationsRunner.cancel(),n&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),n&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport(),this._onDidChangeModel.fire()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(n){return this._modifiedEditor.getVisibleColumnFromPosition(n)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(n,g="api"){this._modifiedEditor.setPosition(n,g)}revealLine(n,g=0){this._modifiedEditor.revealLine(n,g)}revealLineInCenter(n,g=0){this._modifiedEditor.revealLineInCenter(n,g)}revealLineInCenterIfOutsideViewport(n,g=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(n,g)}revealLineNearTop(n,g=0){this._modifiedEditor.revealLineNearTop(n,g)}revealPosition(n,g=0){this._modifiedEditor.revealPosition(n,g)}revealPositionInCenter(n,g=0){this._modifiedEditor.revealPositionInCenter(n,g)}revealPositionInCenterIfOutsideViewport(n,g=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(n,g)}revealPositionNearTop(n,g=0){this._modifiedEditor.revealPositionNearTop(n,g)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(n,g="api"){this._modifiedEditor.setSelection(n,g)}setSelections(n,g="api"){this._modifiedEditor.setSelections(n,g)}revealLines(n,g,M=0){this._modifiedEditor.revealLines(n,g,M)}revealLinesInCenter(n,g,M=0){this._modifiedEditor.revealLinesInCenter(n,g,M)}revealLinesInCenterIfOutsideViewport(n,g,M=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(n,g,M)}revealLinesNearTop(n,g,M=0){this._modifiedEditor.revealLinesNearTop(n,g,M)}revealRange(n,g=0,M=!1,Z=!0){this._modifiedEditor.revealRange(n,g,M,Z)}revealRangeInCenter(n,g=0){this._modifiedEditor.revealRangeInCenter(n,g)}revealRangeInCenterIfOutsideViewport(n,g=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(n,g)}revealRangeNearTop(n,g=0){this._modifiedEditor.revealRangeNearTop(n,g)}revealRangeNearTopIfOutsideViewport(n,g=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(n,g)}revealRangeAtTop(n,g=0){this._modifiedEditor.revealRangeAtTop(n,g)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}restoreViewState(n){if(n&&n.original&&n.modified){let g=n;this._originalEditor.restoreViewState(g.original),this._modifiedEditor.restoreViewState(g.modified)}}layout(n){this._elementSizeObserver.observe(n)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(n,g,M){this._modifiedEditor.trigger(n,g,M)}createDecorationsCollection(n){return this._modifiedEditor.createDecorationsCollection(n)}changeDecorations(n){return this._modifiedEditor.changeDecorations(n)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;let n=this._elementSizeObserver.getHeight(),g=this._getReviewHeight(),M=lo.ENTIRE_DIFF_OVERVIEW_WIDTH-2*lo.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:lo.ONE_OVERVIEW_WIDTH,right:M+lo.ONE_OVERVIEW_WIDTH,height:n-g}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:lo.ONE_OVERVIEW_WIDTH,height:n-g}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),lo.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(n,g){return!n&&!g||!(!n||!g)&&n.toString()===g.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1);let n=this._originalEditor.getModel(),g=this._modifiedEditor.getModel();if(!n||!g)return;this._diffComputationToken++;let M=this._diffComputationToken,Z=1024*this._options.maxFileSize*1024,ae=ge=>{let De=ge.getValueLength();return Z===0||De<=Z};ae(n)&&ae(g)?(this._setState(1),this._documentDiffProvider.computeDiff(n,g,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace,maxComputationTimeMs:this._options.maxComputationTime}).then(ge=>{M===this._diffComputationToken&&n===this._originalEditor.getModel()&&g===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult={identical:ge.identical,quitEarly:ge.quitEarly,changes2:ge.changes,changes:ge.changes.map(De=>{let ze,He,Je,vt,Pt=De.innerChanges;return De.originalRange.isEmpty?(ze=De.originalRange.startLineNumber-1,He=0,Pt=void 0):(ze=De.originalRange.startLineNumber,He=De.originalRange.endLineNumberExclusive-1),De.modifiedRange.isEmpty?(Je=De.modifiedRange.startLineNumber-1,vt=0,Pt=void 0):(Je=De.modifiedRange.startLineNumber,vt=De.modifiedRange.endLineNumberExclusive-1),{originalStartLineNumber:ze,originalEndLineNumber:He,modifiedStartLineNumber:Je,modifiedEndLineNumber:vt,charChanges:Pt==null?void 0:Pt.map(Bt=>({originalStartLineNumber:Bt.originalRange.startLineNumber,originalStartColumn:Bt.originalRange.startColumn,originalEndLineNumber:Bt.originalRange.endLineNumber,originalEndColumn:Bt.originalRange.endColumn,modifiedStartLineNumber:Bt.modifiedRange.startLineNumber,modifiedStartColumn:Bt.modifiedRange.startColumn,modifiedEndLineNumber:Bt.modifiedRange.endLineNumber,modifiedEndColumn:Bt.modifiedRange.endColumn}))}})},this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},ge=>{M===this._diffComputationToken&&n===this._originalEditor.getModel()&&g===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})):lo._equals(n.uri,this._lastOriginalWarning)&&lo._equals(g.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=n.uri,this._lastModifiedWarning=g.uri,this._notificationService.warn(Qe.NC("diff.tooLarge","Cannot compare files because one file is too large.")))}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;let n=this._diffComputationResult?this._diffComputationResult.changes:[],g=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),M=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),Z=this._options.renderMarginRevertIcon&&!this._modifiedEditor.getOption(87),ae=this._strategy.getEditorsDiffDecorations(n,this._options.ignoreTrimWhitespace,this._options.renderIndicators,Z,g,M);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,ae.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,ae.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(n){let g=Object.assign({},n);return g.inDiffEditor=!0,g.automaticLayout=!1,g.scrollbar=Object.assign({},g.scrollbar||{}),g.scrollbar.vertical="visible",g.folding=!1,g.codeLens=this._options.diffCodeLens,g.fixedOverflowWidgets=!0,g.minimap=Object.assign({},g.minimap||{}),g.minimap.enabled=!1,g}_adjustOptionsForLeftHandSide(n){let g=this._adjustOptionsForSubEditor(n);return this._options.renderSideBySide?g.wordWrapOverride1=this._options.diffWordWrap:(g.wordWrapOverride1="off",g.wordWrapOverride2="off"),n.originalAriaLabel&&(g.ariaLabel=n.originalAriaLabel),this._updateAriaLabel(g),g.readOnly=!this._options.originalEditable,g.dropIntoEditor={enabled:!g.readOnly},g.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},g),{dimension:{height:0,width:0}})}_updateAriaLabel(n){let g=n.ariaLabel;this._options.accessibilityVerbose?g+=Tt:g&&(g=g.replaceAll(Tt,"")),n.ariaLabel=g}_adjustOptionsForRightHandSide(n){let g=this._adjustOptionsForSubEditor(n);return n.modifiedAriaLabel&&(g.ariaLabel=n.modifiedAriaLabel),this._updateAriaLabel(g),g.wordWrapOverride1=this._options.diffWordWrap,g.revealHorizontalRightPadding=m.BH.revealHorizontalRightPadding.defaultValue+lo.ENTIRE_DIFF_OVERVIEW_WIDTH,g.scrollbar.verticalHasArrows=!1,g.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},g),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){let n=this._elementSizeObserver.getWidth(),g=this._elementSizeObserver.getHeight(),M=this._getReviewHeight(),Z=this._strategy.layout();this._originalDomNode.style.width=Z+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=n-Z+"px",this._modifiedDomNode.style.left=Z+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=g-M+"px",this._overviewDomElement.style.width=lo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=n-lo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(lo.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:Z,height:g-M}),this._modifiedEditor.layout({width:n-Z-(this._options.renderOverviewRuler?lo.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:g-M}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(g-M,n,M),this._layoutOverviewViewport()}_layoutOverviewViewport(){let n=this._computeOverviewViewport();n?(this._overviewViewportDomElement.setTop(n.top),this._overviewViewportDomElement.setHeight(n.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){let n=this._modifiedEditor.getLayoutInfo();if(!n)return null;let g=this._modifiedEditor.getScrollTop(),M=this._modifiedEditor.getScrollHeight(),Z=Math.max(0,n.height),ae=Math.max(0,Z-0),ge=M>0?ae/M:0;return{height:Math.max(0,Math.floor(n.height*ge)),top:Math.floor(g*ge)}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(n){var g;(g=this._strategy)===null||g===void 0||g.dispose(),this._strategy=n,this._boundarySashes&&n.setBoundarySashes(this._boundarySashes),n.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(n,g){let M=this._diffComputationResult?this._diffComputationResult.changes:[];if(M.length===0||n<g(M[0]))return null;let Z=0,ae=M.length-1;for(;Z<ae;){let ge=Math.floor((Z+ae)/2),De=g(M[ge]),ze=ge+1<=ae?g(M[ge+1]):1073741824;n<De?ae=ge-1:n>=ze?Z=ge+1:(Z=ge,ae=ge)}return M[Z]}_getEquivalentLineForOriginalLineNumber(n){let g=this._getLineChangeAtOrBeforeLineNumber(n,ze=>ze.originalStartLineNumber);if(!g)return n;let M=g.originalStartLineNumber+(g.originalEndLineNumber>0?-1:0),Z=g.modifiedStartLineNumber+(g.modifiedEndLineNumber>0?-1:0),ae=g.originalEndLineNumber>0?g.originalEndLineNumber-g.originalStartLineNumber+1:0,ge=g.modifiedEndLineNumber>0?g.modifiedEndLineNumber-g.modifiedStartLineNumber+1:0,De=n-M;return De<=ae?Z+Math.min(De,ge):Z+ge-ae+De}_getEquivalentLineForModifiedLineNumber(n){let g=this._getLineChangeAtOrBeforeLineNumber(n,ze=>ze.modifiedStartLineNumber);if(!g)return n;let M=g.originalStartLineNumber+(g.originalEndLineNumber>0?-1:0),Z=g.modifiedStartLineNumber+(g.modifiedEndLineNumber>0?-1:0),ae=g.originalEndLineNumber>0?g.originalEndLineNumber-g.originalStartLineNumber+1:0,ge=g.modifiedEndLineNumber>0?g.modifiedEndLineNumber-g.modifiedStartLineNumber+1:0,De=n-Z;return De<=ge?M+Math.min(De,ae):M+ae-ge+De}getDiffLineInformationForOriginal(n){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(n)}:null}getDiffLineInformationForModified(n){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(n)}:null}};Ot.ONE_OVERVIEW_WIDTH=15,Ot.ENTIRE_DIFF_OVERVIEW_WIDTH=30,Ot.UPDATE_DIFF_DECORATIONS_DELAY=200,Ot=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([qe(3,Ri.p),qe(4,At.i6),qe(5,Te.TG),qe(6,x.$),qe(7,dt.XE),qe(8,rt.lT),qe(9,Wt.i),qe(10,yt.ek)],Ot);class ti extends u.JT{constructor(n){super(),this._dataSource=n,this._insertColor=null,this._removeColor=null}applyColors(n){let g=n.getColor(Nt.P6Y)||(n.getColor(Nt.ypS)||Nt.CzK).transparent(2),M=n.getColor(Nt.F9q)||(n.getColor(Nt.P4M)||Nt.keg).transparent(2),Z=!g.equals(this._insertColor)||!M.equals(this._removeColor);return this._insertColor=g,this._removeColor=M,Z}getEditorsDiffDecorations(n,g,M,Z,ae,ge){ge=ge.sort((Je,vt)=>Je.afterLineNumber-vt.afterLineNumber),ae=ae.sort((Je,vt)=>Je.afterLineNumber-vt.afterLineNumber);let De=this._getViewZones(n,ae,ge,M),ze=this._getOriginalEditorDecorations(De,n,g,M),He=this._getModifiedEditorDecorations(De,n,g,M,Z);return{original:{decorations:ze.decorations,overviewZones:ze.overviewZones,zones:De.original},modified:{decorations:He.decorations,overviewZones:He.overviewZones,zones:De.modified}}}setBoundarySashes(n){}}class zt{constructor(n){this._source=n,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Jt{constructor(n,g,M,Z,ae){this._lineChanges=n,this._originalForeignVZ=g,this._modifiedForeignVZ=M,this._originalEditor=Z,this._modifiedEditor=ae}static _getViewLineCount(n,g,M){let Z=n.getModel(),ae=n._getViewModel();if(Z&&ae){let ge=oi(Z,ae,g,M);return ge.endLineNumber-ge.startLineNumber+1}return M-g+1}getViewZones(){let n=this._originalEditor.getOption(64),g=this._modifiedEditor.getOption(64),M=this._originalEditor.getOption(140).wrappingColumn!==-1,Z=this._modifiedEditor.getOption(140).wrappingColumn!==-1,ae=M||Z,ge=this._originalEditor.getModel(),De=this._originalEditor._getViewModel().coordinatesConverter,ze=this._modifiedEditor._getViewModel().coordinatesConverter,He=[],Je=[],vt=0,Pt=0,Bt=0,ni=0,Ci=0,Fi=0,Yi=(Qi,Ji)=>Qi.afterLineNumber-Ji.afterLineNumber,an=(Qi,Ji)=>{if(Ji.domNode===null&&Qi.length>0){let Oi=Qi[Qi.length-1];if(Oi.afterLineNumber===Ji.afterLineNumber&&Oi.domNode===null)return void(Oi.heightInLines+=Ji.heightInLines)}Qi.push(Ji)},Gi=new zt(this._modifiedForeignVZ),nn=new zt(this._originalForeignVZ),ln=1,$i=1;for(let Qi=0,Ji=this._lineChanges.length;Qi<=Ji;Qi++){let Oi=Qi<Ji?this._lineChanges[Qi]:null;Oi!==null?(Bt=Oi.originalStartLineNumber+(Oi.originalEndLineNumber>0?-1:0),ni=Oi.modifiedStartLineNumber+(Oi.modifiedEndLineNumber>0?-1:0),Pt=Oi.originalEndLineNumber>0?Jt._getViewLineCount(this._originalEditor,Oi.originalStartLineNumber,Oi.originalEndLineNumber):0,vt=Oi.modifiedEndLineNumber>0?Jt._getViewLineCount(this._modifiedEditor,Oi.modifiedStartLineNumber,Oi.modifiedEndLineNumber):0,Ci=Math.max(Oi.originalStartLineNumber,Oi.originalEndLineNumber),Fi=Math.max(Oi.modifiedStartLineNumber,Oi.modifiedEndLineNumber)):(Bt+=1e7+Pt,ni+=1e7+vt,Ci=Bt,Fi=ni);let In=[],Mi=[];if(ae){let Sn;Sn=Oi?Oi.originalEndLineNumber>0?Oi.originalStartLineNumber-ln:Oi.modifiedStartLineNumber-$i:ge.getLineCount()-ln+1;for(let Nn=0;Nn<Sn;Nn++){let ro=ln+Nn,fo=$i+Nn,ao=De.getModelLineViewLineCount(ro),Co=ze.getModelLineViewLineCount(fo);ao<Co?In.push({afterLineNumber:ro,heightInLines:Co-ao,domNode:null,marginDomNode:null}):ao>Co&&Mi.push({afterLineNumber:fo,heightInLines:ao-Co,domNode:null,marginDomNode:null})}Oi&&(ln=(Oi.originalEndLineNumber>0?Oi.originalEndLineNumber:Oi.originalStartLineNumber)+1,$i=(Oi.modifiedEndLineNumber>0?Oi.modifiedEndLineNumber:Oi.modifiedStartLineNumber)+1)}for(;Gi.current&&Gi.current.afterLineNumber<=Fi;){let Sn;Sn=Gi.current.afterLineNumber<=ni?Bt-ni+Gi.current.afterLineNumber:Ci;let Nn=null;Oi&&Oi.modifiedStartLineNumber<=Gi.current.afterLineNumber&&Gi.current.afterLineNumber<=Oi.modifiedEndLineNumber&&(Nn=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),In.push({afterLineNumber:Sn,heightInLines:Gi.current.height/g,domNode:null,marginDomNode:Nn}),Gi.advance()}for(;nn.current&&nn.current.afterLineNumber<=Ci;){let Sn;Sn=nn.current.afterLineNumber<=Bt?ni-Bt+nn.current.afterLineNumber:Fi,Mi.push({afterLineNumber:Sn,heightInLines:nn.current.height/n,domNode:null}),nn.advance()}if(Oi!==null&&ri(Oi)){let Sn=this._produceOriginalFromDiff(Oi,Pt,vt);Sn&&In.push(Sn)}if(Oi!==null&&qt(Oi)){let Sn=this._produceModifiedFromDiff(Oi,Pt,vt);Sn&&Mi.push(Sn)}let on=0,Cn=0;for(In=In.sort(Yi),Mi=Mi.sort(Yi);on<In.length&&Cn<Mi.length;){let Sn=In[on],Nn=Mi[Cn],ro=Sn.afterLineNumber-Bt,fo=Nn.afterLineNumber-ni;ro<fo?(an(He,Sn),on++):fo<ro?(an(Je,Nn),Cn++):Sn.shouldNotShrink?(an(He,Sn),on++):Nn.shouldNotShrink?(an(Je,Nn),Cn++):Sn.heightInLines>=Nn.heightInLines?(Sn.heightInLines-=Nn.heightInLines,Cn++):(Nn.heightInLines-=Sn.heightInLines,on++)}for(;on<In.length;)an(He,In[on]),on++;for(;Cn<Mi.length;)an(Je,Mi[Cn]),Cn++}return{original:Jt._ensureDomNodes(He),modified:Jt._ensureDomNodes(Je)}}static _ensureDomNodes(n){return n.map(g=>(g.domNode||(g.domNode=wt()),g))}}function Gt(G,n,g,M,Z){return{range:new o.e(G,n,g,M),options:Z}}let $t={arrowRevertChange:di.qx.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new Re.W5(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(Qe.NC("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+mi.k.asClassName(me.l.arrowRight),zIndex:10001}),charDelete:di.qx.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:di.qx.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:di.qx.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:di.qx.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:di.qx.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:di.qx.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+mi.k.asClassName(Xe),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:di.qx.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:di.qx.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+mi.k.asClassName($e),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:di.qx.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class si extends ti{constructor(n,g,M){super(n),this._disableSash=g===!1,this._defaultRatio=M,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new le.g(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(Z=>this._onSashDrag(Z)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(n,g){this._defaultRatio=g;let M=n===!1;this._disableSash!==M&&(this._disableSash=M,this._sash.state=this._disableSash?0:3)}layout(n=this._sashRatio||this._defaultRatio){let g=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Ot.ENTIRE_DIFF_OVERVIEW_WIDTH:0),M=Math.floor((n||this._defaultRatio)*g),Z=Math.floor(this._defaultRatio*g);return M=this._disableSash?Z:M||Z,g>2*si.MINIMUM_EDITOR_WIDTH?(M<si.MINIMUM_EDITOR_WIDTH&&(M=si.MINIMUM_EDITOR_WIDTH),M>g-si.MINIMUM_EDITOR_WIDTH&&(M=g-si.MINIMUM_EDITOR_WIDTH)):M=Z,this._sashPosition!==M&&(this._sashPosition=M),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(n){let g=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Ot.ENTIRE_DIFF_OVERVIEW_WIDTH:0),M=this.layout((this._startSashPosition+(n.currentX-n.startX))/g);this._sashRatio=M/g,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=this._defaultRatio,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(n){return 0}getVerticalSashLeft(n){return this._sashPosition}getVerticalSashHeight(n){return this._dataSource.getHeight()}setBoundarySashes(n){this._sash.orthogonalEndSash=n.bottom}_getViewZones(n,g,M){let Z=this._dataSource.getOriginalEditor(),ae=this._dataSource.getModifiedEditor();return new ai(n,g,M,Z,ae).getViewZones()}_getOriginalEditorDecorations(n,g,M,Z){let ae=this._dataSource.getOriginalEditor(),ge=String(this._removeColor),De={decorations:[],overviewZones:[]},ze=ae.getModel(),He=ae._getViewModel();for(let Je of g)if(qt(Je)){De.decorations.push({range:new o.e(Je.originalStartLineNumber,1,Je.originalEndLineNumber,1073741824),options:Z?$t.lineDeleteWithSign:$t.lineDelete}),ri(Je)&&Je.charChanges||De.decorations.push(Gt(Je.originalStartLineNumber,1,Je.originalEndLineNumber,1073741824,$t.charDeleteWholeLine));let vt=oi(ze,He,Je.originalStartLineNumber,Je.originalEndLineNumber);if(De.overviewZones.push(new Si.EY(vt.startLineNumber,vt.endLineNumber,0,ge)),Je.charChanges){for(let Pt of Je.charChanges)if(mt(Pt))if(M)for(let Bt=Pt.originalStartLineNumber;Bt<=Pt.originalEndLineNumber;Bt++){let ni,Ci;ni=Bt===Pt.originalStartLineNumber?Pt.originalStartColumn:ze.getLineFirstNonWhitespaceColumn(Bt),Ci=Bt===Pt.originalEndLineNumber?Pt.originalEndColumn:ze.getLineLastNonWhitespaceColumn(Bt),De.decorations.push(Gt(Bt,ni,Bt,Ci,$t.charDelete))}else De.decorations.push(Gt(Pt.originalStartLineNumber,Pt.originalStartColumn,Pt.originalEndLineNumber,Pt.originalEndColumn,$t.charDelete))}}return De}_getModifiedEditorDecorations(n,g,M,Z,ae){let ge=this._dataSource.getModifiedEditor(),De=String(this._insertColor),ze={decorations:[],overviewZones:[]},He=ge.getModel(),Je=ge._getViewModel();for(let vt of g){if(ae)if(vt.modifiedEndLineNumber>0)ze.decorations.push({range:new o.e(vt.modifiedStartLineNumber,1,vt.modifiedStartLineNumber,1),options:$t.arrowRevertChange});else{let Pt=n.modified.find(Bt=>Bt.afterLineNumber===vt.modifiedStartLineNumber);Pt&&(Pt.marginDomNode=Rt())}if(ri(vt)){ze.decorations.push({range:new o.e(vt.modifiedStartLineNumber,1,vt.modifiedEndLineNumber,1073741824),options:Z?$t.lineInsertWithSign:$t.lineInsert}),qt(vt)&&vt.charChanges||ze.decorations.push(Gt(vt.modifiedStartLineNumber,1,vt.modifiedEndLineNumber,1073741824,$t.charInsertWholeLine));let Pt=oi(He,Je,vt.modifiedStartLineNumber,vt.modifiedEndLineNumber);if(ze.overviewZones.push(new Si.EY(Pt.startLineNumber,Pt.endLineNumber,0,De)),vt.charChanges){for(let Bt of vt.charChanges)if(je(Bt))if(M)for(let ni=Bt.modifiedStartLineNumber;ni<=Bt.modifiedEndLineNumber;ni++){let Ci,Fi;Ci=ni===Bt.modifiedStartLineNumber?Bt.modifiedStartColumn:He.getLineFirstNonWhitespaceColumn(ni),Fi=ni===Bt.modifiedEndLineNumber?Bt.modifiedEndColumn:He.getLineLastNonWhitespaceColumn(ni),ze.decorations.push(Gt(ni,Ci,ni,Fi,$t.charInsert))}else ze.decorations.push(Gt(Bt.modifiedStartLineNumber,Bt.modifiedStartColumn,Bt.modifiedEndLineNumber,Bt.modifiedEndColumn,$t.charInsert))}}}return ze}}si.MINIMUM_EDITOR_WIDTH=100;class ai extends Jt{constructor(n,g,M,Z,ae){super(n,g,M,Z,ae)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(n,g,M){return M>g?{afterLineNumber:Math.max(n.originalStartLineNumber,n.originalEndLineNumber),heightInLines:M-g,domNode:null}:null}_produceModifiedFromDiff(n,g,M){return g>M?{afterLineNumber:Math.max(n.modifiedStartLineNumber,n.modifiedEndLineNumber),heightInLines:g-M,domNode:null}:null}}class _i extends ti{constructor(n,g){super(n),this._decorationsLeft=n.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(n.getOriginalEditor().onDidLayoutChange(M=>{this._decorationsLeft!==M.decorationsLeft&&(this._decorationsLeft=M.decorationsLeft,n.relayoutEditors())}))}setEnableSplitViewResizing(n){}_getViewZones(n,g,M,Z){let ae=this._dataSource.getOriginalEditor(),ge=this._dataSource.getModifiedEditor();return new Li(n,g,M,ae,ge,Z).getViewZones()}_getOriginalEditorDecorations(n,g,M,Z){let ae=String(this._removeColor),ge={decorations:[],overviewZones:[]},De=this._dataSource.getOriginalEditor(),ze=De.getModel(),He=De._getViewModel(),Je=0;for(let vt of g)if(qt(vt)){for(ge.decorations.push({range:new o.e(vt.originalStartLineNumber,1,vt.originalEndLineNumber,1073741824),options:$t.lineDeleteMargin});Je<n.modified.length;){let ni=n.modified[Je];if(ni.diff&&ni.diff.originalStartLineNumber>=vt.originalStartLineNumber)break;Je++}let Pt=0;if(Je<n.modified.length){let ni=n.modified[Je];ni.diff&&ni.diff.originalStartLineNumber===vt.originalStartLineNumber&&ni.diff.originalEndLineNumber===vt.originalEndLineNumber&&ni.diff.modifiedStartLineNumber===vt.modifiedStartLineNumber&&ni.diff.modifiedEndLineNumber===vt.modifiedEndLineNumber&&(Pt=ni.heightInLines)}let Bt=oi(ze,He,vt.originalStartLineNumber,vt.originalEndLineNumber);ge.overviewZones.push(new Si.EY(Bt.startLineNumber,Bt.endLineNumber,Pt,ae))}return ge}_getModifiedEditorDecorations(n,g,M,Z,ae){let ge=this._dataSource.getModifiedEditor(),De=String(this._insertColor),ze={decorations:[],overviewZones:[]},He=ge.getModel(),Je=ge._getViewModel();for(let vt of g)if(ri(vt)){ze.decorations.push({range:new o.e(vt.modifiedStartLineNumber,1,vt.modifiedEndLineNumber,1073741824),options:Z?$t.lineInsertWithSign:$t.lineInsert});let Pt=oi(He,Je,vt.modifiedStartLineNumber,vt.modifiedEndLineNumber);if(ze.overviewZones.push(new Si.EY(Pt.startLineNumber,Pt.endLineNumber,0,De)),vt.charChanges){for(let Bt of vt.charChanges)if(je(Bt))if(M)for(let ni=Bt.modifiedStartLineNumber;ni<=Bt.modifiedEndLineNumber;ni++){let Ci,Fi;Ci=ni===Bt.modifiedStartLineNumber?Bt.modifiedStartColumn:He.getLineFirstNonWhitespaceColumn(ni),Fi=ni===Bt.modifiedEndLineNumber?Bt.modifiedEndColumn:He.getLineLastNonWhitespaceColumn(ni),ze.decorations.push(Gt(ni,Ci,ni,Fi,$t.charInsert))}else ze.decorations.push(Gt(Bt.modifiedStartLineNumber,Bt.modifiedStartColumn,Bt.modifiedEndLineNumber,Bt.modifiedEndColumn,$t.charInsert))}else ze.decorations.push(Gt(vt.modifiedStartLineNumber,1,vt.modifiedEndLineNumber,1073741824,$t.charInsertWholeLine))}return ze}layout(){return Math.max(5,this._decorationsLeft)}}class Li extends Jt{constructor(n,g,M,Z,ae,ge){super(n,g,M,Z,ae),this._originalModel=Z.getModel(),this._renderIndicators=ge,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){let n=super.getViewZones();return this._finalize(n),n}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){let n=document.createElement("div");return n.className="inline-added-margin-view-zone",n}_produceOriginalFromDiff(n,g,M){let Z=document.createElement("div");return Z.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(n.originalStartLineNumber,n.originalEndLineNumber),heightInLines:M,domNode:document.createElement("div"),marginDomNode:Z}}_produceModifiedFromDiff(n,g,M){let Z=document.createElement("div");Z.className=`view-lines line-delete ${ke.S}`;let ae=document.createElement("div");ae.className="inline-deleted-margin-view-zone";let ge={shouldNotShrink:!0,afterLineNumber:n.modifiedEndLineNumber===0?n.modifiedStartLineNumber:n.modifiedStartLineNumber-1,heightInLines:g,minWidthInPx:0,domNode:Z,marginDomNode:ae,diff:{originalStartLineNumber:n.originalStartLineNumber,originalEndLineNumber:n.originalEndLineNumber,modifiedStartLineNumber:n.modifiedStartLineNumber,modifiedEndLineNumber:n.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let De=n.originalStartLineNumber;De<=n.originalEndLineNumber;De++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(De),null,null);return this._pendingLineChange.push(n),this._pendingViewZones.push(ge),ge}_finalize(n){let g=this._modifiedEditor.getOptions(),M=this._modifiedEditor.getModel().getOptions().tabSize,Z=g.get(48),ae=g.get(31),ge=Z.typicalHalfwidthCharacterWidth,De=g.get(99),ze=this._originalModel.mightContainNonBasicASCII(),He=this._originalModel.mightContainRTL(),Je=g.get(64),vt=g.get(139).decorationsWidth,Pt=g.get(112),Bt=g.get(94),ni=g.get(89),Ci=g.get(49),Fi=this._lineBreaksComputer.finalize(),Yi=0;for(let an=0;an<this._pendingLineChange.length;an++){let Gi=this._pendingLineChange[an],nn=this._pendingViewZones[an],ln=nn.domNode;(0,We.N)(ln,Z);let $i=nn.marginDomNode;(0,We.N)($i,Z);let Qi=[];if(Gi.charChanges)for(let Nn of Gi.charChanges)mt(Nn)&&Qi.push(new W.$t(new o.e(Nn.originalStartLineNumber,Nn.originalStartColumn,Nn.originalEndLineNumber,Nn.originalEndColumn),"char-delete",0));let Ji=Qi.length>0,Oi=new jt.HT(1e4),In=0,Mi=0,on=null;for(let Nn=Gi.originalStartLineNumber;Nn<=Gi.originalEndLineNumber;Nn++){let ro=Nn-Gi.originalStartLineNumber,fo=this._originalModel.tokenization.getLineTokens(Nn),ao=fo.getLineContent(),Co=Fi[Yi++],Lo=fi.Kp.filter(Qi,Nn,1,ao.length+1);if(Co){let da=0;for(let ha of Co.breakOffsets){let oh=fo.sliceAndInflate(da,ha,0),sh=ao.substring(da,ha);In=Math.max(In,this._renderOriginalLine(Mi++,sh,oh,fi.Kp.extractWrapped(Lo,da,ha),Ji,ze,He,Z,ae,Je,vt,Pt,Bt,ni,Ci,M,Oi,$i)),da=ha}for(on||(on=[]);on.length<ro;)on[on.length]=1;on[ro]=Co.breakOffsets.length,nn.heightInLines+=Co.breakOffsets.length-1;let Al=document.createElement("div");Al.className="gutter-delete",n.original.push({afterLineNumber:Nn,afterColumn:0,heightInLines:Co.breakOffsets.length-1,domNode:wt(),marginDomNode:Al})}else In=Math.max(In,this._renderOriginalLine(Mi++,ao,fo,Lo,Ji,ze,He,Z,ae,Je,vt,Pt,Bt,ni,Ci,M,Oi,$i))}In+=De;let Cn=Oi.build(),Sn=ot?ot.createHTML(Cn):Cn;if(ln.innerHTML=Sn,nn.minWidthInPx=In*ge,on){let Nn=Gi.originalEndLineNumber-Gi.originalStartLineNumber;for(;on.length<=Nn;)on[on.length]=1}nn.diff.viewLineCounts=on}n.original.sort((an,Gi)=>an.afterLineNumber-Gi.afterLineNumber)}_renderOriginalLine(n,g,M,Z,ae,ge,De,ze,He,Je,vt,Pt,Bt,ni,Ci,Fi,Yi,an){Yi.appendString('<div class="view-line'),ae||Yi.appendString(" char-delete"),Yi.appendString('" style="top:'),Yi.appendString(String(n*Je)),Yi.appendString('px;width:1000000px;">');let Gi=W.wA.isBasicASCII(g,ge),nn=W.wA.containsRTL(g,Gi,De),ln=(0,C.d1)(new C.IJ(ze.isMonospace&&!He,ze.canUseHalfwidthRightwardsArrow,g,!1,Gi,nn,0,M,Z,Fi,0,ze.spaceWidth,ze.middotWidth,ze.wsmiddotWidth,Pt,Bt,ni,Ci!==m.n0.OFF,null),Yi);if(Yi.appendString("</div>"),this._renderIndicators){let $i=document.createElement("div");$i.className=`delete-sign ${mi.k.asClassName($e)}`,$i.setAttribute("style",`position:absolute;top:${n*Je}px;width:${vt}px;height:${Je}px;right:0;`),an.appendChild($i)}return ln.characterMapping.getHorizontalOffset(ln.characterMapping.length)}}function ri(G){return G.modifiedEndLineNumber>0}function qt(G){return G.originalEndLineNumber>0}function je(G){return G.modifiedStartLineNumber===G.modifiedEndLineNumber?G.modifiedEndColumn-G.modifiedStartColumn>0:G.modifiedEndLineNumber-G.modifiedStartLineNumber>0}function mt(G){return G.originalStartLineNumber===G.originalEndLineNumber?G.originalEndColumn-G.originalStartColumn>0:G.originalEndLineNumber-G.originalStartLineNumber>0}function wt(){let G=document.createElement("div");return G.className="diagonal-fill",G}function Rt(){let G=document.createElement("div");return G.className="arrow-revert-change "+mi.k.asClassName(me.l.arrowRight),te.$("div",{},G)}function oi(G,n,g,M){let Z=G.getLineCount();return g=Math.min(Z,Math.max(1,g)),M=Math.min(Z,Math.max(1,M)),n.coordinatesConverter.convertModelRangeToViewRange(new o.e(g,G.getLineMinColumn(g),M,G.getLineMaxColumn(M)))}function ei(G,n){return{enableSplitViewResizing:(0,m.O7)(G.enableSplitViewResizing,n.enableSplitViewResizing),splitViewDefaultRatio:(0,m.L_)(G.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,m.O7)(G.renderSideBySide,n.renderSideBySide),renderMarginRevertIcon:(0,m.O7)(G.renderMarginRevertIcon,n.renderMarginRevertIcon),maxComputationTime:(0,m.Zc)(G.maxComputationTime,n.maxComputationTime,0,1073741824),maxFileSize:(0,m.Zc)(G.maxFileSize,n.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,m.O7)(G.ignoreTrimWhitespace,n.ignoreTrimWhitespace),renderIndicators:(0,m.O7)(G.renderIndicators,n.renderIndicators),originalEditable:(0,m.O7)(G.originalEditable,n.originalEditable),diffCodeLens:(0,m.O7)(G.diffCodeLens,n.diffCodeLens),renderOverviewRuler:(0,m.O7)(G.renderOverviewRuler,n.renderOverviewRuler),diffWordWrap:(g=G.diffWordWrap,M=n.diffWordWrap,(0,m.NY)(g,M,["off","on","inherit"])),diffAlgorithm:(0,m.NY)(G.diffAlgorithm,n.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,m.O7)(G.accessibilityVerbose,n.accessibilityVerbose)};var g,M}(0,dt.Ic)((G,n)=>{let g=G.getColor(Nt.L_t);n.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${g} 12.5%,
			#0000 12.5%, #0000 50%,
			${g} 50%, ${g} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var yi=t(653),ki=t(6663),Ti=t(1741);let Pi=class extends u.JT{constructor(G){super(),this._themeService=G,this._onWillCreateCodeEditor=this._register(new f.Q5),this._onCodeEditorAdd=this._register(new f.Q5),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new f.Q5),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new f.Q5),this._onDiffEditorAdd=this._register(new f.Q5),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new f.Q5),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Ti.S,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(G){this._codeEditors[G.getId()]=G,this._onCodeEditorAdd.fire(G)}removeCodeEditor(G){delete this._codeEditors[G.getId()]&&this._onCodeEditorRemove.fire(G)}listCodeEditors(){return Object.keys(this._codeEditors).map(G=>this._codeEditors[G])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(G){this._diffEditors[G.getId()]=G,this._onDiffEditorAdd.fire(G)}removeDiffEditor(G){delete this._diffEditors[G.getId()]&&this._onDiffEditorRemove.fire(G)}listDiffEditors(){return Object.keys(this._diffEditors).map(G=>this._diffEditors[G])}getFocusedCodeEditor(){let G=null,n=this.listCodeEditors();for(let g of n){if(g.hasTextFocus())return g;g.hasWidgetFocus()&&(G=g)}return G}removeDecorationType(G){let n=this._decorationOptionProviders.get(G);n&&(n.refCount--,n.refCount<=0&&(this._decorationOptionProviders.delete(G),n.dispose(),this.listCodeEditors().forEach(g=>g.removeDecorationsByType(G))))}setModelProperty(G,n,g){let M=G.toString(),Z;this._modelProperties.has(M)?Z=this._modelProperties.get(M):(Z=new Map,this._modelProperties.set(M,Z)),Z.set(n,g)}getModelProperty(G,n){let g=G.toString();if(this._modelProperties.has(g))return this._modelProperties.get(g).get(n)}openCodeEditor(G,n,g){return M=this,Z=void 0,ge=function*(){for(let De of this._codeEditorOpenHandlers){let ze=yield De(G,n,g);if(ze!==null)return ze}return null},new((ae=void 0)||(ae=Promise))(function(De,ze){function He(Pt){try{vt(ge.next(Pt))}catch(Bt){ze(Bt)}}function Je(Pt){try{vt(ge.throw(Pt))}catch(Bt){ze(Bt)}}function vt(Pt){var Bt;Pt.done?De(Pt.value):(Bt=Pt.value,Bt instanceof ae?Bt:new ae(function(ni){ni(Bt)})).then(He,Je)}vt((ge=ge.apply(M,Z||[])).next())});var M,Z,ae,ge}registerCodeEditorOpenHandler(G){let n=this._codeEditorOpenHandlers.unshift(G);return(0,u.OF)(n)}};Pi=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([function(G,n){return function(g,M){n(g,M,G)}}(0,dt.XE)],Pi);var Ni=t(5026),gn=function(G,n){return function(g,M){n(g,M,G)}};let Dn=class extends Pi{constructor(G,n){super(n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=G.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((g,M,Z)=>{return ae=this,ge=void 0,ze=function*(){return M?this.doOpenEditor(M,g):null},new((De=void 0)||(De=Promise))(function(He,Je){function vt(ni){try{Bt(ze.next(ni))}catch(Ci){Je(Ci)}}function Pt(ni){try{Bt(ze.throw(ni))}catch(Ci){Je(Ci)}}function Bt(ni){var Ci;ni.done?He(ni.value):(Ci=ni.value,Ci instanceof De?Ci:new De(function(Fi){Fi(Ci)})).then(vt,Pt)}Bt((ze=ze.apply(ae,ge||[])).next())});var ae,ge,De,ze})}_checkContextKey(){let G=!1;for(let n of this.listCodeEditors())if(!n.isSimpleWidget){G=!0;break}this._editorIsOpen.set(G)}setActiveCodeEditor(G){this._activeCodeEditor=G}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(G,n){if(!this.findModel(G,n.resource)){if(n.resource){let M=n.resource.scheme;if(M===ki.lg.http||M===ki.lg.https)return(0,te.V3)(n.resource.toString()),G}return null}let g=n.options?n.options.selection:null;if(g)if(typeof g.endLineNumber=="number"&&typeof g.endColumn=="number")G.setSelection(g),G.revealRangeInCenter(g,1);else{let M={lineNumber:g.startLineNumber,column:g.startColumn};G.setPosition(M),G.revealPositionInCenter(M,1)}return G}findModel(G,n){let g=G.getModel();return g&&g.uri.toString()!==n.toString()?null:g}};Dn=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([gn(0,At.i6),gn(1,dt.XE)],Dn),(0,Ni.z)(x.$,Dn,0);let Yt=(0,Te.yh)("layoutService");var Ai=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},zi=function(G,n){return function(g,M){n(g,M,G)}};let un=class{get dimension(){return this._dimension||(this._dimension=te.D6(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var G;(G=this._codeEditorService.getFocusedCodeEditor())===null||G===void 0||G.focus()}constructor(G){this._codeEditorService=G,this.onDidLayout=f.ju.None,this.offset={top:0,quickPickTop:0}}};un=Ai([zi(0,x.$)],un);let Ln=class extends un{get hasContainer(){return!1}get container(){return this._container}constructor(G,n){super(n),this._container=G}};Ln=Ai([zi(1,x.$)],Ln),(0,Ni.z)(Yt,un,1);var pn=t(4603),_n=t(8820),dn=t(4862),wn=function(G,n){return function(g,M){n(g,M,G)}},St=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};function he(G){return G.scheme===ki.lg.file?G.fsPath:G.path}let Me=0;class nt{constructor(n,g,M,Z,ae,ge,De){this.id=++Me,this.type=0,this.actual=n,this.label=n.label,this.confirmBeforeUndo=n.confirmBeforeUndo||!1,this.resourceLabel=g,this.strResource=M,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=Z,this.groupOrder=ae,this.sourceId=ge,this.sourceOrder=De,this.isValid=!0}setValid(n){this.isValid=n}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class pt{constructor(n,g){this.resourceLabel=n,this.reason=g}}class Ke{constructor(){this.elements=new Map}createMessage(){let n=[],g=[];for(let[,Z]of this.elements)(Z.reason===0?n:g).push(Z.resourceLabel);let M=[];return n.length>0&&M.push(Qe.NC({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",n.join(", "))),g.length>0&&M.push(Qe.NC({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",g.join(", "))),M.join(`
`)}get size(){return this.elements.size}has(n){return this.elements.has(n)}set(n,g){this.elements.set(n,g)}delete(n){return this.elements.delete(n)}}class S{constructor(n,g,M,Z,ae,ge,De){this.id=++Me,this.type=1,this.actual=n,this.label=n.label,this.confirmBeforeUndo=n.confirmBeforeUndo||!1,this.resourceLabels=g,this.strResources=M,this.groupId=Z,this.groupOrder=ae,this.sourceId=ge,this.sourceOrder=De,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(n,g,M){this.removedResources||(this.removedResources=new Ke),this.removedResources.has(g)||this.removedResources.set(g,new pt(n,M))}setValid(n,g,M){M?this.invalidatedResources&&(this.invalidatedResources.delete(g),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Ke),this.invalidatedResources.has(g)||this.invalidatedResources.set(g,new pt(n,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class V{constructor(n,g){this.resourceLabel=n,this.strResource=g,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(let n of this._past)n.type===1&&n.removeResource(this.resourceLabel,this.strResource,0);for(let n of this._future)n.type===1&&n.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let n=[];n.push(`* ${this.strResource}:`);for(let g=0;g<this._past.length;g++)n.push(`   * [UNDO] ${this._past[g]}`);for(let g=this._future.length-1;g>=0;g--)n.push(`   * [REDO] ${this._future[g]}`);return n.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(n,g){n.type===1?n.setValid(this.resourceLabel,this.strResource,g):n.setValid(g)}setElementsValidFlag(n,g){for(let M of this._past)g(M.actual)&&this._setElementValidFlag(M,n);for(let M of this._future)g(M.actual)&&this._setElementValidFlag(M,n)}pushElement(n){for(let g of this._future)g.type===1&&g.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(n),this.versionId++}createSnapshot(n){let g=[];for(let M=0,Z=this._past.length;M<Z;M++)g.push(this._past[M].id);for(let M=this._future.length-1;M>=0;M--)g.push(this._future[M].id);return new dn.YO(n,g)}restoreSnapshot(n){let g=n.elements.length,M=!0,Z=0,ae=-1;for(let De=0,ze=this._past.length;De<ze;De++,Z++){let He=this._past[De];M&&(Z>=g||He.id!==n.elements[Z])&&(M=!1,ae=0),M||He.type!==1||He.removeResource(this.resourceLabel,this.strResource,0)}let ge=-1;for(let De=this._future.length-1;De>=0;De--,Z++){let ze=this._future[De];M&&(Z>=g||ze.id!==n.elements[Z])&&(M=!1,ge=De),M||ze.type!==1||ze.removeResource(this.resourceLabel,this.strResource,0)}ae!==-1&&(this._past=this._past.slice(0,ae)),ge!==-1&&(this._future=this._future.slice(ge+1)),this.versionId++}getElements(){let n=[],g=[];for(let M of this._past)n.push(M.actual);for(let M of this._future)g.push(M.actual);return{past:n,future:g}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(n,g){for(let M=this._past.length-1;M>=0;M--)if(this._past[M]===n){g.has(this.strResource)?this._past[M]=g.get(this.strResource):this._past.splice(M,1);break}this.versionId++}splitFutureWorkspaceElement(n,g){for(let M=this._future.length-1;M>=0;M--)if(this._future[M]===n){g.has(this.strResource)?this._future[M]=g.get(this.strResource):this._future.splice(M,1);break}this.versionId++}moveBackward(n){this._past.pop(),this._future.push(n),this.versionId++}moveForward(n){this._future.pop(),this._past.push(n),this.versionId++}}class Y{constructor(n){this.editStacks=n,this._versionIds=[];for(let g=0,M=this.editStacks.length;g<M;g++)this._versionIds[g]=this.editStacks[g].versionId}isValid(){for(let n=0,g=this.editStacks.length;n<g;n++)if(this._versionIds[n]!==this.editStacks[n].versionId)return!1;return!0}}let we=new V("","");we.locked=!0;let Ne=class{constructor(G,n){this._dialogService=G,this._notificationService=n,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(G){for(let n of this._uriComparisonKeyComputers)if(n[0]===G.scheme)return n[1].getComparisonKey(G);return G.toString()}_print(G){console.log("------------------------------------"),console.log(`AFTER ${G}: `);let n=[];for(let g of this._editStacks)n.push(g[1].toString());console.log(n.join(`
`))}pushElement(G,n=dn.Xt.None,g=dn.gJ.None){if(G.type===0){let M=he(G.resource),Z=this.getUriComparisonKey(G.resource);this._pushElement(new nt(G,M,Z,n.id,n.nextOrder(),g.id,g.nextOrder()))}else{let M=new Set,Z=[],ae=[];for(let ge of G.resources){let De=he(ge),ze=this.getUriComparisonKey(ge);M.has(ze)||(M.add(ze),Z.push(De),ae.push(ze))}Z.length===1?this._pushElement(new nt(G,Z[0],ae[0],n.id,n.nextOrder(),g.id,g.nextOrder())):this._pushElement(new S(G,Z,ae,n.id,n.nextOrder(),g.id,g.nextOrder()))}}_pushElement(G){for(let n=0,g=G.strResources.length;n<g;n++){let M=G.resourceLabels[n],Z=G.strResources[n],ae;this._editStacks.has(Z)?ae=this._editStacks.get(Z):(ae=new V(M,Z),this._editStacks.set(Z,ae)),ae.pushElement(G)}}getLastElement(G){let n=this.getUriComparisonKey(G);if(this._editStacks.has(n)){let g=this._editStacks.get(n);if(g.hasFutureElements())return null;let M=g.getClosestPastElement();return M?M.actual:null}return null}_splitPastWorkspaceElement(G,n){let g=G.actual.split(),M=new Map;for(let Z of g){let ae=he(Z.resource),ge=this.getUriComparisonKey(Z.resource),De=new nt(Z,ae,ge,0,0,0,0);M.set(De.strResource,De)}for(let Z of G.strResources)n&&n.has(Z)||this._editStacks.get(Z).splitPastWorkspaceElement(G,M)}_splitFutureWorkspaceElement(G,n){let g=G.actual.split(),M=new Map;for(let Z of g){let ae=he(Z.resource),ge=this.getUriComparisonKey(Z.resource),De=new nt(Z,ae,ge,0,0,0,0);M.set(De.strResource,De)}for(let Z of G.strResources)n&&n.has(Z)||this._editStacks.get(Z).splitFutureWorkspaceElement(G,M)}removeElements(G){let n=typeof G=="string"?G:this.getUriComparisonKey(G);this._editStacks.has(n)&&(this._editStacks.get(n).dispose(),this._editStacks.delete(n))}setElementsValidFlag(G,n,g){let M=this.getUriComparisonKey(G);this._editStacks.has(M)&&this._editStacks.get(M).setElementsValidFlag(n,g)}createSnapshot(G){let n=this.getUriComparisonKey(G);return this._editStacks.has(n)?this._editStacks.get(n).createSnapshot(G):new dn.YO(G,[])}restoreSnapshot(G){let n=this.getUriComparisonKey(G.resource);if(this._editStacks.has(n)){let g=this._editStacks.get(n);g.restoreSnapshot(G),g.hasPastElements()||g.hasFutureElements()||(g.dispose(),this._editStacks.delete(n))}}getElements(G){let n=this.getUriComparisonKey(G);return this._editStacks.has(n)?this._editStacks.get(n).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(G){if(!G)return[null,null];let n=null,g=null;for(let[M,Z]of this._editStacks){let ae=Z.getClosestPastElement();ae&&ae.sourceId===G&&(!n||ae.sourceOrder>n.sourceOrder)&&(n=ae,g=M)}return[n,g]}canUndo(G){if(G instanceof dn.gJ){let[,g]=this._findClosestUndoElementWithSource(G.id);return!!g}let n=this.getUriComparisonKey(G);return!!this._editStacks.has(n)&&this._editStacks.get(n).hasPastElements()}_onError(G,n){(0,xe.dL)(G);for(let g of n.strResources)this.removeElements(g);this._notificationService.error(G)}_acquireLocks(G){for(let n of G.editStacks)if(n.locked)throw new Error("Cannot acquire edit stack lock");for(let n of G.editStacks)n.locked=!0;return()=>{for(let n of G.editStacks)n.locked=!1}}_safeInvokeWithLocks(G,n,g,M,Z){let ae=this._acquireLocks(g),ge;try{ge=n()}catch(De){return ae(),M.dispose(),this._onError(De,G)}return ge?ge.then(()=>(ae(),M.dispose(),Z()),De=>(ae(),M.dispose(),this._onError(De,G))):(ae(),M.dispose(),Z())}_invokeWorkspacePrepare(G){return St(this,void 0,void 0,function*(){if(G.actual.prepareUndoRedo===void 0)return u.JT.None;let n=G.actual.prepareUndoRedo();return n===void 0?u.JT.None:n})}_invokeResourcePrepare(G,n){if(G.actual.type!==1||G.actual.prepareUndoRedo===void 0)return n(u.JT.None);let g=G.actual.prepareUndoRedo();return g?(0,u.Wf)(g)?n(g):g.then(M=>n(M)):n(u.JT.None)}_getAffectedEditStacks(G){let n=[];for(let g of G.strResources)n.push(this._editStacks.get(g)||we);return new Y(n)}_tryToSplitAndUndo(G,n,g,M){if(n.canSplit())return this._splitPastWorkspaceElement(n,g),this._notificationService.warn(M),new Oe(this._undo(G,0,!0));for(let Z of n.strResources)this.removeElements(Z);return this._notificationService.warn(M),new Oe}_checkWorkspaceUndo(G,n,g,M){if(n.removedResources)return this._tryToSplitAndUndo(G,n,n.removedResources,Qe.NC({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",n.label,n.removedResources.createMessage()));if(M&&n.invalidatedResources)return this._tryToSplitAndUndo(G,n,n.invalidatedResources,Qe.NC({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",n.label,n.invalidatedResources.createMessage()));let Z=[];for(let ge of g.editStacks)ge.getClosestPastElement()!==n&&Z.push(ge.resourceLabel);if(Z.length>0)return this._tryToSplitAndUndo(G,n,null,Qe.NC({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",n.label,Z.join(", ")));let ae=[];for(let ge of g.editStacks)ge.locked&&ae.push(ge.resourceLabel);return ae.length>0?this._tryToSplitAndUndo(G,n,null,Qe.NC({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",n.label,ae.join(", "))):g.isValid()?null:this._tryToSplitAndUndo(G,n,null,Qe.NC({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",n.label))}_workspaceUndo(G,n,g){let M=this._getAffectedEditStacks(n),Z=this._checkWorkspaceUndo(G,n,M,!1);return Z?Z.returnValue:this._confirmAndExecuteWorkspaceUndo(G,n,M,g)}_isPartOfUndoGroup(G){if(!G.groupId)return!1;for(let[,n]of this._editStacks){let g=n.getClosestPastElement();if(g){if(g===G){let M=n.getSecondClosestPastElement();if(M&&M.groupId===G.groupId)return!0}if(g.groupId===G.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(G,n,g,M){return St(this,void 0,void 0,function*(){if(n.canSplit()&&!this._isPartOfUndoGroup(n)){let ge;(function(He){He[He.All=0]="All",He[He.This=1]="This",He[He.Cancel=2]="Cancel"})(ge||(ge={}));let{result:De}=yield this._dialogService.prompt({type:pn.Z.Info,message:Qe.NC("confirmWorkspace","Would you like to undo '{0}' across all files?",n.label),buttons:[{label:Qe.NC({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",g.editStacks.length),run:()=>ge.All},{label:Qe.NC({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>ge.This}],cancelButton:{run:()=>ge.Cancel}});if(De===ge.Cancel)return;if(De===ge.This)return this._splitPastWorkspaceElement(n,null),this._undo(G,0,!0);let ze=this._checkWorkspaceUndo(G,n,g,!1);if(ze)return ze.returnValue;M=!0}let Z;try{Z=yield this._invokeWorkspacePrepare(n)}catch(ge){return this._onError(ge,n)}let ae=this._checkWorkspaceUndo(G,n,g,!0);if(ae)return Z.dispose(),ae.returnValue;for(let ge of g.editStacks)ge.moveBackward(n);return this._safeInvokeWithLocks(n,()=>n.actual.undo(),g,Z,()=>this._continueUndoInGroup(n.groupId,M))})}_resourceUndo(G,n,g){if(n.isValid){if(!G.locked)return this._invokeResourcePrepare(n,M=>(G.moveBackward(n),this._safeInvokeWithLocks(n,()=>n.actual.undo(),new Y([G]),M,()=>this._continueUndoInGroup(n.groupId,g))));{let M=Qe.NC({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",n.label);this._notificationService.warn(M)}}else G.flushAllElements()}_findClosestUndoElementInGroup(G){if(!G)return[null,null];let n=null,g=null;for(let[M,Z]of this._editStacks){let ae=Z.getClosestPastElement();ae&&ae.groupId===G&&(!n||ae.groupOrder>n.groupOrder)&&(n=ae,g=M)}return[n,g]}_continueUndoInGroup(G,n){if(!G)return;let[,g]=this._findClosestUndoElementInGroup(G);return g?this._undo(g,0,n):void 0}undo(G){if(G instanceof dn.gJ){let[,n]=this._findClosestUndoElementWithSource(G.id);return n?this._undo(n,G.id,!1):void 0}return typeof G=="string"?this._undo(G,0,!1):this._undo(this.getUriComparisonKey(G),0,!1)}_undo(G,n=0,g){if(!this._editStacks.has(G))return;let M=this._editStacks.get(G),Z=M.getClosestPastElement();if(Z){if(Z.groupId){let[ae,ge]=this._findClosestUndoElementInGroup(Z.groupId);if(Z!==ae&&ge)return this._undo(ge,n,g)}if((Z.sourceId!==n||Z.confirmBeforeUndo)&&!g)return this._confirmAndContinueUndo(G,n,Z);try{return Z.type===1?this._workspaceUndo(G,Z,g):this._resourceUndo(M,Z,g)}finally{}}}_confirmAndContinueUndo(G,n,g){return St(this,void 0,void 0,function*(){if((yield this._dialogService.confirm({message:Qe.NC("confirmDifferentSource","Would you like to undo '{0}'?",g.label),primaryButton:Qe.NC({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:Qe.NC("confirmDifferentSource.no","No")})).confirmed)return this._undo(G,n,!0)})}_findClosestRedoElementWithSource(G){if(!G)return[null,null];let n=null,g=null;for(let[M,Z]of this._editStacks){let ae=Z.getClosestFutureElement();ae&&ae.sourceId===G&&(!n||ae.sourceOrder<n.sourceOrder)&&(n=ae,g=M)}return[n,g]}canRedo(G){if(G instanceof dn.gJ){let[,g]=this._findClosestRedoElementWithSource(G.id);return!!g}let n=this.getUriComparisonKey(G);return!!this._editStacks.has(n)&&this._editStacks.get(n).hasFutureElements()}_tryToSplitAndRedo(G,n,g,M){if(n.canSplit())return this._splitFutureWorkspaceElement(n,g),this._notificationService.warn(M),new Oe(this._redo(G));for(let Z of n.strResources)this.removeElements(Z);return this._notificationService.warn(M),new Oe}_checkWorkspaceRedo(G,n,g,M){if(n.removedResources)return this._tryToSplitAndRedo(G,n,n.removedResources,Qe.NC({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",n.label,n.removedResources.createMessage()));if(M&&n.invalidatedResources)return this._tryToSplitAndRedo(G,n,n.invalidatedResources,Qe.NC({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",n.label,n.invalidatedResources.createMessage()));let Z=[];for(let ge of g.editStacks)ge.getClosestFutureElement()!==n&&Z.push(ge.resourceLabel);if(Z.length>0)return this._tryToSplitAndRedo(G,n,null,Qe.NC({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",n.label,Z.join(", ")));let ae=[];for(let ge of g.editStacks)ge.locked&&ae.push(ge.resourceLabel);return ae.length>0?this._tryToSplitAndRedo(G,n,null,Qe.NC({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",n.label,ae.join(", "))):g.isValid()?null:this._tryToSplitAndRedo(G,n,null,Qe.NC({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",n.label))}_workspaceRedo(G,n){let g=this._getAffectedEditStacks(n),M=this._checkWorkspaceRedo(G,n,g,!1);return M?M.returnValue:this._executeWorkspaceRedo(G,n,g)}_executeWorkspaceRedo(G,n,g){return St(this,void 0,void 0,function*(){let M;try{M=yield this._invokeWorkspacePrepare(n)}catch(ae){return this._onError(ae,n)}let Z=this._checkWorkspaceRedo(G,n,g,!0);if(Z)return M.dispose(),Z.returnValue;for(let ae of g.editStacks)ae.moveForward(n);return this._safeInvokeWithLocks(n,()=>n.actual.redo(),g,M,()=>this._continueRedoInGroup(n.groupId))})}_resourceRedo(G,n){if(n.isValid){if(!G.locked)return this._invokeResourcePrepare(n,g=>(G.moveForward(n),this._safeInvokeWithLocks(n,()=>n.actual.redo(),new Y([G]),g,()=>this._continueRedoInGroup(n.groupId))));{let g=Qe.NC({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",n.label);this._notificationService.warn(g)}}else G.flushAllElements()}_findClosestRedoElementInGroup(G){if(!G)return[null,null];let n=null,g=null;for(let[M,Z]of this._editStacks){let ae=Z.getClosestFutureElement();ae&&ae.groupId===G&&(!n||ae.groupOrder<n.groupOrder)&&(n=ae,g=M)}return[n,g]}_continueRedoInGroup(G){if(!G)return;let[,n]=this._findClosestRedoElementInGroup(G);return n?this._redo(n):void 0}redo(G){if(G instanceof dn.gJ){let[,n]=this._findClosestRedoElementWithSource(G.id);return n?this._redo(n):void 0}return typeof G=="string"?this._redo(G):this._redo(this.getUriComparisonKey(G))}_redo(G){if(!this._editStacks.has(G))return;let n=this._editStacks.get(G),g=n.getClosestFutureElement();if(g){if(g.groupId){let[M,Z]=this._findClosestRedoElementInGroup(g.groupId);if(g!==M&&Z)return this._redo(Z)}try{return g.type===1?this._workspaceRedo(G,g):this._resourceRedo(n,g)}finally{}}}};Ne=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([wn(0,_n.S),wn(1,rt.lT)],Ne);class Oe{constructor(n){this.returnValue=n}}(0,Ni.z)(dn.tJ,Ne,1),t(8191);var et=t(3557),at=t(8802),lt=t(3343),_t=function(G,n){return function(g,M){n(g,M,G)}};let gt=class extends u.JT{constructor(G,n,g){super(),this._themeService=G,this._logService=n,this._languageService=g,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(G){return this._caches.has(G)||this._caches.set(G,new at.$(G.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(G)}};gt=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([_t(0,dt.XE),_t(1,et.VZ),_t(2,k.O)],gt),(0,Ni.z)(lt.s,gt,1);var Ft=t(5527),Zt=t(3702),ii=t(8721),hi=t(1432),wi=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};let Ei="**",xi="/",bi="[/\\\\]",vn="[^/\\\\]",Pn=/\//g;function xn(G,n){switch(G){case 0:return"";case 1:return`${vn}*?`;default:return`(?:${bi}|${vn}+${bi}${n?`|${bi}${vn}+`:""})*?`}}function Qn(G,n){if(!G)return[];let g=[],M=!1,Z=!1,ae="";for(let ge of G){switch(ge){case n:if(!M&&!Z){g.push(ae),ae="";continue}break;case"{":M=!0;break;case"}":M=!1;break;case"[":Z=!0;break;case"]":Z=!1}ae+=ge}return ae&&g.push(ae),g}function ko(G){if(!G)return"";let n="",g=Qn(G,xi);if(g.every(M=>M===Ei))n=".*";else{let M=!1;g.forEach((Z,ae)=>{if(Z===Ei){if(M)return;n+=xn(2,ae===g.length-1)}else{let ge=!1,De="",ze=!1,He="";for(let Je of Z)if(Je!=="}"&&ge)De+=Je;else if(!ze||Je==="]"&&He)switch(Je){case"{":ge=!0;continue;case"[":ze=!0;continue;case"}":{let vt=`(?:${Qn(De,",").map(Pt=>ko(Pt)).join("|")})`;n+=vt,ge=!1,De="";break}case"]":n+="["+He+"]",ze=!1,He="";break;case"?":n+=vn;continue;case"*":n+=xn(1);continue;default:n+=(0,I.ec)(Je)}else{let vt;vt=Je==="-"?Je:Je!=="^"&&Je!=="!"||He?Je===xi?"":(0,I.ec)(Je):"^",He+=vt}ae<g.length-1&&(g[ae+1]!==Ei||ae+2<g.length)&&(n+=bi)}M=Z===Ei})}return n}let go=/^\*\*\/\*\.[\w\.-]+$/,ji=/^\*\*\/([\w\.-]+)\/?$/,Tn=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,bn=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Fn=/^\*\*((\/[\w\.-]+)+)\/?$/,Xn=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,ho=new Zt.z6(1e4),_o=function(){return!1},eo=function(){return null};function po(G,n){if(!G)return eo;let g;g=typeof G!="string"?G.pattern:G,g=g.trim();let M=`${g}_${!!n.trimForExclusions}`,Z,ae=ho.get(M);return ae||(ae=go.test(g)?function(ge,De){return function(ze,He){return typeof ze=="string"&&ze.endsWith(ge)?De:null}}(g.substr(4),g):(Z=ji.exec(Do(g,n)))?function(ge,De){let ze=`/${ge}`,He=`\\${ge}`,Je=function(Pt,Bt){return typeof Pt!="string"?null:Bt?Bt===ge?De:null:Pt===ge||Pt.endsWith(ze)||Pt.endsWith(He)?De:null},vt=[ge];return Je.basenames=vt,Je.patterns=[De],Je.allBasenames=vt,Je}(Z[1],g):(n.trimForExclusions?bn:Tn).test(g)?function(ge,De){let ze=Pr(ge.slice(1,-1).split(",").map(Bt=>po(Bt,De)).filter(Bt=>Bt!==eo),ge),He=ze.length;if(!He)return eo;if(He===1)return ze[0];let Je=function(Bt,ni){for(let Ci=0,Fi=ze.length;Ci<Fi;Ci++)if(ze[Ci](Bt,ni))return ge;return null},vt=ze.find(Bt=>!!Bt.allBasenames);vt&&(Je.allBasenames=vt.allBasenames);let Pt=ze.reduce((Bt,ni)=>ni.allPaths?Bt.concat(ni.allPaths):Bt,[]);return Pt.length&&(Je.allPaths=Pt),Je}(g,n):(Z=Fn.exec(Do(g,n)))?Ar(Z[1].substr(1),g,!0):(Z=Xn.exec(Do(g,n)))?Ar(Z[1],g,!1):function(ge){try{let De=new RegExp(`^${ko(ge)}$`);return function(ze){return De.lastIndex=0,typeof ze=="string"&&De.test(ze)?ge:null}}catch(De){return eo}}(g),ho.set(M,ae)),function(ge,De){if(typeof De=="string")return ge;let ze=function(He,Je){return(0,Ft.KM)(He,De.base,!hi.IJ)?ge((0,I.j3)(He.substr(De.base.length),ii.ir),Je):null};return ze.allBasenames=ge.allBasenames,ze.allPaths=ge.allPaths,ze.basenames=ge.basenames,ze.patterns=ge.patterns,ze}(ae,G)}function Do(G,n){return n.trimForExclusions&&G.endsWith("/**")?G.substr(0,G.length-2):G}function Ar(G,n,g){let M=ii.ir===ii.KR.sep,Z=M?G:G.replace(Pn,ii.ir),ae=ii.ir+Z,ge=ii.KR.sep+G,De;return De=g?function(ze,He){return typeof ze!="string"||ze!==Z&&!ze.endsWith(ae)&&(M||ze!==G&&!ze.endsWith(ge))?null:n}:function(ze,He){return typeof ze!="string"||ze!==Z&&(M||ze!==G)?null:n},De.allPaths=[(g?"*/":"./")+G],De}function Or(G,n={}){if(!G)return _o;if(typeof G=="string"||function(g){let M=g;return!!M&&typeof M.base=="string"&&typeof M.pattern=="string"}(G)){let g=po(G,n);if(g===eo)return _o;let M=function(Z,ae){return!!g(Z,ae)};return g.allBasenames&&(M.allBasenames=g.allBasenames),g.allPaths&&(M.allPaths=g.allPaths),M}return function(g,M){let Z=Pr(Object.getOwnPropertyNames(g).map(He=>function(Je,vt,Pt){if(vt===!1)return eo;let Bt=po(Je,Pt);if(Bt===eo)return eo;if(typeof vt=="boolean")return Bt;if(vt){let ni=vt.when;if(typeof ni=="string"){let Ci=(Fi,Yi,an,Gi)=>{if(!Gi||!Bt(Fi,Yi))return null;let nn=Gi(ni.replace("$(basename)",()=>an));return(0,ee.J8)(nn)?nn.then(ln=>ln?Je:null):nn?Je:null};return Ci.requiresSiblings=!0,Ci}}return Bt}(He,g[He],M)).filter(He=>He!==eo)),ae=Z.length;if(!ae)return eo;if(!Z.some(He=>!!He.requiresSiblings)){if(ae===1)return Z[0];let He=function(Pt,Bt){let ni;for(let Ci=0,Fi=Z.length;Ci<Fi;Ci++){let Yi=Z[Ci](Pt,Bt);if(typeof Yi=="string")return Yi;(0,ee.J8)(Yi)&&(ni||(ni=[]),ni.push(Yi))}return ni?(()=>wi(this,void 0,void 0,function*(){for(let Ci of ni){let Fi=yield Ci;if(typeof Fi=="string")return Fi}return null}))():null},Je=Z.find(Pt=>!!Pt.allBasenames);Je&&(He.allBasenames=Je.allBasenames);let vt=Z.reduce((Pt,Bt)=>Bt.allPaths?Pt.concat(Bt.allPaths):Pt,[]);return vt.length&&(He.allPaths=vt),He}let ge=function(He,Je,vt){let Pt,Bt;for(let ni=0,Ci=Z.length;ni<Ci;ni++){let Fi=Z[ni];Fi.requiresSiblings&&vt&&(Je||(Je=(0,ii.EZ)(He)),Pt||(Pt=Je.substr(0,Je.length-(0,ii.DZ)(He).length)));let Yi=Fi(He,Je,Pt,vt);if(typeof Yi=="string")return Yi;(0,ee.J8)(Yi)&&(Bt||(Bt=[]),Bt.push(Yi))}return Bt?(()=>wi(this,void 0,void 0,function*(){for(let ni of Bt){let Ci=yield ni;if(typeof Ci=="string")return Ci}return null}))():null},De=Z.find(He=>!!He.allBasenames);De&&(ge.allBasenames=De.allBasenames);let ze=Z.reduce((He,Je)=>Je.allPaths?He.concat(Je.allPaths):He,[]);return ze.length&&(ge.allPaths=ze),ge}(G,n)}function Pr(G,n){let g=G.filter(De=>!!De.basenames);if(g.length<2)return G;let M=g.reduce((De,ze)=>{let He=ze.basenames;return He?De.concat(He):De},[]),Z;if(n){Z=[];for(let De=0,ze=M.length;De<ze;De++)Z.push(n)}else Z=g.reduce((De,ze)=>{let He=ze.patterns;return He?De.concat(He):De},[]);let ae=function(De,ze){if(typeof De!="string")return null;if(!ze){let Je;for(Je=De.length;Je>0;Je--){let vt=De.charCodeAt(Je-1);if(vt===47||vt===92)break}ze=De.substr(Je)}let He=M.indexOf(ze);return He!==-1?Z[He]:null};ae.basenames=M,ae.patterns=Z,ae.allBasenames=M;let ge=G.filter(De=>!De.basenames);return ge.push(ae),ge}function tr(G,n,g,M,Z,ae){if(Array.isArray(G)){let ze=0;for(let He of G){let Je=tr(He,n,g,M,Z,ae);if(Je===10)return Je;Je>ze&&(ze=Je)}return ze}if(typeof G=="string")return M?G==="*"?5:G===g?10:0:0;if(G){let{language:ze,pattern:He,scheme:Je,hasAccessToAllModels:vt,notebookType:Pt}=G;if(!M&&!vt)return 0;Pt&&Z&&(n=Z);let Bt=0;if(Je)if(Je===n.scheme)Bt=10;else{if(Je!=="*")return 0;Bt=5}if(ze)if(ze===g)Bt=10;else{if(ze!=="*")return 0;Bt=Math.max(Bt,5)}if(Pt)if(Pt===ae)Bt=10;else{if(Pt!=="*"||ae===void 0)return 0;Bt=Math.max(Bt,5)}if(He){let ni;if(ni=typeof He=="string"?He:Object.assign(Object.assign({},He),{base:(0,ii.Fv)(He.base)}),ni!==n.fsPath&&(ge=ni,De=n.fsPath,!ge||typeof De!="string"||!Or(ge)(De,void 0,void 0)))return 0;Bt=10}return Bt}return 0;var ge,De}function Fr(G){return typeof G!="string"&&(Array.isArray(G)?G.every(Fr):!!G.exclusive)}class Br{constructor(n,g,M,Z){this.uri=n,this.languageId=g,this.notebookUri=M,this.notebookType=Z}equals(n){var g,M;return this.notebookType===n.notebookType&&this.languageId===n.languageId&&this.uri.toString()===n.uri.toString()&&((g=this.notebookUri)===null||g===void 0?void 0:g.toString())===((M=n.notebookUri)===null||M===void 0?void 0:M.toString())}}class Wn{constructor(n){this._notebookInfoResolver=n,this._clock=0,this._entries=[],this._onDidChange=new f.Q5,this.onDidChange=this._onDidChange.event}register(n,g){let M={selector:n,provider:g,_score:-1,_time:this._clock++};return this._entries.push(M),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,u.OF)(()=>{if(M){let Z=this._entries.indexOf(M);Z>=0&&(this._entries.splice(Z,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),M=void 0)}})}has(n){return this.all(n).length>0}all(n){if(!n)return[];this._updateScores(n);let g=[];for(let M of this._entries)M._score>0&&g.push(M.provider);return g}ordered(n){let g=[];return this._orderedForEach(n,M=>g.push(M.provider)),g}orderedGroups(n){let g=[],M,Z;return this._orderedForEach(n,ae=>{M&&Z===ae._score?M.push(ae.provider):(Z=ae._score,M=[ae.provider],g.push(M))}),g}_orderedForEach(n,g){this._updateScores(n);for(let M of this._entries)M._score>0&&g(M)}_updateScores(n){var g,M;let Z=(g=this._notebookInfoResolver)===null||g===void 0?void 0:g.call(this,n.uri),ae=Z?new Br(n.uri,n.getLanguageId(),Z.uri,Z.type):new Br(n.uri,n.getLanguageId(),void 0,void 0);if(!(!((M=this._lastCandidate)===null||M===void 0)&&M.equals(ae))){this._lastCandidate=ae;for(let ge of this._entries)if(ge._score=tr(ge.selector,ae.uri,ae.languageId,(0,w.pt)(n),ae.notebookUri,ae.notebookType),Fr(ge.selector)&&ge._score>0){for(let De of this._entries)De._score=0;ge._score=1e3;break}this._entries.sort(Wn._compareByScoreAndTime)}}static _compareByScoreAndTime(n,g){return n._score<g._score?1:n._score>g._score?-1:En(n.selector)&&!En(g.selector)?1:!En(n.selector)&&En(g.selector)?-1:n._time<g._time?1:n._time>g._time?-1:0}}function En(G){return typeof G!="string"&&(Array.isArray(G)?G.some(En):!!G.isBuiltin)}var Vn=t(1922);(0,Ni.z)(Vn.p,class{constructor(){this.referenceProvider=new Wn(this._score.bind(this)),this.renameProvider=new Wn(this._score.bind(this)),this.codeActionProvider=new Wn(this._score.bind(this)),this.definitionProvider=new Wn(this._score.bind(this)),this.typeDefinitionProvider=new Wn(this._score.bind(this)),this.declarationProvider=new Wn(this._score.bind(this)),this.implementationProvider=new Wn(this._score.bind(this)),this.documentSymbolProvider=new Wn(this._score.bind(this)),this.inlayHintsProvider=new Wn(this._score.bind(this)),this.colorProvider=new Wn(this._score.bind(this)),this.codeLensProvider=new Wn(this._score.bind(this)),this.documentFormattingEditProvider=new Wn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Wn(this._score.bind(this)),this.onTypeFormattingEditProvider=new Wn(this._score.bind(this)),this.signatureHelpProvider=new Wn(this._score.bind(this)),this.hoverProvider=new Wn(this._score.bind(this)),this.documentHighlightProvider=new Wn(this._score.bind(this)),this.selectionRangeProvider=new Wn(this._score.bind(this)),this.foldingRangeProvider=new Wn(this._score.bind(this)),this.linkProvider=new Wn(this._score.bind(this)),this.inlineCompletionsProvider=new Wn(this._score.bind(this)),this.completionProvider=new Wn(this._score.bind(this)),this.linkedEditingRangeProvider=new Wn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Wn(this._score.bind(this)),this.documentSemanticTokensProvider=new Wn(this._score.bind(this)),this.documentOnDropEditProvider=new Wn(this._score.bind(this)),this.documentPasteEditProvider=new Wn(this._score.bind(this))}_score(G){var n;return(n=this._notebookTypeResolver)===null||n===void 0?void 0:n.call(this,G)}},1);var Mn=t(9069),Eo=t(8313),Ts=t(6007),ir=t(800),Ca=t(9386),Uo=t(8216),wo=t(1765),to=t(4565),vo=t(9488),No=t(8401),xo=t(3193),Io=t(9872);function Yo(G){return Object.isFrozen(G)?G:d._A(G)}class Zn{constructor(n={},g=[],M=[],Z){this._contents=n,this._keys=g,this._overrides=M,this.raw=Z,this.overrideConfigurations=new Map}get rawConfiguration(){var n;if(!this._rawConfiguration)if(!((n=this.raw)===null||n===void 0)&&n.length){let g=this.raw.map(M=>{if(M instanceof Zn)return M;let Z=new wa("");return Z.parseRaw(M),Z.configurationModel});this._rawConfiguration=g.reduce((M,Z)=>Z===M?Z:M.merge(Z),g[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(n){return n?(0,q.Mt)(this.contents,n):this.contents}inspect(n,g){let M=this.rawConfiguration.getValue(n);return{value:M,override:g?this.rawConfiguration.getOverrideValue(n,g):void 0,merged:g?this.rawConfiguration.override(g).getValue(n):M}}getOverrideValue(n,g){let M=this.getContentsForOverrideIdentifer(g);return M?n?(0,q.Mt)(M,n):M:void 0}override(n){let g=this.overrideConfigurations.get(n);return g||(g=this.createOverrideConfigurationModel(n),this.overrideConfigurations.set(n,g)),g}merge(...n){var g,M;let Z=d.I8(this.contents),ae=d.I8(this.overrides),ge=[...this.keys],De=!((g=this.raw)===null||g===void 0)&&g.length?[...this.raw]:[this];for(let ze of n)if(De.push(...!((M=ze.raw)===null||M===void 0)&&M.length?ze.raw:[ze]),!ze.isEmpty()){this.mergeContents(Z,ze.contents);for(let He of ze.overrides){let[Je]=ae.filter(vt=>vo.fS(vt.identifiers,He.identifiers));Je?(this.mergeContents(Je.contents,He.contents),Je.keys.push(...He.keys),Je.keys=vo.EB(Je.keys)):ae.push(d.I8(He))}for(let He of ze.keys)ge.indexOf(He)===-1&&ge.push(He)}return new Zn(Z,ge,ae,De.every(ze=>ze instanceof Zn)?void 0:De)}createOverrideConfigurationModel(n){let g=this.getContentsForOverrideIdentifer(n);if(!g||typeof g!="object"||!Object.keys(g).length)return this;let M={};for(let Z of vo.EB([...Object.keys(this.contents),...Object.keys(g)])){let ae=this.contents[Z],ge=g[Z];ge&&(typeof ae=="object"&&typeof ge=="object"?(ae=d.I8(ae),this.mergeContents(ae,ge)):ae=ge),M[Z]=ae}return new Zn(M,this.keys,this.overrides)}mergeContents(n,g){for(let M of Object.keys(g))M in n&&No.Kn(n[M])&&No.Kn(g[M])?this.mergeContents(n[M],g[M]):n[M]=d.I8(g[M])}getContentsForOverrideIdentifer(n){let g=null,M=null,Z=ae=>{ae&&(M?this.mergeContents(M,ae):M=d.I8(ae))};for(let ae of this.overrides)vo.fS(ae.identifiers,[n])?g=ae.contents:ae.identifiers.includes(n)&&Z(ae.contents);return Z(g),M}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(n,g){this.updateValue(n,g,!0)}setValue(n,g){this.updateValue(n,g,!1)}removeValue(n){let g=this.keys.indexOf(n);g!==-1&&(this.keys.splice(g,1),(0,q.xL)(this.contents,n),xo.eU.test(n)&&this.overrides.splice(this.overrides.findIndex(M=>vo.fS(M.identifiers,(0,xo.ny)(n))),1))}updateValue(n,g,M){(0,q.KV)(this.contents,n,g,Z=>console.error(Z)),(M=M||this.keys.indexOf(n)===-1)&&this.keys.push(n),xo.eU.test(n)&&this.overrides.push({identifiers:(0,xo.ny)(n),keys:Object.keys(this.contents[n]),contents:(0,q.Od)(this.contents[n],Z=>console.error(Z))})}}class wa{constructor(n){this._name=n,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new Zn}parseRaw(n,g){this._raw=n;let{contents:M,keys:Z,overrides:ae,restricted:ge,hasExcludedProperties:De}=this.doParseRaw(n,g);this._configurationModel=new Zn(M,Z,ae,De?[n]:void 0),this._restrictedConfigurations=ge||[]}doParseRaw(n,g){let M=Io.B.as(xo.IP.Configuration).getConfigurationProperties(),Z=this.filter(n,M,!0,g);return n=Z.raw,{contents:(0,q.Od)(n,ae=>console.error(`Conflict in settings file ${this._name}: ${ae}`)),keys:Object.keys(n),overrides:this.toOverrides(n,ae=>console.error(`Conflict in settings file ${this._name}: ${ae}`)),restricted:Z.restricted,hasExcludedProperties:Z.hasExcludedProperties}}filter(n,g,M,Z){let ae=!1;if(!(Z!=null&&Z.scopes)&&!(Z!=null&&Z.skipRestricted))return{raw:n,restricted:[],hasExcludedProperties:ae};let ge={},De=[];for(let ze in n)if(xo.eU.test(ze)&&M){let He=this.filter(n[ze],g,!1,Z);ge[ze]=He.raw,ae=ae||He.hasExcludedProperties,De.push(...He.restricted)}else{let He=g[ze],Je=He?He.scope!==void 0?He.scope:3:void 0;He!=null&&He.restricted&&De.push(ze),Je!==void 0&&Z.scopes!==void 0&&!Z.scopes.includes(Je)||Z.skipRestricted&&(He!=null&&He.restricted)?ae=!0:ge[ze]=n[ze]}return{raw:ge,restricted:De,hasExcludedProperties:ae}}toOverrides(n,g){let M=[];for(let Z of Object.keys(n))if(xo.eU.test(Z)){let ae={};for(let ge in n[Z])ae[ge]=n[Z][ge];M.push({identifiers:(0,xo.ny)(Z),keys:Object.keys(ae),contents:(0,q.Od)(ae,g)})}return M}}class Ms{constructor(n,g,M,Z,ae,ge,De,ze,He,Je,vt,Pt,Bt){this.key=n,this.overrides=g,this._value=M,this.overrideIdentifiers=Z,this.defaultConfiguration=ae,this.policyConfiguration=ge,this.applicationConfiguration=De,this.userConfiguration=ze,this.localUserConfiguration=He,this.remoteUserConfiguration=Je,this.workspaceConfiguration=vt,this.folderConfigurationModel=Pt,this.memoryConfigurationModel=Bt}inspect(n,g,M){let Z=n.inspect(g,M);return{get value(){return Yo(Z.value)},get override(){return Yo(Z.override)},get merged(){return Yo(Z.merged)}}}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}}class ps{constructor(n,g,M,Z,ae=new Zn,ge=new Zn,De=new Zt.Y9,ze=new Zn,He=new Zt.Y9){this._defaultConfiguration=n,this._policyConfiguration=g,this._applicationConfiguration=M,this._localUserConfiguration=Z,this._remoteUserConfiguration=ae,this._workspaceConfiguration=ge,this._folderConfigurations=De,this._memoryConfiguration=ze,this._memoryConfigurationByResource=He,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Zt.Y9,this._userConfiguration=null}getValue(n,g,M){return this.getConsolidatedConfigurationModel(n,g,M).getValue(n)}updateValue(n,g,M={}){let Z;M.resource?(Z=this._memoryConfigurationByResource.get(M.resource),Z||(Z=new Zn,this._memoryConfigurationByResource.set(M.resource,Z))):Z=this._memoryConfiguration,g===void 0?Z.removeValue(n):Z.setValue(n,g),M.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(n,g,M){let Z=this.getConsolidatedConfigurationModel(n,g,M),ae=this.getFolderConfigurationModelForResource(g.resource,M),ge=g.resource&&this._memoryConfigurationByResource.get(g.resource)||this._memoryConfiguration,De=new Set;for(let ze of Z.overrides)for(let He of ze.identifiers)Z.getOverrideValue(n,He)!==void 0&&De.add(He);return new Ms(n,g,Z.getValue(n),De.size?[...De]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,M?this._workspaceConfiguration:void 0,ae||void 0,ge)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(n,g,M){let Z=this.getConsolidatedConfigurationModelForResource(g,M);return g.overrideIdentifier&&(Z=Z.override(g.overrideIdentifier)),this._policyConfiguration.isEmpty()||this._policyConfiguration.getValue(n)===void 0||(Z=Z.merge(this._policyConfiguration)),Z}getConsolidatedConfigurationModelForResource({resource:n},g){let M=this.getWorkspaceConsolidatedConfiguration();if(g&&n){let Z=g.getFolder(n);Z&&(M=this.getFolderConsolidatedConfiguration(Z.uri)||M);let ae=this._memoryConfigurationByResource.get(n);ae&&(M=M.merge(ae))}return M}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(n){let g=this._foldersConsolidatedConfigurations.get(n);if(!g){let M=this.getWorkspaceConsolidatedConfiguration(),Z=this._folderConfigurations.get(n);Z?(g=M.merge(Z),this._foldersConsolidatedConfigurations.set(n,g)):g=M}return g}getFolderConfigurationModelForResource(n,g){if(g&&n){let M=g.getFolder(n);if(M)return this._folderConfigurations.get(M.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((n,g)=>{let{contents:M,overrides:Z,keys:ae}=this._folderConfigurations.get(g);return n.push([g,{contents:M,overrides:Z,keys:ae}]),n},[])}}static parse(n){let g=this.parseConfigurationModel(n.defaults),M=this.parseConfigurationModel(n.policy),Z=this.parseConfigurationModel(n.application),ae=this.parseConfigurationModel(n.user),ge=this.parseConfigurationModel(n.workspace),De=n.folders.reduce((ze,He)=>(ze.set(_.o.revive(He[0]),this.parseConfigurationModel(He[1])),ze),new Zt.Y9);return new ps(g,M,Z,ae,new Zn,ge,De,new Zn,new Zt.Y9)}static parseConfigurationModel(n){return new Zn(n.contents,n.keys,n.overrides)}}class nr{constructor(n,g,M,Z){this.change=n,this.previous=g,this.currentConfiguraiton=M,this.currentWorkspace=Z,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(let ae of n.keys)this.affectedKeys.add(ae);for(let[,ae]of n.overrides)for(let ge of ae)this.affectedKeys.add(ge);this._affectsConfigStr=this._marker;for(let ae of this.affectedKeys)this._affectsConfigStr+=ae+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=ps.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(n,g){var M;let Z=this._marker+n,ae=this._affectsConfigStr.indexOf(Z);if(ae<0)return!1;let ge=ae+Z.length;if(ge>=this._affectsConfigStr.length)return!1;let De=this._affectsConfigStr.charCodeAt(ge);if(De!==this._markerCode1&&De!==this._markerCode2)return!1;if(g){let ze=this.previousConfiguration?this.previousConfiguration.getValue(n,g,(M=this.previous)===null||M===void 0?void 0:M.workspace):void 0,He=this.currentConfiguraiton.getValue(n,g,this.currentWorkspace);return!d.fS(ze,He)}return!0}}var ms=t(7173);let Rs=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class ya extends u.JT{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:f.ju.None}get inChordMode(){return this._currentChords.length>0}constructor(n,g,M,Z,ae){super(),this._contextKeyService=n,this._commandService=g,this._telemetryService=M,this._notificationService=Z,this._logService=ae,this._onDidUpdateKeybindings=this._register(new f.Q5),this._currentChords=[],this._currentChordChecker=new ee.zh,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Jo.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new ee._F,this._logging=!1}dispose(){super.dispose()}_log(n){this._logging&&this._logService.info(`[KeybindingService]: ${n}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(n,g){let M=this._getResolver().lookupPrimaryKeybinding(n,g||this._contextKeyService);if(M)return M.resolvedKeybinding}dispatchEvent(n,g){return this._dispatch(n,g)}softDispatch(n,g){this._log("/ Soft dispatching keyboard event");let M=this.resolveKeyboardEvent(n);if(M.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),null;let[Z]=M.getDispatchChords();if(Z===null)return this._log("\\ Keyboard event cannot be dispatched"),null;let ae=this._contextKeyService.getContext(g),ge=this._currentChords.map(({keypress:De})=>De);return this._getResolver().resolve(ae,ge,Z)}_scheduleLeaveChordMode(){let n=Date.now();this._currentChordChecker.cancelAndSet(()=>{this._documentHasFocus()?Date.now()-n>5e3&&this._leaveChordMode():this._leaveChordMode()},500)}_expectAnotherChord(n,g){switch(this._currentChords.push({keypress:n,label:g}),this._currentChords.length){case 0:throw(0,xe.L6)("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(Qe.NC("first.chord","({0}) was pressed. Waiting for second key of chord...",g));break;default:{let M=this._currentChords.map(({label:Z})=>Z).join(", ");this._currentChordStatusMessage=this._notificationService.status(Qe.NC("next.chord","({0}) was pressed. Waiting for next key of chord...",M))}}this._scheduleLeaveChordMode(),ms.F.enabled&&ms.F.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],ms.F.enable()}_dispatch(n,g){return this._doDispatch(this.resolveKeyboardEvent(n),g,!1)}_singleModifierDispatch(n,g){let M=this.resolveKeyboardEvent(n),[Z]=M.getSingleModifierDispatchChords();if(Z)return this._ignoreSingleModifiers.has(Z)?(this._log(`+ Ignoring single modifier ${Z} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Jo.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Jo.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${Z}.`),this._currentSingleModifier=Z,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):Z===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${Z} ${Z}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(M,g,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${Z}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));let[ae]=M.getChords();return this._ignoreSingleModifiers=new Jo(ae),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(n,g,M=!1){var Z;let ae=!1;if(n.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let ge=null,De=null;if(M){let[vt]=n.getSingleModifierDispatchChords();ge=vt,De=vt?[vt]:[]}else[ge]=n.getDispatchChords(),De=this._currentChords.map(({keypress:vt})=>vt);if(ge===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),ae;let ze=this._contextKeyService.getContext(g),He=n.getLabel(),Je=this._getResolver().resolve(ze,De,ge);switch(Je.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",He,"[ No matching keybinding ]"),this.inChordMode){let vt=this._currentChords.map(({label:Pt})=>Pt).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${vt}, ${He}".`),this._notificationService.status(Qe.NC("missing.chord","The key combination ({0}, {1}) is not a command.",vt,He),{hideAfter:1e4}),this._leaveChordMode(),ae=!0}return ae;case 1:return this._logService.trace("KeybindingService#dispatch",He,"[ Several keybindings match - more chords needed ]"),ae=!0,this._expectAnotherChord(ge,He),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),ae;case 2:if(this._logService.trace("KeybindingService#dispatch",He,`[ Will dispatch command ${Je.commandId} ]`),Je.commandId===null){if(this.inChordMode){let vt=this._currentChords.map(({label:Pt})=>Pt).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${vt}, ${He}".`),this._notificationService.status(Qe.NC("missing.chord","The key combination ({0}, {1}) is not a command.",vt,He),{hideAfter:1e4}),this._leaveChordMode()}ae=!0}else this.inChordMode&&this._leaveChordMode(),Je.isBubble||(ae=!0),this._log(`+ Invoking command ${Je.commandId}.`),Je.commandArgs===void 0?this._commandService.executeCommand(Je.commandId).then(void 0,vt=>this._notificationService.warn(vt)):this._commandService.executeCommand(Je.commandId,Je.commandArgs).then(void 0,vt=>this._notificationService.warn(vt)),Rs.test(Je.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:Je.commandId,from:"keybinding",detail:(Z=n.getUserSettingsLabel())!==null&&Z!==void 0?Z:void 0});return ae}}mightProducePrintableCharacter(n){return!n.ctrlKey&&!n.metaKey&&(n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30)}}class Jo{constructor(n){this._ctrlKey=!!n&&n.ctrlKey,this._shiftKey=!!n&&n.shiftKey,this._altKey=!!n&&n.altKey,this._metaKey=!!n&&n.metaKey}has(n){switch(n){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Jo.EMPTY=new Jo(null);var Ko=t(1847);let Wr={kind:0},Sa={kind:1};class fs{constructor(n,g,M){var Z;this._log=M,this._defaultKeybindings=n,this._defaultBoundCommands=new Map;for(let ae of n){let ge=ae.command;ge&&ge.charAt(0)!=="-"&&this._defaultBoundCommands.set(ge,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=fs.handleRemovals([].concat(n).concat(g));for(let ae=0,ge=this._keybindings.length;ae<ge;ae++){let De=this._keybindings[ae];if(De.chords.length===0)continue;let ze=(Z=De.when)===null||Z===void 0?void 0:Z.substituteConstants();ze&&ze.type===0||this._addKeyPress(De.chords[0],De)}}static _isTargetedForRemoval(n,g,M){if(g){for(let Z=0;Z<g.length;Z++)if(g[Z]!==n.chords[Z])return!1}return!(M&&M.type!==1&&(!n.when||!(0,At.Fb)(M,n.when)))}static handleRemovals(n){let g=new Map;for(let Z=0,ae=n.length;Z<ae;Z++){let ge=n[Z];if(ge.command&&ge.command.charAt(0)==="-"){let De=ge.command.substring(1);g.has(De)?g.get(De).push(ge):g.set(De,[ge])}}if(g.size===0)return n;let M=[];for(let Z=0,ae=n.length;Z<ae;Z++){let ge=n[Z];if(!ge.command||ge.command.length===0){M.push(ge);continue}if(ge.command.charAt(0)==="-")continue;let De=g.get(ge.command);if(!De||!ge.isDefault){M.push(ge);continue}let ze=!1;for(let He of De){let Je=He.when;if(this._isTargetedForRemoval(ge,He.chords,Je)){ze=!0;break}}ze||M.push(ge)}return M}_addKeyPress(n,g){let M=this._map.get(n);if(M===void 0)return this._map.set(n,[g]),void this._addToLookupMap(g);for(let Z=M.length-1;Z>=0;Z--){let ae=M[Z];if(ae.command===g.command)continue;let ge=!0;for(let De=1;De<ae.chords.length&&De<g.chords.length;De++)if(ae.chords[De]!==g.chords[De]){ge=!1;break}ge&&fs.whenIsEntirelyIncluded(ae.when,g.when)&&this._removeFromLookupMap(ae)}M.push(g),this._addToLookupMap(g)}_addToLookupMap(n){if(!n.command)return;let g=this._lookupMap.get(n.command);g===void 0?(g=[n],this._lookupMap.set(n.command,g)):g.push(n)}_removeFromLookupMap(n){if(!n.command)return;let g=this._lookupMap.get(n.command);if(g!==void 0){for(let M=0,Z=g.length;M<Z;M++)if(g[M]===n)return void g.splice(M,1)}}static whenIsEntirelyIncluded(n,g){return!g||g.type===1||!(!n||n.type===1)&&(0,At.K8)(n,g)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(n,g){let M=this._lookupMap.get(n);if(M===void 0||M.length===0)return null;if(M.length===1)return M[0];for(let Z=M.length-1;Z>=0;Z--){let ae=M[Z];if(g.contextMatchesRules(ae.when))return ae}return M[M.length-1]}resolve(n,g,M){let Z=[...g,M];this._log(`| Resolving ${Z}`);let ae=this._map.get(Z[0]);if(ae===void 0)return this._log("\\ No keybinding entries."),Wr;let ge=null;if(Z.length<2)ge=ae;else{ge=[];for(let ze=0,He=ae.length;ze<He;ze++){let Je=ae[ze];if(Z.length>Je.chords.length)continue;let vt=!0;for(let Pt=1;Pt<Z.length;Pt++)if(Je.chords[Pt]!==Z[Pt]){vt=!1;break}vt&&ge.push(Je)}}let De=this._findCommand(n,ge);return De?Z.length<De.chords.length?(this._log(`\\ From ${ge.length} keybinding entries, awaiting ${De.chords.length-Z.length} more chord(s), when: ${Vr(De.when)}, source: ${As(De)}.`),Sa):(this._log(`\\ From ${ge.length} keybinding entries, matched ${De.command}, when: ${Vr(De.when)}, source: ${As(De)}.`),{kind:2,commandId:De.command,commandArgs:De.commandArgs,isBubble:De.bubble}):(this._log(`\\ From ${ge.length} keybinding entries, no when clauses matched the context.`),Wr)}_findCommand(n,g){for(let M=g.length-1;M>=0;M--){let Z=g[M];if(fs._contextMatchesRules(n,Z.when))return Z}return null}static _contextMatchesRules(n,g){return!g||g.evaluate(n)}}function Vr(G){return G?`${G.serialize()}`:"no when condition"}function As(G){return G.extensionId?G.isBuiltinExtension?`built-in extension ${G.extensionId}`:`user extension ${G.extensionId}`:G.isDefault?"built-in":"user"}var or=t(9989);class Os{constructor(n,g,M,Z,ae,ge,De){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=n,this.chords=n?sr(n.getDispatchChords()):[],n&&this.chords.length===0&&(this.chords=sr(n.getSingleModifierDispatchChords())),this.bubble=!!g&&g.charCodeAt(0)===94,this.command=this.bubble?g.substr(1):g,this.commandArgs=M,this.when=Z,this.isDefault=ae,this.extensionId=ge,this.isBuiltinExtension=De}}function sr(G){let n=[];for(let g=0,M=G.length;g<M;g++){let Z=G[g];if(!Z)return[];n.push(Z)}return n}var Xo=t(2258),jo=t(8030);class La extends Eo.f1{constructor(n,g){if(super(),g.length===0)throw(0,xe.b1)("chords");this._os=n,this._chords=g}getLabel(){return jo.xo.toLabel(this._os,this._chords,n=>this._getLabel(n))}getAriaLabel(){return jo.X4.toLabel(this._os,this._chords,n=>this._getAriaLabel(n))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:jo.jC.toLabel(this._os,this._chords,n=>this._getElectronAccelerator(n))}getUserSettingsLabel(){return jo.r6.toLabel(this._os,this._chords,n=>this._getUserSettingsLabel(n))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(n=>this._getChord(n))}_getChord(n){return new Eo.aZ(n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,this._getLabel(n),this._getAriaLabel(n))}getDispatchChords(){return this._chords.map(n=>this._getChordDispatch(n))}getSingleModifierDispatchChords(){return this._chords.map(n=>this._getSingleModifierChordDispatch(n))}}class _s extends La{constructor(n,g){super(g,n)}_keyCodeToUILabel(n){if(this._os===2)switch(n){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return Xo.kL.toString(n)}_getLabel(n){return n.isDuplicateModifierCase()?"":this._keyCodeToUILabel(n.keyCode)}_getAriaLabel(n){return n.isDuplicateModifierCase()?"":Xo.kL.toString(n.keyCode)}_getElectronAccelerator(n){return Xo.kL.toElectronAccelerator(n.keyCode)}_getUserSettingsLabel(n){if(n.isDuplicateModifierCase())return"";let g=Xo.kL.toUserSettingsUS(n.keyCode);return g&&g.toLowerCase()}_getChordDispatch(n){return _s.getDispatchStr(n)}static getDispatchStr(n){if(n.isModifierKey())return null;let g="";return n.ctrlKey&&(g+="ctrl+"),n.shiftKey&&(g+="shift+"),n.altKey&&(g+="alt+"),n.metaKey&&(g+="meta+"),g+=Xo.kL.toString(n.keyCode),g}_getSingleModifierChordDispatch(n){return n.keyCode!==5||n.shiftKey||n.altKey||n.metaKey?n.keyCode!==4||n.ctrlKey||n.altKey||n.metaKey?n.keyCode!==6||n.ctrlKey||n.shiftKey||n.metaKey?n.keyCode!==57||n.ctrlKey||n.shiftKey||n.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(n){let g=Xo.Vd[n];if(g!==-1)return g;switch(n){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(n){if(!n)return null;if(n instanceof Eo.$M)return n;let g=this._scanCodeToKeyCode(n.scanCode);return g===0?null:new Eo.$M(n.ctrlKey,n.shiftKey,n.altKey,n.metaKey,g)}static resolveKeybinding(n,g){let M=sr(n.chords.map(Z=>this._toKeyCodeChord(Z)));return M.length>0?[new _s(M,g)]:[]}}var Oo,ka=t(4349),rr=t(382),ar=t(913),Ps=t(5935),Da=t(3425),vs=t(161),lr=t(1134);function es(G,n,g){let M=g.mode===Oo.ALIGN?g.offset:g.offset+g.size,Z=g.mode===Oo.ALIGN?g.offset+g.size:g.offset;return g.position===0?n<=G-M?M:n<=Z?Z-n:Math.max(G-n,0):n<=Z?Z-n:n<=G-M?M:0}(function(G){G[G.AVOID=0]="AVOID",G[G.ALIGN=1]="ALIGN"})(Oo||(Oo={}));class ts extends u.JT{constructor(n,g){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=u.JT.None,this.toDisposeOnSetContainer=u.JT.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=te.$(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,te.Cp(this.view),this.setContainer(n,g),this._register((0,u.OF)(()=>this.setContainer(null,1)))}setContainer(n,g){var M;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(M=this.shadowRootHostElement)===null||M===void 0||M.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),n){if(this.container=n,this.useFixedPosition=g!==1,this.useShadowDOM=g===3,this.useShadowDOM){this.shadowRootHostElement=te.$(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});let ae=document.createElement("style");ae.textContent=bs,this.shadowRoot.appendChild(ae),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(te.$("slot"))}else this.container.appendChild(this.view);let Z=new u.SL;ts.BUBBLE_UP_EVENTS.forEach(ae=>{Z.add(te.mu(this.container,ae,ge=>{this.onDOMEvent(ge,!1)}))}),ts.BUBBLE_DOWN_EVENTS.forEach(ae=>{Z.add(te.mu(this.container,ae,ge=>{this.onDOMEvent(ge,!0)},!0))}),this.toDisposeOnSetContainer=Z}}show(n){var g,M;this.isVisible()&&this.hide(),te.PO(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",te.$Z(this.view),this.toDisposeOnClean=n.render(this.view)||u.JT.None,this.delegate=n,this.doLayout(),(M=(g=this.delegate).focus)===null||M===void 0||M.call(g)}getViewElement(){return this.view}layout(){this.isVisible()&&(this.delegate.canRelayout!==!1||hi.gn&&vs.D.pointerEvents?(this.delegate.layout&&this.delegate.layout(),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;let n=this.delegate.getAnchor(),g;if(te.Re(n)){let Je=te.i(n),vt=te.I8(n);g={top:Je.top*vt,left:Je.left*vt,width:Je.width*vt,height:Je.height*vt}}else g={top:n.y,left:n.x,width:n.width||1,height:n.height||2};let M=te.w(this.view),Z=te.wn(this.view),ae=this.delegate.anchorPosition||0,ge=this.delegate.anchorAlignment||0,De,ze;if((this.delegate.anchorAxisAlignment||0)===0){let Je={offset:g.top-window.pageYOffset,size:g.height,position:ae===0?0:1},vt={offset:g.left,size:g.width,position:ge===0?0:1,mode:Oo.ALIGN};De=es(window.innerHeight,Z,Je)+window.pageYOffset,lr.e.intersects({start:De,end:De+Z},{start:Je.offset,end:Je.offset+Je.size})&&(vt.mode=Oo.AVOID),ze=es(window.innerWidth,M,vt)}else{let Je={offset:g.left,size:g.width,position:ge===0?0:1},vt={offset:g.top,size:g.height,position:ae===0?0:1,mode:Oo.ALIGN};ze=es(window.innerWidth,M,Je),lr.e.intersects({start:ze,end:ze+M},{start:Je.offset,end:Je.offset+Je.size})&&(vt.mode=Oo.AVOID),De=es(window.innerHeight,Z,vt)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(ae===0?"bottom":"top"),this.view.classList.add(ge===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);let He=te.i(this.container);this.view.style.top=De-(this.useFixedPosition?te.i(this.view).top:He.top)+"px",this.view.style.left=ze-(this.useFixedPosition?te.i(this.view).left:He.left)+"px",this.view.style.width="initial"}hide(n){let g=this.delegate;this.delegate=null,g!=null&&g.onHide&&g.onHide(n),this.toDisposeOnClean.dispose(),te.Cp(this.view)}isVisible(){return!!this.delegate}onDOMEvent(n,g){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(n,document.activeElement):g&&!te.jg(n.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}ts.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],ts.BUBBLE_DOWN_EVENTS=["click"];let bs=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`,dr=class extends u.JT{constructor(G){super(),this.layoutService=G,this.currentViewDisposable=u.JT.None,this.container=G.hasContainer?G.container:null,this.contextView=this._register(new ts(this.container,1)),this.layout(),this._register(G.onDidLayout(()=>this.layout()))}setContainer(G,n){this.contextView.setContainer(G,n||1)}showContextView(G,n,g){n?n===this.container&&this.shadowRoot===g||(this.container=n,this.setContainer(n,g?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=g,this.contextView.show(G);let M=(0,u.OF)(()=>{this.currentViewDisposable===M&&this.hideContextView()});return this.currentViewDisposable=M,M}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(G){this.contextView.hide(G)}};dr=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([function(G,n){return function(g,M){n(g,M,G)}}(0,Yt)],dr);var Cs=t(1170),yo=t(8801);let is=[],hr=[],ns=[];function Po(G,n=!1){(function(g,M,Z){let ae=function(ge,De){return{id:ge.id,mime:ge.mime,filename:ge.filename,extension:ge.extension,filepattern:ge.filepattern,firstline:ge.firstline,userConfigured:!1,filenameLowercase:ge.filename?ge.filename.toLowerCase():void 0,extensionLowercase:ge.extension?ge.extension.toLowerCase():void 0,filepatternLowercase:ge.filepattern?Or(ge.filepattern.toLowerCase()):void 0,filepatternOnPath:!!ge.filepattern&&ge.filepattern.indexOf(ii.KR.sep)>=0}}(g);is.push(ae),ae.userConfigured?ns.push(ae):hr.push(ae),Z&&!ae.userConfigured&&is.forEach(ge=>{ge.mime===ae.mime||ge.userConfigured||(ae.extension&&ge.extension===ae.extension&&console.warn(`Overwriting extension <<${ae.extension}>> to now point to mime <<${ae.mime}>>`),ae.filename&&ge.filename===ae.filename&&console.warn(`Overwriting filename <<${ae.filename}>> to now point to mime <<${ae.mime}>>`),ae.filepattern&&ge.filepattern===ae.filepattern&&console.warn(`Overwriting filepattern <<${ae.filepattern}>> to now point to mime <<${ae.mime}>>`),ae.firstline&&ge.firstline===ae.firstline&&console.warn(`Overwriting firstline <<${ae.firstline}>> to now point to mime <<${ae.mime}>>`))})})(G,0,n)}function Hr(G,n,g){var M;let Z,ae,ge;for(let De=g.length-1;De>=0;De--){let ze=g[De];if(n===ze.filenameLowercase){Z=ze;break}if(ze.filepattern&&(!ae||ze.filepattern.length>ae.filepattern.length)){let He=ze.filepatternOnPath?G:n;!((M=ze.filepatternLowercase)===null||M===void 0)&&M.call(ze,He)&&(ae=ze)}ze.extension&&(!ge||ze.extension.length>ge.extension.length)&&n.endsWith(ze.extensionLowercase)&&(ge=ze)}return Z||ae||ge||void 0}let Fs=Object.prototype.hasOwnProperty,zr="vs.editor.nullLanguage";class Na{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(zr,0),this._register(yo.bd,1),this._nextLanguageId=2}_register(n,g){this._languageIdToLanguage[g]=n,this._languageToLanguageId.set(n,g)}register(n){if(this._languageToLanguageId.has(n))return;let g=this._nextLanguageId++;this._register(n,g)}encodeLanguageId(n){return this._languageToLanguageId.get(n)||0}decodeLanguageId(n){return this._languageIdToLanguage[n]||zr}}class $o extends u.JT{constructor(n=!0,g=!1){super(),this._onDidChange=this._register(new f.Q5),this.onDidChange=this._onDidChange.event,$o.instanceCount++,this._warnOnOverwrite=g,this.languageIdCodec=new Na,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},n&&(this._initializeFromRegistry(),this._register(yo.dQ.onDidChangeLanguages(M=>{this._initializeFromRegistry()})))}dispose(){$o.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},is=is.filter(g=>g.userConfigured),hr=[];let n=[].concat(yo.dQ.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(n)}_registerLanguages(n){for(let g of n)this._registerLanguage(g);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(g=>{let M=this._languages[g];M.name&&(this._nameMap[M.name]=M.identifier),M.aliases.forEach(Z=>{this._lowercaseNameMap[Z.toLowerCase()]=M.identifier}),M.mimetypes.forEach(Z=>{this._mimeTypesMap[Z]=M.identifier})}),Io.B.as(xo.IP.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(n){let g=n.id,M;Fs.call(this._languages,g)?M=this._languages[g]:(this.languageIdCodec.register(g),M={identifier:g,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[g]=M),this._mergeLanguage(M,n)}_mergeLanguage(n,g){let M=g.id,Z=null;if(Array.isArray(g.mimetypes)&&g.mimetypes.length>0&&(n.mimetypes.push(...g.mimetypes),Z=g.mimetypes[0]),Z||(Z=`text/x-${M}`,n.mimetypes.push(Z)),Array.isArray(g.extensions)){g.configuration?n.extensions=g.extensions.concat(n.extensions):n.extensions=n.extensions.concat(g.extensions);for(let De of g.extensions)Po({id:M,mime:Z,extension:De},this._warnOnOverwrite)}if(Array.isArray(g.filenames))for(let De of g.filenames)Po({id:M,mime:Z,filename:De},this._warnOnOverwrite),n.filenames.push(De);if(Array.isArray(g.filenamePatterns))for(let De of g.filenamePatterns)Po({id:M,mime:Z,filepattern:De},this._warnOnOverwrite);if(typeof g.firstLine=="string"&&g.firstLine.length>0){let De=g.firstLine;De.charAt(0)!=="^"&&(De="^"+De);try{let ze=new RegExp(De);(0,I.IO)(ze)||Po({id:M,mime:Z,firstline:ze},this._warnOnOverwrite)}catch(ze){console.warn(`[${g.id}]: Invalid regular expression \`${De}\`: `,ze)}}n.aliases.push(M);let ae=null;if(g.aliases!==void 0&&Array.isArray(g.aliases)&&(ae=g.aliases.length===0?[null]:g.aliases),ae!==null)for(let De of ae)De&&De.length!==0&&n.aliases.push(De);let ge=ae!==null&&ae.length>0;if(!(ge&&ae[0]===null)){let De=(ge?ae[0]:null)||M;!ge&&n.name||(n.name=De)}g.configuration&&n.configurationFiles.push(g.configuration),g.icon&&n.icons.push(g.icon)}isRegisteredLanguageId(n){return!!n&&Fs.call(this._languages,n)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(n){let g=n.toLowerCase();return Fs.call(this._lowercaseNameMap,g)?this._lowercaseNameMap[g]:null}getLanguageIdByMimeType(n){return n&&Fs.call(this._mimeTypesMap,n)?this._mimeTypesMap[n]:null}guessLanguageIdByFilepathOrFirstLine(n,g){return n||g?function(M,Z){return function(ae,ge){let De;if(ae)switch(ae.scheme){case ki.lg.file:De=ae.fsPath;break;case ki.lg.data:De=Ps.Vb.parseMetaData(ae).get(Ps.Vb.META_DATA_LABEL);break;case ki.lg.vscodeNotebookCell:De=void 0;break;default:De=ae.path}if(!De)return[{id:"unknown",mime:Cs.v.unknown}];De=De.toLowerCase();let ze=(0,ii.EZ)(De),He=Hr(De,ze,ns);if(He)return[He,{id:yo.bd,mime:Cs.v.text}];let Je=Hr(De,ze,hr);if(Je)return[Je,{id:yo.bd,mime:Cs.v.text}];if(ge){let vt=function(Pt){if((0,I.uS)(Pt)&&(Pt=Pt.substr(1)),Pt.length>0)for(let Bt=is.length-1;Bt>=0;Bt--){let ni=is[Bt];if(!ni.firstline)continue;let Ci=Pt.match(ni.firstline);if(Ci&&Ci.length>0)return ni}}(ge);if(vt)return[vt,{id:yo.bd,mime:Cs.v.text}]}return[{id:"unknown",mime:Cs.v.unknown}]}(M,Z).map(ae=>ae.id)}(n,g):[]}}$o.instanceCount=0;class ws extends u.JT{constructor(n=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new f.Q5),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new f.Q5),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new f.Q5({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,ws.instanceCount++,this._registry=this._register(new $o(!0,n)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){ws.instanceCount--,super.dispose()}isRegisteredLanguageId(n){return this._registry.isRegisteredLanguageId(n)}getLanguageIdByLanguageName(n){return this._registry.getLanguageIdByLanguageName(n)}getLanguageIdByMimeType(n){return this._registry.getLanguageIdByMimeType(n)}guessLanguageIdByFilepathOrFirstLine(n,g){let M=this._registry.guessLanguageIdByFilepathOrFirstLine(n,g);return(0,vo.Xh)(M,null)}createById(n){return new ys(this.onDidChange,()=>this._createAndGetLanguageIdentifier(n))}createByFilepathOrFirstLine(n,g){return new ys(this.onDidChange,()=>{let M=this.guessLanguageIdByFilepathOrFirstLine(n,g);return this._createAndGetLanguageIdentifier(M)})}_createAndGetLanguageIdentifier(n){return n&&this.isRegisteredLanguageId(n)||(n=yo.bd),n}requestBasicLanguageFeatures(n){this._requestedBasicLanguages.has(n)||(this._requestedBasicLanguages.add(n),this._onDidRequestBasicLanguageFeatures.fire(n))}requestRichLanguageFeatures(n){this._requestedRichLanguages.has(n)||(this._requestedRichLanguages.add(n),this.requestBasicLanguageFeatures(n),E.RW.getOrCreate(n),this._onDidRequestRichLanguageFeatures.fire(n))}}ws.instanceCount=0;class ys{constructor(n,g){this._onDidChangeLanguages=n,this._selector=g,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new f.Q5({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var n;let g=this._selector();g!==this.languageId&&(this.languageId=g,(n=this._emitter)===null||n===void 0||n.fire(this.languageId))}}var Bs=t(2444),jn=t(4144),Ws=t(7448),cr=t(6268),os=t(553),Ur=t(8609),bo=t(1212);let Vs=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,ur=/(&amp;)?(&amp;)([^\s&])/g;var Hs;(function(G){G[G.Right=0]="Right",G[G.Left=1]="Left"})(Hs||(Hs={}));class ss extends bt.o{constructor(n,g,M,Z){n.classList.add("monaco-menu-container"),n.setAttribute("role","presentation");let ae=document.createElement("div");ae.classList.add("monaco-menu"),ae.setAttribute("role","presentation"),super(ae,{orientation:1,actionViewItemProvider:ze=>this.doGetActionViewItem(ze,M,ge),context:M.context,actionRunner:M.actionRunner,ariaLabel:M.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...hi.dz||hi.IJ?[10]:[]],keyDown:!0}}),this.menuStyles=Z,this.menuElement=ae,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new u.SL),this.initializeOrUpdateStyleSheet(n,Z),this._register(os.o.addTarget(ae)),(0,te.nm)(ae,te.tw.KEY_DOWN,ze=>{new Mn.y(ze).equals(2)&&ze.preventDefault()}),M.enableMnemonics&&this.menuDisposables.add((0,te.nm)(ae,te.tw.KEY_DOWN,ze=>{let He=ze.key.toLocaleLowerCase();if(this.mnemonics.has(He)){te.zB.stop(ze,!0);let Je=this.mnemonics.get(He);if(Je.length===1&&(Je[0]instanceof zs&&Je[0].container&&this.focusItemByElement(Je[0].container),Je[0].onClick(ze)),Je.length>1){let vt=Je.shift();vt&&vt.container&&(this.focusItemByElement(vt.container),Je.push(vt)),this.mnemonics.set(He,Je)}}})),hi.IJ&&this._register((0,te.nm)(ae,te.tw.KEY_DOWN,ze=>{let He=new Mn.y(ze);He.equals(14)||He.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),te.zB.stop(ze,!0)):(He.equals(13)||He.equals(12))&&(this.focusedItem=0,this.focusPrevious(),te.zB.stop(ze,!0))})),this._register((0,te.nm)(this.domNode,te.tw.MOUSE_OUT,ze=>{let He=ze.relatedTarget;(0,te.jg)(He,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),ze.stopPropagation())})),this._register((0,te.nm)(this.actionsList,te.tw.MOUSE_OVER,ze=>{let He=ze.target;if(He&&(0,te.jg)(He,this.actionsList)&&He!==this.actionsList){for(;He.parentElement!==this.actionsList&&He.parentElement!==null;)He=He.parentElement;if(He.classList.contains("action-item")){let Je=this.focusedItem;this.setFocusedItem(He),Je!==this.focusedItem&&this.updateFocus()}}})),this._register(os.o.addTarget(this.actionsList)),this._register((0,te.nm)(this.actionsList,os.t.Tap,ze=>{let He=ze.initialTarget;if(He&&(0,te.jg)(He,this.actionsList)&&He!==this.actionsList){for(;He.parentElement!==this.actionsList&&He.parentElement!==null;)He=He.parentElement;if(He.classList.contains("action-item")){let Je=this.focusedItem;this.setFocusedItem(He),Je!==this.focusedItem&&this.updateFocus()}}}));let ge={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new ht.s$(ae,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));let De=this.scrollableElement.getDomNode();De.style.position="",this.styleScrollElement(De,Z),this._register((0,te.nm)(ae,os.t.Change,ze=>{te.zB.stop(ze,!0);let He=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:He-ze.translationY})})),this._register((0,te.nm)(De,te.tw.MOUSE_UP,ze=>{ze.preventDefault()})),ae.style.maxHeight=`${Math.max(10,window.innerHeight-n.getBoundingClientRect().top-35)}px`,g=g.filter(ze=>{var He;return!(!((He=M.submenuIds)===null||He===void 0)&&He.has(ze.id))||(console.warn(`Found submenu cycle: ${ze.id}`),!1)}),this.push(g,{icon:!0,label:!0,isMenu:!0}),n.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(ze=>!(ze instanceof jr)).forEach((ze,He,Je)=>{ze.updatePositionInSet(He+1,Je.length)})}initializeOrUpdateStyleSheet(n,g){this.styleSheet||((0,te.OO)(n)?this.styleSheet=(0,te.dS)(n):(ss.globalStyleSheet||(ss.globalStyleSheet=(0,te.dS)()),this.styleSheet=ss.globalStyleSheet)),this.styleSheet.textContent=function(M,Z){let ae=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${$r(me.l.menuSelection)}
${$r(me.l.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(Z){ae+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;let ge=M.scrollbarShadow;ge&&(ae+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${ge} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${ge} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${ge} 6px 6px 6px -6px inset;
				}
			`);let De=M.scrollbarSliderBackground;De&&(ae+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${De};
				}
			`);let ze=M.scrollbarSliderHoverBackground;ze&&(ae+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${ze};
				}
			`);let He=M.scrollbarSliderActiveBackground;He&&(ae+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${He};
				}
			`)}return ae}(g,(0,te.OO)(n))}styleScrollElement(n,g){var M,Z;let ae=(M=g.foregroundColor)!==null&&M!==void 0?M:"",ge=(Z=g.backgroundColor)!==null&&Z!==void 0?Z:"",De=g.borderColor?`1px solid ${g.borderColor}`:"",ze=g.shadowColor?`0 2px 8px ${g.shadowColor}`:"";n.style.outline=De,n.style.borderRadius="5px",n.style.color=ae,n.style.backgroundColor=ge,n.style.boxShadow=ze}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(n){let g=this.focusedItem;this.setFocusedItem(n),g!==this.focusedItem&&this.updateFocus()}setFocusedItem(n){for(let g=0;g<this.actionsList.children.length;g++)if(n===this.actionsList.children[g]){this.focusedItem=g;break}}updateFocus(n){super.updateFocus(n,!0,!0),this.focusedItem!==void 0&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(n,g,M){if(n instanceof xt.Z0)return new jr(g.context,n,{icon:!0},this.menuStyles);if(n instanceof xt.wY){let Z=new zs(n,n.actions,M,Object.assign(Object.assign({},g),{submenuIds:new Set([...g.submenuIds||[],n.id])}),this.menuStyles);if(g.enableMnemonics){let ae=Z.getMnemonic();if(ae&&Z.isEnabled()){let ge=[];this.mnemonics.has(ae)&&(ge=this.mnemonics.get(ae)),ge.push(Z),this.mnemonics.set(ae,ge)}}return Z}{let Z={enableMnemonics:g.enableMnemonics,useEventAsContext:g.useEventAsContext};if(g.getKeyBinding){let ge=g.getKeyBinding(n);if(ge){let De=ge.getLabel();De&&(Z.keybinding=De)}}let ae=new Kr(g.context,n,Z,this.menuStyles);if(g.enableMnemonics){let ge=ae.getMnemonic();if(ge&&ae.isEnabled()){let De=[];this.mnemonics.has(ge)&&(De=this.mnemonics.get(ge)),De.push(ae),this.mnemonics.set(ge,De)}}return ae}}}class Kr extends Ur.YH{constructor(n,g,M,Z){if(M.isMenu=!0,super(g,g,M),this.menuStyle=Z,this.options=M,this.options.icon=M.icon!==void 0&&M.icon,this.options.label=M.label===void 0||M.label,this.cssClass="",this.options.label&&M.enableMnemonics){let ae=this.action.label;if(ae){let ge=Vs.exec(ae);ge&&(this.mnemonic=(ge[1]?ge[1]:ge[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new ee.pY(()=>{this.element&&(this._register((0,te.nm)(this.element,te.tw.MOUSE_UP,ae=>{if(te.zB.stop(ae,!0),cr.isFirefox){if(new Ws.n(ae).rightButton)return;this.onClick(ae)}else setTimeout(()=>{this.onClick(ae)},0)})),this._register((0,te.nm)(this.element,te.tw.CONTEXT_MENU,ae=>{te.zB.stop(ae,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(n){super.render(n),this.element&&(this.container=n,this.item=(0,te.R3)(this.element,(0,te.$)("a.action-menu-item")),this._action.id===xt.Z0.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,te.R3)(this.item,(0,te.$)("span.menu-item-check"+mi.k.asCSSSelector(me.l.menuSelection))),this.check.setAttribute("role","none"),this.label=(0,te.R3)(this.item,(0,te.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,te.R3)(this.item,(0,te.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var n;super.focus(),(n=this.item)===null||n===void 0||n.focus(),this.applyStyle()}updatePositionInSet(n,g){this.item&&(this.item.setAttribute("aria-posinset",`${n}`),this.item.setAttribute("aria-setsize",`${g}`))}updateLabel(){var n;if(this.label&&this.options.label){(0,te.PO)(this.label);let g=(0,bo.x$)(this.action.label);if(g){let M=function(ae){let ge=Vs,De=ge.exec(ae);if(!De)return ae;let ze=!De[1];return ae.replace(ge,ze?"$2$3":"").trim()}(g);this.options.enableMnemonics||(g=M),this.label.setAttribute("aria-label",M.replace(/&&/g,"&"));let Z=Vs.exec(g);if(Z){g=I.YU(g),ur.lastIndex=0;let ae=ur.exec(g);for(;ae&&ae[1];)ae=ur.exec(g);let ge=De=>De.replace(/&amp;&amp;/g,"&amp;");ae?this.label.append(I.j3(ge(g.substr(0,ae.index))," "),(0,te.$)("u",{"aria-hidden":"true"},ae[3]),I.oL(ge(g.substr(ae.index+ae[0].length))," ")):this.label.innerText=ge(g).trim(),(n=this.item)===null||n===void 0||n.setAttribute("aria-keyshortcuts",(Z[1]?Z[1]:Z[3]).toLocaleLowerCase())}else this.label.innerText=g.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;let n=this.action.checked;this.item.classList.toggle("checked",!!n),n!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",n?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){let n=this.element&&this.element.classList.contains("focused"),g=n&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,M=n&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,Z=n&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",ae=n&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=g!=null?g:"",this.item.style.backgroundColor=M!=null?M:"",this.item.style.outline=Z,this.item.style.outlineOffset=ae),this.check&&(this.check.style.color=g!=null?g:"")}}class zs extends Kr{constructor(n,g,M,Z,ae){super(n,n,Z,ae),this.submenuActions=g,this.parentData=M,this.submenuOptions=Z,this.mysubmenu=null,this.submenuDisposables=this._register(new u.SL),this.mouseOver=!1,this.expandDirection=Z&&Z.expandDirection!==void 0?Z.expandDirection:Hs.Right,this.showScheduler=new ee.pY(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new ee.pY(()=>{this.element&&!(0,te.jg)((0,te.vY)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(n){super.render(n),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,te.R3)(this.item,(0,te.$)("span.submenu-indicator"+mi.k.asCSSSelector(me.l.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,te.nm)(this.element,te.tw.KEY_UP,g=>{let M=new Mn.y(g);(M.equals(17)||M.equals(3))&&(te.zB.stop(g,!0),this.createSubmenu(!0))})),this._register((0,te.nm)(this.element,te.tw.KEY_DOWN,g=>{let M=new Mn.y(g);(0,te.vY)()===this.item&&(M.equals(17)||M.equals(3))&&te.zB.stop(g,!0)})),this._register((0,te.nm)(this.element,te.tw.MOUSE_OVER,g=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register((0,te.nm)(this.element,te.tw.MOUSE_LEAVE,g=>{this.mouseOver=!1})),this._register((0,te.nm)(this.element,te.tw.FOCUS_OUT,g=>{this.element&&!(0,te.jg)((0,te.vY)(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(n){te.zB.stop(n,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(n){if(this.parentData.submenu&&(n||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(g){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(n,g,M,Z){let ae={top:0,left:0};return ae.left=es(n.width,g.width,{position:Z===Hs.Right?0:1,offset:M.left,size:M.width}),ae.left>=M.left&&ae.left<M.left+M.width&&(M.left+10+g.width<=n.width&&(ae.left=M.left+10),M.top+=10,M.height=0),ae.top=es(n.height,g.height,{position:0,offset:M.top,size:0}),ae.top+g.height===M.top&&ae.top+M.height+g.height<=n.height&&(ae.top+=M.height),ae}createSubmenu(n=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,te.R3)(this.element,(0,te.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");let g=getComputedStyle(this.parentData.parent.domNode),M=parseFloat(g.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new ss(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new xt.eZ],this.submenuOptions,this.menuStyle);let Z=this.element.getBoundingClientRect(),ae={top:Z.top-M,left:Z.left,height:Z.height+2*M,width:Z.width},ge=this.submenuContainer.getBoundingClientRect(),{top:De,left:ze}=this.calculateSubmenuMenuLayout(new te.Ro(window.innerWidth,window.innerHeight),te.Ro.lift(ge),ae,this.expandDirection);this.submenuContainer.style.left=ze-ge.left+"px",this.submenuContainer.style.top=De-ge.top+"px",this.submenuDisposables.add((0,te.nm)(this.submenuContainer,te.tw.KEY_UP,He=>{new Mn.y(He).equals(15)&&(te.zB.stop(He,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add((0,te.nm)(this.submenuContainer,te.tw.KEY_DOWN,He=>{new Mn.y(He).equals(15)&&te.zB.stop(He,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(n),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(n){var g;this.item&&((g=this.item)===null||g===void 0||g.setAttribute("aria-expanded",n))}applyStyle(){super.applyStyle();let n=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=n!=null?n:"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class jr extends Ur.gU{constructor(n,g,M,Z){super(n,g,M),this.menuStyles=Z}render(n){super.render(n),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function $r(G){let n=(0,me.u)()[G.id];return`.codicon-${G.id}:before { content: '\\${n.toString(16)}'; }`}var To=t(6253);class qr{constructor(n,g,M,Z){this.contextViewService=n,this.telemetryService=g,this.notificationService=M,this.keybindingService=Z,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(n){this.options=n}showContextMenu(n){let g=n.getActions();if(!g.length)return;let M;this.focusToReturn=document.activeElement;let Z=(0,te.Re)(n.domForShadowRoot)?n.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>n.getAnchor(),canRelayout:!1,anchorAlignment:n.anchorAlignment,anchorAxisAlignment:n.anchorAxisAlignment,render:ae=>{var ge;this.lastContainer=ae;let De=n.getMenuClassName?n.getMenuClassName():"";De&&(ae.className+=" "+De),this.options.blockMouse&&(this.block=ae.appendChild((0,te.$)(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(ge=this.blockDisposable)===null||ge===void 0||ge.dispose(),this.blockDisposable=(0,te.nm)(this.block,te.tw.MOUSE_DOWN,Je=>Je.stopPropagation()));let ze=new u.SL,He=n.actionRunner||new xt.Wi;return He.onWillRun(Je=>this.onActionRun(Je,!n.skipTelemetry),this,ze),He.onDidRun(this.onDidActionRun,this,ze),M=new ss(ae,g,{actionViewItemProvider:n.getActionViewItem,context:n.getActionsContext?n.getActionsContext():null,actionRunner:He,getKeyBinding:n.getKeyBinding?n.getKeyBinding:Je=>this.keybindingService.lookupKeybinding(Je.id)},To.ZR),M.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,ze),M.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,ze),ze.add((0,te.nm)(window,te.tw.BLUR,()=>this.contextViewService.hideContextView(!0))),ze.add((0,te.nm)(window,te.tw.MOUSE_DOWN,Je=>{if(Je.defaultPrevented)return;let vt=new Ws.n(Je),Pt=vt.target;if(!vt.rightButton){for(;Pt;){if(Pt===ae)return;Pt=Pt.parentElement}this.contextViewService.hideContextView(!0)}})),(0,u.F8)(ze,M)},focus:()=>{M==null||M.focus(!!n.autoSelectFirstItem)},onHide:ae=>{var ge,De,ze;(ge=n.onHide)===null||ge===void 0||ge.call(n,!!ae),this.block&&(this.block.remove(),this.block=null),(De=this.blockDisposable)===null||De===void 0||De.dispose(),this.blockDisposable=null,this.lastContainer&&((0,te.vY)()===this.lastContainer||(0,te.jg)((0,te.vY)(),this.lastContainer))&&((ze=this.focusToReturn)===null||ze===void 0||ze.focus()),this.lastContainer=null}},Z,!!Z)}onActionRun(n,g){g&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:n.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(n){n.error&&!(0,xe.n2)(n.error)&&this.notificationService.error(n.error)}}var rs=function(G,n){return function(g,M){n(g,M,G)}};let Us=class extends u.JT{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new qr(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(G,n,g,M,Z,ae){super(),this.telemetryService=G,this.notificationService=n,this.contextViewService=g,this.keybindingService=M,this.menuService=Z,this.contextKeyService=ae,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new f.Q5),this._onDidHideContextMenu=this._store.add(new f.Q5)}configure(G){this.contextMenuHandler.configure(G)}showContextMenu(G){G=gr.transform(G,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},G),{onHide:n=>{var g;(g=G.onHide)===null||g===void 0||g.call(G,n),this._onDidHideContextMenu.fire()}})),te._q.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};var gr;Us=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([rs(0,kt.b),rs(1,rt.lT),rs(2,Wt.u),rs(3,Ko.d),rs(4,jn.co),rs(5,At.i6)],Us),function(G){G.transform=function(n,g,M){if(!((Z=n)&&Z.menuId instanceof jn.eH))return n;var Z;let{menuId:ae,menuActionOptions:ge,contextKeyService:De}=n;return Object.assign(Object.assign({},n),{getActions:()=>{let ze=[];if(ae){let He=g.createMenu(ae,De!=null?De:M);(0,Bs.LJ)(He,ge,ze),He.dispose()}return n.getActions?xt.Z0.join(n.getActions(),ze):ze}})}}(gr||(gr={}));var Ks,qo=t(1050),Gr=t(3897);(function(G){G[G.API=0]="API",G[G.USER=1]="USER"})(Ks||(Ks={}));var Go=t(988),Qo=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},Ss=function(G,n){return function(g,M){n(g,M,G)}},Fo=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};let as=class{constructor(G){this._commandService=G}open(G,n){return Fo(this,void 0,void 0,function*(){if(!(0,Go.xn)(G,ki.lg.command))return!1;if(!(n!=null&&n.allowCommands)||(typeof G=="string"&&(G=_.o.parse(G)),Array.isArray(n.allowCommands)&&!n.allowCommands.includes(G.path)))return!0;let g=[];try{g=(0,Gr.Q)(decodeURIComponent(G.query))}catch(M){try{g=(0,Gr.Q)(G.query)}catch(Z){}}return Array.isArray(g)||(g=[g]),yield this._commandService.executeCommand(G.path,...g),!0})}};as=Qo([Ss(0,to.H)],as);let Ls=class{constructor(G){this._editorService=G}open(G,n){return Fo(this,void 0,void 0,function*(){typeof G=="string"&&(G=_.o.parse(G));let{selection:g,uri:M}=(0,Go.xI)(G);return(G=M).scheme===ki.lg.file&&(G=(0,Ps.AH)(G)),yield this._editorService.openCodeEditor({resource:G,options:Object.assign({selection:g,source:n!=null&&n.fromUserGesture?Ks.USER:Ks.API},n==null?void 0:n.editorOptions)},this._editorService.getFocusedCodeEditor(),n==null?void 0:n.openToSide),!0})}};Ls=Qo([Ss(0,x.$)],Ls);let pr=class{constructor(G,n){this._openers=new Ti.S,this._validators=new Ti.S,this._resolvers=new Ti.S,this._resolvedUriTargets=new Zt.Y9(g=>g.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Ti.S,this._defaultExternalOpener={openExternal:g=>Fo(this,void 0,void 0,function*(){return(0,Go.Gs)(g,ki.lg.http,ki.lg.https)?te.V3(g):window.location.href=g,!0})},this._openers.push({open:(g,M)=>Fo(this,void 0,void 0,function*(){return!(!(M!=null&&M.openExternal)&&!(0,Go.Gs)(g,ki.lg.mailto,ki.lg.http,ki.lg.https,ki.lg.vsls)||(yield this._doOpenExternal(g,M),0))})}),this._openers.push(new as(n)),this._openers.push(new Ls(G))}registerOpener(G){return{dispose:this._openers.unshift(G)}}open(G,n){var g;return Fo(this,void 0,void 0,function*(){let M=typeof G=="string"?_.o.parse(G):G,Z=(g=this._resolvedUriTargets.get(M))!==null&&g!==void 0?g:G;for(let ae of this._validators)if(!(yield ae.shouldOpen(Z,n)))return!1;for(let ae of this._openers)if(yield ae.open(G,n))return!0;return!1})}resolveExternalUri(G,n){return Fo(this,void 0,void 0,function*(){for(let g of this._resolvers)try{let M=yield g.resolveExternalUri(G,n);if(M)return this._resolvedUriTargets.has(M.resolved)||this._resolvedUriTargets.set(M.resolved,G),M}catch(M){}throw new Error("Could not resolve external URI: "+G.toString())})}_doOpenExternal(G,n){return Fo(this,void 0,void 0,function*(){let g=typeof G=="string"?_.o.parse(G):G,M,Z;try{M=(yield this.resolveExternalUri(g,n)).resolved}catch(ae){M=g}if(Z=typeof G=="string"&&g.toString()===M.toString()?G:encodeURI(M.toString(!0)),n==null?void 0:n.allowContributedOpeners){let ae=typeof(n==null?void 0:n.allowContributedOpeners)=="string"?n==null?void 0:n.allowContributedOpeners:void 0;for(let ge of this._externalOpeners)if(yield ge.openExternal(Z,{sourceUri:g,preferredOpenerId:ae},qo.T.None))return!0}return this._defaultExternalOpener.openExternal(Z,{sourceUri:g},qo.T.None)})}dispose(){this._validators.clear()}};pr=Qo([Ss(0,x.$),Ss(1,to.H)],pr);var oo=t(8674),ks=t(8625),Qr=function(G,n){return function(g,M){n(g,M,G)}};class xa extends u.JT{constructor(n){super(),this.model=n,this._markersData=new Map,this._register((0,u.OF)(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(n,g){let M=[...this._markersData.keys()];this._markersData.clear();let Z=this.model.deltaDecorations(M,g);for(let ae=0;ae<Z.length;ae++)this._markersData.set(Z[ae],n[ae]);return M.length!==0||Z.length!==0}getMarker(n){return this._markersData.get(n.id)}}let Zo=class extends u.JT{constructor(G,n){super(),this._markerService=n,this._onDidChangeMarker=this._register(new f.Q5),this._markerDecorations=new Zt.Y9,G.getModels().forEach(g=>this._onModelAdded(g)),this._register(G.onModelAdded(this._onModelAdded,this)),this._register(G.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(G=>G.dispose()),this._markerDecorations.clear()}getMarker(G,n){let g=this._markerDecorations.get(G);return g&&g.getMarker(n)||null}_handleMarkerChange(G){G.forEach(n=>{let g=this._markerDecorations.get(n);g&&this._updateDecorations(g)})}_onModelAdded(G){let n=new xa(G);this._markerDecorations.set(G.uri,n),this._updateDecorations(n)}_onModelRemoved(G){var n;let g=this._markerDecorations.get(G.uri);g&&(g.dispose(),this._markerDecorations.delete(G.uri)),G.uri.scheme!==ki.lg.inMemory&&G.uri.scheme!==ki.lg.internal&&G.uri.scheme!==ki.lg.vscode||(n=this._markerService)===null||n===void 0||n.read({resource:G.uri}).map(M=>M.owner).forEach(M=>this._markerService.remove(M,[G.uri]))}_updateDecorations(G){let n=this._markerService.read({resource:G.model.uri,take:500}),g=n.map(M=>({range:this._createDecorationRange(G.model,M),options:this._createDecorationOption(M)}));G.update(n,g)&&this._onDidChangeMarker.fire(G.model)}_createDecorationRange(G,n){let g=o.e.lift(n);if(n.severity!==oo.ZL.Hint||this._hasMarkerTag(n,1)||this._hasMarkerTag(n,2)||(g=g.setEndPosition(g.startLineNumber,g.startColumn+2)),g=G.validateRange(g),g.isEmpty()){let M=G.getLineLastNonWhitespaceColumn(g.startLineNumber)||G.getLineMaxColumn(g.startLineNumber);if(M===1||g.endColumn>=M)return g;let Z=G.getWordAtPosition(g.getStartPosition());Z&&(g=new o.e(g.startLineNumber,Z.startColumn,g.endLineNumber,Z.endColumn))}else if(n.endColumn===Number.MAX_VALUE&&n.startColumn===1&&g.startLineNumber===g.endLineNumber){let M=G.getLineFirstNonWhitespaceColumn(n.startLineNumber);M<g.endColumn&&(g=new o.e(g.startLineNumber,M,g.endLineNumber,g.endColumn),n.startColumn=M)}return g}_createDecorationOption(G){let n,g,M,Z,ae;switch(G.severity){case oo.ZL.Hint:n=this._hasMarkerTag(G,2)?void 0:this._hasMarkerTag(G,1)?"squiggly-unnecessary":"squiggly-hint",M=0;break;case oo.ZL.Warning:n="squiggly-warning",g=(0,dt.EN)(ks.Re),M=20,ae={color:(0,dt.EN)(Nt.Ivo),position:w.F5.Inline};break;case oo.ZL.Info:n="squiggly-info",g=(0,dt.EN)(ks.eS),M=10;break;case oo.ZL.Error:default:n="squiggly-error",g=(0,dt.EN)(ks.lK),M=30,ae={color:(0,dt.EN)(Nt.Gj_),position:w.F5.Inline}}return G.tags&&(G.tags.indexOf(1)!==-1&&(Z="squiggly-inline-unnecessary"),G.tags.indexOf(2)!==-1&&(Z="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:n,showIfCollapsed:!0,overviewRuler:{color:g,position:w.sh.Right},minimap:ae,zIndex:M,inlineClassName:Z}}_hasMarkerTag(G,n){return!!G.tags&&G.tags.indexOf(n)>=0}};Zo=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([Qr(0,R.q),Qr(1,oo.lT)],Zo);var Zr=t(6357),Bo=t(2075),Yr=t(9954),Wo=t(5215),ls=function(G,n){return function(g,M){n(g,M,G)}};function Mo(G){return G.toString()}function Jr(G){let n=new Yr.yP,g=G.createSnapshot(),M;for(;M=g.read();)n.update(M);return n.digest()}class Ea{constructor(n,g,M){this.model=n,this._modelEventListeners=new u.SL,this.model=n,this._modelEventListeners.add(n.onWillDispose(()=>g(n))),this._modelEventListeners.add(n.onDidChangeLanguage(Z=>M(n,Z)))}dispose(){this._modelEventListeners.dispose()}}let mr=hi.IJ||hi.dz?1:2;class fr{constructor(n,g,M,Z,ae,ge,De,ze){this.uri=n,this.initialUndoRedoSnapshot=g,this.time=M,this.sharesUndoRedoStack=Z,this.heapSize=ae,this.sha1=ge,this.versionId=De,this.alternativeVersionId=ze}}let js=class Mr extends u.JT{constructor(n,g,M,Z,ae){super(),this._configurationService=n,this._resourcePropertiesService=g,this._undoRedoService=M,this._languageService=Z,this._languageConfigurationService=ae,this._onModelAdded=this._register(new f.Q5),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new f.Q5),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new f.Q5),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(ge=>this._updateModelOptions(ge))),this._updateModelOptions(void 0)}static _readModelOptions(n,g){var M;let Z=Bo.D.tabSize;if(n.editor&&n.editor.tabSize!==void 0){let Bt=parseInt(n.editor.tabSize,10);isNaN(Bt)||(Z=Bt),Z<1&&(Z=1)}let ae="tabSize";if(n.editor&&n.editor.indentSize!==void 0&&n.editor.indentSize!=="tabSize"){let Bt=parseInt(n.editor.indentSize,10);isNaN(Bt)||(ae=Math.max(Bt,1))}let ge=Bo.D.insertSpaces;n.editor&&n.editor.insertSpaces!==void 0&&(ge=n.editor.insertSpaces!=="false"&&!!n.editor.insertSpaces);let De=mr,ze=n.eol;ze===`\r
`?De=2:ze===`
`&&(De=1);let He=Bo.D.trimAutoWhitespace;n.editor&&n.editor.trimAutoWhitespace!==void 0&&(He=n.editor.trimAutoWhitespace!=="false"&&!!n.editor.trimAutoWhitespace);let Je=Bo.D.detectIndentation;n.editor&&n.editor.detectIndentation!==void 0&&(Je=n.editor.detectIndentation!=="false"&&!!n.editor.detectIndentation);let vt=Bo.D.largeFileOptimizations;n.editor&&n.editor.largeFileOptimizations!==void 0&&(vt=n.editor.largeFileOptimizations!=="false"&&!!n.editor.largeFileOptimizations);let Pt=Bo.D.bracketPairColorizationOptions;return!((M=n.editor)===null||M===void 0)&&M.bracketPairColorization&&typeof n.editor.bracketPairColorization=="object"&&(Pt={enabled:!!n.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!n.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:g,tabSize:Z,indentSize:ae,insertSpaces:ge,detectIndentation:Je,defaultEOL:De,trimAutoWhitespace:He,largeFileOptimizations:vt,bracketPairColorizationOptions:Pt}}_getEOL(n,g){if(n)return this._resourcePropertiesService.getEOL(n,g);let M=this._configurationService.getValue("files.eol",{overrideIdentifier:g});return M&&typeof M=="string"&&M!=="auto"?M:hi.OS===3||hi.OS===2?`
`:`\r
`}_shouldRestoreUndoStack(){let n=this._configurationService.getValue("files.restoreUndoStack");return typeof n!="boolean"||n}getCreationOptions(n,g,M){let Z=typeof n=="string"?n:n.languageId,ae=this._modelCreationOptionsByLanguageAndResource[Z+g];if(!ae){let ge=this._configurationService.getValue("editor",{overrideIdentifier:Z,resource:g}),De=this._getEOL(g,Z);ae=Mr._readModelOptions({editor:ge,eol:De},M),this._modelCreationOptionsByLanguageAndResource[Z+g]=ae}return ae}_updateModelOptions(n){let g=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let M=Object.keys(this._models);for(let Z=0,ae=M.length;Z<ae;Z++){let ge=M[Z],De=this._models[ge],ze=De.model.getLanguageId(),He=De.model.uri;if(n&&!n.affectsConfiguration("editor",{overrideIdentifier:ze,resource:He})&&!n.affectsConfiguration("files.eol",{overrideIdentifier:ze,resource:He}))continue;let Je=g[ze+He],vt=this.getCreationOptions(ze,He,De.model.isForSimpleWidget);Mr._setModelOptionsForModel(De.model,vt,Je)}}static _setModelOptionsForModel(n,g,M){M&&M.defaultEOL!==g.defaultEOL&&n.getLineCount()===1&&n.setEOL(g.defaultEOL===1?0:1),M&&M.detectIndentation===g.detectIndentation&&M.insertSpaces===g.insertSpaces&&M.tabSize===g.tabSize&&M.indentSize===g.indentSize&&M.trimAutoWhitespace===g.trimAutoWhitespace&&(0,d.fS)(M.bracketPairColorizationOptions,g.bracketPairColorizationOptions)||(g.detectIndentation?(n.detectIndentation(g.insertSpaces,g.tabSize),n.updateOptions({trimAutoWhitespace:g.trimAutoWhitespace,bracketColorizationOptions:g.bracketPairColorizationOptions})):n.updateOptions({insertSpaces:g.insertSpaces,tabSize:g.tabSize,indentSize:g.indentSize,trimAutoWhitespace:g.trimAutoWhitespace,bracketColorizationOptions:g.bracketPairColorizationOptions}))}_insertDisposedModel(n){this._disposedModels.set(Mo(n.uri),n),this._disposedModelsHeapSize+=n.heapSize}_removeDisposedModel(n){let g=this._disposedModels.get(Mo(n));return g&&(this._disposedModelsHeapSize-=g.heapSize),this._disposedModels.delete(Mo(n)),g}_ensureDisposedModelsHeapSize(n){if(this._disposedModelsHeapSize>n){let g=[];for(this._disposedModels.forEach(M=>{M.sharesUndoRedoStack||g.push(M)}),g.sort((M,Z)=>M.time-Z.time);g.length>0&&this._disposedModelsHeapSize>n;){let M=g.shift();this._removeDisposedModel(M.uri),M.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(M.initialUndoRedoSnapshot)}}}_createModelData(n,g,M,Z){let ae=this.getCreationOptions(g,M,Z),ge=new di.yO(n,g,ae,M,this._undoRedoService,this._languageService,this._languageConfigurationService);if(M&&this._disposedModels.has(Mo(M))){let He=this._removeDisposedModel(M),Je=this._undoRedoService.getElements(M),vt=Jr(ge)===He.sha1;if(vt||He.sharesUndoRedoStack){for(let Pt of Je.past)(0,Wo.e9)(Pt)&&Pt.matchesResource(M)&&Pt.setModel(ge);for(let Pt of Je.future)(0,Wo.e9)(Pt)&&Pt.matchesResource(M)&&Pt.setModel(ge);this._undoRedoService.setElementsValidFlag(M,!0,Pt=>(0,Wo.e9)(Pt)&&Pt.matchesResource(M)),vt&&(ge._overwriteVersionId(He.versionId),ge._overwriteAlternativeVersionId(He.alternativeVersionId),ge._overwriteInitialUndoRedoSnapshot(He.initialUndoRedoSnapshot))}else He.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(He.initialUndoRedoSnapshot)}let De=Mo(ge.uri);if(this._models[De])throw new Error("ModelService: Cannot add model because it already exists!");let ze=new Ea(ge,He=>this._onWillDispose(He),(He,Je)=>this._onDidChangeLanguage(He,Je));return this._models[De]=ze,ze}createModel(n,g,M,Z=!1){let ae;return ae=g?this._createModelData(n,g,M,Z):this._createModelData(n,yo.bd,M,Z),this._onModelAdded.fire(ae.model),ae.model}getModels(){let n=[],g=Object.keys(this._models);for(let M=0,Z=g.length;M<Z;M++){let ae=g[M];n.push(this._models[ae].model)}return n}getModel(n){let g=Mo(n),M=this._models[g];return M?M.model:null}_schemaShouldMaintainUndoRedoElements(n){return n.scheme===ki.lg.file||n.scheme===ki.lg.vscodeRemote||n.scheme===ki.lg.vscodeUserData||n.scheme===ki.lg.vscodeNotebookCell||n.scheme==="fake-fs"}_onWillDispose(n){let g=Mo(n.uri),M=this._models[g],Z=this._undoRedoService.getUriComparisonKey(n.uri)!==n.uri.toString(),ae=!1,ge=0;if(Z||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(n.uri)){let ze=this._undoRedoService.getElements(n.uri);if(ze.past.length>0||ze.future.length>0){for(let He of ze.past)(0,Wo.e9)(He)&&He.matchesResource(n.uri)&&(ae=!0,ge+=He.heapSize(n.uri),He.setModel(n.uri));for(let He of ze.future)(0,Wo.e9)(He)&&He.matchesResource(n.uri)&&(ae=!0,ge+=He.heapSize(n.uri),He.setModel(n.uri))}}let De=Mr.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(ae)if(!Z&&ge>De){let ze=M.model.getInitialUndoRedoSnapshot();ze!==null&&this._undoRedoService.restoreSnapshot(ze)}else this._ensureDisposedModelsHeapSize(De-ge),this._undoRedoService.setElementsValidFlag(n.uri,!1,ze=>(0,Wo.e9)(ze)&&ze.matchesResource(n.uri)),this._insertDisposedModel(new fr(n.uri,M.model.getInitialUndoRedoSnapshot(),Date.now(),Z,ge,Jr(n),n.getVersionId(),n.getAlternativeVersionId()));else if(!Z){let ze=M.model.getInitialUndoRedoSnapshot();ze!==null&&this._undoRedoService.restoreSnapshot(ze)}delete this._models[g],M.dispose(),delete this._modelCreationOptionsByLanguageAndResource[n.getLanguageId()+n.uri],this._onModelRemoved.fire(n)}_onDidChangeLanguage(n,g){let M=g.oldLanguage,Z=n.getLanguageId(),ae=this.getCreationOptions(M,n.uri,n.isForSimpleWidget),ge=this.getCreationOptions(Z,n.uri,n.isForSimpleWidget);Mr._setModelOptionsForModel(n,ge,ae),this._onModelModeChanged.fire({model:n,oldLanguageId:M})}};js.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,js=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([ls(0,q.Ui),ls(1,wo.y),ls(2,dn.tJ),ls(3,k.O),ls(4,D.c_)],js);var _r=t(6763),vr=t(8289),Xr=t(725),Kn=t(1157),ea=function(G,n){return function(g,M){n(g,M,G)}};let br=class extends u.JT{constructor(G,n){super(),this.quickInputService=G,this.instantiationService=n,this.registry=Io.B.as(Xr.IP.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(G="",n){this.doShowOrPick(G,!1,n)}doShowOrPick(G,n,g){var M;let[Z,ae]=this.getOrInstantiateProvider(G),ge=this.visibleQuickAccess,De=ge==null?void 0:ge.descriptor;if(ge&&ae&&De===ae)return G===ae.prefix||g!=null&&g.preserveValue||(ge.picker.value=G),void this.adjustValueSelection(ge.picker,ae,g);if(ae&&!(g!=null&&g.preserveValue)){let Pt;if(ge&&De&&De!==ae){let Bt=ge.value.substr(De.prefix.length);Bt&&(Pt=`${ae.prefix}${Bt}`)}if(!Pt){let Bt=Z==null?void 0:Z.defaultFilterValue;Bt===Xr.Ry.LAST?Pt=this.lastAcceptedPickerValues.get(ae):typeof Bt=="string"&&(Pt=`${ae.prefix}${Bt}`)}typeof Pt=="string"&&(G=Pt)}let ze=new u.SL,He=ze.add(this.quickInputService.createQuickPick()),Je;He.value=G,this.adjustValueSelection(He,ae,g),He.placeholder=ae==null?void 0:ae.placeholder,He.quickNavigate=g==null?void 0:g.quickNavigateConfiguration,He.hideInput=!!He.quickNavigate&&!ge,(typeof(g==null?void 0:g.itemActivation)=="number"||g!=null&&g.quickNavigateConfiguration)&&(He.itemActivation=(M=g==null?void 0:g.itemActivation)!==null&&M!==void 0?M:Kn.jG.SECOND),He.contextKey=ae==null?void 0:ae.contextKey,He.filterValue=Pt=>Pt.substring(ae?ae.prefix.length:0),n&&(Je=new ee.CR,ze.add((0,vr.I)(He.onWillAccept)(Pt=>{Pt.veto(),He.hide()}))),ze.add(this.registerPickerListeners(He,Z,ae,G,g==null?void 0:g.providerOptions));let vt=ze.add(new qo.A);return Z&&ze.add(Z.provide(He,vt.token,g==null?void 0:g.providerOptions)),(0,vr.I)(He.onDidHide)(()=>{He.selectedItems.length===0&&vt.cancel(),ze.dispose(),Je==null||Je.complete(He.selectedItems.slice(0))}),He.show(),n?Je==null?void 0:Je.p:void 0}adjustValueSelection(G,n,g){var M;let Z;Z=g!=null&&g.preserveValue?[G.value.length,G.value.length]:[(M=n==null?void 0:n.prefix.length)!==null&&M!==void 0?M:0,G.value.length],G.valueSelection=Z}registerPickerListeners(G,n,g,M,Z){let ae=new u.SL,ge=this.visibleQuickAccess={picker:G,descriptor:g,value:M};return ae.add((0,u.OF)(()=>{ge===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),ae.add(G.onDidChangeValue(De=>{let[ze]=this.getOrInstantiateProvider(De);ze!==n?this.show(De,{preserveValue:!0,providerOptions:Z}):ge.value=De})),g&&ae.add(G.onDidAccept(()=>{this.lastAcceptedPickerValues.set(g,G.value)})),ae}getOrInstantiateProvider(G){let n=this.registry.getQuickAccessProvider(G);if(!n)return[void 0,void 0];let g=this.mapProviderToDescriptor.get(n);return g||(g=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,g)),[g,n]}};br=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([ea(0,Kn.eJ),ea(1,Te.TG)],br);var Ds=t(3416),Cr=t(7488);let Yn="done",ta="active",wr="infinite",yr="infinite-long-running",ia="discrete";class $s extends u.JT{constructor(n,g){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new ee.pY(()=>(0,te.$Z)(this.element),0)),this.longRunningScheduler=this._register(new ee.pY(()=>this.infiniteLongRunning(),$s.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(n,g)}create(n,g){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),n.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(g==null?void 0:g.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(ta,wr,yr,ia),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(n){return this.element.classList.add(Yn),this.element.classList.contains(wr)?(this.bit.style.opacity="0",n?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",n?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(ia,Yn,yr),this.element.classList.add(ta,wr),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(yr)}getContainer(){return this.element}}$s.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var Ia=t(2900),Sr=t(3070);let Ta=te.$;class Ma extends u.JT{constructor(n,g,M){super(),this.parent=n,this.onKeyDown=ae=>te.nm(this.findInput.inputBox.inputElement,te.tw.KEY_DOWN,ge=>{ae(new Mn.y(ge))}),this.onMouseDown=ae=>te.nm(this.findInput.inputBox.inputElement,te.tw.MOUSE_DOWN,ge=>{ae(new Ws.n(ge))}),this.onDidChange=ae=>this.findInput.onDidChange(ae),this.container=te.R3(this.parent,Ta(".quick-input-box")),this.findInput=this._register(new Sr.V(this.container,void 0,{label:"",inputBoxStyles:g,toggleStyles:M}));let Z=this.findInput.inputBox.inputElement;Z.role="combobox",Z.ariaHasPopup="menu",Z.ariaAutoComplete="list",Z.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(n){this.findInput.setValue(n)}select(n=null){this.findInput.inputBox.select(n)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(n){this.findInput.inputBox.setPlaceHolder(n)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(n){this.findInput.inputBox.inputElement.type=n?"password":"text"}set enabled(n){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!n)}set toggles(n){this.findInput.setAdditionalToggles(n)}setAttribute(n,g){this.findInput.inputBox.inputElement.setAttribute(n,g)}showDecoration(n){n===pn.Z.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:n===pn.Z.Info?1:n===pn.Z.Warning?2:3,content:""})}stylesForType(n){return this.findInput.inputBox.stylesForType(n===pn.Z.Info?1:n===pn.Z.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}var Ct=t(9834),e=t(5496),s=t(9579);let y=new s.o(()=>{let G=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:G,collatorIsNumeric:G.resolvedOptions().numeric}});new s.o(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),new s.o(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));var P=t(9898),Q=t(4850),pe=t(6811),Se=t(4742);class Be{constructor(n){this.nodes=n}toString(){return this.nodes.map(n=>typeof n=="string"?n:n.label).join("")}}(function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);ae>3&&ge&&Object.defineProperty(n,g,ge)})([P.H],Be.prototype,"toString",null);let it=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi,Ge={},st=new Se.R("quick-input-button-icon-");function Dt(G){if(!G)return;let n,g=G.dark.toString();return Ge[g]?n=Ge[g]:(n=st.nextId(),te.fk(`.${n}, .hc-light .${n}`,`background-image: ${te.wY(G.light||G.dark)}`),te.fk(`.vs-dark .${n}, .hc-black .${n}`,`background-image: ${te.wY(G.dark)}`),Ge[g]=n),n}var Et=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},Vt=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};let Ht=te.$;class Ut{get checked(){return!!this._checked}set checked(n){n!==this._checked&&(this._checked=n,this._onChecked.fire(n))}constructor(n){this.hidden=!1,this._onChecked=new f.Q5,this.onChecked=this._onChecked.event,Object.assign(this,n)}dispose(){this._onChecked.dispose()}}class ui{get templateId(){return ui.ID}renderTemplate(n){let g=Object.create(null);g.toDisposeElement=[],g.toDisposeTemplate=[],g.entry=te.R3(n,Ht(".quick-input-list-entry"));let M=te.R3(g.entry,Ht("label.quick-input-list-label"));g.toDisposeTemplate.push(te.mu(M,te.tw.CLICK,He=>{g.checkbox.offsetParent||He.preventDefault()})),g.checkbox=te.R3(M,Ht("input.quick-input-list-checkbox")),g.checkbox.type="checkbox",g.toDisposeTemplate.push(te.mu(g.checkbox,te.tw.CHANGE,He=>{g.element.checked=g.checkbox.checked}));let Z=te.R3(M,Ht(".quick-input-list-rows")),ae=te.R3(Z,Ht(".quick-input-list-row")),ge=te.R3(Z,Ht(".quick-input-list-row"));g.label=new Ct.g(ae,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});let De=te.R3(ae,Ht(".quick-input-list-entry-keybinding"));g.keybinding=new e.e(De,hi.OS);let ze=te.R3(ge,Ht(".quick-input-list-label-meta"));return g.detail=new Ct.g(ze,{supportHighlights:!0,supportIcons:!0}),g.separator=te.R3(g.entry,Ht(".quick-input-list-separator")),g.actionBar=new bt.o(g.entry),g.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),g.toDisposeTemplate.push(g.actionBar),g}renderElement(n,g,M){M.element=n,n.element=(0,No.f6)(M.entry);let Z=n.item?n.item:n.separator;M.checkbox.checked=n.checked,M.toDisposeElement.push(n.onChecked(Je=>M.checkbox.checked=Je));let{labelHighlights:ae,descriptionHighlights:ge,detailHighlights:De}=n,ze=Object.create(null);ze.matches=ae||[],ze.descriptionTitle=n.saneDescription,ze.descriptionMatches=ge||[],Z.type!=="separator"?(ze.extraClasses=Z.iconClasses,ze.italic=Z.italic,ze.strikethrough=Z.strikethrough,M.entry.classList.remove("quick-input-list-separator-as-item")):M.entry.classList.add("quick-input-list-separator-as-item"),M.label.setLabel(n.saneLabel,n.saneDescription,ze),M.keybinding.set(Z.type==="separator"?void 0:Z.keybinding),n.saneDetail&&M.detail.setLabel(n.saneDetail,void 0,{matches:De,title:n.saneDetail}),n.item&&n.separator&&n.separator.label?(M.separator.textContent=n.separator.label,M.separator.style.display=""):M.separator.style.display="none",M.entry.classList.toggle("quick-input-list-separator-border",!!n.separator);let He=Z.buttons;He&&He.length?(M.actionBar.push(He.map((Je,vt)=>{let Pt=Je.iconClass||(Je.iconPath?Dt(Je.iconPath):void 0);return Je.alwaysVisible&&(Pt=Pt?`${Pt} always-visible`:"always-visible"),{id:`id-${vt}`,class:Pt,enabled:!0,label:"",tooltip:Je.tooltip||"",run:()=>{Z.type!=="separator"?n.fireButtonTriggered({button:Je,item:Z}):n.fireSeparatorButtonTriggered({button:Je,separator:Z})}}}),{icon:!0,label:!1}),M.entry.classList.add("has-actions")):M.entry.classList.remove("has-actions")}disposeElement(n,g,M){M.toDisposeElement=(0,u.B9)(M.toDisposeElement),M.actionBar.clear()}disposeTemplate(n){n.toDisposeElement=(0,u.B9)(n.toDisposeElement),n.toDisposeTemplate=(0,u.B9)(n.toDisposeTemplate)}}ui.ID="listelement";class gi{getHeight(n){return n.item?n.saneDetail?44:22:24}getTemplateId(n){return ui.ID}}var vi;(function(G){G[G.First=1]="First",G[G.Second=2]="Second",G[G.Last=3]="Last",G[G.Next=4]="Next",G[G.Previous=5]="Previous",G[G.NextPage=6]="NextPage",G[G.PreviousPage=7]="PreviousPage"})(vi||(vi={}));class Bi{constructor(n,g,M){this.parent=n,this.options=M,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new f.Q5,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new f.Q5,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new f.Q5,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new f.Q5,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new f.Q5,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new f.Q5,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new f.Q5,this.onKeyDown=this._onKeyDown.event,this._onLeave=new f.Q5,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=g,this.container=te.R3(this.parent,Ht(".quick-input-list"));let Z=new gi,ae=new Hi;this.list=M.createList("QuickInput",this.container,Z,[new ui],{identityProvider:{getId:De=>De.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:ae}),this.list.getHTMLElement().id=g,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(De=>{let ze=new Mn.y(De);switch(ze.keyCode){case 10:this.toggleCheckbox();break;case 31:(hi.dz?De.metaKey:De.ctrlKey)&&this.list.setFocus((0,vo.w6)(this.list.length));break;case 16:{let He=this.list.getFocus();He.length===1&&He[0]===0&&this._onLeave.fire();break}case 18:{let He=this.list.getFocus();He.length===1&&He[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(ze)})),this.disposables.push(this.list.onMouseDown(De=>{De.browserEvent.button!==2&&De.browserEvent.preventDefault()})),this.disposables.push(te.nm(this.container,te.tw.CLICK,De=>{(De.x||De.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(De=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(De=>{typeof De.index=="number"&&(De.browserEvent.preventDefault(),this.list.setSelection([De.index]))}));let ge=new ee.rH(M.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(De=>Vt(this,void 0,void 0,function*(){var ze;if(De.browserEvent.target instanceof HTMLAnchorElement)ge.cancel();else if(De.browserEvent.relatedTarget instanceof HTMLAnchorElement||!te.jg(De.browserEvent.relatedTarget,(ze=De.element)===null||ze===void 0?void 0:ze.element))try{yield ge.trigger(()=>Vt(this,void 0,void 0,function*(){De.element&&this.showHover(De.element)}))}catch(He){if(!(0,xe.n2)(He))throw He}}))),this.disposables.push(this.list.onMouseOut(De=>{var ze;te.jg(De.browserEvent.relatedTarget,(ze=De.element)===null||ze===void 0?void 0:ze.element)||ge.cancel()})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown,ge)}get onDidChangeFocus(){return f.ju.map(this.list.onDidChangeFocus,n=>n.elements.map(g=>g.item))}get onDidChangeSelection(){return f.ju.map(this.list.onDidChangeSelection,n=>({items:n.elements.map(g=>g.item),event:n.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(n){this.list.scrollTop=n}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(n){this.list.getHTMLElement().ariaLabel=n}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(n,g=!0){for(let M=0,Z=n.length;M<Z;M++){let ae=n[M];if(!ae.hidden){if(!ae.checked)return!1;g=!0}}return g}getCheckedCount(){let n=0,g=this.elements;for(let M=0,Z=g.length;M<Z;M++)g[M].checked&&n++;return n}getVisibleCount(){let n=0,g=this.elements;for(let M=0,Z=g.length;M<Z;M++)g[M].hidden||n++;return n}setAllVisibleChecked(n){try{this._fireCheckedEvents=!1,this.elements.forEach(g=>{g.hidden||(g.checked=n)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(n){this.elementDisposables=(0,u.B9)(this.elementDisposables);let g=Z=>this.fireButtonTriggered(Z),M=Z=>this.fireSeparatorButtonTriggered(Z);this.inputElements=n,this.elements=n.reduce((Z,ae,ge)=>{var De,ze,He;let Je=ge&&n[ge-1],vt=ae.label?ae.label.replace(/\r?\n/g," "):"",Pt=(0,bo.Ho)(vt).text.trim(),Bt,ni,Ci,Fi,Yi,an,Gi;ae.type!=="separator"&&(Bt=ae.meta&&ae.meta.replace(/\r?\n/g," "),ni=ae.description&&ae.description.replace(/\r?\n/g," "),Ci=ae.detail&&ae.detail.replace(/\r?\n/g," "),Fi=(De=ae.highlights)===null||De===void 0?void 0:De.label,Yi=(ze=ae.highlights)===null||ze===void 0?void 0:ze.description,an=(He=ae.highlights)===null||He===void 0?void 0:He.detail,Gi=ae.tooltip);let nn=ae.ariaLabel||[vt,ni,Ci].map(Ji=>(0,bo.JL)(Ji)).filter(Ji=>!!Ji).join(", "),ln=this.parent.classList.contains("show-checkboxes"),$i;if(ae.type==="separator"){if(!ae.buttons)return Z;$i=ae}else Je&&Je.type==="separator"&&!Je.buttons&&($i=Je);let Qi=new Ut({hasCheckbox:ln,index:ge,item:ae.type!=="separator"?ae:void 0,saneLabel:vt,saneSortLabel:Pt,saneMeta:Bt,saneAriaLabel:nn,saneDescription:ni,saneDetail:Ci,saneTooltip:Gi,labelHighlights:Fi,descriptionHighlights:Yi,detailHighlights:an,checked:!1,separator:$i,fireButtonTriggered:g,fireSeparatorButtonTriggered:M});return this.elementDisposables.push(Qi),this.elementDisposables.push(Qi.onChecked(()=>this.fireCheckedEvents())),Z.push(Qi),Z},[]),this.elementsToIndexes=this.elements.reduce((Z,ae,ge)=>{var De;return Z.set((De=ae.item)!==null&&De!==void 0?De:ae.separator,ge),Z},new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(n=>n.item)}setFocusedElements(n){if(this.list.setFocus(n.filter(g=>this.elementsToIndexes.has(g)).map(g=>this.elementsToIndexes.get(g))),n.length>0){let g=this.list.getFocus()[0];typeof g=="number"&&this.list.reveal(g)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(n){this.list.setSelection(n.filter(g=>this.elementsToIndexes.has(g)).map(g=>this.elementsToIndexes.get(g)))}getCheckedElements(){return this.elements.filter(n=>n.checked).map(n=>n.item).filter(n=>!!n)}setCheckedElements(n){try{this._fireCheckedEvents=!1;let g=new Set;for(let M of n)g.add(M);for(let M of this.elements)M.checked=g.has(M.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(n){this.list.getHTMLElement().style.pointerEvents=n?"":"none"}focus(n){if(!this.list.length)return;switch(n===vi.Second&&this.list.length<2&&(n=vi.First),n){case vi.First:this.list.scrollTop=0,this.list.focusFirst(void 0,M=>!!M.item);break;case vi.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,M=>!!M.item);break;case vi.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,M=>!!M.item);break;case vi.Next:{this.list.focusNext(void 0,!0,void 0,Z=>!!Z.item);let M=this.list.getFocus()[0];M!==0&&!this.elements[M-1].item&&this.list.firstVisibleIndex>M-1&&this.list.reveal(M-1);break}case vi.Previous:{this.list.focusPrevious(void 0,!0,void 0,Z=>!!Z.item);let M=this.list.getFocus()[0];M!==0&&!this.elements[M-1].item&&this.list.firstVisibleIndex>M-1&&this.list.reveal(M-1);break}case vi.NextPage:this.list.focusNextPage(void 0,M=>!!M.item);break;case vi.PreviousPage:this.list.focusPreviousPage(void 0,M=>!!M.item)}let g=this.list.getFocus()[0];typeof g=="number"&&this.list.reveal(g)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(n){var g,M,Z;this._lastHover&&!this._lastHover.isDisposed&&((M=(g=this.options.hoverDelegate).onDidHideHover)===null||M===void 0||M.call(g),(Z=this._lastHover)===null||Z===void 0||Z.dispose()),n.element&&n.saneTooltip&&(this._lastHover=this.options.hoverDelegate.showHover({content:n.saneTooltip,target:n.element,linkHandler:ae=>{this.options.linkOpenerDelegate(ae)},showPointer:!0,container:this.container,hoverPosition:1},!1))}layout(n){this.list.getHTMLElement().style.maxHeight=n?44*Math.floor(n/44)+6+"px":"",this.list.layout()}filter(n){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;let g=n;if((n=n.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let Z;this.elements.forEach(ae=>{let ge;ge=this.matchOnLabelMode==="fuzzy"?this.matchOnLabel?(0,No.f6)((0,bo.Gt)(n,(0,bo.Ho)(ae.saneLabel))):void 0:this.matchOnLabel?(0,No.f6)(function(Je,vt){let{text:Pt,iconOffsets:Bt}=vt;if(!Bt||Bt.length===0)return Di(Je,Pt);let ni=(0,I.j3)(Pt," "),Ci=Pt.length-ni.length,Fi=Di(Je,ni);if(Fi)for(let Yi of Fi){let an=Bt[Yi.start+Ci]+Ci;Yi.start+=an,Yi.end+=an}return Fi}(g,(0,bo.Ho)(ae.saneLabel))):void 0;let De=this.matchOnDescription?(0,No.f6)((0,bo.Gt)(n,(0,bo.Ho)(ae.saneDescription||""))):void 0,ze=this.matchOnDetail?(0,No.f6)((0,bo.Gt)(n,(0,bo.Ho)(ae.saneDetail||""))):void 0,He=this.matchOnMeta?(0,No.f6)((0,bo.Gt)(n,(0,bo.Ho)(ae.saneMeta||""))):void 0;if(ge||De||ze||He?(ae.labelHighlights=ge,ae.descriptionHighlights=De,ae.detailHighlights=ze,ae.hidden=!1):(ae.labelHighlights=void 0,ae.descriptionHighlights=void 0,ae.detailHighlights=void 0,ae.hidden=!ae.item||!ae.item.alwaysShow),!this.sortByLabel){let Je=ae.index&&this.inputElements[ae.index-1];Z=Je&&Je.type==="separator"?Je:Z,Z&&!ae.hidden&&(ae.separator=Z,Z=void 0)}})}else this.elements.forEach(Z=>{Z.labelHighlights=void 0,Z.descriptionHighlights=void 0,Z.detailHighlights=void 0,Z.hidden=!1;let ae=Z.index&&this.inputElements[Z.index-1];Z.item&&(Z.separator=ae&&ae.type==="separator"&&!ae.buttons?ae:void 0)});let M=this.elements.filter(Z=>!Z.hidden);if(this.sortByLabel&&n){let Z=n.toLowerCase();M.sort((ae,ge)=>function(De,ze,He){let Je=De.labelHighlights||[],vt=ze.labelHighlights||[];return Je.length&&!vt.length?-1:!Je.length&&vt.length?1:Je.length===0&&vt.length===0?0:function(Pt,Bt,ni){let Ci=Pt.toLowerCase(),Fi=Bt.toLowerCase(),Yi=function(nn,ln,$i){let Qi=nn.toLowerCase(),Ji=ln.toLowerCase(),Oi=Qi.startsWith($i),In=Ji.startsWith($i);if(Oi!==In)return Oi?-1:1;if(Oi&&In){if(Qi.length<Ji.length)return-1;if(Qi.length>Ji.length)return 1}return 0}(Pt,Bt,ni);if(Yi)return Yi;let an=Ci.endsWith(ni);if(an!==Fi.endsWith(ni))return an?-1:1;let Gi=function(nn,ln,$i=!1){let Qi=nn||"",Ji=ln||"",Oi=y.value.collator.compare(Qi,Ji);return y.value.collatorIsNumeric&&Oi===0&&Qi!==Ji?Qi<Ji?-1:1:Oi}(Ci,Fi);return Gi!==0?Gi:Ci.localeCompare(Fi)}(De.saneSortLabel,ze.saneSortLabel,He)}(ae,ge,Z))}return this.elementsToIndexes=M.reduce((Z,ae,ge)=>{var De;return Z.set((De=ae.item)!==null&&De!==void 0?De:ae.separator,ge),Z},new Map),this.list.splice(0,this.list.length,M),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(M.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;let n=this.list.getFocusedElements(),g=this.allVisibleChecked(n);for(let M of n)M.checked=!g}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(n){this.container.style.display=n?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=(0,u.B9)(this.elementDisposables),this.disposables=(0,u.B9)(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(n){this._onButtonTriggered.fire(n)}fireSeparatorButtonTriggered(n){this._onSeparatorButtonTriggered.fire(n)}style(n){this.list.style(n)}toggleHover(){if(!this.list.getFocusedElements()[0].saneTooltip)return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();let n=this.list.getFocusedElements()[0];if(!n)return;this.showHover(n);let g=new u.SL;g.add(this.list.onDidChangeFocus(M=>{M.indexes.length&&this.showHover(M.elements[0])})),this._lastHover&&g.add(this._lastHover),this._toggleHover=g,this.elementDisposables.push(this._toggleHover)}}function Di(G,n){let g=n.toLowerCase().indexOf(G.toLowerCase());return g!==-1?[{start:g,end:g+G.length}]:null}Et([P.H],Bi.prototype,"onDidChangeFocus",null),Et([P.H],Bi.prototype,"onDidChangeSelection",null);class Hi{getWidgetAriaLabel(){return(0,Qe.NC)("quickInput","Quick Input")}getAriaLabel(n){var g;return!((g=n.separator)===null||g===void 0)&&g.label?`${n.saneAriaLabel}, ${n.separator.label}`:n.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(n){return n.hasCheckbox?"checkbox":"option"}isChecked(n){if(n.hasCheckbox)return{value:n.checked,onDidChange:n.onChecked}}}var Ui=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};let Ii=te.$,Ki={iconClass:mi.k.asClassName(me.l.quickInputBack),tooltip:(0,Qe.NC)("quickInput.back","Back"),handle:-1};class Zi extends u.JT{constructor(n){super(),this.ui=n,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=Zi.noPromptMessage,this._severity=pn.Z.Ignore,this.onDidTriggerButtonEmitter=this._register(new f.Q5),this.onDidHideEmitter=this._register(new f.Q5),this.onDisposeEmitter=this._register(new f.Q5),this.visibleDisposables=this._register(new u.SL),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(n){this._title=n,this.update()}get description(){return this._description}set description(n){this._description=n,this.update()}get step(){return this._steps}set step(n){this._steps=n,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(n){this._totalSteps=n,this.update()}get enabled(){return this._enabled}set enabled(n){this._enabled=n,this.update()}get contextKey(){return this._contextKey}set contextKey(n){this._contextKey=n,this.update()}get busy(){return this._busy}set busy(n){this._busy=n,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(n){let g=this._ignoreFocusOut!==n&&!hi.gn;this._ignoreFocusOut=n&&!hi.gn,g&&this.update()}get buttons(){return this._buttons}set buttons(n){this._buttons=n,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(n){this._toggles=n!=null?n:[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(n){this._validationMessage=n,this.update()}get severity(){return this._severity}set severity(n){this._severity=n,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(n=>{this.buttons.indexOf(n)!==-1&&this.onDidTriggerButtonEmitter.fire(n)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(n=Kn.Jq.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:n})}update(){var n,g;if(!this.visible)return;let M=this.getTitle();M&&this.ui.title.textContent!==M?this.ui.title.textContent=M:M||this.ui.title.innerHTML==="&nbsp;"||(this.ui.title.innerText="\xA0");let Z=this.getDescription();if(this.ui.description1.textContent!==Z&&(this.ui.description1.textContent=Z),this.ui.description2.textContent!==Z&&(this.ui.description2.textContent=Z),this.busy&&!this.busyDelay&&(this.busyDelay=new ee._F,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();let ge=this.buttons.filter(ze=>ze===Ki);this.ui.leftActionBar.push(ge.map((ze,He)=>{let Je=new xt.aU(`id-${He}`,"",ze.iconClass||Dt(ze.iconPath),!0,()=>Ui(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(ze)}));return Je.tooltip=ze.tooltip||"",Je}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();let De=this.buttons.filter(ze=>ze!==Ki);this.ui.rightActionBar.push(De.map((ze,He)=>{let Je=new xt.aU(`id-${He}`,"",ze.iconClass||Dt(ze.iconPath),!0,()=>Ui(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(ze)}));return Je.tooltip=ze.tooltip||"",Je}),{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;let ge=(g=(n=this.toggles)===null||n===void 0?void 0:n.filter(De=>De instanceof Ia.Z))!==null&&g!==void 0?g:[];this.ui.inputBox.toggles=ge}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);let ae=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==ae&&(this._lastValidationMessage=ae,te.mc(this.ui.message),function(ge,De,ze){te.mc(De);let He=function(vt){let Pt=[],Bt,ni=0;for(;Bt=it.exec(vt);){Bt.index-ni>0&&Pt.push(vt.substring(ni,Bt.index));let[,Ci,Fi,,Yi]=Bt;Yi?Pt.push({label:Ci,href:Fi,title:Yi}):Pt.push({label:Ci,href:Fi}),ni=Bt.index+Bt[0].length}return ni<vt.length&&Pt.push(vt.substring(ni)),new Be(Pt)}(ge),Je=0;for(let vt of He.nodes)if(typeof vt=="string")De.append(...(0,pe.T)(vt));else{let Pt=vt.title;!Pt&&vt.href.startsWith("command:")?Pt=(0,Qe.NC)("executeCommand","Click to execute command '{0}'",vt.href.substring(8)):Pt||(Pt=vt.href);let Bt=te.$("a",{href:vt.href,title:Pt,tabIndex:Je++},vt.label);Bt.style.textDecoration="underline";let ni=Gi=>{te.cl(Gi)&&te.zB.stop(Gi,!0),ze.callback(vt.href)},Ci=ze.disposables.add(new Q.Y(Bt,te.tw.CLICK)).event,Fi=ze.disposables.add(new Q.Y(Bt,te.tw.KEY_DOWN)).event,Yi=ze.disposables.add(f.ju.chain(Fi)).filter(Gi=>{let nn=new Mn.y(Gi);return nn.equals(10)||nn.equals(3)}).event;ze.disposables.add(os.o.addTarget(Bt));let an=ze.disposables.add(new Q.Y(Bt,os.t.Tap)).event;f.ju.any(Ci,an,Yi)(ni,null,ze.disposables),De.appendChild(Bt)}}(ae,this.ui.message,{callback:ge=>{this.ui.linkOpenerDelegate(ge)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,Qe.NC)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(n){if(this.ui.inputBox.showDecoration(n),n!==pn.Z.Ignore){let g=this.ui.inputBox.stylesForType(n);this.ui.message.style.color=g.foreground?`${g.foreground}`:"",this.ui.message.style.backgroundColor=g.background?`${g.background}`:"",this.ui.message.style.border=g.border?`1px solid ${g.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}Zi.noPromptMessage=(0,Qe.NC)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class cn extends Zi{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new f.Q5),this.onWillAcceptEmitter=this._register(new f.Q5),this.onDidAcceptEmitter=this._register(new f.Q5),this.onDidCustomEmitter=this._register(new f.Q5),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=Kn.jG.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new f.Q5),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new f.Q5),this.onDidTriggerItemButtonEmitter=this._register(new f.Q5),this.onDidTriggerSeparatorButtonEmitter=this._register(new f.Q5),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=n=>n,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(n){this._quickNavigate=n,this.update()}get value(){return this._value}set value(n){this.doSetValue(n)}doSetValue(n,g){this._value!==n&&(this._value=n,g||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(n){this._ariaLabel=n,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(n){this._placeholder=n,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(n){this.ui.list.scrollTop=n}set items(n){this._items=n,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(n){this._canSelectMany=n,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(n){this._canAcceptInBackground=n}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(n){this._matchOnDescription=n,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(n){this._matchOnDetail=n,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(n){this._matchOnLabel=n,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(n){this._matchOnLabelMode=n,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(n){this._sortByLabel=n,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(n){this._autoFocusOnList=n,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(n){this._keepScrollPosition=n}get itemActivation(){return this._itemActivation}set itemActivation(n){this._itemActivation=n}get activeItems(){return this._activeItems}set activeItems(n){this._activeItems=n,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(n){this._selectedItems=n,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?Kn.X5:this.ui.keyMods}set valueSelection(n){this._valueSelection=n,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(n){this._customButton=n,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(n){this._customButtonLabel=n,this.update()}get customHover(){return this._customButtonHover}set customHover(n){this._customButtonHover=n,this.update()}get ok(){return this._ok}set ok(n){this._ok=n,this.update()}get hideInput(){return!!this._hideInput}set hideInput(n){this._hideInput=n,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(vi.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(n=>{this.doSetValue(n,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(n=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(n=>{switch(n.keyCode){case 18:this.ui.list.focus(vi.Next),this.canSelectMany&&this.ui.list.domFocus(),te.zB.stop(n,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(vi.Previous):this.ui.list.focus(vi.Last),this.canSelectMany&&this.ui.list.domFocus(),te.zB.stop(n,!0);break;case 12:this.ui.list.focus(vi.NextPage),this.canSelectMany&&this.ui.list.domFocus(),te.zB.stop(n,!0);break;case 11:this.ui.list.focus(vi.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),te.zB.stop(n,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!n.ctrlKey&&!n.metaKey||n.shiftKey||n.altKey||(this.ui.list.focus(vi.First),te.zB.stop(n,!0));break;case 13:!n.ctrlKey&&!n.metaKey||n.shiftKey||n.altKey||(this.ui.list.focus(vi.Last),te.zB.stop(n,!0))}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(n=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,vo.fS)(n,this._activeItems,(g,M)=>g===M)||(this._activeItems=n,this.onDidChangeActiveEmitter.fire(n))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:n,event:g})=>{this.canSelectMany?n.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&(0,vo.fS)(n,this._selectedItems,(M,Z)=>M===Z)||(this._selectedItems=n,this.onDidChangeSelectionEmitter.fire(n),n.length&&this.handleAccept(g instanceof MouseEvent&&g.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(n=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&(0,vo.fS)(n,this._selectedItems,(g,M)=>g===M)||(this._selectedItems=n,this.onDidChangeSelectionEmitter.fire(n)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(n=>this.onDidTriggerItemButtonEmitter.fire(n))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(n=>this.onDidTriggerSeparatorButtonEmitter.fire(n))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(n){let g=!1;this.onWillAcceptEmitter.fire({veto:()=>g=!0}),g||this.onDidAcceptEmitter.fire({inBackground:n})}registerQuickNavigation(){return te.nm(this.ui.container,te.tw.KEY_UP,n=>{if(this.canSelectMany||!this._quickNavigate)return;let g=new Mn.y(n),M=g.keyCode;this._quickNavigate.keybindings.some(Z=>{let ae=Z.getChords();return!(ae.length>1||(ae[0].shiftKey&&M===4?g.ctrlKey||g.altKey||g.metaKey:!(ae[0].altKey&&M===6||ae[0].ctrlKey&&M===5||ae[0].metaKey&&M===57)))})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;let n=this.keepScrollPosition?this.scrollTop:0,g=!!this.description,M={title:!!this.title||!!this.step||!!this.buttons.length,description:g,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||g,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(M),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let Z=this.ariaLabel;if(!Z&&M.inputBox&&(Z=this.placeholder||cn.DEFAULT_ARIA_LABEL,this.title&&(Z+=` - ${this.title}`)),this.ui.list.ariaLabel!==Z&&(this.ui.list.ariaLabel=(0,No.M2)(Z)),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Kn.jG.NONE:this._itemActivation=Kn.jG.FIRST;break;case Kn.jG.SECOND:this.ui.list.focus(vi.Second),this._itemActivation=Kn.jG.FIRST;break;case Kn.jG.LAST:this.ui.list.focus(vi.Last),this._itemActivation=Kn.jG.FIRST;break;default:this.trySelectFirst()}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",M.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(vi.First)),this.keepScrollPosition&&(this.scrollTop=n)}}cn.DEFAULT_ARIA_LABEL=(0,Qe.NC)("quickInputBox.ariaLabel","Type to narrow down results.");class mn extends Zi{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new f.Q5),this.onDidAcceptEmitter=this._register(new f.Q5),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(n){this._value=n||"",this.update()}get placeholder(){return this._placeholder}set placeholder(n){this._placeholder=n,this.update()}get password(){return this._password}set password(n){this._password=n,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(n=>{n!==this.value&&(this._value=n,this.onDidValueChangeEmitter.fire(n))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");let n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}class hn extends u.JT{constructor(n){super(),this.options=n,this.enabled=!0,this.onDidAcceptEmitter=this._register(new f.Q5),this.onDidCustomEmitter=this._register(new f.Q5),this.onDidTriggerButtonEmitter=this._register(new f.Q5),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new f.Q5),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new f.Q5),this.onHide=this.onHideEmitter.event,this.idPrefix=n.idPrefix,this.parentElement=n.container,this.styles=n.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){let n=g=>{this.keyMods.ctrlCmd=g.ctrlKey||g.metaKey,this.keyMods.alt=g.altKey};this._register(te.nm(window,te.tw.KEY_DOWN,n,!0)),this._register(te.nm(window,te.tw.KEY_UP,n,!0)),this._register(te.nm(window,te.tw.MOUSE_DOWN,n,!0))}getUI(){if(this.ui)return this.ui;let n=te.R3(this.parentElement,Ii(".quick-input-widget.show-file-icons"));n.tabIndex=-1,n.style.display="none";let g=te.dS(n),M=te.R3(n,Ii(".quick-input-titlebar")),Z=this._register(new bt.o(M));Z.domNode.classList.add("quick-input-left-action-bar");let ae=te.R3(M,Ii(".quick-input-title")),ge=this._register(new bt.o(M));ge.domNode.classList.add("quick-input-right-action-bar");let De=te.R3(n,Ii(".quick-input-description")),ze=te.R3(n,Ii(".quick-input-header")),He=te.R3(ze,Ii("input.quick-input-check-all"));He.type="checkbox",He.setAttribute("aria-label",(0,Qe.NC)("quickInput.checkAll","Toggle all checkboxes")),this._register(te.mu(He,te.tw.CHANGE,Mi=>{let on=He.checked;Oi.setAllVisibleChecked(on)})),this._register(te.nm(He,te.tw.CLICK,Mi=>{(Mi.x||Mi.y)&&Bt.setFocus()}));let Je=te.R3(ze,Ii(".quick-input-description")),vt=te.R3(ze,Ii(".quick-input-and-message")),Pt=te.R3(vt,Ii(".quick-input-filter")),Bt=this._register(new Ma(Pt,this.styles.inputBox,this.styles.toggle));Bt.setAttribute("aria-describedby",`${this.idPrefix}message`);let ni=te.R3(Pt,Ii(".quick-input-visible-count"));ni.setAttribute("aria-live","polite"),ni.setAttribute("aria-atomic","true");let Ci=new Cr.Z(ni,{countFormat:(0,Qe.NC)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),Fi=te.R3(Pt,Ii(".quick-input-count"));Fi.setAttribute("aria-live","polite");let Yi=new Cr.Z(Fi,{countFormat:(0,Qe.NC)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),an=te.R3(ze,Ii(".quick-input-action")),Gi=new Ds.z(an,this.styles.button);Gi.label=(0,Qe.NC)("ok","OK"),this._register(Gi.onDidClick(Mi=>{this.onDidAcceptEmitter.fire()}));let nn=te.R3(ze,Ii(".quick-input-action")),ln=new Ds.z(nn,this.styles.button);ln.label=(0,Qe.NC)("custom","Custom"),this._register(ln.onDidClick(Mi=>{this.onDidCustomEmitter.fire()}));let $i=te.R3(vt,Ii(`#${this.idPrefix}message.quick-input-message`)),Qi=new $s(n,this.styles.progressBar);Qi.getContainer().classList.add("quick-input-progress");let Ji=this.idPrefix+"list",Oi=this._register(new Bi(n,Ji,this.options));Bt.setAttribute("aria-controls",Ji),this._register(Oi.onDidChangeFocus(()=>{var Mi;Bt.setAttribute("aria-activedescendant",(Mi=Oi.getActiveDescendant())!==null&&Mi!==void 0?Mi:"")})),this._register(Oi.onChangedAllVisibleChecked(Mi=>{He.checked=Mi})),this._register(Oi.onChangedVisibleCount(Mi=>{Ci.setCount(Mi)})),this._register(Oi.onChangedCheckedCount(Mi=>{Yi.setCount(Mi)})),this._register(Oi.onLeave(()=>{setTimeout(()=>{Bt.setFocus(),this.controller instanceof cn&&this.controller.canSelectMany&&Oi.clearFocus()},0)}));let In=te.go(n);return this._register(In),this._register(te.nm(n,te.tw.FOCUS,Mi=>{this.previousFocusElement=Mi.relatedTarget instanceof HTMLElement?Mi.relatedTarget:void 0},!0)),this._register(In.onDidBlur(()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(Kn.Jq.Blur),this.previousFocusElement=void 0})),this._register(te.nm(n,te.tw.FOCUS,Mi=>{Bt.setFocus()})),this._register(te.nm(n,te.tw.KEY_DOWN,Mi=>{let on=new Mn.y(Mi);switch(on.keyCode){case 3:te.zB.stop(Mi,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:te.zB.stop(Mi,!0),this.hide(Kn.Jq.Gesture);break;case 2:if(!on.altKey&&!on.ctrlKey&&!on.metaKey){let Cn=[".action-label.codicon"];n.classList.contains("show-checkboxes")?Cn.push("input"):Cn.push("input[type=text]"),this.getUI().list.isDisplayed()&&Cn.push(".monaco-list"),this.getUI().message&&Cn.push(".quick-input-message a");let Sn=n.querySelectorAll(Cn.join(", "));on.shiftKey&&on.target===Sn[0]?(te.zB.stop(Mi,!0),Oi.clearFocus()):on.shiftKey||on.target!==Sn[Sn.length-1]||(te.zB.stop(Mi,!0),Sn[0].focus())}break;case 10:on.ctrlKey&&(te.zB.stop(Mi,!0),this.getUI().list.toggleHover())}})),this.ui={container:n,styleSheet:g,leftActionBar:Z,titleBar:M,title:ae,description1:De,description2:Je,rightActionBar:ge,checkAll:He,filterContainer:Pt,inputBox:Bt,visibleCountContainer:ni,visibleCount:Ci,countContainer:Fi,count:Yi,okContainer:an,ok:Gi,message:$i,customButtonContainer:nn,customButton:ln,list:Oi,progressBar:Qi,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:Mi=>this.show(Mi),hide:()=>this.hide(),setVisibilities:Mi=>this.setVisibilities(Mi),setEnabled:Mi=>this.setEnabled(Mi),setContextKey:Mi=>this.options.setContextKey(Mi),linkOpenerDelegate:Mi=>this.options.linkOpenerDelegate(Mi)},this.updateStyles(),this.ui}pick(n,g={},M=qo.T.None){return new Promise((Z,ae)=>{let ge=Je=>{var vt;ge=Z,(vt=g.onKeyMods)===null||vt===void 0||vt.call(g,De.keyMods),Z(Je)};if(M.isCancellationRequested)return void ge(void 0);let De=this.createQuickPick(),ze,He=[De,De.onDidAccept(()=>{if(De.canSelectMany)ge(De.selectedItems.slice()),De.hide();else{let Je=De.activeItems[0];Je&&(ge(Je),De.hide())}}),De.onDidChangeActive(Je=>{let vt=Je[0];vt&&g.onDidFocus&&g.onDidFocus(vt)}),De.onDidChangeSelection(Je=>{if(!De.canSelectMany){let vt=Je[0];vt&&(ge(vt),De.hide())}}),De.onDidTriggerItemButton(Je=>g.onDidTriggerItemButton&&g.onDidTriggerItemButton(Object.assign(Object.assign({},Je),{removeItem:()=>{let vt=De.items.indexOf(Je.item);if(vt!==-1){let Pt=De.items.slice(),Bt=Pt.splice(vt,1),ni=De.activeItems.filter(Fi=>Fi!==Bt[0]),Ci=De.keepScrollPosition;De.keepScrollPosition=!0,De.items=Pt,ni&&(De.activeItems=ni),De.keepScrollPosition=Ci}}}))),De.onDidTriggerSeparatorButton(Je=>{var vt;return(vt=g.onDidTriggerSeparatorButton)===null||vt===void 0?void 0:vt.call(g,Je)}),De.onDidChangeValue(Je=>{!ze||Je||De.activeItems.length===1&&De.activeItems[0]===ze||(De.activeItems=[ze])}),M.onCancellationRequested(()=>{De.hide()}),De.onDidHide(()=>{(0,u.B9)(He),ge(void 0)})];De.title=g.title,De.canSelectMany=!!g.canPickMany,De.placeholder=g.placeHolder,De.ignoreFocusOut=!!g.ignoreFocusLost,De.matchOnDescription=!!g.matchOnDescription,De.matchOnDetail=!!g.matchOnDetail,De.matchOnLabel=g.matchOnLabel===void 0||g.matchOnLabel,De.autoFocusOnList=g.autoFocusOnList===void 0||g.autoFocusOnList,De.quickNavigate=g.quickNavigate,De.hideInput=!!g.hideInput,De.contextKey=g.contextKey,De.busy=!0,Promise.all([n,g.activeItem]).then(([Je,vt])=>{ze=vt,De.busy=!1,De.items=Je,De.canSelectMany&&(De.selectedItems=Je.filter(Pt=>Pt.type!=="separator"&&Pt.picked)),ze&&(De.activeItems=[ze])}),De.show(),Promise.resolve(n).then(void 0,Je=>{ae(Je),De.hide()})})}createQuickPick(){let n=this.getUI();return new cn(n)}createInputBox(){let n=this.getUI();return new mn(n)}show(n){let g=this.getUI();this.onShowEmitter.fire();let M=this.controller;this.controller=n,M==null||M.didHide(),this.setEnabled(!0),g.leftActionBar.clear(),g.title.textContent="",g.description1.textContent="",g.description2.textContent="",g.rightActionBar.clear(),g.checkAll.checked=!1,g.inputBox.placeholder="",g.inputBox.password=!1,g.inputBox.showDecoration(pn.Z.Ignore),g.visibleCount.setCount(0),g.count.setCount(0),te.mc(g.message),g.progressBar.stop(),g.list.setElements([]),g.list.matchOnDescription=!1,g.list.matchOnDetail=!1,g.list.matchOnLabel=!0,g.list.sortByLabel=!0,g.ignoreFocusOut=!1,g.inputBox.toggles=void 0;let Z=this.options.backKeybindingLabel();Ki.tooltip=Z?(0,Qe.NC)("quickInput.backWithKeybinding","Back ({0})",Z):(0,Qe.NC)("quickInput.back","Back"),g.container.style.display="",this.updateLayout(),g.inputBox.setFocus()}setVisibilities(n){let g=this.getUI();g.title.style.display=n.title?"":"none",g.description1.style.display=n.description&&(n.inputBox||n.checkAll)?"":"none",g.description2.style.display=!n.description||n.inputBox||n.checkAll?"none":"",g.checkAll.style.display=n.checkAll?"":"none",g.filterContainer.style.display=n.inputBox?"":"none",g.visibleCountContainer.style.display=n.visibleCount?"":"none",g.countContainer.style.display=n.count?"":"none",g.okContainer.style.display=n.ok?"":"none",g.customButtonContainer.style.display=n.customButton?"":"none",g.message.style.display=n.message?"":"none",g.progressBar.getContainer().style.display=n.progressBar?"":"none",g.list.display(!!n.list),g.container.classList.toggle("show-checkboxes",!!n.checkBox),g.container.classList.toggle("hidden-input",!n.inputBox&&!n.description),this.updateLayout()}setEnabled(n){if(n!==this.enabled){this.enabled=n;for(let g of this.getUI().leftActionBar.viewItems)g.action.enabled=n;for(let g of this.getUI().rightActionBar.viewItems)g.action.enabled=n;this.getUI().checkAll.disabled=!n,this.getUI().inputBox.enabled=n,this.getUI().ok.enabled=n,this.getUI().list.enabled=n}}hide(n){var g;let M=this.controller;if(M){let Z=!(!((g=this.ui)===null||g===void 0)&&g.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!Z){let ae=this.previousFocusElement;for(;ae&&!ae.offsetParent;)ae=(0,No.f6)(ae.parentElement);ae!=null&&ae.offsetParent?(ae.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}M.didHide(n)}}layout(n,g){this.dimension=n,this.titleBarOffset=g,this.updateLayout()}updateLayout(){if(this.ui&&this.isDisplayed()){this.ui.container.style.top=`${this.titleBarOffset}px`;let n=this.ui.container.style,g=Math.min(.62*this.dimension.width,hn.MAX_WIDTH);n.width=g+"px",n.marginLeft="-"+g/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(n){this.styles=n,this.updateStyles()}updateStyles(){if(this.ui){let{quickInputTitleBackground:n,quickInputBackground:g,quickInputForeground:M,widgetBorder:Z,widgetShadow:ae}=this.styles.widget;this.ui.titleBar.style.backgroundColor=n!=null?n:"",this.ui.container.style.backgroundColor=g!=null?g:"",this.ui.container.style.color=M!=null?M:"",this.ui.container.style.border=Z?`1px solid ${Z}`:"",this.ui.container.style.boxShadow=ae?`0 0 8px 2px ${ae}`:"",this.ui.list.style(this.styles.list);let ge=[];this.styles.pickerGroup.pickerGroupBorder&&ge.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&ge.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&ge.push(`.quick-input-list .quick-input-list-separator-as-item { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(ge.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&ge.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&ge.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&ge.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&ge.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&ge.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),ge.push("}"));let De=ge.join(`
`);De!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=De)}}isDisplayed(){return this.ui&&this.ui.container.style.display!=="none"}}hn.MAX_WIDTH=600;var Hn=function(G,n){return function(g,M){n(g,M,G)}};let $n=class extends dt.bB{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(br))),this._quickAccess}constructor(G,n,g,M){super(g),this.instantiationService=G,this.contextKeyService=n,this.layoutService=M,this._onShow=this._register(new f.Q5),this._onHide=this._register(new f.Q5),this.contexts=new Map}createController(G=this.layoutService,n){let g={idPrefix:"quickInput_",container:G.container,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:Z=>this.setContextKey(Z),linkOpenerDelegate:Z=>{this.instantiationService.invokeFunction(ae=>{ae.get(Go.v4).open(Z,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>G.focus(),createList:(Z,ae,ge,De,ze)=>this.instantiationService.createInstance(_r.ev,Z,ae,ge,De,ze),hoverDelegate:{showHover(Z,ae){},delay:200},styles:this.computeStyles()},M=this._register(new hn(Object.assign(Object.assign({},g),n)));return M.layout(G.dimension,G.offset.quickPickTop),this._register(G.onDidLayout(Z=>M.layout(Z,G.offset.quickPickTop))),this._register(M.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(M.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),M}setContextKey(G){let n;G&&(n=this.contexts.get(G),n||(n=new At.uy(G,!1).bindTo(this.contextKeyService),this.contexts.set(G,n))),n&&n.get()||(this.resetContextKeys(),n==null||n.set(!0))}resetContextKeys(){this.contexts.forEach(G=>{G.get()&&G.reset()})}pick(G,n={},g=qo.T.None){return this.controller.pick(G,n,g)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:(0,Nt.n_1)(Nt.zKr),quickInputForeground:(0,Nt.n_1)(Nt.tZ6),quickInputTitleBackground:(0,Nt.n_1)(Nt.loF),widgetBorder:(0,Nt.n_1)(Nt.A42),widgetShadow:(0,Nt.n_1)(Nt.rh)},inputBox:To.Hc,toggle:To.pl,countBadge:To.ku,button:To.wG,progressBar:To.b5,keybindingLabel:To.eO,list:(0,To.TU)({listBackground:Nt.zKr,listFocusBackground:Nt.Vqd,listFocusForeground:Nt.NPS,listInactiveFocusForeground:Nt.NPS,listInactiveSelectionIconForeground:Nt.cbQ,listInactiveFocusBackground:Nt.Vqd,listFocusOutline:Nt.xL1,listInactiveFocusOutline:Nt.xL1}),pickerGroup:{pickerGroupBorder:(0,Nt.n_1)(Nt.opG),pickerGroupForeground:(0,Nt.n_1)(Nt.kJk)}}}};$n=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([Hn(0,Te.TG),Hn(1,At.i6),Hn(2,dt.XE),Hn(3,Yt)],$n);var So=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},fn=function(G,n){return function(g,M){n(g,M,G)}};let Rn=class extends $n{constructor(G,n,g,M,Z){super(n,g,M,new Ln(G.getContainerDomNode(),Z)),this.host=void 0;let ae=Un.get(G);if(ae){let ge=ae.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return ge.getDomNode()},get dimension(){return G.getLayoutInfo()},get onDidLayout(){return G.onDidLayoutChange},focus:()=>G.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};Rn=So([fn(1,Te.TG),fn(2,At.i6),fn(3,dt.XE),fn(4,x.$)],Rn);let An=class{get activeService(){let G=this.codeEditorService.getFocusedCodeEditor();if(!G)throw new Error("Quick input service needs a focused editor to work.");let n=this.mapEditorToService.get(G);if(!n){let g=n=this.instantiationService.createInstance(Rn,G);this.mapEditorToService.set(G,n),(0,vr.I)(G.onDidDispose)(()=>{g.dispose(),this.mapEditorToService.delete(G)})}return n}get quickAccess(){return this.activeService.quickAccess}constructor(G,n){this.instantiationService=G,this.codeEditorService=n,this.mapEditorToService=new Map}pick(G,n={},g=qo.T.None){return this.activeService.pick(G,n,g)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};An=So([fn(0,Te.TG),fn(1,x.$)],An);class Un{static get(n){return n.getContribution(Un.ID)}constructor(n){this.editor=n,this.widget=new io(this.editor)}dispose(){this.widget.dispose()}}Un.ID="editor.controller.quickInput";class io{constructor(n){this.codeEditor=n,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return io.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}io.ID="editor.contrib.quickInputWidget",(0,Ye._K)(Un.ID,Un,4);var Ro=t(8763),so=t(4156),Vo=function(G,n){return function(g,M){n(g,M,G)}};let Ao=class extends u.JT{constructor(G,n,g){super(),this._contextKeyService=G,this._layoutService=n,this._configurationService=g,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new f.Q5,this._onDidChangeReducedMotion=new f.Q5,this._accessibilityModeEnabledContext=r.U.bindTo(this._contextKeyService);let M=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(ae=>{ae.affectsConfiguration("editor.accessibilitySupport")&&(M(),this._onDidChangeScreenReaderOptimized.fire()),ae.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),M(),this._register(this.onDidChangeScreenReaderOptimized(()=>M()));let Z=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=Z.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(Z)}initReducedMotionListeners(G){if(!this._layoutService.hasContainer)return;this._register((0,te.nm)(G,"change",()=>{this._systemMotionReduced=G.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));let n=()=>{let g=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",g),this._layoutService.container.classList.toggle("enable-motion",!g)};n(),this._register(this.onDidChangeReducedMotion(()=>n()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){let G=this._configurationService.getValue("editor.accessibilitySupport");return G==="on"||G==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){let G=this._configMotionReduced;return G==="on"||G==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};Ao=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([Vo(0,At.i6),Vo(1,Yt),Vo(2,q.Ui)],Ao);var co=t(6904),ds=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},Ns=function(G,n){return function(g,M){n(g,M,G)}};let Ra=class{constructor(G,n){this._commandService=G,this._hiddenStates=new na(n)}createMenu(G,n,g){return new Oa(G,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},g),this._commandService,n)}resetHiddenStates(G){this._hiddenStates.reset(G)}};Ra=ds([Ns(0,to.H),Ns(1,co.Uy)],Ra);let na=class Rr{constructor(n){this._storageService=n,this._disposables=new u.SL,this._onDidChange=new f.Q5,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{let g=n.get(Rr._key,0,"{}");this._data=JSON.parse(g)}catch(g){this._data=Object.create(null)}this._disposables.add(n.onDidChangeValue(g=>{if(g.key===Rr._key){if(!this._ignoreChangeEvent)try{let M=n.get(Rr._key,0,"{}");this._data=JSON.parse(M)}catch(M){console.log("FAILED to read storage after UPDATE",M)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(n,g){var M;return(M=this._hiddenByDefaultCache.get(`${n.id}/${g}`))!==null&&M!==void 0&&M}setDefaultState(n,g,M){this._hiddenByDefaultCache.set(`${n.id}/${g}`,M)}isHidden(n,g){var M,Z;let ae=this._isHiddenByDefault(n,g),ge=(Z=(M=this._data[n.id])===null||M===void 0?void 0:M.includes(g))!==null&&Z!==void 0&&Z;return ae?!ge:ge}updateHidden(n,g,M){this._isHiddenByDefault(n,g)&&(M=!M);let Z=this._data[n.id];if(M)Z?Z.indexOf(g)<0&&Z.push(g):this._data[n.id]=[g];else if(Z){let ae=Z.indexOf(g);ae>=0&&(0,vo.LS)(Z,ae),Z.length===0&&delete this._data[n.id]}this._persist()}reset(n){if(n===void 0)this._data=Object.create(null),this._persist();else{for(let{id:g}of n)this._data[g]&&delete this._data[g];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let n=JSON.stringify(this._data);this._storageService.store(Rr._key,n,0,0)}finally{this._ignoreChangeEvent=!1}}};na._key="menu.hiddenCommands",na=ds([Ns(0,co.Uy)],na);let Aa=class Is{constructor(n,g,M,Z,ae){this._id=n,this._hiddenStates=g,this._collectContextKeysForSubmenus=M,this._commandService=Z,this._contextKeyService=ae,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let n=jn.BH.getMenuItems(this._id),g;n.sort(Is._compareMenuItems);for(let M of n){let Z=M.group||"";g&&g[0]===Z||(g=[Z,[]],this._menuGroups.push(g)),g[1].push(M),this._collectContextKeys(M)}}_collectContextKeys(n){if(Is._fillInKbExprKeys(n.when,this._structureContextKeys),(0,jn.vr)(n)){if(n.command.precondition&&Is._fillInKbExprKeys(n.command.precondition,this._preconditionContextKeys),n.command.toggled){let g=n.command.toggled.condition||n.command.toggled;Is._fillInKbExprKeys(g,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&jn.BH.getMenuItems(n.submenu).forEach(this._collectContextKeys,this)}createActionGroups(n){let g=[];for(let M of this._menuGroups){let[Z,ae]=M,ge=[];for(let De of ae)if(this._contextKeyService.contextMatchesRules(De.when)){let ze=(0,jn.vr)(De);ze&&this._hiddenStates.setDefaultState(this._id,De.command.id,!!De.isHiddenByDefault);let He=wd(this._id,ze?De.command:De,this._hiddenStates);if(ze)ge.push(new jn.U8(De.command,De.alt,n,He,this._contextKeyService,this._commandService));else{let Je=new Is(De.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(n),vt=xt.Z0.join(...Je.map(Pt=>Pt[1]));vt.length>0&&ge.push(new jn.NZ(De,He,vt))}}ge.length>0&&g.push([Z,ge])}return g}static _fillInKbExprKeys(n,g){if(n)for(let M of n.keys())g.add(M)}static _compareMenuItems(n,g){let M=n.group,Z=g.group;if(M!==Z){if(!M)return 1;if(!Z||M==="navigation")return-1;if(Z==="navigation")return 1;let De=M.localeCompare(Z);if(De!==0)return De}let ae=n.order||0,ge=g.order||0;return ae<ge?-1:ae>ge?1:Is._compareTitles((0,jn.vr)(n)?n.command.title:n.title,(0,jn.vr)(g)?g.command.title:g.title)}static _compareTitles(n,g){let M=typeof n=="string"?n:n.original,Z=typeof g=="string"?g:g.original;return M.localeCompare(Z)}};Aa=ds([Ns(3,to.H),Ns(4,At.i6)],Aa);let Oa=class{constructor(G,n,g,M,Z){this._disposables=new u.SL,this._menuInfo=new Aa(G,n,g.emitEventsForSubmenuChanges,M,Z);let ae=new ee.pY(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},g.eventDebounceDelay);this._disposables.add(ae),this._disposables.add(jn.BH.onDidChangeMenu(De=>{De.has(G)&&ae.schedule()}));let ge=this._disposables.add(new u.SL);this._onDidChange=new f.D0({onWillAddFirstListener:()=>{ge.add(Z.onDidChangeContext(De=>{let ze=De.affectsSome(this._menuInfo.structureContextKeys),He=De.affectsSome(this._menuInfo.preconditionContextKeys),Je=De.affectsSome(this._menuInfo.toggledContextKeys);(ze||He||Je)&&this._onDidChange.fire({menu:this,isStructuralChange:ze,isEnablementChange:He,isToggleChange:Je})})),ge.add(n.onDidChange(De=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))},onDidRemoveLastListener:ge.clear.bind(ge),delay:g.eventDebounceDelay,merge:De=>{let ze=!1,He=!1,Je=!1;for(let vt of De)if(ze=ze||vt.isStructuralChange,He=He||vt.isEnablementChange,Je=Je||vt.isToggleChange,ze&&He&&Je)break;return{menu:this,isStructuralChange:ze,isEnablementChange:He,isToggleChange:Je}}}),this.onDidChange=this._onDidChange.event}getActions(G){return this._menuInfo.createActionGroups(G)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function wd(G,n,g){let M=(0,jn.f6)(n)?n.submenu.id:n.id,Z=typeof n.title=="string"?n.title:n.title.value,ae=(0,xt.xw)({id:`hide/${G.id}/${M}`,label:(0,Qe.NC)("hide.label","Hide '{0}'",Z),run(){g.updateHidden(G,M,!0)}}),ge=(0,xt.xw)({id:`toggle/${G.id}/${M}`,label:Z,get checked(){return!g.isHidden(G,M)},run(){g.updateHidden(G,M,!!this.checked)}});return{hide:ae,toggle:ge,get isHidden(){return!ge.checked}}}Oa=ds([Ns(3,to.H),Ns(4,At.i6)],Oa);var pl=function(G,n){return function(g,M){n(g,M,G)}},qs=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};let Pa=class extends u.JT{constructor(G,n){super(),this.layoutService=G,this.logService=n,this.mapTextToType=new Map,this.findText="",this.resources=[],(cr.isSafari||cr.isWebkitWebView)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){let G=()=>{let n=new ee.CR;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=n,navigator.clipboard.write([new ClipboardItem({"text/plain":n.p})]).catch(g=>qs(this,void 0,void 0,function*(){g instanceof Error&&g.name==="NotAllowedError"&&n.isRejected||this.logService.error(g)}))};this.layoutService.hasContainer&&(this._register((0,te.nm)(this.layoutService.container,"click",G)),this._register((0,te.nm)(this.layoutService.container,"keydown",G)))}writeText(G,n){return qs(this,void 0,void 0,function*(){if(n)return void this.mapTextToType.set(n,G);if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(G);try{return yield navigator.clipboard.writeText(G)}catch(Z){console.error(Z)}let g=document.activeElement,M=document.body.appendChild((0,te.$)("textarea",{"aria-hidden":!0}));M.style.height="1px",M.style.width="1px",M.style.position="absolute",M.value=G,M.focus(),M.select(),document.execCommand("copy"),g instanceof HTMLElement&&g.focus(),document.body.removeChild(M)})}readText(G){return qs(this,void 0,void 0,function*(){if(G)return this.mapTextToType.get(G)||"";try{return yield navigator.clipboard.readText()}catch(n){return console.error(n),""}})}readFindText(){return qs(this,void 0,void 0,function*(){return this.findText})}writeFindText(G){return qs(this,void 0,void 0,function*(){this.findText=G})}readResources(){return qs(this,void 0,void 0,function*(){return this.resources})}};Pa=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([pl(0,Yt),pl(1,et.VZ)],Pa);var Gs=t(3725),yd=t(4767);let Lr="data-keybinding-context";class Fa{constructor(n,g){this._id=n,this._parent=g,this._value=Object.create(null),this._value._contextId=n}get value(){return Object.assign({},this._value)}setValue(n,g){return this._value[n]!==g&&(this._value[n]=g,!0)}removeValue(n){return n in this._value&&(delete this._value[n],!0)}getValue(n){let g=this._value[n];return g===void 0&&this._parent?this._parent.getValue(n):g}}class Qs extends Fa{constructor(){super(-1,null)}setValue(n,g){return!1}removeValue(n){return!1}getValue(n){}}Qs.INSTANCE=new Qs;class kr extends Fa{constructor(n,g,M){super(n,null),this._configurationService=g,this._values=yd.Id.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(Z=>{if(Z.source===7){let ae=Array.from(this._values,([ge])=>ge);this._values.clear(),M.fire(new fl(ae))}else{let ae=[];for(let ge of Z.affectedKeys){let De=`config.${ge}`,ze=this._values.findSuperstr(De);ze!==void 0&&(ae.push(...Gs.$.map(ze,([He])=>He)),this._values.deleteSuperstr(De)),this._values.has(De)&&(ae.push(De),this._values.delete(De))}M.fire(new fl(ae))}})}dispose(){this._listener.dispose()}getValue(n){if(n.indexOf(kr._keyPrefix)!==0)return super.getValue(n);if(this._values.has(n))return this._values.get(n);let g=n.substr(kr._keyPrefix.length),M=this._configurationService.getValue(g),Z;switch(typeof M){case"number":case"boolean":case"string":Z=M;break;default:Z=Array.isArray(M)?JSON.stringify(M):M}return this._values.set(n,Z),Z}setValue(n,g){return super.setValue(n,g)}removeValue(n){return super.removeValue(n)}}kr._keyPrefix="config.";class Sd{constructor(n,g,M){this._service=n,this._key=g,this._defaultValue=M,this.reset()}set(n){this._service.setContext(this._key,n)}reset(){this._defaultValue===void 0?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class ml{constructor(n){this.key=n}affectsSome(n){return n.has(this.key)}allKeysContainedIn(n){return this.affectsSome(n)}}class fl{constructor(n){this.keys=n}affectsSome(n){for(let g of this.keys)if(n.has(g))return!0;return!1}allKeysContainedIn(n){return this.keys.every(g=>n.has(g))}}class Ld{constructor(n){this.events=n}affectsSome(n){for(let g of this.events)if(g.affectsSome(n))return!0;return!1}allKeysContainedIn(n){return this.events.every(g=>g.allKeysContainedIn(n))}}class _l{constructor(n){this._onDidChangeContext=new f.K3({merge:g=>new Ld(g)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=n}createKey(n,g){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Sd(this,n,g)}bufferChangeEvents(n){this._onDidChangeContext.pause();try{n()}finally{this._onDidChangeContext.resume()}}createScoped(n){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new kd(this,n)}contextMatchesRules(n){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");let g=this.getContextValuesContainer(this._myContextId);return!n||n.evaluate(g)}getContextKeyValue(n){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(n)}setContext(n,g){if(this._isDisposed)return;let M=this.getContextValuesContainer(this._myContextId);M&&M.setValue(n,g)&&this._onDidChangeContext.fire(new ml(n))}removeContext(n){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(n)&&this._onDidChangeContext.fire(new ml(n))}getContext(n){return this._isDisposed?Qs.INSTANCE:this.getContextValuesContainer(function(g){for(;g;){if(g.hasAttribute(Lr)){let M=g.getAttribute(Lr);return M?parseInt(M,10):NaN}g=g.parentElement}return 0}(n))}}let Ba=class extends _l{constructor(G){super(0),this._contexts=new Map,this._toDispose=new u.SL,this._lastContextId=0;let n=new kr(this._myContextId,G,this._onDidChangeContext);this._contexts.set(this._myContextId,n),this._toDispose.add(n)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(G){return this._isDisposed?Qs.INSTANCE:this._contexts.get(G)||Qs.INSTANCE}createChildContext(G=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let n=++this._lastContextId;return this._contexts.set(n,new Fa(n,this.getContextValuesContainer(G))),n}disposeContext(G){this._isDisposed||this._contexts.delete(G)}};Ba=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge}([function(G,n){return function(g,M){n(g,M,G)}}(0,q.Ui)],Ba);class kd extends _l{constructor(n,g){if(super(n.createChildContext()),this._parentChangeListener=new u.XK,this._parent=n,this._updateParentChangeListener(),this._domNode=g,this._domNode.hasAttribute(Lr)){let M="";this._domNode.classList&&(M=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(M?": "+M:""))}this._domNode.setAttribute(Lr,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(n=>{var g;g=this._parent.getContextValuesContainer(this._myContextId).value,n.allKeysContainedIn(new Set(Object.keys(g)))||this._onDidChangeContext.fire(n)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Lr),this._isDisposed=!0)}getContextValuesContainer(n){return this._isDisposed?Qs.INSTANCE:this._parent.getContextValuesContainer(n)}createChildContext(n=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(n)}disposeContext(n){this._isDisposed||this._parent.disposeContext(n)}}to.P.registerCommand("_setContext",function(G,n,g){G.get(At.i6).createKey(String(n),function(M){return(0,d.rs)(M,Z=>typeof Z=="object"&&Z.$mid===1?_.o.revive(Z).toString():Z instanceof _.o?Z.toString():void 0)}(g))}),to.P.registerCommand({id:"getContextKeyInfo",handler:()=>[...At.uy.all()].sort((G,n)=>G.key.localeCompare(n.key)),description:{description:(0,Qe.NC)("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),to.P.registerCommand("_generateContextKeyInfo",function(){let G=[],n=new Set;for(let g of At.uy.all())n.has(g.key)||(n.add(g.key),G.push(g));G.sort((g,M)=>g.key.localeCompare(M.key)),console.log(JSON.stringify(G,void 0,2))});var hs=t(7108);class Dd{constructor(n,g){this.key=n,this.data=g,this.incoming=new Map,this.outgoing=new Map}}class vl{constructor(n){this._hashFn=n,this._nodes=new Map}roots(){let n=[];for(let g of this._nodes.values())g.outgoing.size===0&&n.push(g);return n}insertEdge(n,g){let M=this.lookupOrInsertNode(n),Z=this.lookupOrInsertNode(g);M.outgoing.set(Z.key,Z),Z.incoming.set(M.key,M)}removeNode(n){let g=this._hashFn(n);this._nodes.delete(g);for(let M of this._nodes.values())M.outgoing.delete(g),M.incoming.delete(g)}lookupOrInsertNode(n){let g=this._hashFn(n),M=this._nodes.get(g);return M||(M=new Dd(g,n),this._nodes.set(g,M)),M}isEmpty(){return this._nodes.size===0}toString(){let n=[];for(let[g,M]of this._nodes)n.push(`${g}
	(-> incoming)[${[...M.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...M.outgoing.keys()].join(",")}]
`);return n.join(`
`)}findCycleSlow(){for(let[n,g]of this._nodes){let M=new Set([n]),Z=this._findCycle(g,M);if(Z)return Z}}_findCycle(n,g){for(let[M,Z]of n.outgoing){if(g.has(M))return[...g,M].join(" -> ");g.add(M);let ae=this._findCycle(Z,g);if(ae)return ae;g.delete(M)}}}class bl extends Error{constructor(n){var g;super("cyclic dependency between services"),this.message=(g=n.findCycleSlow())!==null&&g!==void 0?g:`UNABLE to detect cycle, dumping graph: 
${n.toString()}`}}class oa{constructor(n=new Ze.y,g=!1,M,Z=!1){var ae;this._services=n,this._strict=g,this._parent=M,this._enableTracing=Z,this._activeInstantiations=new Set,this._services.set(Te.TG,this),this._globalGraph=Z?(ae=M==null?void 0:M._globalGraph)!==null&&ae!==void 0?ae:new vl(ge=>ge):void 0}createChild(n){return new oa(n,this._strict,this,this._enableTracing)}invokeFunction(n,...g){let M=mo.traceInvocation(this._enableTracing,n),Z=!1;try{return n({get:ae=>{if(Z)throw(0,xe.L6)("service accessor is only valid during the invocation of its target method");let ge=this._getOrCreateServiceInstance(ae,M);if(!ge)throw new Error(`[invokeFunction] unknown service '${ae}'`);return ge}},...g)}finally{Z=!0,M.stop()}}createInstance(n,...g){let M,Z;return n instanceof hs.M?(M=mo.traceCreation(this._enableTracing,n.ctor),Z=this._createInstance(n.ctor,n.staticArguments.concat(g),M)):(M=mo.traceCreation(this._enableTracing,n),Z=this._createInstance(n,g,M)),M.stop(),Z}_createInstance(n,g=[],M){let Z=Te.I8.getServiceDependencies(n).sort((De,ze)=>De.index-ze.index),ae=[];for(let De of Z){let ze=this._getOrCreateServiceInstance(De.id,M);ze||this._throwIfStrict(`[createInstance] ${n.name} depends on UNKNOWN service ${De.id}.`,!1),ae.push(ze)}let ge=Z.length>0?Z[0].index:g.length;if(g.length!==ge){console.trace(`[createInstance] First service dependency of ${n.name} at position ${ge+1} conflicts with ${g.length} static arguments`);let De=ge-g.length;g=De>0?g.concat(new Array(De)):g.slice(0,ge)}return Reflect.construct(n,g.concat(ae))}_setServiceInstance(n,g){if(this._services.get(n)instanceof hs.M)this._services.set(n,g);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(n,g)}}_getServiceInstanceOrDescriptor(n){let g=this._services.get(n);return!g&&this._parent?this._parent._getServiceInstanceOrDescriptor(n):g}_getOrCreateServiceInstance(n,g){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(n));let M=this._getServiceInstanceOrDescriptor(n);return M instanceof hs.M?this._safeCreateAndCacheServiceInstance(n,M,g.branch(n,!0)):(g.branch(n,!1),M)}_safeCreateAndCacheServiceInstance(n,g,M){if(this._activeInstantiations.has(n))throw new Error(`illegal state - RECURSIVELY instantiating service '${n}'`);this._activeInstantiations.add(n);try{return this._createAndCacheServiceInstance(n,g,M)}finally{this._activeInstantiations.delete(n)}}_createAndCacheServiceInstance(n,g,M){var Z;let ae=new vl(ze=>ze.id.toString()),ge=0,De=[{id:n,desc:g,_trace:M}];for(;De.length;){let ze=De.pop();if(ae.lookupOrInsertNode(ze),ge++>1e3)throw new bl(ae);for(let He of Te.I8.getServiceDependencies(ze.desc.ctor)){let Je=this._getServiceInstanceOrDescriptor(He.id);if(Je||this._throwIfStrict(`[createInstance] ${n} depends on ${He.id} which is NOT registered.`,!0),(Z=this._globalGraph)===null||Z===void 0||Z.insertEdge(String(ze.id),String(He.id)),Je instanceof hs.M){let vt={id:He.id,desc:Je,_trace:ze._trace.branch(He.id,!0)};ae.insertEdge(ze,vt),De.push(vt)}}}for(;;){let ze=ae.roots();if(ze.length===0){if(!ae.isEmpty())throw new bl(ae);break}for(let{data:He}of ze){if(this._getServiceInstanceOrDescriptor(He.id)instanceof hs.M){let Je=this._createServiceInstanceWithOwner(He.id,He.desc.ctor,He.desc.staticArguments,He.desc.supportsDelayedInstantiation,He._trace);this._setServiceInstance(He.id,Je)}ae.removeNode(He)}}return this._getServiceInstanceOrDescriptor(n)}_createServiceInstanceWithOwner(n,g,M=[],Z,ae){if(this._services.get(n)instanceof hs.M)return this._createServiceInstance(n,g,M,Z,ae);if(this._parent)return this._parent._createServiceInstanceWithOwner(n,g,M,Z,ae);throw new Error(`illegalState - creating UNKNOWN service instance ${g.name}`)}_createServiceInstance(n,g,M=[],Z,ae){if(Z){let ge=new oa(void 0,this._strict,this,this._enableTracing);ge._globalGraphImplicitDependency=String(n);let De=new Map,ze=new ee.Ue(()=>{let He=ge._createInstance(g,M,ae);for(let[Je,vt]of De){let Pt=He[Je];if(typeof Pt=="function")for(let Bt of vt)Pt.apply(He,Bt)}return De.clear(),He});return new Proxy(Object.create(null),{get(He,Je){if(!ze.isInitialized&&typeof Je=="string"&&(Je.startsWith("onDid")||Je.startsWith("onWill"))){let Bt=De.get(Je);return Bt||(Bt=new Ti.S,De.set(Je,Bt)),(ni,Ci,Fi)=>{let Yi=Bt.push([ni,Ci,Fi]);return(0,u.OF)(Yi)}}if(Je in He)return He[Je];let vt=ze.value,Pt=vt[Je];return typeof Pt!="function"||(Pt=Pt.bind(vt),He[Je]=Pt),Pt},set:(He,Je,vt)=>(ze.value[Je]=vt,!0),getPrototypeOf:He=>g.prototype})}return this._createInstance(g,M,ae)}_throwIfStrict(n,g){if(g&&console.warn(n),this._strict)throw new Error(n)}}class mo{static traceInvocation(n,g){return n?new mo(2,g.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):mo._None}static traceCreation(n,g){return n?new mo(1,g.name):mo._None}constructor(n,g){this.type=n,this.name=g,this._start=Date.now(),this._dep=[]}branch(n,g){let M=new mo(3,n.toString());return this._dep.push([n,g,M]),M}stop(){let n=Date.now()-this._start;mo._totals+=n;let g=!1,M=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${function Z(ae,ge){let De=[],ze=new Array(ae+1).join("	");for(let[He,Je,vt]of ge._dep)if(Je&&vt){g=!0,De.push(`${ze}CREATES -> ${He}`);let Pt=Z(ae+1,vt);Pt&&De.push(Pt)}else De.push(`${ze}uses -> ${He}`);return De.join(`
`)}(1,this)}`,`DONE, took ${n.toFixed(2)}ms (grand total ${mo._totals.toFixed(2)}ms)`];(n>2||g)&&mo.all.add(M.join(`
`))}}mo.all=new Set,mo._None=new class extends mo{constructor(){super(0,null)}stop(){}branch(){return this}},mo._totals=0;let Nd=new Set([ki.lg.inMemory,ki.lg.vscodeSourceControl,ki.lg.walkThrough,ki.lg.walkThroughSnippet]);class xd{constructor(){this._byResource=new Zt.Y9,this._byOwner=new Map}set(n,g,M){let Z=this._byResource.get(n);Z||(Z=new Map,this._byResource.set(n,Z)),Z.set(g,M);let ae=this._byOwner.get(g);ae||(ae=new Zt.Y9,this._byOwner.set(g,ae)),ae.set(n,M)}get(n,g){let M=this._byResource.get(n);return M==null?void 0:M.get(g)}delete(n,g){let M=!1,Z=!1,ae=this._byResource.get(n);ae&&(M=ae.delete(g));let ge=this._byOwner.get(g);if(ge&&(Z=ge.delete(n)),M!==Z)throw new Error("illegal state");return M&&Z}values(n){var g,M,Z,ae;return typeof n=="string"?(M=(g=this._byOwner.get(n))===null||g===void 0?void 0:g.values())!==null&&M!==void 0?M:Gs.$.empty():_.o.isUri(n)?(ae=(Z=this._byResource.get(n))===null||Z===void 0?void 0:Z.values())!==null&&ae!==void 0?ae:Gs.$.empty():Gs.$.map(Gs.$.concat(...this._byOwner.values()),ge=>ge[1])}}class Ed{constructor(n){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Zt.Y9,this._service=n,this._subscription=n.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(n){for(let g of n){let M=this._data.get(g);M&&this._substract(M);let Z=this._resourceStats(g);this._add(Z),this._data.set(g,Z)}}_resourceStats(n){let g={errors:0,warnings:0,infos:0,unknowns:0};if(Nd.has(n.scheme))return g;for(let{severity:M}of this._service.read({resource:n}))M===oo.ZL.Error?g.errors+=1:M===oo.ZL.Warning?g.warnings+=1:M===oo.ZL.Info?g.infos+=1:g.unknowns+=1;return g}_substract(n){this.errors-=n.errors,this.warnings-=n.warnings,this.infos-=n.infos,this.unknowns-=n.unknowns}_add(n){this.errors+=n.errors,this.warnings+=n.warnings,this.infos+=n.infos,this.unknowns+=n.unknowns}}class cs{constructor(){this._onMarkerChanged=new f.D0({delay:0,merge:cs._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new xd,this._stats=new Ed(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(n,g){for(let M of g||[])this.changeOne(n,M,[])}changeOne(n,g,M){if((0,vo.XY)(M))this._data.delete(g,n)&&this._onMarkerChanged.fire([g]);else{let Z=[];for(let ae of M){let ge=cs._toMarker(n,g,ae);ge&&Z.push(ge)}this._data.set(g,n,Z),this._onMarkerChanged.fire([g])}}static _toMarker(n,g,M){let{code:Z,severity:ae,message:ge,source:De,startLineNumber:ze,startColumn:He,endLineNumber:Je,endColumn:vt,relatedInformation:Pt,tags:Bt}=M;if(ge)return ze=ze>0?ze:1,He=He>0?He:1,Je=Je>=ze?Je:ze,vt=vt>0?vt:He,{resource:g,owner:n,code:Z,severity:ae,message:ge,source:De,startLineNumber:ze,startColumn:He,endLineNumber:Je,endColumn:vt,relatedInformation:Pt,tags:Bt}}changeAll(n,g){let M=[],Z=this._data.values(n);if(Z)for(let ae of Z){let ge=Gs.$.first(ae);ge&&(M.push(ge.resource),this._data.delete(ge.resource,n))}if((0,vo.Of)(g)){let ae=new Zt.Y9;for(let{resource:ge,marker:De}of g){let ze=cs._toMarker(n,ge,De);if(!ze)continue;let He=ae.get(ge);He?He.push(ze):(ae.set(ge,[ze]),M.push(ge))}for(let[ge,De]of ae)this._data.set(ge,n,De)}M.length>0&&this._onMarkerChanged.fire(M)}read(n=Object.create(null)){let{owner:g,resource:M,severities:Z,take:ae}=n;if((!ae||ae<0)&&(ae=-1),g&&M){let ge=this._data.get(M,g);if(ge){let De=[];for(let ze of ge)if(cs._accept(ze,Z)){let He=De.push(ze);if(ae>0&&He===ae)break}return De}return[]}if(g||M){let ge=this._data.values(M!=null?M:g),De=[];for(let ze of ge)for(let He of ze)if(cs._accept(He,Z)){let Je=De.push(He);if(ae>0&&Je===ae)return De}return De}{let ge=[];for(let De of this._data.values())for(let ze of De)if(cs._accept(ze,Z)){let He=ge.push(ze);if(ae>0&&He===ae)return ge}return ge}}static _accept(n,g){return g===void 0||(g&n.severity)===n.severity}static _merge(n){let g=new Zt.Y9;for(let M of n)for(let Z of M)g.set(Z,!0);return Array.from(g.keys())}}class Id extends u.JT{constructor(){super(...arguments),this._configurationModel=new Zn}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new Zn;let n=Io.B.as(xo.IP.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(n),n)}updateConfigurationModel(n,g){let M=this.getConfigurationDefaultOverrides();for(let Z of n){let ae=M[Z],ge=g[Z];ae!==void 0?this._configurationModel.addValue(Z,ae):ge?this._configurationModel.addValue(Z,ge.default):this._configurationModel.removeValue(Z)}}}class Td extends u.JT{constructor(n,g=[]){super(),this.logger=new et.qA([n,...g]),this._register(n.onDidChangeLogLevel(M=>this.setLevel(M)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(n){this.logger.setLevel(n)}getLevel(){return this.logger.getLevel()}trace(n,...g){this.logger.trace(n,...g)}debug(n,...g){this.logger.debug(n,...g)}info(n,...g){this.logger.info(n,...g)}error(n,...g){this.logger.error(n,...g)}}var Md=t(637),us=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},Jn=function(G,n){return function(g,M){n(g,M,G)}},Zs=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};class Rd{constructor(n){this.disposed=!1,this.model=n,this._onWillDispose=new f.Q5}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let Wa=class{constructor(G){this.modelService=G}createModelReference(G){let n=this.modelService.getModel(G);return n?Promise.resolve(new u.Jz(new Rd(n))):Promise.reject(new Error("Model not found"))}};Wa=us([Jn(0,R.q)],Wa);class sa{show(){return sa.NULL_PROGRESS_RUNNER}showWhile(n,g){return Zs(this,void 0,void 0,function*(){yield n})}}sa.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class Dr{info(n){return this.notify({severity:pn.Z.Info,message:n})}warn(n){return this.notify({severity:pn.Z.Warning,message:n})}error(n){return this.notify({severity:pn.Z.Error,message:n})}notify(n){switch(n.severity){case pn.Z.Error:console.error(n.message);break;case pn.Z.Warning:console.warn(n.message);break;default:console.log(n.message)}return Dr.NO_OP}prompt(n,g,M,Z){return Dr.NO_OP}status(n,g){return u.JT.None}}Dr.NO_OP=new rt.EO;let Va=class{constructor(G){this._onWillExecuteCommand=new f.Q5,this._onDidExecuteCommand=new f.Q5,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=G}executeCommand(G,...n){let g=to.P.getCommand(G);if(!g)return Promise.reject(new Error(`command '${G}' not found`));try{this._onWillExecuteCommand.fire({commandId:G,args:n});let M=this._instantiationService.invokeFunction.apply(this._instantiationService,[g.handler,...n]);return this._onDidExecuteCommand.fire({commandId:G,args:n}),Promise.resolve(M)}catch(M){return Promise.reject(M)}}};Va=us([Jn(0,Te.TG)],Va);let Ys=class extends ya{constructor(G,n,g,M,Z,ae){super(G,n,g,M,Z),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];let ge=Je=>{let vt=new u.SL;vt.add(te.nm(Je,te.tw.KEY_DOWN,Pt=>{let Bt=new Mn.y(Pt);this._dispatch(Bt,Bt.target)&&(Bt.preventDefault(),Bt.stopPropagation())})),vt.add(te.nm(Je,te.tw.KEY_UP,Pt=>{let Bt=new Mn.y(Pt);this._singleModifierDispatch(Bt,Bt.target)&&Bt.preventDefault()})),this._domNodeListeners.push(new Ad(Je,vt))},De=Je=>{for(let vt=0;vt<this._domNodeListeners.length;vt++){let Pt=this._domNodeListeners[vt];Pt.domNode===Je&&(this._domNodeListeners.splice(vt,1),Pt.dispose())}},ze=Je=>{Je.getOption(59)||ge(Je.getContainerDomNode())};this._register(ae.onCodeEditorAdd(ze)),this._register(ae.onCodeEditorRemove(Je=>{Je.getOption(59)||De(Je.getContainerDomNode())})),ae.listCodeEditors().forEach(ze);let He=Je=>{ge(Je.getContainerDomNode())};this._register(ae.onDiffEditorAdd(He)),this._register(ae.onDiffEditorRemove(Je=>{De(Je.getContainerDomNode())})),ae.listDiffEditors().forEach(He)}addDynamicKeybinding(G,n,g,M){return(0,u.F8)(to.P.registerCommand(G,g),this.addDynamicKeybindings([{keybinding:n,command:G,when:M}]))}addDynamicKeybindings(G){let n=G.map(g=>{var M;return{keybinding:(0,Eo.Z9)(g.keybinding,hi.OS),command:(M=g.command)!==null&&M!==void 0?M:null,commandArgs:g.commandArgs,when:g.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(n),this.updateResolver(),(0,u.OF)(()=>{for(let g=0;g<this._dynamicKeybindings.length;g++)if(this._dynamicKeybindings[g]===n[0])return this._dynamicKeybindings.splice(g,n.length),void this.updateResolver()})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){let G=this._toNormalizedKeybindingItems(or.W.getDefaultKeybindings(),!0),n=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new fs(G,n,g=>this._log(g))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(G,n){let g=[],M=0;for(let Z of G){let ae=Z.when||void 0,ge=Z.keybinding;if(ge){let De=_s.resolveKeybinding(ge,hi.OS);for(let ze of De)g[M++]=new Os(ze,Z.command,Z.commandArgs,ae,n,null,!1)}else g[M++]=new Os(void 0,Z.command,Z.commandArgs,ae,n,null,!1)}return g}resolveKeyboardEvent(G){let n=new Eo.$M(G.ctrlKey,G.shiftKey,G.altKey,G.metaKey,G.keyCode);return new _s([n],hi.OS)}};Ys=us([Jn(0,At.i6),Jn(1,to.H),Jn(2,kt.b),Jn(3,rt.lT),Jn(4,et.VZ),Jn(5,x.$)],Ys);class Ad extends u.JT{constructor(n,g){super(),this.domNode=n,this._register(g)}}function Cl(G){return G&&typeof G=="object"&&(!G.overrideIdentifier||typeof G.overrideIdentifier=="string")&&(!G.resource||G.resource instanceof _.o)}class wl{constructor(){this._onDidChangeConfiguration=new f.Q5,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;let n=new Id;this._configuration=new ps(n.reload(),new Zn,new Zn,new Zn),n.dispose()}getValue(n,g){let M=typeof n=="string"?n:void 0,Z=Cl(n)?n:Cl(g)?g:{};return this._configuration.getValue(M,Z,void 0)}updateValues(n){let g={data:this._configuration.toData()},M=[];for(let Z of n){let[ae,ge]=Z;this.getValue(ae)!==ge&&(this._configuration.updateValue(ae,ge),M.push(ae))}if(M.length>0){let Z=new nr({keys:M,overrides:[]},g,this._configuration);Z.source=8,Z.sourceConfig=null,this._onDidChangeConfiguration.fire(Z)}return Promise.resolve()}updateValue(n,g,M,Z){return this.updateValues([[n,g]])}inspect(n,g={}){return this._configuration.inspect(n,g,void 0)}}let Ha=class{constructor(G,n,g){this.configurationService=G,this.modelService=n,this.languageService=g,this._onDidChangeConfiguration=new f.Q5,this.configurationService.onDidChangeConfiguration(M=>{this._onDidChangeConfiguration.fire({affectedKeys:M.affectedKeys,affectsConfiguration:(Z,ae)=>M.affectsConfiguration(ae)})})}getValue(G,n,g){let M=Qt.L.isIPosition(n)?n:null,Z=M?typeof g=="string"?g:void 0:typeof n=="string"?n:void 0,ae=G?this.getLanguage(G,M):void 0;return Z===void 0?this.configurationService.getValue({resource:G,overrideIdentifier:ae}):this.configurationService.getValue(Z,{resource:G,overrideIdentifier:ae})}getLanguage(G,n){let g=this.modelService.getModel(G);return g?n?g.getLanguageIdAtPosition(n.lineNumber,n.column):g.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(G)}};Ha=us([Jn(0,q.Ui),Jn(1,R.q),Jn(2,k.O)],Ha);let za=class{constructor(G){this.configurationService=G}getEOL(G,n){let g=this.configurationService.getValue("files.eol",{overrideIdentifier:n,resource:G});return g&&typeof g=="string"&&g!=="auto"?g:hi.IJ||hi.dz?`
`:`\r
`}};za=us([Jn(0,q.Ui)],za);class Nr{constructor(){let n=_.o.from({scheme:Nr.SCHEME,authority:"model",path:"/"});this.workspace={id:rr.p$,folders:[new rr.md({uri:n,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(n){return n&&n.scheme===Nr.SCHEME?this.workspace.folders[0]:null}}function ra(G,n,g){if(!n||!(G instanceof wl))return;let M=[];Object.keys(n).forEach(Z=>{(0,ir.ei)(Z)&&M.push([`editor.${Z}`,n[Z]]),g&&(0,ir.Pe)(Z)&&M.push([`diffEditor.${Z}`,n[Z]])}),M.length>0&&G.updateValues(M)}Nr.SCHEME="inmemory";let Ua=class{constructor(G){this._modelService=G}hasPreviewHandler(){return!1}apply(G,n){return Zs(this,void 0,void 0,function*(){let g=Array.isArray(G)?G:Ts.fo.convert(G),M=new Map;for(let ge of g){if(!(ge instanceof Ts.Gl))throw new Error("bad edit - only text edits are supported");let De=this._modelService.getModel(ge.resource);if(!De)throw new Error("bad edit - model not found");if(typeof ge.versionId=="number"&&De.getVersionId()!==ge.versionId)throw new Error("bad state - model changed in the meantime");let ze=M.get(De);ze||(ze=[],M.set(De,ze)),ze.push(Ca.h.replaceMove(o.e.lift(ge.textEdit.range),ge.textEdit.text))}let Z=0,ae=0;for(let[ge,De]of M)ge.pushStackElement(),ge.pushEditOperations([],De,()=>[]),ge.pushStackElement(),ae+=1,Z+=De.length;return{ariaSummary:I.WU(ar.iN.bulkEditServiceSummary,Z,ae),isApplied:Z>0}})}};Ua=us([Jn(0,R.q)],Ua);let Ka=class extends dr{constructor(G,n){super(G),this._codeEditorService=n}showContextView(G,n,g){if(!n){let M=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();M&&(n=M.getContainerDomNode())}return super.showContextView(G,n,g)}};Ka=us([Jn(0,Yt),Jn(1,x.$)],Ka);let ja=class extends Us{constructor(G,n,g,M,Z,ae){super(G,n,g,M,Z,ae),this.configure({blockMouse:!1})}};var qi;ja=us([Jn(0,kt.b),Jn(1,rt.lT),Jn(2,Wt.u),Jn(3,Ko.d),Jn(4,jn.co),Jn(5,At.i6)],ja),(0,Ni.z)(q.Ui,wl,0),(0,Ni.z)(wo.V,Ha,0),(0,Ni.z)(wo.y,za,0),(0,Ni.z)(rr.ec,Nr,0),(0,Ni.z)(ka.e,class{getUriLabel(G,n){return G.scheme==="file"?G.fsPath:G.path}getUriBasenameLabel(G){return(0,Ps.EZ)(G)}},0),(0,Ni.z)(kt.b,class{publicLog2(){}},0),(0,Ni.z)(_n.S,class{confirm(G){return Zs(this,void 0,void 0,function*(){return{confirmed:this.doConfirm(G.message,G.detail),checkboxChecked:!1}})}doConfirm(G,n){let g=G;return n&&(g=g+`

`+n),window.confirm(g)}prompt(G){var n,g;return Zs(this,void 0,void 0,function*(){let M;if(this.doConfirm(G.message,G.detail)){let Z=[...(n=G.buttons)!==null&&n!==void 0?n:[]];G.cancelButton&&typeof G.cancelButton!="string"&&typeof G.cancelButton!="boolean"&&Z.push(G.cancelButton),M=yield(g=Z[0])===null||g===void 0?void 0:g.run({checkboxChecked:!1})}return{result:M}})}error(G,n){return Zs(this,void 0,void 0,function*(){yield this.prompt({type:pn.Z.Error,message:G,detail:n})})}},0),(0,Ni.z)(rt.lT,Dr,0),(0,Ni.z)(oo.lT,cs,0),(0,Ni.z)(k.O,class extends ws{constructor(){super()}},0),(0,Ni.z)(so.Z,Ro.nI,0),(0,Ni.z)(et.VZ,class extends Td{constructor(){super(new et.kw)}},0),(0,Ni.z)(R.q,js,0),(0,Ni.z)(Zr.i,Zo,0),(0,Ni.z)(At.i6,Ba,0),(0,Ni.z)(yt.R9,class{},0),(0,Ni.z)(yt.ek,sa,0),(0,Ni.z)(co.Uy,co.vm,0),(0,Ni.z)(Xt.p,O.eu,0),(0,Ni.z)(Ts.vu,Ua,0),(0,Ni.z)(Da.Y,class{constructor(){this._neverEmitter=new f.Q5,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}},0),(0,Ni.z)(Uo.S,Wa,0),(0,Ni.z)(r.F,Ao,0),(0,Ni.z)(_r.Lw,_r.XN,0),(0,Ni.z)(to.H,Va,0),(0,Ni.z)(Ko.d,Ys,0),(0,Ni.z)(Kn.eJ,An,0),(0,Ni.z)(Wt.u,Ka,0),(0,Ni.z)(Go.v4,pr,0),(0,Ni.z)(Ri.p,Pa,0),(0,Ni.z)(Wt.i,ja,0),(0,Ni.z)(jn.co,Ra,0),(0,Ni.z)(h.e7,class{playAudioCue(G,n){return Zs(this,void 0,void 0,function*(){})}},0),function(G){let n=new Ze.y;for(let[Z,ae]of(0,Ni.d)())n.set(Z,ae);let g=new oa(n,!0);n.set(Te.TG,g),G.get=function(Z){let ae=n.get(Z);if(!ae)throw new Error("Missing service "+Z);return ae instanceof hs.M?g.invokeFunction(ge=>ge.get(Z)):ae};let M=!1;G.initialize=function(Z){if(M)return g;M=!0;for(let[ge,De]of(0,Ni.d)())n.get(ge)||n.set(ge,De);for(let ge in Z)if(Z.hasOwnProperty(ge)){let De=(0,Te.yh)(ge);n.get(De)instanceof hs.M&&n.set(De,Z[ge])}let ae=(0,Md.n)();for(let ge of ae)try{g.createInstance(ge)}catch(De){(0,xe.dL)(De)}return g}}(qi||(qi={}));var $a=function(G,n,g,M){var Z,ae=arguments.length,ge=ae<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,g):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(G,n,g,M);else for(var De=G.length-1;De>=0;De--)(Z=G[De])&&(ge=(ae<3?Z(ge):ae>3?Z(n,g,ge):Z(n,g))||ge);return ae>3&&ge&&Object.defineProperty(n,g,ge),ge},Bn=function(G,n){return function(g,M){n(g,M,G)}};let Od=0,yl=!1,aa=class extends _e.Gm{constructor(G,n,g,M,Z,ae,ge,De,ze,He,Je,vt){let Pt=Object.assign({},n);Pt.ariaLabel=Pt.ariaLabel||ar.B8.editorViewAccessibleLabel,Pt.ariaLabel=Pt.ariaLabel+";"+ar.B8.accessibilityHelpMessage,super(G,Pt,{},g,M,Z,ae,De,ze,He,Je,vt),this._standaloneKeybindingService=ge instanceof Ys?ge:null,function(Bt){if(!Bt){if(yl)return;yl=!0}Fe.wW(Bt||document.body)}(Pt.ariaContainerElement)}addCommand(G,n,g){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let M="DYNAMIC_"+ ++Od,Z=At.Ao.deserialize(g);return this._standaloneKeybindingService.addDynamicKeybinding(M,G,n,Z),M}createContextKey(G,n){return this._contextKeyService.createKey(G,n)}addAction(G){if(typeof G.id!="string"||typeof G.label!="string"||typeof G.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),u.JT.None;let n=G.id,g=G.label,M=At.Ao.and(At.Ao.equals("editorId",this.getId()),At.Ao.deserialize(G.precondition)),Z=G.keybindings,ae=At.Ao.and(M,At.Ao.deserialize(G.keybindingContext)),ge=G.contextMenuGroupId||null,De=G.contextMenuOrder||0,ze=(Pt,...Bt)=>Promise.resolve(G.run(this,...Bt)),He=new u.SL,Je=this.getId()+":"+n;if(He.add(to.P.registerCommand(Je,ze)),ge){let Pt={command:{id:Je,title:g},when:M,group:ge,order:De};He.add(jn.BH.appendMenuItem(jn.eH.EditorContext,Pt))}if(Array.isArray(Z))for(let Pt of Z)He.add(this._standaloneKeybindingService.addDynamicKeybinding(Je,Pt,ze,ae));let vt=new yi.p(Je,g,g,M,(...Pt)=>Promise.resolve(G.run(this,...Pt)),this._contextKeyService);return this._actions.set(n,vt),He.add((0,u.OF)(()=>{this._actions.delete(n)})),He}_triggerCommand(G,n){if(this._codeEditorService instanceof Dn)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(G,n)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(G,n)}};aa=$a([Bn(2,Te.TG),Bn(3,x.$),Bn(4,to.H),Bn(5,At.i6),Bn(6,Ko.d),Bn(7,dt.XE),Bn(8,rt.lT),Bn(9,r.F),Bn(10,D.c_),Bn(11,Vn.p)],aa);let qa=class extends aa{constructor(G,n,g,M,Z,ae,ge,De,ze,He,Je,vt,Pt,Bt,ni){let Ci=Object.assign({},n);ra(He,Ci,!1);let Fi=De.registerEditorContainer(G);typeof Ci.theme=="string"&&De.setTheme(Ci.theme),Ci.autoDetectHighContrast!==void 0&&De.setAutoDetectHighContrast(!!Ci.autoDetectHighContrast);let Yi=Ci.model,an;if(delete Ci.model,super(G,Ci,g,M,Z,ae,ge,De,ze,Je,Bt,ni),this._configurationService=He,this._standaloneThemeService=De,this._register(Fi),Yi===void 0){let Gi=Pt.getLanguageIdByMimeType(Ci.language)||Ci.language||yo.bd;an=Sl(vt,Pt,Ci.value||"",Gi,void 0),this._ownsModel=!0}else an=Yi,this._ownsModel=!1;if(this._attachModel(an),an){let Gi={oldModelUrl:null,newModelUrl:an.uri};this._onDidChangeModel.fire(Gi)}}dispose(){super.dispose()}updateOptions(G){ra(this._configurationService,G,!1),typeof G.theme=="string"&&this._standaloneThemeService.setTheme(G.theme),G.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!G.autoDetectHighContrast),super.updateOptions(G)}_postDetachModelCleanup(G){super._postDetachModelCleanup(G),G&&this._ownsModel&&(G.dispose(),this._ownsModel=!1)}};qa=$a([Bn(2,Te.TG),Bn(3,x.$),Bn(4,to.H),Bn(5,At.i6),Bn(6,Ko.d),Bn(7,so.Z),Bn(8,rt.lT),Bn(9,q.Ui),Bn(10,r.F),Bn(11,R.q),Bn(12,k.O),Bn(13,D.c_),Bn(14,Vn.p)],qa);let Ga=class extends Ot{constructor(G,n,g,M,Z,ae,ge,De,ze,He,Je){let vt=Object.assign({},n);ra(De,vt,!0);let Pt=ae.registerEditorContainer(G);typeof vt.theme=="string"&&ae.setTheme(vt.theme),vt.autoDetectHighContrast!==void 0&&ae.setAutoDetectHighContrast(!!vt.autoDetectHighContrast),super(G,vt,{},Je,M,g,Z,ae,ge,ze,He),this._configurationService=De,this._standaloneThemeService=ae,this._register(Pt)}dispose(){super.dispose()}updateOptions(G){ra(this._configurationService,G,!0),typeof G.theme=="string"&&this._standaloneThemeService.setTheme(G.theme),G.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!G.autoDetectHighContrast),super.updateOptions(G)}_createInnerEditor(G,n,g){return G.createInstance(aa,n,g)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(G,n,g){return this.getModifiedEditor().addCommand(G,n,g)}createContextKey(G,n){return this.getModifiedEditor().createContextKey(G,n)}addAction(G){return this.getModifiedEditor().addAction(G)}};function Sl(G,n,g,M,Z){if(g=g||"",!M){let ae=g.indexOf(`
`),ge=g;return ae!==-1&&(ge=g.substring(0,ae)),Ll(G,g,n.createByFilepathOrFirstLine(Z||null,ge),Z)}return Ll(G,g,n.createById(M),Z)}function Ll(G,n,g,M){return G.createModel(n,g,M)}Ga=$a([Bn(2,Te.TG),Bn(3,At.i6),Bn(4,x.$),Bn(5,so.Z),Bn(6,rt.lT),Bn(7,q.Ui),Bn(8,Wt.i),Bn(9,yt.ek),Bn(10,Ri.p)],Ga);var kl=t(652),Pd=t(5463),Fd=t(2334),Dl=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};function Nl(G){let n=qi.get(Ko.d);return n instanceof Ys?n.addDynamicKeybindings(G.map(g=>({keybinding:g.keybinding,command:g.command,commandArgs:g.commandArgs,when:At.Ao.deserialize(g.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),u.JT.None)}var Bd=t(1264);function la(G,n){return typeof G=="boolean"?G:n}function xl(G,n){return typeof G=="string"?G:n}function El(G,n=!1){n&&(G=G.map(function(M){return M.toLowerCase()}));let g=function(M){let Z={};for(let ae of M)Z[ae]=!0;return Z}(G);return n?function(M){return g[M.toLowerCase()]!==void 0&&g.hasOwnProperty(M.toLowerCase())}:function(M){return g[M]!==void 0&&g.hasOwnProperty(M)}}function Qa(G,n){n=n.replace(/@@/g,"");let g,M=0;do g=!1,n=n.replace(/@(\w+)/g,function(ae,ge){g=!0;let De="";if(typeof G[ge]=="string")De=G[ge];else{if(!(G[ge]&&G[ge]instanceof RegExp))throw G[ge]===void 0?J(G,"language definition does not contain attribute '"+ge+"', used at: "+n):J(G,"attribute reference '"+ge+"' must be a string, used at: "+n);De=G[ge].source}return F(De)?"":"(?:"+De+")"}),M++;while(g&&M<5);n=n.replace(/\x01/g,"@");let Z=(G.ignoreCase?"i":"")+(G.unicode?"u":"");return new RegExp(n,Z)}function Wd(G,n,g,M){let Z=-1,ae=g,ge=g.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);ge&&(ge[3]&&(Z=parseInt(ge[3]),ge[2]&&(Z+=100)),ae=ge[4]);let De,ze="~",He=ae;if(ae&&ae.length!==0?/^\w*$/.test(He)?ze="==":(ge=ae.match(/^(@|!@|~|!~|==|!=)(.*)$/),ge&&(ze=ge[1],He=ge[2])):(ze="!=",He=""),ze!=="~"&&ze!=="!~"||!/^(\w|\|)*$/.test(He))if(ze==="@"||ze==="!@"){let Je=G[He];if(!Je)throw J(G,"the @ match target '"+He+"' is not defined, in rule: "+n);if(!function(Pt,Bt){if(!Bt||!Array.isArray(Bt))return!1;for(let ni of Bt)if(typeof ni!="string")return!1;return!0}(0,Je))throw J(G,"the @ match target '"+He+"' must be an array of strings, in rule: "+n);let vt=El(Je,G.ignoreCase);De=function(Pt){return ze==="@"?vt(Pt):!vt(Pt)}}else if(ze==="~"||ze==="!~")if(He.indexOf("$")<0){let Je=Qa(G,"^"+He+"$");De=function(vt){return ze==="~"?Je.test(vt):!Je.test(vt)}}else De=function(Je,vt,Pt,Bt){return Qa(G,"^"+oe(G,He,vt,Pt,Bt)+"$").test(Je)};else if(He.indexOf("$")<0){let Je=H(G,He);De=function(vt){return ze==="=="?vt===Je:vt!==Je}}else{let Je=H(G,He);De=function(vt,Pt,Bt,ni,Ci){let Fi=oe(G,Je,Pt,Bt,ni);return ze==="=="?vt===Fi:vt!==Fi}}else{let Je=El(He.split("|"),G.ignoreCase);De=function(vt){return ze==="~"?Je(vt):!Je(vt)}}return Z===-1?{name:g,value:M,test:function(Je,vt,Pt,Bt){return De(Je,Je,vt,Pt,Bt)}}:{name:g,value:M,test:function(Je,vt,Pt,Bt){let ni=function(Ci,Fi,Yi,an){if(an<0)return Ci;if(an<Fi.length)return Fi[an];if(an>=100){an-=100;let Gi=Yi.split(".");if(Gi.unshift(Yi),an<Gi.length)return Gi[an]}return null}(Je,vt,Pt,Z);return De(ni||"",Je,vt,Pt,Bt)}}}function Za(G,n,g){if(g){if(typeof g=="string")return g;if(g.token||g.token===""){if(typeof g.token!="string")throw J(G,"a 'token' attribute must be of type string, in rule: "+n);{let M={token:g.token};if(g.token.indexOf("$")>=0&&(M.tokenSubst=!0),typeof g.bracket=="string")if(g.bracket==="@open")M.bracket=1;else{if(g.bracket!=="@close")throw J(G,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+n);M.bracket=-1}if(g.next){if(typeof g.next!="string")throw J(G,"the next state must be a string value in rule: "+n);{let Z=g.next;if(!/^(@pop|@push|@popall)$/.test(Z)&&(Z[0]==="@"&&(Z=Z.substr(1)),Z.indexOf("$")<0&&!function(ae,ge){let De=ge;for(;De&&De.length>0;){if(ae.stateNames[De])return!0;let ze=De.lastIndexOf(".");De=ze<0?null:De.substr(0,ze)}return!1}(G,oe(G,Z,"",[],""))))throw J(G,"the next state '"+g.next+"' is not defined in rule: "+n);M.next=Z}}return typeof g.goBack=="number"&&(M.goBack=g.goBack),typeof g.switchTo=="string"&&(M.switchTo=g.switchTo),typeof g.log=="string"&&(M.log=g.log),typeof g.nextEmbedded=="string"&&(M.nextEmbedded=g.nextEmbedded,G.usesEmbedded=!0),M}}if(Array.isArray(g)){let M=[];for(let Z=0,ae=g.length;Z<ae;Z++)M[Z]=Za(G,n,g[Z]);return{group:M}}if(g.cases){let M=[];for(let ae in g.cases)if(g.cases.hasOwnProperty(ae)){let ge=Za(G,n,g.cases[ae]);ae==="@default"||ae==="@"||ae===""?M.push({test:void 0,value:ge,name:ae}):ae==="@eos"?M.push({test:function(De,ze,He,Je){return Je},value:ge,name:ae}):M.push(Wd(G,n,ae,ge))}let Z=G.defaultToken;return{test:function(ae,ge,De,ze){for(let He of M)if(!He.test||He.test(ae,ge,De,ze))return He.value;return Z}}}throw J(G,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+n)}return{token:""}}class Vd{constructor(n){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=n}setRegex(n,g){let M;if(typeof g=="string")M=g;else{if(!(g instanceof RegExp))throw J(n,"rules must start with a match string or regular expression: "+this.name);M=g.source}this.matchOnlyAtLineStart=M.length>0&&M[0]==="^",this.name=this.name+": "+M,this.regex=Qa(n,"^(?:"+(this.matchOnlyAtLineStart?M.substr(1):M)+")")}setAction(n,g){this.action=Za(n,this.name,g)}}function Il(G,n){if(!n||typeof n!="object")throw new Error("Monarch: expecting a language definition object");let g={};g.languageId=G,g.includeLF=la(n.includeLF,!1),g.noThrow=!1,g.maxStack=100,g.start=typeof n.start=="string"?n.start:null,g.ignoreCase=la(n.ignoreCase,!1),g.unicode=la(n.unicode,!1),g.tokenPostfix=xl(n.tokenPostfix,"."+g.languageId),g.defaultToken=xl(n.defaultToken,"source"),g.usesEmbedded=!1;let M=n;function Z(ge,De,ze){for(let He of ze){let Je=He.include;if(Je){if(typeof Je!="string")throw J(g,"an 'include' attribute must be a string at: "+ge);if(Je[0]==="@"&&(Je=Je.substr(1)),!n.tokenizer[Je])throw J(g,"include target '"+Je+"' is not defined at: "+ge);Z(ge+"."+Je,De,n.tokenizer[Je])}else{let vt=new Vd(ge);if(Array.isArray(He)&&He.length>=1&&He.length<=3)if(vt.setRegex(M,He[0]),He.length>=3)if(typeof He[1]=="string")vt.setAction(M,{token:He[1],next:He[2]});else{if(typeof He[1]!="object")throw J(g,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+ge);{let Pt=He[1];Pt.next=He[2],vt.setAction(M,Pt)}}else vt.setAction(M,He[1]);else{if(!He.regex)throw J(g,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+ge);He.name&&typeof He.name=="string"&&(vt.name=He.name),He.matchOnlyAtStart&&(vt.matchOnlyAtLineStart=la(He.matchOnlyAtLineStart,!1)),vt.setRegex(M,He.regex),vt.setAction(M,He.action)}De.push(vt)}}}if(M.languageId=G,M.includeLF=g.includeLF,M.ignoreCase=g.ignoreCase,M.unicode=g.unicode,M.noThrow=g.noThrow,M.usesEmbedded=g.usesEmbedded,M.stateNames=n.tokenizer,M.defaultToken=g.defaultToken,!n.tokenizer||typeof n.tokenizer!="object")throw J(g,"a language definition must define the 'tokenizer' attribute as an object");g.tokenizer=[];for(let ge in n.tokenizer)if(n.tokenizer.hasOwnProperty(ge)){g.start||(g.start=ge);let De=n.tokenizer[ge];g.tokenizer[ge]=new Array,Z("tokenizer."+ge,g.tokenizer[ge],De)}if(g.usesEmbedded=M.usesEmbedded,n.brackets){if(!Array.isArray(n.brackets))throw J(g,"the 'brackets' attribute must be defined as an array")}else n.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let ae=[];for(let ge of n.brackets){let De=ge;if(De&&Array.isArray(De)&&De.length===3&&(De={token:De[2],open:De[0],close:De[1]}),De.open===De.close)throw J(g,"open and close brackets in a 'brackets' attribute must be different: "+De.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof De.open!="string"||typeof De.token!="string"||typeof De.close!="string")throw J(g,"every element in the 'brackets' array must be a '{open,close,token}' object or array");ae.push({token:De.token+g.tokenPostfix,open:H(g,De.open),close:H(g,De.close)})}return g.brackets=ae,g.noThrow=!0,g}var Hd=function(G,n,g,M){return new(g||(g=Promise))(function(Z,ae){function ge(He){try{ze(M.next(He))}catch(Je){ae(Je)}}function De(He){try{ze(M.throw(He))}catch(Je){ae(Je)}}function ze(He){var Je;He.done?Z(He.value):(Je=He.value,Je instanceof g?Je:new g(function(vt){vt(Je)})).then(ge,De)}ze((M=M.apply(G,n||[])).next())})};class zd{constructor(n,g){this._languageId=n,this._actual=g}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(n,g,M){if(typeof this._actual.tokenize=="function")return xr.adaptTokenize(this._languageId,this._actual,n,M);throw new Error("Not supported!")}tokenizeEncoded(n,g,M){let Z=this._actual.tokenizeEncoded(n,M);return new E.DI(Z.tokens,Z.endState)}}class xr{constructor(n,g,M,Z){this._languageId=n,this._actual=g,this._languageService=M,this._standaloneThemeService=Z}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(n,g){let M=[],Z=0;for(let ae=0,ge=n.length;ae<ge;ae++){let De=n[ae],ze=De.startIndex;ae===0?ze=0:ze<Z&&(ze=Z),M[ae]=new E.WU(ze,De.scopes,g),Z=ze}return M}static adaptTokenize(n,g,M,Z){let ae=g.tokenize(M,Z),ge=xr._toClassicTokens(ae.tokens,n),De;return De=ae.endState.equals(Z)?Z:ae.endState,new E.hG(ge,De)}tokenize(n,g,M){return xr.adaptTokenize(this._languageId,this._actual,n,M)}_toBinaryTokens(n,g){let M=n.encodeLanguageId(this._languageId),Z=this._standaloneThemeService.getColorTheme().tokenTheme,ae=[],ge=0,De=0;for(let He=0,Je=g.length;He<Je;He++){let vt=g[He],Pt=1024|Z.match(M,vt.scopes);if(ge>0&&ae[ge-1]===Pt)continue;let Bt=vt.startIndex;He===0?Bt=0:Bt<De&&(Bt=De),ae[ge++]=Bt,ae[ge++]=Pt,De=Bt}let ze=new Uint32Array(ge);for(let He=0;He<ge;He++)ze[He]=ae[He];return ze}tokenizeEncoded(n,g,M){let Z=this._actual.tokenize(n,M),ae=this._toBinaryTokens(this._languageService.languageIdCodec,Z.tokens),ge;return ge=Z.endState.equals(M)?M:Z.endState,new E.DI(ae,ge)}}function Tl(G){return G&&typeof G.then=="function"}function Ml(G,n){return function(g){return"tokenizeEncoded"in g}(n)?new zd(G,n):new xr(G,n,qi.get(k.O),qi.get(so.Z))}function Ya(G,n){let g=new E.MO(()=>Hd(this,void 0,void 0,function*(){let M=yield Promise.resolve(n.create());return M?typeof M.getInitialState=="function"?Ml(G,M):new de(qi.get(k.O),qi.get(so.Z),G,Il(G,M),qi.get(q.Ui)):null}));return E.RW.registerFactory(G,g)}var Ud=t(8823);m.BH.wrappingIndent.defaultValue=0,m.BH.glyphMargin.defaultValue=!1,m.BH.autoIndent.defaultValue=3,m.BH.overviewRulerLanes.defaultValue=2,Ud.xC.setFormatterSelector((G,n,g)=>Promise.resolve(G[0]));let uo=(0,B.O)();uo.editor={create:function(G,n,g){return qi.initialize(g||{}).createInstance(qa,G,n)},getEditors:function(){return qi.get(x.$).listCodeEditors()},getDiffEditors:function(){return qi.get(x.$).listDiffEditors()},onDidCreateEditor:function(G){return qi.get(x.$).onCodeEditorAdd(n=>{G(n)})},onDidCreateDiffEditor:function(G){return qi.get(x.$).onDiffEditorAdd(n=>{G(n)})},createDiffEditor:function(G,n,g){return qi.initialize(g||{}).createInstance(Ga,G,n)},createDiffNavigator:function(G,n){return qi.initialize({}).createInstance(b,G,n)},addCommand:function(G){if(typeof G.id!="string"||typeof G.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return to.P.registerCommand(G.id,G.run)},addEditorAction:function(G){if(typeof G.id!="string"||typeof G.label!="string"||typeof G.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");let n=At.Ao.deserialize(G.precondition),g=new u.SL;if(g.add(to.P.registerCommand(G.id,(M,...Z)=>Ye._l.runEditorCommand(M,Z,n,(ae,ge,De)=>Promise.resolve(G.run(ge,...De))))),G.contextMenuGroupId){let M={command:{id:G.id,title:G.label},when:n,group:G.contextMenuGroupId,order:G.contextMenuOrder||0};g.add(jn.BH.appendMenuItem(jn.eH.EditorContext,M))}if(Array.isArray(G.keybindings)){let M=qi.get(Ko.d);if(M instanceof Ys){let Z=At.Ao.and(n,At.Ao.deserialize(G.keybindingContext));g.add(M.addDynamicKeybindings(G.keybindings.map(ae=>({keybinding:ae,command:G.id,when:Z}))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return g},addKeybindingRule:function(G){return Nl([G])},addKeybindingRules:Nl,createModel:function(G,n,g){let M=qi.get(k.O),Z=M.getLanguageIdByMimeType(n)||n;return Sl(qi.get(R.q),M,G,Z,g)},setModelLanguage:function(G,n){let g=qi.get(k.O),M=g.getLanguageIdByMimeType(n)||n||yo.bd;G.setLanguage(g.createById(M))},setModelMarkers:function(G,n,g){G&&qi.get(oo.lT).changeOne(n,G.uri,g)},getModelMarkers:function(G){return qi.get(oo.lT).read(G)},removeAllMarkers:function(G){qi.get(oo.lT).changeAll(G,[])},onDidChangeMarkers:function(G){return qi.get(oo.lT).onMarkerChanged(G)},getModels:function(){return qi.get(R.q).getModels()},getModel:function(G){return qi.get(R.q).getModel(G)},onDidCreateModel:function(G){return qi.get(R.q).onModelAdded(G)},onWillDisposeModel:function(G){return qi.get(R.q).onModelRemoved(G)},onDidChangeModelLanguage:function(G){return qi.get(R.q).onModelLanguageChanged(n=>{G({model:n.model,oldLanguage:n.oldLanguageId})})},createWebWorker:function(G){return function(n,g,M){return new $(n,g,M)}(qi.get(R.q),qi.get(D.c_),G)},colorizeElement:function(G,n){let g=qi.get(k.O),M=qi.get(so.Z);return M.registerEditorContainer(G),Ce.colorizeElement(M,g,G,n)},colorize:function(G,n,g){let M=qi.get(k.O);return qi.get(so.Z).registerEditorContainer(document.body),Ce.colorize(M,G,n,g)},colorizeModelLine:function(G,n,g=4){return qi.get(so.Z).registerEditorContainer(document.body),Ce.colorizeModelLine(G,n,g)},tokenize:function(G,n){E.RW.getOrCreate(n);let g=(ae=n,E.RW.get(ae)||{getInitialState:()=>L.TJ,tokenize:(De,ze,He)=>(0,L.Ri)(ae,He)}),M=(0,I.uq)(G),Z=[];var ae;let ge=g.getInitialState();for(let De=0,ze=M.length;De<ze;De++){let He=M[De],Je=g.tokenize(He,!0,ge);Z[De]=Je.tokens,ge=Je.endState}return Z},defineTheme:function(G,n){qi.get(so.Z).defineTheme(G,n)},setTheme:function(G){qi.get(so.Z).setTheme(G)},remeasureFonts:function(){A.g.clearAllFontInfos()},registerCommand:function(G,n){return to.P.registerCommand({id:G,handler:n})},registerLinkOpener:function(G){return qi.get(Go.v4).registerOpener({open(n){return Dl(this,void 0,void 0,function*(){return typeof n=="string"&&(n=_.o.parse(n)),G.open(n)})}})},registerEditorOpener:function(G){return qi.get(x.$).registerCodeEditorOpenHandler((n,g,M)=>Dl(this,void 0,void 0,function*(){var Z;if(!g)return null;let ae=(Z=n.options)===null||Z===void 0?void 0:Z.selection,ge;return ae&&typeof ae.endLineNumber=="number"&&typeof ae.endColumn=="number"?ge=ae:ae&&(ge={lineNumber:ae.startLineNumber,column:ae.startColumn}),(yield G.openCodeEditor(g,n.resource,ge))?g:null}))},AccessibilitySupport:N.ao,ContentWidgetPositionPreference:N.r3,CursorChangeReason:N.Vi,DefaultEndOfLine:N._x,EditorAutoIndentStrategy:N.rf,EditorOption:N.wT,EndOfLinePreference:N.gm,EndOfLineSequence:N.jl,MinimapPosition:N.F5,MouseTargetType:N.MG,OverlayWidgetPositionPreference:N.E$,OverviewRulerLane:N.sh,GlyphMarginLane:N.U,RenderLineNumbersType:N.Lu,RenderMinimap:N.vQ,ScrollbarVisibility:N.g_,ScrollType:N.g4,TextEditorCursorBlinkingStyle:N.In,TextEditorCursorStyle:N.d2,TrackedRangeStickiness:N.OI,WrappingIndent:N.up,InjectedTextCursorStops:N.RM,PositionAffinity:N.py,ConfigurationChangedEvent:m.Bb,BareFontInfo:l.E4,FontInfo:l.pR,TextModelResolvedOptions:w.dJ,FindMatch:w.tk,ApplyUpdateResult:m.rk,LineRange:Pd.z,LineRangeMapping:kl.f0,RangeMapping:kl.iy,EditorZoom:Fd.C,EditorType:a.g,EditorOptions:m.BH},uo.languages={register:function(G){yo.dQ.registerLanguage(G)},getLanguages:function(){let G=[];return G=G.concat(yo.dQ.getLanguages()),G},onLanguage:function(G,n){let g=qi.get(k.O).onDidRequestRichLanguageFeatures(M=>{M===G&&(g.dispose(),n())});return g},onLanguageEncountered:function(G,n){let g=qi.get(k.O).onDidRequestBasicLanguageFeatures(M=>{M===G&&(g.dispose(),n())});return g},getEncodedLanguageId:function(G){return qi.get(k.O).languageIdCodec.encodeLanguageId(G)},setLanguageConfiguration:function(G,n){if(!qi.get(k.O).isRegisteredLanguageId(G))throw new Error(`Cannot set configuration for unknown language ${G}`);return qi.get(D.c_).register(G,n,100)},setColorMap:function(G){let n=qi.get(so.Z);if(G){let g=[null];for(let M=1,Z=G.length;M<Z;M++)g[M]=Bd.Il.fromHex(G[M]);n.setColorMapOverride(g)}else n.setColorMapOverride(null)},registerTokensProviderFactory:Ya,setTokensProvider:function(G,n){if(!qi.get(k.O).isRegisteredLanguageId(G))throw new Error(`Cannot set tokens provider for unknown language ${G}`);return Tl(n)?Ya(G,{create:()=>n}):E.RW.register(G,Ml(G,n))},setMonarchTokensProvider:function(G,n){return Tl(n)?Ya(G,{create:()=>n}):E.RW.register(G,(g=>new de(qi.get(k.O),qi.get(so.Z),G,Il(G,g),qi.get(q.Ui)))(n))},registerReferenceProvider:function(G,n){return qi.get(Vn.p).referenceProvider.register(G,n)},registerRenameProvider:function(G,n){return qi.get(Vn.p).renameProvider.register(G,n)},registerCompletionItemProvider:function(G,n){return qi.get(Vn.p).completionProvider.register(G,n)},registerSignatureHelpProvider:function(G,n){return qi.get(Vn.p).signatureHelpProvider.register(G,n)},registerHoverProvider:function(G,n){return qi.get(Vn.p).hoverProvider.register(G,{provideHover:(g,M,Z)=>{let ae=g.getWordAtPosition(M);return Promise.resolve(n.provideHover(g,M,Z)).then(ge=>{if(ge)return!ge.range&&ae&&(ge.range=new o.e(M.lineNumber,ae.startColumn,M.lineNumber,ae.endColumn)),ge.range||(ge.range=new o.e(M.lineNumber,M.column,M.lineNumber,M.column)),ge})}})},registerDocumentSymbolProvider:function(G,n){return qi.get(Vn.p).documentSymbolProvider.register(G,n)},registerDocumentHighlightProvider:function(G,n){return qi.get(Vn.p).documentHighlightProvider.register(G,n)},registerLinkedEditingRangeProvider:function(G,n){return qi.get(Vn.p).linkedEditingRangeProvider.register(G,n)},registerDefinitionProvider:function(G,n){return qi.get(Vn.p).definitionProvider.register(G,n)},registerImplementationProvider:function(G,n){return qi.get(Vn.p).implementationProvider.register(G,n)},registerTypeDefinitionProvider:function(G,n){return qi.get(Vn.p).typeDefinitionProvider.register(G,n)},registerCodeLensProvider:function(G,n){return qi.get(Vn.p).codeLensProvider.register(G,n)},registerCodeActionProvider:function(G,n,g){return qi.get(Vn.p).codeActionProvider.register(G,{providedCodeActionKinds:g==null?void 0:g.providedCodeActionKinds,documentation:g==null?void 0:g.documentation,provideCodeActions:(M,Z,ae,ge)=>{let De=qi.get(oo.lT).read({resource:M.uri}).filter(ze=>o.e.areIntersectingOrTouching(ze,Z));return n.provideCodeActions(M,Z,{markers:De,only:ae.only,trigger:ae.trigger},ge)},resolveCodeAction:n.resolveCodeAction})},registerDocumentFormattingEditProvider:function(G,n){return qi.get(Vn.p).documentFormattingEditProvider.register(G,n)},registerDocumentRangeFormattingEditProvider:function(G,n){return qi.get(Vn.p).documentRangeFormattingEditProvider.register(G,n)},registerOnTypeFormattingEditProvider:function(G,n){return qi.get(Vn.p).onTypeFormattingEditProvider.register(G,n)},registerLinkProvider:function(G,n){return qi.get(Vn.p).linkProvider.register(G,n)},registerColorProvider:function(G,n){return qi.get(Vn.p).colorProvider.register(G,n)},registerFoldingRangeProvider:function(G,n){return qi.get(Vn.p).foldingRangeProvider.register(G,n)},registerDeclarationProvider:function(G,n){return qi.get(Vn.p).declarationProvider.register(G,n)},registerSelectionRangeProvider:function(G,n){return qi.get(Vn.p).selectionRangeProvider.register(G,n)},registerDocumentSemanticTokensProvider:function(G,n){return qi.get(Vn.p).documentSemanticTokensProvider.register(G,n)},registerDocumentRangeSemanticTokensProvider:function(G,n){return qi.get(Vn.p).documentRangeSemanticTokensProvider.register(G,n)},registerInlineCompletionsProvider:function(G,n){return qi.get(Vn.p).inlineCompletionsProvider.register(G,n)},registerInlayHintsProvider:function(G,n){return qi.get(Vn.p).inlayHintsProvider.register(G,n)},DocumentHighlightKind:N.MY,CompletionItemKind:N.cm,CompletionItemTag:N.we,CompletionItemInsertTextRule:N.a7,SymbolKind:N.cR,SymbolTag:N.r4,IndentAction:N.wU,CompletionTriggerKind:N.Ij,SignatureHelpTriggerKind:N.WW,InlayHintKind:N.gl,InlineCompletionTriggerKind:N.bw,CodeActionTriggerType:N.np,FoldingRangeKind:E.AD,SelectedSuggestionInfo:E.ln};let Kd=uo.CancellationTokenSource,jd=uo.Emitter,$d=uo.KeyCode,qd=uo.KeyMod,Gd=uo.Position,Qd=uo.Range,Zd=uo.Selection,Yd=uo.SelectionDirection,Jd=uo.MarkerSeverity,Xd=uo.MarkerTag,eh=uo.Uri,th=uo.Token,ih=uo.editor,nh=uo.languages,Rl=globalThis.MonacoEnvironment;(Rl!=null&&Rl.globalAPI||typeof define=="function"&&t.amdO)&&(globalThis.monaco=uo),globalThis.require!==void 0&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},9477:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(5321),B=t(8626),u=t(5152),I=t(3794),_=t(5976),A=t(1432),x=t(7295),v=t(666),f=t(6830),d=t(9102),o=t(4662),h=t(3983),r=t(2065),i=t(1847),c=t(988),b=t(913),l=function(R,O,$,N){var T,C=arguments.length,W=C<3?O:N===null?N=Object.getOwnPropertyDescriptor(O,$):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(R,O,$,N);else for(var K=R.length-1;K>=0;K--)(T=R[K])&&(W=(C<3?T(W):C>3?T(O,$,W):T(O,$))||W);return C>3&&W&&Object.defineProperty(O,$,W),W},a=function(R,O){return function($,N){O($,N,R)}};let w=new h.uy("accessibilityHelpWidgetVisible",!1),E=class md extends _.JT{static get(O){return O.getContribution(md.ID)}constructor(O,$){super(),this._editor=O,this._widget=this._register($.createInstance(D,this._editor))}show(){this._widget.show()}hide(){this._widget.hide()}};E.ID="editor.contrib.accessibilityHelpController",E=l([a(1,r.TG)],E);let D=class _a extends I.${constructor(O,$,N,T){super(),this._contextKeyService=$,this._keybindingService=N,this._openerService=T,this._editor=O,this._isVisibleKey=w.bindTo(this._contextKeyService),this._domNode=(0,B.X)(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-modal","true"),this._domNode.setAttribute("aria-hidden","true");let C=(0,m.R3)(this._domNode.domNode,(0,m.$)("h1",void 0,b.Oe.accessibilityHelpTitle));C.id="help-dialog-heading",this._domNode.setAttribute("aria-labelledby",C.id),this._contentDomNode=(0,B.X)(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._contentDomNode.domNode.id="help-dialog-content",this._domNode.appendChild(this._contentDomNode),this._contentDomNode.setAttribute("aria-describedby",this._contentDomNode.domNode.id),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register((0,m.mu)(this._contentDomNode.domNode,"keydown",W=>{if(this._isVisible&&(W.equals(2083)&&((0,u.Z9)(b.Oe.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),(0,m.PO)(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),W.preventDefault(),W.stopPropagation()),W.equals(2086))){(0,u.Z9)(b.Oe.openingDocs);let K=this._editor.getRawOptions().accessibilityHelpUrl;K===void 0&&(K="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(v.o.parse(K)),W.preventDefault(),W.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return _a.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(O,$,N){let T=this._keybindingService.lookupKeybinding(O);return T?x.WU($,T.getAriaLabel()):x.WU(N,O)}_buildContent(){let O=this._contentDomNode.domNode,$=this._editor.getOptions(),N=this._editor.getSelections(),T=0;if(N){let F=this._editor.getModel();F&&N.forEach(H=>{T+=F.getValueLengthInRange(H)})}(0,m.R3)(O,(0,m.$)("p",void 0,function(F,H){return F&&F.length!==0?F.length===1?H?x.WU(b.Oe.singleSelectionRange,F[0].positionLineNumber,F[0].positionColumn,H):x.WU(b.Oe.singleSelection,F[0].positionLineNumber,F[0].positionColumn):H?x.WU(b.Oe.multiSelectionRange,F.length,H):F.length>0?x.WU(b.Oe.multiSelection,F.length):"":b.Oe.noSelection}(N,T)));let C=(0,m.R3)(O,(0,m.$)("p"));$.get(59)?$.get(87)?C.textContent=b.Oe.readonlyDiffEditor:C.textContent=b.Oe.editableDiffEditor:$.get(87)?C.textContent=b.Oe.readonlyEditor:C.textContent=b.Oe.editableEditor;let W=(0,m.R3)(O,(0,m.$)("ul")),K=A.dz?b.Oe.changeConfigToOnMac:b.Oe.changeConfigToOnWinLinux;switch($.get(2)){case 0:(0,m.R3)(W,(0,m.$)("li",void 0,K));break;case 2:(0,m.R3)(W,(0,m.$)("li",void 0,b.Oe.auto_on));break;case 1:(0,m.R3)(W,(0,m.$)("li",void 0,b.Oe.auto_off,K))}$.get(138)?(0,m.R3)(W,(0,m.$)("li",void 0,this._descriptionForCommand(o.ToggleTabFocusModeAction.ID,b.Oe.tabFocusModeOnMsg,b.Oe.tabFocusModeOnMsgNoKb))):(0,m.R3)(W,(0,m.$)("li",void 0,this._descriptionForCommand(o.ToggleTabFocusModeAction.ID,b.Oe.tabFocusModeOffMsg,b.Oe.tabFocusModeOffMsgNoKb)));let j=A.dz?b.Oe.openDocMac:b.Oe.openDocWinLinux;(0,m.R3)(W,(0,m.$)("li",void 0,j)),(0,m.R3)(O,(0,m.$)("p",void 0,b.Oe.outroMsg))}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,(0,m.PO)(this._contentDomNode.domNode),this._editor.focus())}_layout(){let O=this._editor.getLayoutInfo(),$=Math.max(5,Math.min(_a.WIDTH,O.width-40)),N=Math.max(5,Math.min(_a.HEIGHT,O.height-40));this._domNode.setWidth($),this._domNode.setHeight(N);let T=Math.round((O.height-N)/2);this._domNode.setTop(T);let C=Math.round((O.width-$)/2);this._domNode.setLeft(C)}};D.ID="editor.contrib.accessibilityHelpWidget",D.WIDTH=500,D.HEIGHT=300,D=l([a(1,h.i6),a(2,i.d),a(3,c.v4)],D);class L extends f.R6{constructor(){super({id:"editor.action.showAccessibilityHelp",label:b.Oe.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(O,$){let N=E.get($);N==null||N.show()}}(0,f._K)(E.ID,E,4),(0,f.Qr)(L);let k=f._l.bindToContribution(E.get);(0,f.fK)(new k({id:"closeAccessibilityHelp",precondition:w,handler:R=>R.hide(),kbOpts:{weight:200,kbExpr:d.u.focus,primary:9,secondary:[1033]}}))},9646:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{IPadShowKeyboard:()=>_});var m=t(5321),B=t(5976),u=t(6830),I=t(1432);class _ extends B.JT{constructor(v){super(),this.editor=v,this.widget=null,I.gn&&(this._register(v.onDidChangeConfiguration(()=>this.update())),this.update())}update(){let v=!this.editor.getOption(87);!this.widget&&v?this.widget=new A(this.editor):this.widget&&!v&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}_.ID="editor.contrib.iPadShowKeyboard";class A extends B.JT{constructor(v){super(),this.editor=v,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(m.nm(this._domNode,"touchstart",f=>{this.editor.focus()})),this._register(m.nm(this._domNode,"focus",f=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return A.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}A.ID="editor.contrib.ShowKeyboardWidget",(0,u._K)(_.ID,_,3)},7830:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(5321),B=t(1264),u=t(5976),I=t(6830),_=t(6887),A=t(5797),x=t(276),v=t(2042),f=t(4156),d=t(913),o=function(c,b){return function(l,a){b(l,a,c)}};let h=class fd extends u.JT{static get(b){return b.getContribution(fd.ID)}constructor(b,l,a){super(),this._editor=b,this._languageService=a,this._widget=null,this._register(this._editor.onDidChangeModel(w=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(w=>this.stop())),this._register(_.RW.onDidChange(w=>this.stop())),this._register(this._editor.onKeyUp(w=>w.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new i(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};h.ID="editor.contrib.inspectTokens",h=function(c,b,l,a){var w,E=arguments.length,D=E<3?b:a===null?a=Object.getOwnPropertyDescriptor(b,l):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,b,l,a);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(D=(E<3?w(D):E>3?w(b,l,D):w(b,l))||D);return E>3&&D&&Object.defineProperty(b,l,D),D}([o(1,f.Z),o(2,v.O)],h);class r extends I.R6{constructor(){super({id:"editor.action.inspectTokens",label:d.ug.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(b,l){let a=h.get(l);a==null||a.launch()}}class i extends u.JT{constructor(b,l){super(),this.allowEditorOverflow=!0,this._editor=b,this._languageService=l,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=function(a,w){let E=_.RW.get(w);if(E)return E;let D=a.encodeLanguageId(w);return{getInitialState:()=>x.TJ,tokenize:(L,k,R)=>(0,x.Ri)(w,R),tokenizeEncoded:(L,k,R)=>(0,x.Dy)(D,R)}}(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(a=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return i._ID}_compute(b){let l=this._getTokensAtLine(b.lineNumber),a=0;for(let k=l.tokens1.length-1;k>=0;k--){let R=l.tokens1[k];if(b.column-1>=R.offset){a=k;break}}let w=0;for(let k=l.tokens2.length>>>1;k>=0;k--)if(b.column-1>=l.tokens2[k<<1]){w=k;break}let E=this._model.getLineContent(b.lineNumber),D="";if(a<l.tokens1.length){let k=l.tokens1[a].offset,R=a+1<l.tokens1.length?l.tokens1[a+1].offset:E.length;D=E.substring(k,R)}(0,m.mc)(this._domNode,(0,m.$)("h2.tm-token",void 0,function(k){let R="";for(let O=0,$=k.length;O<$;O++){let N=k.charCodeAt(O);switch(N){case 9:R+="\u2192";break;case 32:R+="\xB7";break;default:R+=String.fromCharCode(N)}}return R}(D),(0,m.$)("span.tm-token-length",void 0,`${D.length} ${D.length===1?"char":"chars"}`))),(0,m.R3)(this._domNode,(0,m.$)("hr.tokens-inspect-separator",{style:"clear:both"}));let L=1+(w<<1)<l.tokens2.length?this._decodeMetadata(l.tokens2[1+(w<<1)]):null;(0,m.R3)(this._domNode,(0,m.$)("table.tm-metadata-table",void 0,(0,m.$)("tbody",void 0,(0,m.$)("tr",void 0,(0,m.$)("td.tm-metadata-key",void 0,"language"),(0,m.$)("td.tm-metadata-value",void 0,`${L?L.languageId:"-?-"}`)),(0,m.$)("tr",void 0,(0,m.$)("td.tm-metadata-key",void 0,"token type"),(0,m.$)("td.tm-metadata-value",void 0,`${L?this._tokenTypeToString(L.tokenType):"-?-"}`)),(0,m.$)("tr",void 0,(0,m.$)("td.tm-metadata-key",void 0,"font style"),(0,m.$)("td.tm-metadata-value",void 0,`${L?this._fontStyleToString(L.fontStyle):"-?-"}`)),(0,m.$)("tr",void 0,(0,m.$)("td.tm-metadata-key",void 0,"foreground"),(0,m.$)("td.tm-metadata-value",void 0,`${L?B.Il.Format.CSS.formatHex(L.foreground):"-?-"}`)),(0,m.$)("tr",void 0,(0,m.$)("td.tm-metadata-key",void 0,"background"),(0,m.$)("td.tm-metadata-value",void 0,`${L?B.Il.Format.CSS.formatHex(L.background):"-?-"}`))))),(0,m.R3)(this._domNode,(0,m.$)("hr.tokens-inspect-separator")),a<l.tokens1.length&&(0,m.R3)(this._domNode,(0,m.$)("span.tm-token-type",void 0,l.tokens1[a].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(b){let l=_.RW.getColorMap(),a=A.N.getLanguageId(b),w=A.N.getTokenType(b),E=A.N.getFontStyle(b),D=A.N.getForeground(b),L=A.N.getBackground(b);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(a),tokenType:w,fontStyle:E,foreground:l[D],background:l[L]}}_tokenTypeToString(b){switch(b){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(b){let l="";return 1&b&&(l+="italic "),2&b&&(l+="bold "),4&b&&(l+="underline "),8&b&&(l+="strikethrough "),l.length===0&&(l="---"),l}_getTokensAtLine(b){let l=this._getStateBeforeLine(b),a=this._tokenizationSupport.tokenize(this._model.getLineContent(b),!0,l),w=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(b),!0,l);return{startState:l,tokens1:a.tokens,tokens2:w.tokens,endState:a.endState}}_getStateBeforeLine(b){let l=this._tokenizationSupport.getInitialState();for(let a=1;a<b;a++)l=this._tokenizationSupport.tokenize(this._model.getLineContent(a),!0,l).endState;return l}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}i._ID="editor.contrib.inspectTokensWidget",(0,I._K)(h.ID,h,4),(0,I.Qr)(r)},8956:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{GotoLineAction:()=>ie,StandaloneCommandsQuickAccessProvider:()=>ne});var m=t(9872),B=t(725),u=t(913),I=t(1640),_=t(1212),A=t(9488),x=t(8401),v=t(3580);function f(se,ce){return ce&&(se.stack||se.stacktrace)?v.NC("stackTrace.format","{0}: {1}",o(se),d(se.stack)||d(se.stacktrace)):o(se)}function d(se){return Array.isArray(se)?se.join(`
`):se}function o(se){return typeof se.code=="string"&&typeof se.errno=="number"&&typeof se.syscall=="string"?v.NC("nodeExceptionMessage","A system error occurred ({0})",se.message):se.message||v.NC("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function h(se=null,ce=!1){if(!se)return v.NC("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(se)){let be=A.kX(se),de=h(be[0],ce);return be.length>1?v.NC("error.moreErrors","{0} ({1} errors in total)",de,be.length):de}if(x.HD(se))return se;if(se.detail){let be=se.detail;if(be.error)return f(be.error,ce);if(be.exception)return f(be.exception,ce)}return se.stack?f(se,ce):se.message?se.message:v.NC("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var r,i=t(7301),c=t(5392),b=t(5976),l=t(3702),a=t(4565),w=t(3108),E=t(8820),D=t(2065),L=t(1847),k=t(5393),R=t(1050),O=function(se,ce,be,de){return new(be||(be=Promise))(function(U,ue){function ve(Ce){try{ye(de.next(Ce))}catch(Ee){ue(Ee)}}function X(Ce){try{ye(de.throw(Ce))}catch(Ee){ue(Ee)}}function ye(Ce){var Ee;Ce.done?U(Ce.value):(Ee=Ce.value,Ee instanceof be?Ee:new be(function(Ae){Ae(Ee)})).then(ve,X)}ye((de=de.apply(se,ce||[])).next())})};function $(se){let ce=se;return Array.isArray(ce.items)}function N(se){let ce=se;return!!ce.picks&&ce.additionalPicks instanceof Promise}(function(se){se[se.NO_ACTION=0]="NO_ACTION",se[se.CLOSE_PICKER=1]="CLOSE_PICKER",se[se.REFRESH_PICKER=2]="REFRESH_PICKER",se[se.REMOVE_ITEM=3]="REMOVE_ITEM"})(r||(r={}));class T extends b.JT{constructor(ce,be){super(),this.prefix=ce,this.options=be}provide(ce,be,de){var U;let ue=new b.SL,ve;ce.canAcceptInBackground=!!(!((U=this.options)===null||U===void 0)&&U.canAcceptInBackground),ce.matchOnLabel=ce.matchOnDescription=ce.matchOnDetail=ce.sortByLabel=!1;let X=ue.add(new b.XK),ye=()=>O(this,void 0,void 0,function*(){let Ce=X.value=new b.SL;ve==null||ve.dispose(!0),ce.busy=!1,ve=new R.A(be);let Ee=ve.token,Ae=ce.value.substr(this.prefix.length).trim(),Fe=this._getPicks(Ae,Ce,Ee,de),_e=(Le,ke)=>{var le;let ee,me;if($(Le)?(ee=Le.items,me=Le.active):ee=Le,ee.length===0){if(ke)return!1;(Ae.length>0||ce.hideInput)&&(!((le=this.options)===null||le===void 0)&&le.noResultsPick)&&(ee=(0,x.mf)(this.options.noResultsPick)?[this.options.noResultsPick(Ae)]:[this.options.noResultsPick])}return ce.items=ee,me&&(ce.activeItems=[me]),!0},te=Le=>O(this,void 0,void 0,function*(){let ke=!1,le=!1;yield Promise.all([(()=>O(this,void 0,void 0,function*(){typeof Le.mergeDelay=="number"&&(yield(0,k.Vs)(Le.mergeDelay),Ee.isCancellationRequested)||le||(ke=_e(Le.picks,!0))}))(),(()=>O(this,void 0,void 0,function*(){ce.busy=!0;try{let ee=yield Le.additionalPicks;if(Ee.isCancellationRequested)return;let me,xe,We,Ve;if($(Le.picks)?(me=Le.picks.items,xe=Le.picks.active):me=Le.picks,$(ee)?(We=ee.items,Ve=ee.active):We=ee,We.length>0||!ke){let Ye;if(!xe&&!Ve){let tt=ce.activeItems[0];tt&&me.indexOf(tt)!==-1&&(Ye=tt)}_e({items:[...me,...We],active:xe||Ve||Ye})}}finally{Ee.isCancellationRequested||(ce.busy=!1),le=!0}}))()])});if(Fe!==null)if(N(Fe))yield te(Fe);else if(Fe instanceof Promise){ce.busy=!0;try{let Le=yield Fe;if(Ee.isCancellationRequested)return;N(Le)?yield te(Le):_e(Le)}finally{Ee.isCancellationRequested||(ce.busy=!1)}}else _e(Fe)});return ue.add(ce.onDidChangeValue(()=>ye())),ye(),ue.add(ce.onDidAccept(Ce=>{let[Ee]=ce.selectedItems;typeof(Ee==null?void 0:Ee.accept)=="function"&&(Ce.inBackground||ce.hide(),Ee.accept(ce.keyMods,Ce))})),ue.add(ce.onDidTriggerItemButton(({button:Ce,item:Ee})=>O(this,void 0,void 0,function*(){var Ae,Fe;if(typeof Ee.trigger=="function"){let _e=(Fe=(Ae=Ee.buttons)===null||Ae===void 0?void 0:Ae.indexOf(Ce))!==null&&Fe!==void 0?Fe:-1;if(_e>=0){let te=Ee.trigger(_e,ce.keyMods),Le=typeof te=="number"?te:yield te;if(be.isCancellationRequested)return;switch(Le){case r.NO_ACTION:break;case r.CLOSE_PICKER:ce.hide();break;case r.REFRESH_PICKER:ye();break;case r.REMOVE_ITEM:{let ke=ce.items.indexOf(Ee);if(ke!==-1){let le=ce.items.slice(),ee=le.splice(ke,1),me=ce.activeItems.filter(We=>We!==ee[0]),xe=ce.keepScrollPosition;ce.keepScrollPosition=!0,ce.items=le,me&&(ce.activeItems=me),ce.keepScrollPosition=xe}break}}}}}))),ue}}var C=t(6904),W=t(829),K=function(se,ce,be,de){var U,ue=arguments.length,ve=ue<3?ce:de===null?de=Object.getOwnPropertyDescriptor(ce,be):de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(se,ce,be,de);else for(var X=se.length-1;X>=0;X--)(U=se[X])&&(ve=(ue<3?U(ve):ue>3?U(ce,be,ve):U(ce,be))||ve);return ue>3&&ve&&Object.defineProperty(ce,be,ve),ve},j=function(se,ce){return function(be,de){ce(be,de,se)}},F=function(se,ce,be,de){return new(be||(be=Promise))(function(U,ue){function ve(Ce){try{ye(de.next(Ce))}catch(Ee){ue(Ee)}}function X(Ce){try{ye(de.throw(Ce))}catch(Ee){ue(Ee)}}function ye(Ce){var Ee;Ce.done?U(Ce.value):(Ee=Ce.value,Ee instanceof be?Ee:new be(function(Ae){Ae(Ee)})).then(ve,X)}ye((de=de.apply(se,ce||[])).next())})};let H=class va extends T{constructor(ce,be,de,U,ue,ve){super(va.PREFIX,ce),this.instantiationService=be,this.keybindingService=de,this.commandService=U,this.telemetryService=ue,this.dialogService=ve,this.commandsHistory=this._register(this.instantiationService.createInstance(z)),this.options=ce}_getPicks(ce,be,de,U){var ue,ve;return F(this,void 0,void 0,function*(){let X=yield this.getCommandPicks(de);if(de.isCancellationRequested)return[];let ye=[];for(let _e of X){let te=(0,x.f6)(va.WORD_FILTER(ce,_e.label)),Le=_e.commandAlias?(0,x.f6)(va.WORD_FILTER(ce,_e.commandAlias)):void 0;te||Le?(_e.highlights={label:te,detail:this.options.showAlias?Le:void 0},ye.push(_e)):ce===_e.commandId&&ye.push(_e)}let Ce=new Map;for(let _e of ye){let te=Ce.get(_e.label);te?(_e.description=_e.commandId,te.description=te.commandId):Ce.set(_e.label,_e)}ye.sort((_e,te)=>{let Le=this.commandsHistory.peek(_e.commandId),ke=this.commandsHistory.peek(te.commandId);if(Le&&ke)return Le>ke?-1:1;if(Le)return-1;if(ke)return 1;if(this.options.suggestedCommandIds){let le=this.options.suggestedCommandIds.has(_e.commandId),ee=this.options.suggestedCommandIds.has(te.commandId);if(le&&ee)return 0;if(le)return-1;if(ee)return 1}return _e.label.localeCompare(te.label)});let Ee=[],Ae=!1,Fe=!!this.options.suggestedCommandIds;for(let _e=0;_e<ye.length;_e++){let te=ye[_e];_e===0&&this.commandsHistory.peek(te.commandId)&&(Ee.push({type:"separator",label:(0,v.NC)("recentlyUsed","recently used")}),Ae=!0),Fe&&!this.commandsHistory.peek(te.commandId)&&(!((ue=this.options.suggestedCommandIds)===null||ue===void 0)&&ue.has(te.commandId))&&(Ee.push({type:"separator",label:(0,v.NC)("commonlyUsed","commonly used")}),Ae=!0,Fe=!1),!Ae||this.commandsHistory.peek(te.commandId)||!((ve=this.options.suggestedCommandIds)===null||ve===void 0)&&ve.has(te.commandId)||(Ee.push({type:"separator",label:(0,v.NC)("morecCommands","other commands")}),Ae=!1),Ee.push(this.toCommandPick(te,U))}return this.hasAdditionalCommandPicks(ce,de)?{picks:Ee,additionalPicks:(()=>F(this,void 0,void 0,function*(){let _e=yield this.getAdditionalCommandPicks(X,ye,ce,de);return de.isCancellationRequested?[]:_e.map(te=>this.toCommandPick(te,U))}))()}:Ee})}toCommandPick(ce,be){if(ce.type==="separator")return ce;let de=this.keybindingService.lookupKeybinding(ce.commandId),U=de?(0,v.NC)("commandPickAriaLabelWithKeybinding","{0}, {1}",ce.label,de.getAriaLabel()):ce.label;return Object.assign(Object.assign({},ce),{ariaLabel:U,detail:this.options.showAlias&&ce.commandAlias!==ce.label?ce.commandAlias:void 0,keybinding:de,accept:()=>F(this,void 0,void 0,function*(){var ue;this.commandsHistory.push(ce.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:ce.commandId,from:(ue=be==null?void 0:be.from)!==null&&ue!==void 0?ue:"quick open"});try{yield this.commandService.executeCommand(ce.commandId)}catch(ve){(0,i.n2)(ve)||this.dialogService.error((0,v.NC)("canNotRun","Command '{0}' resulted in an error",ce.label),h(ve))}})})}};H.PREFIX=">",H.WORD_FILTER=(0,c.or)(c.Ji,c.KZ,c.ir),H=K([j(1,D.TG),j(2,L.d),j(3,a.H),j(4,W.b),j(5,E.S)],H);let z=class qn extends b.JT{constructor(ce,be){super(),this.storageService=ce,this.configurationService=be,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(ce=>this.updateConfiguration(ce)))}updateConfiguration(ce){ce&&!ce.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=qn.getConfiguredCommandHistoryLength(this.configurationService),qn.cache&&qn.cache.limit!==this.configuredCommandsHistoryLength&&(qn.cache.limit=this.configuredCommandsHistoryLength,qn.saveState(this.storageService)))}load(){let ce=this.storageService.get(qn.PREF_KEY_CACHE,0),be;if(ce)try{be=JSON.parse(ce)}catch(U){}let de=qn.cache=new l.z6(this.configuredCommandsHistoryLength,1);if(be){let U;U=be.usesLRU?be.entries:be.entries.sort((ue,ve)=>ue.value-ve.value),U.forEach(ue=>de.set(ue.key,ue.value))}qn.counter=this.storageService.getNumber(qn.PREF_KEY_COUNTER,0,qn.counter)}push(ce){qn.cache&&(qn.cache.set(ce,qn.counter++),qn.saveState(this.storageService))}peek(ce){var be;return(be=qn.cache)===null||be===void 0?void 0:be.peek(ce)}static saveState(ce){if(!qn.cache)return;let be={usesLRU:!0,entries:[]};qn.cache.forEach((de,U)=>be.entries.push({key:U,value:de})),ce.store(qn.PREF_KEY_CACHE,JSON.stringify(be),0,0),ce.store(qn.PREF_KEY_COUNTER,qn.counter,0,0)}static getConfiguredCommandHistoryLength(ce){var be,de;let U=(de=(be=ce.getValue().workbench)===null||be===void 0?void 0:be.commandPalette)===null||de===void 0?void 0:de.history;return typeof U=="number"?U:qn.DEFAULT_COMMANDS_HISTORY_LENGTH}};z.DEFAULT_COMMANDS_HISTORY_LENGTH=50,z.PREF_KEY_CACHE="commandPalette.mru.cache",z.PREF_KEY_COUNTER="commandPalette.mru.counter",z.counter=1,z=K([j(0,C.Uy),j(1,w.Ui)],z);class J extends H{constructor(ce,be,de,U,ue,ve){super(ce,be,de,U,ue,ve)}getCodeEditorCommandPicks(){let ce=this.activeTextEditorControl;if(!ce)return[];let be=[];for(let de of ce.getSupportedActions())be.push({commandId:de.id,commandAlias:de.alias,label:(0,_.x$)(de.label)||de.id});return be}}var oe=t(6830),fe=t(9102),q=t(1157),p=function(se,ce){return function(be,de){ce(be,de,se)}},re=function(se,ce,be,de){return new(be||(be=Promise))(function(U,ue){function ve(Ce){try{ye(de.next(Ce))}catch(Ee){ue(Ee)}}function X(Ce){try{ye(de.throw(Ce))}catch(Ee){ue(Ee)}}function ye(Ce){var Ee;Ce.done?U(Ce.value):(Ee=Ce.value,Ee instanceof be?Ee:new be(function(Ae){Ae(Ee)})).then(ve,X)}ye((de=de.apply(se,ce||[])).next())})};let ne=class extends J{get activeTextEditorControl(){return(0,x.f6)(this.codeEditorService.getFocusedCodeEditor())}constructor(se,ce,be,de,U,ue){super({showAlias:!1},se,be,de,U,ue),this.codeEditorService=ce}getCommandPicks(){return re(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}hasAdditionalCommandPicks(){return!1}getAdditionalCommandPicks(){return re(this,void 0,void 0,function*(){return[]})}};ne=function(se,ce,be,de){var U,ue=arguments.length,ve=ue<3?ce:de===null?de=Object.getOwnPropertyDescriptor(ce,be):de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ve=Reflect.decorate(se,ce,be,de);else for(var X=se.length-1;X>=0;X--)(U=se[X])&&(ve=(ue<3?U(ve):ue>3?U(ce,be,ve):U(ce,be))||ve);return ue>3&&ve&&Object.defineProperty(ce,be,ve),ve}([p(0,D.TG),p(1,I.$),p(2,L.d),p(3,a.H),p(4,W.b),p(5,E.S)],ne);class ie extends oe.R6{constructor(){super({id:ie.ID,label:u.UX.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:fe.u.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(ce){ce.get(q.eJ).quickAccess.show(ne.PREFIX)}}ie.ID="editor.action.quickCommand",(0,oe.Qr)(ie),m.B.as(B.IP.Quickaccess).registerQuickAccessProvider({ctor:ne,prefix:ne.PREFIX,helpEntries:[{description:u.UX.quickCommandHelp,commandId:ie.ID}]})},3588:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{GotoLineAction:()=>a,StandaloneGotoLineQuickAccessProvider:()=>c});var m=t(5976),B=t(5520),u=t(3943),I=t(3580);class _ extends u.X{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(E){let D=(0,I.NC)("cannotRunGotoLine","Open a text editor first to go to a line.");return E.items=[{label:D}],E.ariaLabel=D,m.JT.None}provideWithTextEditor(E,D,L){let k=E.editor,R=new m.SL;R.add(D.onDidAccept(N=>{let[T]=D.selectedItems;if(T){if(!this.isValidLineNumber(k,T.lineNumber))return;this.gotoLocation(E,{range:this.toRange(T.lineNumber,T.column),keyMods:D.keyMods,preserveFocus:N.inBackground}),N.inBackground||D.hide()}}));let O=()=>{let N=this.parsePosition(k,D.value.trim().substr(_.PREFIX.length)),T=this.getPickLabel(k,N.lineNumber,N.column);if(D.items=[{lineNumber:N.lineNumber,column:N.column,label:T}],D.ariaLabel=T,!this.isValidLineNumber(k,N.lineNumber))return void this.clearDecorations(k);let C=this.toRange(N.lineNumber,N.column);k.revealRangeInCenter(C,0),this.addDecorations(k,C)};O(),R.add(D.onDidChangeValue(()=>O()));let $=(0,B.Pi)(k);return $&&$.getOptions().get(65).renderType===2&&($.updateOptions({lineNumbers:"on"}),R.add((0,m.OF)(()=>$.updateOptions({lineNumbers:"relative"})))),R}toRange(E=1,D=1){return{startLineNumber:E,startColumn:D,endLineNumber:E,endColumn:D}}parsePosition(E,D){let L=D.split(/,|:|#/).map(R=>parseInt(R,10)).filter(R=>!isNaN(R)),k=this.lineCount(E)+1;return{lineNumber:L[0]>0?L[0]:k+L[0],column:L[1]}}getPickLabel(E,D,L){if(this.isValidLineNumber(E,D))return this.isValidColumn(E,D,L)?(0,I.NC)("gotoLineColumnLabel","Go to line {0} and character {1}.",D,L):(0,I.NC)("gotoLineLabel","Go to line {0}.",D);let k=E.getPosition()||{lineNumber:1,column:1},R=this.lineCount(E);return R>1?(0,I.NC)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",k.lineNumber,k.column,R):(0,I.NC)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",k.lineNumber,k.column)}isValidLineNumber(E,D){return!(!D||typeof D!="number")&&D>0&&D<=this.lineCount(E)}isValidColumn(E,D,L){if(!L||typeof L!="number")return!1;let k=this.getModel(E);if(!k)return!1;let R={lineNumber:D,column:L};return k.validatePosition(R).equals(R)}lineCount(E){var D,L;return(L=(D=this.getModel(E))===null||D===void 0?void 0:D.getLineCount())!==null&&L!==void 0?L:0}}_.PREFIX=":";var A=t(9872),x=t(725),v=t(1640),f=t(8401),d=t(913),o=t(4669),h=t(6830),r=t(9102),i=t(1157);let c=class extends _{constructor(w){super(),this.editorService=w,this.onDidActiveTextEditorControlChange=o.ju.None}get activeTextEditorControl(){return(0,f.f6)(this.editorService.getFocusedCodeEditor())}};var b,l;c=function(w,E,D,L){var k,R=arguments.length,O=R<3?E:L===null?L=Object.getOwnPropertyDescriptor(E,D):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(w,E,D,L);else for(var $=w.length-1;$>=0;$--)(k=w[$])&&(O=(R<3?k(O):R>3?k(E,D,O):k(E,D))||O);return R>3&&O&&Object.defineProperty(E,D,O),O}([(b=0,l=v.$,function(w,E){l(w,E,b)})],c);class a extends h.R6{constructor(){super({id:a.ID,label:d.qq.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:r.u.focus,primary:2085,mac:{primary:293},weight:100}})}run(E){E.get(i.eJ).quickAccess.show(c.PREFIX)}}a.ID="editor.action.gotoLine",(0,h.Qr)(a),A.B.as(x.IP.Quickaccess).registerQuickAccessProvider({ctor:c,prefix:c.PREFIX,helpEntries:[{description:d.qq.gotoLineActionLabel,commandId:a.ID}]})},8766:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{GotoSymbolAction:()=>ne,StandaloneGotoSymbolQuickAccessProvider:()=>re}),t(1713);var m=t(5393),B=t(1050),u=t(3046),I=t(5670),_=t(5392),A=t(8721),x=t(1432),v=t(7295);let f=[void 0,[]];function d(ie,se,ce=0,be=0){let de=se;return de.values&&de.values.length>1?function(U,ue,ve,X){let ye=0,Ce=[];for(let Ee of ue){let[Ae,Fe]=o(U,Ee,ve,X);if(typeof Ae!="number")return f;ye+=Ae,Ce.push(...Fe)}return[ye,h(Ce)]}(ie,de.values,ce,be):o(ie,se,ce,be)}function o(ie,se,ce,be){let de=(0,_.EW)(se.original,se.originalLowercase,ce,ie,ie.toLowerCase(),be,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return de?[de[0],(0,_.mB)(de)]:f}function h(ie){let se=ie.sort((ue,ve)=>ue.start-ve.start),ce=[],be;for(let ue of se)!be||(U=ue,(de=be).end<U.start||U.end<de.start)?(be=ue,ce.push(ue)):(be.start=Math.min(be.start,ue.start),be.end=Math.max(be.end,ue.end));var de,U;return ce}function r(ie){return ie.startsWith('"')&&ie.endsWith('"')}Object.freeze({score:0});let i=" ";function c(ie){typeof ie!="string"&&(ie="");let se=ie.toLowerCase(),{pathNormalized:ce,normalized:be,normalizedLowercase:de}=b(ie),U=ce.indexOf(A.ir)>=0,ue=r(ie),ve,X=ie.split(i);if(X.length>1)for(let ye of X){let Ce=r(ye),{pathNormalized:Ee,normalized:Ae,normalizedLowercase:Fe}=b(ye);Ae&&(ve||(ve=[]),ve.push({original:ye,originalLowercase:ye.toLowerCase(),pathNormalized:Ee,normalized:Ae,normalizedLowercase:Fe,expectContiguousMatch:Ce}))}return{original:ie,originalLowercase:se,pathNormalized:ce,normalized:be,normalizedLowercase:de,values:ve,containsPathSeparator:U,expectContiguousMatch:ue}}function b(ie){let se;se=x.ED?ie.replace(/\//g,A.ir):ie.replace(/\\/g,A.ir);let ce=(0,v.R1)(se).replace(/\s|"/g,"");return{pathNormalized:se,normalized:ce,normalizedLowercase:ce.toLowerCase()}}function l(ie){return Array.isArray(ie)?c(ie.map(se=>se.original).join(i)):c(ie.original)}var a=t(5976),w=t(4314),E=t(6887),D=t(335),L=t(3943),k=t(3580),R=t(1922),O=t(9488),$=function(ie,se){return function(ce,be){se(ce,be,ie)}},N=function(ie,se,ce,be){return new(ce||(ce=Promise))(function(de,U){function ue(ye){try{X(be.next(ye))}catch(Ce){U(Ce)}}function ve(ye){try{X(be.throw(ye))}catch(Ce){U(Ce)}}function X(ye){var Ce;ye.done?de(ye.value):(Ce=ye.value,Ce instanceof ce?Ce:new ce(function(Ee){Ee(Ce)})).then(ue,ve)}X((be=be.apply(ie,se||[])).next())})};let T=class cl extends L.X{constructor(se,ce,be=Object.create(null)){super(be),this._languageFeaturesService=se,this._outlineModelService=ce,this.options=be,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(se){return this.provideLabelPick(se,(0,k.NC)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),a.JT.None}provideWithTextEditor(se,ce,be){let de=se.editor,U=this.getModel(de);return U?this._languageFeaturesService.documentSymbolProvider.has(U)?this.doProvideWithEditorSymbols(se,U,ce,be):this.doProvideWithoutEditorSymbols(se,U,ce,be):a.JT.None}doProvideWithoutEditorSymbols(se,ce,be,de){let U=new a.SL;return this.provideLabelPick(be,(0,k.NC)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),N(this,void 0,void 0,function*(){(yield this.waitForLanguageSymbolRegistry(ce,U))&&!de.isCancellationRequested&&U.add(this.doProvideWithEditorSymbols(se,ce,be,de))}),U}provideLabelPick(se,ce){se.items=[{label:ce,index:0,kind:14}],se.ariaLabel=ce}waitForLanguageSymbolRegistry(se,ce){return N(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(se))return!0;let be=new m.CR,de=ce.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(se)&&(de.dispose(),be.complete(!0))}));return ce.add((0,a.OF)(()=>be.complete(!1))),be.p})}doProvideWithEditorSymbols(se,ce,be,de){var U;let ue=se.editor,ve=new a.SL;ve.add(be.onDidAccept(Ee=>{let[Ae]=be.selectedItems;Ae&&Ae.range&&(this.gotoLocation(se,{range:Ae.range.selection,keyMods:be.keyMods,preserveFocus:Ee.inBackground}),Ee.inBackground||be.hide())})),ve.add(be.onDidTriggerItemButton(({item:Ee})=>{Ee&&Ee.range&&(this.gotoLocation(se,{range:Ee.range.selection,keyMods:be.keyMods,forceSideBySide:!0}),be.hide())}));let X=this.getDocumentSymbols(ce,de),ye,Ce=Ee=>N(this,void 0,void 0,function*(){ye==null||ye.dispose(!0),be.busy=!1,ye=new B.A(de),be.busy=!0;try{let Ae=c(be.value.substr(cl.PREFIX.length).trim()),Fe=yield this.doGetSymbolPicks(X,Ae,void 0,ye.token);if(de.isCancellationRequested)return;if(Fe.length>0){if(be.items=Fe,Ee&&Ae.original.length===0){let _e=(0,O.dF)(Fe,te=>!!(te.type!=="separator"&&te.range&&w.e.containsPosition(te.range.decoration,Ee)));_e&&(be.activeItems=[_e])}}else Ae.original.length>0?this.provideLabelPick(be,(0,k.NC)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(be,(0,k.NC)("noSymbolResults","No editor symbols"))}finally{de.isCancellationRequested||(be.busy=!1)}});return ve.add(be.onDidChangeValue(()=>Ce(void 0))),Ce((U=ue.getSelection())===null||U===void 0?void 0:U.getPosition()),ve.add(be.onDidChangeActive(()=>{let[Ee]=be.activeItems;Ee&&Ee.range&&(ue.revealRangeInCenter(Ee.range.selection,0),this.addDecorations(ue,Ee.range.decoration))})),ve}doGetSymbolPicks(se,ce,be,de){var U,ue;return N(this,void 0,void 0,function*(){let ve=yield se;if(de.isCancellationRequested)return[];let X=ce.original.indexOf(cl.SCOPE_PREFIX)===0,ye=X?1:0,Ce,Ee,Ae;ce.values&&ce.values.length>1?(Ce=l(ce.values[0]),Ee=l(ce.values.slice(1))):Ce=ce;let Fe=(ue=(U=this.options)===null||U===void 0?void 0:U.openSideBySideDirection)===null||ue===void 0?void 0:ue.call(U);Fe&&(Ae=[{iconClass:Fe==="right"?I.k.asClassName(u.l.splitHorizontal):I.k.asClassName(u.l.splitVertical),tooltip:Fe==="right"?(0,k.NC)("openToSide","Open to the Side"):(0,k.NC)("openToBottom","Open to the Bottom")}]);let _e=[];for(let ke=0;ke<ve.length;ke++){let le=ve[ke],ee=(0,v.fy)(le.name),me=`$(${E.uZ.toIcon(le.kind).id}) ${ee}`,xe=me.length-ee.length,We,Ve,Ye,tt,Qe=le.containerName;if(be!=null&&be.extraContainerLabel&&(Qe=Qe?`${be.extraContainerLabel} \u2022 ${Qe}`:be.extraContainerLabel),ce.original.length>ye){let ht=!1;if(Ce!==ce&&([We,Ve]=d(me,Object.assign(Object.assign({},ce),{values:void 0}),ye,xe),typeof We=="number"&&(ht=!0)),typeof We!="number"&&([We,Ve]=d(me,Ce,ye,xe),typeof We!="number"))continue;if(!ht&&Ee){if(Qe&&Ee.original.length>0&&([Ye,tt]=d(Qe,Ee)),typeof Ye!="number")continue;typeof We=="number"&&(We+=Ye)}}let bt=le.tags&&le.tags.indexOf(1)>=0;_e.push({index:ke,kind:le.kind,score:We,label:me,ariaLabel:ee,description:Qe,highlights:bt?void 0:{label:Ve,description:tt},range:{selection:w.e.collapseToStart(le.selectionRange),decoration:le.range},strikethrough:bt,buttons:Ae})}let te=_e.sort((ke,le)=>X?this.compareByKindAndScore(ke,le):this.compareByScore(ke,le)),Le=[];if(X){let me=function(){le&&typeof ke=="number"&&ee>0&&(le.label=(0,v.WU)(W[ke]||C,ee))},ke,le,ee=0;for(let xe of te)ke!==xe.kind?(me(),ke=xe.kind,ee=1,le={type:"separator"},Le.push(le)):ee++,Le.push(xe);me()}else te.length>0&&(Le=[{label:(0,k.NC)("symbols","symbols ({0})",_e.length),type:"separator"},...te]);return Le})}compareByScore(se,ce){if(typeof se.score!="number"&&typeof ce.score=="number")return 1;if(typeof se.score=="number"&&typeof ce.score!="number")return-1;if(typeof se.score=="number"&&typeof ce.score=="number"){if(se.score>ce.score)return-1;if(se.score<ce.score)return 1}return se.index<ce.index?-1:se.index>ce.index?1:0}compareByKindAndScore(se,ce){let be=W[se.kind]||C,de=W[ce.kind]||C,U=be.localeCompare(de);return U===0?this.compareByScore(se,ce):U}getDocumentSymbols(se,ce){return N(this,void 0,void 0,function*(){let be=yield this._outlineModelService.getOrCreate(se,ce);return ce.isCancellationRequested?[]:be.asListOfDocumentSymbols()})}};T.PREFIX="@",T.SCOPE_PREFIX=":",T.PREFIX_BY_CATEGORY=`${T.PREFIX}${T.SCOPE_PREFIX}`,T=function(ie,se,ce,be){var de,U=arguments.length,ue=U<3?se:be===null?be=Object.getOwnPropertyDescriptor(se,ce):be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ue=Reflect.decorate(ie,se,ce,be);else for(var ve=ie.length-1;ve>=0;ve--)(de=ie[ve])&&(ue=(U<3?de(ue):U>3?de(se,ce,ue):de(se,ce))||ue);return U>3&&ue&&Object.defineProperty(se,ce,ue),ue}([$(0,R.p),$(1,D.Je)],T);let C=(0,k.NC)("property","properties ({0})"),W={5:(0,k.NC)("method","methods ({0})"),11:(0,k.NC)("function","functions ({0})"),8:(0,k.NC)("_constructor","constructors ({0})"),12:(0,k.NC)("variable","variables ({0})"),4:(0,k.NC)("class","classes ({0})"),22:(0,k.NC)("struct","structs ({0})"),23:(0,k.NC)("event","events ({0})"),24:(0,k.NC)("operator","operators ({0})"),10:(0,k.NC)("interface","interfaces ({0})"),2:(0,k.NC)("namespace","namespaces ({0})"),3:(0,k.NC)("package","packages ({0})"),25:(0,k.NC)("typeParameter","type parameters ({0})"),1:(0,k.NC)("modules","modules ({0})"),6:(0,k.NC)("property","properties ({0})"),9:(0,k.NC)("enum","enumerations ({0})"),21:(0,k.NC)("enumMember","enumeration members ({0})"),14:(0,k.NC)("string","strings ({0})"),0:(0,k.NC)("file","files ({0})"),17:(0,k.NC)("array","arrays ({0})"),15:(0,k.NC)("number","numbers ({0})"),16:(0,k.NC)("boolean","booleans ({0})"),18:(0,k.NC)("object","objects ({0})"),19:(0,k.NC)("key","keys ({0})"),7:(0,k.NC)("field","fields ({0})"),13:(0,k.NC)("constant","constants ({0})")};var K=t(9872),j=t(725),F=t(1640),H=t(8401),z=t(913),J=t(4669),oe=t(6830),fe=t(9102),q=t(1157),p=function(ie,se){return function(ce,be){se(ce,be,ie)}};let re=class extends T{constructor(ie,se,ce){super(se,ce),this.editorService=ie,this.onDidActiveTextEditorControlChange=J.ju.None}get activeTextEditorControl(){return(0,H.f6)(this.editorService.getFocusedCodeEditor())}};re=function(ie,se,ce,be){var de,U=arguments.length,ue=U<3?se:be===null?be=Object.getOwnPropertyDescriptor(se,ce):be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ue=Reflect.decorate(ie,se,ce,be);else for(var ve=ie.length-1;ve>=0;ve--)(de=ie[ve])&&(ue=(U<3?de(ue):U>3?de(se,ce,ue):de(se,ce))||ue);return U>3&&ue&&Object.defineProperty(se,ce,ue),ue}([p(0,F.$),p(1,R.p),p(2,D.Je)],re);class ne extends oe.R6{constructor(){super({id:ne.ID,label:z.aq.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:fe.u.hasDocumentSymbolProvider,kbOpts:{kbExpr:fe.u.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(se){se.get(q.eJ).quickAccess.show(T.PREFIX,{itemActivation:q.jG.NONE})}}ne.ID="editor.action.quickOutline",(0,oe.Qr)(ne),K.B.as(j.IP.Quickaccess).registerQuickAccessProvider({ctor:re,prefix:T.PREFIX,helpEntries:[{description:z.aq.quickOutlineActionLabel,prefix:T.PREFIX,commandId:ne.ID},{description:z.aq.quickOutlineByCategoryActionLabel,prefix:T.PREFIX_BY_CATEGORY}]})},8944:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(9872),B=t(725),u=t(913),I=t(3580),_=t(5976),A=t(1847),x=t(1157),v=function(d,o){return function(h,r){o(h,r,d)}};let f=class ba{constructor(o,h){this.quickInputService=o,this.keybindingService=h,this.registry=m.B.as(B.IP.Quickaccess)}provide(o){let h=new _.SL;return h.add(o.onDidAccept(()=>{let[r]=o.selectedItems;r&&this.quickInputService.quickAccess.show(r.prefix,{preserveValue:!0})})),h.add(o.onDidChangeValue(r=>{let i=this.registry.getQuickAccessProvider(r.substr(ba.PREFIX.length));i&&i.prefix&&i.prefix!==ba.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),o.items=this.getQuickAccessProviders().filter(r=>r.prefix!==ba.PREFIX),h}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((o,h)=>o.prefix.localeCompare(h.prefix)).flatMap(o=>this.createPicks(o))}createPicks(o){return o.helpEntries.map(h=>{let r=h.prefix||o.prefix,i=r||"\u2026";return{prefix:r,label:i,keybinding:h.commandId?this.keybindingService.lookupKeybinding(h.commandId):void 0,ariaLabel:(0,I.NC)("helpPickAriaLabel","{0}, {1}",i,h.description),description:h.description}})}};f.PREFIX="?",f=function(d,o,h,r){var i,c=arguments.length,b=c<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,h):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,o,h,r);else for(var l=d.length-1;l>=0;l--)(i=d[l])&&(b=(c<3?i(b):c>3?i(o,h,b):i(o,h))||b);return c>3&&b&&Object.defineProperty(o,h,b),b}([v(0,x.eJ),v(1,A.d)],f),m.B.as(B.IP.Quickaccess).registerQuickAccessProvider({ctor:f,prefix:"",helpEntries:[{description:u.ld.helpQuickAccessActionLabel}]})},5048:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{StandaloneReferencesController:()=>d});var m=t(6830),B=t(1640),u=t(7376),I=t(3108),_=t(3983),A=t(2065),x=t(9422),v=t(6904),f=function(o,h){return function(r,i){h(r,i,o)}};let d=class extends u.J{constructor(o,h,r,i,c,b,l){super(!0,o,h,r,i,c,b,l)}};d=function(o,h,r,i){var c,b=arguments.length,l=b<3?h:i===null?i=Object.getOwnPropertyDescriptor(h,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(o,h,r,i);else for(var a=o.length-1;a>=0;a--)(c=o[a])&&(l=(b<3?c(l):b>3?c(h,r,l):c(h,r))||l);return b>3&&l&&Object.defineProperty(h,r,l),l}([f(1,_.i6),f(2,B.$),f(3,x.lT),f(4,A.TG),f(5,v.Uy),f(6,I.Ui)],d),(0,m._K)(u.J.ID,d,4)},8763:(ut,Ie,t)=>{"use strict";t.d(Ie,{kR:()=>C,MU:()=>W,nI:()=>oe,rW:()=>T,TG:()=>N});var m=t(5321),B=t(6268),u=t(1264),I=t(4669),_=t(6887),A=t(5797);class x{constructor(q,p,re,ne,ie){this._parsedThemeRuleBrand=void 0,this.token=q,this.index=p,this.fontStyle=re,this.foreground=ne,this.background=ie}}let v=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class f{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(q){if(q===null)return 0;let p=q.match(v);if(!p)throw new Error("Illegal value for token color: "+q);q=p[1].toUpperCase();let re=this._color2id.get(q);return re||(re=++this._lastColorId,this._color2id.set(q,re),this._id2color[re]=u.Il.fromHex("#"+q),re)}getColorMap(){return this._id2color.slice(0)}}class d{static createFromRawTokenTheme(q,p){return this.createFromParsedTokenTheme(function(re){if(!re||!Array.isArray(re))return[];let ne=[],ie=0;for(let se=0,ce=re.length;se<ce;se++){let be=re[se],de=-1;if(typeof be.fontStyle=="string"){de=0;let ve=be.fontStyle.split(" ");for(let X=0,ye=ve.length;X<ye;X++)switch(ve[X]){case"italic":de|=1;break;case"bold":de|=2;break;case"underline":de|=4;break;case"strikethrough":de|=8}}let U=null;typeof be.foreground=="string"&&(U=be.foreground);let ue=null;typeof be.background=="string"&&(ue=be.background),ne[ie++]=new x(be.token||"",se,de,U,ue)}return ne}(q),p)}static createFromParsedTokenTheme(q,p){return function(re,ne){re.sort((X,ye)=>{let Ce=function(Ee,Ae){return Ee<Ae?-1:Ee>Ae?1:0}(X.token,ye.token);return Ce!==0?Ce:X.index-ye.index});let ie=0,se="000000",ce="ffffff";for(;re.length>=1&&re[0].token==="";){let X=re.shift();X.fontStyle!==-1&&(ie=X.fontStyle),X.foreground!==null&&(se=X.foreground),X.background!==null&&(ce=X.background)}let be=new f;for(let X of ne)be.getId(X);let de=be.getId(se),U=be.getId(ce),ue=new h(ie,de,U),ve=new r(ue);for(let X=0,ye=re.length;X<ye;X++){let Ce=re[X];ve.insert(Ce.token,Ce.fontStyle,be.getId(Ce.foreground),be.getId(Ce.background))}return new d(be,ve)}(q,p)}constructor(q,p){this._colorMap=q,this._root=p,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(q){return this._root.match(q)}match(q,p){let re=this._cache.get(p);if(re===void 0){let ne=this._match(p),ie=function(se){let ce=se.match(o);if(!ce)return 0;switch(ce[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(p);re=(ne.metadata|ie<<8)>>>0,this._cache.set(p,re)}return(re|q<<0)>>>0}}let o=/\b(comment|string|regex|regexp)\b/;class h{constructor(q,p,re){this._themeTrieElementRuleBrand=void 0,this._fontStyle=q,this._foreground=p,this._background=re,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new h(this._fontStyle,this._foreground,this._background)}acceptOverwrite(q,p,re){q!==-1&&(this._fontStyle=q),p!==0&&(this._foreground=p),re!==0&&(this._background=re),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class r{constructor(q){this._themeTrieElementBrand=void 0,this._mainRule=q,this._children=new Map}match(q){if(q==="")return this._mainRule;let p=q.indexOf("."),re,ne;p===-1?(re=q,ne=""):(re=q.substring(0,p),ne=q.substring(p+1));let ie=this._children.get(re);return ie!==void 0?ie.match(ne):this._mainRule}insert(q,p,re,ne){if(q==="")return void this._mainRule.acceptOverwrite(p,re,ne);let ie=q.indexOf("."),se,ce;ie===-1?(se=q,ce=""):(se=q.substring(0,ie),ce=q.substring(ie+1));let be=this._children.get(se);be===void 0&&(be=new r(this._mainRule.clone()),this._children.set(se,be)),be.insert(ce,p,re,ne)}}var i=t(8625),c=t(3910);let b={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[c.cvW]:"#FFFFFE",[c.NOs]:"#000000",[c.ES4]:"#E5EBF1",[i.tR]:"#D3D3D3",[i.Ym]:"#939393",[c.Rzx]:"#ADD6FF4D"}},l={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[c.cvW]:"#1E1E1E",[c.NOs]:"#D4D4D4",[c.ES4]:"#3A3D41",[i.tR]:"#404040",[i.Ym]:"#707070",[c.Rzx]:"#ADD6FF26"}},a={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[c.cvW]:"#000000",[c.NOs]:"#FFFFFF",[i.tR]:"#FFFFFF",[i.Ym]:"#FFFFFF"}},w={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[c.cvW]:"#FFFFFF",[c.NOs]:"#292929",[i.tR]:"#292929",[i.Ym]:"#292929"}};var E=t(9872),D=t(7781),L=t(5976),k=t(2321),R=t(5670),O=t(9554);class ${getIcon(q){let p=(0,O.Ks)(),re=q.defaults;for(;R.k.isThemeIcon(re);){let ne=p.getIcon(re.id);if(!ne)return;re=ne.defaults}return re}}let N="vs",T="vs-dark",C="hc-black",W="hc-light",K=E.B.as(c.IPX.ColorContribution),j=E.B.as(D.IP.ThemingContribution);class F{constructor(q,p){this.semanticHighlighting=!1,this.themeData=p;let re=p.base;q.length>0?(H(q)?this.id=q:this.id=re+" "+q,this.themeName=q):(this.id=re,this.themeName=re),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){let q=new Map;for(let p in this.themeData.colors)q.set(p,u.Il.fromHex(this.themeData.colors[p]));if(this.themeData.inherit){let p=z(this.themeData.base);for(let re in p.colors)q.has(re)||q.set(re,u.Il.fromHex(p.colors[re]))}this.colors=q}return this.colors}getColor(q,p){return this.getColors().get(q)||(p!==!1?this.getDefault(q):void 0)}getDefault(q){let p=this.defaultColors[q];return p||(p=K.resolveDefaultColor(q,this),this.defaultColors[q]=p,p)}defines(q){return this.getColors().has(q)}get type(){switch(this.base){case N:return k.eL.LIGHT;case C:return k.eL.HIGH_CONTRAST_DARK;case W:return k.eL.HIGH_CONTRAST_LIGHT;default:return k.eL.DARK}}get tokenTheme(){if(!this._tokenTheme){let q=[],p=[];if(this.themeData.inherit){let ie=z(this.themeData.base);q=ie.rules,ie.encodedTokensColors&&(p=ie.encodedTokensColors)}let re=this.themeData.colors["editor.foreground"],ne=this.themeData.colors["editor.background"];if(re||ne){let ie={token:""};re&&(ie.foreground=re),ne&&(ie.background=ne),q.push(ie)}q=q.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(p=this.themeData.encodedTokensColors),this._tokenTheme=d.createFromRawTokenTheme(q,p)}return this._tokenTheme}getTokenStyleMetadata(q,p,re){let ne=this.tokenTheme._match([q].concat(p).join(".")).metadata,ie=A.N.getForeground(ne),se=A.N.getFontStyle(ne);return{foreground:ie,italic:!!(1&se),bold:!!(2&se),underline:!!(4&se),strikethrough:!!(8&se)}}}function H(fe){return fe===N||fe===T||fe===C||fe===W}function z(fe){switch(fe){case N:return b;case T:return l;case C:return a;case W:return w}}function J(fe){let q=z(fe);return new F(fe,q)}class oe extends L.JT{constructor(){super(),this._onColorThemeChange=this._register(new I.Q5),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new I.Q5),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new $,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(N,J(N)),this._knownThemes.set(T,J(T)),this._knownThemes.set(C,J(C)),this._knownThemes.set(W,J(W));let q=function(p){let re=new I.Q5,ne=(0,O.Ks)();return ne.onDidChange(()=>re.fire()),p==null||p.onDidProductIconThemeChange(()=>re.fire()),{onDidChange:re.event,getCSS(){let ie=p?p.getProductIconTheme():new $,se={},ce=de=>{let U=ie.getIcon(de);if(!U)return;let ue=U.font;return ue?(se[ue.id]=ue.definition,`.codicon-${de.id}:before { content: '${U.fontCharacter}'; font-family: ${(0,m._h)(ue.id)}; }`):`.codicon-${de.id}:before { content: '${U.fontCharacter}'; }`},be=[];for(let de of ne.getIcons()){let U=ce(de);U&&be.push(U)}for(let de in se){let U=se[de],ue=U.weight?`font-weight: ${U.weight};`:"",ve=U.style?`font-style: ${U.style};`:"",X=U.src.map(ye=>`${(0,m.wY)(ye.location)} format('${ye.format}')`).join(", ");be.push(`@font-face { src: ${X}; font-family: ${(0,m._h)(de)};${ue}${ve} font-display: block; }`)}return be.join(`
`)}}}(this);this._codiconCSS=q.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(N),this._onOSSchemeChanged(),q.onDidChange(()=>{this._codiconCSS=q.getCSS(),this._updateCSS()}),(0,B.addMatchMediaChangeListener)("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(q){return m.OO(q)?this._registerShadowDomContainer(q):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=m.dS(void 0,q=>{q.className="monaco-colors",q.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),L.JT.None}_registerShadowDomContainer(q){let p=m.dS(q,re=>{re.className="monaco-colors",re.textContent=this._allCSS});return this._styleElements.push(p),{dispose:()=>{for(let re=0;re<this._styleElements.length;re++)if(this._styleElements[re]===p)return void this._styleElements.splice(re,1)}}}defineTheme(q,p){if(!/^[a-z0-9\-]+$/i.test(q))throw new Error("Illegal theme name!");if(!H(p.base)&&!H(q))throw new Error("Illegal theme base!");this._knownThemes.set(q,new F(q,p)),H(q)&&this._knownThemes.forEach(re=>{re.base===q&&re.notifyBaseUpdated()}),this._theme.themeName===q&&this.setTheme(q)}getColorTheme(){return this._theme}setColorMapOverride(q){this._colorMapOverride=q,this._updateThemeOrColorMap()}setTheme(q){let p;p=this._knownThemes.has(q)?this._knownThemes.get(q):this._knownThemes.get(N),this._updateActualTheme(p)}_updateActualTheme(q){q&&this._theme!==q&&(this._theme=q,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){let q=window.matchMedia("(forced-colors: active)").matches;if(q!==(0,k.c3)(this._theme.type)){let p;p=(0,k._T)(this._theme.type)?q?C:T:q?W:N,this._updateActualTheme(this._knownThemes.get(p))}}}setAutoDetectHighContrast(q){this._autoDetectHighContrast=q,this._onOSSchemeChanged()}_updateThemeOrColorMap(){let q=[],p={},re={addRule:se=>{p[se]||(q.push(se),p[se]=!0)}};j.getThemingParticipants().forEach(se=>se(this._theme,re,this._environment));let ne=[];for(let se of K.getColors()){let ce=this._theme.getColor(se.id,!0);ce&&ne.push(`${(0,c.QO2)(se.id)}: ${ce.toString()};`)}re.addRule(`.monaco-editor { ${ne.join(`
`)} }`);let ie=this._colorMapOverride||this._theme.tokenTheme.getColorMap();re.addRule(function(se){let ce=[];for(let be=1,de=se.length;be<de;be++){let U=se[be];ce[be]=`.mtk${be} { color: ${U}; }`}return ce.push(".mtki { font-style: italic; }"),ce.push(".mtkb { font-weight: bold; }"),ce.push(".mtku { text-decoration: underline; text-underline-position: under; }"),ce.push(".mtks { text-decoration: line-through; }"),ce.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),ce.join(`
`)}(ie)),this._themeCSS=q.join(`
`),this._updateCSS(),_.RW.setColorMap(ie),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(q=>q.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}},5662:(ut,Ie,t)=>{"use strict";t.r(Ie);var m=t(6830),B=t(4156),u=t(913),I=t(2321),_=t(8763);class A extends m.R6{constructor(){super({id:"editor.action.toggleHighContrast",label:u.xi.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(v,f){let d=v.get(B.Z),o=d.getColorTheme();(0,I.c3)(o.type)?(d.setTheme(this._originalThemeName||((0,I._T)(o.type)?_.rW:_.TG)),this._originalThemeName=null):(d.setTheme((0,I._T)(o.type)?_.kR:_.MU),this._originalThemeName=o.themeName)}}(0,m.Qr)(A)},4156:(ut,Ie,t)=>{"use strict";t.d(Ie,{Z:()=>m});let m=(0,t(2065).yh)("themeService")},8423:(ut,Ie,t)=>{"use strict";t.r(Ie),t.d(Ie,{handlebarDefaults:()=>l,handlebarLanguageService:()=>b,htmlDefaults:()=>c,htmlLanguageService:()=>i,razorDefaults:()=>w,razorLanguageService:()=>a,registerHTMLLanguageService:()=>E});var m=t(1593),B=Object.defineProperty,u=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,_=Object.prototype.hasOwnProperty,A=(D,L,k,R)=>{if(L&&typeof L=="object"||typeof L=="function")for(let O of I(L))_.call(D,O)||O===k||B(D,O,{get:()=>L[O],enumerable:!(R=u(L,O))||R.enumerable});return D},x={};A(x,m,"default");var v=class{constructor(D,L,k){Ho(this,"_onDidChange",new x.Emitter);Ho(this,"_options");Ho(this,"_modeConfiguration");Ho(this,"_languageId");this._languageId=D,this.setOptions(L),this.setModeConfiguration(k)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(D){this._options=D||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(D){this._modeConfiguration=D||Object.create(null),this._onDidChange.fire(this)}},f={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function d(D){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:D===o,documentFormattingEdits:D===o,documentRangeFormattingEdits:D===o}}var o="html",h="handlebars",r="razor",i=E(o,f,d(o)),c=i.defaults,b=E(h,f,d(h)),l=b.defaults,a=E(r,f,d(r)),w=a.defaults;function E(D,L=f,k=d(D)){let R=new v(D,L,k),O,$=x.languages.onLanguage(D,()=>ca(this,null,function*(){O=(yield t.e(377).then(t.bind(t,5377))).setupMode(R)}));return{defaults:R,dispose(){$.dispose(),O==null||O.dispose(),O=void 0}}}x.languages.html={htmlDefaults:c,razorDefaults:w,handlebarDefaults:l,htmlLanguageService:i,handlebarLanguageService:b,razorLanguageService:a,registerHTMLLanguageService:E}},3580:(ut,Ie,t)=>{"use strict";t.d(Ie,{NC:()=>B,aj:()=>u});let m=typeof document!="undefined"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function B(I,_,...A){return function(x,v){let f;return f=v.length===0?x:x.replace(/\{(\d+)\}/g,(d,o)=>{let h=o[0],r=v[h],i=d;return typeof r=="string"?i=r:typeof r!="number"&&typeof r!="boolean"&&r!=null||(i=String(r)),i}),m&&(f="\uFF3B"+f.replace(/[aouei]/g,"$&$&")+"\uFF3D"),f}(_,A)}function u(I){}},1106:(ut,Ie,t)=>{"use strict";t.d(Ie,{F:()=>B,U:()=>u});var m=t(3983);let B=(0,t(2065).yh)("accessibilityService"),u=new m.uy("accessibilityModeEnabled",!1)},2444:(ut,Ie,t)=>{"use strict";t.d(Ie,{Mm:()=>C,Id:()=>F,vr:()=>N,LJ:()=>$});var m=t(5321),B=t(9069),u=t(8609),I=t(1364),_=t(4741),A=t(8030),x=t(5976),v=t(1432),f=t(3580),d=t(4144),o=t(3983),h=t(5606),r=t(2065),i=t(1847),c=t(9422),b=t(6904),l=t(7781),a=t(5670),w=t(2321),E=t(8401),D=t(3910),L=t(6253),k=function(H,z,J,oe){var fe,q=arguments.length,p=q<3?z:oe===null?oe=Object.getOwnPropertyDescriptor(z,J):oe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(H,z,J,oe);else for(var re=H.length-1;re>=0;re--)(fe=H[re])&&(p=(q<3?fe(p):q>3?fe(z,J,p):fe(z,J))||p);return q>3&&p&&Object.defineProperty(z,J,p),p},R=function(H,z){return function(J,oe){z(J,oe,H)}},O=function(H,z,J,oe){return new(J||(J=Promise))(function(fe,q){function p(ie){try{ne(oe.next(ie))}catch(se){q(se)}}function re(ie){try{ne(oe.throw(ie))}catch(se){q(se)}}function ne(ie){var se;ie.done?fe(ie.value):(se=ie.value,se instanceof J?se:new J(function(ce){ce(se)})).then(p,re)}ne((oe=oe.apply(H,z||[])).next())})};function $(H,z,J,oe){let fe=H.getActions(z),q=m._q.getInstance();T(fe,J,q.keyStatus.altKey||(v.ED||v.IJ)&&q.keyStatus.shiftKey,oe?p=>p===oe:p=>p==="navigation")}function N(H,z,J,oe,fe,q){T(H.getActions(z),J,!1,typeof oe=="string"?p=>p===oe:oe,fe,q)}function T(H,z,J,oe=p=>p==="navigation",fe=()=>!1,q=!1){let p,re;Array.isArray(z)?(p=z,re=z):(p=z.primary,re=z.secondary);let ne=new Set;for(let[ie,se]of H){let ce;oe(ie)?(ce=p,ce.length>0&&q&&ce.push(new _.Z0)):(ce=re,ce.length>0&&ce.push(new _.Z0));for(let be of se){J&&(be=be instanceof d.U8&&be.alt?be.alt:be);let de=ce.push(be);be instanceof _.wY&&ne.add({group:ie,action:be,index:de-1})}}for(let{group:ie,action:se,index:ce}of ne){let be=oe(ie)?p:re,de=se.actions;de.length<=1&&fe(se,ie,be.length)&&be.splice(ce,1,...de)}}let C=class extends u.gU{constructor(H,z,J,oe,fe,q,p){super(void 0,H,{icon:!(!H.class&&!H.item.icon),label:!H.class&&!H.item.icon,draggable:z==null?void 0:z.draggable,keybinding:z==null?void 0:z.keybinding,hoverDelegate:z==null?void 0:z.hoverDelegate}),this._keybindingService=J,this._notificationService=oe,this._contextKeyService=fe,this._themeService=q,this._contextMenuService=p,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new x.XK),this._altKey=m._q.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(H){return O(this,void 0,void 0,function*(){H.preventDefault(),H.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(z){this._notificationService.error(z)}})}render(H){super.render(H),H.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let z=!1,J=this._altKey.keyStatus.altKey||(v.ED||v.IJ)&&this._altKey.keyStatus.shiftKey,oe=()=>{var fe;let q=z&&J&&!!(!((fe=this._commandAction.alt)===null||fe===void 0)&&fe.enabled);q!==this._wantsAltCommand&&(this._wantsAltCommand=q,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(fe=>{J=fe.altKey||(v.ED||v.IJ)&&fe.shiftKey,oe()})),this._register((0,m.nm)(H,"mouseleave",fe=>{z=!1,oe()})),this._register((0,m.nm)(H,"mouseenter",fe=>{z=!0,oe()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var H;let z=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),J=z&&z.getLabel(),oe=this._commandAction.tooltip||this._commandAction.label,fe=J?(0,f.NC)("titleAndKb","{0} ({1})",oe,J):oe;if(!this._wantsAltCommand&&(!((H=this._menuItemAction.alt)===null||H===void 0)&&H.enabled)){let q=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,p=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),re=p&&p.getLabel(),ne=re?(0,f.NC)("titleAndKb","{0} ({1})",q,re):q;fe=(0,f.NC)("titleAndKbAndAlt",`{0}
[{1}] {2}`,fe,A.xo.modifierLabels[v.OS].altKey,ne)}return fe}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(H){this._itemClassDispose.value=void 0;let{element:z,label:J}=this;if(!z||!J)return;let oe=this._commandAction.checked&&(fe=H.toggled)&&fe.condition!==void 0&&H.toggled.icon?H.toggled.icon:H.icon;var fe;if(oe)if(a.k.isThemeIcon(oe)){let q=a.k.asClassNameArray(oe);J.classList.add(...q),this._itemClassDispose.value=(0,x.OF)(()=>{J.classList.remove(...q)})}else J.style.backgroundImage=(0,w._T)(this._themeService.getColorTheme().type)?(0,m.wY)(oe.dark):(0,m.wY)(oe.light),J.classList.add("icon"),this._itemClassDispose.value=(0,x.F8)((0,x.OF)(()=>{J.style.backgroundImage="",J.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};C=k([R(2,i.d),R(3,c.lT),R(4,o.i6),R(5,l.XE),R(6,h.i)],C);let W=class extends I.C{constructor(H,z,J,oe,fe){var q,p,re;let ne=Object.assign(Object.assign({},z),{menuAsChild:(q=z==null?void 0:z.menuAsChild)!==null&&q!==void 0&&q,classNames:(p=z==null?void 0:z.classNames)!==null&&p!==void 0?p:a.k.isThemeIcon(H.item.icon)?a.k.asClassName(H.item.icon):void 0,keybindingProvider:(re=z==null?void 0:z.keybindingProvider)!==null&&re!==void 0?re:ie=>J.lookupKeybinding(ie.id)});super(H,{getActions:()=>H.actions},oe,ne),this._keybindingService=J,this._contextMenuService=oe,this._themeService=fe}render(H){super.render(H),(0,E.p_)(this.element),H.classList.add("menu-entry");let z=this._action,{icon:J}=z.item;if(J&&!a.k.isThemeIcon(J)){this.element.classList.add("icon");let oe=()=>{this.element&&(this.element.style.backgroundImage=(0,w._T)(this._themeService.getColorTheme().type)?(0,m.wY)(J.dark):(0,m.wY)(J.light))};oe(),this._register(this._themeService.onDidColorThemeChange(()=>{oe()}))}}};W=k([R(2,i.d),R(3,h.i),R(4,l.XE)],W);let K=class extends u.YH{constructor(H,z,J,oe,fe,q,p,re){var ne,ie,se;let ce;super(null,H),this._keybindingService=J,this._notificationService=oe,this._contextMenuService=fe,this._menuService=q,this._instaService=p,this._storageService=re,this._container=null,this._options=z,this._storageKey=`${H.item.submenu.id}_lastActionId`;let be=re.get(this._storageKey,1);be&&(ce=H.actions.find(U=>be===U.id)),ce||(ce=H.actions[0]),this._defaultAction=this._instaService.createInstance(C,ce,{keybinding:this._getDefaultActionKeybindingLabel(ce)});let de=Object.assign({},z!=null?z:Object.create(null),{menuAsChild:(ne=z==null?void 0:z.menuAsChild)===null||ne===void 0||ne,classNames:(ie=z==null?void 0:z.classNames)!==null&&ie!==void 0?ie:["codicon","codicon-chevron-down"],actionRunner:(se=z==null?void 0:z.actionRunner)!==null&&se!==void 0?se:new _.Wi});this._dropdown=new I.C(H,H.actions,this._contextMenuService,de),this._dropdown.actionRunner.onDidRun(U=>{U.action instanceof d.U8&&this.update(U.action)})}update(H){this._storageService.store(this._storageKey,H.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(C,H,{keybinding:this._getDefaultActionKeybindingLabel(H)}),this._defaultAction.actionRunner=new class extends _.Wi{runAction(z,J){return O(this,void 0,void 0,function*(){yield z.run(void 0)})}},this._container&&this._defaultAction.render((0,m.Ce)(this._container,(0,m.$)(".action-container")))}_getDefaultActionKeybindingLabel(H){var z;let J;if(!((z=this._options)===null||z===void 0)&&z.renderKeybindingWithDefaultActionLabel){let oe=this._keybindingService.lookupKeybinding(H.id);oe&&(J=`(${oe.getLabel()})`)}return J}setActionContext(H){super.setActionContext(H),this._defaultAction.setActionContext(H),this._dropdown.setActionContext(H)}render(H){this._container=H,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let z=(0,m.$)(".action-container");this._defaultAction.render((0,m.R3)(this._container,z)),this._register((0,m.nm)(z,m.tw.KEY_DOWN,oe=>{let fe=new B.y(oe);fe.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),fe.stopPropagation())}));let J=(0,m.$)(".dropdown-action-container");this._dropdown.render((0,m.R3)(this._container,J)),this._register((0,m.nm)(J,m.tw.KEY_DOWN,oe=>{var fe;let q=new B.y(oe);q.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(fe=this._defaultAction.element)===null||fe===void 0||fe.focus(),q.stopPropagation())}))}focus(H){H?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(H){H?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};K=k([R(2,i.d),R(3,c.lT),R(4,h.i),R(5,d.co),R(6,r.TG),R(7,b.Uy)],K);let j=class extends u.Lc{constructor(H,z){super(null,H,H.actions.map(J=>({text:J.id===_.Z0.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":J.label,isDisabled:!J.enabled})),0,z,L.BM,{ariaLabel:H.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,H.actions.findIndex(J=>J.checked)))}render(H){super.render(H),H.style.borderColor=(0,D.n_1)(D.a9O)}runAction(H,z){let J=this.action.actions[z];J&&this.actionRunner.run(J)}};function F(H,z,J){return z instanceof d.U8?H.createInstance(C,z,J):z instanceof d.NZ?z.item.isSelection?H.createInstance(j,z):z.item.rememberDefaultAction?H.createInstance(K,z,J):H.createInstance(W,z,J):void 0}j=k([R(1,h.u)],j)},4144:(ut,Ie,t)=>{"use strict";t.d(Ie,{BH:()=>l,Ke:()=>E,NZ:()=>a,U8:()=>w,co:()=>c,eH:()=>i,f6:()=>r,r1:()=>D,vr:()=>h});var m=t(4741),B=t(5670),u=t(4669),I=t(5976),_=t(1741),A=t(4565),x=t(3983),v=t(2065),f=t(9989),d=function(L,k){return function(R,O){k(R,O,L)}},o=function(L,k){var R={};for(var O in L)Object.prototype.hasOwnProperty.call(L,O)&&k.indexOf(O)<0&&(R[O]=L[O]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function"){var $=0;for(O=Object.getOwnPropertySymbols(L);$<O.length;$++)k.indexOf(O[$])<0&&Object.prototype.propertyIsEnumerable.call(L,O[$])&&(R[O[$]]=L[O[$]])}return R};function h(L){return L.command!==void 0}function r(L){return L.submenu!==void 0}class i{constructor(k){if(i._instances.has(k))throw new TypeError(`MenuId with identifier '${k}' already exists. Use MenuId.for(ident) or a unique identifier`);i._instances.set(k,this),this.id=k}}i._instances=new Map,i.CommandPalette=new i("CommandPalette"),i.DebugBreakpointsContext=new i("DebugBreakpointsContext"),i.DebugCallStackContext=new i("DebugCallStackContext"),i.DebugConsoleContext=new i("DebugConsoleContext"),i.DebugVariablesContext=new i("DebugVariablesContext"),i.DebugWatchContext=new i("DebugWatchContext"),i.DebugToolBar=new i("DebugToolBar"),i.DebugToolBarStop=new i("DebugToolBarStop"),i.EditorContext=new i("EditorContext"),i.SimpleEditorContext=new i("SimpleEditorContext"),i.EditorContent=new i("EditorContent"),i.EditorLineNumberContext=new i("EditorLineNumberContext"),i.EditorContextCopy=new i("EditorContextCopy"),i.EditorContextPeek=new i("EditorContextPeek"),i.EditorContextShare=new i("EditorContextShare"),i.EditorTitle=new i("EditorTitle"),i.EditorTitleRun=new i("EditorTitleRun"),i.EditorTitleContext=new i("EditorTitleContext"),i.EditorTitleContextShare=new i("EditorTitleContextShare"),i.EmptyEditorGroup=new i("EmptyEditorGroup"),i.EmptyEditorGroupContext=new i("EmptyEditorGroupContext"),i.EditorTabsBarContext=new i("EditorTabsBarContext"),i.ExplorerContext=new i("ExplorerContext"),i.ExplorerContextShare=new i("ExplorerContextShare"),i.ExtensionContext=new i("ExtensionContext"),i.GlobalActivity=new i("GlobalActivity"),i.CommandCenter=new i("CommandCenter"),i.LayoutControlMenuSubmenu=new i("LayoutControlMenuSubmenu"),i.LayoutControlMenu=new i("LayoutControlMenu"),i.MenubarMainMenu=new i("MenubarMainMenu"),i.MenubarAppearanceMenu=new i("MenubarAppearanceMenu"),i.MenubarDebugMenu=new i("MenubarDebugMenu"),i.MenubarEditMenu=new i("MenubarEditMenu"),i.MenubarCopy=new i("MenubarCopy"),i.MenubarFileMenu=new i("MenubarFileMenu"),i.MenubarGoMenu=new i("MenubarGoMenu"),i.MenubarHelpMenu=new i("MenubarHelpMenu"),i.MenubarLayoutMenu=new i("MenubarLayoutMenu"),i.MenubarNewBreakpointMenu=new i("MenubarNewBreakpointMenu"),i.PanelAlignmentMenu=new i("PanelAlignmentMenu"),i.PanelPositionMenu=new i("PanelPositionMenu"),i.MenubarPreferencesMenu=new i("MenubarPreferencesMenu"),i.MenubarRecentMenu=new i("MenubarRecentMenu"),i.MenubarSelectionMenu=new i("MenubarSelectionMenu"),i.MenubarShare=new i("MenubarShare"),i.MenubarSwitchEditorMenu=new i("MenubarSwitchEditorMenu"),i.MenubarSwitchGroupMenu=new i("MenubarSwitchGroupMenu"),i.MenubarTerminalMenu=new i("MenubarTerminalMenu"),i.MenubarViewMenu=new i("MenubarViewMenu"),i.MenubarHomeMenu=new i("MenubarHomeMenu"),i.OpenEditorsContext=new i("OpenEditorsContext"),i.ProblemsPanelContext=new i("ProblemsPanelContext"),i.SCMChangeContext=new i("SCMChangeContext"),i.SCMResourceContext=new i("SCMResourceContext"),i.SCMResourceFolderContext=new i("SCMResourceFolderContext"),i.SCMResourceGroupContext=new i("SCMResourceGroupContext"),i.SCMSourceControl=new i("SCMSourceControl"),i.SCMTitle=new i("SCMTitle"),i.SearchContext=new i("SearchContext"),i.SearchActionMenu=new i("SearchActionContext"),i.StatusBarWindowIndicatorMenu=new i("StatusBarWindowIndicatorMenu"),i.StatusBarRemoteIndicatorMenu=new i("StatusBarRemoteIndicatorMenu"),i.StickyScrollContext=new i("StickyScrollContext"),i.TestItem=new i("TestItem"),i.TestItemGutter=new i("TestItemGutter"),i.TestPeekElement=new i("TestPeekElement"),i.TestPeekTitle=new i("TestPeekTitle"),i.TouchBarContext=new i("TouchBarContext"),i.TitleBarContext=new i("TitleBarContext"),i.TitleBarTitleContext=new i("TitleBarTitleContext"),i.TunnelContext=new i("TunnelContext"),i.TunnelPrivacy=new i("TunnelPrivacy"),i.TunnelProtocol=new i("TunnelProtocol"),i.TunnelPortInline=new i("TunnelInline"),i.TunnelTitle=new i("TunnelTitle"),i.TunnelLocalAddressInline=new i("TunnelLocalAddressInline"),i.TunnelOriginInline=new i("TunnelOriginInline"),i.ViewItemContext=new i("ViewItemContext"),i.ViewContainerTitle=new i("ViewContainerTitle"),i.ViewContainerTitleContext=new i("ViewContainerTitleContext"),i.ViewTitle=new i("ViewTitle"),i.ViewTitleContext=new i("ViewTitleContext"),i.CommentEditorActions=new i("CommentEditorActions"),i.CommentThreadTitle=new i("CommentThreadTitle"),i.CommentThreadActions=new i("CommentThreadActions"),i.CommentThreadAdditionalActions=new i("CommentThreadAdditionalActions"),i.CommentThreadTitleContext=new i("CommentThreadTitleContext"),i.CommentThreadCommentContext=new i("CommentThreadCommentContext"),i.CommentTitle=new i("CommentTitle"),i.CommentActions=new i("CommentActions"),i.InteractiveToolbar=new i("InteractiveToolbar"),i.InteractiveCellTitle=new i("InteractiveCellTitle"),i.InteractiveCellDelete=new i("InteractiveCellDelete"),i.InteractiveCellExecute=new i("InteractiveCellExecute"),i.InteractiveInputExecute=new i("InteractiveInputExecute"),i.NotebookToolbar=new i("NotebookToolbar"),i.NotebookCellTitle=new i("NotebookCellTitle"),i.NotebookCellDelete=new i("NotebookCellDelete"),i.NotebookCellInsert=new i("NotebookCellInsert"),i.NotebookCellBetween=new i("NotebookCellBetween"),i.NotebookCellListTop=new i("NotebookCellTop"),i.NotebookCellExecute=new i("NotebookCellExecute"),i.NotebookCellExecutePrimary=new i("NotebookCellExecutePrimary"),i.NotebookDiffCellInputTitle=new i("NotebookDiffCellInputTitle"),i.NotebookDiffCellMetadataTitle=new i("NotebookDiffCellMetadataTitle"),i.NotebookDiffCellOutputsTitle=new i("NotebookDiffCellOutputsTitle"),i.NotebookOutputToolbar=new i("NotebookOutputToolbar"),i.NotebookEditorLayoutConfigure=new i("NotebookEditorLayoutConfigure"),i.NotebookKernelSource=new i("NotebookKernelSource"),i.BulkEditTitle=new i("BulkEditTitle"),i.BulkEditContext=new i("BulkEditContext"),i.TimelineItemContext=new i("TimelineItemContext"),i.TimelineTitle=new i("TimelineTitle"),i.TimelineTitleContext=new i("TimelineTitleContext"),i.TimelineFilterSubMenu=new i("TimelineFilterSubMenu"),i.AccountsContext=new i("AccountsContext"),i.PanelTitle=new i("PanelTitle"),i.AuxiliaryBarTitle=new i("AuxiliaryBarTitle"),i.TerminalInstanceContext=new i("TerminalInstanceContext"),i.TerminalEditorInstanceContext=new i("TerminalEditorInstanceContext"),i.TerminalNewDropdownContext=new i("TerminalNewDropdownContext"),i.TerminalTabContext=new i("TerminalTabContext"),i.TerminalTabEmptyAreaContext=new i("TerminalTabEmptyAreaContext"),i.TerminalInlineTabContext=new i("TerminalInlineTabContext"),i.WebviewContext=new i("WebviewContext"),i.InlineCompletionsActions=new i("InlineCompletionsActions"),i.NewFile=new i("NewFile"),i.MergeInput1Toolbar=new i("MergeToolbar1Toolbar"),i.MergeInput2Toolbar=new i("MergeToolbar2Toolbar"),i.MergeBaseToolbar=new i("MergeBaseToolbar"),i.MergeInputResultToolbar=new i("MergeToolbarResultToolbar"),i.InlineSuggestionToolbar=new i("InlineSuggestionToolbar"),i.InteractiveSessionContext=new i("InteractiveSessionContext"),i.InteractiveSessionCodeBlock=new i("InteractiveSessionCodeblock"),i.InteractiveSessionTitle=new i("InteractiveSessionTitle"),i.InteractiveSessionExecute=new i("InteractiveSessionExecute");let c=(0,v.yh)("menuService");class b{static for(k){let R=this._all.get(k);return R||(R=new b(k),this._all.set(k,R)),R}static merge(k){let R=new Set;for(let O of k)O instanceof b&&R.add(O.id);return R}constructor(k){this.id=k,this.has=R=>R===k}}b._all=new Map;let l=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new u.SZ({merge:b.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(L){return this._commands.set(L.id,L),this._onDidChangeMenu.fire(b.for(i.CommandPalette)),(0,I.OF)(()=>{this._commands.delete(L.id)&&this._onDidChangeMenu.fire(b.for(i.CommandPalette))})}getCommand(L){return this._commands.get(L)}getCommands(){let L=new Map;return this._commands.forEach((k,R)=>L.set(R,k)),L}appendMenuItem(L,k){let R=this._menuItems.get(L);R||(R=new _.S,this._menuItems.set(L,R));let O=R.push(k);return this._onDidChangeMenu.fire(b.for(L)),(0,I.OF)(O)}appendMenuItems(L){let k=new I.SL;for(let{id:R,item:O}of L)k.add(this.appendMenuItem(R,O));return k}getMenuItems(L){let k;return k=this._menuItems.has(L)?[...this._menuItems.get(L)]:[],L===i.CommandPalette&&this._appendImplicitItems(k),k}_appendImplicitItems(L){let k=new Set;for(let R of L)h(R)&&(k.add(R.command.id),R.alt&&k.add(R.alt.id));this._commands.forEach((R,O)=>{k.has(O)||L.push({command:R})})}};class a extends m.wY{constructor(k,R,O){super(`submenuitem.${k.submenu.id}`,typeof k.title=="string"?k.title:k.title.value,O,"submenu"),this.item=k,this.hideActions=R}}let w=class ul{static label(k,R){return R!=null&&R.renderShortTitle&&k.shortTitle?typeof k.shortTitle=="string"?k.shortTitle:k.shortTitle.value:typeof k.title=="string"?k.title:k.title.value}constructor(k,R,O,$,N,T){var C,W;let K;if(this.hideActions=$,this._commandService=T,this.id=k.id,this.label=ul.label(k,O),this.tooltip=(W=typeof k.tooltip=="string"?k.tooltip:(C=k.tooltip)===null||C===void 0?void 0:C.value)!==null&&W!==void 0?W:"",this.enabled=!k.precondition||N.contextMatchesRules(k.precondition),this.checked=void 0,k.toggled){let j=k.toggled.condition?k.toggled:{condition:k.toggled};this.checked=N.contextMatchesRules(j.condition),this.checked&&j.tooltip&&(this.tooltip=typeof j.tooltip=="string"?j.tooltip:j.tooltip.value),this.checked&&B.k.isThemeIcon(j.icon)&&(K=j.icon),j.title&&(this.label=typeof j.title=="string"?j.title:j.title.value)}K||(K=B.k.isThemeIcon(k.icon)?k.icon:void 0),this.item=k,this.alt=R?new ul(R,void 0,O,$,N,T):void 0,this._options=O,this.class=K&&B.k.asClassName(K)}run(...k){var R,O;let $=[];return!((R=this._options)===null||R===void 0)&&R.arg&&($=[...$,this._options.arg]),!((O=this._options)===null||O===void 0)&&O.shouldForwardArgs&&($=[...$,...k]),this._commandService.executeCommand(this.id,...$)}};w=function(L,k,R,O){var $,N=arguments.length,T=N<3?k:O===null?O=Object.getOwnPropertyDescriptor(k,R):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(L,k,R,O);else for(var C=L.length-1;C>=0;C--)($=L[C])&&(T=(N<3?$(T):N>3?$(k,R,T):$(k,R))||T);return N>3&&T&&Object.defineProperty(k,R,T),T}([d(4,x.i6),d(5,A.H)],w);class E{constructor(k){this.desc=k}}function D(L){let k=new I.SL,R=new L,O=R.desc,{f1:$,menu:N,keybinding:T,description:C}=O,W=o(O,["f1","menu","keybinding","description"]);if(k.add(A.P.registerCommand({id:W.id,handler:(K,...j)=>R.run(K,...j),description:C})),Array.isArray(N))for(let K of N)k.add(l.appendMenuItem(K.id,Object.assign({command:Object.assign(Object.assign({},W),{precondition:K.precondition===null?void 0:W.precondition})},K)));else N&&k.add(l.appendMenuItem(N.id,Object.assign({command:Object.assign(Object.assign({},W),{precondition:N.precondition===null?void 0:W.precondition})},N)));if($&&(k.add(l.appendMenuItem(i.CommandPalette,{command:W,when:W.precondition})),k.add(l.addCommand(W))),Array.isArray(T))for(let K of T)k.add(f.W.registerKeybindingRule(Object.assign(Object.assign({},K),{id:W.id,when:W.precondition?x.Ao.and(W.precondition,K.when):K.when})));else T&&k.add(f.W.registerKeybindingRule(Object.assign(Object.assign({},T),{id:W.id,when:W.precondition?x.Ao.and(W.precondition,T.when):T.when})));return k}},9149:(ut,Ie,t)=>{"use strict";t.d(Ie,{e7:()=>u,y$:()=>_});var m=t(2065),B=t(3580);let u=(0,m.yh)("audioCue");class I{static register(x){return new I(x.fileName)}constructor(x){this.fileName=x}}I.error=I.register({fileName:"error.mp3"}),I.warning=I.register({fileName:"warning.mp3"}),I.foldedArea=I.register({fileName:"foldedAreas.mp3"}),I.break=I.register({fileName:"break.mp3"}),I.quickFixes=I.register({fileName:"quickFixes.mp3"}),I.taskCompleted=I.register({fileName:"taskCompleted.mp3"}),I.taskFailed=I.register({fileName:"taskFailed.mp3"}),I.terminalBell=I.register({fileName:"terminalBell.mp3"}),I.diffLineInserted=I.register({fileName:"diffLineInserted.mp3"}),I.diffLineDeleted=I.register({fileName:"diffLineDeleted.mp3"}),I.diffLineModified=I.register({fileName:"diffLineModified.mp3"});class _{static register(x){let v=new _(x.sound,x.name,x.settingsKey);return _._audioCues.add(v),v}constructor(x,v,f){this.sound=x,this.name=v,this.settingsKey=f}}_._audioCues=new Set,_.error=_.register({name:(0,B.NC)("audioCues.lineHasError.name","Error on Line"),sound:I.error,settingsKey:"audioCues.lineHasError"}),_.warning=_.register({name:(0,B.NC)("audioCues.lineHasWarning.name","Warning on Line"),sound:I.warning,settingsKey:"audioCues.lineHasWarning"}),_.foldedArea=_.register({name:(0,B.NC)("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:I.foldedArea,settingsKey:"audioCues.lineHasFoldedArea"}),_.break=_.register({name:(0,B.NC)("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:I.break,settingsKey:"audioCues.lineHasBreakpoint"}),_.inlineSuggestion=_.register({name:(0,B.NC)("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:I.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"}),_.terminalQuickFix=_.register({name:(0,B.NC)("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:I.quickFixes,settingsKey:"audioCues.terminalQuickFix"}),_.onDebugBreak=_.register({name:(0,B.NC)("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:I.break,settingsKey:"audioCues.onDebugBreak"}),_.noInlayHints=_.register({name:(0,B.NC)("audioCues.noInlayHints","No Inlay Hints on Line"),sound:I.error,settingsKey:"audioCues.noInlayHints"}),_.taskCompleted=_.register({name:(0,B.NC)("audioCues.taskCompleted","Task Completed"),sound:I.taskCompleted,settingsKey:"audioCues.taskCompleted"}),_.taskFailed=_.register({name:(0,B.NC)("audioCues.taskFailed","Task Failed"),sound:I.taskFailed,settingsKey:"audioCues.taskFailed"}),_.terminalCommandFailed=_.register({name:(0,B.NC)("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:I.error,settingsKey:"audioCues.terminalCommandFailed"}),_.terminalBell=_.register({name:(0,B.NC)("audioCues.terminalBell","Terminal Bell"),sound:I.terminalBell,settingsKey:"audioCues.terminalBell"}),_.notebookCellCompleted=_.register({name:(0,B.NC)("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:I.taskCompleted,settingsKey:"audioCues.notebookCellCompleted"}),_.notebookCellFailed=_.register({name:(0,B.NC)("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:I.taskFailed,settingsKey:"audioCues.notebookCellFailed"}),_.diffLineInserted=_.register({name:(0,B.NC)("audioCues.diffLineInserted","Diff Line Inserted"),sound:I.diffLineInserted,settingsKey:"audioCues.diffLineInserted"}),_.diffLineDeleted=_.register({name:(0,B.NC)("audioCues.diffLineDeleted","Diff Line Deleted"),sound:I.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"}),_.diffLineModified=_.register({name:(0,B.NC)("audioCues.diffLineModified","Diff Line Modified"),sound:I.diffLineModified,settingsKey:"audioCues.diffLineModified"})},4972:(ut,Ie,t)=>{"use strict";t.d(Ie,{p:()=>m});let m=(0,t(2065).yh)("clipboardService")},4565:(ut,Ie,t)=>{"use strict";t.d(Ie,{H:()=>A,P:()=>x});var m=t(4669),B=t(3725),u=t(5976),I=t(1741),_=t(8401);let A=(0,t(2065).yh)("commandService"),x=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new m.Q5,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(v,f){if(!v)throw new Error("invalid command");if(typeof v=="string"){if(!f)throw new Error("invalid command");return this.registerCommand({id:v,handler:f})}if(v.description){let i=[];for(let b of v.description.args)i.push(b.constraint);let c=v.handler;v.handler=function(b,...l){return(0,_.D8)(l,i),c(b,...l)}}let{id:d}=v,o=this._commands.get(d);o||(o=new I.S,this._commands.set(d,o));let h=o.unshift(v),r=(0,u.OF)(()=>{h();let i=this._commands.get(d);i!=null&&i.isEmpty()&&this._commands.delete(d)});return this._onDidRegisterCommand.fire(d),r}registerCommandAlias(v,f){return x.registerCommand(v,(d,...o)=>d.get(A).executeCommand(f,...o))}getCommand(v){let f=this._commands.get(v);if(f&&!f.isEmpty())return B.$.first(f)}getCommands(){let v=new Map;for(let f of this._commands.keys()){let d=this.getCommand(f);d&&v.set(f,d)}return v}};x.registerCommand("noop",()=>{})},3108:(ut,Ie,t)=>{"use strict";t.d(Ie,{KV:()=>u,Mt:()=>A,Od:()=>B,UI:()=>x,Ui:()=>m,xL:()=>I});let m=(0,t(2065).yh)("configurationService");function B(v,f){let d=Object.create(null);for(let o in v)u(d,o,v[o],f);return d}function u(v,f,d,o){let h=f.split("."),r=h.pop(),i=v;for(let c=0;c<h.length;c++){let b=h[c],l=i[b];switch(typeof l){case"undefined":l=i[b]=Object.create(null);break;case"object":break;default:return void o(`Ignoring ${f} as ${h.slice(0,c+1).join(".")} is ${JSON.stringify(l)}`)}i=l}if(typeof i=="object"&&i!==null)try{i[r]=d}catch(c){o(`Ignoring ${f} as ${h.join(".")} is ${JSON.stringify(i)}`)}else o(`Ignoring ${f} as ${h.join(".")} is ${JSON.stringify(i)}`)}function I(v,f){_(v,f.split("."))}function _(v,f){let d=f.shift();if(f.length!==0){if(Object.keys(v).indexOf(d)!==-1){let o=v[d];typeof o!="object"||Array.isArray(o)||(_(o,f),Object.keys(o).length===0&&delete v[d])}}else delete v[d]}function A(v,f,d){let o=function(h,r){let i=h;for(let c of r){if(typeof i!="object"||i===null)return;i=i[c]}return i}(v,f.split("."));return o===void 0?d:o}function x(v){return v.replace(/[\[\]]/g,"")}},3193:(ut,Ie,t)=>{"use strict";t.d(Ie,{IP:()=>v,eU:()=>E,ny:()=>D});var m=t(9488),B=t(4669),u=t(8401),I=t(3580),_=t(3108),A=t(1294),x=t(9872);let v={Configuration:"base.contributions.configuration"},f={properties:{},patternProperties:{}},d={properties:{},patternProperties:{}},o={properties:{},patternProperties:{}},h={properties:{},patternProperties:{}},r={properties:{},patternProperties:{}},i={properties:{},patternProperties:{}},c="vscode://schemas/settings/resourceLanguage",b=x.B.as(A.I.JSONContribution),l="\\[([^\\]]+)\\]",a=new RegExp(l,"g"),w=`^(${l})+$`,E=new RegExp(w);function D(R){let O=[];if(E.test(R)){let $=a.exec(R);for(;$!=null&&$.length;){let N=$[1].trim();N&&O.push(N),$=a.exec(R)}}return(0,m.EB)(O)}let L=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new B.Q5,this._onDidUpdateConfiguration=new B.Q5,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:I.NC("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},b.registerSchema(c,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(R,O=!0){this.registerConfigurations([R],O)}registerConfigurations(R,O=!0){let $=new Set;this.doRegisterConfigurations(R,O,$),b.registerSchema(c,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:$})}registerDefaultConfigurations(R){let O=new Set;this.doRegisterDefaultConfigurations(R,O),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:O,defaultsOverrides:!0})}doRegisterDefaultConfigurations(R,O){var $;let N=[];for(let{overrides:T,source:C}of R)for(let W in T)if(O.add(W),E.test(W)){let K=this.configurationDefaultsOverrides.get(W),j=($=K==null?void 0:K.valuesSources)!==null&&$!==void 0?$:new Map;if(C)for(let J of Object.keys(T[W]))j.set(J,C);let F=Object.assign(Object.assign({},(K==null?void 0:K.value)||{}),T[W]);this.configurationDefaultsOverrides.set(W,{source:C,value:F,valuesSources:j});let H=(0,_.UI)(W),z={type:"object",default:F,description:I.NC("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",H),$ref:c,defaultDefaultValue:F,source:u.HD(C)?void 0:C,defaultValueSource:C};N.push(...D(W)),this.configurationProperties[W]=z,this.defaultLanguageConfigurationOverridesNode.properties[W]=z}else{this.configurationDefaultsOverrides.set(W,{value:T[W],source:C});let K=this.configurationProperties[W];K&&(this.updatePropertyDefaultValue(W,K),this.updateSchema(W,K))}this.doRegisterOverrideIdentifiers(N)}registerOverrideIdentifiers(R){this.doRegisterOverrideIdentifiers(R),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(R){for(let O of R)this.overrideIdentifiers.add(O);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(R,O,$){R.forEach(N=>{this.validateAndRegisterProperties(N,O,N.extensionInfo,N.restrictedProperties,void 0,$),this.configurationContributors.push(N),this.registerJSONConfiguration(N)})}validateAndRegisterProperties(R,O=!0,$,N,T=3,C){var W;T=u.Jp(R.scope)?T:R.scope;let K=R.properties;if(K)for(let F in K){let H=K[F];O&&k(F,H)?delete K[F]:(H.source=$,H.defaultDefaultValue=K[F].default,this.updatePropertyDefaultValue(F,H),E.test(F)?H.scope=void 0:(H.scope=u.Jp(H.scope)?T:H.scope,H.restricted=u.Jp(H.restricted)?!!(N!=null&&N.includes(F)):H.restricted),!K[F].hasOwnProperty("included")||K[F].included?(this.configurationProperties[F]=K[F],!((W=K[F].policy)===null||W===void 0)&&W.name&&this.policyConfigurations.set(K[F].policy.name,F),!K[F].deprecationMessage&&K[F].markdownDeprecationMessage&&(K[F].deprecationMessage=K[F].markdownDeprecationMessage),C.add(F)):(this.excludedConfigurationProperties[F]=K[F],delete K[F]))}let j=R.allOf;if(j)for(let F of j)this.validateAndRegisterProperties(F,O,$,N,T,C)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(R){let O=$=>{let N=$.properties;if(N)for(let C in N)this.updateSchema(C,N[C]);let T=$.allOf;T==null||T.forEach(O)};O(R)}updateSchema(R,O){switch(f.properties[R]=O,O.scope){case 1:d.properties[R]=O;break;case 2:o.properties[R]=O;break;case 6:h.properties[R]=O;break;case 3:r.properties[R]=O;break;case 4:i.properties[R]=O;break;case 5:i.properties[R]=O,this.resourceLanguageSettingsSchema.properties[R]=O}}updateOverridePropertyPatternKey(){for(let R of this.overrideIdentifiers.values()){let O=`[${R}]`,$={type:"object",description:I.NC("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:I.NC("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:c};this.updatePropertyDefaultValue(O,$),f.properties[O]=$,d.properties[O]=$,o.properties[O]=$,h.properties[O]=$,r.properties[O]=$,i.properties[O]=$}}registerOverridePropertyPatternKey(){let R={type:"object",description:I.NC("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:I.NC("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:c};f.patternProperties[w]=R,d.patternProperties[w]=R,o.patternProperties[w]=R,h.patternProperties[w]=R,r.patternProperties[w]=R,i.patternProperties[w]=R,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(R,O){let $=this.configurationDefaultsOverrides.get(R),N=$==null?void 0:$.value,T=$==null?void 0:$.source;u.o8(N)&&(N=O.defaultDefaultValue,T=void 0),u.o8(N)&&(N=function(C){switch(Array.isArray(C)?C[0]:C){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(O.type)),O.default=N,O.defaultValueSource=T}};function k(R,O){var $,N,T,C;return R.trim()?E.test(R)?I.NC("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",R):L.getConfigurationProperties()[R]!==void 0?I.NC("config.property.duplicate","Cannot register '{0}'. This property is already registered.",R):!(($=O.policy)===null||$===void 0)&&$.name&&L.getPolicyConfigurations().get((N=O.policy)===null||N===void 0?void 0:N.name)!==void 0?I.NC("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",R,(T=O.policy)===null||T===void 0?void 0:T.name,L.getPolicyConfigurations().get((C=O.policy)===null||C===void 0?void 0:C.name)):null:I.NC("config.property.empty","Cannot register an empty property")}x.B.add(v.Configuration,L)},3983:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ao:()=>L,i6:()=>se,uy:()=>ie,Fb:()=>k,K8:()=>de});var m=t(1432),B=t(7295),u=t(7301),I=t(3580);function _(...ve){switch(ve.length){case 1:return(0,I.NC)("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",ve[0]);case 2:return(0,I.NC)("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",ve[0],ve[1]);case 3:return(0,I.NC)("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",ve[0],ve[1],ve[2]);default:return}}let A=(0,I.NC)("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),x=(0,I.NC)("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class v{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(X){switch(X.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return X.isTripleEq?"===":"==";case 4:return X.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return X.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw(0,u.L6)(`unhandled token type: ${JSON.stringify(X)}; have you forgotten to add a case?`)}}reset(X){return this._input=X,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let X=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:X})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let X=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:X})}else this._match(126)?this._addToken(9):this._error(_("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(_("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(_("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(X){return!this._isAtEnd()&&this._input.charCodeAt(this._current)===X&&(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(X){this._tokens.push({type:X,offset:this._start})}_error(X){let ye=this._start,Ce=this._input.substring(this._start,this._current),Ee={type:19,offset:this._start,lexeme:Ce};this._errors.push({offset:ye,lexeme:Ce,additionalInfo:X}),this._tokens.push(Ee)}_string(){this.stringRe.lastIndex=this._start;let X=this.stringRe.exec(this._input);if(X){this._current=this._start+X[0].length;let ye=this._input.substring(this._start,this._current),Ce=v._keywords.get(ye);Ce?this._addToken(Ce):this._tokens.push({type:17,lexeme:ye,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(A):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let X=this._current,ye=!1,Ce=!1;for(;;){if(X>=this._input.length)return this._current=X,void this._error(x);let Ae=this._input.charCodeAt(X);if(ye)ye=!1;else{if(Ae===47&&!Ce){X++;break}Ae===91?Ce=!0:Ae===92?ye=!0:Ae===93&&(Ce=!1)}X++}for(;X<this._input.length&&v._regexFlags.has(this._input.charCodeAt(X));)X++;this._current=X;let Ee=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:Ee,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}v._regexFlags=new Set(["i","g","s","m","y","u"].map(ve=>ve.charCodeAt(0))),v._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);var f=t(2065);let d=new Map;d.set("false",!1),d.set("true",!0),d.set("isMac",m.dz),d.set("isLinux",m.IJ),d.set("isWindows",m.ED),d.set("isWeb",m.$L),d.set("isMacNative",m.dz&&!m.$L),d.set("isEdge",m.un),d.set("isFirefox",m.vU),d.set("isChrome",m.i7),d.set("isSafari",m.G6);let o=Object.prototype.hasOwnProperty,h={regexParsingWithErrorRecovery:!0},r=(0,I.NC)("contextkey.parser.error.emptyString","Empty context key expression"),i=(0,I.NC)("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),c=(0,I.NC)("contextkey.parser.error.noInAfterNot","'in' after 'not'."),b=(0,I.NC)("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),l=(0,I.NC)("contextkey.parser.error.unexpectedToken","Unexpected token"),a=(0,I.NC)("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),w=(0,I.NC)("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),E=(0,I.NC)("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");class D{constructor(X=h){this._config=X,this._scanner=new v,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(X){if(X!==""){this._tokens=this._scanner.reset(X).scan(),this._current=0,this._parsingErrors=[];try{let ye=this._expr();if(!this._isAtEnd()){let Ce=this._peek(),Ee=Ce.type===17?a:void 0;throw this._parsingErrors.push({message:l,offset:Ce.offset,lexeme:v.getLexeme(Ce),additionalInfo:Ee}),D._parseError}return ye}catch(ye){if(ye!==D._parseError)throw ye;return}}else this._parsingErrors.push({message:r,offset:0,lexeme:"",additionalInfo:i})}_expr(){return this._or()}_or(){let X=[this._and()];for(;this._matchOne(16);){let ye=this._and();X.push(ye)}return X.length===1?X[0]:L.or(...X)}_and(){let X=[this._term()];for(;this._matchOne(15);){let ye=this._term();X.push(ye)}return X.length===1?X[0]:L.and(...X)}_term(){if(this._matchOne(2)){let X=this._peek();switch(X.type){case 11:return this._advance(),O.INSTANCE;case 12:return this._advance(),$.INSTANCE;case 0:{this._advance();let ye=this._expr();return this._consume(1,b),ye==null?void 0:ye.negate()}case 17:return this._advance(),j.create(X.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",X)}}return this._primary()}_primary(){let X=this._peek();switch(X.type){case 11:return this._advance(),L.true();case 12:return this._advance(),L.false();case 0:{this._advance();let ye=this._expr();return this._consume(1,b),ye}case 17:{let ye=X.lexeme;if(this._advance(),this._matchOne(9)){let Ce=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),Ce.type!==10)throw this._errExpectedButGot("REGEX",Ce);let Ee=Ce.lexeme,Ae=Ee.lastIndexOf("/"),Fe=Ae===Ee.length-1?void 0:this._removeFlagsGY(Ee.substring(Ae+1)),_e;try{_e=new RegExp(Ee.substring(1,Ae),Fe)}catch(te){throw this._errExpectedButGot("REGEX",Ce)}return fe.create(ye,_e)}switch(Ce.type){case 10:case 19:{let Ee=[Ce.lexeme];this._advance();let Ae=this._peek(),Fe=0;for(let le=0;le<Ce.lexeme.length;le++)Ce.lexeme.charCodeAt(le)===40?Fe++:Ce.lexeme.charCodeAt(le)===41&&Fe--;for(;!this._isAtEnd()&&Ae.type!==15&&Ae.type!==16;){switch(Ae.type){case 0:Fe++;break;case 1:Fe--;break;case 10:case 18:for(let le=0;le<Ae.lexeme.length;le++)Ae.lexeme.charCodeAt(le)===40?Fe++:Ce.lexeme.charCodeAt(le)===41&&Fe--}if(Fe<0)break;Ee.push(v.getLexeme(Ae)),this._advance(),Ae=this._peek()}let _e=Ee.join(""),te=_e.lastIndexOf("/"),Le=te===_e.length-1?void 0:this._removeFlagsGY(_e.substring(te+1)),ke;try{ke=new RegExp(_e.substring(1,te),Le)}catch(le){throw this._errExpectedButGot("REGEX",Ce)}return L.regex(ye,ke)}case 18:{let Ee=Ce.lexeme;this._advance();let Ae=null;if(!(0,B.m5)(Ee)){let Fe=Ee.indexOf("/"),_e=Ee.lastIndexOf("/");if(Fe!==_e&&Fe>=0){let te=Ee.slice(Fe+1,_e),Le=Ee[_e+1]==="i"?"i":"";try{Ae=new RegExp(te,Le)}catch(ke){throw this._errExpectedButGot("REGEX",Ce)}}}if(Ae===null)throw this._errExpectedButGot("REGEX",Ce);return fe.create(ye,Ae)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,c);let Ce=this._value();return L.notIn(ye,Ce)}switch(this._peek().type){case 3:{this._advance();let Ce=this._value();if(this._previous().type===18)return L.equals(ye,Ce);switch(Ce){case"true":return L.has(ye);case"false":return L.not(ye);default:return L.equals(ye,Ce)}}case 4:{this._advance();let Ce=this._value();if(this._previous().type===18)return L.notEquals(ye,Ce);switch(Ce){case"true":return L.not(ye);case"false":return L.has(ye);default:return L.notEquals(ye,Ce)}}case 5:return this._advance(),J.create(ye,this._value());case 6:return this._advance(),oe.create(ye,this._value());case 7:return this._advance(),H.create(ye,this._value());case 8:return this._advance(),z.create(ye,this._value());case 13:return this._advance(),L.in(ye,this._value());default:return L.has(ye)}}case 20:throw this._parsingErrors.push({message:w,offset:X.offset,lexeme:"",additionalInfo:E}),D._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let X=this._peek();switch(X.type){case 17:case 18:return this._advance(),X.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(X){return X.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(X){return!!this._check(X)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(X,ye){if(this._check(X))return this._advance();throw this._errExpectedButGot(ye,this._peek())}_errExpectedButGot(X,ye,Ce){let Ee=(0,I.NC)("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,X,v.getLexeme(ye)),Ae=ye.offset,Fe=v.getLexeme(ye);return this._parsingErrors.push({message:Ee,offset:Ae,lexeme:Fe,additionalInfo:Ce}),D._parseError}_check(X){return this._peek().type===X}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}}D._parseError=new Error;class L{static false(){return O.INSTANCE}static true(){return $.INSTANCE}static has(X){return N.create(X)}static equals(X,ye){return T.create(X,ye)}static notEquals(X,ye){return K.create(X,ye)}static regex(X,ye){return fe.create(X,ye)}static in(X,ye){return C.create(X,ye)}static notIn(X,ye){return W.create(X,ye)}static not(X){return j.create(X)}static and(...X){return re.create(X,null,!0)}static or(...X){return ne.create(X,null,!0)}static deserialize(X){if(X!=null)return this._parser.parse(X)}}function k(ve,X){let ye=ve?ve.substituteConstants():void 0,Ce=X?X.substituteConstants():void 0;return!ye&&!Ce||!(!ye||!Ce)&&ye.equals(Ce)}function R(ve,X){return ve.cmp(X)}L._parser=new D({regexParsingWithErrorRecovery:!1});class O{constructor(){this.type=0}cmp(X){return this.type-X.type}equals(X){return X.type===this.type}substituteConstants(){return this}evaluate(X){return!1}serialize(){return"false"}keys(){return[]}negate(){return $.INSTANCE}}O.INSTANCE=new O;class ${constructor(){this.type=1}cmp(X){return this.type-X.type}equals(X){return X.type===this.type}substituteConstants(){return this}evaluate(X){return!0}serialize(){return"true"}keys(){return[]}negate(){return O.INSTANCE}}$.INSTANCE=new $;class N{static create(X,ye=null){let Ce=d.get(X);return typeof Ce=="boolean"?Ce?$.INSTANCE:O.INSTANCE:new N(X,ye)}constructor(X,ye){this.key=X,this.negated=ye,this.type=2}cmp(X){return X.type!==this.type?this.type-X.type:ce(this.key,X.key)}equals(X){return X.type===this.type&&this.key===X.key}substituteConstants(){let X=d.get(this.key);return typeof X=="boolean"?X?$.INSTANCE:O.INSTANCE:this}evaluate(X){return!!X.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=j.create(this.key,this)),this.negated}}class T{static create(X,ye,Ce=null){if(typeof ye=="boolean")return ye?N.create(X,Ce):j.create(X,Ce);let Ee=d.get(X);return typeof Ee=="boolean"?ye===(Ee?"true":"false")?$.INSTANCE:O.INSTANCE:new T(X,ye,Ce)}constructor(X,ye,Ce){this.key=X,this.value=ye,this.negated=Ce,this.type=4}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type&&this.key===X.key&&this.value===X.value}substituteConstants(){let X=d.get(this.key);if(typeof X=="boolean"){let ye=X?"true":"false";return this.value===ye?$.INSTANCE:O.INSTANCE}return this}evaluate(X){return X.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=K.create(this.key,this.value,this)),this.negated}}class C{static create(X,ye){return new C(X,ye)}constructor(X,ye){this.key=X,this.valueKey=ye,this.type=10,this.negated=null}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.valueKey,X.key,X.valueKey)}equals(X){return X.type===this.type&&this.key===X.key&&this.valueKey===X.valueKey}substituteConstants(){return this}evaluate(X){let ye=X.getValue(this.valueKey),Ce=X.getValue(this.key);return Array.isArray(ye)?ye.includes(Ce):typeof Ce=="string"&&typeof ye=="object"&&ye!==null&&o.call(ye,Ce)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=W.create(this.key,this.valueKey)),this.negated}}class W{static create(X,ye){return new W(X,ye)}constructor(X,ye){this.key=X,this.valueKey=ye,this.type=11,this._negated=C.create(X,ye)}cmp(X){return X.type!==this.type?this.type-X.type:this._negated.cmp(X._negated)}equals(X){return X.type===this.type&&this._negated.equals(X._negated)}substituteConstants(){return this}evaluate(X){return!this._negated.evaluate(X)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class K{static create(X,ye,Ce=null){if(typeof ye=="boolean")return ye?j.create(X,Ce):N.create(X,Ce);let Ee=d.get(X);return typeof Ee=="boolean"?ye===(Ee?"true":"false")?O.INSTANCE:$.INSTANCE:new K(X,ye,Ce)}constructor(X,ye,Ce){this.key=X,this.value=ye,this.negated=Ce,this.type=5}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type&&this.key===X.key&&this.value===X.value}substituteConstants(){let X=d.get(this.key);if(typeof X=="boolean"){let ye=X?"true":"false";return this.value===ye?O.INSTANCE:$.INSTANCE}return this}evaluate(X){return X.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T.create(this.key,this.value,this)),this.negated}}class j{static create(X,ye=null){let Ce=d.get(X);return typeof Ce=="boolean"?Ce?O.INSTANCE:$.INSTANCE:new j(X,ye)}constructor(X,ye){this.key=X,this.negated=ye,this.type=3}cmp(X){return X.type!==this.type?this.type-X.type:ce(this.key,X.key)}equals(X){return X.type===this.type&&this.key===X.key}substituteConstants(){let X=d.get(this.key);return typeof X=="boolean"?X?O.INSTANCE:$.INSTANCE:this}evaluate(X){return!X.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=N.create(this.key,this)),this.negated}}function F(ve,X){if(typeof ve=="string"){let ye=parseFloat(ve);isNaN(ye)||(ve=ye)}return typeof ve=="string"||typeof ve=="number"?X(ve):O.INSTANCE}class H{static create(X,ye,Ce=null){return F(ye,Ee=>new H(X,Ee,Ce))}constructor(X,ye,Ce){this.key=X,this.value=ye,this.negated=Ce,this.type=12}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type&&this.key===X.key&&this.value===X.value}substituteConstants(){return this}evaluate(X){return typeof this.value!="string"&&parseFloat(X.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=oe.create(this.key,this.value,this)),this.negated}}class z{static create(X,ye,Ce=null){return F(ye,Ee=>new z(X,Ee,Ce))}constructor(X,ye,Ce){this.key=X,this.value=ye,this.negated=Ce,this.type=13}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type&&this.key===X.key&&this.value===X.value}substituteConstants(){return this}evaluate(X){return typeof this.value!="string"&&parseFloat(X.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=J.create(this.key,this.value,this)),this.negated}}class J{static create(X,ye,Ce=null){return F(ye,Ee=>new J(X,Ee,Ce))}constructor(X,ye,Ce){this.key=X,this.value=ye,this.negated=Ce,this.type=14}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type&&this.key===X.key&&this.value===X.value}substituteConstants(){return this}evaluate(X){return typeof this.value!="string"&&parseFloat(X.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=z.create(this.key,this.value,this)),this.negated}}class oe{static create(X,ye,Ce=null){return F(ye,Ee=>new oe(X,Ee,Ce))}constructor(X,ye,Ce){this.key=X,this.value=ye,this.negated=Ce,this.type=15}cmp(X){return X.type!==this.type?this.type-X.type:be(this.key,this.value,X.key,X.value)}equals(X){return X.type===this.type&&this.key===X.key&&this.value===X.value}substituteConstants(){return this}evaluate(X){return typeof this.value!="string"&&parseFloat(X.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=H.create(this.key,this.value,this)),this.negated}}class fe{static create(X,ye){return new fe(X,ye)}constructor(X,ye){this.key=X,this.regexp=ye,this.type=7,this.negated=null}cmp(X){if(X.type!==this.type)return this.type-X.type;if(this.key<X.key)return-1;if(this.key>X.key)return 1;let ye=this.regexp?this.regexp.source:"",Ce=X.regexp?X.regexp.source:"";return ye<Ce?-1:ye>Ce?1:0}equals(X){if(X.type===this.type){let ye=this.regexp?this.regexp.source:"",Ce=X.regexp?X.regexp.source:"";return this.key===X.key&&ye===Ce}return!1}substituteConstants(){return this}evaluate(X){let ye=X.getValue(this.key);return!!this.regexp&&this.regexp.test(ye)}serialize(){let X=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${X}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=q.create(this)),this.negated}}class q{static create(X){return new q(X)}constructor(X){this._actual=X,this.type=8}cmp(X){return X.type!==this.type?this.type-X.type:this._actual.cmp(X._actual)}equals(X){return X.type===this.type&&this._actual.equals(X._actual)}substituteConstants(){return this}evaluate(X){return!this._actual.evaluate(X)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function p(ve){let X=null;for(let ye=0,Ce=ve.length;ye<Ce;ye++){let Ee=ve[ye].substituteConstants();if(ve[ye]!==Ee&&X===null){X=[];for(let Ae=0;Ae<ye;Ae++)X[Ae]=ve[Ae]}X!==null&&(X[ye]=Ee)}return X===null?ve:X}class re{static create(X,ye,Ce){return re._normalizeArr(X,ye,Ce)}constructor(X,ye){this.expr=X,this.negated=ye,this.type=6}cmp(X){if(X.type!==this.type)return this.type-X.type;if(this.expr.length<X.expr.length)return-1;if(this.expr.length>X.expr.length)return 1;for(let ye=0,Ce=this.expr.length;ye<Ce;ye++){let Ee=R(this.expr[ye],X.expr[ye]);if(Ee!==0)return Ee}return 0}equals(X){if(X.type===this.type){if(this.expr.length!==X.expr.length)return!1;for(let ye=0,Ce=this.expr.length;ye<Ce;ye++)if(!this.expr[ye].equals(X.expr[ye]))return!1;return!0}return!1}substituteConstants(){let X=p(this.expr);return X===this.expr?this:re.create(X,this.negated,!1)}evaluate(X){for(let ye=0,Ce=this.expr.length;ye<Ce;ye++)if(!this.expr[ye].evaluate(X))return!1;return!0}static _normalizeArr(X,ye,Ce){let Ee=[],Ae=!1;for(let Fe of X)if(Fe)if(Fe.type!==1){if(Fe.type===0)return O.INSTANCE;Fe.type!==6?Ee.push(Fe):Ee.push(...Fe.expr)}else Ae=!0;if(Ee.length===0&&Ae)return $.INSTANCE;if(Ee.length!==0){if(Ee.length===1)return Ee[0];Ee.sort(R);for(let Fe=1;Fe<Ee.length;Fe++)Ee[Fe-1].equals(Ee[Fe])&&(Ee.splice(Fe,1),Fe--);if(Ee.length===1)return Ee[0];for(;Ee.length>1;){let Fe=Ee[Ee.length-1];if(Fe.type!==9)break;Ee.pop();let _e=Ee.pop(),te=Ee.length===0,Le=ne.create(Fe.expr.map(ke=>re.create([ke,_e],null,Ce)),null,te);Le&&(Ee.push(Le),Ee.sort(R))}if(Ee.length===1)return Ee[0];if(Ce){for(let Fe=0;Fe<Ee.length;Fe++)for(let _e=Fe+1;_e<Ee.length;_e++)if(Ee[Fe].negate().equals(Ee[_e]))return O.INSTANCE;if(Ee.length===1)return Ee[0]}return new re(Ee,ye)}}serialize(){return this.expr.map(X=>X.serialize()).join(" && ")}keys(){let X=[];for(let ye of this.expr)X.push(...ye.keys());return X}negate(){if(!this.negated){let X=[];for(let ye of this.expr)X.push(ye.negate());this.negated=ne.create(X,this,!0)}return this.negated}}class ne{static create(X,ye,Ce){return ne._normalizeArr(X,ye,Ce)}constructor(X,ye){this.expr=X,this.negated=ye,this.type=9}cmp(X){if(X.type!==this.type)return this.type-X.type;if(this.expr.length<X.expr.length)return-1;if(this.expr.length>X.expr.length)return 1;for(let ye=0,Ce=this.expr.length;ye<Ce;ye++){let Ee=R(this.expr[ye],X.expr[ye]);if(Ee!==0)return Ee}return 0}equals(X){if(X.type===this.type){if(this.expr.length!==X.expr.length)return!1;for(let ye=0,Ce=this.expr.length;ye<Ce;ye++)if(!this.expr[ye].equals(X.expr[ye]))return!1;return!0}return!1}substituteConstants(){let X=p(this.expr);return X===this.expr?this:ne.create(X,this.negated,!1)}evaluate(X){for(let ye=0,Ce=this.expr.length;ye<Ce;ye++)if(this.expr[ye].evaluate(X))return!0;return!1}static _normalizeArr(X,ye,Ce){let Ee=[],Ae=!1;if(X){for(let Fe=0,_e=X.length;Fe<_e;Fe++){let te=X[Fe];if(te)if(te.type!==0){if(te.type===1)return $.INSTANCE;te.type!==9?Ee.push(te):Ee=Ee.concat(te.expr)}else Ae=!0}if(Ee.length===0&&Ae)return O.INSTANCE;Ee.sort(R)}if(Ee.length!==0){if(Ee.length===1)return Ee[0];for(let Fe=1;Fe<Ee.length;Fe++)Ee[Fe-1].equals(Ee[Fe])&&(Ee.splice(Fe,1),Fe--);if(Ee.length===1)return Ee[0];if(Ce){for(let Fe=0;Fe<Ee.length;Fe++)for(let _e=Fe+1;_e<Ee.length;_e++)if(Ee[Fe].negate().equals(Ee[_e]))return $.INSTANCE;if(Ee.length===1)return Ee[0]}return new ne(Ee,ye)}}serialize(){return this.expr.map(X=>X.serialize()).join(" || ")}keys(){let X=[];for(let ye of this.expr)X.push(...ye.keys());return X}negate(){if(!this.negated){let X=[];for(let ye of this.expr)X.push(ye.negate());for(;X.length>1;){let ye=X.shift(),Ce=X.shift(),Ee=[];for(let Ae of ue(ye))for(let Fe of ue(Ce))Ee.push(re.create([Ae,Fe],null,!1));X.unshift(ne.create(Ee,null,!1))}this.negated=ne.create(X,this,!0)}return this.negated}}class ie extends N{static all(){return ie._info.values()}constructor(X,ye,Ce){super(X,null),this._defaultValue=ye,typeof Ce=="object"?ie._info.push(Object.assign(Object.assign({},Ce),{key:X})):Ce!==!0&&ie._info.push({key:X,description:Ce,type:ye!=null?typeof ye:void 0})}bindTo(X){return X.createKey(this.key,this._defaultValue)}getValue(X){return X.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(X){return T.create(this.key,X)}}ie._info=[];let se=(0,f.yh)("contextKeyService");function ce(ve,X){return ve<X?-1:ve>X?1:0}function be(ve,X,ye,Ce){return ve<ye?-1:ve>ye?1:X<Ce?-1:X>Ce?1:0}function de(ve,X){if(ve.type===0||X.type===1)return!0;if(ve.type===9)return X.type===9&&U(ve.expr,X.expr);if(X.type===9){for(let ye of X.expr)if(de(ve,ye))return!0;return!1}if(ve.type===6){if(X.type===6)return U(X.expr,ve.expr);for(let ye of ve.expr)if(de(ye,X))return!0;return!1}return ve.equals(X)}function U(ve,X){let ye=0,Ce=0;for(;ye<ve.length&&Ce<X.length;){let Ee=ve[ye].cmp(X[Ce]);if(Ee<0)return!1;Ee===0&&ye++,Ce++}return ye===ve.length}function ue(ve){return ve.type===9?ve.expr:[ve]}},9282:(ut,Ie,t)=>{"use strict";t.d(Ie,{cv:()=>I,d0:()=>_});var m=t(1432),B=t(3580),u=t(3983);new u.uy("isMac",m.dz,(0,B.NC)("isMac","Whether the operating system is macOS")),new u.uy("isLinux",m.IJ,(0,B.NC)("isLinux","Whether the operating system is Linux"));let I=new u.uy("isWindows",m.ED,(0,B.NC)("isWindows","Whether the operating system is Windows")),_=(new u.uy("isWeb",m.$L,(0,B.NC)("isWeb","Whether the platform is a web browser")),new u.uy("isMacNative",m.dz&&!m.$L,(0,B.NC)("isMacNative","Whether the operating system is macOS on a non-browser platform")),new u.uy("isIOS",m.gn,(0,B.NC)("isIOS","Whether the operating system is iOS")),new u.uy("isMobile",m.tq,(0,B.NC)("isMobile","Whether the platform is a mobile web browser")),new u.uy("isDevelopment",!1,!0),new u.uy("productQualityType","",(0,B.NC)("productQualityType","Quality type of VS Code")),"inputFocus");new u.uy(_,!1,(0,B.NC)("inputFocus","Whether keyboard focus is inside an input box"))},5606:(ut,Ie,t)=>{"use strict";t.d(Ie,{i:()=>u,u:()=>B});var m=t(2065);let B=(0,m.yh)("contextViewService"),u=(0,m.yh)("contextMenuService")},8820:(ut,Ie,t)=>{"use strict";t.d(Ie,{S:()=>m});let m=(0,t(2065).yh)("dialogService")},6021:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ej:()=>d,GR:()=>v,Km:()=>x});var m=t(3547),B=t(3702),u=t(3897),I=t(666),_=t(988),A=t(9872);let x={EDITORS:"CodeEditors",FILES:"CodeFiles"};function v(o){var h;let r=[];if(o.dataTransfer&&o.dataTransfer.types.length>0){let b=o.dataTransfer.getData(x.EDITORS);if(b)try{r.push(...(0,u.Q)(b))}catch(w){}else try{let w=o.dataTransfer.getData(m.g.RESOURCES);r.push(...function(E){let D=[];if(E){let L=JSON.parse(E);for(let k of L)if(k.indexOf(":")>0){let{selection:R,uri:O}=(0,_.xI)(I.o.parse(k));D.push({resource:O,options:{selection:R}})}}return D}(w))}catch(w){}if(!((h=o.dataTransfer)===null||h===void 0)&&h.files)for(let w=0;w<o.dataTransfer.files.length;w++){let E=o.dataTransfer.files[w];if(E&&E.path)try{r.push({resource:I.o.file(E.path),isExternal:!0,allowWorkspaceOpen:!0})}catch(D){}}let l=o.dataTransfer.getData(x.FILES);if(l)try{let w=JSON.parse(l);for(let E of w)r.push({resource:I.o.file(E),isExternal:!0,allowWorkspaceOpen:!0})}catch(w){}let a=A.B.as(f.DragAndDropContribution).getAll();for(let w of a){let E=o.dataTransfer.getData(w.dataFormatKey);if(E)try{r.push(...w.getEditorInputs(E))}catch(D){}}}let i=[],c=new B.Y9;for(let b of r)b.resource?c.has(b.resource)||(i.push(b),c.set(b.resource,!0)):i.push(b);return i}let f={DragAndDropContribution:"workbench.contributions.dragAndDrop"};A.B.add(f.DragAndDropContribution,new class{constructor(){this._contributions=new Map}getAll(){return this._contributions.values()}});class d{constructor(){}static getInstance(){return d.INSTANCE}hasData(h){return h&&h===this.proto}getData(h){if(this.hasData(h))return this.data}}d.INSTANCE=new d},2980:(ut,Ie,t)=>{"use strict";t.d(Ie,{Yb:()=>O,Nq:()=>$,iX:()=>a});var m=t(3070),B=t(5321),u=t(2900),I=t(7927),_=t(3794),A=t(3046),x=t(4669),v=t(3580);let f=v.NC("defaultLabel","input"),d=v.NC("label.preserveCaseToggle","Preserve Case");class o extends u.Z{constructor(T){super({icon:A.l.preserveCase,title:d+T.appendTitle,isChecked:T.isChecked,inputActiveOptionBorder:T.inputActiveOptionBorder,inputActiveOptionForeground:T.inputActiveOptionForeground,inputActiveOptionBackground:T.inputActiveOptionBackground})}}class h extends _.${constructor(T,C,W,K){super(),this._showOptionButtons=W,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new x.Q5),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new x.Q5),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new x.Q5),this._onInput=this._register(new x.Q5),this._onKeyUp=this._register(new x.Q5),this._onPreserveCaseKeyDown=this._register(new x.Q5),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=C,this.placeholder=K.placeholder||"",this.validation=K.validation,this.label=K.label||f;let j=K.appendPreserveCaseLabel||"",F=K.history||[],H=!!K.flexibleHeight,z=!!K.flexibleWidth,J=K.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new I.pG(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:F,showHistoryHint:K.showHistoryHint,flexibleHeight:H,flexibleWidth:z,flexibleMaxHeight:J,inputBoxStyles:K.inputBoxStyles})),this.preserveCase=this._register(new o(Object.assign({appendTitle:j,isChecked:!1},K.toggleStyles))),this._register(this.preserveCase.onChange(q=>{this._onDidOptionChange.fire(q),!q&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(q=>{this._onPreserveCaseKeyDown.fire(q)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let oe=[this.preserveCase.domNode];this.onkeydown(this.domNode,q=>{if(q.equals(15)||q.equals(17)||q.equals(9)){let p=oe.indexOf(document.activeElement);if(p>=0){let re=-1;q.equals(17)?re=(p+1)%oe.length:q.equals(15)&&(re=p===0?oe.length-1:p-1),q.equals(9)?(oe[p].blur(),this.inputBox.focus()):re>=0&&oe[re].focus(),B.zB.stop(q,!0)}}});let fe=document.createElement("div");fe.className="controls",fe.style.display=this._showOptionButtons?"block":"none",fe.appendChild(this.preserveCase.domNode),this.domNode.appendChild(fe),T==null||T.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,q=>this._onKeyDown.fire(q)),this.onkeyup(this.inputBox.inputElement,q=>this._onKeyUp.fire(q)),this.oninput(this.inputBox.inputElement,q=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,q=>this._onMouseDown.fire(q))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(T){T?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(T){this.preserveCase.checked=T}focusOnPreserve(){this.preserveCase.focus()}validate(){var T;(T=this.inputBox)===null||T===void 0||T.validate()}set width(T){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=T+"px"}dispose(){super.dispose()}}var r=t(3983),i=t(9989),c=t(5976),b=function(N,T,C,W){var K,j=arguments.length,F=j<3?T:W===null?W=Object.getOwnPropertyDescriptor(T,C):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(N,T,C,W);else for(var H=N.length-1;H>=0;H--)(K=N[H])&&(F=(j<3?K(F):j>3?K(T,C,F):K(T,C))||F);return j>3&&F&&Object.defineProperty(T,C,F),F},l=function(N,T){return function(C,W){T(C,W,N)}};let a=new r.uy("suggestWidgetVisible",!1,(0,v.NC)("suggestWidgetVisible","Whether suggestion are visible")),w="historyNavigationWidgetFocus",E="historyNavigationForwardsEnabled",D="historyNavigationBackwardsEnabled",L,k=[];function R(N,T){if(k.includes(T))throw new Error("Cannot register the same widget multiple times");k.push(T);let C=new c.SL,W=new r.uy(w,!1).bindTo(N),K=new r.uy(E,!0).bindTo(N),j=new r.uy(D,!0).bindTo(N),F=()=>{W.set(!0),L=T},H=()=>{W.set(!1),L===T&&(L=void 0)};return T.element===document.activeElement&&F(),C.add(T.onDidFocus(()=>F())),C.add(T.onDidBlur(()=>H())),C.add((0,c.OF)(()=>{k.splice(k.indexOf(T),1),H()})),{historyNavigationForwardsEnablement:K,historyNavigationBackwardsEnablement:j,dispose(){C.dispose()}}}let O=class extends m.V{constructor(N,T,C,W){super(N,T,C);let K=this._register(W.createScoped(this.inputBox.element));this._register(R(K,this.inputBox))}};O=b([l(3,r.i6)],O);let $=class extends h{constructor(N,T,C,W,K=!1){super(N,T,K,C);let j=this._register(W.createScoped(this.inputBox.element));this._register(R(j,this.inputBox))}};$=b([l(3,r.i6)],$),i.W.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:r.Ao.and(r.Ao.has(w),r.Ao.equals(D,!0),a.isEqualTo(!1)),primary:16,secondary:[528],handler:N=>{L==null||L.showPreviousValue()}}),i.W.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:r.Ao.and(r.Ao.has(w),r.Ao.equals(E,!0),a.isEqualTo(!1)),primary:18,secondary:[530],handler:N=>{L==null||L.showNextValue()}})},7108:(ut,Ie,t)=>{"use strict";t.d(Ie,{M:()=>m});class m{constructor(u,I=[],_=!1){this.ctor=u,this.staticArguments=I,this.supportsDelayedInstantiation=_}}},5026:(ut,Ie,t)=>{"use strict";t.d(Ie,{d:()=>I,z:()=>u});var m=t(7108);let B=[];function u(_,A,x){A instanceof m.M||(A=new m.M(A,[],!!x)),B.push([_,A])}function I(){return B}},2065:(ut,Ie,t)=>{"use strict";var m;t.d(Ie,{I8:()=>m,TG:()=>B,yh:()=>u}),function(I){I.serviceIds=new Map,I.DI_TARGET="$di$target",I.DI_DEPENDENCIES="$di$dependencies",I.getServiceDependencies=function(_){return _[I.DI_DEPENDENCIES]||[]}}(m||(m={}));let B=u("instantiationService");function u(I){if(m.serviceIds.has(I))return m.serviceIds.get(I);let _=function(A,x,v){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,d,o){d[m.DI_TARGET]===d?d[m.DI_DEPENDENCIES].push({id:f,index:o}):(d[m.DI_DEPENDENCIES]=[{id:f,index:o}],d[m.DI_TARGET]=d)})(_,A,v)};return _.toString=()=>I,m.serviceIds.set(I,_),_}},972:(ut,Ie,t)=>{"use strict";t.d(Ie,{y:()=>m});class m{constructor(...u){this._entries=new Map;for(let[I,_]of u)this.set(I,_)}set(u,I){let _=this._entries.get(u);return this._entries.set(u,I),_}get(u){return this._entries.get(u)}}},1294:(ut,Ie,t)=>{"use strict";t.d(Ie,{I:()=>u});var m=t(4669),B=t(9872);let u={JSONContribution:"base.contributions.json"},I=new class{constructor(){this._onDidChangeSchema=new m.Q5,this.schemasById={}}registerSchema(_,A){var x;this.schemasById[x=_,x.length>0&&x.charAt(x.length-1)==="#"?x.substring(0,x.length-1):x]=A,this._onDidChangeSchema.fire(_)}notifySchemaChanged(_){this._onDidChangeSchema.fire(_)}};B.B.add(u.JSONContribution,I)},1847:(ut,Ie,t)=>{"use strict";t.d(Ie,{d:()=>m});let m=(0,t(2065).yh)("keybindingService")},9989:(ut,Ie,t)=>{"use strict";t.d(Ie,{W:()=>v});var m=t(8313),B=t(1432),u=t(4565),I=t(9872),_=t(5976),A=t(1741);class x{constructor(){this._coreKeybindings=new A.S,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(o){if(B.OS===1){if(o&&o.win)return o.win}else if(B.OS===2){if(o&&o.mac)return o.mac}else if(o&&o.linux)return o.linux;return o}registerKeybindingRule(o){let h=x.bindToCurrentPlatform(o),r=new _.SL;if(h&&h.primary){let i=(0,m.Z9)(h.primary,B.OS);i&&r.add(this._registerDefaultKeybinding(i,o.id,o.args,o.weight,0,o.when))}if(h&&Array.isArray(h.secondary))for(let i=0,c=h.secondary.length;i<c;i++){let b=h.secondary[i],l=(0,m.Z9)(b,B.OS);l&&r.add(this._registerDefaultKeybinding(l,o.id,o.args,o.weight,-i-1,o.when))}return r}registerCommandAndKeybindingRule(o){return(0,_.F8)(this.registerKeybindingRule(o),u.P.registerCommand(o))}_registerDefaultKeybinding(o,h,r,i,c,b){let l=this._coreKeybindings.push({keybinding:o,command:h,commandArgs:r,when:b,weight1:i,weight2:c,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,(0,_.OF)(()=>{l(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(f)),this._cachedMergedKeybindings.slice(0)}}let v=new x;function f(d,o){if(d.weight1!==o.weight1)return d.weight1-o.weight1;if(d.command&&o.command){if(d.command<o.command)return-1;if(d.command>o.command)return 1}return d.weight2-o.weight2}I.B.add("platform.keybindingsRegistry",v)},4349:(ut,Ie,t)=>{"use strict";t.d(Ie,{e:()=>m});let m=(0,t(2065).yh)("labelService")},6763:(ut,Ie,t)=>{"use strict";t.d(Ie,{Lw:()=>fi,XN:()=>Si,ls:()=>un,ev:()=>ei,CQ:()=>Te,PS:()=>Re,uJ:()=>Ue});var m=t(5321),B=t(9488),u=t(1050),I=t(4669),_=t(5976),A=t(3799);class x{get templateId(){return this.renderer.templateId}constructor(he,Me){this.renderer=he,this.modelProvider=Me}renderTemplate(he){return{data:this.renderer.renderTemplate(he),disposable:_.JT.None}}renderElement(he,Me,nt,pt){var Ke;if((Ke=nt.disposable)===null||Ke===void 0||Ke.dispose(),!nt.data)return;let S=this.modelProvider();if(S.isResolved(he))return this.renderer.renderElement(S.get(he),he,nt.data,pt);let V=new u.A,Y=S.resolve(he,V.token);nt.disposable={dispose:()=>V.cancel()},this.renderer.renderPlaceholder(he,nt.data),Y.then(we=>this.renderer.renderElement(we,he,nt.data,pt))}disposeTemplate(he){he.disposable&&(he.disposable.dispose(),he.disposable=void 0),he.data&&(this.renderer.disposeTemplate(he.data),he.data=void 0)}}class v{constructor(he,Me){this.modelProvider=he,this.accessibilityProvider=Me}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(he){let Me=this.modelProvider();return Me.isResolved(he)?this.accessibilityProvider.getAriaLabel(Me.get(he)):null}}class f{constructor(he,Me,nt,pt,Ke={}){let S=()=>this.model,V=pt.map(Y=>new x(Y,S));this.list=new A.aV(he,Me,nt,V,function(Y,we){return Object.assign(Object.assign({},we),{accessibilityProvider:we.accessibilityProvider&&new v(Y,we.accessibilityProvider)})}(S,Ke))}updateOptions(he){this.list.updateOptions(he)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return I.ju.map(this.list.onMouseDblClick,({element:he,index:Me,browserEvent:nt})=>({element:he===void 0?void 0:this._model.get(he),index:Me,browserEvent:nt}))}get onPointer(){return I.ju.map(this.list.onPointer,({element:he,index:Me,browserEvent:nt})=>({element:he===void 0?void 0:this._model.get(he),index:Me,browserEvent:nt}))}get onDidChangeSelection(){return I.ju.map(this.list.onDidChangeSelection,({elements:he,indexes:Me,browserEvent:nt})=>({elements:he.map(pt=>this._model.get(pt)),indexes:Me,browserEvent:nt}))}get model(){return this._model}set model(he){this._model=he,this.list.splice(0,this.list.length,(0,B.w6)(he.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(he=>this.model.get(he))}style(he){this.list.style(he)}dispose(){this.list.dispose()}}var d=t(3937);class o{constructor(he,Me,nt){this.columns=he,this.getColumnSize=nt,this.templateId=o.TemplateId,this.renderedTemplates=new Set;let pt=new Map(Me.map(Ke=>[Ke.templateId,Ke]));this.renderers=[];for(let Ke of he){let S=pt.get(Ke.templateId);if(!S)throw new Error(`Table cell renderer for template id ${Ke.templateId} not found.`);this.renderers.push(S)}}renderTemplate(he){let Me=(0,m.R3)(he,(0,m.$)(".monaco-table-tr")),nt=[],pt=[];for(let S=0;S<this.columns.length;S++){let V=this.renderers[S],Y=(0,m.R3)(Me,(0,m.$)(".monaco-table-td",{"data-col-index":S}));Y.style.width=`${this.getColumnSize(S)}px`,nt.push(Y),pt.push(V.renderTemplate(Y))}let Ke={container:he,cellContainers:nt,cellTemplateData:pt};return this.renderedTemplates.add(Ke),Ke}renderElement(he,Me,nt,pt){for(let Ke=0;Ke<this.columns.length;Ke++){let S=this.columns[Ke].project(he);this.renderers[Ke].renderElement(S,Me,nt.cellTemplateData[Ke],pt)}}disposeElement(he,Me,nt,pt){for(let Ke=0;Ke<this.columns.length;Ke++){let S=this.renderers[Ke];if(S.disposeElement){let V=this.columns[Ke].project(he);S.disposeElement(V,Me,nt.cellTemplateData[Ke],pt)}}}disposeTemplate(he){for(let Me=0;Me<this.columns.length;Me++)this.renderers[Me].disposeTemplate(he.cellTemplateData[Me]);(0,m.PO)(he.container),this.renderedTemplates.delete(he)}layoutColumn(he,Me){for(let{cellContainers:nt}of this.renderedTemplates)nt[he].style.width=`${Me}px`}}o.TemplateId="row";class h{get minimumSize(){var he;return(he=this.column.minimumWidth)!==null&&he!==void 0?he:120}get maximumSize(){var he;return(he=this.column.maximumWidth)!==null&&he!==void 0?he:Number.POSITIVE_INFINITY}get onDidChange(){var he;return(he=this.column.onDidChangeWidthConstraints)!==null&&he!==void 0?he:I.ju.None}constructor(he,Me){this.column=he,this.index=Me,this._onDidLayout=new I.Q5,this.onDidLayout=this._onDidLayout.event,this.element=(0,m.$)(".monaco-table-th",{"data-col-index":Me,title:he.tooltip},he.label)}layout(he){this._onDidLayout.fire([this.index,he])}}class r{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}constructor(he,Me,nt,pt,Ke,S){this.virtualDelegate=nt,this.domId="table_id_"+ ++r.InstanceCount,this.disposables=new _.SL,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,m.R3)(Me,(0,m.$)(`.monaco-table.${this.domId}`));let V=pt.map((Oe,et)=>new h(Oe,et)),Y={size:V.reduce((Oe,et)=>Oe+et.column.weight,0),views:V.map(Oe=>({size:Oe.column.weight,view:Oe}))};this.splitview=this.disposables.add(new d.z(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:Y})),this.splitview.el.style.height=`${nt.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${nt.headerRowHeight}px`;let we=new o(pt,Ke,Oe=>this.splitview.getViewSize(Oe));var Ne;this.list=this.disposables.add(new A.aV(he,this.domNode,(Ne=nt,{getHeight:Oe=>Ne.getHeight(Oe),getTemplateId:()=>o.TemplateId}),[we],S)),I.ju.any(...V.map(Oe=>Oe.onDidLayout))(([Oe,et])=>we.layoutColumn(Oe,et),null,this.disposables),this.splitview.onDidSashReset(Oe=>{let et=pt.reduce((lt,_t)=>lt+_t.weight,0),at=pt[Oe].weight/et*this.cachedWidth;this.splitview.resizeView(Oe,at)},null,this.disposables),this.styleElement=(0,m.dS)(this.domNode),this.style(A.uZ)}updateOptions(he){this.list.updateOptions(he)}splice(he,Me,nt=[]){this.list.splice(he,Me,nt)}getHTMLElement(){return this.domNode}style(he){let Me=[];Me.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=Me.join(`
`),this.list.style(he)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}r.InstanceCount=0,t(4850);var i,c,b=t(9069),l=(t(317),t(3070),t(7927)),a=t(5707),w=t(2900);(function(St){St[St.Expanded=0]="Expanded",St[St.Collapsed=1]="Collapsed",St[St.PreserveOrExpanded=2]="PreserveOrExpanded",St[St.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(i||(i={})),function(St){St[St.Unknown=0]="Unknown",St[St.Twistie=1]="Twistie",St[St.Element=2]="Element",St[St.Filter=3]="Filter"}(c||(c={}));class E extends Error{constructor(he,Me){super(`TreeError [${he}] ${Me}`)}}class D{constructor(he){this.fn=he,this._map=new WeakMap}map(he){let Me=this._map.get(he);return Me||(Me=this.fn(he),this._map.set(he,Me)),Me}}var L=t(5393),k=t(5635),R=t(2484),O=t(3725);function $(St){return typeof St=="object"&&"visibility"in St&&"data"in St}function N(St){switch(St){case!0:return 1;case!1:return 0;default:return St}}function T(St){return typeof St.collapsible=="boolean"}class C{constructor(he,Me,nt,pt={}){this.user=he,this.list=Me,this.rootRef=[],this.eventBufferer=new I.E7,this._onDidChangeCollapseState=new I.Q5,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new I.Q5,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new I.Q5,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new L.vp(k.n),this.collapseByDefault=pt.collapseByDefault!==void 0&&pt.collapseByDefault,this.filter=pt.filter,this.autoExpandSingleChildren=pt.autoExpandSingleChildren!==void 0&&pt.autoExpandSingleChildren,this.root={parent:void 0,element:nt,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(he,Me,nt=O.$.empty(),pt={}){if(he.length===0)throw new E(this.user,"Invalid tree location");pt.diffIdentityProvider?this.spliceSmart(pt.diffIdentityProvider,he,Me,nt,pt):this.spliceSimple(he,Me,nt,pt)}spliceSmart(he,Me,nt,pt,Ke,S){var V;pt===void 0&&(pt=O.$.empty()),S===void 0&&(S=(V=Ke.diffDepth)!==null&&V!==void 0?V:0);let{parentNode:Y}=this.getParentNodeWithListIndex(Me);if(!Y.lastDiffIds)return this.spliceSimple(Me,nt,pt,Ke);let we=[...pt],Ne=Me[Me.length-1],Oe=new R.Hs({getElements:()=>Y.lastDiffIds},{getElements:()=>[...Y.children.slice(0,Ne),...we,...Y.children.slice(Ne+nt)].map(gt=>he.getId(gt.element).toString())}).ComputeDiff(!1);if(Oe.quitEarly)return Y.lastDiffIds=void 0,this.spliceSimple(Me,nt,we,Ke);let et=Me.slice(0,-1),at=(gt,Ft,Zt)=>{if(S>0)for(let ii=0;ii<Zt;ii++)gt--,Ft--,this.spliceSmart(he,[...et,gt,0],Number.MAX_SAFE_INTEGER,we[Ft].children,Ke,S-1)},lt=Math.min(Y.children.length,Ne+nt),_t=we.length;for(let gt of Oe.changes.sort((Ft,Zt)=>Zt.originalStart-Ft.originalStart))at(lt,_t,lt-(gt.originalStart+gt.originalLength)),lt=gt.originalStart,_t=gt.modifiedStart-Ne,this.spliceSimple([...et,lt],gt.originalLength,O.$.slice(we,_t,_t+gt.modifiedLength),Ke);at(lt,_t,lt)}spliceSimple(he,Me,nt=O.$.empty(),{onDidCreateNode:pt,onDidDeleteNode:Ke,diffIdentityProvider:S}){let{parentNode:V,listIndex:Y,revealed:we,visible:Ne}=this.getParentNodeWithListIndex(he),Oe=[],et=O.$.map(nt,xi=>this.createTreeNode(xi,V,V.visible?1:0,we,Oe,pt)),at=he[he.length-1],lt=V.children.length>0,_t=0;for(let xi=at;xi>=0&&xi<V.children.length;xi--){let bi=V.children[xi];if(bi.visible){_t=bi.visibleChildIndex;break}}let gt=[],Ft=0,Zt=0;for(let xi of et)gt.push(xi),Zt+=xi.renderNodeCount,xi.visible&&(xi.visibleChildIndex=_t+Ft++);let ii=(0,B.db)(V.children,at,Me,gt);S?V.lastDiffIds?(0,B.db)(V.lastDiffIds,at,Me,gt.map(xi=>S.getId(xi.element).toString())):V.lastDiffIds=V.children.map(xi=>S.getId(xi.element).toString()):V.lastDiffIds=void 0;let hi=0;for(let xi of ii)xi.visible&&hi++;if(hi!==0)for(let xi=at+gt.length;xi<V.children.length;xi++){let bi=V.children[xi];bi.visible&&(bi.visibleChildIndex-=hi)}if(V.visibleChildrenCount+=Ft-hi,we&&Ne){let xi=ii.reduce((bi,vn)=>bi+(vn.visible?vn.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(V,Zt-xi),this.list.splice(Y,xi,Oe)}if(ii.length>0&&Ke){let xi=bi=>{Ke(bi),bi.children.forEach(xi)};ii.forEach(xi)}this._onDidSplice.fire({insertedNodes:gt,deletedNodes:ii});let wi=V.children.length>0;lt!==wi&&this.setCollapsible(he.slice(0,-1),wi);let Ei=V;for(;Ei;){if(Ei.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}Ei=Ei.parent}}rerender(he){if(he.length===0)throw new E(this.user,"Invalid tree location");let{node:Me,listIndex:nt,revealed:pt}=this.getTreeNodeWithListIndex(he);Me.visible&&pt&&this.list.splice(nt,1,[Me])}has(he){return this.hasTreeNode(he)}getListIndex(he){let{listIndex:Me,visible:nt,revealed:pt}=this.getTreeNodeWithListIndex(he);return nt&&pt?Me:-1}getListRenderCount(he){return this.getTreeNode(he).renderNodeCount}isCollapsible(he){return this.getTreeNode(he).collapsible}setCollapsible(he,Me){let nt=this.getTreeNode(he);Me===void 0&&(Me=!nt.collapsible);let pt={collapsible:Me};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(he,pt))}isCollapsed(he){return this.getTreeNode(he).collapsed}setCollapsed(he,Me,nt){let pt=this.getTreeNode(he);Me===void 0&&(Me=!pt.collapsed);let Ke={collapsed:Me,recursive:nt||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(he,Ke))}_setCollapseState(he,Me){let{node:nt,listIndex:pt,revealed:Ke}=this.getTreeNodeWithListIndex(he),S=this._setListNodeCollapseState(nt,pt,Ke,Me);if(nt!==this.root&&this.autoExpandSingleChildren&&S&&!T(Me)&&nt.collapsible&&!nt.collapsed&&!Me.recursive){let V=-1;for(let Y=0;Y<nt.children.length;Y++)if(nt.children[Y].visible){if(V>-1){V=-1;break}V=Y}V>-1&&this._setCollapseState([...he,V],Me)}return S}_setListNodeCollapseState(he,Me,nt,pt){let Ke=this._setNodeCollapseState(he,pt,!1);if(!nt||!he.visible||!Ke)return Ke;let S=he.renderNodeCount,V=this.updateNodeAfterCollapseChange(he),Y=S-(Me===-1?0:1);return this.list.splice(Me+1,Y,V.slice(1)),Ke}_setNodeCollapseState(he,Me,nt){let pt;if(he===this.root?pt=!1:(T(Me)?(pt=he.collapsible!==Me.collapsible,he.collapsible=Me.collapsible):he.collapsible?(pt=he.collapsed!==Me.collapsed,he.collapsed=Me.collapsed):pt=!1,pt&&this._onDidChangeCollapseState.fire({node:he,deep:nt})),!T(Me)&&Me.recursive)for(let Ke of he.children)pt=this._setNodeCollapseState(Ke,Me,!0)||pt;return pt}expandTo(he){this.eventBufferer.bufferEvents(()=>{let Me=this.getTreeNode(he);for(;Me.parent;)Me=Me.parent,he=he.slice(0,he.length-1),Me.collapsed&&this._setCollapseState(he,{collapsed:!1,recursive:!1})})}refilter(){let he=this.root.renderNodeCount,Me=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,he,Me),this.refilterDelayer.cancel()}createTreeNode(he,Me,nt,pt,Ke,S){let V={parent:Me,element:he.element,children:[],depth:Me.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof he.collapsible=="boolean"?he.collapsible:he.collapsed!==void 0,collapsed:he.collapsed===void 0?this.collapseByDefault:he.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},Y=this._filterNode(V,nt);V.visibility=Y,pt&&Ke.push(V);let we=he.children||O.$.empty(),Ne=pt&&Y!==0&&!V.collapsed,Oe=0,et=1;for(let at of we){let lt=this.createTreeNode(at,V,Y,Ne,Ke,S);V.children.push(lt),et+=lt.renderNodeCount,lt.visible&&(lt.visibleChildIndex=Oe++)}return V.collapsible=V.collapsible||V.children.length>0,V.visibleChildrenCount=Oe,V.visible=Y===2?Oe>0:Y===1,V.visible?V.collapsed||(V.renderNodeCount=et):(V.renderNodeCount=0,pt&&Ke.pop()),S==null||S(V),V}updateNodeAfterCollapseChange(he){let Me=he.renderNodeCount,nt=[];return this._updateNodeAfterCollapseChange(he,nt),this._updateAncestorsRenderNodeCount(he.parent,nt.length-Me),nt}_updateNodeAfterCollapseChange(he,Me){if(he.visible===!1)return 0;if(Me.push(he),he.renderNodeCount=1,!he.collapsed)for(let nt of he.children)he.renderNodeCount+=this._updateNodeAfterCollapseChange(nt,Me);return this._onDidChangeRenderNodeCount.fire(he),he.renderNodeCount}updateNodeAfterFilterChange(he){let Me=he.renderNodeCount,nt=[];return this._updateNodeAfterFilterChange(he,he.visible?1:0,nt),this._updateAncestorsRenderNodeCount(he.parent,nt.length-Me),nt}_updateNodeAfterFilterChange(he,Me,nt,pt=!0){let Ke;if(he!==this.root){if(Ke=this._filterNode(he,Me),Ke===0)return he.visible=!1,he.renderNodeCount=0,!1;pt&&nt.push(he)}let S=nt.length;he.renderNodeCount=he===this.root?0:1;let V=!1;if(he.collapsed&&Ke===0)he.visibleChildrenCount=0;else{let Y=0;for(let we of he.children)V=this._updateNodeAfterFilterChange(we,Ke,nt,pt&&!he.collapsed)||V,we.visible&&(we.visibleChildIndex=Y++);he.visibleChildrenCount=Y}return he!==this.root&&(he.visible=Ke===2?V:Ke===1,he.visibility=Ke),he.visible?he.collapsed||(he.renderNodeCount+=nt.length-S):(he.renderNodeCount=0,pt&&nt.pop()),this._onDidChangeRenderNodeCount.fire(he),he.visible}_updateAncestorsRenderNodeCount(he,Me){if(Me!==0)for(;he;)he.renderNodeCount+=Me,this._onDidChangeRenderNodeCount.fire(he),he=he.parent}_filterNode(he,Me){let nt=this.filter?this.filter.filter(he.element,Me):1;return typeof nt=="boolean"?(he.filterData=void 0,nt?1:0):$(nt)?(he.filterData=nt.data,N(nt.visibility)):(he.filterData=void 0,N(nt))}hasTreeNode(he,Me=this.root){if(!he||he.length===0)return!0;let[nt,...pt]=he;return!(nt<0||nt>Me.children.length)&&this.hasTreeNode(pt,Me.children[nt])}getTreeNode(he,Me=this.root){if(!he||he.length===0)return Me;let[nt,...pt]=he;if(nt<0||nt>Me.children.length)throw new E(this.user,"Invalid tree location");return this.getTreeNode(pt,Me.children[nt])}getTreeNodeWithListIndex(he){if(he.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:Me,listIndex:nt,revealed:pt,visible:Ke}=this.getParentNodeWithListIndex(he),S=he[he.length-1];if(S<0||S>Me.children.length)throw new E(this.user,"Invalid tree location");let V=Me.children[S];return{node:V,listIndex:nt,revealed:pt,visible:Ke&&V.visible}}getParentNodeWithListIndex(he,Me=this.root,nt=0,pt=!0,Ke=!0){let[S,...V]=he;if(S<0||S>Me.children.length)throw new E(this.user,"Invalid tree location");for(let Y=0;Y<S;Y++)nt+=Me.children[Y].renderNodeCount;return pt=pt&&!Me.collapsed,Ke=Ke&&Me.visible,V.length===0?{parentNode:Me,listIndex:nt,revealed:pt,visible:Ke}:this.getParentNodeWithListIndex(V,Me.children[S],nt+1,pt,Ke)}getNode(he=[]){return this.getTreeNode(he)}getNodeLocation(he){let Me=[],nt=he;for(;nt.parent;)Me.push(nt.parent.children.indexOf(nt)),nt=nt.parent;return Me.reverse()}getParentNodeLocation(he){return he.length===0?void 0:he.length===1?[]:(0,B.JH)(he)[0]}getFirstElementChild(he){let Me=this.getTreeNode(he);if(Me.children.length!==0)return Me.children[0].element}}t(4741);var W=t(3046),K=t(5670);class j{constructor(){this.map=new Map}add(he,Me){let nt=this.map.get(he);nt||(nt=new Set,this.map.set(he,nt)),nt.add(Me)}delete(he,Me){let nt=this.map.get(he);nt&&(nt.delete(Me),nt.size===0&&this.map.delete(he))}forEach(he,Me){let nt=this.map.get(he);nt&&nt.forEach(Me)}}var F,H,z,J=t(5392),oe=t(9870),fe=t(8401),q=t(3580);class p extends a.kX{constructor(he){super(he.elements.map(Me=>Me.element)),this.data=he}}function re(St){return St instanceof a.kX?new p(St):St}class ne{constructor(he,Me){this.modelProvider=he,this.dnd=Me,this.autoExpandDisposable=_.JT.None}getDragURI(he){return this.dnd.getDragURI(he.element)}getDragLabel(he,Me){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(he.map(nt=>nt.element),Me)}onDragStart(he,Me){var nt,pt;(pt=(nt=this.dnd).onDragStart)===null||pt===void 0||pt.call(nt,re(he),Me)}onDragOver(he,Me,nt,pt,Ke=!0){let S=this.dnd.onDragOver(re(he),Me&&Me.element,nt,pt),V=this.autoExpandNode!==Me;if(V&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=Me),Me===void 0)return S;if(V&&typeof S!="boolean"&&S.autoExpand&&(this.autoExpandDisposable=(0,L.Vg)(()=>{let et=this.modelProvider(),at=et.getNodeLocation(Me);et.isCollapsed(at)&&et.setCollapsed(at,!1),this.autoExpandNode=void 0},500)),typeof S=="boolean"||!S.accept||S.bubble===void 0||S.feedback)return Ke?S:{accept:typeof S=="boolean"?S:S.accept,effect:typeof S=="boolean"?void 0:S.effect,feedback:[nt]};if(S.bubble===1){let et=this.modelProvider(),at=et.getNodeLocation(Me),lt=et.getParentNodeLocation(at),_t=et.getNode(lt),gt=lt&&et.getListIndex(lt);return this.onDragOver(he,_t,gt,pt,!1)}let Y=this.modelProvider(),we=Y.getNodeLocation(Me),Ne=Y.getListIndex(we),Oe=Y.getListRenderCount(we);return Object.assign(Object.assign({},S),{feedback:(0,B.w6)(Ne,Ne+Oe)})}drop(he,Me,nt,pt){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(re(he),Me&&Me.element,nt,pt)}onDragEnd(he){var Me,nt;(nt=(Me=this.dnd).onDragEnd)===null||nt===void 0||nt.call(Me,he)}}class ie{constructor(he){this.delegate=he}getHeight(he){return this.delegate.getHeight(he.element)}getTemplateId(he){return this.delegate.getTemplateId(he.element)}hasDynamicHeight(he){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(he.element)}setDynamicHeight(he,Me){var nt,pt;(pt=(nt=this.delegate).setDynamicHeight)===null||pt===void 0||pt.call(nt,he.element,Me)}}(function(St){St.None="none",St.OnHover="onHover",St.Always="always"})(F||(F={}));class se{get elements(){return this._elements}constructor(he,Me=[]){this._elements=Me,this.disposables=new _.SL,this.onDidChange=I.ju.forEach(he,nt=>this._elements=nt,this.disposables)}dispose(){this.disposables.dispose()}}class ce{constructor(he,Me,nt,pt,Ke,S={}){var V;this.renderer=he,this.modelProvider=Me,this.activeNodes=pt,this.renderedIndentGuides=Ke,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=ce.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=_.JT.None,this.disposables=new _.SL,this.templateId=he.templateId,this.updateOptions(S),I.ju.map(nt,Y=>Y.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(V=he.onDidChangeTwistieState)===null||V===void 0||V.call(he,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(he={}){if(he.indent!==void 0){let Me=(0,oe.uZ)(he.indent,0,40);if(Me!==this.indent){this.indent=Me;for(let[nt,pt]of this.renderedNodes)this.renderTreeElement(nt,pt)}}if(he.renderIndentGuides!==void 0){let Me=he.renderIndentGuides!==F.None;if(Me!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=Me;for(let[nt,pt]of this.renderedNodes)this._renderIndentGuides(nt,pt);if(this.indentGuidesDisposable.dispose(),Me){let nt=new _.SL;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,nt),this.indentGuidesDisposable=nt,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}he.hideTwistiesOfChildlessElements!==void 0&&(this.hideTwistiesOfChildlessElements=he.hideTwistiesOfChildlessElements)}renderTemplate(he){let Me=(0,m.R3)(he,(0,m.$)(".monaco-tl-row")),nt=(0,m.R3)(Me,(0,m.$)(".monaco-tl-indent")),pt=(0,m.R3)(Me,(0,m.$)(".monaco-tl-twistie")),Ke=(0,m.R3)(Me,(0,m.$)(".monaco-tl-contents")),S=this.renderer.renderTemplate(Ke);return{container:he,indent:nt,twistie:pt,indentGuidesDisposable:_.JT.None,templateData:S}}renderElement(he,Me,nt,pt){this.renderedNodes.set(he,nt),this.renderedElements.set(he.element,he),this.renderTreeElement(he,nt),this.renderer.renderElement(he,Me,nt.templateData,pt)}disposeElement(he,Me,nt,pt){var Ke,S;nt.indentGuidesDisposable.dispose(),(S=(Ke=this.renderer).disposeElement)===null||S===void 0||S.call(Ke,he,Me,nt.templateData,pt),typeof pt=="number"&&(this.renderedNodes.delete(he),this.renderedElements.delete(he.element))}disposeTemplate(he){this.renderer.disposeTemplate(he.templateData)}onDidChangeTwistieState(he){let Me=this.renderedElements.get(he);Me&&this.onDidChangeNodeTwistieState(Me)}onDidChangeNodeTwistieState(he){let Me=this.renderedNodes.get(he);Me&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(he,Me))}renderTreeElement(he,Me){let nt=ce.DefaultIndent+(he.depth-1)*this.indent;Me.twistie.style.paddingLeft=`${nt}px`,Me.indent.style.width=nt+this.indent-16+"px",he.collapsible?Me.container.setAttribute("aria-expanded",String(!he.collapsed)):Me.container.removeAttribute("aria-expanded"),Me.twistie.classList.remove(...K.k.asClassNameArray(W.l.treeItemExpanded));let pt=!1;this.renderer.renderTwistie&&(pt=this.renderer.renderTwistie(he.element,Me.twistie)),he.collapsible&&(!this.hideTwistiesOfChildlessElements||he.visibleChildrenCount>0)?(pt||Me.twistie.classList.add(...K.k.asClassNameArray(W.l.treeItemExpanded)),Me.twistie.classList.add("collapsible"),Me.twistie.classList.toggle("collapsed",he.collapsed)):Me.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(he,Me)}_renderIndentGuides(he,Me){if((0,m.PO)(Me.indent),Me.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let nt=new _.SL,pt=this.modelProvider();for(;;){let Ke=pt.getNodeLocation(he),S=pt.getParentNodeLocation(Ke);if(!S)break;let V=pt.getNode(S),Y=(0,m.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(V)&&Y.classList.add("active"),Me.indent.childElementCount===0?Me.indent.appendChild(Y):Me.indent.insertBefore(Y,Me.indent.firstElementChild),this.renderedIndentGuides.add(V,Y),nt.add((0,_.OF)(()=>this.renderedIndentGuides.delete(V,Y))),he=V}Me.indentGuidesDisposable=nt}_onDidChangeActiveNodes(he){if(!this.shouldRenderIndentGuides)return;let Me=new Set,nt=this.modelProvider();he.forEach(pt=>{let Ke=nt.getNodeLocation(pt);try{let S=nt.getParentNodeLocation(Ke);pt.collapsible&&pt.children.length>0&&!pt.collapsed?Me.add(pt):S&&Me.add(nt.getNode(S))}catch(S){}}),this.activeIndentNodes.forEach(pt=>{Me.has(pt)||this.renderedIndentGuides.forEach(pt,Ke=>Ke.classList.remove("active"))}),Me.forEach(pt=>{this.activeIndentNodes.has(pt)||this.renderedIndentGuides.forEach(pt,Ke=>Ke.classList.add("active"))}),this.activeIndentNodes=Me}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,_.B9)(this.disposables)}}ce.DefaultIndent=8;class be{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(he,Me,nt){this.tree=he,this.keyboardNavigationLabelProvider=Me,this._filter=nt,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new _.SL,he.onWillRefilter(this.reset,this,this.disposables)}filter(he,Me){let nt=1;if(this._filter){let S=this._filter.filter(he,Me);if(nt=typeof S=="boolean"?S?1:0:$(S)?N(S.visibility):S,nt===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:J.CL.Default,visibility:nt};let pt=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(he),Ke=Array.isArray(pt)?pt:[pt];for(let S of Ke){let V=S&&S.toString();if(V===void 0)return{data:J.CL.Default,visibility:nt};let Y;if(this.tree.findMatchType===z.Contiguous){let we=V.toLowerCase().indexOf(this._lowercasePattern);if(we>-1){Y=[Number.MAX_SAFE_INTEGER,0];for(let Ne=this._lowercasePattern.length;Ne>0;Ne--)Y.push(we+Ne-1)}}else Y=(0,J.EW)(this._pattern,this._lowercasePattern,0,V,V.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(Y)return this._matchCount++,Ke.length===1?{data:Y,visibility:nt}:{data:{label:V,score:Y},visibility:nt}}return this.tree.findMode===H.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(he):2:{data:J.CL.Default,visibility:nt}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,_.B9)(this.disposables)}}l.g4,w.D,function(St){St[St.Highlight=0]="Highlight",St[St.Filter=1]="Filter"}(H||(H={})),function(St){St[St.Fuzzy=0]="Fuzzy",St[St.Contiguous=1]="Contiguous"}(z||(z={}));class de{get pattern(){return this._pattern}get mode(){return this._mode}set mode(he){he!==this._mode&&(this._mode=he,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(he))}get matchType(){return this._matchType}set matchType(he){he!==this._matchType&&(this._matchType=he,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(he))}constructor(he,Me,nt,pt,Ke,S={}){var V,Y;this.tree=he,this.view=nt,this.filter=pt,this.contextViewProvider=Ke,this.options=S,this._pattern="",this.width=0,this._onDidChangeMode=new I.Q5,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new I.Q5,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new I.Q5,this._onDidChangeOpenState=new I.Q5,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new _.SL,this.disposables=new _.SL,this._mode=(V=he.options.defaultFindMode)!==null&&V!==void 0?V:H.Highlight,this._matchType=(Y=he.options.defaultFindMatchType)!==null&&Y!==void 0?Y:z.Fuzzy,Me.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(he={}){he.defaultFindMode!==void 0&&(this.mode=he.defaultFindMode),he.defaultFindMatchType!==void 0&&(this.matchType=he.defaultFindMatchType)}onDidSpliceModel(){this.widget&&this.pattern.length!==0&&(this.tree.refilter(),this.render())}render(){var he,Me,nt,pt;let Ke=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&Ke?(he=this.tree.options.showNotFoundMessage)===null||he===void 0||he?(Me=this.widget)===null||Me===void 0||Me.showMessage({type:2,content:(0,q.NC)("not found","No elements found.")}):(nt=this.widget)===null||nt===void 0||nt.showMessage({type:2}):(pt=this.widget)===null||pt===void 0||pt.clearMessage()}shouldAllowFocus(he){return!this.widget||!this.pattern||this._mode===H.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1||!J.CL.isDefault(he.filterData)}layout(he){var Me;this.width=he,(Me=this.widget)===null||Me===void 0||Me.layout(he)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function U(St){let he=c.Unknown;return(0,m.uU)(St.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?he=c.Twistie:(0,m.uU)(St.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?he=c.Element:(0,m.uU)(St.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(he=c.Filter),{browserEvent:St.browserEvent,element:St.element?St.element.element:null,target:he}}function ue(St,he){he(St),St.children.forEach(Me=>ue(Me,he))}class ve{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(he,Me){this.getFirstViewElementWithTrait=he,this.identityProvider=Me,this.nodes=[],this._onDidChange=new I.Q5,this.onDidChange=this._onDidChange.event}set(he,Me){!(Me!=null&&Me.__forceEvent)&&(0,B.fS)(this.nodes,he)||this._set(he,!1,Me)}_set(he,Me,nt){if(this.nodes=[...he],this.elements=void 0,this._nodeSet=void 0,!Me){let pt=this;this._onDidChange.fire({get elements(){return pt.get()},browserEvent:nt})}}get(){return this.elements||(this.elements=this.nodes.map(he=>he.element)),[...this.elements]}getNodes(){return this.nodes}has(he){return this.nodeSet.has(he)}onDidModelSplice({insertedNodes:he,deletedNodes:Me}){if(!this.identityProvider){let Y=this.createNodeSet(),we=Ne=>Y.delete(Ne);return Me.forEach(Ne=>ue(Ne,we)),void this.set([...Y.values()])}let nt=new Set,pt=Y=>nt.add(this.identityProvider.getId(Y.element).toString());Me.forEach(Y=>ue(Y,pt));let Ke=new Map,S=Y=>Ke.set(this.identityProvider.getId(Y.element).toString(),Y);he.forEach(Y=>ue(Y,S));let V=[];for(let Y of this.nodes){let we=this.identityProvider.getId(Y.element).toString();if(nt.has(we)){let Ne=Ke.get(we);Ne&&Ne.visible&&V.push(Ne)}else V.push(Y)}if(this.nodes.length>0&&V.length===0){let Y=this.getFirstViewElementWithTrait();Y&&V.push(Y)}this._set(V,!0)}createNodeSet(){let he=new Set;for(let Me of this.nodes)he.add(Me);return he}}class X extends A.sx{constructor(he,Me){super(he),this.tree=Me}onViewPointer(he){if((0,A.iK)(he.browserEvent.target)||(0,A.cK)(he.browserEvent.target)||(0,A.hD)(he.browserEvent.target))return;let Me=he.element;if(!Me)return super.onViewPointer(he);if(this.isSelectionRangeChangeEvent(he)||this.isSelectionSingleChangeEvent(he))return super.onViewPointer(he);let nt=he.browserEvent.target,pt=nt.classList.contains("monaco-tl-twistie")||nt.classList.contains("monaco-icon-label")&&nt.classList.contains("folder-icon")&&he.browserEvent.offsetX<16,Ke=!1;if(Ke=typeof this.tree.expandOnlyOnTwistieClick=="function"?this.tree.expandOnlyOnTwistieClick(Me.element):!!this.tree.expandOnlyOnTwistieClick,Ke&&!pt&&he.browserEvent.detail!==2)return super.onViewPointer(he);if(!this.tree.expandOnDoubleClick&&he.browserEvent.detail===2)return super.onViewPointer(he);if(Me.collapsible){let S=this.tree.getNodeLocation(Me),V=he.browserEvent.altKey;if(this.tree.setFocus([S]),this.tree.toggleCollapsed(S,V),Ke&&pt)return}super.onViewPointer(he)}onDoubleClick(he){!he.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&super.onDoubleClick(he)}}class ye extends A.aV{constructor(he,Me,nt,pt,Ke,S,V,Y){super(he,Me,nt,pt,Y),this.focusTrait=Ke,this.selectionTrait=S,this.anchorTrait=V}createMouseController(he){return new X(this,he.tree)}splice(he,Me,nt=[]){if(super.splice(he,Me,nt),nt.length===0)return;let pt=[],Ke=[],S;nt.forEach((V,Y)=>{this.focusTrait.has(V)&&pt.push(he+Y),this.selectionTrait.has(V)&&Ke.push(he+Y),this.anchorTrait.has(V)&&(S=he+Y)}),pt.length>0&&super.setFocus((0,B.EB)([...super.getFocus(),...pt])),Ke.length>0&&super.setSelection((0,B.EB)([...super.getSelection(),...Ke])),typeof S=="number"&&super.setAnchor(S)}setFocus(he,Me,nt=!1){super.setFocus(he,Me),nt||this.focusTrait.set(he.map(pt=>this.element(pt)),Me)}setSelection(he,Me,nt=!1){super.setSelection(he,Me),nt||this.selectionTrait.set(he.map(pt=>this.element(pt)),Me)}setAnchor(he,Me=!1){super.setAnchor(he),Me||(he===void 0?this.anchorTrait.set([]):this.anchorTrait.set([this.element(he)]))}}class Ce{get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return I.ju.filter(I.ju.map(this.view.onMouseDblClick,U),he=>he.target!==c.Filter)}get onPointer(){return I.ju.map(this.view.onPointer,U)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return I.ju.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var he,Me;return(Me=(he=this.findController)===null||he===void 0?void 0:he.mode)!==null&&Me!==void 0?Me:H.Highlight}set findMode(he){this.findController&&(this.findController.mode=he)}get findMatchType(){var he,Me;return(Me=(he=this.findController)===null||he===void 0?void 0:he.matchType)!==null&&Me!==void 0?Me:z.Fuzzy}set findMatchType(he){this.findController&&(this.findController.matchType=he)}get expandOnDoubleClick(){return this._options.expandOnDoubleClick===void 0||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return this._options.expandOnlyOnTwistieClick===void 0||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(he,Me,nt,pt,Ke={}){var S;this._user=he,this._options=Ke,this.eventBufferer=new I.E7,this.onDidChangeFindOpenState=I.ju.None,this.disposables=new _.SL,this._onWillRefilter=new I.Q5,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new I.Q5;let V=new ie(nt),Y=new I.ZD,we=new I.ZD,Ne=this.disposables.add(new se(we.event)),Oe=new j;this.renderers=pt.map(gt=>new ce(gt,()=>this.model,Y.event,Ne,Oe,Ke));for(let gt of this.renderers)this.disposables.add(gt);let et;var at,lt;Ke.keyboardNavigationLabelProvider&&(et=new be(this,Ke.keyboardNavigationLabelProvider,Ke.filter),Ke=Object.assign(Object.assign({},Ke),{filter:et}),this.disposables.add(et)),this.focus=new ve(()=>this.view.getFocusedElements()[0],Ke.identityProvider),this.selection=new ve(()=>this.view.getSelectedElements()[0],Ke.identityProvider),this.anchor=new ve(()=>this.view.getAnchorElement(),Ke.identityProvider),this.view=new ye(he,Me,V,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},(at=()=>this.model,(lt=Ke)&&Object.assign(Object.assign({},lt),{identityProvider:lt.identityProvider&&{getId:gt=>lt.identityProvider.getId(gt.element)},dnd:lt.dnd&&new ne(at,lt.dnd),multipleSelectionController:lt.multipleSelectionController&&{isSelectionSingleChangeEvent:gt=>lt.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},gt),{element:gt.element})),isSelectionRangeChangeEvent:gt=>lt.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},gt),{element:gt.element}))},accessibilityProvider:lt.accessibilityProvider&&Object.assign(Object.assign({},lt.accessibilityProvider),{getSetSize(gt){let Ft=at(),Zt=Ft.getNodeLocation(gt),ii=Ft.getParentNodeLocation(Zt);return Ft.getNode(ii).visibleChildrenCount},getPosInSet:gt=>gt.visibleChildIndex+1,isChecked:lt.accessibilityProvider&&lt.accessibilityProvider.isChecked?gt=>lt.accessibilityProvider.isChecked(gt.element):void 0,getRole:lt.accessibilityProvider&&lt.accessibilityProvider.getRole?gt=>lt.accessibilityProvider.getRole(gt.element):()=>"treeitem",getAriaLabel:gt=>lt.accessibilityProvider.getAriaLabel(gt.element),getWidgetAriaLabel:()=>lt.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:lt.accessibilityProvider&&lt.accessibilityProvider.getWidgetRole?()=>lt.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:lt.accessibilityProvider&&lt.accessibilityProvider.getAriaLevel?gt=>lt.accessibilityProvider.getAriaLevel(gt.element):gt=>gt.depth,getActiveDescendantId:lt.accessibilityProvider.getActiveDescendantId&&(gt=>lt.accessibilityProvider.getActiveDescendantId(gt.element))}),keyboardNavigationLabelProvider:lt.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},lt.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:gt=>lt.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(gt.element)})}))),{tree:this})),this.model=this.createModel(he,this.view,Ke),Y.input=this.model.onDidChangeCollapseState;let _t=I.ju.forEach(this.model.onDidSplice,gt=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(gt),this.selection.onDidModelSplice(gt)})},this.disposables);if(_t(()=>null,null,this.disposables),we.input=I.ju.chain(I.ju.any(_t,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{let gt=new Set;for(let Ft of this.focus.getNodes())gt.add(Ft);for(let Ft of this.selection.getNodes())gt.add(Ft);return[...gt.values()]}).event,Ke.keyboardSupport!==!1){let gt=I.ju.chain(this.view.onKeyDown).filter(Ft=>!(0,A.cK)(Ft.target)).map(Ft=>new b.y(Ft));gt.filter(Ft=>Ft.keyCode===15).on(this.onLeftArrow,this,this.disposables),gt.filter(Ft=>Ft.keyCode===17).on(this.onRightArrow,this,this.disposables),gt.filter(Ft=>Ft.keyCode===10).on(this.onSpace,this,this.disposables)}if(((S=Ke.findWidgetEnabled)===null||S===void 0||S)&&Ke.keyboardNavigationLabelProvider&&Ke.contextViewProvider){let gt=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new de(this,this.model,this.view,et,Ke.contextViewProvider,gt),this.focusNavigationFilter=Ft=>this.findController.shouldAllowFocus(Ft),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=I.ju.None,this.onDidChangeFindMatchType=I.ju.None;this.styleElement=(0,m.dS)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===F.Always)}updateOptions(he={}){var Me;this._options=Object.assign(Object.assign({},this._options),he);for(let nt of this.renderers)nt.updateOptions(he);this.view.updateOptions(this._options),(Me=this.findController)===null||Me===void 0||Me.updateOptions(he),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===F.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(he){this.view.scrollTop=he}domFocus(){this.view.domFocus()}layout(he,Me){var nt;this.view.layout(he,Me),(0,fe.hj)(Me)&&((nt=this.findController)===null||nt===void 0||nt.layout(Me))}style(he){let Me=`.${this.view.domId}`,nt=[];he.treeIndentGuidesStroke&&(nt.push(`.monaco-list${Me}:hover .monaco-tl-indent > .indent-guide, .monaco-list${Me}.always .monaco-tl-indent > .indent-guide  { border-color: ${he.treeInactiveIndentGuidesStroke}; }`),nt.push(`.monaco-list${Me} .monaco-tl-indent > .indent-guide.active { border-color: ${he.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=nt.join(`
`),this.view.style(he)}getParentElement(he){let Me=this.model.getParentNodeLocation(he);return this.model.getNode(Me).element}getFirstElementChild(he){return this.model.getFirstElementChild(he)}getNode(he){return this.model.getNode(he)}getNodeLocation(he){return this.model.getNodeLocation(he)}collapse(he,Me=!1){return this.model.setCollapsed(he,!0,Me)}expand(he,Me=!1){return this.model.setCollapsed(he,!1,Me)}toggleCollapsed(he,Me=!1){return this.model.setCollapsed(he,void 0,Me)}isCollapsible(he){return this.model.isCollapsible(he)}setCollapsible(he,Me){return this.model.setCollapsible(he,Me)}isCollapsed(he){return this.model.isCollapsed(he)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(he,Me){let nt=he.map(Ke=>this.model.getNode(Ke));this.selection.set(nt,Me);let pt=he.map(Ke=>this.model.getListIndex(Ke)).filter(Ke=>Ke>-1);this.view.setSelection(pt,Me,!0)}getSelection(){return this.selection.get()}setFocus(he,Me){let nt=he.map(Ke=>this.model.getNode(Ke));this.focus.set(nt,Me);let pt=he.map(Ke=>this.model.getListIndex(Ke)).filter(Ke=>Ke>-1);this.view.setFocus(pt,Me,!0)}getFocus(){return this.focus.get()}reveal(he,Me){this.model.expandTo(he);let nt=this.model.getListIndex(he);nt!==-1&&this.view.reveal(nt,Me)}onLeftArrow(he){he.preventDefault(),he.stopPropagation();let Me=this.view.getFocusedElements();if(Me.length===0)return;let nt=Me[0],pt=this.model.getNodeLocation(nt);if(!this.model.setCollapsed(pt,!0)){let Ke=this.model.getParentNodeLocation(pt);if(!Ke)return;let S=this.model.getListIndex(Ke);this.view.reveal(S),this.view.setFocus([S])}}onRightArrow(he){he.preventDefault(),he.stopPropagation();let Me=this.view.getFocusedElements();if(Me.length===0)return;let nt=Me[0],pt=this.model.getNodeLocation(nt);if(!this.model.setCollapsed(pt,!1)){if(!nt.children.some(V=>V.visible))return;let[Ke]=this.view.getFocus(),S=Ke+1;this.view.reveal(S),this.view.setFocus([S])}}onSpace(he){he.preventDefault(),he.stopPropagation();let Me=this.view.getFocusedElements();if(Me.length===0)return;let nt=Me[0],pt=this.model.getNodeLocation(nt),Ke=he.browserEvent.altKey;this.model.setCollapsed(pt,void 0,Ke)}dispose(){(0,_.B9)(this.disposables),this.view.dispose()}}class Ee{constructor(he,Me,nt={}){this.user=he,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new C(he,Me,null,nt),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,nt.sorter&&(this.sorter={compare:(pt,Ke)=>nt.sorter.compare(pt.element,Ke.element)}),this.identityProvider=nt.identityProvider}setChildren(he,Me=O.$.empty(),nt={}){let pt=this.getElementLocation(he);this._setChildren(pt,this.preserveCollapseState(Me),nt)}_setChildren(he,Me=O.$.empty(),nt){let pt=new Set,Ke=new Set;this.model.splice([...he,0],Number.MAX_VALUE,Me,Object.assign(Object.assign({},nt),{onDidCreateNode:S=>{var V;if(S.element===null)return;let Y=S;if(pt.add(Y.element),this.nodes.set(Y.element,Y),this.identityProvider){let we=this.identityProvider.getId(Y.element).toString();Ke.add(we),this.nodesByIdentity.set(we,Y)}(V=nt.onDidCreateNode)===null||V===void 0||V.call(nt,Y)},onDidDeleteNode:S=>{var V;if(S.element===null)return;let Y=S;if(pt.has(Y.element)||this.nodes.delete(Y.element),this.identityProvider){let we=this.identityProvider.getId(Y.element).toString();Ke.has(we)||this.nodesByIdentity.delete(we)}(V=nt.onDidDeleteNode)===null||V===void 0||V.call(nt,Y)}}))}preserveCollapseState(he=O.$.empty()){return this.sorter&&(he=[...he].sort(this.sorter.compare.bind(this.sorter))),O.$.map(he,Me=>{let nt=this.nodes.get(Me.element);if(!nt&&this.identityProvider){let S=this.identityProvider.getId(Me.element).toString();nt=this.nodesByIdentity.get(S)}if(!nt){let S;return S=Me.collapsed===void 0?void 0:Me.collapsed===i.Collapsed||Me.collapsed===i.PreserveOrCollapsed||Me.collapsed!==i.Expanded&&Me.collapsed!==i.PreserveOrExpanded&&!!Me.collapsed,Object.assign(Object.assign({},Me),{children:this.preserveCollapseState(Me.children),collapsed:S})}let pt=typeof Me.collapsible=="boolean"?Me.collapsible:nt.collapsible,Ke;return Ke=Me.collapsed===void 0||Me.collapsed===i.PreserveOrCollapsed||Me.collapsed===i.PreserveOrExpanded?nt.collapsed:Me.collapsed===i.Collapsed||Me.collapsed!==i.Expanded&&!!Me.collapsed,Object.assign(Object.assign({},Me),{collapsible:pt,collapsed:Ke,children:this.preserveCollapseState(Me.children)})})}rerender(he){let Me=this.getElementLocation(he);this.model.rerender(Me)}getFirstElementChild(he=null){let Me=this.getElementLocation(he);return this.model.getFirstElementChild(Me)}has(he){return this.nodes.has(he)}getListIndex(he){let Me=this.getElementLocation(he);return this.model.getListIndex(Me)}getListRenderCount(he){let Me=this.getElementLocation(he);return this.model.getListRenderCount(Me)}isCollapsible(he){let Me=this.getElementLocation(he);return this.model.isCollapsible(Me)}setCollapsible(he,Me){let nt=this.getElementLocation(he);return this.model.setCollapsible(nt,Me)}isCollapsed(he){let Me=this.getElementLocation(he);return this.model.isCollapsed(Me)}setCollapsed(he,Me,nt){let pt=this.getElementLocation(he);return this.model.setCollapsed(pt,Me,nt)}expandTo(he){let Me=this.getElementLocation(he);this.model.expandTo(Me)}refilter(){this.model.refilter()}getNode(he=null){if(he===null)return this.model.getNode(this.model.rootRef);let Me=this.nodes.get(he);if(!Me)throw new E(this.user,`Tree element not found: ${he}`);return Me}getNodeLocation(he){return he.element}getParentNodeLocation(he){if(he===null)throw new E(this.user,"Invalid getParentNodeLocation call");let Me=this.nodes.get(he);if(!Me)throw new E(this.user,`Tree element not found: ${he}`);let nt=this.model.getNodeLocation(Me),pt=this.model.getParentNodeLocation(nt);return this.model.getNode(pt).element}getElementLocation(he){if(he===null)return[];let Me=this.nodes.get(he);if(!Me)throw new E(this.user,`Tree element not found: ${he}`);return this.model.getNodeLocation(Me)}}function Ae(St){return{element:{elements:[St.element],incompressible:St.incompressible||!1},children:O.$.map(O.$.from(St.children),Ae),collapsible:St.collapsible,collapsed:St.collapsed}}function Fe(St){let he=[St.element],Me=St.incompressible||!1,nt,pt;for(;[pt,nt]=O.$.consume(O.$.from(St.children),2),pt.length===1&&!pt[0].incompressible;)St=pt[0],he.push(St.element);return{element:{elements:he,incompressible:Me},children:O.$.map(O.$.concat(pt,nt),Fe),collapsible:St.collapsible,collapsed:St.collapsed}}function _e(St,he=0){let Me;return Me=he<St.element.elements.length-1?[_e(St,he+1)]:O.$.map(O.$.from(St.children),nt=>_e(nt,0)),he===0&&St.element.incompressible?{element:St.element.elements[he],children:Me,incompressible:!0,collapsible:St.collapsible,collapsed:St.collapsed}:{element:St.element.elements[he],children:Me,collapsible:St.collapsible,collapsed:St.collapsed}}function te(St){return _e(St,0)}function Le(St,he,Me){return St.element===he?Object.assign(Object.assign({},St),{children:Me}):Object.assign(Object.assign({},St),{children:O.$.map(O.$.from(St.children),nt=>Le(nt,he,Me))})}class ke{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(he,Me,nt={}){this.user=he,this.rootRef=null,this.nodes=new Map,this.model=new Ee(he,Me,nt),this.enabled=nt.compressionEnabled===void 0||nt.compressionEnabled,this.identityProvider=nt.identityProvider}setChildren(he,Me=O.$.empty(),nt){let pt=nt.diffIdentityProvider&&(Ke=nt.diffIdentityProvider,{getId:at=>at.elements.map(lt=>Ke.getId(lt).toString()).join("\0")});var Ke;if(he===null){let at=O.$.map(Me,this.enabled?Fe:Ae);return void this._setChildren(null,at,{diffIdentityProvider:pt,diffDepth:1/0})}let S=this.nodes.get(he);if(!S)throw new E(this.user,"Unknown compressed tree node");let V=this.model.getNode(S),Y=this.model.getParentNodeLocation(S),we=this.model.getNode(Y),Ne=Le(te(V),he,Me),Oe=(this.enabled?Fe:Ae)(Ne),et=we.children.map(at=>at===V?Oe:at);this._setChildren(we.element,et,{diffIdentityProvider:pt,diffDepth:V.depth-we.depth})}setCompressionEnabled(he){if(he===this.enabled)return;this.enabled=he;let Me=this.model.getNode().children,nt=O.$.map(Me,te),pt=O.$.map(nt,he?Fe:Ae);this._setChildren(null,pt,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(he,Me,nt){let pt=new Set;this.model.setChildren(he,Me,Object.assign(Object.assign({},nt),{onDidCreateNode:Ke=>{for(let S of Ke.element.elements)pt.add(S),this.nodes.set(S,Ke.element)},onDidDeleteNode:Ke=>{for(let S of Ke.element.elements)pt.has(S)||this.nodes.delete(S)}}))}has(he){return this.nodes.has(he)}getListIndex(he){let Me=this.getCompressedNode(he);return this.model.getListIndex(Me)}getListRenderCount(he){let Me=this.getCompressedNode(he);return this.model.getListRenderCount(Me)}getNode(he){if(he===void 0)return this.model.getNode();let Me=this.getCompressedNode(he);return this.model.getNode(Me)}getNodeLocation(he){let Me=this.model.getNodeLocation(he);return Me===null?null:Me.elements[Me.elements.length-1]}getParentNodeLocation(he){let Me=this.getCompressedNode(he),nt=this.model.getParentNodeLocation(Me);return nt===null?null:nt.elements[nt.elements.length-1]}getFirstElementChild(he){let Me=this.getCompressedNode(he);return this.model.getFirstElementChild(Me)}isCollapsible(he){let Me=this.getCompressedNode(he);return this.model.isCollapsible(Me)}setCollapsible(he,Me){let nt=this.getCompressedNode(he);return this.model.setCollapsible(nt,Me)}isCollapsed(he){let Me=this.getCompressedNode(he);return this.model.isCollapsed(Me)}setCollapsed(he,Me,nt){let pt=this.getCompressedNode(he);return this.model.setCollapsed(pt,Me,nt)}expandTo(he){let Me=this.getCompressedNode(he);this.model.expandTo(Me)}rerender(he){let Me=this.getCompressedNode(he);this.model.rerender(Me)}refilter(){this.model.refilter()}getCompressedNode(he){if(he===null)return null;let Me=this.nodes.get(he);if(!Me)throw new E(this.user,`Tree element not found: ${he}`);return Me}}let le=St=>St[St.length-1];class ee{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(he=>new ee(this.unwrapper,he))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(he,Me){this.unwrapper=he,this.node=Me}}class me{get onDidSplice(){return I.ju.map(this.model.onDidSplice,({insertedNodes:he,deletedNodes:Me})=>({insertedNodes:he.map(nt=>this.nodeMapper.map(nt)),deletedNodes:Me.map(nt=>this.nodeMapper.map(nt))}))}get onDidChangeCollapseState(){return I.ju.map(this.model.onDidChangeCollapseState,({node:he,deep:Me})=>({node:this.nodeMapper.map(he),deep:Me}))}get onDidChangeRenderNodeCount(){return I.ju.map(this.model.onDidChangeRenderNodeCount,he=>this.nodeMapper.map(he))}constructor(he,Me,nt={}){this.rootRef=null,this.elementMapper=nt.elementMapper||le;let pt=Ke=>this.elementMapper(Ke.elements);this.nodeMapper=new D(Ke=>new ee(pt,Ke)),this.model=new ke(he,function(Ke,S){return{splice(V,Y,we){S.splice(V,Y,we.map(Ne=>Ke.map(Ne)))},updateElementHeight(V,Y){S.updateElementHeight(V,Y)}}}(this.nodeMapper,Me),function(Ke,S){return Object.assign(Object.assign({},S),{identityProvider:S.identityProvider&&{getId:V=>S.identityProvider.getId(Ke(V))},sorter:S.sorter&&{compare:(V,Y)=>S.sorter.compare(V.elements[0],Y.elements[0])},filter:S.filter&&{filter:(V,Y)=>S.filter.filter(Ke(V),Y)}})}(pt,nt))}setChildren(he,Me=O.$.empty(),nt={}){this.model.setChildren(he,Me,nt)}setCompressionEnabled(he){this.model.setCompressionEnabled(he)}has(he){return this.model.has(he)}getListIndex(he){return this.model.getListIndex(he)}getListRenderCount(he){return this.model.getListRenderCount(he)}getNode(he){return this.nodeMapper.map(this.model.getNode(he))}getNodeLocation(he){return he.element}getParentNodeLocation(he){return this.model.getParentNodeLocation(he)}getFirstElementChild(he){let Me=this.model.getFirstElementChild(he);return Me==null?Me:this.elementMapper(Me.elements)}isCollapsible(he){return this.model.isCollapsible(he)}setCollapsible(he,Me){return this.model.setCollapsible(he,Me)}isCollapsed(he){return this.model.isCollapsed(he)}setCollapsed(he,Me,nt){return this.model.setCollapsed(he,Me,nt)}expandTo(he){return this.model.expandTo(he)}rerender(he){return this.model.rerender(he)}refilter(){return this.model.refilter()}getCompressedTreeNode(he=null){return this.model.getNode(he)}}var xe=t(9898);class We extends Ce{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(he,Me,nt,pt,Ke={}){super(he,Me,nt,pt,Ke),this.user=he}setChildren(he,Me=O.$.empty(),nt){this.model.setChildren(he,Me,nt)}rerender(he){he!==void 0?this.model.rerender(he):this.view.rerender()}hasElement(he){return this.model.has(he)}createModel(he,Me,nt){return new Ee(he,Me,nt)}}class Ve{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(he,Me){this._compressedTreeNodeProvider=he,this.renderer=Me,this.templateId=Me.templateId,Me.onDidChangeTwistieState&&(this.onDidChangeTwistieState=Me.onDidChangeTwistieState)}renderTemplate(he){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(he)}}renderElement(he,Me,nt,pt){let Ke=this.compressedTreeNodeProvider.getCompressedTreeNode(he.element);Ke.element.elements.length===1?(nt.compressedTreeNode=void 0,this.renderer.renderElement(he,Me,nt.data,pt)):(nt.compressedTreeNode=Ke,this.renderer.renderCompressedElements(Ke,Me,nt.data,pt))}disposeElement(he,Me,nt,pt){var Ke,S,V,Y;nt.compressedTreeNode?(S=(Ke=this.renderer).disposeCompressedElements)===null||S===void 0||S.call(Ke,nt.compressedTreeNode,Me,nt.data,pt):(Y=(V=this.renderer).disposeElement)===null||Y===void 0||Y.call(V,he,Me,nt.data,pt)}disposeTemplate(he){this.renderer.disposeTemplate(he.data)}renderTwistie(he,Me){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(he,Me)}}(function(St,he,Me,nt){var pt,Ke=arguments.length,S=Ke<3?he:nt===null?nt=Object.getOwnPropertyDescriptor(he,Me):nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(St,he,Me,nt);else for(var V=St.length-1;V>=0;V--)(pt=St[V])&&(S=(Ke<3?pt(S):Ke>3?pt(he,Me,S):pt(he,Me))||S);Ke>3&&S&&Object.defineProperty(he,Me,S)})([xe.H],Ve.prototype,"compressedTreeNodeProvider",null);class Ye extends We{constructor(he,Me,nt,pt,Ke={}){let S=()=>this;super(he,Me,nt,pt.map(V=>new Ve(S,V)),function(V,Y){return Y&&Object.assign(Object.assign({},Y),{keyboardNavigationLabelProvider:Y.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(we){let Ne;try{Ne=V().getCompressedTreeNode(we)}catch(Oe){return Y.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(we)}return Ne.element.elements.length===1?Y.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(we):Y.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(Ne.element.elements)}}})}(S,Ke))}setChildren(he,Me=O.$.empty(),nt){this.model.setChildren(he,Me,nt)}createModel(he,Me,nt){return new me(he,Me,nt)}updateOptions(he={}){super.updateOptions(he),he.compressionEnabled!==void 0&&this.model.setCompressionEnabled(he.compressionEnabled)}getCompressedTreeNode(he=null){return this.model.getCompressedTreeNode(he)}}var tt=t(7301),Qe=function(St,he,Me,nt){return new(Me||(Me=Promise))(function(pt,Ke){function S(we){try{Y(nt.next(we))}catch(Ne){Ke(Ne)}}function V(we){try{Y(nt.throw(we))}catch(Ne){Ke(Ne)}}function Y(we){var Ne;we.done?pt(we.value):(Ne=we.value,Ne instanceof Me?Ne:new Me(function(Oe){Oe(Ne)})).then(S,V)}Y((nt=nt.apply(St,he||[])).next())})};function bt(St){return Object.assign(Object.assign({},St),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function ht(St,he){return!!he.parent&&(he.parent===St||ht(St,he.parent))}class xt{get element(){return this.node.element.element}get children(){return this.node.children.map(he=>new xt(he))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(he){this.node=he}}class Qt{constructor(he,Me,nt){this.renderer=he,this.nodeMapper=Me,this.onDidChangeTwistieState=nt,this.renderedNodes=new Map,this.templateId=he.templateId}renderTemplate(he){return{templateData:this.renderer.renderTemplate(he)}}renderElement(he,Me,nt,pt){this.renderer.renderElement(this.nodeMapper.map(he),Me,nt.templateData,pt)}renderTwistie(he,Me){return he.slow?(Me.classList.add(...K.k.asClassNameArray(W.l.treeItemLoading)),!0):(Me.classList.remove(...K.k.asClassNameArray(W.l.treeItemLoading)),!1)}disposeElement(he,Me,nt,pt){var Ke,S;(S=(Ke=this.renderer).disposeElement)===null||S===void 0||S.call(Ke,this.nodeMapper.map(he),Me,nt.templateData,pt)}disposeTemplate(he){this.renderer.disposeTemplate(he.templateData)}dispose(){this.renderedNodes.clear()}}function At(St){return{browserEvent:St.browserEvent,elements:St.elements.map(he=>he.element)}}function mi(St){return{browserEvent:St.browserEvent,element:St.element&&St.element.element,target:St.target}}class Lt extends a.kX{constructor(he){super(he.elements.map(Me=>Me.element)),this.data=he}}function ct(St){return St instanceof a.kX?new Lt(St):St}class Kt{constructor(he){this.dnd=he}getDragURI(he){return this.dnd.getDragURI(he.element)}getDragLabel(he,Me){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(he.map(nt=>nt.element),Me)}onDragStart(he,Me){var nt,pt;(pt=(nt=this.dnd).onDragStart)===null||pt===void 0||pt.call(nt,ct(he),Me)}onDragOver(he,Me,nt,pt,Ke=!0){return this.dnd.onDragOver(ct(he),Me&&Me.element,nt,pt)}drop(he,Me,nt,pt){this.dnd.drop(ct(he),Me&&Me.element,nt,pt)}onDragEnd(he){var Me,nt;(nt=(Me=this.dnd).onDragEnd)===null||nt===void 0||nt.call(Me,he)}}function pi(St){return St&&Object.assign(Object.assign({},St),{collapseByDefault:!0,identityProvider:St.identityProvider&&{getId:he=>St.identityProvider.getId(he.element)},dnd:St.dnd&&new Kt(St.dnd),multipleSelectionController:St.multipleSelectionController&&{isSelectionSingleChangeEvent:he=>St.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},he),{element:he.element})),isSelectionRangeChangeEvent:he=>St.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},he),{element:he.element}))},accessibilityProvider:St.accessibilityProvider&&Object.assign(Object.assign({},St.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:St.accessibilityProvider.getRole?he=>St.accessibilityProvider.getRole(he.element):()=>"treeitem",isChecked:St.accessibilityProvider.isChecked?he=>{var Me;return!!(!((Me=St.accessibilityProvider)===null||Me===void 0)&&Me.isChecked(he.element))}:void 0,getAriaLabel:he=>St.accessibilityProvider.getAriaLabel(he.element),getWidgetAriaLabel:()=>St.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:St.accessibilityProvider.getWidgetRole?()=>St.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:St.accessibilityProvider.getAriaLevel&&(he=>St.accessibilityProvider.getAriaLevel(he.element)),getActiveDescendantId:St.accessibilityProvider.getActiveDescendantId&&(he=>St.accessibilityProvider.getActiveDescendantId(he.element))}),filter:St.filter&&{filter:(he,Me)=>St.filter.filter(he.element,Me)},keyboardNavigationLabelProvider:St.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},St.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:he=>St.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(he.element)}),sorter:void 0,expandOnlyOnTwistieClick:St.expandOnlyOnTwistieClick===void 0?void 0:typeof St.expandOnlyOnTwistieClick!="function"?St.expandOnlyOnTwistieClick:he=>St.expandOnlyOnTwistieClick(he.element),defaultFindVisibility:he=>he.hasChildren&&he.stale?1:typeof St.defaultFindVisibility=="number"?St.defaultFindVisibility:St.defaultFindVisibility===void 0?2:St.defaultFindVisibility(he.element)})}function li(St,he){he(St),St.children.forEach(Me=>li(Me,he))}class Wi{get onDidChangeFocus(){return I.ju.map(this.tree.onDidChangeFocus,At)}get onDidChangeSelection(){return I.ju.map(this.tree.onDidChangeSelection,At)}get onMouseDblClick(){return I.ju.map(this.tree.onMouseDblClick,mi)}get onPointer(){return I.ju.map(this.tree.onPointer,mi)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}constructor(he,Me,nt,pt,Ke,S={}){this.user=he,this.dataSource=Ke,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new I.Q5,this._onDidChangeNodeSlowState=new I.Q5,this.nodeMapper=new D(V=>new xt(V)),this.disposables=new _.SL,this.identityProvider=S.identityProvider,this.autoExpandSingleChildren=S.autoExpandSingleChildren!==void 0&&S.autoExpandSingleChildren,this.sorter=S.sorter,this.collapseByDefault=S.collapseByDefault,this.tree=this.createTree(he,Me,nt,pt,S),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=bt({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(he,Me,nt,pt,Ke){let S=new ie(nt),V=pt.map(we=>new Qt(we,this.nodeMapper,this._onDidChangeNodeSlowState.event)),Y=pi(Ke)||{};return new We(he,Me,S,V,Y)}updateOptions(he={}){this.tree.updateOptions(he)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(he){this.tree.scrollTop=he}domFocus(){this.tree.domFocus()}layout(he,Me){this.tree.layout(he,Me)}style(he){this.tree.style(he)}getInput(){return this.root.element}setInput(he,Me){return Qe(this,void 0,void 0,function*(){this.refreshPromises.forEach(pt=>pt.cancel()),this.refreshPromises.clear(),this.root.element=he;let nt=Me&&{viewState:Me,focus:[],selection:[]};yield this._updateChildren(he,!0,!1,nt),nt&&(this.tree.setFocus(nt.focus),this.tree.setSelection(nt.selection)),Me&&typeof Me.scrollTop=="number"&&(this.scrollTop=Me.scrollTop)})}_updateChildren(he=this.root.element,Me=!0,nt=!1,pt,Ke){return Qe(this,void 0,void 0,function*(){if(this.root.element===void 0)throw new E(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield I.ju.toPromise(this._onDidRender.event));let S=this.getDataNode(he);if(yield this.refreshAndRenderNode(S,Me,pt,Ke),nt)try{this.tree.rerender(S)}catch(V){}})}rerender(he){if(he===void 0||he===this.root.element)return void this.tree.rerender();let Me=this.getDataNode(he);this.tree.rerender(Me)}getNode(he=this.root.element){let Me=this.getDataNode(he),nt=this.tree.getNode(Me===this.root?null:Me);return this.nodeMapper.map(nt)}collapse(he,Me=!1){let nt=this.getDataNode(he);return this.tree.collapse(nt===this.root?null:nt,Me)}expand(he,Me=!1){return Qe(this,void 0,void 0,function*(){if(this.root.element===void 0)throw new E(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield I.ju.toPromise(this._onDidRender.event));let nt=this.getDataNode(he);if(this.tree.hasElement(nt)&&!this.tree.isCollapsible(nt)||(nt.refreshPromise&&(yield this.root.refreshPromise,yield I.ju.toPromise(this._onDidRender.event)),nt!==this.root&&!nt.refreshPromise&&!this.tree.isCollapsed(nt)))return!1;let pt=this.tree.expand(nt===this.root?null:nt,Me);return nt.refreshPromise&&(yield this.root.refreshPromise,yield I.ju.toPromise(this._onDidRender.event)),pt})}setSelection(he,Me){let nt=he.map(pt=>this.getDataNode(pt));this.tree.setSelection(nt,Me)}getSelection(){return this.tree.getSelection().map(he=>he.element)}setFocus(he,Me){let nt=he.map(pt=>this.getDataNode(pt));this.tree.setFocus(nt,Me)}getFocus(){return this.tree.getFocus().map(he=>he.element)}reveal(he,Me){this.tree.reveal(this.getDataNode(he),Me)}getParentElement(he){let Me=this.tree.getParentElement(this.getDataNode(he));return Me&&Me.element}getFirstElementChild(he=this.root.element){let Me=this.getDataNode(he),nt=this.tree.getFirstElementChild(Me===this.root?null:Me);return nt&&nt.element}getDataNode(he){let Me=this.nodes.get(he===this.root.element?null:he);if(!Me)throw new E(this.user,`Data tree node not found: ${he}`);return Me}refreshAndRenderNode(he,Me,nt,pt){return Qe(this,void 0,void 0,function*(){yield this.refreshNode(he,Me,nt),this.render(he,nt,pt)})}refreshNode(he,Me,nt){return Qe(this,void 0,void 0,function*(){let pt;return this.subTreeRefreshPromises.forEach((Ke,S)=>{!pt&&function(V,Y){return V===Y||ht(V,Y)||ht(Y,V)}(S,he)&&(pt=Ke.then(()=>this.refreshNode(he,Me,nt)))}),pt||(he!==this.root&&this.tree.getNode(he).collapsed?(he.hasChildren=!!this.dataSource.hasChildren(he.element),void(he.stale=!0)):this.doRefreshSubTree(he,Me,nt))})}doRefreshSubTree(he,Me,nt){return Qe(this,void 0,void 0,function*(){let pt;he.refreshPromise=new Promise(Ke=>pt=Ke),this.subTreeRefreshPromises.set(he,he.refreshPromise),he.refreshPromise.finally(()=>{he.refreshPromise=void 0,this.subTreeRefreshPromises.delete(he)});try{let Ke=yield this.doRefreshNode(he,Me,nt);he.stale=!1,yield L.jT.settled(Ke.map(S=>this.doRefreshSubTree(S,Me,nt)))}finally{pt()}})}doRefreshNode(he,Me,nt){return Qe(this,void 0,void 0,function*(){let pt;if(he.hasChildren=!!this.dataSource.hasChildren(he.element),he.hasChildren){let Ke=this.doGetChildren(he);if((0,fe.TW)(Ke))pt=Promise.resolve(Ke);else{let S=(0,L.Vs)(800);S.then(()=>{he.slow=!0,this._onDidChangeNodeSlowState.fire(he)},V=>null),pt=Ke.finally(()=>S.cancel())}}else pt=Promise.resolve(O.$.empty());try{let Ke=yield pt;return this.setChildren(he,Ke,Me,nt)}catch(Ke){if(he!==this.root&&this.tree.hasElement(he)&&this.tree.collapse(he),(0,tt.n2)(Ke))return[];throw Ke}finally{he.slow&&(he.slow=!1,this._onDidChangeNodeSlowState.fire(he))}})}doGetChildren(he){let Me=this.refreshPromises.get(he);if(Me)return Me;let nt=this.dataSource.getChildren(he.element);return(0,fe.TW)(nt)?this.processChildren(nt):(Me=(0,L.PG)(()=>Qe(this,void 0,void 0,function*(){return this.processChildren(yield nt)})),this.refreshPromises.set(he,Me),Me.finally(()=>{this.refreshPromises.delete(he)}))}_onDidChangeCollapseState({node:he,deep:Me}){he.element!==null&&!he.collapsed&&he.element.stale&&(Me?this.collapse(he.element.element):this.refreshAndRenderNode(he.element,!1).catch(tt.dL))}setChildren(he,Me,nt,pt){let Ke=[...Me];if(he.children.length===0&&Ke.length===0)return[];let S=new Map,V=new Map;for(let Ne of he.children)if(S.set(Ne.element,Ne),this.identityProvider){let Oe=this.tree.isCollapsed(Ne);V.set(Ne.id,{node:Ne,collapsed:Oe})}let Y=[],we=Ke.map(Ne=>{let Oe=!!this.dataSource.hasChildren(Ne);if(!this.identityProvider){let _t=bt({element:Ne,parent:he,hasChildren:Oe});return Oe&&this.collapseByDefault&&!this.collapseByDefault(Ne)&&(_t.collapsedByDefault=!1,Y.push(_t)),_t}let et=this.identityProvider.getId(Ne).toString(),at=V.get(et);if(at){let _t=at.node;return S.delete(_t.element),this.nodes.delete(_t.element),this.nodes.set(Ne,_t),_t.element=Ne,_t.hasChildren=Oe,nt?at.collapsed?(_t.children.forEach(gt=>li(gt,Ft=>this.nodes.delete(Ft.element))),_t.children.splice(0,_t.children.length),_t.stale=!0):Y.push(_t):Oe&&this.collapseByDefault&&!this.collapseByDefault(Ne)&&(_t.collapsedByDefault=!1,Y.push(_t)),_t}let lt=bt({element:Ne,parent:he,id:et,hasChildren:Oe});return pt&&pt.viewState.focus&&pt.viewState.focus.indexOf(et)>-1&&pt.focus.push(lt),pt&&pt.viewState.selection&&pt.viewState.selection.indexOf(et)>-1&&pt.selection.push(lt),pt&&pt.viewState.expanded&&pt.viewState.expanded.indexOf(et)>-1?Y.push(lt):Oe&&this.collapseByDefault&&!this.collapseByDefault(Ne)&&(lt.collapsedByDefault=!1,Y.push(lt)),lt});for(let Ne of S.values())li(Ne,Oe=>this.nodes.delete(Oe.element));for(let Ne of we)this.nodes.set(Ne.element,Ne);return he.children.splice(0,he.children.length,...we),he!==this.root&&this.autoExpandSingleChildren&&we.length===1&&Y.length===0&&(we[0].collapsedByDefault=!1,Y.push(we[0])),Y}render(he,Me,nt){let pt=he.children.map(S=>this.asTreeElement(S,Me)),Ke=nt&&Object.assign(Object.assign({},nt),{diffIdentityProvider:nt.diffIdentityProvider&&{getId:S=>nt.diffIdentityProvider.getId(S.element)}});this.tree.setChildren(he===this.root?null:he,pt,Ke),he!==this.root&&this.tree.setCollapsible(he,he.hasChildren),this._onDidRender.fire()}asTreeElement(he,Me){if(he.stale)return{element:he,collapsible:he.hasChildren,collapsed:!0};let nt;return nt=!(Me&&Me.viewState.expanded&&he.id&&Me.viewState.expanded.indexOf(he.id)>-1)&&he.collapsedByDefault,he.collapsedByDefault=void 0,{element:he,children:he.hasChildren?O.$.map(he.children,pt=>this.asTreeElement(pt,Me)):[],collapsible:he.hasChildren,collapsed:nt}}processChildren(he){return this.sorter&&(he=[...he].sort(this.sorter.compare.bind(this.sorter))),he}dispose(){this.disposables.dispose()}}class Vi{get element(){return{elements:this.node.element.elements.map(he=>he.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(he=>new Vi(he))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(he){this.node=he}}class Xi{constructor(he,Me,nt,pt){this.renderer=he,this.nodeMapper=Me,this.compressibleNodeMapperProvider=nt,this.onDidChangeTwistieState=pt,this.renderedNodes=new Map,this.disposables=[],this.templateId=he.templateId}renderTemplate(he){return{templateData:this.renderer.renderTemplate(he)}}renderElement(he,Me,nt,pt){this.renderer.renderElement(this.nodeMapper.map(he),Me,nt.templateData,pt)}renderCompressedElements(he,Me,nt,pt){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(he),Me,nt.templateData,pt)}renderTwistie(he,Me){return he.slow?(Me.classList.add(...K.k.asClassNameArray(W.l.treeItemLoading)),!0):(Me.classList.remove(...K.k.asClassNameArray(W.l.treeItemLoading)),!1)}disposeElement(he,Me,nt,pt){var Ke,S;(S=(Ke=this.renderer).disposeElement)===null||S===void 0||S.call(Ke,this.nodeMapper.map(he),Me,nt.templateData,pt)}disposeCompressedElements(he,Me,nt,pt){var Ke,S;(S=(Ke=this.renderer).disposeCompressedElements)===null||S===void 0||S.call(Ke,this.compressibleNodeMapperProvider().map(he),Me,nt.templateData,pt)}disposeTemplate(he){this.renderer.disposeTemplate(he.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,_.B9)(this.disposables)}}class en extends Wi{constructor(he,Me,nt,pt,Ke,S,V={}){super(he,Me,nt,Ke,S,V),this.compressionDelegate=pt,this.compressibleNodeMapper=new D(Y=>new Vi(Y)),this.filter=V.filter}createTree(he,Me,nt,pt,Ke){let S=new ie(nt),V=pt.map(we=>new Xi(we,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),Y=function(we){let Ne=we&&pi(we);return Ne&&Object.assign(Object.assign({},Ne),{keyboardNavigationLabelProvider:Ne.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},Ne.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel:Oe=>we.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(Oe.map(et=>et.element))})})}(Ke)||{};return new Ye(he,Me,S,V,Y)}asTreeElement(he,Me){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(he.element)},super.asTreeElement(he,Me))}updateOptions(he={}){this.tree.updateOptions(he)}render(he,Me){if(!this.identityProvider)return super.render(he,Me);let nt=et=>this.identityProvider.getId(et).toString(),pt=et=>{let at=new Set;for(let lt of et){let _t=this.tree.getCompressedTreeNode(lt===this.root?null:lt);if(_t.element)for(let gt of _t.element.elements)at.add(nt(gt.element))}return at},Ke=pt(this.tree.getSelection()),S=pt(this.tree.getFocus());super.render(he,Me);let V=this.getSelection(),Y=!1,we=this.getFocus(),Ne=!1,Oe=et=>{let at=et.element;if(at)for(let lt=0;lt<at.elements.length;lt++){let _t=nt(at.elements[lt].element),gt=at.elements[at.elements.length-1].element;Ke.has(_t)&&V.indexOf(gt)===-1&&(V.push(gt),Y=!0),S.has(_t)&&we.indexOf(gt)===-1&&(we.push(gt),Ne=!0)}et.children.forEach(Oe)};Oe(this.tree.getCompressedTreeNode(he===this.root?null:he)),Y&&this.setSelection(V),Ne&&this.setFocus(we)}processChildren(he){return this.filter&&(he=O.$.filter(he,Me=>{let nt=typeof(pt=this.filter.filter(Me,1))=="boolean"?pt?1:0:$(pt)?N(pt.visibility):N(pt);var pt;if(nt===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return nt===1})),super.processChildren(he)}}class rn extends Ce{constructor(he,Me,nt,pt,Ke,S={}){super(he,Me,nt,pt,S),this.user=he,this.dataSource=Ke,this.identityProvider=S.identityProvider}createModel(he,Me,nt){return new Ee(he,Me,nt)}}var tn=t(3108),yn=t(3193),sn=t(3983),ci=t(9282),Xt=t(5606),kt=t(2065),It=t(1847),ft=t(9872),Mt=t(6253),jt=function(St,he,Me,nt){var pt,Ke=arguments.length,S=Ke<3?he:nt===null?nt=Object.getOwnPropertyDescriptor(he,Me):nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(St,he,Me,nt);else for(var V=St.length-1;V>=0;V--)(pt=St[V])&&(S=(Ke<3?pt(S):Ke>3?pt(he,Me,S):pt(he,Me))||S);return Ke>3&&S&&Object.defineProperty(he,Me,S),S},di=function(St,he){return function(Me,nt){he(Me,nt,St)}};let fi=(0,kt.yh)("listService");class Si{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new _.SL,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(he){var Me,nt;he!==this._lastFocusedWidget&&((Me=this._lastFocusedWidget)===null||Me===void 0||Me.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=he,(nt=this._lastFocusedWidget)===null||nt===void 0||nt.getHTMLElement().classList.add("last-focused"))}register(he,Me){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new A.wD((0,m.dS)(),"").style(Mt.O2)),this.lists.some(pt=>pt.widget===he))throw new Error("Cannot register the same widget multiple times");let nt={widget:he,extraContextKeys:Me};return this.lists.push(nt),he.getHTMLElement()===document.activeElement&&this.setLastFocusedList(he),(0,_.F8)(he.onDidFocus(()=>this.setLastFocusedList(he)),(0,_.OF)(()=>this.lists.splice(this.lists.indexOf(nt),1)),he.onDidDispose(()=>{this.lists=this.lists.filter(pt=>pt!==nt),this._lastFocusedWidget===he&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}let Ri=new sn.uy("listFocus",!0),Wt=new sn.uy("listSupportsMultiselect",!0),Te=sn.Ao.and(Ri,sn.Ao.not(ci.d0)),Ze=new sn.uy("listHasSelectionOrFocus",!1),rt=new sn.uy("listDoubleSelection",!1),yt=new sn.uy("listMultiSelection",!1),Nt=new sn.uy("listSelectionNavigation",!1),dt=new sn.uy("listSupportsFind",!0),Re=new sn.uy("treeElementCanCollapse",!1),qe=new sn.uy("treeElementHasParent",!1),Ue=new sn.uy("treeElementCanExpand",!1),Pe=new sn.uy("treeElementHasChild",!1),Xe=new sn.uy("treeFindOpen",!1),$e="listTypeNavigationMode",ot="listAutomaticKeyboardNavigation";function Tt(St,he){let Me=St.createScoped(he.getHTMLElement());return Ri.bindTo(Me),Me}let Ot="workbench.list.multiSelectModifier",ti="workbench.list.openMode",zt="workbench.list.horizontalScrolling",Jt="workbench.list.defaultFindMode",Gt="workbench.list.typeNavigationMode",$t="workbench.list.keyboardNavigation",si="workbench.list.scrollByPage",ai="workbench.list.defaultFindMatchType",_i="workbench.tree.indent",Li="workbench.tree.renderIndentGuides",ri="workbench.list.smoothScrolling",qt="workbench.list.mouseWheelScrollSensitivity",je="workbench.list.fastScrollSensitivity",mt="workbench.tree.expandMode";function wt(St){return St.getValue(Ot)==="alt"}class Rt extends _.JT{constructor(he){super(),this.configurationService=he,this.useAltAsMultipleSelectionModifier=wt(he),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(he=>{he.affectsConfiguration(Ot)&&(this.useAltAsMultipleSelectionModifier=wt(this.configurationService))}))}isSelectionSingleChangeEvent(he){return this.useAltAsMultipleSelectionModifier?he.browserEvent.altKey:(0,A.Zo)(he)}isSelectionRangeChangeEvent(he){return(0,A.wn)(he)}}function oi(St,he){var Me;let nt=St.get(tn.Ui),pt=St.get(It.d),Ke=new _.SL;return[Object.assign(Object.assign({},he),{keyboardNavigationDelegate:{mightProducePrintableCharacter:S=>pt.mightProducePrintableCharacter(S)},smoothScrolling:!!nt.getValue(ri),mouseWheelScrollSensitivity:nt.getValue(qt),fastScrollSensitivity:nt.getValue(je),multipleSelectionController:(Me=he.multipleSelectionController)!==null&&Me!==void 0?Me:Ke.add(new Rt(nt)),keyboardNavigationEventFilter:Dn(pt),scrollByPage:!!nt.getValue(si)}),Ke]}let ei=class extends A.aV{constructor(St,he,Me,nt,pt,Ke,S,V,Y){let we=pt.horizontalScrolling!==void 0?pt.horizontalScrolling:!!V.getValue(zt),[Ne,Oe]=Y.invokeFunction(oi,pt);super(St,he,Me,nt,Object.assign(Object.assign({keyboardSupport:!1},Ne),{horizontalScrolling:we})),this.disposables.add(Oe),this.contextKeyService=Tt(Ke,this),this.listSupportsMultiSelect=Wt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(pt.multipleSelectionSupport!==!1),Nt.bindTo(this.contextKeyService).set(!!pt.selectionNavigation),this.listHasSelectionOrFocus=Ze.bindTo(this.contextKeyService),this.listDoubleSelection=rt.bindTo(this.contextKeyService),this.listMultiSelection=yt.bindTo(this.contextKeyService),this.horizontalScrolling=pt.horizontalScrolling,this._useAltAsMultipleSelectionModifier=wt(V),this.disposables.add(this.contextKeyService),this.disposables.add(S.register(this)),this.updateStyles(pt.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let et=this.getSelection(),at=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(et.length>0||at.length>0),this.listMultiSelection.set(et.length>1),this.listDoubleSelection.set(et.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let et=this.getSelection(),at=this.getFocus();this.listHasSelectionOrFocus.set(et.length>0||at.length>0)})),this.disposables.add(V.onDidChangeConfiguration(et=>{et.affectsConfiguration(Ot)&&(this._useAltAsMultipleSelectionModifier=wt(V));let at={};if(et.affectsConfiguration(zt)&&this.horizontalScrolling===void 0){let lt=!!V.getValue(zt);at=Object.assign(Object.assign({},at),{horizontalScrolling:lt})}if(et.affectsConfiguration(si)){let lt=!!V.getValue(si);at=Object.assign(Object.assign({},at),{scrollByPage:lt})}if(et.affectsConfiguration(ri)){let lt=!!V.getValue(ri);at=Object.assign(Object.assign({},at),{smoothScrolling:lt})}if(et.affectsConfiguration(qt)){let lt=V.getValue(qt);at=Object.assign(Object.assign({},at),{mouseWheelScrollSensitivity:lt})}if(et.affectsConfiguration(je)){let lt=V.getValue(je);at=Object.assign(Object.assign({},at),{fastScrollSensitivity:lt})}Object.keys(at).length>0&&this.updateOptions(at)})),this.navigator=new Pi(this,Object.assign({configurationService:V},pt)),this.disposables.add(this.navigator)}updateOptions(St){super.updateOptions(St),St.overrideStyles!==void 0&&this.updateStyles(St.overrideStyles),St.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!St.multipleSelectionSupport)}updateStyles(St){this.style(St?(0,Mt.TU)(St):Mt.O2)}};ei=jt([di(5,sn.i6),di(6,fi),di(7,tn.Ui),di(8,kt.TG)],ei);let yi=class extends f{constructor(St,he,Me,nt,pt,Ke,S,V,Y){let we=pt.horizontalScrolling!==void 0?pt.horizontalScrolling:!!V.getValue(zt),[Ne,Oe]=Y.invokeFunction(oi,pt);super(St,he,Me,nt,Object.assign(Object.assign({keyboardSupport:!1},Ne),{horizontalScrolling:we})),this.disposables=new _.SL,this.disposables.add(Oe),this.contextKeyService=Tt(Ke,this),this.horizontalScrolling=pt.horizontalScrolling,this.listSupportsMultiSelect=Wt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(pt.multipleSelectionSupport!==!1),Nt.bindTo(this.contextKeyService).set(!!pt.selectionNavigation),this._useAltAsMultipleSelectionModifier=wt(V),this.disposables.add(this.contextKeyService),this.disposables.add(S.register(this)),this.updateStyles(pt.overrideStyles),this.disposables.add(V.onDidChangeConfiguration(et=>{et.affectsConfiguration(Ot)&&(this._useAltAsMultipleSelectionModifier=wt(V));let at={};if(et.affectsConfiguration(zt)&&this.horizontalScrolling===void 0){let lt=!!V.getValue(zt);at=Object.assign(Object.assign({},at),{horizontalScrolling:lt})}if(et.affectsConfiguration(si)){let lt=!!V.getValue(si);at=Object.assign(Object.assign({},at),{scrollByPage:lt})}if(et.affectsConfiguration(ri)){let lt=!!V.getValue(ri);at=Object.assign(Object.assign({},at),{smoothScrolling:lt})}if(et.affectsConfiguration(qt)){let lt=V.getValue(qt);at=Object.assign(Object.assign({},at),{mouseWheelScrollSensitivity:lt})}if(et.affectsConfiguration(je)){let lt=V.getValue(je);at=Object.assign(Object.assign({},at),{fastScrollSensitivity:lt})}Object.keys(at).length>0&&this.updateOptions(at)})),this.navigator=new Pi(this,Object.assign({configurationService:V},pt)),this.disposables.add(this.navigator)}updateOptions(St){super.updateOptions(St),St.overrideStyles!==void 0&&this.updateStyles(St.overrideStyles),St.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!St.multipleSelectionSupport)}updateStyles(St){this.style(St?(0,Mt.TU)(St):Mt.O2)}dispose(){this.disposables.dispose(),super.dispose()}};yi=jt([di(5,sn.i6),di(6,fi),di(7,tn.Ui),di(8,kt.TG)],yi);let ki=class extends r{constructor(St,he,Me,nt,pt,Ke,S,V,Y,we){let Ne=Ke.horizontalScrolling!==void 0?Ke.horizontalScrolling:!!Y.getValue(zt),[Oe,et]=we.invokeFunction(oi,Ke);super(St,he,Me,nt,pt,Object.assign(Object.assign({keyboardSupport:!1},Oe),{horizontalScrolling:Ne})),this.disposables.add(et),this.contextKeyService=Tt(S,this),this.listSupportsMultiSelect=Wt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Ke.multipleSelectionSupport!==!1),Nt.bindTo(this.contextKeyService).set(!!Ke.selectionNavigation),this.listHasSelectionOrFocus=Ze.bindTo(this.contextKeyService),this.listDoubleSelection=rt.bindTo(this.contextKeyService),this.listMultiSelection=yt.bindTo(this.contextKeyService),this.horizontalScrolling=Ke.horizontalScrolling,this._useAltAsMultipleSelectionModifier=wt(Y),this.disposables.add(this.contextKeyService),this.disposables.add(V.register(this)),this.updateStyles(Ke.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let at=this.getSelection(),lt=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(at.length>0||lt.length>0),this.listMultiSelection.set(at.length>1),this.listDoubleSelection.set(at.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let at=this.getSelection(),lt=this.getFocus();this.listHasSelectionOrFocus.set(at.length>0||lt.length>0)})),this.disposables.add(Y.onDidChangeConfiguration(at=>{at.affectsConfiguration(Ot)&&(this._useAltAsMultipleSelectionModifier=wt(Y));let lt={};if(at.affectsConfiguration(zt)&&this.horizontalScrolling===void 0){let _t=!!Y.getValue(zt);lt=Object.assign(Object.assign({},lt),{horizontalScrolling:_t})}if(at.affectsConfiguration(si)){let _t=!!Y.getValue(si);lt=Object.assign(Object.assign({},lt),{scrollByPage:_t})}if(at.affectsConfiguration(ri)){let _t=!!Y.getValue(ri);lt=Object.assign(Object.assign({},lt),{smoothScrolling:_t})}if(at.affectsConfiguration(qt)){let _t=Y.getValue(qt);lt=Object.assign(Object.assign({},lt),{mouseWheelScrollSensitivity:_t})}if(at.affectsConfiguration(je)){let _t=Y.getValue(je);lt=Object.assign(Object.assign({},lt),{fastScrollSensitivity:_t})}Object.keys(lt).length>0&&this.updateOptions(lt)})),this.navigator=new Ni(this,Object.assign({configurationService:Y},Ke)),this.disposables.add(this.navigator)}updateOptions(St){super.updateOptions(St),St.overrideStyles!==void 0&&this.updateStyles(St.overrideStyles),St.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!St.multipleSelectionSupport)}updateStyles(St){this.style(St?(0,Mt.TU)(St):Mt.O2)}dispose(){this.disposables.dispose(),super.dispose()}};ki=jt([di(6,sn.i6),di(7,fi),di(8,tn.Ui),di(9,kt.TG)],ki);class Ti extends _.JT{constructor(he,Me){var nt;super(),this.widget=he,this._onDidOpen=this._register(new I.Q5),this.onDidOpen=this._onDidOpen.event,this._register(I.ju.filter(this.widget.onDidChangeSelection,pt=>pt.browserEvent instanceof KeyboardEvent)(pt=>this.onSelectionFromKeyboard(pt))),this._register(this.widget.onPointer(pt=>this.onPointer(pt.element,pt.browserEvent))),this._register(this.widget.onMouseDblClick(pt=>this.onMouseDblClick(pt.element,pt.browserEvent))),typeof(Me==null?void 0:Me.openOnSingleClick)!="boolean"&&(Me!=null&&Me.configurationService)?(this.openOnSingleClick=(Me==null?void 0:Me.configurationService.getValue(ti))!=="doubleClick",this._register(Me==null?void 0:Me.configurationService.onDidChangeConfiguration(pt=>{pt.affectsConfiguration(ti)&&(this.openOnSingleClick=(Me==null?void 0:Me.configurationService.getValue(ti))!=="doubleClick")}))):this.openOnSingleClick=(nt=Me==null?void 0:Me.openOnSingleClick)===null||nt===void 0||nt}onSelectionFromKeyboard(he){if(he.elements.length!==1)return;let Me=he.browserEvent,nt=typeof Me.preserveFocus!="boolean"||Me.preserveFocus,pt=typeof Me.pinned=="boolean"?Me.pinned:!nt;this._open(this.getSelectedElement(),nt,pt,!1,he.browserEvent)}onPointer(he,Me){if(!this.openOnSingleClick||Me.detail===2)return;let nt=Me.button===1,pt=Me.ctrlKey||Me.metaKey||Me.altKey;this._open(he,!0,nt,pt,Me)}onMouseDblClick(he,Me){if(!Me)return;let nt=Me.target;if(nt.classList.contains("monaco-tl-twistie")||nt.classList.contains("monaco-icon-label")&&nt.classList.contains("folder-icon")&&Me.offsetX<16)return;let pt=Me.ctrlKey||Me.metaKey||Me.altKey;this._open(he,!1,!0,pt,Me)}_open(he,Me,nt,pt,Ke){he&&this._onDidOpen.fire({editorOptions:{preserveFocus:Me,pinned:nt,revealIfVisible:!0},sideBySide:pt,element:he,browserEvent:Ke})}}class Pi extends Ti{constructor(he,Me){super(he,Me),this.widget=he}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Ni extends Ti{constructor(he,Me){super(he,Me)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class gn extends Ti{constructor(he,Me){super(he,Me)}getSelectedElement(){var he;return(he=this.widget.getSelection()[0])!==null&&he!==void 0?he:void 0}}function Dn(St){let he=!1;return Me=>{if(Me.toKeyCodeChord().isModifierKey())return!1;if(he)return he=!1,!1;let nt=St.softDispatch(Me,Me.target);return(nt==null?void 0:nt.kind)===1?(he=!0,!1):(he=!1,!nt)}}let Yt=class extends We{constructor(St,he,Me,nt,pt,Ke,S,V,Y){let{options:we,getTypeNavigationMode:Ne,disposable:Oe}=Ke.invokeFunction(dn,pt);super(St,he,Me,nt,we),this.disposables.add(Oe),this.internals=new wn(this,pt,Ne,pt.overrideStyles,S,V,Y),this.disposables.add(this.internals)}updateOptions(St){super.updateOptions(St),this.internals.updateOptions(St)}};Yt=jt([di(5,kt.TG),di(6,sn.i6),di(7,fi),di(8,tn.Ui)],Yt);let Ai=class extends Ye{constructor(St,he,Me,nt,pt,Ke,S,V,Y){let{options:we,getTypeNavigationMode:Ne,disposable:Oe}=Ke.invokeFunction(dn,pt);super(St,he,Me,nt,we),this.disposables.add(Oe),this.internals=new wn(this,pt,Ne,pt.overrideStyles,S,V,Y),this.disposables.add(this.internals)}updateOptions(St={}){super.updateOptions(St),St.overrideStyles&&this.internals.updateStyleOverrides(St.overrideStyles),this.internals.updateOptions(St)}};Ai=jt([di(5,kt.TG),di(6,sn.i6),di(7,fi),di(8,tn.Ui)],Ai);let zi=class extends rn{constructor(St,he,Me,nt,pt,Ke,S,V,Y,we){let{options:Ne,getTypeNavigationMode:Oe,disposable:et}=S.invokeFunction(dn,Ke);super(St,he,Me,nt,pt,Ne),this.disposables.add(et),this.internals=new wn(this,Ke,Oe,Ke.overrideStyles,V,Y,we),this.disposables.add(this.internals)}updateOptions(St={}){super.updateOptions(St),St.overrideStyles!==void 0&&this.internals.updateStyleOverrides(St.overrideStyles),this.internals.updateOptions(St)}};zi=jt([di(6,kt.TG),di(7,sn.i6),di(8,fi),di(9,tn.Ui)],zi);let un=class extends Wi{get onDidOpen(){return this.internals.onDidOpen}constructor(St,he,Me,nt,pt,Ke,S,V,Y,we){let{options:Ne,getTypeNavigationMode:Oe,disposable:et}=S.invokeFunction(dn,Ke);super(St,he,Me,nt,pt,Ne),this.disposables.add(et),this.internals=new wn(this,Ke,Oe,Ke.overrideStyles,V,Y,we),this.disposables.add(this.internals)}updateOptions(St={}){super.updateOptions(St),St.overrideStyles&&this.internals.updateStyleOverrides(St.overrideStyles),this.internals.updateOptions(St)}};un=jt([di(6,kt.TG),di(7,sn.i6),di(8,fi),di(9,tn.Ui)],un);let Ln=class extends en{constructor(St,he,Me,nt,pt,Ke,S,V,Y,we,Ne){let{options:Oe,getTypeNavigationMode:et,disposable:at}=V.invokeFunction(dn,S);super(St,he,Me,nt,pt,Ke,Oe),this.disposables.add(at),this.internals=new wn(this,S,et,S.overrideStyles,Y,we,Ne),this.disposables.add(this.internals)}updateOptions(St){super.updateOptions(St),this.internals.updateOptions(St)}};function pn(St){let he=St.getValue(Jt);if(he==="highlight")return H.Highlight;if(he==="filter")return H.Filter;let Me=St.getValue($t);return Me==="simple"||Me==="highlight"?H.Highlight:Me==="filter"?H.Filter:void 0}function _n(St){let he=St.getValue(ai);return he==="fuzzy"?z.Fuzzy:he==="contiguous"?z.Contiguous:void 0}function dn(St,he){var Me;let nt=St.get(tn.Ui),pt=St.get(Xt.u),Ke=St.get(sn.i6),S=St.get(kt.TG),V=he.horizontalScrolling!==void 0?he.horizontalScrolling:!!nt.getValue(zt),[Y,we]=S.invokeFunction(oi,he),Ne=he.additionalScrollHeight,Oe=he.renderIndentGuides!==void 0?he.renderIndentGuides:nt.getValue(Li);return{getTypeNavigationMode:()=>{let et=Ke.getContextKeyValue($e);if(et==="automatic")return A.AA.Automatic;if(et==="trigger"||Ke.getContextKeyValue(ot)===!1)return A.AA.Trigger;let at=nt.getValue(Gt);return at==="automatic"?A.AA.Automatic:at==="trigger"?A.AA.Trigger:void 0},disposable:we,options:Object.assign(Object.assign({keyboardSupport:!1},Y),{indent:typeof nt.getValue(_i)=="number"?nt.getValue(_i):void 0,renderIndentGuides:Oe,smoothScrolling:!!nt.getValue(ri),defaultFindMode:pn(nt),defaultFindMatchType:_n(nt),horizontalScrolling:V,scrollByPage:!!nt.getValue(si),additionalScrollHeight:Ne,hideTwistiesOfChildlessElements:he.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(Me=he.expandOnlyOnTwistieClick)!==null&&Me!==void 0?Me:nt.getValue(mt)==="doubleClick",contextViewProvider:pt,findWidgetStyles:Mt.uX})}}Ln=jt([di(7,kt.TG),di(8,sn.i6),di(9,fi),di(10,tn.Ui)],Ln);let wn=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(St,he,Me,nt,pt,Ke,S){var V;this.tree=St,this.disposables=[],this.contextKeyService=Tt(pt,St),this.listSupportsMultiSelect=Wt.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(he.multipleSelectionSupport!==!1),Nt.bindTo(this.contextKeyService).set(!!he.selectionNavigation),this.listSupportFindWidget=dt.bindTo(this.contextKeyService),this.listSupportFindWidget.set((V=he.findWidgetEnabled)===null||V===void 0||V),this.hasSelectionOrFocus=Ze.bindTo(this.contextKeyService),this.hasDoubleSelection=rt.bindTo(this.contextKeyService),this.hasMultiSelection=yt.bindTo(this.contextKeyService),this.treeElementCanCollapse=Re.bindTo(this.contextKeyService),this.treeElementHasParent=qe.bindTo(this.contextKeyService),this.treeElementCanExpand=Ue.bindTo(this.contextKeyService),this.treeElementHasChild=Pe.bindTo(this.contextKeyService),this.treeFindOpen=Xe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=wt(S),this.updateStyleOverrides(nt);let Y=()=>{let Ne=St.getFocus()[0];if(!Ne)return;let Oe=St.getNode(Ne);this.treeElementCanCollapse.set(Oe.collapsible&&!Oe.collapsed),this.treeElementHasParent.set(!!St.getParentElement(Ne)),this.treeElementCanExpand.set(Oe.collapsible&&Oe.collapsed),this.treeElementHasChild.set(!!St.getFirstElementChild(Ne))},we=new Set;we.add($e),we.add(ot),this.disposables.push(this.contextKeyService,Ke.register(St),St.onDidChangeSelection(()=>{let Ne=St.getSelection(),Oe=St.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(Ne.length>0||Oe.length>0),this.hasMultiSelection.set(Ne.length>1),this.hasDoubleSelection.set(Ne.length===2)})}),St.onDidChangeFocus(()=>{let Ne=St.getSelection(),Oe=St.getFocus();this.hasSelectionOrFocus.set(Ne.length>0||Oe.length>0),Y()}),St.onDidChangeCollapseState(Y),St.onDidChangeModel(Y),St.onDidChangeFindOpenState(Ne=>this.treeFindOpen.set(Ne)),S.onDidChangeConfiguration(Ne=>{let Oe={};if(Ne.affectsConfiguration(Ot)&&(this._useAltAsMultipleSelectionModifier=wt(S)),Ne.affectsConfiguration(_i)){let et=S.getValue(_i);Oe=Object.assign(Object.assign({},Oe),{indent:et})}if(Ne.affectsConfiguration(Li)&&he.renderIndentGuides===void 0){let et=S.getValue(Li);Oe=Object.assign(Object.assign({},Oe),{renderIndentGuides:et})}if(Ne.affectsConfiguration(ri)){let et=!!S.getValue(ri);Oe=Object.assign(Object.assign({},Oe),{smoothScrolling:et})}if(Ne.affectsConfiguration(Jt)||Ne.affectsConfiguration($t)){let et=pn(S);Oe=Object.assign(Object.assign({},Oe),{defaultFindMode:et})}if(Ne.affectsConfiguration(Gt)||Ne.affectsConfiguration($t)){let et=Me();Oe=Object.assign(Object.assign({},Oe),{typeNavigationMode:et})}if(Ne.affectsConfiguration(ai)){let et=_n(S);Oe=Object.assign(Object.assign({},Oe),{defaultFindMatchType:et})}if(Ne.affectsConfiguration(zt)&&he.horizontalScrolling===void 0){let et=!!S.getValue(zt);Oe=Object.assign(Object.assign({},Oe),{horizontalScrolling:et})}if(Ne.affectsConfiguration(si)){let et=!!S.getValue(si);Oe=Object.assign(Object.assign({},Oe),{scrollByPage:et})}if(Ne.affectsConfiguration(mt)&&he.expandOnlyOnTwistieClick===void 0&&(Oe=Object.assign(Object.assign({},Oe),{expandOnlyOnTwistieClick:S.getValue(mt)==="doubleClick"})),Ne.affectsConfiguration(qt)){let et=S.getValue(qt);Oe=Object.assign(Object.assign({},Oe),{mouseWheelScrollSensitivity:et})}if(Ne.affectsConfiguration(je)){let et=S.getValue(je);Oe=Object.assign(Object.assign({},Oe),{fastScrollSensitivity:et})}Object.keys(Oe).length>0&&St.updateOptions(Oe)}),this.contextKeyService.onDidChangeContext(Ne=>{Ne.affectsSome(we)&&St.updateOptions({typeNavigationMode:Me()})})),this.navigator=new gn(St,Object.assign({configurationService:S},he)),this.disposables.push(this.navigator)}updateOptions(St){St.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!St.multipleSelectionSupport)}updateStyleOverrides(St){this.tree.style(St?(0,Mt.TU)(St):Mt.O2)}dispose(){this.disposables=(0,_.B9)(this.disposables)}};wn=jt([di(4,sn.i6),di(5,fi),di(6,tn.Ui)],wn),ft.B.as(yn.IP.Configuration).registerConfiguration({id:"workbench",order:7,title:(0,q.NC)("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Ot]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[(0,q.NC)("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,q.NC)("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,q.NC)({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[ti]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,q.NC)({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[zt]:{type:"boolean",default:!1,description:(0,q.NC)("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[si]:{type:"boolean",default:!1,description:(0,q.NC)("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[_i]:{type:"number",default:8,minimum:4,maximum:40,description:(0,q.NC)("tree indent setting","Controls tree indentation in pixels.")},[Li]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,q.NC)("render tree indent guides","Controls whether the tree should render indent guides.")},[ri]:{type:"boolean",default:!1,description:(0,q.NC)("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[qt]:{type:"number",default:1,markdownDescription:(0,q.NC)("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[je]:{type:"number",default:5,markdownDescription:(0,q.NC)("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[Jt]:{type:"string",enum:["highlight","filter"],enumDescriptions:[(0,q.NC)("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),(0,q.NC)("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:(0,q.NC)("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[$t]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,q.NC)("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,q.NC)("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,q.NC)("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,q.NC)("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:(0,q.NC)("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[ai]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[(0,q.NC)("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),(0,q.NC)("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:(0,q.NC)("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[mt]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,q.NC)("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Gt]:{type:"string",enum:["automatic","trigger"],default:"automatic",description:(0,q.NC)("typeNavigationMode","Controls the how type navigation works in lists and trees in the workbench. When set to 'trigger', type navigation begins once the 'list.triggerTypeNavigation' command is run.")}}})},3557:(ut,Ie,t)=>{"use strict";t.d(Ie,{VZ:()=>I,in:()=>_,kw:()=>v,qA:()=>f});var m=t(4669),B=t(5976),u=t(3983);let I=(0,t(2065).yh)("logService");var _;(function(d){d[d.Off=0]="Off",d[d.Trace=1]="Trace",d[d.Debug=2]="Debug",d[d.Info=3]="Info",d[d.Warning=4]="Warning",d[d.Error=5]="Error"})(_||(_={}));let A=_.Info;class x extends B.JT{constructor(){super(...arguments),this.level=A,this._onDidChangeLogLevel=this._register(new m.Q5),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(o){this.level!==o&&(this.level=o,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(o){return this.level!==_.Off&&this.level<=o}}class v extends x{constructor(o=A,h=!0){super(),this.useColors=h,this.setLevel(o)}trace(o,...h){this.checkLogLevel(_.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",o,...h):console.log(o,...h))}debug(o,...h){this.checkLogLevel(_.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",o,...h):console.log(o,...h))}info(o,...h){this.checkLogLevel(_.Info)&&(this.useColors?console.log("%c INFO","color: #33f",o,...h):console.log(o,...h))}error(o,...h){this.checkLogLevel(_.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",o,...h):console.error(o,...h))}dispose(){}}class f extends x{constructor(o){super(),this.loggers=o,o.length&&this.setLevel(o[0].getLevel())}setLevel(o){for(let h of this.loggers)h.setLevel(o);super.setLevel(o)}trace(o,...h){for(let r of this.loggers)r.trace(o,...h)}debug(o,...h){for(let r of this.loggers)r.debug(o,...h)}info(o,...h){for(let r of this.loggers)r.info(o,...h)}error(o,...h){for(let r of this.loggers)r.error(o,...h)}dispose(){for(let o of this.loggers)o.dispose()}}new u.uy("logLevel",function(d){switch(d){case _.Trace:return"trace";case _.Debug:return"debug";case _.Info:return"info";case _.Warning:return"warn";case _.Error:return"error";case _.Off:return"off"}}(_.Info))},8674:(ut,Ie,t)=>{"use strict";t.d(Ie,{H0:()=>B,ZL:()=>m,lT:()=>A});var m,B,u=t(4603),I=t(3580),_=t(2065);(function(x){x[x.Hint=1]="Hint",x[x.Info=2]="Info",x[x.Warning=4]="Warning",x[x.Error=8]="Error"})(m||(m={})),function(x){x.compare=function(f,d){return d-f};let v=Object.create(null);v[x.Error]=(0,I.NC)("sev.error","Error"),v[x.Warning]=(0,I.NC)("sev.warning","Warning"),v[x.Info]=(0,I.NC)("sev.info","Info"),x.toString=function(f){return v[f]||""},x.fromSeverity=function(f){switch(f){case u.Z.Error:return x.Error;case u.Z.Warning:return x.Warning;case u.Z.Info:return x.Info;case u.Z.Ignore:return x.Hint}},x.toSeverity=function(f){switch(f){case x.Error:return u.Z.Error;case x.Warning:return u.Z.Warning;case x.Info:return u.Z.Info;case x.Hint:return u.Z.Ignore}}}(m||(m={})),function(x){let v="";function f(d,o){let h=[v];return d.source?h.push(d.source.replace("\xA6","\\\xA6")):h.push(v),d.code?typeof d.code=="string"?h.push(d.code.replace("\xA6","\\\xA6")):h.push(d.code.value.replace("\xA6","\\\xA6")):h.push(v),d.severity!==void 0&&d.severity!==null?h.push(m.toString(d.severity)):h.push(v),d.message&&o?h.push(d.message.replace("\xA6","\\\xA6")):h.push(v),d.startLineNumber!==void 0&&d.startLineNumber!==null?h.push(d.startLineNumber.toString()):h.push(v),d.startColumn!==void 0&&d.startColumn!==null?h.push(d.startColumn.toString()):h.push(v),d.endLineNumber!==void 0&&d.endLineNumber!==null?h.push(d.endLineNumber.toString()):h.push(v),d.endColumn!==void 0&&d.endColumn!==null?h.push(d.endColumn.toString()):h.push(v),h.push(v),h.join("\xA6")}x.makeKey=function(d){return f(d,!0)},x.makeKeyOptionalMessage=f}(B||(B={}));let A=(0,_.yh)("markerService")},9422:(ut,Ie,t)=>{"use strict";t.d(Ie,{EO:()=>_,lT:()=>I,zb:()=>u});var m=t(4603),B=t(2065),u=m.Z;let I=(0,B.yh)("notificationService");class _{}},988:(ut,Ie,t)=>{"use strict";t.d(Ie,{Gs:()=>_,v4:()=>u,xI:()=>A,xn:()=>I});var m=t(7295),B=t(666);let u=(0,t(2065).yh)("openerService");function I(x,v){return B.o.isUri(x)?(0,m.qq)(x.scheme,v):(0,m.ok)(x,v+":")}function _(x,...v){return v.some(f=>I(x,f))}function A(x){let v,f=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(x.fragment);return f&&(v={startLineNumber:parseInt(f[1]),startColumn:f[2]?parseInt(f[2]):1,endLineNumber:f[4]?parseInt(f[4]):void 0,endColumn:f[4]?f[5]?parseInt(f[5]):1:void 0},x=x.with({fragment:""})),{selection:v,uri:x}}},535:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ex:()=>u,R9:()=>B,ek:()=>I});var m=t(2065);let B=(0,m.yh)("progressService");Object.freeze({total(){},worked(){},done(){}});class u{constructor(A){this.callback=A}report(A){this._value=A,this.callback(this._value)}}u.None=Object.freeze({report(){}});let I=(0,m.yh)("editorProgressService")},725:(ut,Ie,t)=>{"use strict";t.d(Ie,{IP:()=>_,Ry:()=>m});var m,B=t(9488),u=t(5976),I=t(9872);(function(A){A[A.PRESERVE=0]="PRESERVE",A[A.LAST=1]="LAST"})(m||(m={}));let _={Quickaccess:"workbench.contributions.quickaccess"};I.B.add(_.Quickaccess,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(A){return A.prefix.length===0?this.defaultProvider=A:this.providers.push(A),this.providers.sort((x,v)=>v.prefix.length-x.prefix.length),(0,u.OF)(()=>{this.providers.splice(this.providers.indexOf(A),1),this.defaultProvider===A&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return(0,B.kX)([this.defaultProvider,...this.providers])}getQuickAccessProvider(A){return A&&this.providers.find(x=>A.startsWith(x.prefix))||this.defaultProvider}})},1157:(ut,Ie,t)=>{"use strict";t.d(Ie,{Jq:()=>u,X5:()=>B,eJ:()=>_,jG:()=>I});var m=t(2065);let B={ctrlCmd:!1,alt:!1};var u,I;(function(A){A[A.Blur=1]="Blur",A[A.Gesture=2]="Gesture",A[A.Other=3]="Other"})(u||(u={})),function(A){A[A.NONE=0]="NONE",A[A.FIRST=1]="FIRST",A[A.SECOND=2]="SECOND",A[A.LAST=3]="LAST"}(I||(I={})),new class{constructor(A){this.options=A}};let _=(0,m.yh)("quickInputService")},9872:(ut,Ie,t)=>{"use strict";t.d(Ie,{B:()=>u});var m=t(5146),B=t(8401);let u=new class{constructor(){this.data=new Map}add(I,_){m.ok(B.HD(I)),m.ok(B.Kn(_)),m.ok(!this.data.has(I),"There is already an extension with this id"),this.data.set(I,_)}as(I){return this.data.get(I)||null}}},6904:(ut,Ie,t)=>{"use strict";t.d(Ie,{Uy:()=>h,vm:()=>c,fk:()=>r});var m,B,u=t(4669),I=t(5976),_=t(8401),A=t(5393),x=function(b,l,a,w){return new(a||(a=Promise))(function(E,D){function L(O){try{R(w.next(O))}catch($){D($)}}function k(O){try{R(w.throw(O))}catch($){D($)}}function R(O){var $;O.done?E(O.value):($=O.value,$ instanceof a?$:new a(function(N){N($)})).then(L,k)}R((w=w.apply(b,l||[])).next())})};(function(b){b[b.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",b[b.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(m||(m={})),function(b){b[b.None=0]="None",b[b.Initialized=1]="Initialized",b[b.Closed=2]="Closed"}(B||(B={}));class v extends I.JT{constructor(l,a=Object.create(null)){super(),this.database=l,this.options=a,this._onDidChangeStorage=this._register(new u.Q5),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=B.None,this.cache=new Map,this.flushDelayer=new A.rH(v.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(l=>this.onDidChangeItemsExternal(l)))}onDidChangeItemsExternal(l){var a,w;(a=l.changed)===null||a===void 0||a.forEach((E,D)=>this.accept(D,E)),(w=l.deleted)===null||w===void 0||w.forEach(E=>this.accept(E,void 0))}accept(l,a){if(this.state===B.Closed)return;let w=!1;(0,_.Jp)(a)?w=this.cache.delete(l):this.cache.get(l)!==a&&(this.cache.set(l,a),w=!0),w&&this._onDidChangeStorage.fire(l)}get(l,a){let w=this.cache.get(l);return(0,_.Jp)(w)?a:w}getBoolean(l,a){let w=this.get(l);return(0,_.Jp)(w)?a:w==="true"}getNumber(l,a){let w=this.get(l);return(0,_.Jp)(w)?a:parseInt(w,10)}set(l,a){return x(this,void 0,void 0,function*(){if(this.state===B.Closed)return;if((0,_.Jp)(a))return this.delete(l);let w=String(a);return this.cache.get(l)!==w?(this.cache.set(l,w),this.pendingInserts.set(l,w),this.pendingDeletes.delete(l),this._onDidChangeStorage.fire(l),this.doFlush()):void 0})}delete(l){return x(this,void 0,void 0,function*(){if(this.state!==B.Closed)return this.cache.delete(l)?(this.pendingDeletes.has(l)||this.pendingDeletes.add(l),this.pendingInserts.delete(l),this._onDidChangeStorage.fire(l),this.doFlush()):void 0})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return x(this,void 0,void 0,function*(){if(!this.hasPending)return;let l={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(l).finally(()=>{var a;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(a=this.whenFlushedCallbacks.pop())===null||a===void 0||a()})})}doFlush(l){return x(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),l)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}v.DEFAULT_FLUSH_DELAY=100;class f{constructor(){this.onDidChangeItemsExternal=u.ju.None,this.items=new Map}updateItems(l){var a,w;return x(this,void 0,void 0,function*(){(a=l.insert)===null||a===void 0||a.forEach((E,D)=>this.items.set(D,E)),(w=l.delete)===null||w===void 0||w.forEach(E=>this.items.delete(E))})}}var d=t(2065);let o="__$__targetStorageMarker",h=(0,d.yh)("storageService");var r;(function(b){b[b.NONE=0]="NONE",b[b.SHUTDOWN=1]="SHUTDOWN"})(r||(r={}));class i extends I.JT{constructor(l={flushInterval:i.DEFAULT_FLUSH_INTERVAL}){super(),this.options=l,this._onDidChangeValue=this._register(new u.K3),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new u.K3),this._onWillSaveState=this._register(new u.Q5),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(l,a){if(a===o){switch(l){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:l})}else this._onDidChangeValue.fire({scope:l,key:a,target:this.getKeyTargets(l)[a]})}get(l,a,w){var E;return(E=this.getStorage(a))===null||E===void 0?void 0:E.get(l,w)}getBoolean(l,a,w){var E;return(E=this.getStorage(a))===null||E===void 0?void 0:E.getBoolean(l,w)}getNumber(l,a,w){var E;return(E=this.getStorage(a))===null||E===void 0?void 0:E.getNumber(l,w)}store(l,a,w,E){(0,_.Jp)(a)?this.remove(l,w):this.withPausedEmitters(()=>{var D;this.updateKeyTarget(l,w,E),(D=this.getStorage(w))===null||D===void 0||D.set(l,a)})}remove(l,a){this.withPausedEmitters(()=>{var w;this.updateKeyTarget(l,a,void 0),(w=this.getStorage(a))===null||w===void 0||w.delete(l)})}withPausedEmitters(l){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{l()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(l,a,w){var E,D;let L=this.getKeyTargets(a);typeof w=="number"?L[l]!==w&&(L[l]=w,(E=this.getStorage(a))===null||E===void 0||E.set(o,JSON.stringify(L))):typeof L[l]=="number"&&(delete L[l],(D=this.getStorage(a))===null||D===void 0||D.set(o,JSON.stringify(L)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(l){switch(l){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(l){let a=this.getStorage(l);return a?function(w){let E=w.get(o);if(E)try{return JSON.parse(E)}catch(D){}return Object.create(null)}(a):Object.create(null)}}i.DEFAULT_FLUSH_INTERVAL=6e4;class c extends i{constructor(){super(),this.applicationStorage=this._register(new v(new f,{hint:m.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new v(new f,{hint:m.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new v(new f,{hint:m.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(l=>this.emitDidChangeValue(1,l))),this._register(this.profileStorage.onDidChangeStorage(l=>this.emitDidChangeValue(0,l))),this._register(this.applicationStorage.onDidChangeStorage(l=>this.emitDidChangeValue(-1,l)))}getStorage(l){switch(l){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}},829:(ut,Ie,t)=>{"use strict";t.d(Ie,{b:()=>m});let m=(0,t(2065).yh)("telemetryService")},6253:(ut,Ie,t)=>{"use strict";t.d(Ie,{BM:()=>h,Hc:()=>x,O2:()=>d,TU:()=>o,ZR:()=>r,b5:()=>_,eO:()=>u,ku:()=>f,pl:()=>A,uX:()=>v,wG:()=>I});var m=t(3910),B=t(1264);let u={keybindingLabelBackground:(0,m.n_1)(m.oQ$),keybindingLabelForeground:(0,m.n_1)(m.lWp),keybindingLabelBorder:(0,m.n_1)(m.AWI),keybindingLabelBottomBorder:(0,m.n_1)(m.K19),keybindingLabelShadow:(0,m.n_1)(m.rh)},I={buttonForeground:(0,m.n_1)(m.j5u),buttonSeparator:(0,m.n_1)(m.iFQ),buttonBackground:(0,m.n_1)(m.b7$),buttonHoverBackground:(0,m.n_1)(m.GO4),buttonSecondaryForeground:(0,m.n_1)(m.qBU),buttonSecondaryBackground:(0,m.n_1)(m.ESD),buttonSecondaryHoverBackground:(0,m.n_1)(m.xEn),buttonBorder:(0,m.n_1)(m.GYc)},_={progressBarBackground:(0,m.n_1)(m.zRJ)},A={inputActiveOptionBorder:(0,m.n_1)(m.PRb),inputActiveOptionForeground:(0,m.n_1)(m.Pvw),inputActiveOptionBackground:(0,m.n_1)(m.XEs)},x=((0,m.n_1)(m.SUp),(0,m.n_1)(m.nd),(0,m.n_1)(m.BQ0),(0,m.n_1)(m.D0T),(0,m.n_1)(m.Hfx),(0,m.n_1)(m.rh),(0,m.n_1)(m.lRK),(0,m.n_1)(m.JpG),(0,m.n_1)(m.BOY),(0,m.n_1)(m.OLZ),(0,m.n_1)(m.url),{inputBackground:(0,m.n_1)(m.sEe),inputForeground:(0,m.n_1)(m.zJb),inputBorder:(0,m.n_1)(m.dt_),inputValidationInfoBorder:(0,m.n_1)(m.EPQ),inputValidationInfoBackground:(0,m.n_1)(m._lC),inputValidationInfoForeground:(0,m.n_1)(m.YI3),inputValidationWarningBorder:(0,m.n_1)(m.C3g),inputValidationWarningBackground:(0,m.n_1)(m.RV_),inputValidationWarningForeground:(0,m.n_1)(m.SUG),inputValidationErrorBorder:(0,m.n_1)(m.OZR),inputValidationErrorBackground:(0,m.n_1)(m.paE),inputValidationErrorForeground:(0,m.n_1)(m._t9)}),v={listFilterWidgetBackground:(0,m.n_1)(m.vGG),listFilterWidgetOutline:(0,m.n_1)(m.oSI),listFilterWidgetNoMatchesOutline:(0,m.n_1)(m.Saq),listFilterWidgetShadow:(0,m.n_1)(m.y65),inputBoxStyles:x,toggleStyles:A},f={badgeBackground:(0,m.n_1)(m.g8u),badgeForeground:(0,m.n_1)(m.qeD),badgeBorder:(0,m.n_1)(m.lRK)},d=((0,m.n_1)(m.ixd),(0,m.n_1)(m.l80),(0,m.n_1)(m.H6q),(0,m.n_1)(m.H6q),(0,m.n_1)(m.fSI),{listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:(0,m.n_1)(m._bK),listFocusForeground:(0,m.n_1)(m._2n),listFocusOutline:(0,m.n_1)(m.Oop),listActiveSelectionBackground:(0,m.n_1)(m.dCr),listActiveSelectionForeground:(0,m.n_1)(m.M6C),listActiveSelectionIconForeground:(0,m.n_1)(m.Tnx),listFocusAndSelectionOutline:(0,m.n_1)(m.Bqu),listFocusAndSelectionBackground:(0,m.n_1)(m.dCr),listFocusAndSelectionForeground:(0,m.n_1)(m.M6C),listInactiveSelectionBackground:(0,m.n_1)(m.rg2),listInactiveSelectionIconForeground:(0,m.n_1)(m.kvU),listInactiveSelectionForeground:(0,m.n_1)(m.ytC),listInactiveFocusBackground:(0,m.n_1)(m.s$),listInactiveFocusOutline:(0,m.n_1)(m.F3d),listHoverBackground:(0,m.n_1)(m.mV1),listHoverForeground:(0,m.n_1)(m.$d5),listDropBackground:(0,m.n_1)(m.AS1),listSelectionOutline:(0,m.n_1)(m.xL1),listHoverOutline:(0,m.n_1)(m.xL1),treeIndentGuidesStroke:(0,m.n_1)(m.UnT),treeInactiveIndentGuidesStroke:(0,m.n_1)(m.KjV),tableColumnsBorder:(0,m.n_1)(m.uxu),tableOddRowsBackgroundColor:(0,m.n_1)(m.EQn)});function o(i){return function(c,b){let l=Object.assign({},b);for(let a in c){let w=c[a];l[a]=w!==void 0?(0,m.n_1)(w):void 0}return l}(i,d)}let h={selectBackground:(0,m.n_1)(m.XV0),selectListBackground:(0,m.n_1)(m.Fgs),selectForeground:(0,m.n_1)(m._g0),decoratorRightForeground:(0,m.n_1)(m.kJk),selectBorder:(0,m.n_1)(m.a9O),focusBorder:(0,m.n_1)(m.R80),listFocusBackground:(0,m.n_1)(m.Vqd),listInactiveSelectionIconForeground:(0,m.n_1)(m.cbQ),listFocusForeground:(0,m.n_1)(m.NPS),listFocusOutline:(0,m.BtC)(m.xL1,B.Il.transparent.toString()),listHoverBackground:(0,m.n_1)(m.mV1),listHoverForeground:(0,m.n_1)(m.$d5),listHoverOutline:(0,m.n_1)(m.xL1),selectListBorder:(0,m.n_1)(m.D1_),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},r={shadowColor:(0,m.n_1)(m.rh),borderColor:(0,m.n_1)(m.Cdg),foregroundColor:(0,m.n_1)(m.DEr),backgroundColor:(0,m.n_1)(m.Hz8),selectionForegroundColor:(0,m.n_1)(m.jbW),selectionBackgroundColor:(0,m.n_1)(m.$DX),selectionBorderColor:(0,m.n_1)(m.E3h),separatorColor:(0,m.n_1)(m.ZGJ),scrollbarShadow:(0,m.n_1)(m._wn),scrollbarSliderBackground:(0,m.n_1)(m.etL),scrollbarSliderHoverBackground:(0,m.n_1)(m.ABB),scrollbarSliderActiveBackground:(0,m.n_1)(m.ynu)}},3910:(ut,Ie,t)=>{"use strict";t.d(Ie,{$DX:()=>un,$d5:()=>Jt,A42:()=>L,ABB:()=>Ee,AS1:()=>Gt,AWI:()=>ct,BOY:()=>hi,BQ0:()=>yi,Bqu:()=>qe,BtC:()=>d,C3g:()=>H,CNo:()=>Xt,Cdg:()=>Dn,CzK:()=>Si,D0T:()=>Ve,D1_:()=>tt,DEr:()=>Yt,Dut:()=>me,E3h:()=>Ln,EPQ:()=>K,EQn:()=>oi,ES4:()=>Wi,ESD:()=>U,EiJ:()=>yn,F3d:()=>ti,F9q:()=>rt,Fgs:()=>q,Fm_:()=>Ne,GO4:()=>ce,GYc:()=>be,Gj_:()=>_t,Gwp:()=>$t,H6q:()=>St,HCL:()=>di,Hfx:()=>Ye,Hz8:()=>Ai,IPX:()=>o,IYc:()=>at,Ido:()=>c,Itd:()=>Zt,Ivo:()=>gt,JpG:()=>ii,K19:()=>Kt,KjV:()=>wt,L_t:()=>yt,M6C:()=>Pe,MUv:()=>en,NOs:()=>We,NPS:()=>Pi,Ng6:()=>Qe,OLZ:()=>wi,OZR:()=>oe,Oop:()=>Re,P4M:()=>Te,P6G:()=>r,P6Y:()=>Ze,PRb:()=>$,PX0:()=>si,PpC:()=>ft,Pvw:()=>T,QO2:()=>v,R80:()=>l,RV_:()=>j,Rzx:()=>Vi,SPM:()=>Oe,SUG:()=>F,SUY:()=>et,SUp:()=>ei,Saq:()=>qt,T83:()=>ee,Tnx:()=>Xe,UnT:()=>mt,VVv:()=>It,Vqd:()=>gn,XEs:()=>N,XV0:()=>fe,XZx:()=>b,YI3:()=>W,ZGJ:()=>pn,ZnX:()=>bi,_2n:()=>dt,_Yy:()=>kt,_bK:()=>Nt,_g0:()=>p,_lC:()=>C,_t9:()=>J,_wn:()=>ye,a9O:()=>re,b6y:()=>te,b7$:()=>se,bKB:()=>jt,c63:()=>le,cbQ:()=>Ni,cvW:()=>xe,dCr:()=>Ue,dRz:()=>i,dt_:()=>O,etL:()=>Ce,fSI:()=>he,g8u:()=>ve,gkn:()=>sn,hEj:()=>pi,hX8:()=>Mt,iFQ:()=>ie,ixd:()=>wn,j5u:()=>ne,jUe:()=>rn,jbW:()=>zi,kJk:()=>Qt,kVY:()=>Ft,keg:()=>Ri,kvU:()=>Tt,kwl:()=>vn,l80:()=>dn,lRK:()=>a,lUq:()=>_n,lWp:()=>Lt,lXJ:()=>_e,loF:()=>xt,mV1:()=>zt,n_1:()=>f,nd:()=>ki,nyM:()=>Xi,oQ$:()=>mi,oSI:()=>ri,opG:()=>At,ov3:()=>lt,pW3:()=>ke,paE:()=>z,phM:()=>fi,pnM:()=>tn,qBU:()=>de,qeD:()=>X,rg2:()=>$e,rh:()=>D,s$:()=>Ot,sEe:()=>k,tZ6:()=>ht,uoC:()=>Le,url:()=>E,uxu:()=>Rt,vGG:()=>Li,xEn:()=>ue,xL1:()=>w,y65:()=>je,yJx:()=>ci,yb5:()=>li,ynu:()=>Ae,ypS:()=>Wt,ytC:()=>ot,zJb:()=>R,zKr:()=>bt,zRJ:()=>Fe});var m=t(5393),B=t(1264),u=t(4669),I=t(5146),_=t(3580),A=t(1294),x=t(9872);function v(ji){return`--vscode-${ji.replace(/\./g,"-")}`}function f(ji){return`var(${v(ji)})`}function d(ji,Tn){return`var(${v(ji)}, ${Tn})`}let o={ColorContribution:"base.contributions.colors"},h=new class{constructor(){this._onDidChangeSchema=new u.Q5,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(ji,Tn,bn,Fn=!1,Xn){let ho={id:ji,description:bn,defaults:Tn,needsTransparency:Fn,deprecationMessage:Xn};this.colorsById[ji]=ho;let _o={type:"string",description:bn,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return Xn&&(_o.deprecationMessage=Xn),this.colorSchema.properties[ji]=_o,this.colorReferenceSchema.enum.push(ji),this.colorReferenceSchema.enumDescriptions.push(bn),this._onDidChangeSchema.fire(),ji}getColors(){return Object.keys(this.colorsById).map(ji=>this.colorsById[ji])}resolveDefaultColor(ji,Tn){let bn=this.colorsById[ji];if(bn&&bn.defaults)return xn(bn.defaults[Tn.type],Tn)}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort((ji,Tn)=>{let bn=ji.indexOf(".")===-1?0:1,Fn=Tn.indexOf(".")===-1?0:1;return bn!==Fn?bn-Fn:ji.localeCompare(Tn)}).map(ji=>`- \`${ji}\`: ${this.colorsById[ji].description}`).join(`
`)}};function r(ji,Tn,bn,Fn,Xn){return h.registerColor(ji,Tn,bn,Fn,Xn)}x.B.add(o.ColorContribution,h);let i=r("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},_.NC("foreground","Overall foreground color. This color is only used if not overridden by a component.")),c=(r("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},_.NC("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),r("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},_.NC("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."))),b=(r("descriptionForeground",{light:"#717171",dark:bi(i,.7),hcDark:bi(i,.7),hcLight:bi(i,.7)},_.NC("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),r("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},_.NC("iconForeground","The default color for icons in the workbench."))),l=r("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},_.NC("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),a=r("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},_.NC("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),w=r("contrastActiveBorder",{light:null,dark:null,hcDark:l,hcLight:l},_.NC("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),E=(r("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},_.NC("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),r("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:B.Il.black,hcLight:"#292929"},_.NC("textSeparatorForeground","Color for text separators.")),r("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},_.NC("textLinkForeground","Foreground color for links in text."))),D=(r("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},_.NC("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),r("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},_.NC("textPreformatForeground","Foreground color for preformatted text segments.")),r("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},_.NC("textBlockQuoteBackground","Background color for block quotes in text.")),r("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:B.Il.white,hcLight:"#292929"},_.NC("textBlockQuoteBorder","Border color for block quotes in text.")),r("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:B.Il.black,hcLight:"#F2F2F2"},_.NC("textCodeBlockBackground","Background color for code blocks in text.")),r("widget.shadow",{dark:bi(B.Il.black,.36),light:bi(B.Il.black,.16),hcDark:null,hcLight:null},_.NC("widgetShadow","Shadow color of widgets such as find/replace inside the editor."))),L=r("widget.border",{dark:null,light:null,hcDark:a,hcLight:a},_.NC("widgetBorder","Border color of widgets such as find/replace inside the editor.")),k=r("input.background",{dark:"#3C3C3C",light:B.Il.white,hcDark:B.Il.black,hcLight:B.Il.white},_.NC("inputBoxBackground","Input box background.")),R=r("input.foreground",{dark:i,light:i,hcDark:i,hcLight:i},_.NC("inputBoxForeground","Input box foreground.")),O=r("input.border",{dark:null,light:null,hcDark:a,hcLight:a},_.NC("inputBoxBorder","Input box border.")),$=r("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:a,hcLight:a},_.NC("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),N=(r("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},_.NC("inputOption.hoverBackground","Background color of activated options in input fields.")),r("inputOption.activeBackground",{dark:bi(l,.4),light:bi(l,.2),hcDark:B.Il.transparent,hcLight:B.Il.transparent},_.NC("inputOption.activeBackground","Background hover color of options in input fields."))),T=r("inputOption.activeForeground",{dark:B.Il.white,light:B.Il.black,hcDark:i,hcLight:i},_.NC("inputOption.activeForeground","Foreground color of activated options in input fields.")),C=(r("input.placeholderForeground",{light:bi(i,.5),dark:bi(i,.5),hcDark:bi(i,.7),hcLight:bi(i,.7)},_.NC("inputPlaceholderForeground","Input box foreground color for placeholder text.")),r("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:B.Il.black,hcLight:B.Il.white},_.NC("inputValidationInfoBackground","Input validation background color for information severity."))),W=r("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:i},_.NC("inputValidationInfoForeground","Input validation foreground color for information severity.")),K=r("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:a,hcLight:a},_.NC("inputValidationInfoBorder","Input validation border color for information severity.")),j=r("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:B.Il.black,hcLight:B.Il.white},_.NC("inputValidationWarningBackground","Input validation background color for warning severity.")),F=r("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:i},_.NC("inputValidationWarningForeground","Input validation foreground color for warning severity.")),H=r("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:a,hcLight:a},_.NC("inputValidationWarningBorder","Input validation border color for warning severity.")),z=r("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:B.Il.black,hcLight:B.Il.white},_.NC("inputValidationErrorBackground","Input validation background color for error severity.")),J=r("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:i},_.NC("inputValidationErrorForeground","Input validation foreground color for error severity.")),oe=r("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:a,hcLight:a},_.NC("inputValidationErrorBorder","Input validation border color for error severity.")),fe=r("dropdown.background",{dark:"#3C3C3C",light:B.Il.white,hcDark:B.Il.black,hcLight:B.Il.white},_.NC("dropdownBackground","Dropdown background.")),q=r("dropdown.listBackground",{dark:null,light:null,hcDark:B.Il.black,hcLight:B.Il.white},_.NC("dropdownListBackground","Dropdown list background.")),p=r("dropdown.foreground",{dark:"#F0F0F0",light:i,hcDark:B.Il.white,hcLight:i},_.NC("dropdownForeground","Dropdown foreground.")),re=r("dropdown.border",{dark:fe,light:"#CECECE",hcDark:a,hcLight:a},_.NC("dropdownBorder","Dropdown border.")),ne=r("button.foreground",{dark:B.Il.white,light:B.Il.white,hcDark:B.Il.white,hcLight:B.Il.white},_.NC("buttonForeground","Button foreground color.")),ie=r("button.separator",{dark:bi(ne,.4),light:bi(ne,.4),hcDark:bi(ne,.4),hcLight:bi(ne,.4)},_.NC("buttonSeparator","Button separator color.")),se=r("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},_.NC("buttonBackground","Button background color.")),ce=r("button.hoverBackground",{dark:xi(se,.2),light:Ei(se,.2),hcDark:se,hcLight:se},_.NC("buttonHoverBackground","Button background color when hovering.")),be=r("button.border",{dark:a,light:a,hcDark:a,hcLight:a},_.NC("buttonBorder","Button border color.")),de=r("button.secondaryForeground",{dark:B.Il.white,light:B.Il.white,hcDark:B.Il.white,hcLight:i},_.NC("buttonSecondaryForeground","Secondary button foreground color.")),U=r("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:B.Il.white},_.NC("buttonSecondaryBackground","Secondary button background color.")),ue=r("button.secondaryHoverBackground",{dark:xi(U,.2),light:Ei(U,.2),hcDark:null,hcLight:null},_.NC("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),ve=r("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:B.Il.black,hcLight:"#0F4A85"},_.NC("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),X=r("badge.foreground",{dark:B.Il.white,light:"#333",hcDark:B.Il.white,hcLight:B.Il.white},_.NC("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),ye=r("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},_.NC("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Ce=r("scrollbarSlider.background",{dark:B.Il.fromHex("#797979").transparent(.4),light:B.Il.fromHex("#646464").transparent(.4),hcDark:bi(a,.6),hcLight:bi(a,.4)},_.NC("scrollbarSliderBackground","Scrollbar slider background color.")),Ee=r("scrollbarSlider.hoverBackground",{dark:B.Il.fromHex("#646464").transparent(.7),light:B.Il.fromHex("#646464").transparent(.7),hcDark:bi(a,.8),hcLight:bi(a,.8)},_.NC("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Ae=r("scrollbarSlider.activeBackground",{dark:B.Il.fromHex("#BFBFBF").transparent(.4),light:B.Il.fromHex("#000000").transparent(.6),hcDark:a,hcLight:a},_.NC("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Fe=r("progressBar.background",{dark:B.Il.fromHex("#0E70C0"),light:B.Il.fromHex("#0E70C0"),hcDark:a,hcLight:a},_.NC("progressBarBackground","Background color of the progress bar that can show for long running operations.")),_e=(r("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),r("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},_.NC("editorError.foreground","Foreground color of error squigglies in the editor."))),te=r("editorError.border",{dark:null,light:null,hcDark:B.Il.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},_.NC("errorBorder","If set, color of double underlines for errors in the editor.")),Le=(r("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),r("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},_.NC("editorWarning.foreground","Foreground color of warning squigglies in the editor."))),ke=r("editorWarning.border",{dark:null,light:null,hcDark:B.Il.fromHex("#FFCC00").transparent(.8),hcLight:B.Il.fromHex("#FFCC00").transparent(.8)},_.NC("warningBorder","If set, color of double underlines for warnings in the editor.")),le=(r("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),r("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},_.NC("editorInfo.foreground","Foreground color of info squigglies in the editor."))),ee=r("editorInfo.border",{dark:null,light:null,hcDark:B.Il.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},_.NC("infoBorder","If set, color of double underlines for infos in the editor.")),me=r("editorHint.foreground",{dark:B.Il.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},_.NC("editorHint.foreground","Foreground color of hint squigglies in the editor.")),xe=(r("editorHint.border",{dark:null,light:null,hcDark:B.Il.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},_.NC("hintBorder","If set, color of double underlines for hints in the editor.")),r("sash.hoverBorder",{dark:l,light:l,hcDark:l,hcLight:l},_.NC("sashActiveBorder","Border color of active sashes.")),r("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:B.Il.black,hcLight:B.Il.white},_.NC("editorBackground","Editor background color."))),We=r("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:B.Il.white,hcLight:i},_.NC("editorForeground","Editor default foreground color.")),Ve=(r("editorStickyScroll.background",{light:xe,dark:xe,hcDark:xe,hcLight:xe},_.NC("editorStickyScrollBackground","Sticky scroll background color for the editor")),r("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:B.Il.fromHex("#0F4A85").transparent(.1)},_.NC("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor")),r("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:B.Il.white},_.NC("editorWidgetBackground","Background color of editor widgets, such as find/replace."))),Ye=r("editorWidget.foreground",{dark:i,light:i,hcDark:i,hcLight:i},_.NC("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),tt=r("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:a,hcLight:a},_.NC("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Qe=r("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},_.NC("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),bt=r("quickInput.background",{dark:Ve,light:Ve,hcDark:Ve,hcLight:Ve},_.NC("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),ht=r("quickInput.foreground",{dark:Ye,light:Ye,hcDark:Ye,hcLight:Ye},_.NC("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),xt=r("quickInputTitle.background",{dark:new B.Il(new B.VS(255,255,255,.105)),light:new B.Il(new B.VS(0,0,0,.06)),hcDark:"#000000",hcLight:B.Il.white},_.NC("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Qt=r("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:B.Il.white,hcLight:"#0F4A85"},_.NC("pickerGroupForeground","Quick picker color for grouping labels.")),At=r("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:B.Il.white,hcLight:"#0F4A85"},_.NC("pickerGroupBorder","Quick picker color for grouping borders.")),mi=r("keybindingLabel.background",{dark:new B.Il(new B.VS(128,128,128,.17)),light:new B.Il(new B.VS(221,221,221,.4)),hcDark:B.Il.transparent,hcLight:B.Il.transparent},_.NC("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Lt=r("keybindingLabel.foreground",{dark:B.Il.fromHex("#CCCCCC"),light:B.Il.fromHex("#555555"),hcDark:B.Il.white,hcLight:i},_.NC("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),ct=r("keybindingLabel.border",{dark:new B.Il(new B.VS(51,51,51,.6)),light:new B.Il(new B.VS(204,204,204,.4)),hcDark:new B.Il(new B.VS(111,195,223)),hcLight:a},_.NC("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Kt=r("keybindingLabel.bottomBorder",{dark:new B.Il(new B.VS(68,68,68,.6)),light:new B.Il(new B.VS(187,187,187,.4)),hcDark:new B.Il(new B.VS(111,195,223)),hcLight:i},_.NC("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),pi=r("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},_.NC("editorSelectionBackground","Color of the editor selection.")),li=r("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:B.Il.white},_.NC("editorSelectionForeground","Color of the selected text for high contrast.")),Wi=r("editor.inactiveSelectionBackground",{light:bi(pi,.5),dark:bi(pi,.5),hcDark:bi(pi,.7),hcLight:bi(pi,.5)},_.NC("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Vi=r("editor.selectionHighlightBackground",{light:Pn(pi,xe,.3,.6),dark:Pn(pi,xe,.3,.6),hcDark:null,hcLight:null},_.NC("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Xi=(r("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:w,hcLight:w},_.NC("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),r("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},_.NC("editorFindMatch","Color of the current search match."))),en=r("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},_.NC("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),rn=r("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},_.NC("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),tn=r("editor.findMatchBorder",{light:null,dark:null,hcDark:w,hcLight:w},_.NC("editorFindMatchBorder","Border color of the current search match.")),yn=r("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:w,hcLight:w},_.NC("findMatchHighlightBorder","Border color of the other search matches.")),sn=r("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:bi(w,.4),hcLight:bi(w,.4)},_.NC("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),ci=(r("searchEditor.findMatchBackground",{light:bi(en,.66),dark:bi(en,.66),hcDark:en,hcLight:en},_.NC("searchEditor.queryMatch","Color of the Search Editor query matches.")),r("searchEditor.findMatchBorder",{light:bi(yn,.66),dark:bi(yn,.66),hcDark:yn,hcLight:yn},_.NC("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches.")),r("search.resultsInfoForeground",{light:i,dark:bi(i,.65),hcDark:i,hcLight:i},_.NC("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),r("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},_.NC("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),r("editorHoverWidget.background",{light:Ve,dark:Ve,hcDark:Ve,hcLight:Ve},_.NC("hoverBackground","Background color of the editor hover."))),Xt=(r("editorHoverWidget.foreground",{light:Ye,dark:Ye,hcDark:Ye,hcLight:Ye},_.NC("hoverForeground","Foreground color of the editor hover.")),r("editorHoverWidget.border",{light:tt,dark:tt,hcDark:tt,hcLight:tt},_.NC("hoverBorder","Border color of the editor hover."))),kt=(r("editorHoverWidget.statusBarBackground",{dark:xi(ci,.2),light:Ei(ci,.05),hcDark:Ve,hcLight:Ve},_.NC("statusBarBackground","Background color of the editor hover status bar.")),r("editorLink.activeForeground",{dark:"#4E94CE",light:B.Il.blue,hcDark:B.Il.cyan,hcLight:"#292929"},_.NC("activeLinkForeground","Color of active links."))),It=r("editorInlayHint.foreground",{dark:X,light:X,hcDark:B.Il.black,hcLight:X},_.NC("editorInlayHintForeground","Foreground color of inline hints")),ft=r("editorInlayHint.background",{dark:bi(ve,.8),light:bi(ve,.6),hcDark:"#f38518",hcLight:ve},_.NC("editorInlayHintBackground","Background color of inline hints")),Mt=r("editorInlayHint.typeForeground",{dark:It,light:It,hcDark:It,hcLight:It},_.NC("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),jt=r("editorInlayHint.typeBackground",{dark:ft,light:ft,hcDark:ft,hcLight:ft},_.NC("editorInlayHintBackgroundTypes","Background color of inline hints for types")),di=r("editorInlayHint.parameterForeground",{dark:It,light:It,hcDark:It,hcLight:It},_.NC("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),fi=r("editorInlayHint.parameterBackground",{dark:ft,light:ft,hcDark:ft,hcLight:ft},_.NC("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),Si=(r("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},_.NC("editorLightBulbForeground","The color used for the lightbulb actions icon.")),r("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},_.NC("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),new B.Il(new B.VS(155,185,85,.2))),Ri=new B.Il(new B.VS(255,0,0,.2)),Wt=r("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},_.NC("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Te=r("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},_.NC("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Ze=(r("diffEditor.insertedLineBackground",{dark:Si,light:Si,hcDark:null,hcLight:null},_.NC("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),r("diffEditor.removedLineBackground",{dark:Ri,light:Ri,hcDark:null,hcLight:null},_.NC("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),r("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),r("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),r("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content."))),rt=r("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),yt=(r("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},_.NC("diffEditorInsertedOutline","Outline color for the text that got inserted.")),r("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},_.NC("diffEditorRemovedOutline","Outline color for text that got removed.")),r("diffEditor.border",{dark:null,light:null,hcDark:a,hcLight:a},_.NC("diffEditorBorder","Border color between the two text editors.")),r("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},_.NC("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."))),Nt=r("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),dt=r("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Re=r("list.focusOutline",{dark:l,light:l,hcDark:w,hcLight:w},_.NC("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),qe=r("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Ue=r("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:B.Il.fromHex("#0F4A85").transparent(.1)},_.NC("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Pe=r("list.activeSelectionForeground",{dark:B.Il.white,light:B.Il.white,hcDark:null,hcLight:null},_.NC("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Xe=r("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),$e=r("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:B.Il.fromHex("#0F4A85").transparent(.1)},_.NC("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ot=r("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Tt=r("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ot=r("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ti=r("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),zt=r("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:B.Il.white.transparent(.1),hcLight:B.Il.fromHex("#0F4A85").transparent(.1)},_.NC("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Jt=r("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Gt=r("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},_.NC("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),$t=r("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:l,hcLight:l},_.NC("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),si=r("list.focusHighlightForeground",{dark:$t,light:(ai=Ue,_i=$t,{op:6,if:ai,then:_i,else:"#BBE7FF"}),hcDark:$t,hcLight:$t},_.NC("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));var ai,_i;r("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},_.NC("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),r("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},_.NC("listErrorForeground","Foreground color of list items containing errors.")),r("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},_.NC("listWarningForeground","Foreground color of list items containing warnings."));let Li=r("listFilterWidget.background",{light:Ei(Ve,0),dark:xi(Ve,0),hcDark:Ve,hcLight:Ve},_.NC("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),ri=r("listFilterWidget.outline",{dark:B.Il.transparent,light:B.Il.transparent,hcDark:"#f38518",hcLight:"#007ACC"},_.NC("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),qt=r("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:a,hcLight:a},_.NC("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),je=r("listFilterWidget.shadow",{dark:D,light:D,hcDark:D,hcLight:D},_.NC("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees.")),mt=(r("list.filterMatchBackground",{dark:en,light:en,hcDark:null,hcLight:null},_.NC("listFilterMatchHighlight","Background color of the filtered match.")),r("list.filterMatchBorder",{dark:yn,light:yn,hcDark:a,hcLight:w},_.NC("listFilterMatchHighlightBorder","Border color of the filtered match.")),r("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},_.NC("treeIndentGuidesStroke","Tree stroke color for the indentation guides."))),wt=r("tree.inactiveIndentGuidesStroke",{dark:bi(mt,.4),light:bi(mt,.4),hcDark:bi(mt,.4),hcLight:bi(mt,.4)},_.NC("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Rt=r("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},_.NC("tableColumnsBorder","Table border color between columns.")),oi=r("tree.tableOddRowsBackground",{dark:bi(i,.04),light:bi(i,.04),hcDark:null,hcLight:null},_.NC("tableOddRowsBackgroundColor","Background color for odd table rows.")),ei=(r("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},_.NC("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. ")),r("checkbox.background",{dark:fe,light:fe,hcDark:fe,hcLight:fe},_.NC("checkbox.background","Background color of checkbox widget."))),yi=(r("checkbox.selectBackground",{dark:Ve,light:Ve,hcDark:Ve,hcLight:Ve},_.NC("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),r("checkbox.foreground",{dark:p,light:p,hcDark:p,hcLight:p},_.NC("checkbox.foreground","Foreground color of checkbox widget."))),ki=r("checkbox.border",{dark:re,light:re,hcDark:re,hcLight:re},_.NC("checkbox.border","Border color of checkbox widget.")),Ti=(r("checkbox.selectBorder",{dark:b,light:b,hcDark:b,hcLight:b},_.NC("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),r("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,_.NC("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead"))),Pi=r("quickInputList.focusForeground",{dark:Pe,light:Pe,hcDark:Pe,hcLight:Pe},_.NC("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Ni=r("quickInputList.focusIconForeground",{dark:Xe,light:Xe,hcDark:Xe,hcLight:Xe},_.NC("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),gn=r("quickInputList.focusBackground",{dark:vn(Ti,Ue),light:vn(Ti,Ue),hcDark:null,hcLight:null},_.NC("quickInput.listFocusBackground","Quick picker background color for the focused item.")),Dn=r("menu.border",{dark:null,light:null,hcDark:a,hcLight:a},_.NC("menuBorder","Border color of menus.")),Yt=r("menu.foreground",{dark:p,light:p,hcDark:p,hcLight:p},_.NC("menuForeground","Foreground color of menu items.")),Ai=r("menu.background",{dark:fe,light:fe,hcDark:fe,hcLight:fe},_.NC("menuBackground","Background color of menu items.")),zi=r("menu.selectionForeground",{dark:Pe,light:Pe,hcDark:Pe,hcLight:Pe},_.NC("menuSelectionForeground","Foreground color of the selected menu item in menus.")),un=r("menu.selectionBackground",{dark:Ue,light:Ue,hcDark:Ue,hcLight:Ue},_.NC("menuSelectionBackground","Background color of the selected menu item in menus.")),Ln=r("menu.selectionBorder",{dark:null,light:null,hcDark:w,hcLight:w},_.NC("menuSelectionBorder","Border color of the selected menu item in menus.")),pn=r("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:a,hcLight:a},_.NC("menuSeparatorBackground","Color of a separator menu item in menus.")),_n=r("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},_.NC("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),dn=(r("toolbar.hoverOutline",{dark:null,light:null,hcDark:w,hcLight:w},_.NC("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),r("toolbar.activeBackground",{dark:xi(_n,.1),light:Ei(_n,.1),hcDark:null,hcLight:null},_.NC("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),r("editor.snippetTabstopHighlightBackground",{dark:new B.Il(new B.VS(124,124,124,.3)),light:new B.Il(new B.VS(10,50,100,.2)),hcDark:new B.Il(new B.VS(124,124,124,.3)),hcLight:new B.Il(new B.VS(10,50,100,.2))},_.NC("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),r("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),r("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),r("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new B.Il(new B.VS(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},_.NC("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),r("breadcrumb.foreground",{light:bi(i,.8),dark:bi(i,.8),hcDark:bi(i,.8),hcLight:bi(i,.8)},_.NC("breadcrumbsFocusForeground","Color of focused breadcrumb items."))),wn=r("breadcrumb.background",{light:xe,dark:xe,hcDark:xe,hcLight:xe},_.NC("breadcrumbsBackground","Background color of breadcrumb items.")),St=r("breadcrumb.focusForeground",{light:Ei(i,.2),dark:xi(i,.1),hcDark:xi(i,.1),hcLight:xi(i,.1)},_.NC("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),he=r("breadcrumb.activeSelectionForeground",{light:Ei(i,.2),dark:xi(i,.1),hcDark:xi(i,.1),hcLight:xi(i,.1)},_.NC("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),Me=(r("breadcrumbPicker.background",{light:Ve,dark:Ve,hcDark:Ve,hcLight:Ve},_.NC("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),B.Il.fromHex("#40C8AE").transparent(.5)),nt=B.Il.fromHex("#40A6FF").transparent(.5),pt=B.Il.fromHex("#606060").transparent(.4),Ke=.4,S=r("merge.currentHeaderBackground",{dark:Me,light:Me,hcDark:null,hcLight:null},_.NC("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),V=(r("merge.currentContentBackground",{dark:bi(S,Ke),light:bi(S,Ke),hcDark:bi(S,Ke),hcLight:bi(S,Ke)},_.NC("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),r("merge.incomingHeaderBackground",{dark:nt,light:nt,hcDark:null,hcLight:null},_.NC("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),Y=(r("merge.incomingContentBackground",{dark:bi(V,Ke),light:bi(V,Ke),hcDark:bi(V,Ke),hcLight:bi(V,Ke)},_.NC("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),r("merge.commonHeaderBackground",{dark:pt,light:pt,hcDark:null,hcLight:null},_.NC("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),we=(r("merge.commonContentBackground",{dark:bi(Y,Ke),light:bi(Y,Ke),hcDark:bi(Y,Ke),hcLight:bi(Y,Ke)},_.NC("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),r("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},_.NC("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."))),Ne=(r("editorOverviewRuler.currentContentForeground",{dark:bi(S,1),light:bi(S,1),hcDark:we,hcLight:we},_.NC("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),r("editorOverviewRuler.incomingContentForeground",{dark:bi(V,1),light:bi(V,1),hcDark:we,hcLight:we},_.NC("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),r("editorOverviewRuler.commonContentForeground",{dark:bi(Y,1),light:bi(Y,1),hcDark:we,hcLight:we},_.NC("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),r("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},_.NC("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0)),Oe=r("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},_.NC("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),et=r("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},_.NC("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),at=r("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},_.NC("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),lt=r("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},_.NC("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),_t=r("minimap.errorHighlight",{dark:new B.Il(new B.VS(255,18,18,.7)),light:new B.Il(new B.VS(255,18,18,.7)),hcDark:new B.Il(new B.VS(255,50,50,1)),hcLight:"#B5200D"},_.NC("minimapError","Minimap marker color for errors.")),gt=r("minimap.warningHighlight",{dark:Le,light:Le,hcDark:ke,hcLight:ke},_.NC("overviewRuleWarning","Minimap marker color for warnings.")),Ft=r("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},_.NC("minimapBackground","Minimap background color.")),Zt=r("minimap.foregroundOpacity",{dark:B.Il.fromHex("#000f"),light:B.Il.fromHex("#000f"),hcDark:B.Il.fromHex("#000f"),hcLight:B.Il.fromHex("#000f")},_.NC("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),ii=(r("minimapSlider.background",{light:bi(Ce,.5),dark:bi(Ce,.5),hcDark:bi(Ce,.5),hcLight:bi(Ce,.5)},_.NC("minimapSliderBackground","Minimap slider background color.")),r("minimapSlider.hoverBackground",{light:bi(Ee,.5),dark:bi(Ee,.5),hcDark:bi(Ee,.5),hcLight:bi(Ee,.5)},_.NC("minimapSliderHoverBackground","Minimap slider background color when hovering.")),r("minimapSlider.activeBackground",{light:bi(Ae,.5),dark:bi(Ae,.5),hcDark:bi(Ae,.5),hcLight:bi(Ae,.5)},_.NC("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),r("problemsErrorIcon.foreground",{dark:_e,light:_e,hcDark:_e,hcLight:_e},_.NC("problemsErrorIconForeground","The color used for the problems error icon."))),hi=r("problemsWarningIcon.foreground",{dark:Le,light:Le,hcDark:Le,hcLight:Le},_.NC("problemsWarningIconForeground","The color used for the problems warning icon.")),wi=r("problemsInfoIcon.foreground",{dark:le,light:le,hcDark:le,hcLight:le},_.NC("problemsInfoIconForeground","The color used for the problems info icon."));function Ei(ji,Tn){return{op:0,value:ji,factor:Tn}}function xi(ji,Tn){return{op:1,value:ji,factor:Tn}}function bi(ji,Tn){return{op:2,value:ji,factor:Tn}}function vn(...ji){return{op:4,values:ji}}function Pn(ji,Tn,bn,Fn){return{op:5,value:ji,background:Tn,factor:bn,transparency:Fn}}function xn(ji,Tn){if(ji!==null)return typeof ji=="string"?ji[0]==="#"?B.Il.fromHex(ji):Tn.getColor(ji):ji instanceof B.Il?ji:typeof ji=="object"?function(bn,Fn){var Xn,ho,_o,eo;switch(bn.op){case 0:return(Xn=xn(bn.value,Fn))===null||Xn===void 0?void 0:Xn.darken(bn.factor);case 1:return(ho=xn(bn.value,Fn))===null||ho===void 0?void 0:ho.lighten(bn.factor);case 2:return(_o=xn(bn.value,Fn))===null||_o===void 0?void 0:_o.transparent(bn.factor);case 3:{let po=xn(bn.background,Fn);return po?(eo=xn(bn.value,Fn))===null||eo===void 0?void 0:eo.makeOpaque(po):xn(bn.value,Fn)}case 4:for(let po of bn.values){let Do=xn(po,Fn);if(Do)return Do}return;case 6:return xn(Fn.defines(bn.if)?bn.then:bn.else,Fn);case 5:{let po=xn(bn.value,Fn);if(!po)return;let Do=xn(bn.background,Fn);return Do?po.isDarkerThan(Do)?B.Il.getLighterColor(po,Do,bn.factor).transparent(bn.transparency):B.Il.getDarkerColor(po,Do,bn.factor).transparent(bn.transparency):po.transparent(bn.factor*bn.transparency)}default:throw(0,I.vE)(bn)}}(ji,Tn):void 0}r("charts.foreground",{dark:i,light:i,hcDark:i,hcLight:i},_.NC("chartsForeground","The foreground color used in charts.")),r("charts.lines",{dark:bi(i,.5),light:bi(i,.5),hcDark:bi(i,.5),hcLight:bi(i,.5)},_.NC("chartsLines","The color used for horizontal lines in charts.")),r("charts.red",{dark:_e,light:_e,hcDark:_e,hcLight:_e},_.NC("chartsRed","The red color used in chart visualizations.")),r("charts.blue",{dark:le,light:le,hcDark:le,hcLight:le},_.NC("chartsBlue","The blue color used in chart visualizations.")),r("charts.yellow",{dark:Le,light:Le,hcDark:Le,hcLight:Le},_.NC("chartsYellow","The yellow color used in chart visualizations.")),r("charts.orange",{dark:et,light:et,hcDark:et,hcLight:et},_.NC("chartsOrange","The orange color used in chart visualizations.")),r("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},_.NC("chartsGreen","The green color used in chart visualizations.")),r("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},_.NC("chartsPurple","The purple color used in chart visualizations."));let Qn="vscode://schemas/workbench-colors",ko=x.B.as(A.I.JSONContribution);ko.registerSchema(Qn,h.getColorSchema());let go=new m.pY(()=>ko.notifySchemaChanged(Qn),200);h.onDidChangeSchema(()=>{go.isScheduled()||go.schedule()})},9554:(ut,Ie,t)=>{"use strict";t.d(Ie,{Ks:()=>i,q5:()=>r,s_:()=>a});var m,B,u=t(5393),I=t(3046),_=t(5670),A=t(4669),x=t(8401),v=t(666),f=t(3580),d=t(1294),o=t(9872);(function(w){w.getDefinition=function(E,D){let L=E.defaults;for(;_.k.isThemeIcon(L);){let k=h.getIcon(L.id);if(!k)return;L=k.defaults}return L}})(m||(m={})),function(w){w.toJSONObject=function(E){return{weight:E.weight,style:E.style,src:E.src.map(D=>({format:D.format,location:D.location.toString()}))}},w.fromJSONObject=function(E){let D=L=>(0,x.HD)(L)?L:void 0;if(E&&Array.isArray(E.src)&&E.src.every(L=>(0,x.HD)(L.format)&&(0,x.HD)(L.location)))return{weight:D(E.weight),style:D(E.style),src:E.src.map(L=>({format:L.format,location:v.o.parse(L.location)}))}}}(B||(B={}));let h=new class{constructor(){this._onDidChange=new A.Q5,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,f.NC)("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,f.NC)("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${_.k.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(w,E,D,L){let k=this.iconsById[w];if(k){if(D&&!k.description){k.description=D,this.iconSchema.properties[w].markdownDescription=`${D} $(${w})`;let $=this.iconReferenceSchema.enum.indexOf(w);$!==-1&&(this.iconReferenceSchema.enumDescriptions[$]=D),this._onDidChange.fire()}return k}let R={id:w,description:D,defaults:E,deprecationMessage:L};this.iconsById[w]=R;let O={$ref:"#/definitions/icons"};return L&&(O.deprecationMessage=L),D&&(O.markdownDescription=`${D}: $(${w})`),this.iconSchema.properties[w]=O,this.iconReferenceSchema.enum.push(w),this.iconReferenceSchema.enumDescriptions.push(D||""),this._onDidChange.fire(),{id:w}}getIcons(){return Object.keys(this.iconsById).map(w=>this.iconsById[w])}getIcon(w){return this.iconsById[w]}getIconSchema(){return this.iconSchema}toString(){let w=(k,R)=>k.id.localeCompare(R.id),E=k=>{for(;_.k.isThemeIcon(k.defaults);)k=this.iconsById[k.defaults.id];return`codicon codicon-${k?k.id:""}`},D=[];D.push("| preview     | identifier                        | default codicon ID                | description"),D.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let L=Object.keys(this.iconsById).map(k=>this.iconsById[k]);for(let k of L.filter(R=>!!R.description).sort(w))D.push(`|<i class="${E(k)}"></i>|${k.id}|${_.k.isThemeIcon(k.defaults)?k.defaults.id:k.id}|${k.description||""}|`);D.push("| preview     | identifier                        "),D.push("| ----------- | --------------------------------- |");for(let k of L.filter(R=>!_.k.isThemeIcon(R.defaults)).sort(w))D.push(`|<i class="${E(k)}"></i>|${k.id}|`);return D.join(`
`)}};function r(w,E,D,L){return h.registerIcon(w,E,D,L)}function i(){return h}o.B.add("base.contributions.icons",h),function(){let w=(0,I.u)();for(let E in w){let D="\\"+w[E].toString(16);h.registerIcon(E,{fontCharacter:D})}}();let c="vscode://schemas/icons",b=o.B.as(d.I.JSONContribution);b.registerSchema(c,h.getIconSchema());let l=new u.pY(()=>b.notifySchemaChanged(c),200);h.onDidChange(()=>{l.isScheduled()||l.schedule()});let a=r("widget-close",I.l.close,(0,f.NC)("widgetClose","Icon for the close action in widgets."));r("goto-previous-location",I.l.arrowUp,(0,f.NC)("previousChangeIcon","Icon for goto previous editor location.")),r("goto-next-location",I.l.arrowDown,(0,f.NC)("nextChangeIcon","Icon for goto next editor location.")),_.k.modify(I.l.sync,"spin"),_.k.modify(I.l.loading,"spin")},2321:(ut,Ie,t)=>{"use strict";var m;function B(I){return I===m.HIGH_CONTRAST_DARK||I===m.HIGH_CONTRAST_LIGHT}function u(I){return I===m.DARK||I===m.HIGH_CONTRAST_DARK}t.d(Ie,{_T:()=>u,c3:()=>B,eL:()=>m}),function(I){I.DARK="dark",I.LIGHT="light",I.HIGH_CONTRAST_DARK="hcDark",I.HIGH_CONTRAST_LIGHT="hcLight"}(m||(m={}))},7781:(ut,Ie,t)=>{"use strict";t.d(Ie,{EN:()=>x,IP:()=>f,Ic:()=>o,XE:()=>A,bB:()=>h,m6:()=>v});var m=t(4669),B=t(5976),u=t(2065),I=t(9872),_=t(2321);let A=(0,u.yh)("themeService");function x(r){return{id:r}}function v(r){switch(r){case _.eL.DARK:return"vs-dark";case _.eL.HIGH_CONTRAST_DARK:return"hc-black";case _.eL.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}let f={ThemingContribution:"base.contributions.theming"},d=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new m.Q5}onColorThemeChange(r){return this.themingParticipants.push(r),this.onThemingParticipantAddedEmitter.fire(r),(0,B.OF)(()=>{let i=this.themingParticipants.indexOf(r);this.themingParticipants.splice(i,1)})}getThemingParticipants(){return this.themingParticipants}};function o(r){return d.onColorThemeChange(r)}I.B.add(f.ThemingContribution,d);class h extends B.JT{constructor(i){super(),this.themeService=i,this.theme=i.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(c=>this.onThemeChange(c)))}onThemeChange(i){this.theme=i,this.updateStyles()}updateStyles(){}}},4862:(ut,Ie,t)=>{"use strict";t.d(Ie,{Xt:()=>u,YO:()=>B,gJ:()=>I,tJ:()=>m});let m=(0,t(2065).yh)("undoRedoService");class B{constructor(A,x){this.resource=A,this.elements=x}}class u{constructor(){this.id=u._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}u._ID=0,u.None=new u;class I{constructor(){this.id=I._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}I._ID=0,I.None=new I},382:(ut,Ie,t)=>{"use strict";t.d(Ie,{A6:()=>o,c$:()=>A,eb:()=>_,ec:()=>I,md:()=>d,p$:()=>h,uT:()=>f,x:()=>r});var m=t(3580),B=t(8721),u=(t(4767),t(666));let I=(0,t(2065).yh)("contextService");function _(i){let c=i;return typeof(c==null?void 0:c.id)=="string"&&u.o.isUri(c.uri)}function A(i){return typeof(i==null?void 0:i.id)=="string"&&!_(i)&&!function(c){let b=c;return typeof(b==null?void 0:b.id)=="string"&&u.o.isUri(b.configPath)}(i)}let x={id:"ext-dev"},v={id:"empty-window"};function f(i,c){if(typeof i=="string"||i===void 0)return typeof i=="string"?{id:(0,B.EZ)(i)}:c?x:v;let b=i;return b.configuration?{id:b.id,configPath:b.configuration}:b.folders.length===1?{id:b.id,uri:b.folders[0].uri}:{id:b.id}}class d{constructor(c,b){this.raw=b,this.uri=c.uri,this.index=c.index,this.name=c.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}let o="code-workspace",h=((0,m.NC)("codeWorkspace","Code Workspace"),"4064f6ec-cb38-4ad0-af64-ee6467e63c82");function r(i){return i.id===h}},3425:(ut,Ie,t)=>{"use strict";t.d(Ie,{Y:()=>m});let m=(0,t(2065).yh)("workspaceTrustManagementService")}},gs={};function kn(ut){var Ie=gs[ut];if(Ie!==void 0)return Ie.exports;var t=gs[ut]={exports:{}};return no[ut](t,t.exports,kn),t.exports}kn.m=no,kn.amdO={},kn.d=(ut,Ie)=>{for(var t in Ie)kn.o(Ie,t)&&!kn.o(ut,t)&&Object.defineProperty(ut,t,{enumerable:!0,get:Ie[t]})},kn.f={},kn.e=ut=>Promise.all(Object.keys(kn.f).reduce((Ie,t)=>(kn.f[t](ut,Ie),Ie),[])),kn.u=ut=>ut+".js",kn.miniCssF=ut=>{},kn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(ut){if(typeof window=="object")return window}}(),kn.o=(ut,Ie)=>Object.prototype.hasOwnProperty.call(ut,Ie),zn={},On="LiveMonacoEditor:",kn.l=(ut,Ie,t,m)=>{if(zn[ut])zn[ut].push(Ie);else{var B,u;if(t!==void 0)for(var I=document.getElementsByTagName("script"),_=0;_<I.length;_++){var A=I[_];if(A.getAttribute("src")==ut||A.getAttribute("data-webpack")==On+t){B=A;break}}B||(u=!0,(B=document.createElement("script")).charset="utf-8",B.timeout=120,kn.nc&&B.setAttribute("nonce",kn.nc),B.setAttribute("data-webpack",On+t),B.src=ut),zn[ut]=[Ie];var x=(f,d)=>{B.onerror=B.onload=null,clearTimeout(v);var o=zn[ut];if(delete zn[ut],B.parentNode&&B.parentNode.removeChild(B),o&&o.forEach(h=>h(d)),f)return f(d)},v=setTimeout(x.bind(null,void 0,{type:"timeout",target:B}),12e4);B.onerror=x.bind(null,B.onerror),B.onload=x.bind(null,B.onload),u&&document.head.appendChild(B)}},kn.r=ut=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(ut,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ut,"__esModule",{value:!0})},kn.p="/live_monaco_editor/",(()=>{var ut={179:0};kn.f.j=(m,B)=>{var u=kn.o(ut,m)?ut[m]:void 0;if(u!==0)if(u)B.push(u[2]);else{var I=new Promise((x,v)=>u=ut[m]=[x,v]);B.push(u[2]=I);var _=kn.p+kn.u(m),A=new Error;kn.l(_,x=>{if(kn.o(ut,m)&&((u=ut[m])!==0&&(ut[m]=void 0),u)){var v=x&&(x.type==="load"?"missing":x.type),f=x&&x.target&&x.target.src;A.message="Loading chunk "+m+` failed.
(`+v+": "+f+")",A.name="ChunkLoadError",A.type=v,A.request=f,u[1](A)}},"chunk-"+m,m)}};var Ie=(m,B)=>{var u,I,[_,A,x]=B,v=0;if(_.some(f=>ut[f]!==0)){for(u in A)kn.o(A,u)&&(kn.m[u]=A[u]);x&&x(kn)}for(m&&m(B);v<_.length;v++)I=_[v],kn.o(ut,I)&&ut[I]&&ut[I][0](),ut[I]=0},t=self.webpackChunkLiveMonacoEditor=self.webpackChunkLiveMonacoEditor||[];t.forEach(Ie.bind(null,0)),t.push=Ie.bind(null,t.push.bind(t))})();var er={};return(()=>{"use strict";kn.r(er),kn.d(er,{CodeEditorHook:()=>A});var ut=kn(1593);let Ie={background:"#282c34",default:"#c4cad6",lightRed:"#e06c75",blue:"#61afef",gray:"#8c92a3",green:"#98c379",purple:"#c678dd",red:"#be5046",teal:"#56b6c2",peach:"#d19a66"},t={background:"#fafafa",default:"#304254",lightRed:"#e45649",blue:"#4078F2",gray:"#707177",green:"#50a14f",purple:"#a726a4",red:"#ca1243",teal:"#56b6c2",peach:"#986801"},m=x=>[{token:"",foreground:x.default},{token:"variable",foreground:x.lightRed},{token:"constant",foreground:x.blue},{token:"constant.character.escape",foreground:x.blue},{token:"comment",foreground:x.gray},{token:"number",foreground:x.blue},{token:"regexp",foreground:x.lightRed},{token:"type",foreground:x.lightRed},{token:"string",foreground:x.green},{token:"keyword",foreground:x.purple},{token:"operator",foreground:x.peach},{token:"delimiter.bracket.embed",foreground:x.red},{token:"sigil",foreground:x.teal},{token:"function",foreground:x.blue},{token:"function.call",foreground:x.default},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"keyword.md",foreground:x.lightRed},{token:"keyword.table",foreground:x.lightRed},{token:"string.link.md",foreground:x.blue},{token:"variable.md",foreground:x.teal},{token:"string.md",foreground:x.default},{token:"variable.source.md",foreground:x.default},{token:"tag",foreground:x.lightRed},{token:"metatag",foreground:x.lightRed},{token:"attribute.name",foreground:x.peach},{token:"attribute.value",foreground:x.green},{token:"string.key",foreground:x.lightRed},{token:"keyword.json",foreground:x.blue},{token:"operator.sql",foreground:x.purple}],B={base:"vs-dark",inherit:!1,rules:m(Ie),colors:{"editor.background":Ie.background,"editor.foreground":Ie.default,"editorLineNumber.foreground":"#636d83","editorCursor.foreground":"#636d83","editor.selectionBackground":"#3e4451","editor.findMatchHighlightBackground":"#528bff3d","editorSuggestWidget.background":"#21252b","editorSuggestWidget.border":"#181a1f","editorSuggestWidget.selectedBackground":"#2c313a","input.background":"#1b1d23","input.border":"#181a1f","editorBracketMatch.border":"#282c34","editorBracketMatch.background":"#3e4451"}},u={base:"vs",inherit:!1,rules:m(t),colors:{"editor.background":t.background,"editor.foreground":t.default,"editorLineNumber.foreground":"#9d9d9f","editorCursor.foreground":"#526fff","editor.selectionBackground":"#e5e5e6","editor.findMatchHighlightBackground":"#526fff33","editorSuggestWidget.highlightForeground":t.default,"editorSuggestWidget.focusHighlightForeground":"#0431fa","editorSuggestWidget.selectedForeground":t.default,"editorSuggestWidget.background":"#eaeaeb","editorSuggestWidget.border":"#dbdbdc","editorSuggestWidget.selectedBackground":"#ffffff","input.background":"#ffffff","input.border":"#dbdbdc","editorBracketMatch.border":"#fafafa","editorBracketMatch.background":"#e5e5e6"}};ut.editor.defineTheme("default",B),ut.editor.defineTheme("light",u);let I=ut;class _{constructor(v,f,d){this.el=v,this.value=f,this.opts=d,this.standalone_code_editor=null,this._onMount=[]}isMounted(){return!!this.standalone_code_editor}mount(){if(this.isMounted())throw new Error("The monaco editor is already mounted");this._mountEditor(),this._onMount.forEach(v=>v())}onMount(v){this._onMount.push(v)}dispose(){if(this.isMounted()){this.standalone_code_editor.dispose();let v=this.standalone_code_editor.getModel();v&&v.dispose()}}_mountEditor(){this.opts.value=this.value,this.standalone_code_editor=I.editor.create(this.el,this.opts)}}let A={mounted(){let x=JSON.parse(this.el.dataset.opts);this.editor=new _(this.el,this.el.dataset.value,x),this.editor.onMount(()=>{this.el.dispatchEvent(new CustomEvent("lme:editor_mounted",{detail:{id:this.el.id,hook:this,editor:this.editor},bubbles:!0})),this.el.removeAttribute("data-value"),this.el.removeAttribute("data-opts")}),this.editor.isMounted()||this.editor.mount(),this.handleEvent("lme:change_language:"+this.el.id,v=>{let f=this.editor.standalone_code_editor.getModel();f.getLanguageId()!==v.mimeTypeOrLanguageId&&I.editor.setModelLanguage(f,v.mimeTypeOrLanguageId)}),this.handleEvent("lme:set_value:"+this.el.id,v=>{this.editor.standalone_code_editor.setValue(v.value)})},destroyed(){this.editor&&this.editor.dispose()}}})(),er})())});var vd=ph(_d()),bd={};bd.CodeEditorHook=vd.CodeEditorHook;var mh=document.querySelector("html").getAttribute("phx-socket")||"/live",fh=document.querySelector("meta[name='csrf-token']").getAttribute("content"),Cd=new LiveView.LiveSocket(mh,Phoenix.Socket,{hooks:bd,params:{_csrf_token:fh}});Cd.connect();window.liveSocket=Cd;})();
/*! For license information please see main.js.LICENSE.txt */
